+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
caching_network
+ docker network create caching_network
91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2566517248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550067712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533618176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517168640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500719104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975587.974012,       0.0,       60152,      54215,       5937,      34290,      19925,   0.566933,   0.910100,   1.100000,   1.500000,   0.284165,   0.000000,   2.191000, 414.962925
Outstanding requests per worker:
1 2 3 2 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135284,      15098,      94452,      40832,   0.589396,   0.943100,   1.100000,   1.500000,   0.288417,   0.103000,   2.415000, 484.881087
Outstanding requests per worker:
2 2 3 3 3 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135261,      15121,      99543,      35718,   0.608969,   0.978100,   1.100000,   1.600000,   0.293763,   0.108000,   2.495000, 527.063012
Outstanding requests per worker:
2 4 4 2 2 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135274,      15111,     102411,      32863,   0.627582,   1.100000,   1.100000,   1.600000,   0.298662,   0.109000,   2.493000, 549.691360
Outstanding requests per worker:
4 2 3 1 1 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135407,      14975,     104415,      30992,   0.639926,   1.100000,   1.200000,   1.600000,   0.304400,   0.106000,   2.624000, 566.555473
Outstanding requests per worker:
3 5 2 2 3 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135217,      15168,     106009,      29208,   0.645964,   1.100000,   1.200000,   1.700000,   0.314352,   0.108000,   3.630000, 579.539244
Outstanding requests per worker:
3 3 1 3 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.0,      150380,     135349,      15031,     107115,      28234,   0.652670,   1.100000,   1.200000,   1.700000,   0.313208,   0.109000,   2.200000, 588.786759
Outstanding requests per worker:
2 1 4 4 2 2 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:33   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:33   0:00 /usr/lib/linux
memcache      9 71.0  0.0 123328 37248 pts/0    Sl+  10:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75845521      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
         944531999      L1-dcache-loads:u                                           
         350551665      armv8_pmuv3_0/l2d_cache/:u                                   
         102517207      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.590940958 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2122314240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105864704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089415168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975635.974060,       0.0,       61071,      54889,       6182,      32233,      22656,   0.593619,   0.961100,   1.100000,   1.500000,   0.293547,   0.000000,   2.428000, 396.263714
Outstanding requests per worker:
2 4 2 1 2 2 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137308,      15371,      90873,      46435,   0.616002,   0.995100,   1.100000,   1.600000,   0.302016,   0.104000,   2.299000, 478.353359
Outstanding requests per worker:
2 2 3 6 2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137450,      15232,      97209,      40241,   0.637949,   1.100000,   1.200000,   1.600000,   0.311787,   0.106000,   2.527000, 526.779105
Outstanding requests per worker:
2 2 3 3 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137467,      15214,     100296,      37171,   0.649075,   1.100000,   1.200000,   1.700000,   0.316255,   0.106000,   2.385000, 552.849440
Outstanding requests per worker:
3 1 2 5 4 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137647,      15034,     102887,      34760,   0.661875,   1.100000,   1.200000,   1.700000,   0.323667,   0.106000,   3.252000, 569.624358
Outstanding requests per worker:
2 3 1 3 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137416,      15262,     104177,      33239,   0.669732,   1.100000,   1.200000,   1.700000,   0.327680,   0.111000,   2.398000, 583.337137
Outstanding requests per worker:
2 2 3 3 1 2 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137496,      15185,     105625,      31871,   0.676975,   1.100000,   1.200000,   1.800000,   0.332399,   0.116000,   3.545000, 594.152550
Outstanding requests per worker:
4 1 3 2 4 2 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:34   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   10:34   0:00 /usr/lib/linux
memcache     12 72.6  0.0 128448 44800 pts/0    Sl+  10:34   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75486843      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
         933765023      L1-dcache-loads:u                                           
         349092495      armv8_pmuv3_0/l2d_cache/:u                                   
          96810557      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999509201 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2188898816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2172449280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2155999744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975684.974109,       0.0,       62014,      55868,       6146,      33001,      22867,   0.643636,   1.100000,   1.200000,   1.600000,   0.311429,   0.000000,   2.851000, 398.268454
Outstanding requests per worker:
3 2 2 3 1 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139437,      15618,      93140,      46297,   0.664908,   1.100000,   1.200000,   1.700000,   0.326836,   0.115000,   2.864000, 482.091059
Outstanding requests per worker:
1 2 3 4 2 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139501,      15552,      98797,      40704,   0.685947,   1.100000,   1.300000,   1.800000,   0.336785,   0.114000,   2.650000, 528.180916
Outstanding requests per worker:
3 4 2 2 5 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139496,      15553,     102150,      37346,   0.703777,   1.200000,   1.300000,   1.800000,   0.346556,   0.122000,   3.088000, 553.661947
Outstanding requests per worker:
7 2 1 4 2 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139510,      15539,     104531,      34979,   0.709013,   1.200000,   1.300000,   1.800000,   0.346644,   0.121000,   2.667000, 573.697563
Outstanding requests per worker:
1 5 2 1 5 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139444,      15609,     106239,      33205,   0.718798,   1.200000,   1.300000,   1.800000,   0.350568,   0.119000,   2.821000, 587.567124
Outstanding requests per worker:
4 4 3 2 5 5 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.0,      155060,     139511,      15549,     107666,      31845,   0.731577,   1.200000,   1.300000,   1.900000,   0.354700,   0.118000,   3.891000, 598.296493
Outstanding requests per worker:
2 8 4 3 3 2 3 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:34   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 45376 pts/0    Sl+  10:34   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76596081      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
         949689142      L1-dcache-loads:u                                           
         352432841      armv8_pmuv3_0/l2d_cache/:u                                   
          99039510      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.171262343 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2233528832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975732.974157,       0.0,       63241,      56936,       6305,      33490,      23446,   0.716376,   1.200000,   1.300000,   1.800000,   0.346454,   0.000000,   2.446000, 398.311033
Outstanding requests per worker:
2 0 3 2 4 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142421,      15692,      94329,      48092,   0.734963,   1.200000,   1.300000,   1.800000,   0.352779,   0.125000,   2.780000, 478.436137
Outstanding requests per worker:
6 4 2 1 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.2,      158121,     142211,      15910,     100366,      41845,   0.766270,   1.300000,   1.400000,   1.900000,   0.367234,   0.126000,   3.094000, 525.412865
Outstanding requests per worker:
4 2 5 2 2 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142051,      16065,     103921,      38130,   0.787666,   1.300000,   1.400000,   1.900000,   0.373739,   0.133000,   2.707000, 553.313021
Outstanding requests per worker:
1 4 3 0 5 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142195,      15917,     106501,      35694,   0.819591,   1.400000,   1.500000,   2.000000,   0.389348,   0.132000,   3.411000, 572.940476
Outstanding requests per worker:
3 3 2 4 3 9 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.4,      158122,     142150,      15972,     108414,      33736,   0.826034,   1.400000,   1.500000,   2.000000,   0.392116,   0.129000,   2.820000, 586.563039
Outstanding requests per worker:
2 5 3 5 4 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142469,      15650,     109745,      32724,   0.833941,   1.400000,   1.500000,   2.000000,   0.396157,   0.126000,   3.875000, 595.576645
Outstanding requests per worker:
3 1 5 2 4 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:35   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:35   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 45952 pts/0    Sl+  10:35   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74458149      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
         972577039      L1-dcache-loads:u                                           
         350228668      armv8_pmuv3_0/l2d_cache/:u                                   
          95777579      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100581915 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2339566080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2323116544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2306667008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2290217472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
Created 8 connections total
Creating worker on tid 2022961664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975781.974206,       0.0,       63994,      57600,       6394,      33965,      23635,   0.797977,   1.300000,   1.400000,   2.000000,   0.384390,   0.000000,   3.030000, 398.478368
Outstanding requests per worker:
3 3 4 4 4 2 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.8,      160019,     144153,      15866,      95694,      48459,   0.833831,   1.400000,   1.500000,   2.000000,   0.395704,   0.128000,   3.391000, 479.162876
Outstanding requests per worker:
3 3 6 5 5 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     143974,      16031,     102129,      41845,   0.866347,   1.400000,   1.600000,   2.000000,   0.410878,   0.144000,   3.643000, 528.694625
Outstanding requests per worker:
4 4 2 6 6 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143876,      16134,     105557,      38319,   0.904330,   1.500000,   1.600000,   2.100000,   0.425552,   0.148000,   3.403000, 557.590182
Outstanding requests per worker:
7 6 3 1 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144058,      15953,     108100,      35958,   0.914841,   1.500000,   1.600000,   2.000000,   0.426152,   0.155000,   3.161000, 574.236203
Outstanding requests per worker:
5 5 2 6 4 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     143991,      16014,     109914,      34077,   0.965988,   1.600000,   1.700000,   2.500000,   0.515433,   0.154000,   7.031000, 589.601864
Outstanding requests per worker:
6 7 3 4 4 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144046,      15964,     111464,      32582,   0.968925,   1.600000,   1.700000,   2.100000,   0.453376,   0.155000,   4.697000, 600.733543
Outstanding requests per worker:
5 1 4 3 4 5 8 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:36   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   10:36   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 46336 pts/0    Sl+  10:36   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75861525      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
         984051269      L1-dcache-loads:u                                           
         355292501      armv8_pmuv3_0/l2d_cache/:u                                   
          97770602      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910723117 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2592207360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575757824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559308288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975829.974254,       0.0,       65040,      58551,       6489,      34743,      23808,   0.851742,   1.400000,   1.600000,   2.000000,   0.407545,   0.000000,   3.023000, 402.713071
Outstanding requests per worker:
3 5 6 2 2 3 5 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.0,      162605,     146338,      16267,      97827,      48511,   0.859574,   1.400000,   1.600000,   2.000000,   0.403934,   0.145000,   3.537000, 483.491615
Outstanding requests per worker:
2 4 5 2 4 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146339,      16276,     104080,      42259,   0.891888,   1.500000,   1.600000,   2.000000,   0.418196,   0.155000,   2.981000, 530.912409
Outstanding requests per worker:
2 3 4 6 4 1 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.2,      162616,     146437,      16179,     107326,      39111,   0.916630,   1.500000,   1.600000,   2.100000,   0.428490,   0.146000,   3.264000, 554.489562
Outstanding requests per worker:
4 7 1 4 6 6 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.0,      162620,     146250,      16370,     110089,      36161,   0.940424,   1.600000,   1.700000,   2.000000,   0.438899,   0.153000,   3.711000, 576.031870
Outstanding requests per worker:
4 4 2 4 2 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.2,      162606,     146222,      16384,     111948,      34274,   0.949918,   1.600000,   1.700000,   2.100000,   0.443447,   0.158000,   3.146000, 591.397396
Outstanding requests per worker:
3 4 4 2 9 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146512,      16097,     113580,      32932,   0.968166,   1.600000,   1.700000,   2.100000,   0.450886,   0.152000,   3.147000, 601.411250
Outstanding requests per worker:
6 6 2 5 3 6 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:37   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5888 pts/0    S+   10:37   0:00 /usr/lib/linux
memcache     12 72.6  0.0 130496 47040 pts/0    Sl+  10:37   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75926355      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        1003131970      L1-dcache-loads:u                                           
         358255665      armv8_pmuv3_0/l2d_cache/:u                                   
          98783392      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.580346260 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2757030400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2740580864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2724131328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2707681792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975877.974302,       0.0,       66106,      59488,       6618,      35258,      24230,   1.010089,   1.700000,   1.800000,   2.000000,   0.462995,   0.000000,   3.904000, 401.781469
Outstanding requests per worker:
3 3 5 6 8 7 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148760,      16544,      99645,      49115,   1.054955,   1.800000,   1.800000,   2.100000,   0.480926,   0.170000,   3.663000, 484.855848
Outstanding requests per worker:
7 4 3 3 5 6 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148753,      16543,     105994,      42759,   1.099296,   1.800000,   1.900000,   2.100000,   0.500230,   0.174000,   3.561000, 532.088234
Outstanding requests per worker:
7 7 3 4 5 5 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148804,      16495,     109281,      39523,   1.141748,   1.900000,   2.000000,   2.200000,   0.517669,   0.182000,   3.574000, 557.481869
Outstanding requests per worker:
4 7 8 1 2 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.6,      165303,     148672,      16631,     112134,      36538,   1.168099,   1.900000,   2.000000,   2.200000,   0.528593,   0.191000,   3.595000, 576.999496
Outstanding requests per worker:
8 9 2 4 5 6 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.6,      165313,     148822,      16491,     113825,      34997,   1.192038,   2.000000,   2.100000,   2.300000,   0.543465,   0.189000,   3.900000, 590.063337
Outstanding requests per worker:
5 6 8 5 2 3 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148644,      16656,     115209,      33435,   1.211091,   2.000000,   2.100000,   2.400000,   0.555561,   0.200000,   3.770000, 601.881233
Outstanding requests per worker:
3 3 5 6 7 8 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:38   0:00 /usr/lib/linux
memcache     10 72.6  0.0 131520 46976 pts/0    Sl+  10:38   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  10:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75204185      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        1020813662      L1-dcache-loads:u                                           
         356512459      armv8_pmuv3_0/l2d_cache/:u                                   
          96891108      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020497794 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2986340864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969891328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975925.974350,       0.0,       67219,      60472,       6747,      35737,      24735,   0.975933,   1.600000,   1.700000,   2.100000,   0.454236,   0.000000,   3.117000, 401.022490
Outstanding requests per worker:
7 1 5 4 8 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151415,      16667,     101205,      50210,   1.012929,   1.700000,   1.800000,   2.000000,   0.463947,   0.166000,   3.352000, 483.909223
Outstanding requests per worker:
6 1 5 4 6 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.2,      168066,     151432,      16634,     107878,      43554,   1.045094,   1.700000,   1.800000,   2.100000,   0.478149,   0.161000,   3.415000, 531.937886
Outstanding requests per worker:
9 2 8 4 8 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33618.0,      168090,     151282,      16808,     111290,      39992,   1.088063,   1.800000,   1.900000,   2.100000,   0.495438,   0.176000,   3.354000, 557.768280
Outstanding requests per worker:
7 4 6 4 7 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151342,      16740,     113942,      37400,   1.120419,   1.800000,   2.000000,   2.200000,   0.508579,   0.180000,   3.359000, 577.747717
Outstanding requests per worker:
6 7 4 4 6 3 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151393,      16682,     115920,      35473,   1.144049,   1.900000,   2.000000,   2.200000,   0.522069,   0.180000,   3.551000, 591.275257
Outstanding requests per worker:
8 2 7 3 8 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.6,      168068,     151295,      16773,     117562,      33733,   1.167386,   1.900000,   2.000000,   2.300000,   0.530865,   0.192000,   3.678000, 603.336336
Outstanding requests per worker:
8 10 6 2 9 5 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46976 pts/0    Sl+  10:38   0:31 memcached -t 1
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  10:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76250176      L1-dcache-load-misses:u   # [33m   7.34%[m of all L1-dcache hits  
        1039420740      L1-dcache-loads:u                                           
         361075449      armv8_pmuv3_0/l2d_cache/:u                                   
          95895953      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.720368373 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2866934272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2850484736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2834035200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575975974.974399,       0.0,       68066,      61230,       6836,      36362,      24868,   1.165367,   1.900000,   2.000000,   2.300000,   0.529334,   0.000000,   3.475000, 402.466618
Outstanding requests per worker:
5 6 1 9 7 4 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.4,      170227,     153105,      17122,     102564,      50541,   1.238914,   2.000000,   2.200000,   2.400000,   0.561504,   0.203000,   3.664000, 484.941400
Outstanding requests per worker:
7 8 3 7 9 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.2,      170221,     152913,      17308,     109161,      43752,   1.447832,   2.400000,   2.600000,   3.000000,   0.674901,   0.261000,   4.453000, 535.097846
Outstanding requests per worker:
3 4 10 7 6 2 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.2,      170236,     153158,      17078,     112723,      40435,   1.617207,   2.700000,   2.900000,   3.200000,   0.748299,   0.262000,   4.489000, 559.072239
Outstanding requests per worker:
9 10 5 1 10 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34041.0,      170205,     153127,      17078,     115281,      37846,   1.744829,   2.900000,   3.100000,   3.500000,   0.800884,   0.290000,   4.645000, 576.893252
Outstanding requests per worker:
13 3 10 7 5 13 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34011.6,      170058,     153066,      16992,     117142,      35924,   3.841335,   7.300000,   7.800000,   8.500000,   2.367953,   0.298000,   9.605000, 591.041120
Outstanding requests per worker:
29 31 23 34 38 26 36 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153279,      16938,     119067,      34212,   6.999198,  10.000000,  11.000000,  12.200000,   1.954673,   2.612000,  13.894000, 602.617867
Outstanding requests per worker:
36 40 32 19 39 35 21 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:39   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:39   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 49152 pts/0    Sl+  10:39   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  10:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76564898      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        1064730759      L1-dcache-loads:u                                           
         367834527      armv8_pmuv3_0/l2d_cache/:u                                   
          99434575      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100000990 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3006525952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990076416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973626880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976022.974447,       0.0,       69222,      62382,       6840,      37065,      25317,   1.858376,   3.100000,   3.300000,   3.600000,   0.853862,   0.000000,   4.530000, 403.008528
Outstanding requests per worker:
7 3 6 14 4 13 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34582.2,      172911,     155522,      17389,     104603,      50919,   8.112419,  12.400000,  13.300000,  15.200000,   3.894481,   0.347000,  18.200999, 488.662170
Outstanding requests per worker:
34 50 36 45 42 40 48 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34599.4,      172997,     155650,      17347,     111026,      44624,  12.352311,  19.900000,  23.000000,  27.200000,   4.435213,   6.032000,  35.176001, 533.239621
Outstanding requests per worker:
45 81 49 84 101 51 53 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34596.4,      172982,     155813,      17169,     114887,      40926,  16.483279,  21.900000,  26.700000,  39.300000,   5.133469,   7.217000,  57.859998, 559.860647
Outstanding requests per worker:
61 78 63 76 222 66 70 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34549.2,      172746,     155224,      17522,     116641,      38583,  24.770819,  69.700000,  89.000000, 130.100000,  26.223577,  10.721000, 138.972998, 576.816497
Outstanding requests per worker:
63 73 93 71 555 66 69 142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34467.8,      172339,     154965,      17374,     119117,      35848,  43.877437, 138.500000, 167.400000, 193.900000,  47.996227,  10.579000, 204.528004, 594.257878
Outstanding requests per worker:
81 77 302 84 860 88 90 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34396.6,      171983,     154921,      17062,     120335,      34586,  72.419100, 211.600000, 228.600000, 250.400000,  66.249819,  12.126000, 258.947015, 603.444246
Outstanding requests per worker:
273 211 422 243 1102 161 133 603 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:40   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:40   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47168 pts/0    Sl+  10:40   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76704008      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1097113236      L1-dcache-loads:u                                           
         374436941      armv8_pmuv3_0/l2d_cache/:u                                   
         105682285      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150730426 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3147362816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130913280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3114463744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098014208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976070.974495,       0.0,       70071,      63017,       7054,      37816,      25201,   2.702490,   5.400000,   7.400000,  10.000000,   2.008177,   0.000000,  12.436000, 408.138169
Outstanding requests per worker:
49 15 25 7 5 9 3 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35035.4,      175177,     157407,      17770,     106113,      51294,   8.534200,  12.000000,  12.600000,  13.600000,   3.328387,   0.409000,  15.248000, 490.404772
Outstanding requests per worker:
49 57 40 56 44 52 55 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35066.8,      175334,     157949,      17385,     112926,      45023,  13.491865,  15.700000,  16.100000,  17.000000,   1.748263,   5.618000,  18.575000, 535.425207
Outstanding requests per worker:
65 67 59 65 69 61 64 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35049.6,      175248,     157577,      17671,     116645,      40932,  16.848962,  18.700000,  36.100000,  56.500000,   7.545342,   8.196000,  66.275001, 563.041148
Outstanding requests per worker:
70 59 65 62 68 74 59 267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34983.6,      174918,     157528,      17390,     118941,      38587,  27.284591,  68.400000,  75.700000, 101.100000,  20.954024,  10.120000, 111.547001, 579.939700
Outstanding requests per worker:
217 174 92 89 73 86 61 463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34919.8,      174599,     157254,      17345,     120845,      36409,  46.695483, 118.500000, 140.700000, 148.700000,  40.832588,  11.318000, 158.225998, 594.077384
Outstanding requests per worker:
462 488 87 85 80 82 177 647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34783.8,      173919,     156346,      17573,     121729,      34617,  77.599349, 175.300000, 196.200000, 218.900000,  66.137307,  12.592000, 234.952003, 604.939250
Outstanding requests per worker:
737 804 271 123 147 193 354 1016 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:41   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50240 pts/0    Sl+  10:41   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77027696      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1114493316      L1-dcache-loads:u                                           
         379252176      armv8_pmuv3_0/l2d_cache/:u                                   
         104293766      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230165114 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567959040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976119.974544,       0.0,       70534,      63591,       6943,      37844,      25747,  10.798691,  13.000000,  29.000000,  49.100000,   7.924623,   0.000000,  57.866000, 403.764401
Outstanding requests per worker:
56 47 44 53 242 51 47 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35330.6,      176653,     159042,      17611,     106508,      52534,  31.894276,  63.500000,  72.900000,  88.800000,  19.947858,   7.237000, 104.440004, 485.861464
Outstanding requests per worker:
209 169 288 201 437 107 223 112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35099.0,      175495,     157867,      17628,     113044,      44823,  78.749031, 132.000000, 142.000000, 162.600000,  33.745094,  15.702000, 176.350996, 535.864113
Outstanding requests per worker:
639 348 521 619 766 333 409 403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34911.0,      174555,     157215,      17340,     116272,      40943, 156.654406, 226.700000, 241.200000, 255.500000,  47.773146,  71.510002, 265.217990, 562.253494
Outstanding requests per worker:
1036 718 942 1138 1160 682 831 766 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34712.0,      173560,     156053,      17507,     118473,      37580, 264.457183, 351.600000, 364.000000, 400.600000,  60.200084, 148.038998, 411.460996, 583.473596
Outstanding requests per worker:
1644 1201 1551 1648 1821 1157 1335 1149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34791.6,      173958,     156511,      17447,     120346,      36165, 378.365742, 470.000000, 489.500000, 506.500000,  63.167171, 255.371988, 520.365000, 594.574848
Outstanding requests per worker:
2259 1645 2084 2100 2293 1609 1722 1635 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34841.6,      174208,     156713,      17495,     122220,      34493, 482.928387, 574.500000, 587.700000, 614.900000,  66.674510, 357.194006, 623.245001, 605.586390
Outstanding requests per worker:
2739 2113 2471 2581 2634 2071 2141 2177 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48704 pts/0    Sl+  10:42   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78758029      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        1109174673      L1-dcache-loads:u                                           
         381277435      armv8_pmuv3_0/l2d_cache/:u                                   
         102665595      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049994607 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2587619840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2571170304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976168.974593,       0.0,       70765,      63803,       6962,      38001,      25802,  21.838357,  35.900000,  42.400000,  48.100000,  10.349440,   0.000000,  56.761000, 405.405200
Outstanding requests per worker:
132 203 135 154 146 122 243 206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35197.2,      175986,     158259,      17727,     106494,      51765,  90.738538, 142.200000, 154.600000, 168.700000,  37.821251,  22.282001, 179.472998, 487.488819
Outstanding requests per worker:
638 784 793 672 653 594 728 688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34936.8,      174684,     157181,      17503,     112360,      44821, 227.135680, 295.200000, 306.100000, 322.900000,  47.728433, 129.846007, 344.296992, 534.687812
Outstanding requests per worker:
1240 1521 1436 1331 1401 1325 1459 1342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34918.2,      174591,     157181,      17410,     116171,      41010, 385.721609, 457.400000, 470.500000, 494.300000,  52.284989, 269.757003, 506.524026, 560.627716
Outstanding requests per worker:
1859 2219 2268 2114 2044 2014 2142 1998 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35115.0,      175575,     157634,      17941,     119091,      38543, 528.630324, 596.200000, 608.000000, 624.700000,  49.362293, 407.972991, 640.717983, 580.392314
Outstanding requests per worker:
2323 2852 2865 2700 2665 2574 2742 2560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35241.8,      176209,     158506,      17703,     121806,      36700, 645.487770, 709.100000, 727.500000, 745.600000,  50.817188, 510.981023, 763.352990, 593.764116
Outstanding requests per worker:
2788 3360 3419 3160 3212 3043 3219 3071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35213.4,      176067,     158494,      17573,     123463,      35031, 760.342737, 827.300000, 845.300000, 863.700000,  53.400436, 612.424016, 875.486016, 605.927474
Outstanding requests per worker:
3304 3888 3914 3585 3769 3669 3726 3542 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache     10 72.6  0.0 133568 50240 pts/0    Sl+  10:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78225331      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1113565673      L1-dcache-loads:u                                           
         380967296      armv8_pmuv3_0/l2d_cache/:u                                   
         104007333      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800213161 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2367484416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976217.974642,       0.0,       70961,      63739,       7222,      38143,      25596,  30.818608,  54.400000,  62.300000,  77.900000,  17.225202,   0.000000,  86.188003, 407.017258
Outstanding requests per worker:
283 225 361 244 156 319 302 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35329.8,      176649,     159073,      17576,     106692,      52381, 138.135379, 205.200000, 215.600000, 237.000000,  50.079046,  30.720999, 258.040994, 487.363582
Outstanding requests per worker:
1177 1029 1083 910 966 979 1002 991 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35207.2,      176036,     158532,      17504,     113516,      45016, 313.616003, 388.700000, 403.700000, 429.800000,  56.202473, 195.378006, 448.949993, 535.535646
Outstanding requests per worker:
2040 1807 1882 1701 1757 1903 1884 1793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35370.4,      176852,     159092,      17760,     117480,      41612, 485.331311, 555.700000, 569.300000, 589.700000,  52.978133, 370.507985, 606.893003, 561.305515
Outstanding requests per worker:
2740 2430 2577 2425 2618 2663 2709 2423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35586.8,      177934,     160107,      17827,     120654,      39453, 629.954616, 703.300000, 718.700000, 731.600000,  50.132771, 523.909986, 738.901019, 577.182709
Outstanding requests per worker:
3342 3062 3100 3037 3158 3358 3330 2922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35636.0,      178180,     160289,      17891,     123067,      37222, 756.184062, 828.100000, 838.200000, 872.300000,  52.920665, 635.093987, 881.301999, 593.806356
Outstanding requests per worker:
3816 3699 3618 3545 3810 3873 4005 3425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35600.2,      178001,     160078,      17923,     124670,      35408, 879.455077, 953.400000, 971.400000, 987.700000,  52.765075, 747.021973, 996.775985, 605.191688
Outstanding requests per worker:
4493 4193 4281 4104 4280 4439 4525 4142 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:43   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:43   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  10:43   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76232765      L1-dcache-load-misses:u   # [33m   6.76%[m of all L1-dcache hits  
        1127642088      L1-dcache-loads:u                                           
         380405247      armv8_pmuv3_0/l2d_cache/:u                                   
         100898946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.269423295 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3124425216
starting receive base loop
num_worker_connections 1
Creating worker on tid 3107975680
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976266.974691,       0.0,       70502,      63627,       6875,      37582,      26045,  49.488332,  87.200000,  93.600000, 101.800000,  27.108660,   0.000000, 111.487001, 400.353058
Outstanding requests per worker:
429 426 409 458 435 484 466 490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35055.4,      175277,     158018,      17259,     106442,      51576, 231.839228, 341.200000, 352.900000, 372.300000,  79.917163,  83.307996, 391.209006, 488.435140
Outstanding requests per worker:
1584 1806 1669 1705 1732 1748 1672 1604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35334.2,      176671,     159127,      17544,     113383,      45744, 483.672506, 575.800000, 595.100000, 624.400000,  69.755931, 340.451986, 638.406992, 533.154154
Outstanding requests per worker:
2725 2891 2681 2808 2685 2933 2584 2742 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35765.2,      178826,     160987,      17839,     118983,      42004, 683.682422, 757.700000, 769.700000, 785.500000,  53.982436, 557.365000, 800.969005, 562.767081
Outstanding requests per worker:
3431 3679 3533 3587 3613 3697 3274 3616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35903.6,      179518,     161457,      18061,     121885,      39572, 846.654705, 918.300000, 932.200000, 951.700000,  56.925005, 700.784028, 967.774987, 579.398391
Outstanding requests per worker:
4255 4447 4213 4280 4294 4390 3927 4314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35913.6,      179568,     161552,      18016,     123616,      37936, 997.662783, 1080.700000, 1098.700000, 1129.200000,  60.745007, 842.769980, 1139.376044, 590.868569
Outstanding requests per worker:
4836 5260 4831 5033 5161 5190 4578 4863 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36063.2,      180316,     162360,      17956,     126512,      35848, 1138.798201, 1213.900000, 1238.400000, 1267.700000,  59.633054, 988.502979, 1280.063987, 606.141106
Outstanding requests per worker:
5492 5911 5455 5617 5624 5750 5220 5569 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:44   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 49920 pts/0    Sl+  10:44   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  10:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77510009      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1130955567      L1-dcache-loads:u                                           
         383429036      armv8_pmuv3_0/l2d_cache/:u                                   
         104585797      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.359538221 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326786560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310337024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293887488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976315.974740,       0.0,       70724,      63696,       7028,      37832,      25864,  60.216887, 105.900000, 111.800000, 120.100000,  33.296746,   0.000000, 130.809993, 403.948741
Outstanding requests per worker:
567 526 562 613 560 528 526 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35274.8,      176374,     158706,      17668,     106328,      52378, 277.272394, 395.600000, 408.800000, 425.500000,  88.960250, 109.370999, 437.252015, 486.025569
Outstanding requests per worker:
1994 2004 1926 1989 2037 1930 1963 2022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35721.6,      178608,     160516,      18092,     114570,      45946, 550.936798, 645.100000, 660.600000, 678.700000,  71.582235, 406.174988, 693.670988, 534.385557
Outstanding requests per worker:
3215 3156 3050 3043 3257 3077 3148 3129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36141.0,      180705,     162604,      18101,     120195,      42409, 764.678138, 841.600000, 856.900000, 869.500000,  57.631340, 633.256018, 882.696986, 561.151724
Outstanding requests per worker:
4120 4115 3962 3918 4049 4066 3942 4003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36261.4,      181307,     163151,      18156,     123551,      39600, 945.447520, 1017.300000, 1034.600000, 1057.600000,  54.623078, 834.402025, 1069.201946, 580.799768
Outstanding requests per worker:
4974 5024 4716 4796 4731 4893 4729 4816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36423.8,      182119,     163910,      18209,     126062,      37848, 1106.538469, 1169.000000, 1185.100000, 1208.800000,  49.017658, 998.196006, 1217.514038, 595.054829
Outstanding requests per worker:
5686 5704 5611 5501 5430 5518 5395 5530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36569.4,      182847,     164585,      18262,     128540,      36045, 1249.556330, 1316.700000, 1340.100000, 1360.600000,  50.348460, 1145.668983, 1376.181960, 607.808166
Outstanding requests per worker:
6373 6429 6192 6223 5882 6145 6002 6097 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:45   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:45   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  10:45   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  10:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78669577      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1143346336      L1-dcache-loads:u                                           
         384997929      armv8_pmuv3_0/l2d_cache/:u                                   
          97800522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.101315409 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2710827520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694377984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976364.974789,       0.0,       70787,      63676,       7111,      37929,      25747,  72.680096, 127.400000, 136.400000, 149.800000,  40.199708,   0.000000, 164.597005, 403.424461
Outstanding requests per worker:
630 651 684 662 732 621 676 775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35591.8,      177959,     160244,      17715,     107337,      52907, 314.822504, 442.900000, 456.500000, 475.400000,  95.791360, 127.039000, 490.828991, 486.445471
Outstanding requests per worker:
2322 2272 2296 2261 2218 2194 2171 2223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36115.2,      180576,     162514,      18062,     116211,      46303, 606.963952, 706.500000, 721.300000, 753.700000,  77.257803, 449.806988, 781.915009, 534.801426
Outstanding requests per worker:
3707 3445 3513 3460 3519 3352 3430 3445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36543.8,      182719,     164488,      18231,     121520,      42968, 835.152932, 917.100000, 928.400000, 948.800000,  60.717539, 698.033988, 963.729024, 561.042696
Outstanding requests per worker:
4581 4300 4440 4410 4513 4421 4531 4440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36662.8,      183314,     164887,      18427,     124622,      40265, 1028.324251, 1105.200000, 1117.200000, 1136.900000,  57.342289, 872.049987, 1156.787038, 580.672558
Outstanding requests per worker:
5511 5235 5399 5268 5370 5338 5404 5282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36802.0,      184010,     165680,      18330,     127699,      37981, 1210.981863, 1285.900000, 1296.200000, 1318.400000,  53.100294, 1096.181989, 1326.917052, 595.738828
Outstanding requests per worker:
6301 6020 6243 6122 6285 6025 6155 6133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36923.4,      184617,     165844,      18773,     129537,      36307, 1372.041909, 1436.500000, 1448.800000, 1477.000000,  50.009671, 1191.279054, 1500.193000, 606.771647
Outstanding requests per worker:
6966 6799 6907 6858 6583 6752 6927 6818 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:46   0:00 /usr/lib/linux
memcache      9 69.4  0.0 133568 48192 pts/0    Sl+  10:46   0:31 memcached -t 1
memcache     17  1.0  0.0   6656  4416 pts/1    Rs+  10:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76715457      L1-dcache-load-misses:u   # [33m   6.62%[m of all L1-dcache hits  
        1158163407      L1-dcache-loads:u                                           
         387785699      armv8_pmuv3_0/l2d_cache/:u                                   
         101251115      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.311340826 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2975199744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976413.974838,       0.0,       70813,      63836,       6977,      38101,      25735,  84.444686, 151.400000, 160.000000, 168.800000,  47.600113,   0.000000, 176.080003, 406.529231
Outstanding requests per worker:
807 819 771 824 832 821 826 810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35894.8,      179474,     161740,      17734,     108554,      53186, 356.934743, 494.100000, 515.200000, 540.200000, 104.177270, 156.973004, 551.823020, 488.036930
Outstanding requests per worker:
2642 2587 2379 2515 2645 2485 2660 2370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36650.2,      183251,     164879,      18372,     118097,      46782, 659.101411, 768.900000, 791.000000, 819.100000,  79.777870, 483.769000, 828.613997, 537.071841
Outstanding requests per worker:
3872 3988 3627 3768 3964 3649 3831 3581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37017.0,      185085,     166725,      18360,     123011,      43714, 893.942914, 986.500000, 1008.800000, 1043.200000,  70.482791, 734.121025, 1064.193010, 560.823674
Outstanding requests per worker:
4909 5117 4651 4620 4992 4772 4823 4568 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37385.6,      186928,     168135,      18793,     126935,      41200, 1079.986271, 1167.100000, 1180.000000, 1204.600000,  62.094471, 944.307029, 1221.279979, 580.170357
Outstanding requests per worker:
5709 5872 5521 5431 5802 5670 5508 5274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37413.4,      187067,     168210,      18857,     129443,      38767, 1238.556338, 1319.200000, 1342.500000, 1372.400000,  60.590082, 1087.396979, 1384.699941, 595.048148
Outstanding requests per worker:
6530 6188 6367 6120 6511 6409 6226 6104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37298.4,      186492,     167728,      18764,     130675,      37053, 1393.684844, 1476.500000, 1496.800000, 1527.900000,  62.234076, 1227.511048, 1569.690943, 605.694195
Outstanding requests per worker:
7377 6509 7163 6053 7308 7188 7037 7056 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:47   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:47   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  10:47   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80325868      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1168519797      L1-dcache-loads:u                                           
         395020417      armv8_pmuv3_0/l2d_cache/:u                                   
         102581638      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871299897 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2604331520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2587881984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2571432448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976462.974887,       0.0,       70134,      63243,       6891,      37400,      25843, 103.350384, 184.800000, 197.200000, 209.700000,  58.702772,   0.000000, 221.786007, 400.971190
Outstanding requests per worker:
1015 1040 1036 1084 1015 1010 823 924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36077.8,      180389,     162533,      17856,     108687,      53846, 408.267299, 551.200000, 573.300000, 599.300000, 109.820761, 167.981997, 627.529025, 483.966573
Outstanding requests per worker:
2898 3051 2897 2871 2811 2848 2609 2708 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36897.4,      184487,     165963,      18524,     118397,      47566, 725.057860, 829.100000, 847.100000, 874.900000,  82.119694, 488.353014, 889.955997, 532.858137
Outstanding requests per worker:
4152 4334 4315 4206 4128 4030 4032 4149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37115.0,      185575,     167156,      18419,     123824,      43332, 969.551478, 1074.400000, 1099.100000, 1132.900000,  74.937345, 823.222995, 1157.821059, 562.994311
Outstanding requests per worker:
5432 5453 5644 4842 5218 5366 5272 5055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37094.8,      185474,     166898,      18576,     126195,      40703, 1168.604875, 1319.800000, 1342.200000, 1377.500000, 117.015891, 844.031990, 1405.244946, 581.399825
Outstanding requests per worker:
6132 6632 6836 4555 6107 6656 6525 4697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36827.8,      184139,     165737,      18402,     127719,      38018, 1345.085064, 1566.200000, 1597.000000, 1626.800000, 187.802546, 871.654987, 1650.975943, 597.718108
Outstanding requests per worker:
6409 6639 8057 4982 6165 7979 7933 4429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36539.2,      182696,     164366,      18330,     128148,      36218, 1449.053372, 1740.600000, 1817.500000, 1917.300000, 242.421351, 921.051025, 1955.047011, 606.502501
Outstanding requests per worker:
6328 7007 7143 5094 5965 7771 9074 5644 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:47   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:47   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49152 pts/0    Sl+  10:47   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80496113      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1163028894      L1-dcache-loads:u                                           
         392914918      armv8_pmuv3_0/l2d_cache/:u                                   
         107255175      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141714423 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3037786624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976510.974935,       0.0,       71089,      63911,       7178,      38037,      25874, 103.296264, 184.700000, 198.500000, 215.300000,  59.599978,   0.000000, 229.862005, 405.722755
Outstanding requests per worker:
966 1092 919 995 1063 1123 1064 927 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  6.000006,   30257.6,      181546,     163452,      18094,     110105,      53347, 429.547409, 587.700000, 608.100000, 632.800000, 122.109678, 185.315996, 646.398008, 489.659600
Outstanding requests per worker:
3098 3181 2983 3139 3147 3003 3102 2989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37339.8,      186699,     168067,      18632,     120644,      47423, 770.180869, 883.200000, 898.500000, 935.200000,  84.892450, 585.584998, 960.035026, 537.318974
Outstanding requests per worker:
4452 4725 4494 4534 4560 4470 4450 4303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37465.4,      187327,     168657,      18670,     124642,      44015, 1027.625381, 1138.900000, 1165.500000, 1198.200000,  80.397219, 823.580027, 1224.493980, 561.907522
Outstanding requests per worker:
5856 5478 4407 5797 6006 5063 5290 5582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37033.2,      185166,     166498,      18668,     126029,      40469, 1218.424049, 1366.600000, 1403.200000, 1451.200000, 113.559153, 876.899004, 1480.033994, 581.390191
Outstanding requests per worker:
5268 6064 5258 7310 6321 4845 5642 7139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36964.4,      184822,     166301,      18521,     128317,      37984, 1337.147410, 1660.100000, 1725.200000, 1787.600000, 203.796923, 900.436997, 1811.923027, 596.653075
Outstanding requests per worker:
5727 6925 5196 8593 6001 5708 6364 8889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36784.6,      183923,     165487,      18436,     129518,      35969, 1439.430867, 1910.200000, 1983.600000, 2087.300000, 283.725199, 980.813980, 2123.965979, 609.189725
Outstanding requests per worker:
6730 6297 5586 8658 6062 5614 6502 9365 
Ran for 33.000033, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:48   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:48   0:00 /usr/lib/linux
memcache     10 71.0  0.0 134592 50240 pts/0    Sl+  10:48   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81422908      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1170380050      L1-dcache-loads:u                                           
         396767476      armv8_pmuv3_0/l2d_cache/:u                                   
         107526542      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871792193 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2591224320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574774784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976560.974985,       0.0,       70846,      63748,       7098,      38042,      25706, 116.927979, 207.900000, 219.400000, 231.900000,  66.113968,   0.000000, 240.786999, 407.467419
Outstanding requests per worker:
1176 1170 1104 1130 1183 1157 1160 1104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36578.2,      182891,     164400,      18491,     110737,      53663, 460.325716, 622.600000, 640.600000, 666.100000, 124.290533, 216.086999, 696.246028, 490.266484
Outstanding requests per worker:
3465 3284 3262 3249 3283 3153 3287 3330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37509.0,      187545,     168603,      18942,     121398,      47205, 810.254219, 930.700000, 948.300000, 988.600000,  89.595549, 627.871990, 1018.790007, 539.991821
Outstanding requests per worker:
4889 4940 4715 4694 4136 4784 4891 4234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37417.6,      187088,     168658,      18430,     125096,      43562, 1055.222419, 1212.300000, 1244.800000, 1285.300000, 118.308833, 690.056980, 1313.820958, 564.910470
Outstanding requests per worker:
5133 5258 5738 6294 4541 6318 6545 5467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36920.2,      184601,     166016,      18585,     125918,      40098, 1193.385191, 1417.700000, 1458.500000, 1508.900000, 183.994615, 741.665006, 1553.838968, 583.084474
Outstanding requests per worker:
5303 5720 5963 7152 4879 6037 6167 5293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36821.0,      184105,     165927,      18178,     128056,      37871, 1249.931674, 1474.100000, 1504.900000, 1553.400000, 184.764928, 774.200976, 1599.347949, 597.293955
Outstanding requests per worker:
4713 6062 6006 6305 4291 6560 6547 4922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36740.2,      183701,     165309,      18392,     129196,      36113, 1284.663926, 1486.000000, 1528.700000, 1575.800000, 169.337463, 818.144977, 1610.579014, 607.281745
Outstanding requests per worker:
5454 5771 6608 6810 5008 6891 7073 5453 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:49   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:49   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  10:49   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  10:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80793442      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1172337520      L1-dcache-loads:u                                           
         397253502      armv8_pmuv3_0/l2d_cache/:u                                   
         106797771      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410238490 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2909860352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976608.975033,       0.0,       60157,      54132,       6025,      31752,      22380,   0.535293,   0.863100,   0.997100,   1.400000,   0.272058,   0.000000,   2.089000, 394.341609
Outstanding requests per worker:
5 3 1 1 0 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30075.8,      150379,     135439,      14940,      89849,      45590,   0.540697,   0.865100,   1.100000,   1.500000,   0.273107,   0.101000,   2.169000, 477.776135
Outstanding requests per worker:
3 3 2 1 2 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135276,      15114,      95069,      40207,   0.547328,   0.880100,   1.100000,   1.500000,   0.276612,   0.084000,   2.232000, 522.124841
Outstanding requests per worker:
2 2 4 3 3 2 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135428,      14963,      98587,      36841,   0.564378,   0.922100,   1.100000,   1.500000,   0.285677,   0.095000,   2.153000, 550.192951
Outstanding requests per worker:
3 3 1 3 2 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135302,      15091,     100875,      34427,   0.578795,   0.940100,   1.100000,   1.500000,   0.291506,   0.100000,   2.497000, 569.946091
Outstanding requests per worker:
1 3 3 3 2 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135106,      15278,     102631,      32475,   0.581504,   0.950100,   1.100000,   1.500000,   0.291294,   0.103000,   2.390000, 584.398739
Outstanding requests per worker:
3 2 2 2 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135354,      15032,     104301,      31053,   0.589201,   0.961100,   1.100000,   1.500000,   0.293509,   0.102000,   2.802000, 596.776889
Outstanding requests per worker:
2 2 1 1 2 4 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:50   0:00 /usr/lib/linux
memcache      8 71.0  0.0 127424 42880 pts/0    Sl+  10:50   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76624876      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
         915051954      L1-dcache-loads:u                                           
         350274012      armv8_pmuv3_0/l2d_cache/:u                                   
          97655472      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.421087745 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2630873600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2614424064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2597974528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2581524992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565075456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976657.975082,       0.0,       61071,      55091,       5980,      32329,      22762,   0.579871,   0.939100,   1.100000,   1.500000,   0.284937,   0.000000,   2.161000, 395.079178
Outstanding requests per worker:
3 4 1 2 1 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137405,      15279,      91033,      46372,   0.604826,   0.976100,   1.100000,   1.500000,   0.294551,   0.105000,   2.259000, 477.726713
Outstanding requests per worker:
3 2 1 2 2 2 0 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137272,      15409,      96622,      40650,   0.616470,   0.983100,   1.100000,   1.600000,   0.295529,   0.106000,   2.487000, 524.122159
Outstanding requests per worker:
4 3 2 3 3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.4,      152692,     137322,      15370,     100405,      36917,   0.633533,   1.100000,   1.100000,   1.600000,   0.301807,   0.106000,   2.879000, 553.057908
Outstanding requests per worker:
3 1 2 1 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137437,      15243,     102493,      34944,   0.645667,   1.100000,   1.100000,   1.600000,   0.305977,   0.110000,   2.583000, 569.136186
Outstanding requests per worker:
3 3 1 3 2 1 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137338,      15339,     104407,      32931,   0.659217,   1.100000,   1.200000,   1.700000,   0.316231,   0.104000,   2.648000, 583.702988
Outstanding requests per worker:
1 2 3 2 3 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137499,      15190,     105885,      31614,   0.665053,   1.100000,   1.200000,   1.700000,   0.321542,   0.106000,   2.966000, 596.406963
Outstanding requests per worker:
4 0 2 1 3 2 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:51   0:00 /usr/lib/linux
memcache      8 71.0  0.0 128448 43904 pts/0    Sl+  10:51   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74820118      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
         934143454      L1-dcache-loads:u                                           
         349557169      armv8_pmuv3_0/l2d_cache/:u                                   
          98196617      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971185657 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3030184448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3013734912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997285376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980835840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964386304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976706.975131,       0.0,       62017,      55911,       6106,      32636,      23275,   0.650189,   1.100000,   1.200000,   1.600000,   0.313401,   0.000000,   2.607000, 394.849833
Outstanding requests per worker:
5 3 4 1 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139276,      15771,      92697,      46579,   0.678655,   1.100000,   1.200000,   1.800000,   0.331476,   0.115000,   2.423000, 480.397908
Outstanding requests per worker:
3 1 3 3 7 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139443,      15609,      98784,      40659,   0.696793,   1.200000,   1.300000,   1.800000,   0.342348,   0.116000,   2.615000, 528.389894
Outstanding requests per worker:
2 4 4 2 2 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139651,      15405,     101889,      37762,   0.705113,   1.200000,   1.300000,   1.800000,   0.346026,   0.121000,   2.972000, 551.411390
Outstanding requests per worker:
4 4 4 5 1 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139407,      15646,     104116,      35291,   0.719529,   1.200000,   1.300000,   1.800000,   0.343520,   0.112000,   2.503000, 571.597703
Outstanding requests per worker:
4 7 4 1 2 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139419,      15632,     106237,      33182,   0.730873,   1.200000,   1.300000,   1.800000,   0.348187,   0.124000,   2.784000, 588.323830
Outstanding requests per worker:
2 4 2 3 4 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139704,      15348,     108013,      31691,   0.734701,   1.200000,   1.300000,   1.900000,   0.359729,   0.126000,   3.010000, 598.715069
Outstanding requests per worker:
3 4 3 4 2 2 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:51   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:51   0:00 /usr/lib/linux
memcache     10 72.6  0.0 130496 44992 pts/0    Sl+  10:51   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  10:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74910936      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
         951969762      L1-dcache-loads:u                                           
         349770216      armv8_pmuv3_0/l2d_cache/:u                                   
          97284076      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730194561 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2513564160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497114624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976755.975180,       0.0,       63240,      56972,       6268,      33714,      23258,   0.696589,   1.200000,   1.300000,   1.800000,   0.339599,   0.000000,   2.462000, 400.599593
Outstanding requests per worker:
4 4 3 2 2 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142213,      15904,      95063,      47150,   0.719384,   1.200000,   1.300000,   1.800000,   0.347796,   0.122000,   2.699000, 483.558985
Outstanding requests per worker:
1 2 2 3 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142301,      15819,     101041,      41260,   0.766066,   1.300000,   1.400000,   2.000000,   0.446969,   0.124000,   7.371000, 529.235768
Outstanding requests per worker:
3 3 3 1 3 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.8,      158109,     142217,      15892,     104171,      38046,   0.761159,   1.300000,   1.400000,   1.900000,   0.366821,   0.124000,   3.265000, 554.224840
Outstanding requests per worker:
4 2 3 4 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142242,      15868,     106383,      35859,   0.772699,   1.300000,   1.400000,   1.900000,   0.370029,   0.120000,   3.751000, 571.382327
Outstanding requests per worker:
4 3 4 1 5 6 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142213,      15905,     108318,      33895,   0.790629,   1.300000,   1.400000,   2.000000,   0.380434,   0.128000,   2.915000, 586.990388
Outstanding requests per worker:
1 4 5 2 5 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142288,      15829,     109855,      32433,   0.804405,   1.300000,   1.400000,   2.000000,   0.387319,   0.128000,   4.485000, 598.622083
Outstanding requests per worker:
5 5 3 6 4 4 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:52   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46976 pts/0    Sl+  10:52   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76118244      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
         972165685      L1-dcache-loads:u                                           
         354570070      armv8_pmuv3_0/l2d_cache/:u                                   
          97109791      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.149713210 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2821059072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2804609536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2788160000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2771710464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976804.975229,       0.0,       64000,      57567,       6433,      34108,      23459,   0.770648,   1.300000,   1.400000,   1.800000,   0.362024,   0.000000,   3.015000, 400.260566
Outstanding requests per worker:
4 3 5 4 5 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143939,      16073,      95863,      48076,   0.808424,   1.300000,   1.400000,   1.900000,   0.380257,   0.125000,   2.868000, 481.679454
Outstanding requests per worker:
1 6 3 4 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.2,      160021,     143674,      16347,     101922,      41752,   0.846705,   1.400000,   1.500000,   2.000000,   0.398457,   0.136000,   2.861000, 528.923995
Outstanding requests per worker:
5 3 5 3 5 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143769,      16241,     105080,      38689,   0.875862,   1.500000,   1.600000,   2.000000,   0.412891,   0.139000,   3.420000, 553.663321
Outstanding requests per worker:
5 4 6 2 5 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144021,      15992,     107695,      36326,   0.897585,   1.500000,   1.600000,   2.100000,   0.422020,   0.138000,   2.928000, 572.095812
Outstanding requests per worker:
2 6 1 3 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143951,      16059,     109631,      34320,   0.908034,   1.500000,   1.600000,   2.100000,   0.427086,   0.144000,   3.464000, 586.397774
Outstanding requests per worker:
3 2 4 5 5 6 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144032,      15980,     111057,      32975,   0.924123,   1.500000,   1.600000,   2.100000,   0.432812,   0.154000,   3.146000, 597.499681
Outstanding requests per worker:
4 6 1 4 2 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:53   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:53   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 45952 pts/0    Sl+  10:53   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76878062      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
         983092860      L1-dcache-loads:u                                           
         355190626      armv8_pmuv3_0/l2d_cache/:u                                   
          97195603      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.430325456 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2242572800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226123264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976853.975278,       0.0,       65030,      58399,       6631,      34564,      23835,   0.889421,   1.500000,   1.600000,   2.100000,   0.419900,   0.000000,   3.366000, 400.056439
Outstanding requests per worker:
3 3 5 5 6 5 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.8,      162614,     146340,      16274,      97653,      48687,   0.929586,   1.600000,   1.700000,   2.200000,   0.437675,   0.153000,   3.077000, 482.067186
Outstanding requests per worker:
7 4 3 5 4 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146277,      16332,     103525,      42752,   0.956193,   1.600000,   1.700000,   2.200000,   0.450392,   0.158000,   3.323000, 527.361752
Outstanding requests per worker:
1 2 5 7 6 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146317,      16300,     107318,      38999,   0.992072,   1.600000,   1.800000,   2.100000,   0.460689,   0.159000,   3.210000, 555.736381
Outstanding requests per worker:
2 2 5 6 6 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146492,      16119,     109608,      36884,   0.999581,   1.700000,   1.800000,   2.100000,   0.464944,   0.164000,   3.279000, 571.956667
Outstanding requests per worker:
7 2 4 7 6 3 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.6,      162623,     146367,      16256,     111703,      34664,   1.021566,   1.700000,   1.800000,   2.100000,   0.469741,   0.169000,   3.321000, 588.410325
Outstanding requests per worker:
5 7 2 5 3 2 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146354,      16256,     113236,      33118,   1.038865,   1.700000,   1.800000,   2.000000,   0.474320,   0.168000,   3.329000, 601.155247
Outstanding requests per worker:
4 4 7 2 7 6 5 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:54   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45952 pts/0    Sl+  10:54   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75376214      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        1003780662      L1-dcache-loads:u                                           
         354344678      armv8_pmuv3_0/l2d_cache/:u                                   
          95543965      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310474586 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2563699200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2547249664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530800128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514350592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497901056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976901.975326,       0.0,       66108,      59506,       6602,      35347,      24159,   0.893576,   1.500000,   1.600000,   1.900000,   0.415291,   0.000000,   2.969000, 402.607065
Outstanding requests per worker:
5 4 4 3 2 1 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148734,      16566,      99302,      49432,   0.930381,   1.500000,   1.600000,   1.900000,   0.430661,   0.147000,   3.053000, 483.550594
Outstanding requests per worker:
4 2 4 2 5 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148735,      16566,     105655,      43080,   0.969734,   1.600000,   1.700000,   2.000000,   0.446922,   0.161000,   3.134000, 530.241167
Outstanding requests per worker:
4 2 4 2 5 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148677,      16629,     109153,      39524,   0.997530,   1.600000,   1.800000,   2.000000,   0.460194,   0.163000,   3.363000, 557.661407
Outstanding requests per worker:
2 8 3 7 6 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148780,      16526,     112016,      36764,   1.023332,   1.700000,   1.800000,   2.100000,   0.471494,   0.179000,   4.185000, 575.576408
Outstanding requests per worker:
4 3 2 3 7 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148631,      16670,     113556,      35075,   1.050498,   1.700000,   1.800000,   2.100000,   0.483664,   0.165000,   3.423000, 588.900337
Outstanding requests per worker:
5 3 4 2 4 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148907,      16395,     115227,      33680,   1.063021,   1.800000,   1.900000,   2.100000,   0.488666,   0.168000,   3.612000, 601.715104
Outstanding requests per worker:
4 2 4 2 6 7 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:55   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 46976 pts/0    Sl+  10:55   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75986772      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        1021115370      L1-dcache-loads:u                                           
         361272459      armv8_pmuv3_0/l2d_cache/:u                                   
          97763926      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001102704 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3138580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3122131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3105681920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976950.975375,       0.0,       67211,      60456,       6755,      35989,      24467,   1.007536,   1.700000,   1.800000,   2.000000,   0.460951,   0.000000,   3.180000, 403.685590
Outstanding requests per worker:
5 6 2 5 3 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151318,      16761,     100662,      50656,   1.044086,   1.700000,   1.800000,   2.000000,   0.476365,   0.180000,   3.332000, 482.312706
Outstanding requests per worker:
1 2 6 4 7 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151225,      16848,     107880,      43345,   1.104819,   1.800000,   1.900000,   2.100000,   0.500547,   0.189000,   3.465000, 533.280503
Outstanding requests per worker:
6 7 8 8 2 4 3 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.4,      168087,     151320,      16767,     111508,      39812,   1.144088,   1.900000,   2.000000,   2.200000,   0.515998,   0.189000,   3.247000, 560.300701
Outstanding requests per worker:
3 4 8 7 9 2 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151225,      16854,     113924,      37301,   1.179729,   1.900000,   2.100000,   2.300000,   0.536772,   0.195000,   3.448000, 577.404993
Outstanding requests per worker:
8 9 4 2 5 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151408,      16670,     116072,      35336,   1.202199,   2.000000,   2.100000,   2.400000,   0.545603,   0.197000,   3.454000, 591.743996
Outstanding requests per worker:
2 3 7 5 8 8 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151331,      16748,     117461,      33870,   1.232534,   2.000000,   2.100000,   2.500000,   0.563942,   0.219000,   3.593000, 603.047558
Outstanding requests per worker:
9 8 4 3 6 8 7 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:55   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:56   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46912 pts/0    Sl+  10:56   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75694701      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        1040084181      L1-dcache-loads:u                                           
         361596782      armv8_pmuv3_0/l2d_cache/:u                                   
         100145319      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990523161 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3095785984
starting receive base loop
num_worker_connections 1
Creating worker on tid 3079336448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3062886912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046437376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029987840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575976999.975424,       0.0,       68071,      61340,       6731,      36075,      25265,   1.133294,   1.900000,   2.000000,   2.200000,   0.514346,   0.000000,   3.300000, 398.793707
Outstanding requests per worker:
5 7 4 3 7 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153295,      16930,     102298,      50997,   1.374553,   2.100000,   3.200000,   5.700000,   0.975674,   0.181000,   9.832000, 483.522398
Outstanding requests per worker:
3 4 8 6 8 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.4,      170232,     153072,      17160,     109014,      44058,   1.236395,   2.000000,   2.200000,   2.400000,   0.561225,   0.197000,   3.643000, 532.162884
Outstanding requests per worker:
2 3 8 5 6 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.0,      170220,     153277,      16943,     112948,      40329,   1.346605,   2.200000,   2.400000,   2.700000,   0.614947,   0.213000,   3.592000, 559.957534
Outstanding requests per worker:
6 8 3 9 4 3 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     153269,      16953,     115187,      38082,   1.485326,   2.500000,   2.700000,   3.000000,   0.685618,   0.259000,   4.139000, 575.765954
Outstanding requests per worker:
9 10 4 2 4 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.0,      170235,     153190,      17045,     117225,      35965,   1.648914,   2.700000,   2.900000,   3.600000,   0.776287,   0.261000,   4.646000, 590.341034
Outstanding requests per worker:
9 10 4 2 3 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34037.8,      170189,     153158,      17031,     118709,      34449,   1.937266,   3.100000,   3.700000,   6.400000,   1.123703,   0.279000,   8.738000, 601.428636
Outstanding requests per worker:
3 4 13 7 19 14 12 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:56   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 47040 pts/0    Sl+  10:56   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76225313      L1-dcache-load-misses:u   # [33m   7.23%[m of all L1-dcache hits  
        1053740764      L1-dcache-loads:u                                           
         364617944      armv8_pmuv3_0/l2d_cache/:u                                   
          95141616      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.300967334 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2829644288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2813194752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2796745216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2780295680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2763846144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977048.975473,       0.0,       69230,      62329,       6901,      37027,      25302,   1.504860,   2.500000,   2.800000,   3.100000,   0.710331,   0.000000,   3.654000, 403.544867
Outstanding requests per worker:
12 11 6 5 13 7 10 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34626.4,      173132,     155924,      17208,     104366,      51558,   2.682521,   5.300000,   7.100000,   9.900000,   1.943591,   0.335000,  12.525000, 484.955440
Outstanding requests per worker:
12 3 8 7 37 25 14 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34582.4,      172912,     155754,      17158,     110747,      45007,   8.379850,  11.700000,  12.300000,  13.300000,   2.815020,   0.386000,  18.976999, 531.562682
Outstanding requests per worker:
42 57 37 34 39 32 59 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34619.2,      173096,     156041,      17055,     115067,      40974,  11.567308,  14.700000,  15.400000,  16.500000,   2.189318,   5.521000,  19.390000, 560.267026
Outstanding requests per worker:
42 65 47 59 50 71 68 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34635.0,      173175,     155771,      17404,     117323,      38448,  12.893295,  15.600000,  16.200000,  17.200000,   2.056393,   6.116000,  19.478001, 577.869122
Outstanding requests per worker:
57 50 60 48 62 58 52 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34617.4,      173087,     155646,      17441,     119239,      36407,  14.022160,  16.700000,  17.300000,  18.200000,   1.990527,   7.195000,  20.397000, 591.290293
Outstanding requests per worker:
63 60 64 69 67 83 63 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34618.0,      173090,     155814,      17276,     121032,      34782,  15.352823,  17.500000,  18.500000,  20.200000,   1.697293,   8.145000,  27.138000, 604.436752
Outstanding requests per worker:
86 78 71 84 84 76 81 72 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:57   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49216 pts/0    Sl+  10:57   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78378800      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        1097693086      L1-dcache-loads:u                                           
         379488335      armv8_pmuv3_0/l2d_cache/:u                                   
         105757429      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040921724 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2108224000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091774464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977097.975522,       0.0,       69902,      62892,       7010,      37115,      25777,   3.981230,   8.100000,   9.700000,  12.000000,   2.816491,   0.000000,  14.077000, 400.678878
Outstanding requests per worker:
42 39 45 31 43 33 37 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35045.2,      175226,     157663,      17563,     105709,      51954,  13.273128,  16.800000,  17.500000,  19.800000,   3.002028,   4.594000,  22.601999, 487.566315
Outstanding requests per worker:
69 74 61 67 63 60 66 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34988.2,      174941,     157297,      17644,     112166,      45131,  20.154485,  31.800000,  36.800000,  50.800000,   7.985556,   8.464000,  62.221002, 533.698437
Outstanding requests per worker:
82 132 80 165 74 261 86 163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34847.8,      174239,     156812,      17427,     115781,      41031,  45.015793,  67.300000,  80.100000,  91.600000,  18.796610,  13.567000,  97.347997, 560.730722
Outstanding requests per worker:
256 315 303 276 251 364 219 271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34684.2,      173421,     155877,      17544,     117743,      38134,  91.389232, 116.400000, 127.500000, 145.800000,  20.108665,  46.702001, 154.653996, 579.090174
Outstanding requests per worker:
508 552 568 521 464 654 509 514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34569.2,      172846,     155615,      17231,     119454,      36161, 157.102832, 193.900000, 200.800000, 210.600000,  26.194606, 100.034997, 221.488997, 592.015384
Outstanding requests per worker:
746 955 923 793 796 913 886 894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34436.2,      172181,     155068,      17113,     120575,      34493, 243.487881, 289.600000, 299.500000, 317.500000,  33.358612, 167.206004, 328.862011, 604.334640
Outstanding requests per worker:
1097 1412 1338 1271 1265 1321 1189 1278 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:58   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:58   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 49152 pts/0    Sl+  10:58   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77858156      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1103883414      L1-dcache-loads:u                                           
         379455412      armv8_pmuv3_0/l2d_cache/:u                                   
         109550645      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.701430334 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2886398464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869948928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2853499392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2837049856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Creating worker on tid 2584343040
num_worker_connections 1
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977145.975570,       0.0,       70707,      63512,       7195,      37776,      25736,   7.981595,  11.900000,  12.500000,  19.900000,   3.864407,   0.000000,  28.448001, 404.766454
Outstanding requests per worker:
47 52 49 39 41 108 55 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35465.6,      177328,     159406,      17922,     107420,      51986,  18.801445,  26.000000,  48.000000,  57.700000,   9.829421,   8.003000,  67.450002, 489.851593
Outstanding requests per worker:
86 92 89 80 95 275 96 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35298.0,      176490,     158731,      17759,     113910,      44821,  39.539823,  93.500000, 106.200000, 134.600000,  30.766653,  12.782000, 143.592000, 537.489394
Outstanding requests per worker:
315 82 501 78 187 621 262 156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35108.0,      175540,     157873,      17667,     116845,      41028,  91.862758, 157.900000, 195.000000, 203.700000,  50.811203,  13.041000, 217.868000, 562.095482
Outstanding requests per worker:
590 268 690 340 467 953 632 515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34950.2,      174751,     157084,      17667,     118780,      38304, 166.621205, 242.100000, 263.400000, 306.600000,  57.060939,  57.953998, 322.301000, 579.693763
Outstanding requests per worker:
956 579 1134 627 934 1407 967 899 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34803.2,      174016,     156583,      17433,     120382,      36201, 262.838713, 355.400000, 397.500000, 420.000000,  67.967501, 124.224998, 429.134011, 594.767446
Outstanding requests per worker:
1553 1071 1612 1118 1263 1873 1399 1390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34765.8,      173829,     156609,      17220,     122146,      34463, 371.717504, 464.800000, 492.600000, 519.100000,  69.670145, 234.475002, 534.244001, 606.848016
Outstanding requests per worker:
2086 1402 2160 1759 1635 2349 1997 1852 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:59   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50304 pts/0    Sl+  10:59   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77976483      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1114552352      L1-dcache-loads:u                                           
         381736720      armv8_pmuv3_0/l2d_cache/:u                                   
         105249778      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030109012 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2767122944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2750673408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2734223872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717774336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701324800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977194.975619,       0.0,       71020,      63940,       7080,      38138,      25802,  18.010713,  29.400000,  39.100000,  52.900000,   9.510839,   0.000000,  60.963999, 405.212746
Outstanding requests per worker:
81 128 79 177 82 85 257 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35337.8,      176689,     159011,      17678,     106664,      52347,  73.920939, 127.600000, 135.800000, 150.400000,  34.626238,  13.501000, 161.020994, 486.853111
Outstanding requests per worker:
510 589 524 719 471 451 690 633 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35031.6,      175158,     157572,      17586,     112636,      44936, 194.993244, 261.000000, 274.800000, 289.600000,  46.617337,  93.888000, 308.086008, 535.049311
Outstanding requests per worker:
1128 1214 1296 1287 945 1111 1261 1389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34994.6,      174973,     157509,      17464,     116453,      41056, 338.934245, 412.300000, 429.900000, 448.200000,  50.752613, 201.934993, 462.392986, 562.355250
Outstanding requests per worker:
1717 1867 1895 2011 1582 1731 1969 2077 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35134.8,      175674,     158149,      17525,     119389,      38760, 477.102775, 547.600000, 562.700000, 575.600000,  51.592951, 347.460985, 587.177992, 578.718108
Outstanding requests per worker:
2320 2453 2465 2630 2127 2216 2563 2594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35143.8,      175719,     158151,      17568,     121213,      36938, 600.220361, 677.200000, 689.900000, 712.000000,  58.658857, 468.252003, 719.026983, 592.964578
Outstanding requests per worker:
2888 3061 3090 3216 2548 2787 3144 3112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35289.2,      176446,     158775,      17671,     123638,      35137, 714.780036, 780.300000, 799.600000, 851.900000,  60.301062, 563.683987, 871.760011, 605.013762
Outstanding requests per worker:
3403 3596 3551 3905 2956 3259 3511 3420 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:00   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:00   0:00 /usr/lib/linux
memcache     10 72.6  0.0 133568 49280 pts/0    Sl+  11:00   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78047772      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1114744802      L1-dcache-loads:u                                           
         381199980      armv8_pmuv3_0/l2d_cache/:u                                   
         104277909      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920733596 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2240868864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224419328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977243.975668,       0.0,       70423,      63355,       7068,      37874,      25481,  38.386245,  66.900000,  75.900000,  86.300000,  20.983653,   0.000000,  96.823998, 406.317954
Outstanding requests per worker:
317 304 307 416 307 317 323 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34990.6,      174953,     157467,      17486,     105803,      51664, 179.595402, 265.200000, 278.100000, 303.700000,  63.918451,  59.317000, 327.257007, 487.228873
Outstanding requests per worker:
1463 1091 1389 1347 1277 1261 1268 1281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35109.0,      175545,     157891,      17654,     112489,      45402, 385.015345, 464.200000, 476.000000, 484.300000,  59.086477, 237.326995, 504.278004, 533.067509
Outstanding requests per worker:
2241 1987 2286 2194 2197 2202 2194 2205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35262.8,      176314,     158843,      17471,     117174,      41669, 566.280261, 639.500000, 653.900000, 682.000000,  53.933397, 434.130013, 700.342000, 560.679816
Outstanding requests per worker:
2909 2753 3094 3186 2978 2926 3025 2980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35461.6,      177308,     159476,      17832,     120315,      39161, 727.556338, 799.900000, 812.000000, 830.500000,  51.322138, 601.455986, 841.759026, 578.848560
Outstanding requests per worker:
3621 3392 3744 3821 3770 3479 3701 3682 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35557.2,      177786,     160119,      17667,     122875,      37244, 870.449703, 940.500000, 956.900000, 969.100000,  51.684461, 735.421002, 986.912012, 594.352938
Outstanding requests per worker:
4370 3919 4370 4420 4485 4093 4218 4216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35627.2,      178136,     160332,      17804,     124998,      35334, 996.589463, 1066.700000, 1083.800000, 1103.500000,  53.943693, 850.878000, 1111.616015, 605.824944
Outstanding requests per worker:
4897 4484 4959 5053 5059 4632 4651 4892 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:00   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:00   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 49280 pts/0    Sl+  11:00   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77613155      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1120881642      L1-dcache-loads:u                                           
         380055401      armv8_pmuv3_0/l2d_cache/:u                                   
         109056379      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.889624441 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2963010048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2946560512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930110976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913661440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897211904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977291.975716,       0.0,       70934,      63771,       7163,      37976,      25795,  44.531021,  78.100000,  85.500000,  92.900000,  24.227961,   0.000000, 101.562001, 404.269715
Outstanding requests per worker:
430 317 469 375 372 442 390 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35263.4,      176317,     158529,      17788,     106446,      52083, 204.630241, 304.500000, 320.900000, 346.900000,  72.935655,  65.003999, 367.044985, 487.989396
Outstanding requests per worker:
1689 1335 1645 1457 1493 1573 1447 1417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35450.0,      177250,     159344,      17906,     113967,      45377, 436.410064, 522.200000, 545.800000, 574.300000,  67.016168, 288.944006, 593.896985, 535.983576
Outstanding requests per worker:
2731 2379 2671 2449 2396 2601 2410 2376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35771.0,      178855,     160817,      18038,     119051,      41766, 628.470549, 712.100000, 736.300000, 779.700000,  61.540711, 508.760989, 796.931028, 562.307778
Outstanding requests per worker:
3659 3060 3448 3117 3169 3366 3325 3214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35960.2,      179801,     161765,      18036,     122137,      39628, 787.579855, 871.400000, 892.100000, 941.300000,  63.002403, 658.418000, 956.067979, 579.717046
Outstanding requests per worker:
4401 3666 4019 3745 3880 4148 4103 3795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36030.2,      180151,     162162,      17989,     124896,      37266, 927.341002, 1011.700000, 1026.400000, 1082.400000,  63.347714, 788.483024, 1102.023959, 595.608984
Outstanding requests per worker:
5094 4309 4618 4326 4570 4762 4742 4387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36114.2,      180571,     162575,      17996,     126595,      35980, 1057.655373, 1152.100000, 1174.700000, 1192.500000,  64.884197, 924.521029, 1200.111985, 604.960763
Outstanding requests per worker:
5532 5024 5285 4898 5022 5314 5388 4973 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:01   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:01   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48320 pts/0    Sl+  11:01   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77904907      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1136798924      L1-dcache-loads:u                                           
         386628818      armv8_pmuv3_0/l2d_cache/:u                                   
         105369882      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290276678 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2190799360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174349824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157900288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977340.975765,       0.0,       70150,      63104,       7046,      37690,      25414,  67.221748, 118.700000, 128.200000, 137.600000,  37.343744,   0.000000, 144.014001, 405.810899
Outstanding requests per worker:
638 562 643 648 641 587 675 603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35272.6,      176363,     158737,      17626,     106544,      52193, 292.615661, 412.200000, 427.600000, 440.900000,  90.172188, 114.959002, 453.868002, 486.074186
Outstanding requests per worker:
2068 1897 2059 2126 2055 2066 2069 2105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35736.6,      178683,     160890,      17793,     115041,      45849, 565.175256, 659.800000, 673.500000, 694.100000,  70.951616, 402.125001, 714.833021, 535.029281
Outstanding requests per worker:
3213 3020 3157 3176 3323 3180 3215 3296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36067.6,      180338,     162340,      17998,     120428,      41912, 783.260861, 866.500000, 884.200000, 903.100000,  61.253632, 642.710984, 913.581014, 563.277011
Outstanding requests per worker:
4197 3989 4029 4121 4256 4162 4004 4289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36343.4,      181717,     163448,      18269,     123438,      40010, 963.150833, 1031.800000, 1047.600000, 1073.900000,  52.441548, 849.295974, 1087.394953, 579.942202
Outstanding requests per worker:
4875 4611 4951 4790 5035 5095 4857 4925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36420.2,      182101,     163945,      18156,     126052,      37893, 1118.960379, 1197.500000, 1211.100000, 1229.800000,  56.916745, 975.812972, 1247.084975, 595.056946
Outstanding requests per worker:
5562 5274 5683 5431 5682 5844 5585 5790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36555.6,      182778,     164528,      18250,     128360,      36168, 1265.118395, 1332.900000, 1347.700000, 1372.700000,  51.790599, 1119.395018, 1391.165018, 607.116667
Outstanding requests per worker:
6267 6011 6209 6089 6324 6505 6111 6375 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:02   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48192 pts/0    Sl+  11:02   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79393095      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1141231431      L1-dcache-loads:u                                           
         387914046      armv8_pmuv3_0/l2d_cache/:u                                   
         111322104      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280846538 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3055153664
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038704128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977388.975813,       0.0,       70908,      63975,       6933,      38010,      25965,  69.854609, 123.300000, 131.400000, 139.500000,  38.786504,   0.000000, 145.249993, 402.487003
Outstanding requests per worker:
692 605 649 670 686 670 660 651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35584.4,      177922,     160120,      17802,     107321,      52799, 310.599158, 439.200000, 456.900000, 474.300000,  96.881869, 125.521004, 496.372014, 487.106982
Outstanding requests per worker:
2287 2074 2241 2233 2356 2263 2266 2135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36191.2,      180956,     162885,      18071,     116472,      46413, 596.707805, 697.300000, 712.500000, 746.600000,  76.091864, 435.488999, 759.312987, 535.303902
Outstanding requests per worker:
3411 3252 3408 3375 3609 3584 3451 3294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36527.2,      182636,     164321,      18315,     121187,      43134, 823.905082, 912.800000, 927.800000, 955.700000,  64.967817, 678.874016, 968.194008, 560.748864
Outstanding requests per worker:
4450 4170 4412 4406 4482 4578 4492 4253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36680.0,      183400,     165076,      18324,     124866,      40210, 1020.205283, 1100.600000, 1119.000000, 1160.500000,  62.589144, 873.977005, 1181.743979, 580.941397
Outstanding requests per worker:
5264 5012 5307 5249 5383 5622 5352 5152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36908.8,      184544,     165972,      18572,     127556,      38416, 1191.358441, 1261.200000, 1278.400000, 1330.300000,  56.850458, 1046.213984, 1346.801043, 594.363935
Outstanding requests per worker:
6007 5848 5979 6069 6096 6388 6048 5864 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36947.2,      184736,     166244,      18492,     129776,      36468, 1340.506660, 1404.200000, 1424.400000, 1472.700000,  52.476850, 1227.431059, 1494.876981, 607.152745
Outstanding requests per worker:
6728 6620 6753 6675 6808 7109 6702 6653 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:03   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:03   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  11:03   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79712077      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1153638205      L1-dcache-loads:u                                           
         389990722      armv8_pmuv3_0/l2d_cache/:u                                   
         100697800      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930275571 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2251026944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234577408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977437.975862,       0.0,       71070,      63857,       7213,      38112,      25745,  81.434836, 144.900000, 153.800000, 162.900000,  45.786864,   0.000000, 168.265000, 407.035000
Outstanding requests per worker:
754 780 799 785 808 800 813 720 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35926.4,      179632,     161632,      18000,     109164,      52468, 350.430539, 486.100000, 501.900000, 528.000000, 103.203332, 148.864999, 544.381022, 490.977888
Outstanding requests per worker:
2359 2606 2403 2464 2585 2448 2609 2402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36767.8,      183839,     165073,      18766,     118390,      46683, 640.273214, 737.400000, 754.100000, 775.300000,  73.151099, 485.422999, 785.757005, 536.633314
Outstanding requests per worker:
3548 3783 3606 3573 3737 3570 3779 3690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36921.8,      184609,     166190,      18419,     122956,      43234, 871.757844, 961.300000, 977.000000, 993.100000,  66.719322, 734.834015, 1009.722948, 562.339876
Outstanding requests per worker:
4635 4793 4708 3984 4850 4798 4875 4693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36989.6,      184948,     166239,      18709,     125936,      40303, 1076.270128, 1179.300000, 1198.600000, 1225.000000,  81.843317, 788.058996, 1237.826943, 582.553697
Outstanding requests per worker:
5643 5803 5605 4443 5947 5977 5925 5664 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37092.6,      185463,     166905,      18558,     128471,      38434, 1260.026177, 1383.700000, 1409.300000, 1432.900000, 120.336346, 838.303983, 1450.788021, 595.377592
Outstanding requests per worker:
6502 6835 6484 4274 6914 6977 6892 6626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37033.6,      185168,     166516,      18652,     129866,      36650, 1425.051580, 1586.000000, 1606.700000, 1628.300000, 175.729307, 847.492993, 1649.152040, 606.566318
Outstanding requests per worker:
7526 6534 7000 4730 7841 7877 7904 7586 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:04   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:04   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  11:04   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81824249      L1-dcache-load-misses:u   # [33m   7.01%[m of all L1-dcache hits  
        1167855319      L1-dcache-loads:u                                           
         397708352      armv8_pmuv3_0/l2d_cache/:u                                   
         111866673      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.981386092 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2922836480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906386944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977486.975911,       0.0,       71547,      64345,       7202,      38555,      25790,  84.579645, 151.100000, 160.300000, 171.100000,  48.024042,   0.000000, 181.659997, 407.315331
Outstanding requests per worker:
824 877 853 777 823 800 795 786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36260.2,      181301,     163279,      18022,     109542,      53737, 356.558832, 490.600000, 506.700000, 532.000000, 103.304724, 157.305002, 544.839025, 488.548001
Outstanding requests per worker:
2429 2639 2478 2458 2650 2481 2605 2631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37019.2,      185096,     166651,      18445,     119363,      47288, 656.512465, 758.900000, 775.000000, 799.300000,  77.773236, 491.472989, 820.091009, 535.922695
Outstanding requests per worker:
3657 3876 3831 3774 3903 3615 3755 3999 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37353.2,      186766,     167885,      18881,     124812,      43073, 886.381121, 972.400000, 987.600000, 1021.500000,  65.635503, 739.955008, 1043.684006, 565.821610
Outstanding requests per worker:
4631 4923 4825 4820 5085 4676 4803 4357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37356.0,      186780,     167974,      18806,     127116,      40858, 1080.153748, 1168.600000, 1190.500000, 1228.500000,  70.292087, 863.515019, 1258.713961, 583.144856
Outstanding requests per worker:
5749 5414 5777 5950 6102 5699 5743 5187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37263.4,      186317,     167753,      18564,     129520,      38233, 1253.419599, 1378.500000, 1396.800000, 1442.700000, 104.592969, 859.687984, 1492.027044, 597.359213
Outstanding requests per worker:
6889 6024 6848 5968 6760 6778 6875 5103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37056.2,      185281,     166648,      18633,     130261,      36387, 1400.706810, 1578.300000, 1606.600000, 1640.500000, 156.807967, 936.255991, 1669.592977, 608.263712
Outstanding requests per worker:
7649 5715 7850 6649 6907 7959 8042 5737 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:04   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:04   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50304 pts/0    Sl+  11:04   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82106213      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1174008850      L1-dcache-loads:u                                           
         399637495      armv8_pmuv3_0/l2d_cache/:u                                   
         103993222      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.859781402 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2134635008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2118185472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101735936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977534.975959,       0.0,       70941,      63789,       7152,      37970,      25819, 106.776837, 188.800000, 200.700000, 210.600000,  60.001156,   0.000000, 218.238994, 404.396150
Outstanding requests per worker:
948 1035 1042 1081 1060 1040 1057 1035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36443.8,      182219,     164029,      18190,     110042,      53987, 424.052822, 576.600000, 596.500000, 615.100000, 115.662209, 189.916000, 626.195014, 486.296441
Outstanding requests per worker:
3076 2819 2963 3071 3072 2979 3071 3068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37377.2,      186886,     167973,      18913,     120091,      47882, 753.380565, 865.500000, 887.000000, 906.600000,  83.237988, 547.896028, 925.450981, 535.365374
Outstanding requests per worker:
4561 4148 4285 4471 4493 3863 4581 4464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37444.2,      187221,     168640,      18581,     124728,      43912, 1004.709609, 1129.000000, 1156.100000, 1197.400000,  91.047293, 734.320998, 1220.149994, 562.584494
Outstanding requests per worker:
6040 5449 5624 5128 5953 3960 5528 5765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37135.0,      185675,     166822,      18853,     126654,      40168, 1192.444799, 1383.700000, 1433.400000, 1538.500000, 163.158053, 722.045004, 1568.917990, 584.418710
Outstanding requests per worker:
7738 6974 6013 5106 6434 4555 5352 5439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36980.6,      184903,     166543,      18360,     128577,      37966, 1329.117717, 1674.200000, 1736.700000, 1833.100000, 231.093103, 784.708023, 1891.718030, 597.814576
Outstanding requests per worker:
9035 8622 5890 4992 6383 4384 5144 6201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36883.6,      184418,     165960,      18458,     129551,      36409, 1398.663952, 1850.700000, 1910.300000, 1980.300000, 284.723885, 832.324982, 2030.591011, 606.865251
Outstanding requests per worker:
8978 8022 5817 5443 6629 4868 6700 6959 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:05   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:05   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49344 pts/0    Sl+  11:05   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80666449      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1172436024      L1-dcache-loads:u                                           
         398730284      armv8_pmuv3_0/l2d_cache/:u                                   
         111187529      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080466544 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3158438400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3141988864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3125539328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109089792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977582.976007,       0.0,       71352,      64253,       7099,      38325,      25928, 109.390022, 195.200000, 205.600000, 222.700000,  61.993794,   0.000000, 236.837998, 405.850046
Outstanding requests per worker:
1044 1051 1188 1045 1107 1148 1016 1076 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36649.2,      183246,     164935,      18311,     111178,      53757, 441.391168, 602.300000, 621.500000, 641.500000, 121.969710, 204.557002, 662.290990, 489.370328
Outstanding requests per worker:
3084 3150 3208 3060 3199 3310 3193 3247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37749.2,      188746,     169664,      19082,     121636,      48028, 776.736677, 886.600000, 902.300000, 919.300000,  79.784140, 605.825007, 931.958973, 537.409462
Outstanding requests per worker:
4459 4615 4656 4557 4609 4038 4624 4119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37640.0,      188200,     169367,      18833,     125673,      43694, 1021.178657, 1159.700000, 1181.900000, 1210.800000, 102.493207, 711.359024, 1223.603010, 565.033507
Outstanding requests per worker:
5964 5637 5269 5678 6085 4375 5870 3852 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37347.2,      186736,     168087,      18649,     127539,      40548, 1192.503369, 1400.300000, 1458.600000, 1529.800000, 175.554467, 728.138983, 1556.532025, 583.881865
Outstanding requests per worker:
6780 5447 5615 5914 7769 4314 6986 3992 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37140.2,      185701,     167264,      18437,     128676,      38588, 1288.057149, 1610.100000, 1698.200000, 1801.300000, 229.709348, 752.829015, 1872.197032, 594.831894
Outstanding requests per worker:
6274 6503 5780 5781 7465 5450 6952 3974 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37017.6,      185088,     166419,      18669,     130340,      36079, 1320.661807, 1635.000000, 1756.300000, 1833.800000, 223.546928, 786.494017, 1885.748029, 609.411696
Outstanding requests per worker:
7054 6597 6144 6693 7435 5495 6418 4863 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:06   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  11:06   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82914032      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        1178973677      L1-dcache-loads:u                                           
         401077079      armv8_pmuv3_0/l2d_cache/:u                                   
         106294745      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071924487 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2805592576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789143040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772693504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977631.976056,       0.0,       60158,      54075,       6083,      32077,      21998,   0.523201,   0.844100,   0.948100,   1.400000,   0.263471,   0.000000,   2.256000, 402.543301
Outstanding requests per worker:
1 2 5 1 2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135379,      15009,      90399,      44980,   0.553146,   0.888100,   1.100000,   1.500000,   0.280534,   0.101000,   2.403000, 482.278839
Outstanding requests per worker:
2 2 1 3 2 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135294,      15096,      95272,      40022,   0.573229,   0.932100,   1.100000,   1.500000,   0.288500,   0.084000,   2.327000, 523.569027
Outstanding requests per worker:
2 3 6 1 1 2 0 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135441,      14943,      98712,      36729,   0.590881,   0.960100,   1.100000,   1.500000,   0.295319,   0.104000,   2.685000, 550.287572
Outstanding requests per worker:
2 1 2 3 2 2 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135516,      14866,     100730,      34786,   0.604534,   0.980100,   1.200000,   1.500000,   0.299814,   0.104000,   2.504000, 567.767843
Outstanding requests per worker:
1 4 3 3 1 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135337,      15051,     102671,      32666,   0.615833,   0.995100,   1.200000,   1.600000,   0.303311,   0.106000,   2.292000, 583.474453
Outstanding requests per worker:
3 2 4 2 2 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135372,      15022,     104137,      31235,   0.623384,   1.100000,   1.200000,   1.600000,   0.306767,   0.106000,   3.184000, 594.912234
Outstanding requests per worker:
4 3 2 3 2 3 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:07   0:00 /usr/lib/linux
memcache      8 72.6  0.0 128448 44992 pts/0    Sl+  11:07   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76574919      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
         916329926      L1-dcache-loads:u                                           
         350992382      armv8_pmuv3_0/l2d_cache/:u                                   
         100930746      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061553175 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3065246208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3048796672
starting receive base loop
num_worker_connections 1
Creating worker on tid 3032347136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977679.976104,       0.0,       61069,      54880,       6189,      32347,      22533,   0.569132,   0.924100,   1.100000,   1.500000,   0.284920,   0.000000,   1.989000, 398.243367
Outstanding requests per worker:
3 3 2 5 1 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137339,      15341,      91265,      46074,   0.597168,   0.965100,   1.100000,   1.500000,   0.296372,   0.102000,   2.267000, 480.079002
Outstanding requests per worker:
2 4 5 2 1 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137247,      15432,      96803,      40444,   0.619126,   0.997100,   1.100000,   1.600000,   0.302507,   0.101000,   2.390000, 524.564603
Outstanding requests per worker:
1 3 4 4 2 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.6,      152683,     137538,      15145,     100395,      37143,   0.632275,   1.100000,   1.200000,   1.600000,   0.306926,   0.105000,   2.465000, 551.999593
Outstanding requests per worker:
2 2 2 1 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137345,      15332,     102636,      34709,   0.645156,   1.100000,   1.200000,   1.700000,   0.313662,   0.103000,   2.858000, 570.611402
Outstanding requests per worker:
1 2 6 3 2 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137289,      15389,     104534,      32755,   0.649375,   1.100000,   1.200000,   1.700000,   0.314628,   0.104000,   3.049000, 586.737605
Outstanding requests per worker:
3 2 4 2 4 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137277,      15401,     105804,      31473,   0.662598,   1.100000,   1.200000,   1.700000,   0.321595,   0.110000,   3.370000, 595.841539
Outstanding requests per worker:
2 3 3 2 3 5 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:08   0:00 /usr/lib/linux
memcache     10 71.0  0.0 128448 44928 pts/0    Sl+  11:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75923740      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
         934630666      L1-dcache-loads:u                                           
         351540760      armv8_pmuv3_0/l2d_cache/:u                                   
         101227819      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.889607249 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3088773632
starting receive base loop
num_worker_connections 1
Creating worker on tid 3072324096
starting receive base loop
num_worker_connections 1
Creating worker on tid 3055874560
starting receive base loop
num_worker_connections 1
Creating worker on tid 3039425024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977728.976153,       0.0,       62020,      55704,       6316,      32888,      22816,   0.672838,   1.100000,   1.200000,   1.700000,   0.327301,   0.000000,   2.359000, 399.555274
Outstanding requests per worker:
3 1 3 4 1 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139641,      15411,      92966,      46675,   0.698975,   1.200000,   1.300000,   1.800000,   0.343654,   0.123000,   2.793000, 480.395643
Outstanding requests per worker:
4 4 2 0 3 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.6,      155043,     139345,      15698,      98798,      40547,   0.719261,   1.200000,   1.300000,   1.800000,   0.351479,   0.119000,   2.977000, 527.398227
Outstanding requests per worker:
4 2 4 4 2 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139451,      15603,     101842,      37609,   0.729374,   1.200000,   1.300000,   1.800000,   0.354412,   0.125000,   3.126000, 552.257445
Outstanding requests per worker:
3 1 1 5 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139443,      15609,     104738,      34705,   0.738420,   1.200000,   1.300000,   1.800000,   0.351348,   0.126000,   2.597000, 573.886362
Outstanding requests per worker:
1 4 4 3 5 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139527,      15523,     106387,      33140,   0.751926,   1.300000,   1.400000,   1.800000,   0.358284,   0.118000,   2.857000, 587.916797
Outstanding requests per worker:
3 2 4 5 2 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139677,      15372,     107782,      31895,   0.765686,   1.300000,   1.400000,   1.800000,   0.364566,   0.127000,   2.783000, 599.077729
Outstanding requests per worker:
1 4 4 3 5 2 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:08   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 44928 pts/0    Sl+  11:08   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75021406      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
         951824641      L1-dcache-loads:u                                           
         350751380      armv8_pmuv3_0/l2d_cache/:u                                   
          99333530      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080035115 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2705125888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977776.976201,       0.0,       63245,      56999,       6246,      33819,      23180,   0.710279,   1.200000,   1.300000,   1.800000,   0.347500,   0.000000,   2.417000, 401.480851
Outstanding requests per worker:
1 2 2 4 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142505,      15607,      94563,      47942,   0.730625,   1.200000,   1.300000,   1.800000,   0.352250,   0.123000,   2.529000, 478.205003
Outstanding requests per worker:
4 4 6 3 2 1 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142318,      15793,     100655,      41663,   0.762141,   1.300000,   1.400000,   1.900000,   0.365374,   0.124000,   2.928000, 526.716396
Outstanding requests per worker:
4 5 5 3 2 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142442,      15669,     104243,      38199,   0.784876,   1.300000,   1.400000,   1.900000,   0.373814,   0.122000,   2.788000, 553.752390
Outstanding requests per worker:
3 5 5 3 2 8 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.2,      158121,     142234,      15887,     106756,      35478,   0.807841,   1.300000,   1.500000,   1.900000,   0.383658,   0.130000,   3.202000, 573.058776
Outstanding requests per worker:
2 2 3 4 5 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142258,      15862,     108307,      33951,   0.820665,   1.400000,   1.500000,   2.000000,   0.390373,   0.126000,   2.954000, 586.176531
Outstanding requests per worker:
4 4 4 2 2 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.6,      158108,     142215,      15893,     109780,      32435,   0.835624,   1.400000,   1.500000,   2.000000,   0.397321,   0.132000,   2.922000, 597.968069
Outstanding requests per worker:
7 2 2 5 4 2 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:09   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:09   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 46912 pts/0    Sl+  11:09   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74942535      L1-dcache-load-misses:u   # [33m   7.72%[m of all L1-dcache hits  
         970856887      L1-dcache-loads:u                                           
         354108503      armv8_pmuv3_0/l2d_cache/:u                                   
         106959544      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941041369 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2599678464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2583228928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566779392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977825.976250,       0.0,       63997,      57528,       6469,      34147,      23381,   0.774938,   1.300000,   1.400000,   1.900000,   0.372266,   0.000000,   2.841000, 402.734651
Outstanding requests per worker:
4 4 3 7 3 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143983,      16027,      96211,      47772,   0.817496,   1.400000,   1.500000,   2.000000,   0.388953,   0.126000,   2.744000, 482.677941
Outstanding requests per worker:
1 3 2 4 7 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144035,      15970,     102439,      41596,   0.844520,   1.400000,   1.500000,   2.000000,   0.399320,   0.131000,   3.162000, 529.907627
Outstanding requests per worker:
2 6 3 3 5 5 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143753,      16259,     105431,      38322,   0.874395,   1.500000,   1.600000,   2.000000,   0.411551,   0.149000,   3.121000, 555.020973
Outstanding requests per worker:
4 4 5 3 2 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     143826,      16189,     107879,      35947,   0.899915,   1.500000,   1.600000,   2.100000,   0.422965,   0.144000,   3.209000, 573.472355
Outstanding requests per worker:
2 5 4 2 2 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.8,      160004,     143967,      16037,     110056,      33911,   0.915368,   1.500000,   1.600000,   2.100000,   0.429763,   0.152000,   3.060000, 588.908799
Outstanding requests per worker:
1 6 3 6 6 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     144036,      15972,     111694,      32342,   0.934886,   1.600000,   1.700000,   2.200000,   0.440930,   0.158000,   4.206000, 602.299085
Outstanding requests per worker:
5 8 5 3 3 2 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:10   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:10   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 44480 pts/0    Sl+  11:10   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75522189      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
         985669185      L1-dcache-loads:u                                           
         354322203      armv8_pmuv3_0/l2d_cache/:u                                   
          97517024      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.979897258 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2471948800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2455499264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439049728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977873.976298,       0.0,       65031,      58659,       6372,      34537,      24122,   0.880759,   1.500000,   1.600000,   2.000000,   0.414365,   0.000000,   2.903000, 396.594316
Outstanding requests per worker:
4 3 2 6 2 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146262,      16349,      97365,      48897,   0.934894,   1.600000,   1.700000,   2.000000,   0.435653,   0.142000,   3.224000, 481.823775
Outstanding requests per worker:
2 4 5 6 3 2 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.2,      162616,     146330,      16286,     103603,      42727,   0.969266,   1.600000,   1.700000,   2.100000,   0.450079,   0.158000,   3.238000, 528.391389
Outstanding requests per worker:
5 1 7 4 6 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146170,      16439,     107217,      38953,   0.997195,   1.700000,   1.800000,   2.100000,   0.460824,   0.167000,   3.191000, 556.632797
Outstanding requests per worker:
7 3 1 5 7 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146288,      16327,     109816,      36472,   1.011450,   1.700000,   1.800000,   2.100000,   0.466874,   0.169000,   3.386000, 573.993335
Outstanding requests per worker:
3 5 6 2 4 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146316,      16291,     111711,      34605,   1.029451,   1.700000,   1.800000,   2.100000,   0.474756,   0.171000,   3.400000, 588.360760
Outstanding requests per worker:
6 2 9 4 7 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146578,      16035,     113705,      32873,   1.047442,   1.700000,   1.800000,   2.100000,   0.482006,   0.172000,   4.734000, 602.175517
Outstanding requests per worker:
8 2 3 6 3 8 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:11   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:11   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 46976 pts/0    Sl+  11:11   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74781326      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        1003953252      L1-dcache-loads:u                                           
         354865911      armv8_pmuv3_0/l2d_cache/:u                                   
         100763204      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950328283 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3156734464
starting receive base loop
num_worker_connections 1
Creating worker on tid 3140284928
starting receive base loop
num_worker_connections 1
Creating worker on tid 3123835392
starting receive base loop
num_worker_connections 1
Creating worker on tid 3107385856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977922.976347,       0.0,       66105,      59425,       6680,      35249,      24176,   0.985215,   1.600000,   1.700000,   2.100000,   0.456032,   0.000000,   3.411000, 401.490265
Outstanding requests per worker:
7 5 3 2 2 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148786,      16513,      98943,      49843,   1.034915,   1.700000,   1.800000,   2.000000,   0.469491,   0.177000,   3.286000, 480.584524
Outstanding requests per worker:
7 4 5 3 2 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148638,      16663,     105254,      43384,   1.090019,   1.800000,   1.900000,   2.100000,   0.494290,   0.173000,   3.933000, 528.262039
Outstanding requests per worker:
7 4 4 3 2 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148938,      16369,     109256,      39682,   1.113113,   1.800000,   2.000000,   2.200000,   0.504737,   0.172000,   3.422000, 555.886644
Outstanding requests per worker:
5 3 4 2 7 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148488,      16813,     111927,      36561,   1.152054,   1.900000,   2.000000,   2.200000,   0.520780,   0.182000,   4.222000, 577.078821
Outstanding requests per worker:
6 4 4 3 3 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.6,      165303,     148784,      16519,     113465,      35319,   1.178533,   1.900000,   2.100000,   2.300000,   0.535644,   0.182000,   3.705000, 589.097739
Outstanding requests per worker:
3 2 7 7 6 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148764,      16537,     115020,      33744,   1.204514,   2.000000,   2.100000,   2.300000,   0.548299,   0.199000,   3.696000, 599.860685
Outstanding requests per worker:
1 8 7 6 4 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:12   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:12   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47168 pts/0    Sl+  11:12   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74511947      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        1022643295      L1-dcache-loads:u                                           
         359602695      armv8_pmuv3_0/l2d_cache/:u                                   
         102179816      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170240130 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2525753856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509304320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492854784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575977970.976395,       0.0,       67211,      60605,       6606,      35868,      24737,   0.997050,   1.600000,   1.700000,   2.000000,   0.455564,   0.000000,   3.114000, 400.147249
Outstanding requests per worker:
3 7 2 7 6 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151503,      16577,     101283,      50220,   1.047677,   1.700000,   1.800000,   2.000000,   0.477064,   0.178000,   3.458000, 483.347458
Outstanding requests per worker:
5 1 3 4 8 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.2,      168081,     151159,      16922,     107562,      43597,   1.088659,   1.800000,   1.900000,   2.100000,   0.495910,   0.173000,   3.436000, 532.197785
Outstanding requests per worker:
5 2 3 5 8 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.0,      168085,     151422,      16663,     111634,      39788,   1.124874,   1.900000,   2.000000,   2.200000,   0.510266,   0.189000,   3.766000, 559.305121
Outstanding requests per worker:
6 3 4 1 7 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.0,      168070,     151159,      16911,     113901,      37258,   1.163987,   1.900000,   2.000000,   2.200000,   0.524872,   0.203000,   3.455000, 577.535324
Outstanding requests per worker:
4 6 2 9 8 3 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151332,      16746,     115847,      35485,   1.178828,   1.900000,   2.100000,   2.300000,   0.533454,   0.204000,   3.596000, 590.366710
Outstanding requests per worker:
8 5 6 4 2 7 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151172,      16908,     117281,      33891,   1.179209,   1.900000,   2.100000,   2.300000,   0.538675,   0.154000,   3.529000, 602.826687
Outstanding requests per worker:
8 9 8 7 2 3 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:13   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:13   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47040 pts/0    Sl+  11:13   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77379976      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        1038736600      L1-dcache-loads:u                                           
         362354036      armv8_pmuv3_0/l2d_cache/:u                                   
          94518402      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.719919811 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2211181056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194731520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2178281984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161832448
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978019.976444,       0.0,       68070,      61264,       6806,      36130,      25134,   1.069235,   1.800000,   1.900000,   2.100000,   0.486373,   0.000000,   3.663000, 399.528614
Outstanding requests per worker:
2 5 6 6 7 7 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153072,      17151,     102636,      50436,   1.131724,   1.900000,   2.000000,   2.200000,   0.512462,   0.182000,   3.425000, 486.519860
Outstanding requests per worker:
3 5 6 7 7 7 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     153053,      17169,     109090,      43963,   1.199039,   2.000000,   2.100000,   2.400000,   0.544695,   0.167000,   3.806000, 532.185955
Outstanding requests per worker:
3 6 7 8 9 8 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.2,      170221,     153085,      17136,     112984,      40101,   1.276494,   2.100000,   2.300000,   2.700000,   0.592748,   0.221000,   3.785000, 560.561871
Outstanding requests per worker:
7 9 9 5 3 2 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153117,      17108,     115508,      37609,   1.317105,   2.200000,   2.300000,   2.600000,   0.601251,   0.221000,   3.346000, 577.844041
Outstanding requests per worker:
9 2 3 8 6 5 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.2,      170226,     153134,      17092,     117227,      35907,   1.447697,   2.400000,   2.600000,   3.000000,   0.673893,   0.228000,   4.116000, 590.734063
Outstanding requests per worker:
4 7 8 3 2 9 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.0,      170210,     153045,      17165,     119130,      33915,   1.553003,   2.600000,   2.800000,   3.200000,   0.728693,   0.259000,   4.636000, 605.018432
Outstanding requests per worker:
6 10 12 3 4 14 9 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:13   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:13   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 46976 pts/0    Sl+  11:13   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76316777      L1-dcache-load-misses:u   # [33m   7.23%[m of all L1-dcache hits  
        1055418133      L1-dcache-loads:u                                           
         364069242      armv8_pmuv3_0/l2d_cache/:u                                   
          95518300      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061280532 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2568942080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978067.976492,       0.0,       69073,      62160,       6913,      36986,      25174,   3.291952,   6.600000,   7.300000,   8.500000,   2.108652,   0.000000,  13.251000, 403.053813
Outstanding requests per worker:
29 29 22 20 26 7 26 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34598.8,      172994,     155769,      17225,     104496,      51273,   9.512023,  12.200000,  12.700000,  14.100000,   2.306504,   0.551000,  16.232001, 487.923887
Outstanding requests per worker:
52 45 48 55 57 43 49 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34612.2,      173061,     155392,      17669,     110841,      44551,  13.949448,  16.800000,  18.300000,  21.800000,   2.757050,   5.678000,  27.477000, 534.484980
Outstanding requests per worker:
73 57 69 55 66 60 71 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34595.4,      172977,     155571,      17406,     115067,      40504,  17.511674,  20.300000,  20.900000,  22.800000,   2.161641,  12.382000,  26.487000, 561.381202
Outstanding requests per worker:
83 77 90 94 103 91 89 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34489.4,      172447,     155116,      17331,     116899,      38217,  29.110458,  39.700000,  45.000000,  52.900000,   8.418170,  14.611000,  62.091999, 577.844781
Outstanding requests per worker:
160 108 204 165 222 240 145 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34379.6,      171898,     154749,      17149,     118868,      35881,  59.649780,  87.300000,  93.100000, 100.500000,  18.684445,  22.453001, 112.576999, 594.217914
Outstanding requests per worker:
130 302 390 332 245 471 434 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34249.8,      171249,     154174,      17075,     119926,      34248, 103.418134, 140.500000, 155.100000, 173.100000,  32.267545,  27.401000, 179.743007, 604.328214
Outstanding requests per worker:
537 592 660 571 410 756 582 536 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:14   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:14   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 49280 pts/0    Sl+  11:14   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76306583      L1-dcache-load-misses:u   # [33m   6.94%[m of all L1-dcache hits  
        1099034062      L1-dcache-loads:u                                           
         374236168      armv8_pmuv3_0/l2d_cache/:u                                   
         106653789      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020541188 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2281173504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2264723968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248274432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231824896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978116.976541,       0.0,       69874,      62807,       7067,      37617,      25190,   4.413476,  10.300000,  11.100000,  12.200000,   3.592853,   0.000000,  13.845000, 409.550528
Outstanding requests per worker:
8 56 41 43 47 38 59 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35063.0,      175315,     157882,      17433,     105930,      51952,  13.462004,  16.000000,  16.900000,  19.700000,   2.250354,   0.482000,  25.335999, 487.565188
Outstanding requests per worker:
54 56 66 50 68 63 60 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35063.6,      175318,     157721,      17597,     112423,      45298,  14.929927,  16.700000,  17.800000,  24.000000,   2.147849,  10.973000,  35.369001, 533.854870
Outstanding requests per worker:
73 57 126 69 63 79 60 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34898.4,      174492,     156783,      17709,     115874,      40909,  28.604425,  78.000000, 103.200000, 121.900000,  28.612801,  10.749000, 135.856003, 562.226695
Outstanding requests per worker:
61 65 580 76 70 565 67 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34792.2,      173961,     156649,      17312,     118133,      38516,  66.386178, 162.000000, 172.000000, 189.100000,  56.032690,   8.279000, 195.210993, 579.081858
Outstanding requests per worker:
191 239 815 303 223 759 206 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34660.4,      173302,     155857,      17445,     119894,      35963, 117.213173, 222.900000, 235.800000, 250.100000,  59.813765,  34.318000, 262.052000, 594.977300
Outstanding requests per worker:
378 591 1051 515 393 1144 544 581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34549.8,      172749,     155509,      17240,     121200,      34309, 186.195815, 294.500000, 311.500000, 346.900000,  65.596285,  79.182997, 359.649986, 606.308342
Outstanding requests per worker:
811 898 1376 831 735 1570 784 905 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:15   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:15   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 48192 pts/0    Sl+  11:15   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78351453      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        1105130581      L1-dcache-loads:u                                           
         380315488      armv8_pmuv3_0/l2d_cache/:u                                   
         103063817      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.919765550 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2228220416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2211770880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2195321344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2178871808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162422272
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978164.976589,       0.0,       70541,      63546,       6995,      37607,      25939,  11.302531,  16.200000,  17.200000,  19.100000,   4.276624,   0.000000,  21.778001, 401.786706
Outstanding requests per worker:
71 63 61 94 70 88 81 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35320.4,      176602,     159071,      17531,     106676,      52395,  29.735826,  54.100000,  59.700000,  66.900000,  14.910416,  11.280000,  75.851999, 486.185301
Outstanding requests per worker:
232 304 316 247 165 267 98 157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35069.2,      175346,     157787,      17559,     112805,      44982,  81.446371, 118.500000, 137.100000, 153.500000,  28.350563,  16.116001, 165.700004, 534.263932
Outstanding requests per worker:
444 680 723 558 504 500 375 442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34878.8,      174394,     157058,      17336,     116052,      41006, 165.526807, 213.900000, 221.400000, 246.200000,  35.992130,  80.268003, 264.555007, 562.005845
Outstanding requests per worker:
800 1161 981 966 1048 951 761 951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34777.4,      173887,     156250,      17637,     118074,      38176, 270.662399, 320.600000, 334.500000, 348.200000,  39.120177, 162.731007, 361.474991, 580.254848
Outstanding requests per worker:
1315 1591 1511 1387 1550 1436 1319 1418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34789.2,      173946,     156587,      17359,     119871,      36716, 379.454877, 434.800000, 449.000000, 467.100000,  39.044192, 293.466002, 476.805001, 592.142790
Outstanding requests per worker:
1822 2103 2047 1861 2009 1796 1832 1911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34858.6,      174293,     156946,      17347,     121757,      35189, 483.302341, 540.500000, 558.800000, 579.500000,  42.099537, 400.229007, 590.676010, 601.215902
Outstanding requests per worker:
2233 2619 2585 2323 2366 2184 2253 2316 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:16   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:16   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47168 pts/0    Sl+  11:16   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76689009      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1108567563      L1-dcache-loads:u                                           
         378919282      armv8_pmuv3_0/l2d_cache/:u                                   
         106228973      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040903837 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2481517056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2465067520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2448617984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2432168448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978213.976638,       0.0,       70993,      63945,       7048,      38015,      25930,  18.125437,  32.200000,  36.600000,  45.300000,   9.107809,   0.000000,  56.970000, 403.609477
Outstanding requests per worker:
83 184 80 85 261 78 170 169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35339.6,      176698,     159067,      17631,     106835,      52232,  76.075694, 125.200000, 135.700000, 146.900000,  34.564623,  13.088000, 160.055995, 487.045779
Outstanding requests per worker:
456 630 631 482 718 474 664 547 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35095.8,      175479,     158004,      17475,     112515,      45489, 191.196504, 249.400000, 261.900000, 280.000000,  44.218786,  96.495003, 295.224011, 532.592801
Outstanding requests per worker:
1056 1195 1203 1088 1241 1061 1305 1169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35064.4,      175322,     157939,      17383,     116368,      41571, 326.839497, 384.500000, 396.000000, 410.700000,  43.734165, 228.128001, 417.827994, 559.498712
Outstanding requests per worker:
1616 1872 1792 1692 1850 1822 1799 1751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35112.8,      175564,     157893,      17671,     119368,      38525, 460.393324, 513.800000, 527.300000, 558.900000,  41.711747, 355.257988, 573.998988, 580.169963
Outstanding requests per worker:
2248 2568 2319 2218 2408 2361 2338 2372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35201.2,      176006,     158411,      17595,     121387,      37024, 582.715330, 635.700000, 646.600000, 670.200000,  41.856999, 490.429014, 688.973010, 592.245589
Outstanding requests per worker:
2681 3089 2918 2739 2924 2804 2886 2974 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35255.4,      176277,     158499,      17778,     123031,      35468, 694.669489, 767.300000, 784.300000, 820.200000,  49.591157, 593.154013, 832.323015, 603.123528
Outstanding requests per worker:
3099 3735 3553 3180 3368 3207 3259 3530 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:17   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:17   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 48192 pts/0    Sl+  11:17   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77447815      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1116848474      L1-dcache-loads:u                                           
         381203556      armv8_pmuv3_0/l2d_cache/:u                                   
         103622138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.831810282 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2142106112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2125656576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109207040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2092757504
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978262.976687,       0.0,       70833,      63732,       7101,      37914,      25818,  31.973616,  55.200000,  61.600000,  74.600000,  17.431081,   0.000000,  84.431000, 402.975130
Outstanding requests per worker:
288 220 246 266 379 330 271 252 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35134.0,      175670,     158115,      17555,     106138,      51977, 152.112794, 232.500000, 245.100000, 263.900000,  57.649128,  46.594001, 284.435004, 487.027233
Outstanding requests per worker:
1164 1152 1091 1107 1200 1282 1165 1083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35094.8,      175474,     157949,      17525,     112724,      45225, 353.793428, 434.700000, 446.400000, 464.200000,  59.693576, 234.923005, 478.980988, 534.190251
Outstanding requests per worker:
2022 2089 1972 2026 2142 2169 2112 1905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35349.6,      176748,     159101,      17647,     117664,      41437, 535.917600, 602.000000, 615.500000, 639.400000,  50.382089, 415.939987, 649.995029, 560.950811
Outstanding requests per worker:
2817 2853 2779 2690 2948 2842 2737 2683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35551.2,      177756,     160063,      17693,     120678,      39385, 680.536567, 745.000000, 760.200000, 774.700000,  46.121533, 581.147015, 787.038028, 577.814029
Outstanding requests per worker:
3295 3478 3420 3252 3551 3579 3505 3171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35679.0,      178395,     160713,      17682,     123215,      37498, 804.896770, 866.200000, 885.700000, 904.400000,  44.928622, 689.975977, 921.625018, 590.967644
Outstanding requests per worker:
3861 4068 3840 3752 4177 4101 3909 3811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35663.6,      178318,     160667,      17651,     124813,      35854, 923.277007, 977.500000, 990.300000, 1026.600000,  43.255150, 818.515003, 1033.704996, 603.197925
Outstanding requests per worker:
4516 4554 4362 4470 4701 4460 4412 4383 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:17   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:17   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49280 pts/0    Sl+  11:17   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77399465      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1123951578      L1-dcache-loads:u                                           
         382501808      armv8_pmuv3_0/l2d_cache/:u                                   
         105223306      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270019721 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2107109888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090660352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978311.976736,       0.0,       71199,      64161,       7038,      38307,      25854,  40.815539,  71.500000,  76.000000,  82.900000,  21.699259,   0.000000,  94.221003, 406.427004
Outstanding requests per worker:
388 378 329 409 342 425 371 263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35324.6,      176623,     158784,      17839,     106371,      52413, 192.699961, 287.000000, 300.600000, 317.700000,  69.022021,  57.588998, 335.918009, 486.495812
Outstanding requests per worker:
1429 1389 1410 1461 1463 1456 1533 1336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35470.2,      177351,     159609,      17742,     114303,      45306, 420.729807, 502.700000, 513.400000, 526.900000,  61.408557, 285.443991, 543.479025, 535.890764
Outstanding requests per worker:
2426 2336 2410 2470 2408 2454 2491 2330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35766.6,      178833,     160824,      18009,     119326,      41498, 611.724662, 683.900000, 695.900000, 705.700000,  53.012638, 502.467990, 719.744980, 564.360015
Outstanding requests per worker:
3243 3079 3087 3230 3199 3323 3265 3260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35874.4,      179372,     161291,      18081,     122011,      39280, 771.754364, 839.300000, 852.800000, 863.900000,  49.169878, 660.556018, 878.507972, 581.386748
Outstanding requests per worker:
3994 3778 3842 3984 3835 3989 4060 4030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35964.6,      179823,     161789,      18034,     124444,      37345, 921.847650, 991.700000, 1004.800000, 1028.600000,  51.380814, 811.119020, 1042.153001, 594.121986
Outstanding requests per worker:
4692 4421 4449 4667 4446 4804 4763 4646 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36012.4,      180062,     162167,      17895,     126383,      35784, 1063.511437, 1130.600000, 1140.500000, 1161.100000,  48.929365, 942.192972, 1174.078941, 605.891698
Outstanding requests per worker:
5339 5061 5024 5264 5261 5405 5369 5296 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:18   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:18   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49216 pts/0    Sl+  11:18   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78645376      L1-dcache-load-misses:u   # [33m   6.94%[m of all L1-dcache hits  
        1132531552      L1-dcache-loads:u                                           
         389846300      armv8_pmuv3_0/l2d_cache/:u                                   
         106203163      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190003194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2805461504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789011968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772562432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978359.976784,       0.0,       71026,      63746,       7280,      38012,      25734,  54.984850,  98.600000, 105.600000, 119.600000,  31.111609,   0.000000, 127.357006, 405.245004
Outstanding requests per worker:
476 512 521 483 587 578 494 469 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35512.8,      177564,     159724,      17840,     107523,      52201, 250.128996, 357.500000, 371.800000, 405.400000,  81.274384,  98.346002, 424.881995, 489.796687
Outstanding requests per worker:
1676 1739 1708 1754 1953 1978 1828 1731 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35812.8,      179064,     161125,      17939,     115358,      45767, 503.220674, 592.600000, 610.500000, 636.200000,  69.592863, 355.791986, 651.277006, 536.218023
Outstanding requests per worker:
2838 2756 2953 2828 3015 3052 2879 2797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36220.4,      181102,     162941,      18161,     120342,      42599, 707.290491, 789.200000, 804.200000, 822.500000,  57.722466, 582.280993, 830.871999, 561.009783
Outstanding requests per worker:
3719 3475 3876 3733 3808 3886 3740 3581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36440.2,      182201,     164006,      18195,     124237,      39769, 869.269052, 944.900000, 957.800000, 977.300000,  55.970582, 735.235989, 996.116996, 581.731053
Outstanding requests per worker:
4421 4159 4497 4389 4568 4670 4530 4191 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36516.2,      182581,     164545,      18036,     126320,      38225, 1011.625501, 1076.600000, 1090.800000, 1117.300000,  51.258623, 881.489992, 1137.637973, 593.923626
Outstanding requests per worker:
5068 4863 5020 5047 5328 5137 5212 4981 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36549.6,      182748,     164354,      18394,     128052,      36302, 1149.283814, 1217.300000, 1231.100000, 1273.100000,  49.609293, 1029.207945, 1291.385055, 606.282336
Outstanding requests per worker:
5644 5521 5610 5744 6048 5767 5819 5559 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:19   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:19   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48128 pts/0    Sl+  11:19   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80304470      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1143716332      L1-dcache-loads:u                                           
         388296648      armv8_pmuv3_0/l2d_cache/:u                                   
          98498121      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.400004935 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2393698816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377249280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2360799744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978408.976833,       0.0,       70542,      63374,       7168,      37519,      25855,  75.568857, 133.800000, 141.500000, 150.200000,  41.801700,   0.000000, 160.630003, 402.349812
Outstanding requests per worker:
714 678 671 727 753 730 674 727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35561.2,      177806,     159818,      17988,     107567,      52251, 322.832968, 451.900000, 466.100000, 484.900000,  96.297907, 138.207003, 501.881003, 489.051546
Outstanding requests per worker:
2333 2269 2304 2228 2366 2302 2259 2298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36191.2,      180956,     162606,      18350,     116512,      46094, 612.166344, 711.000000, 724.600000, 747.400000,  72.865420, 467.608005, 768.015027, 536.724420
Outstanding requests per worker:
3588 3390 3403 3421 3658 3491 3483 3456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36524.6,      182623,     164328,      18295,     121566,      42762, 835.256179, 920.700000, 933.400000, 954.900000,  63.307775, 673.982978, 977.283001, 562.179915
Outstanding requests per worker:
4452 4416 4451 4438 4626 4531 4544 4298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36738.2,      183691,     165139,      18552,     124918,      40221, 1030.741069, 1100.700000, 1116.200000, 1131.200000,  54.513245, 901.063979, 1148.033023, 580.781215
Outstanding requests per worker:
5353 5285 5246 5300 5440 5374 5402 5152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36980.4,      184902,     166588,      18314,     128211,      38377, 1191.322273, 1249.800000, 1262.000000, 1286.300000,  45.475690, 1078.693986, 1298.647046, 596.742827
Outstanding requests per worker:
6172 5981 6048 5922 6133 6006 5987 5892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37132.4,      185662,     166774,      18888,     130241,      36533, 1328.290786, 1395.800000, 1416.500000, 1426.700000,  46.285137, 1235.105991, 1436.310053, 607.655900
Outstanding requests per worker:
6819 6517 6798 6562 6804 6520 6497 6448 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:20   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:20   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48576 pts/0    Sl+  11:20   0:31 memcached -t 1
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  11:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81559455      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1156310506      L1-dcache-loads:u                                           
         394222974      armv8_pmuv3_0/l2d_cache/:u                                   
         109159124      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079737913 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2561012224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2544562688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2528113152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511663616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495214080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978457.976882,       0.0,       70818,      63791,       7027,      37966,      25825,  85.166694, 150.700000, 160.300000, 173.900000,  47.608110,   0.000000, 188.913003, 404.532834
Outstanding requests per worker:
892 822 851 825 754 757 769 841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35921.2,      179606,     161626,      17980,     108480,      53146, 356.893812, 494.200000, 508.600000, 536.200000, 103.681794, 154.037997, 553.299010, 486.807828
Outstanding requests per worker:
2649 2426 2643 2456 2453 2562 2507 2457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36694.0,      183470,     165068,      18402,     117898,      47170, 651.309344, 750.800000, 777.300000, 808.200000,  76.252585, 470.310003, 828.104019, 535.693914
Outstanding requests per worker:
3992 3662 3864 3718 3621 3868 3603 3217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37023.0,      185115,     166769,      18346,     123387,      43382, 881.896536, 966.200000, 1000.600000, 1038.200000,  69.565760, 678.987026, 1063.089013, 562.264743
Outstanding requests per worker:
5113 4660 4732 4687 4626 4984 4615 4648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37216.4,      186082,     167575,      18507,     126751,      40824, 1077.961314, 1161.300000, 1182.300000, 1233.400000,  64.370966, 946.928978, 1256.471038, 581.052215
Outstanding requests per worker:
5758 5669 5727 5522 5514 5740 5555 5428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37184.8,      185924,     167218,      18706,     129188,      38030, 1255.578886, 1336.700000, 1356.100000, 1403.700000,  61.746649, 1119.001985, 1449.221015, 598.447063
Outstanding requests per worker:
6103 6627 6598 6364 6555 6605 6496 6243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37083.2,      185416,     166810,      18606,     130257,      36553, 1416.335374, 1519.700000, 1545.900000, 1572.000000,  76.116587, 1162.088037, 1589.472055, 607.670421
Outstanding requests per worker:
6441 7132 7519 7232 7660 7556 6825 7163 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:21   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:21   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49216 pts/0    Sl+  11:21   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80007561      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1167272933      L1-dcache-loads:u                                           
         394232781      armv8_pmuv3_0/l2d_cache/:u                                   
         103634777      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940339131 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2364469760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348020224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2331570688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315121152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298671616
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978505.976930,       0.0,       70969,      63889,       7080,      38080,      25809,  91.408714, 163.400000, 173.800000, 188.200000,  52.022572,   0.000000, 204.000995, 404.069449
Outstanding requests per worker:
898 926 857 986 812 841 869 920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36029.2,      180146,     162043,      18103,     108982,      53061, 387.355778, 533.700000, 553.100000, 572.300000, 111.134841, 161.271006, 585.664988, 488.262239
Outstanding requests per worker:
2829 2847 2798 2828 2815 2627 2634 2724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36816.6,      184083,     165743,      18340,     118499,      47244, 712.153412, 825.800000, 845.000000, 875.600000,  85.611619, 536.044002, 902.375996, 535.196322
Outstanding requests per worker:
4109 4158 4385 4297 4224 3968 3987 4031 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37102.6,      185513,     166968,      18545,     123263,      43705, 969.468690, 1065.700000, 1085.900000, 1129.100000,  74.102796, 793.079019, 1158.810973, 559.847725
Outstanding requests per worker:
4239 5295 5639 4831 4771 5187 5232 5293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37039.4,      185197,     166926,      18271,     126236,      40690, 1182.628936, 1303.000000, 1334.700000, 1402.200000,  95.128572, 876.461983, 1425.927997, 580.407121
Outstanding requests per worker:
5559 6538 6947 5982 5551 6398 6368 6637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37058.4,      185292,     166853,      18439,     128559,      38294, 1356.892527, 1561.400000, 1590.000000, 1652.600000, 174.974639, 923.978984, 1674.522996, 594.718093
Outstanding requests per worker:
5231 7840 7769 5605 6210 7629 7708 7555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36783.8,      183919,     165453,      18466,     129040,      36413, 1517.113114, 1791.500000, 1822.500000, 1876.500000, 243.374205, 990.320027, 1939.268947, 606.645688
Outstanding requests per worker:
6047 9223 7696 6096 6318 8948 8439 6995 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:21   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:21   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  11:21   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81696234      L1-dcache-load-misses:u   # [33m   7.01%[m of all L1-dcache hits  
        1164969891      L1-dcache-loads:u                                           
         395043730      armv8_pmuv3_0/l2d_cache/:u                                   
         101917109      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770092642 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2753622528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2737172992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2720723456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704273920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978554.976979,       0.0,       71370,      64290,       7080,      38001,      26289, 101.280315, 179.500000, 190.200000, 202.500000,  56.853383,   0.000000, 210.786000, 400.287587
Outstanding requests per worker:
1016 890 1027 929 1018 1021 958 1014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36574.0,      182870,     164479,      18391,     110247,      54232, 406.759012, 552.700000, 568.400000, 588.900000, 111.232048, 179.773003, 597.075999, 485.891713
Outstanding requests per worker:
2966 2810 2927 2764 2928 2874 2904 2841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37322.6,      186613,     167855,      18758,     120153,      47702, 728.760076, 842.100000, 857.700000, 879.500000,  84.643516, 531.445980, 891.592979, 535.656847
Outstanding requests per worker:
4385 4198 4386 4187 4399 4336 4342 4227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37679.6,      188398,     169404,      18994,     125734,      43670, 987.339590, 1092.600000, 1111.800000, 1128.200000,  74.271658, 815.474987, 1145.557046, 564.266180
Outstanding requests per worker:
5553 5321 5589 5499 5513 5124 5622 5676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37609.0,      188045,     169209,      18836,     128538,      40671, 1210.859854, 1329.400000, 1355.200000, 1388.900000,  95.124901, 896.211982, 1403.571010, 583.762152
Outstanding requests per worker:
5907 6596 5763 6790 6704 4548 6717 6927 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37420.8,      187104,     168620,      18484,     130038,      38582, 1384.089020, 1565.700000, 1603.100000, 1641.000000, 150.695815, 945.288002, 1664.455056, 596.714298
Outstanding requests per worker:
6577 7921 6192 6845 8048 5619 6079 8224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37208.8,      186044,     167300,      18744,     130822,      36478, 1511.097141, 1821.700000, 1874.300000, 1923.500000, 229.753130, 942.221999, 1967.182040, 609.634375
Outstanding requests per worker:
6395 7302 6960 6889 9324 6054 6253 9151 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:22   0:00 /usr/lib/linux
memcache      8 72.6  0.0 133568 50240 pts/0    Sl+  11:22   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81938304      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1181609578      L1-dcache-loads:u                                           
         400003523      armv8_pmuv3_0/l2d_cache/:u                                   
         102985561      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.642338523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2242769408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226319872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978603.977028,       0.0,       71820,      64641,       7179,      38508,      26133, 103.629080, 184.000000, 196.200000, 210.700000,  58.633018,   0.000000, 220.663995, 403.173559
Outstanding requests per worker:
1020 1034 941 1101 974 1088 1042 1012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36765.2,      183826,     165710,      18116,     111342,      54368, 424.574516, 576.200000, 593.900000, 611.100000, 116.255750, 184.699997, 629.810989, 487.789451
Outstanding requests per worker:
3084 3058 2941 3082 3060 3042 3134 3003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37586.2,      187931,     169048,      18883,     120870,      48178, 755.871026, 870.300000, 893.500000, 915.000000,  84.717815, 530.378997, 929.697990, 535.615606
Outstanding requests per worker:
3483 4546 4544 4551 4558 4647 3609 4375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37614.8,      188074,     169324,      18750,     125497,      43827, 992.246725, 1142.500000, 1168.200000, 1196.200000, 108.478860, 710.335016, 1212.327003, 562.877377
Outstanding requests per worker:
4555 5771 5292 6001 4975 6058 3903 5849 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37364.0,      186820,     168051,      18769,     127367,      40684, 1143.104281, 1387.300000, 1434.200000, 1493.900000, 198.112358, 709.156990, 1523.774028, 582.809730
Outstanding requests per worker:
4059 5341 5253 7615 4579 6713 3709 7410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37205.8,      186029,     167495,      18534,     129406,      38089, 1247.246001, 1669.300000, 1733.700000, 1822.200000, 281.122372, 733.494997, 1853.137016, 596.977671
Outstanding requests per worker:
4650 5739 5235 8925 4409 6440 4377 7401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37054.8,      185274,     166750,      18524,     130577,      36173, 1303.966521, 1855.200000, 1935.100000, 2040.800000, 336.980597, 722.675025, 2120.045900, 608.441733
Outstanding requests per worker:
4963 6317 5147 9426 5460 5889 4999 8512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:23   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:23   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  11:23   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82788901      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1178825012      L1-dcache-loads:u                                           
         402240386      armv8_pmuv3_0/l2d_cache/:u                                   
         104506620      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200346658 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2940269056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923819520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907369984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978652.977077,       0.0,       60159,      54288,       5871,      32091,      22197,   0.531350,   0.852100,   0.978100,   1.400000,   0.268592,   0.000000,   2.181000, 398.178603
Outstanding requests per worker:
1 2 2 4 3 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135516,      14872,      89513,      46003,   0.544656,   0.871100,   1.100000,   1.500000,   0.275550,   0.101000,   2.423000, 476.221597
Outstanding requests per worker:
2 2 1 2 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135320,      15063,      95808,      39512,   0.560815,   0.907100,   1.100000,   1.500000,   0.283550,   0.103000,   2.615000, 526.292396
Outstanding requests per worker:
2 2 3 3 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135437,      14946,      98572,      36865,   0.578864,   0.943100,   1.100000,   1.500000,   0.290253,   0.103000,   2.526000, 550.008425
Outstanding requests per worker:
2 3 1 1 4 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135325,      15064,     101056,      34269,   0.596515,   0.972100,   1.200000,   1.500000,   0.296777,   0.102000,   2.522000, 569.491432
Outstanding requests per worker:
3 4 3 3 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135318,      15075,     102295,      33023,   0.599443,   0.979100,   1.200000,   1.500000,   0.298408,   0.103000,   2.908000, 580.475946
Outstanding requests per worker:
3 3 1 3 2 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135416,      14965,     103789,      31627,   0.617673,   0.996100,   1.200000,   1.600000,   0.306029,   0.104000,   3.559000, 594.270293
Outstanding requests per worker:
2 3 2 3 3 3 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:24   0:00 /usr/lib/linux
memcache      8 71.0  0.0 128448 44992 pts/0    Sl+  11:24   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76553049      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
         916392535      L1-dcache-loads:u                                           
         351170024      armv8_pmuv3_0/l2d_cache/:u                                   
          99540103      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200437663 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3035296256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3018846720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002397184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2985947648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969498112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978700.977125,       0.0,       61074,      54999,       6075,      32298,      22701,   0.555245,   0.896100,   1.100000,   1.500000,   0.279296,   0.000000,   2.019000, 397.121384
Outstanding requests per worker:
2 2 2 2 2 1 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137432,      15252,      91074,      46358,   0.576685,   0.930100,   1.100000,   1.500000,   0.288487,   0.101000,   2.571000, 478.699335
Outstanding requests per worker:
3 2 2 4 3 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137060,      15622,      96730,      40330,   0.598964,   0.970100,   1.100000,   1.500000,   0.295141,   0.104000,   2.644000, 525.734189
Outstanding requests per worker:
0 2 3 4 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137332,      15350,     100049,      37283,   0.612514,   0.988100,   1.100000,   1.600000,   0.299014,   0.103000,   2.263000, 550.647234
Outstanding requests per worker:
2 3 1 6 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137428,      15259,     102270,      35158,   0.627100,   1.100000,   1.200000,   1.600000,   0.306337,   0.102000,   2.741000, 569.299182
Outstanding requests per worker:
3 5 3 2 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.0,      152690,     137301,      15389,     104415,      32886,   0.635813,   1.100000,   1.200000,   1.600000,   0.307879,   0.105000,   2.382000, 584.830941
Outstanding requests per worker:
2 4 2 2 1 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137594,      15088,     106109,      31485,   0.648436,   1.100000,   1.200000,   1.700000,   0.314997,   0.106000,   2.455000, 596.309170
Outstanding requests per worker:
3 4 5 2 1 2 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 44928 pts/0    Sl+  11:25   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75840399      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
         933096358      L1-dcache-loads:u                                           
         352058932      armv8_pmuv3_0/l2d_cache/:u                                   
         100091713      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811056639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2119102976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2102653440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978749.977174,       0.0,       62018,      55781,       6237,      32696,      23085,   0.662522,   1.100000,   1.200000,   1.700000,   0.323851,   0.000000,   2.561000, 394.211398
Outstanding requests per worker:
4 2 3 4 5 3 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139496,      15555,      92959,      46537,   0.680859,   1.100000,   1.200000,   1.800000,   0.332408,   0.117000,   2.721000, 481.559572
Outstanding requests per worker:
2 2 4 2 4 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139421,      15630,      98561,      40860,   0.701521,   1.200000,   1.300000,   1.800000,   0.342077,   0.122000,   2.891000, 526.014847
Outstanding requests per worker:
3 2 4 2 1 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139513,      15537,     102000,      37513,   0.711544,   1.200000,   1.300000,   1.800000,   0.347519,   0.118000,   2.738000, 552.423201
Outstanding requests per worker:
4 4 1 2 2 1 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139445,      15607,     104251,      35194,   0.724289,   1.200000,   1.300000,   1.800000,   0.352480,   0.122000,   2.651000, 571.034343
Outstanding requests per worker:
4 3 2 6 3 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.2,      155061,     139526,      15535,     105922,      33604,   0.735955,   1.200000,   1.300000,   1.800000,   0.356898,   0.125000,   2.719000, 585.279446
Outstanding requests per worker:
3 2 5 1 1 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139556,      15488,     107537,      32019,   0.746939,   1.200000,   1.400000,   1.900000,   0.360224,   0.125000,   3.809000, 596.973380
Outstanding requests per worker:
2 2 4 4 3 4 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 44928 pts/0    Sl+  11:25   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  11:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75824888      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
         951051167      L1-dcache-loads:u                                           
         352167645      armv8_pmuv3_0/l2d_cache/:u                                   
         106082667      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060608986 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2969956864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978798.977223,       0.0,       63240,      56972,       6268,      33520,      23452,   0.722984,   1.200000,   1.300000,   1.800000,   0.350578,   0.000000,   2.853000, 397.718669
Outstanding requests per worker:
1 2 3 5 3 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142383,      15731,      94800,      47583,   0.745415,   1.200000,   1.300000,   1.900000,   0.358353,   0.126000,   2.637000, 481.526538
Outstanding requests per worker:
1 4 2 4 2 2 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142272,      15846,     100987,      41285,   0.774921,   1.300000,   1.400000,   1.900000,   0.372674,   0.125000,   3.894000, 528.460020
Outstanding requests per worker:
4 4 1 4 2 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.4,      158122,     142265,      15857,     103977,      38288,   0.797193,   1.300000,   1.400000,   1.900000,   0.377614,   0.125000,   2.693000, 553.422549
Outstanding requests per worker:
1 4 2 5 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142208,      15902,     106353,      35855,   0.816435,   1.400000,   1.500000,   2.000000,   0.388511,   0.128000,   3.079000, 571.878249
Outstanding requests per worker:
5 3 5 4 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142128,      15988,     108152,      33976,   0.828733,   1.400000,   1.500000,   2.000000,   0.393796,   0.127000,   2.759000, 585.509344
Outstanding requests per worker:
5 2 4 3 1 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142552,      15565,     109917,      32635,   0.843379,   1.400000,   1.500000,   2.000000,   0.401275,   0.130000,   3.313000, 596.618953
Outstanding requests per worker:
2 5 2 5 3 3 1 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:26   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:26   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 44864 pts/0    Sl+  11:26   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76072461      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
         971275048      L1-dcache-loads:u                                           
         354968579      armv8_pmuv3_0/l2d_cache/:u                                   
          97325095      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.759293221 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2396320256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379870720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363421184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978846.977271,       0.0,       63996,      57681,       6315,      34311,      23370,   0.754775,   1.300000,   1.400000,   1.900000,   0.363736,   0.000000,   3.485000, 403.404431
Outstanding requests per worker:
4 2 4 3 2 0 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     144045,      15970,      96114,      47931,   0.768990,   1.300000,   1.400000,   1.900000,   0.368871,   0.127000,   2.975000, 483.231664
Outstanding requests per worker:
2 1 3 4 2 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     144021,      15994,     102135,      41886,   0.796082,   1.300000,   1.400000,   2.000000,   0.381980,   0.122000,   3.121000, 528.919227
Outstanding requests per worker:
4 4 4 2 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144187,      15818,     105422,      38765,   0.816331,   1.400000,   1.500000,   2.000000,   0.392460,   0.139000,   3.039000, 553.698891
Outstanding requests per worker:
3 3 4 5 4 1 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.8,      160004,     144001,      16003,     108252,      35749,   0.848339,   1.400000,   1.500000,   2.100000,   0.407038,   0.137000,   3.026000, 576.133055
Outstanding requests per worker:
4 4 6 7 3 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144188,      15824,     110319,      33869,   0.861623,   1.400000,   1.600000,   2.100000,   0.412072,   0.142000,   3.205000, 589.366702
Outstanding requests per worker:
2 3 2 3 4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144157,      15853,     111636,      32521,   0.875792,   1.500000,   1.600000,   2.100000,   0.419098,   0.150000,   3.150000, 600.189973
Outstanding requests per worker:
5 5 6 7 4 3 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:27   0:00 /usr/lib/linux
memcache      8 72.6  0.0 129472 44928 pts/0    Sl+  11:27   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75287988      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
         983832293      L1-dcache-loads:u                                           
         357015632      armv8_pmuv3_0/l2d_cache/:u                                   
         100021354      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.701551636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2293494272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2277044736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2260595200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244145664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227696128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978895.977320,       0.0,       65041,      58485,       6556,      34497,      23988,   0.856135,   1.400000,   1.600000,   2.100000,   0.407077,   0.000000,   2.904000, 399.845123
Outstanding requests per worker:
2 5 3 5 1 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146347,      16265,      97640,      48707,   0.911733,   1.500000,   1.600000,   2.000000,   0.426062,   0.150000,   3.217000, 482.185921
Outstanding requests per worker:
3 2 5 2 2 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.8,      162619,     146166,      16453,     103970,      42196,   0.945250,   1.600000,   1.700000,   2.000000,   0.438310,   0.154000,   3.226000, 530.020381
Outstanding requests per worker:
2 5 3 6 7 5 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146426,      16183,     107563,      38863,   0.979563,   1.600000,   1.700000,   2.000000,   0.452879,   0.157000,   3.620000, 556.076018
Outstanding requests per worker:
5 7 5 4 2 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.2,      162616,     146272,      16344,     109718,      36554,   0.991819,   1.600000,   1.700000,   2.000000,   0.454648,   0.166000,   3.312000, 574.821552
Outstanding requests per worker:
6 2 6 3 4 2 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146415,      16200,     111650,      34765,   1.008492,   1.700000,   1.800000,   2.000000,   0.462113,   0.164000,   3.287000, 588.601298
Outstanding requests per worker:
6 2 5 3 4 1 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146371,      16244,     113489,      32882,   1.017904,   1.700000,   1.800000,   2.100000,   0.468972,   0.166000,   3.714000, 601.213034
Outstanding requests per worker:
6 2 7 3 4 3 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:28   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:28   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 46976 pts/0    Sl+  11:28   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74971185      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        1003492053      L1-dcache-loads:u                                           
         354721204      armv8_pmuv3_0/l2d_cache/:u                                   
          95277468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990844399 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2636640768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978943.977368,       0.0,       66112,      59550,       6562,      35455,      24095,   0.906863,   1.500000,   1.600000,   1.900000,   0.421893,   0.000000,   3.174000, 402.752326
Outstanding requests per worker:
2 6 4 5 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.8,      165294,     148822,      16472,      98918,      49904,   0.959349,   1.600000,   1.700000,   2.000000,   0.444249,   0.151000,   4.025000, 480.212381
Outstanding requests per worker:
2 4 2 3 6 5 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148710,      16596,     105444,      43266,   1.013274,   1.700000,   1.800000,   2.000000,   0.464869,   0.158000,   4.187000, 529.178919
Outstanding requests per worker:
2 3 6 7 6 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.4,      165297,     148954,      16343,     109215,      39739,   1.042660,   1.700000,   1.800000,   2.100000,   0.476861,   0.175000,   3.659000, 555.879694
Outstanding requests per worker:
5 6 4 3 2 2 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148595,      16710,     111450,      37145,   1.059736,   1.800000,   1.900000,   2.100000,   0.484001,   0.167000,   3.287000, 574.011266
Outstanding requests per worker:
5 6 4 3 2 1 2 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.8,      165294,     148680,      16614,     113399,      35281,   1.091601,   1.800000,   1.900000,   2.200000,   0.498685,   0.179000,   3.450000, 588.040174
Outstanding requests per worker:
7 2 7 6 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.6,      165293,     148929,      16364,     115459,      33470,   1.110309,   1.800000,   1.900000,   2.200000,   0.507690,   0.185000,   3.654000, 601.883555
Outstanding requests per worker:
7 7 6 5 4 4 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:29   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47424 pts/0    Sl+  11:29   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75424929      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        1020002143      L1-dcache-loads:u                                           
         359076945      armv8_pmuv3_0/l2d_cache/:u                                   
          97929071      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110829985 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2251223552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234774016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575978992.977417,       0.0,       67220,      60450,       6770,      36045,      24405,   0.981851,   1.600000,   1.700000,   2.100000,   0.455470,   0.000000,   3.118000, 404.904764
Outstanding requests per worker:
2 3 6 4 5 2 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151276,      16806,     101272,      50004,   1.035948,   1.700000,   1.800000,   2.000000,   0.474457,   0.168000,   3.271000, 484.646871
Outstanding requests per worker:
6 8 3 4 2 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     150964,      17109,     107521,      43443,   1.090023,   1.800000,   1.900000,   2.100000,   0.498374,   0.175000,   3.486000, 532.359470
Outstanding requests per worker:
5 5 7 6 8 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151201,      16874,     111024,      40177,   1.117107,   1.800000,   2.000000,   2.200000,   0.508151,   0.171000,   3.475000, 557.616253
Outstanding requests per worker:
9 4 4 2 3 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.2,      168081,     151141,      16940,     113868,      37273,   1.146587,   1.900000,   2.000000,   2.200000,   0.518519,   0.178000,   3.387000, 578.200839
Outstanding requests per worker:
9 5 6 3 4 8 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.6,      168088,     151356,      16732,     115774,      35582,   1.166160,   1.900000,   2.000000,   2.300000,   0.530749,   0.183000,   4.125000, 590.092953
Outstanding requests per worker:
7 8 5 8 2 7 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151250,      16829,     117274,      33976,   1.183978,   2.000000,   2.100000,   2.300000,   0.541285,   0.180000,   3.659000, 601.852060
Outstanding requests per worker:
7 8 3 8 3 5 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:30   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:30   0:00 /usr/lib/linux
memcache     10 72.6  0.0 131520 46976 pts/0    Sl+  11:30   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76624691      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        1038391691      L1-dcache-loads:u                                           
         361836198      armv8_pmuv3_0/l2d_cache/:u                                   
          94716662      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690542718 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2500915712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979041.977466,       0.0,       68072,      61276,       6796,      36308,      24968,   1.197483,   2.000000,   2.100000,   2.400000,   0.542487,   0.000000,   3.365000, 402.095111
Outstanding requests per worker:
3 7 6 9 8 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153421,      16802,     103104,      50317,   1.264907,   2.100000,   2.200000,   2.500000,   0.575681,   0.210000,   5.989000, 488.462336
Outstanding requests per worker:
6 9 10 3 1 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.2,      170221,     153167,      17054,     109077,      44090,   1.460249,   2.400000,   2.700000,   3.100000,   0.685087,   0.256000,   4.488000, 532.959345
Outstanding requests per worker:
3 8 7 10 9 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.8,      170219,     153250,      16969,     112796,      40454,   1.575469,   2.600000,   2.800000,   3.200000,   0.727897,   0.259000,   3.692000, 558.175687
Outstanding requests per worker:
9 6 5 9 7 3 3 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153061,      17156,     115521,      37540,   1.714843,   2.800000,   3.000000,   3.400000,   0.788486,   0.280000,   4.775000, 577.334814
Outstanding requests per worker:
6 13 11 3 13 9 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.2,      170236,     153211,      17025,     117415,      35796,   1.880010,   3.100000,   3.300000,   3.700000,   0.865880,   0.293000,   4.746000, 591.587288
Outstanding requests per worker:
9 8 6 11 9 4 3 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34023.6,      170118,     153234,      16884,     118721,      34513,   3.199760,   6.700000,   7.400000,   8.300000,   2.143902,   0.324000,   9.219000, 600.873690
Outstanding requests per worker:
24 26 15 18 23 30 12 21 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:30   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:30   0:00 /usr/lib/linux
memcache      9 72.6  0.0 132544 47040 pts/0    Sl+  11:30   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76454899      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        1056438730      L1-dcache-loads:u                                           
         361882019      armv8_pmuv3_0/l2d_cache/:u                                   
          95276092      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.550134627 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2192241152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175791616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159342080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979089.977514,       0.0,       69208,      62218,       6990,      37072,      25146,   1.808477,   3.000000,   3.200000,   3.600000,   0.831062,   0.000000,   4.482000, 404.805828
Outstanding requests per worker:
18 2 7 5 12 10 17 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34599.6,      172998,     155776,      17222,     104316,      51460,   4.325654,   8.300000,   9.600000,  13.800000,   2.986592,   0.394000,  17.810000, 486.316865
Outstanding requests per worker:
23 26 68 29 29 31 20 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34608.0,      173040,     155773,      17267,     110983,      44790,   9.975622,  13.000000,  15.500000,  20.800000,   2.976315,   2.361000,  27.795000, 532.862749
Outstanding requests per worker:
48 46 90 38 43 40 43 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34622.2,      173111,     155984,      17127,     114624,      41360,  12.057232,  19.100000,  23.400000,  29.700000,   4.534072,   5.923000,  37.693001, 557.769169
Outstanding requests per worker:
39 98 74 47 52 51 45 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34628.6,      173143,     155720,      17423,     117281,      38439,  13.527078,  16.100000,  17.000000,  22.500000,   2.628632,   3.759000,  26.842000, 577.446930
Outstanding requests per worker:
61 55 58 64 52 68 66 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34614.4,      173072,     155888,      17184,     119446,      36442,  14.878559,  17.100000,  18.200000,  22.700000,   2.248514,   5.626000,  30.981001, 591.718336
Outstanding requests per worker:
75 69 88 60 66 63 90 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34564.6,      172823,     155528,      17295,     121207,      34321,  20.769793,  35.900000,  51.600000,  58.800000,  10.805062,   9.857000,  65.062001, 605.722037
Outstanding requests per worker:
73 71 256 88 68 65 237 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:31   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:31   0:00 /usr/lib/linux
memcache      9 72.6  0.0 131520 48192 pts/0    Sl+  11:31   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77450724      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        1100079247      L1-dcache-loads:u                                           
         375654367      armv8_pmuv3_0/l2d_cache/:u                                   
         103951097      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871289057 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2404184576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2387735040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2371285504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979138.977563,       0.0,       69935,      62872,       7063,      37576,      25296,   3.332858,   6.800000,   7.700000,  10.400000,   2.257471,   0.000000,  12.919000, 407.083217
Outstanding requests per worker:
32 28 54 53 24 25 26 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35044.0,      175220,     157983,      17237,     106295,      51688,  12.038749,  15.100000,  16.400000,  28.400000,   3.589204,   2.435000,  34.929998, 488.496427
Outstanding requests per worker:
56 67 66 70 62 53 64 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35060.6,      175303,     157507,      17796,     112374,      45133,  15.582976,  18.600000,  19.700000,  21.800000,   2.102847,   5.311000,  23.903999, 533.589269
Outstanding requests per worker:
86 80 85 83 74 74 77 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35023.6,      175118,     157829,      17289,     116572,      41257,  22.935538,  37.500000,  41.200000,  54.100000,   8.577797,  14.508000,  67.068003, 560.444741
Outstanding requests per worker:
75 91 94 196 85 82 88 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34857.0,      174285,     156629,      17656,     117847,      38782,  41.069653,  74.500000,  80.400000,  88.400000,  20.845059,  14.781000, 102.109998, 576.104080
Outstanding requests per worker:
218 278 234 345 161 189 308 416 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34718.8,      173594,     156265,      17329,     120122,      36143,  86.642076, 121.500000, 129.800000, 141.100000,  24.682647,  30.540001, 148.994997, 593.432733
Outstanding requests per worker:
428 499 562 587 485 333 499 610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34564.8,      172824,     155480,      17344,     121016,      34464, 150.247005, 198.100000, 214.600000, 238.900000,  35.676442,  72.299004, 253.042996, 605.495408
Outstanding requests per worker:
699 818 986 1075 749 547 861 894 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:32   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:32   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48192 pts/0    Sl+  11:32   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77593677      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1108009466      L1-dcache-loads:u                                           
         377540759      armv8_pmuv3_0/l2d_cache/:u                                   
         103742107      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180632892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2303914496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979186.977611,       0.0,       70215,      63177,       7038,      37573,      25604,  16.680528,  21.800000,  27.800000,  33.700000,   6.128150,   0.000000,  42.362001, 405.113380
Outstanding requests per worker:
182 174 134 80 123 73 78 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34962.4,      174812,     157306,      17506,     105814,      51492,  63.491625, 107.100000, 120.300000, 143.400000,  33.039557,  14.458000, 151.806995, 488.763970
Outstanding requests per worker:
537 579 646 410 587 341 342 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34730.8,      173654,     156351,      17303,     111622,      44729, 165.639992, 224.800000, 233.000000, 257.000000,  44.078868,  68.658002, 274.479985, 534.571266
Outstanding requests per worker:
1006 1082 1066 955 1198 783 986 961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34603.4,      173017,     155545,      17472,     114745,      40800, 292.605115, 357.200000, 368.600000, 400.500000,  48.345120, 172.867998, 415.993005, 561.507358
Outstanding requests per worker:
1609 1645 1777 1468 1826 1344 1539 1596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34714.0,      173570,     156287,      17283,     117871,      38416, 420.854470, 493.600000, 509.600000, 523.400000,  51.780989, 292.769015, 529.967010, 579.175114
Outstanding requests per worker:
2164 2348 2276 1875 2326 1871 2157 2006 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34784.8,      173924,     156547,      17377,     120177,      36370, 533.737321, 604.100000, 624.400000, 646.500000,  54.095531, 415.089995, 654.303014, 593.385590
Outstanding requests per worker:
2637 2882 2826 2368 2723 2262 2712 2475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34896.8,      174484,     156993,      17491,     122296,      34697, 633.751065, 698.800000, 711.500000, 726.200000,  52.499822, 509.501994, 734.347999, 605.040715
Outstanding requests per worker:
3160 3232 3235 2800 3114 2681 3065 2899 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:33   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   11:33   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 50240 pts/0    Sl+  11:33   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  11:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76802196      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1103999128      L1-dcache-loads:u                                           
         374927464      armv8_pmuv3_0/l2d_cache/:u                                   
         103161652      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.779442688 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3015373312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2998923776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982474240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966024704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979235.977660,       0.0,       70705,      63531,       7174,      37684,      25847,  22.128913,  45.200000,  49.700000,  56.300000,  13.086632,   0.000000,  61.018001, 402.004155
Outstanding requests per worker:
208 119 229 101 251 234 83 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35124.8,      175624,     158157,      17467,     106032,      52125,  98.063168, 154.900000, 165.300000, 179.600000,  40.697721,  12.807000, 188.732997, 486.806888
Outstanding requests per worker:
704 695 784 627 802 836 729 780 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34915.4,      174577,     157111,      17466,     112247,      44864, 243.193981, 310.100000, 326.700000, 346.300000,  48.637605, 133.066997, 363.296002, 533.485657
Outstanding requests per worker:
1248 1396 1528 1267 1615 1540 1492 1481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34961.8,      174809,     157341,      17468,     116603,      40738, 396.435430, 461.900000, 478.200000, 494.200000,  49.877467, 274.271011, 511.341989, 564.017859
Outstanding requests per worker:
1944 2023 2124 2084 2232 2243 2285 2014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35116.0,      175580,     158006,      17574,     119084,      38922, 535.021035, 606.700000, 626.000000, 650.400000,  50.854165, 429.674000, 666.921020, 579.223011
Outstanding requests per worker:
2461 2540 2682 2710 2806 2937 2990 2432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35157.6,      175788,     158512,      17276,     121360,      37152, 658.891655, 731.000000, 760.000000, 783.800000,  54.188578, 537.437022, 802.965999, 591.270844
Outstanding requests per worker:
3207 2985 3125 3243 3208 3608 3488 3094 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35312.0,      176560,     159113,      17447,     123924,      35189, 771.916246, 837.900000, 858.600000, 883.100000,  48.365056, 657.065988, 894.259989, 605.183404
Outstanding requests per worker:
3607 3504 3538 3675 3827 4001 3876 3561 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:34   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:34   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 48192 pts/0    Sl+  11:34   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  11:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76925205      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1114816907      L1-dcache-loads:u                                           
         378161706      armv8_pmuv3_0/l2d_cache/:u                                   
         104688479      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040887244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2346643968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2330194432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2313744896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297295360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
Created 8 connections total
Creating worker on tid 2022961664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979283.977708,       0.0,       70544,      63558,       6986,      37433,      26125,  36.762757,  66.100000,  70.300000,  79.300000,  20.270020,   0.000000,  87.622002, 399.285959
Outstanding requests per worker:
323 350 377 216 325 318 319 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34934.2,      174671,     157171,      17500,     105296,      51875, 179.481515, 265.800000, 277.800000, 299.100000,  63.346287,  41.205000, 322.400987, 486.562038
Outstanding requests per worker:
1321 1326 1287 1230 1276 1304 1320 1462 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35049.4,      175247,     157779,      17468,     112949,      44830, 393.101740, 476.100000, 488.600000, 505.000000,  61.319242, 266.604006, 518.222988, 535.397366
Outstanding requests per worker:
2337 2149 2269 2199 2114 2262 2259 2351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35317.0,      176585,     158942,      17643,     117386,      41556, 574.864632, 640.700000, 654.500000, 692.500000,  51.404578, 461.181998, 714.690983, 561.845925
Outstanding requests per worker:
3043 2906 3005 3027 2876 2937 2968 3250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35511.0,      177555,     159851,      17704,     120357,      39494, 728.374155, 790.100000, 804.800000, 849.500000,  46.623570, 629.108012, 860.955000, 578.199849
Outstanding requests per worker:
3624 3525 3635 3603 3504 3576 3741 3904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35482.4,      177412,     159907,      17505,     122575,      37332, 872.331085, 935.500000, 950.400000, 975.800000,  48.588620, 766.744971, 989.467978, 592.945750
Outstanding requests per worker:
4411 4330 4274 4177 4150 4172 4343 4501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35617.2,      178086,     160256,      17830,     125066,      35190, 1005.919555, 1069.100000, 1090.400000, 1118.500000,  46.919795, 903.375030, 1126.721025, 606.294379
Outstanding requests per worker:
5106 4906 4742 4774 4726 4690 4932 5058 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:34   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   11:34   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49216 pts/0    Sl+  11:34   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  11:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77952767      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1120798767      L1-dcache-loads:u                                           
         382444740      armv8_pmuv3_0/l2d_cache/:u                                   
         104524031      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.101728271 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3078222336
starting receive base loop
num_worker_connections 1
Creating worker on tid 3061772800
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045323264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028873728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979332.977757,       0.0,       70874,      63767,       7107,      37989,      25778,  44.875225,  80.500000,  88.300000,  99.100000,  25.018233,   0.000000, 110.846996, 404.159032
Outstanding requests per worker:
456 412 468 327 307 394 377 491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35139.4,      175697,     158140,      17557,     106643,      51497, 214.753006, 319.800000, 336.600000, 352.900000,  76.147234,  63.634001, 367.105007, 489.278190
Outstanding requests per worker:
1654 1558 1592 1512 1418 1638 1674 1687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35454.4,      177272,     159372,      17900,     113890,      45482, 451.453390, 548.200000, 569.500000, 589.200000,  68.558307, 301.135004, 608.808994, 535.107403
Outstanding requests per worker:
2544 2576 2520 2481 2282 2713 2726 2813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35717.2,      178586,     160752,      17834,     118988,      41764, 651.041313, 736.700000, 758.700000, 778.100000,  64.708076, 487.783015, 792.832017, 562.338864
Outstanding requests per worker:
3356 3414 3355 3357 3061 3439 3670 3611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35949.8,      179749,     161941,      17808,     122579,      39362, 813.225157, 884.400000, 905.800000, 921.500000,  55.284198, 660.659015, 931.419015, 581.419968
Outstanding requests per worker:
4046 4118 4084 4070 3812 3984 4304 4292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36134.6,      180673,     162596,      18077,     125008,      37588, 944.921619, 1010.300000, 1024.400000, 1040.100000,  49.198888, 819.923997, 1050.492048, 595.607684
Outstanding requests per worker:
4436 4727 4680 4695 4416 4612 4853 4811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36077.4,      180387,     162427,      17960,     126413,      36014, 1070.261263, 1141.300000, 1149.200000, 1164.700000,  50.585853, 946.933985, 1173.925996, 605.594304
Outstanding requests per worker:
5033 5412 5315 5367 4970 5178 5345 5419 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:35   0:00 /usr/lib/linux
memcache      8 69.4  0.0 133568 48256 pts/0    Sl+  11:35   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78070260      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1135269261      L1-dcache-loads:u                                           
         383855456      armv8_pmuv3_0/l2d_cache/:u                                   
         101136742      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.341687625 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3112563200
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096113664
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979381.977806,       0.0,       69784,      62892,       6892,      37071,      25821,  71.923146, 128.300000, 136.900000, 149.100000,  40.363450,   0.000000, 159.055993, 399.058465
Outstanding requests per worker:
731 693 669 625 604 645 679 715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35113.2,      175566,     158226,      17340,     106050,      52176, 315.492878, 442.400000, 461.500000, 486.400000,  95.597310, 126.608998, 502.651989, 485.915810
Outstanding requests per worker:
2264 2312 1994 2208 2063 2338 2185 2240 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35780.0,      178900,     161049,      17851,     114785,      46264, 593.999128, 695.800000, 714.500000, 728.600000,  73.114007, 422.827005, 739.139020, 532.456228
Outstanding requests per worker:
3426 3411 3037 3410 3094 3442 3399 3293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36064.0,      180320,     162365,      17955,     119895,      42470, 809.625322, 902.600000, 914.600000, 942.200000,  67.141394, 643.872023, 957.852006, 560.304973
Outstanding requests per worker:
4339 4338 3989 4466 3974 4315 4336 4247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36282.6,      181413,     163255,      18158,     123187,      40068, 990.670772, 1070.300000, 1087.300000, 1117.000000,  61.799541, 842.974007, 1136.626005, 579.774341
Outstanding requests per worker:
5066 5060 4811 5322 4740 5037 5239 5124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36409.2,      182046,     163858,      18188,     125994,      37864, 1152.791208, 1232.200000, 1249.400000, 1280.400000,  61.313091, 1005.105972, 1301.987052, 594.387024
Outstanding requests per worker:
5796 5705 5535 6109 5351 5842 5888 5935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36571.2,      182856,     164549,      18307,     128160,      36389, 1295.920392, 1375.300000, 1397.700000, 1432.400000,  64.569136, 1135.858059, 1451.014996, 604.903421
Outstanding requests per worker:
6464 6387 6221 6785 5814 6488 6419 6533 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:36   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:36   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  11:36   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  11:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78308360      L1-dcache-load-misses:u   # [33m   6.86%[m of all L1-dcache hits  
        1141003199      L1-dcache-loads:u                                           
         385442323      armv8_pmuv3_0/l2d_cache/:u                                   
         107375669      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340492177 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2776691200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2760241664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979429.977854,       0.0,       70399,      63432,       6967,      37813,      25619,  77.991199, 136.700000, 145.200000, 154.900000,  42.941006,   0.000000, 163.838997, 405.479632
Outstanding requests per worker:
703 755 723 747 671 756 764 708 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35494.2,      177471,     159739,      17732,     107502,      52237, 331.223143, 463.200000, 481.000000, 508.800000, 100.611098, 138.595000, 525.161028, 488.400804
Outstanding requests per worker:
2464 2291 2362 2430 2209 2479 2281 2328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36243.8,      181219,     163113,      18106,     116488,      46625, 621.582738, 720.300000, 735.900000, 755.300000,  73.173686, 461.138994, 772.876024, 535.245713
Outstanding requests per worker:
3587 3465 3534 3567 3318 3618 3373 3651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36567.6,      182838,     164352,      18486,     121660,      42692, 841.646828, 931.000000, 945.600000, 960.400000,  65.537585, 690.904021, 978.680015, 562.930618
Outstanding requests per worker:
4516 4450 4443 4647 4210 4598 4357 4551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36813.6,      184068,     165592,      18476,     125191,      40401, 1027.755260, 1096.800000, 1110.000000, 1136.300000,  54.150195, 882.974029, 1153.692961, 580.427116
Outstanding requests per worker:
5353 5153 5321 5476 5055 5348 5228 5271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36976.2,      184881,     166381,      18500,     128079,      38302, 1180.795409, 1247.700000, 1267.000000, 1283.000000,  52.075885, 1055.773020, 1304.397941, 595.683191
Outstanding requests per worker:
6108 5925 6006 6192 5699 6085 5889 5909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37037.4,      185187,     166455,      18732,     129741,      36714, 1323.425335, 1396.800000, 1419.100000, 1454.200000,  54.831757, 1191.221952, 1469.640970, 607.341281
Outstanding requests per worker:
6832 6690 6656 6864 6011 6686 6488 6468 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:37   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50176 pts/0    Sl+  11:37   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80638058      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1155662613      L1-dcache-loads:u                                           
         393246539      armv8_pmuv3_0/l2d_cache/:u                                   
         103170471      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970197046 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3109089792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979478.977903,       0.0,       70385,      63380,       7005,      37699,      25681,  90.190558, 161.500000, 170.600000, 182.400000,  50.874353,   0.000000, 200.569004, 403.438719
Outstanding requests per worker:
834 870 895 941 796 872 868 860 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35703.4,      178517,     160721,      17796,     108133,      52588, 383.507134, 531.100000, 551.900000, 579.800000, 112.453445, 163.157001, 595.197976, 488.957112
Outstanding requests per worker:
2621 2873 2674 2846 2517 2768 2605 2765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36709.6,      183548,     164991,      18557,     117860,      47131, 693.420798, 789.600000, 806.800000, 829.400000,  74.779902, 521.508992, 855.925024, 533.731585
Outstanding requests per worker:
3888 3991 4112 4020 3754 3804 3823 3982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37091.4,      185457,     167044,      18413,     123509,      43535, 915.973511, 1002.900000, 1021.500000, 1050.900000,  65.158876, 770.588994, 1071.112990, 561.083816
Outstanding requests per worker:
4840 4938 5154 5057 4638 4741 4955 4853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37265.2,      186326,     167494,      18832,     127002,      40492, 1104.384516, 1178.700000, 1188.300000, 1210.100000,  56.700517, 954.859018, 1224.588990, 582.867333
Outstanding requests per worker:
5798 5792 5722 5878 5604 5710 5713 5686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37264.8,      186324,     167783,      18541,     129103,      38680, 1272.186836, 1348.400000, 1365.800000, 1393.200000,  59.237689, 1081.024051, 1409.389973, 595.468784
Outstanding requests per worker:
6675 6787 6157 6439 6534 6539 6570 6499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37327.0,      186635,     167793,      18842,     131129,      36664, 1423.900072, 1527.200000, 1545.900000, 1582.400000,  92.676872, 1082.767010, 1603.675008, 607.396483
Outstanding requests per worker:
7530 7732 5508 7603 7370 7280 7400 7215 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  11:38   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81294019      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1166401296      L1-dcache-loads:u                                           
         397444564      armv8_pmuv3_0/l2d_cache/:u                                   
         104023703      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050419554 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956784128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2940334592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923885056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907435520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979526.977951,       0.0,       71053,      64041,       7012,      37883,      26158,  90.501846, 161.300000, 171.600000, 181.400000,  51.009657,   0.000000, 192.586005, 401.220780
Outstanding requests per worker:
861 905 890 908 891 876 850 843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36112.4,      180562,     162609,      17953,     109036,      53573, 376.469148, 518.400000, 540.100000, 558.000000, 107.770287, 171.461001, 579.578996, 486.674311
Outstanding requests per worker:
2747 2710 2510 2739 2714 2804 2626 2753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36973.6,      184868,     166343,      18525,     119304,      47039, 690.189426, 797.700000, 820.000000, 846.500000,  80.720036, 511.488020, 868.431985, 536.377479
Outstanding requests per worker:
4110 3914 3741 4216 3923 4077 3829 4067 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37417.4,      187087,     168429,      18658,     124631,      43798, 924.613614, 1013.500000, 1032.500000, 1065.900000,  67.710438, 764.787972, 1080.394030, 561.999935
Outstanding requests per worker:
5187 4857 4626 5239 5048 4971 4943 5038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37556.0,      187780,     169153,      18627,     128058,      41095, 1119.482874, 1203.500000, 1224.200000, 1246.500000,  66.240757, 944.244981, 1258.355021, 581.420684
Outstanding requests per worker:
6112 5748 5566 6092 5676 5874 5899 5956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37534.8,      187674,     168890,      18784,     130359,      38531, 1298.814548, 1393.600000, 1414.000000, 1444.100000,  69.824660, 1088.274002, 1458.011031, 597.363994
Outstanding requests per worker:
7093 6594 6537 7087 6215 6566 6954 6750 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37319.6,      186598,     167921,      18677,     130897,      37024, 1464.811683, 1593.300000, 1622.300000, 1665.100000, 106.168178, 1118.304968, 1680.048943, 607.127584
Outstanding requests per worker:
8136 6959 7569 8199 6556 7441 7815 7784 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:38   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:38   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50176 pts/0    Sl+  11:38   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81079418      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1177677831      L1-dcache-loads:u                                           
         398538978      armv8_pmuv3_0/l2d_cache/:u                                   
         105629338      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.400175365 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2655515136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639065600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979575.978000,       0.0,       70548,      63567,       6981,      37678,      25889, 111.817807, 198.900000, 210.300000, 220.900000,  62.953980,   0.000000, 233.577996, 401.890635
Outstanding requests per worker:
1049 1082 1094 1135 1094 1080 1008 1145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36507.8,      182539,     164253,      18286,     110654,      53599, 429.477354, 576.200000, 594.000000, 618.500000, 112.528570, 203.015000, 641.402006, 489.704395
Outstanding requests per worker:
2967 2976 3048 3169 2949 3100 2979 2999 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37275.6,      186378,     167819,      18559,     120329,      47490, 759.184566, 879.200000, 903.700000, 942.500000,  88.405145, 592.200994, 955.908000, 538.200514
Outstanding requests per worker:
4467 4456 4372 4707 4181 4704 4609 4346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37155.2,      185776,     167375,      18401,     124033,      43342, 1025.275639, 1156.600000, 1197.800000, 1250.600000,  94.566770, 784.300029, 1277.799964, 563.925497
Outstanding requests per worker:
4737 5333 5886 4493 4765 6318 5763 5853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36798.2,      183991,     165502,      18489,     125395,      40107, 1201.597694, 1449.900000, 1498.300000, 1558.700000, 183.707780, 820.529997, 1608.777046, 581.709593
Outstanding requests per worker:
4924 4613 6425 5137 4405 7584 6701 6392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36584.4,      182922,     164899,      18023,     126858,      38041, 1293.969980, 1571.000000, 1619.000000, 1692.200000, 218.559156, 889.406025, 1739.688039, 594.774329
Outstanding requests per worker:
5553 5619 6218 4563 4678 7263 6734 6989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36502.2,      182511,     164171,      18340,     128057,      36114, 1320.290586, 1570.300000, 1615.700000, 1699.600000, 196.125404, 917.897999, 1765.387058, 606.325051
Outstanding requests per worker:
5635 5652 6739 5361 5056 7506 7350 6781 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:39   0:00 /usr/lib/linux
memcache      8 72.6  0.0 132544 47232 pts/0    Sl+  11:39   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81713609      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1163409264      L1-dcache-loads:u                                           
         397578278      armv8_pmuv3_0/l2d_cache/:u                                   
         106422302      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039714389 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2314859008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298409472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979623.978048,       0.0,       70471,      63501,       6970,      37771,      25730, 122.748193, 216.200000, 229.700000, 241.700000,  68.497940,   0.000000, 251.996994, 402.767941
Outstanding requests per worker:
1224 1219 1078 1233 1184 1160 1215 1251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36363.4,      181817,     163767,      18050,     110079,      53688, 484.755921, 655.900000, 677.100000, 691.700000, 131.920663, 213.093996, 705.664992, 488.522602
Outstanding requests per worker:
3461 3502 3433 3480 3495 3451 3437 3504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37356.0,      186780,     167995,      18785,     120195,      47800, 858.540466, 986.500000, 1005.600000, 1027.500000,  92.330431, 683.847010, 1046.175957, 536.393577
Outstanding requests per worker:
5102 5106 4859 5200 4880 5159 5094 5040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37031.0,      185155,     166642,      18513,     123253,      43389, 1126.682251, 1280.900000, 1313.300000, 1360.700000, 114.249970, 810.599029, 1394.497037, 561.612343
Outstanding requests per worker:
5995 5976 4505 5957 5045 6364 6253 4305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36630.0,      183150,     164678,      18472,     124414,      40264, 1243.755350, 1424.400000, 1451.500000, 1486.600000, 150.980102, 842.832029, 1531.391978, 580.374859
Outstanding requests per worker:
6738 6660 5013 5896 5780 6565 5786 5547 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36533.4,      182667,     164601,      18066,     126488,      38113, 1294.331333, 1468.600000, 1504.700000, 1581.100000, 148.549898, 866.132975, 1641.160965, 594.189841
Outstanding requests per worker:
7068 5597 5348 7399 6344 5729 6291 5141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36453.2,      182266,     163918,      18348,     127665,      36253, 1336.390960, 1524.200000, 1570.800000, 1626.900000, 149.655005, 907.284975, 1677.572012, 606.076856
Outstanding requests per worker:
6738 6654 5575 6746 6654 6051 6169 5894 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:40   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50176 pts/0    Sl+  11:40   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80186879      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1163121378      L1-dcache-loads:u                                           
         392671682      armv8_pmuv3_0/l2d_cache/:u                                   
         107409573      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810272666 seconds time elapsed

