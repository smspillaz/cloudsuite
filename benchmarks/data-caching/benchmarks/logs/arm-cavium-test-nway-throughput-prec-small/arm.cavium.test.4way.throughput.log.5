+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2978738688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962289152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053156.051580,       0.0,      242495,     218316,      24179,     141492,      76824,   0.293027,   0.373100,   0.423100,   0.553100,   0.221048,   0.000000,   7.696000, 461.785678
Outstanding requests per worker:
5 4 5 4 4 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545188,      60927,     403078,     142110,   0.307400,   0.421100,   0.452100,   0.557100,   0.088761,   0.053000,   2.473000, 561.756798
Outstanding requests per worker:
3 8 4 4 3 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545670,      60454,     427227,     118443,   0.323752,   0.432100,   0.488100,   0.591100,   0.099931,   0.056000,   2.734000, 610.295726
Outstanding requests per worker:
5 6 6 4 5 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545540,      60556,     440569,     104971,   0.336326,   0.451100,   0.501000,   0.623100,   0.103155,   0.047000,   2.631000, 637.324728
Outstanding requests per worker:
4 8 4 3 7 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545877,      60230,     449196,      96681,   0.344832,   0.478100,   0.509100,   0.624100,   0.101625,   0.074000,   2.551000, 654.134461
Outstanding requests per worker:
6 5 5 5 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545638,      60474,     456186,      89452,   0.351265,   0.487100,   0.543100,   0.641100,   0.097765,   0.122000,   1.037000, 668.307847
Outstanding requests per worker:
4 6 5 5 5 10 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.9,      606135,     545432,      60703,     460729,      84703,   0.361750,   0.495100,   0.559100,   0.692000,   0.121254,   0.061000,   3.084000, 677.853839
Outstanding requests per worker:
5 8 5 6 6 7 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:06   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113792 pts/0   Sl+  08:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316351305      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3895127351      L1-dcache-loads:u                                           
        1443501445      armv8_pmuv3_0/l2d_cache/:u                                   
         440634005      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009811539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2607739392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2591289856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574840320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340418048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2323968512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307518976
starting receive base loop
Created 8 connections total
Creating worker on tid 2291069440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053205.051629,       0.0,      242476,     218080,      24396,     141805,      76275,   0.301130,   0.419100,   0.448100,   0.556100,   0.091787,   0.000000,   2.228000, 464.334795
Outstanding requests per worker:
5 4 4 5 5 8 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545373,      60737,     403692,     141681,   0.326470,   0.448100,   0.503100,   0.621100,   0.098898,   0.053000,   2.169000, 563.059585
Outstanding requests per worker:
5 7 5 3 4 8 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.9,      606130,     545834,      60296,     427828,     118006,   0.338565,   0.486100,   0.540100,   0.638100,   0.105754,   0.091000,   2.171000, 611.380945
Outstanding requests per worker:
5 7 2 5 5 9 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.3,      606082,     545240,      60842,     440468,     104772,   0.375413,   0.494100,   0.562000,   1.200000,   0.310113,   0.045000,   6.791000, 636.939566
Outstanding requests per worker:
4 11 5 6 5 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121206.1,      606031,     545486,      60545,     449983,      95503,   0.370415,   0.516000,   0.584100,   0.744100,   0.123251,   0.111000,   2.624000, 656.382017
Outstanding requests per worker:
15 14 12 32 8 14 7 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121234.7,      606174,     545811,      60363,     456515,      89296,   0.372828,   0.521100,   0.592100,   0.714100,   0.121036,   0.054000,   2.205000, 668.690342
Outstanding requests per worker:
6 11 6 7 4 5 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545243,      60851,     460610,      84633,   0.389704,   0.558100,   0.628100,   0.773100,   0.137119,   0.054000,   3.020000, 677.801468
Outstanding requests per worker:
6 7 9 4 3 10 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:06   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114304 pts/0   Sl+  08:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317357190      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        3892762494      L1-dcache-loads:u                                           
        1447133992      armv8_pmuv3_0/l2d_cache/:u                                   
         446991366      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.741666238 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2854482432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838032896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053253.051677,       0.0,      242511,     218308,      24203,     141463,      76845,   0.279222,   0.361100,   0.389100,   0.489100,   0.107591,   0.000000,   4.326000, 461.631585
Outstanding requests per worker:
4 6 5 5 5 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.1,      606116,     545683,      60433,     403776,     141907,   0.307288,   0.420100,   0.443100,   0.551100,   0.083783,   0.058000,   2.031000, 561.931995
Outstanding requests per worker:
3 4 4 2 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545719,      60364,     427580,     118139,   0.325571,   0.431100,   0.486100,   0.564100,   0.090640,   0.063000,   2.196000, 610.683212
Outstanding requests per worker:
6 4 6 5 6 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545561,      60539,     440728,     104833,   0.340379,   0.449100,   0.493100,   0.583100,   0.094094,   0.059000,   2.142000, 637.585515
Outstanding requests per worker:
5 6 5 7 8 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545596,      60496,     449923,      95673,   0.354265,   0.486100,   0.514100,   0.625100,   0.102129,   0.051000,   2.421000, 655.567233
Outstanding requests per worker:
8 6 3 5 4 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545563,      60561,     456128,      89435,   0.364419,   0.490100,   0.551100,   0.673100,   0.115628,   0.117000,   2.801000, 669.137396
Outstanding requests per worker:
6 7 6 6 6 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545189,      60896,     461521,      83668,   0.377470,   0.499100,   0.558100,   0.691100,   0.131855,   0.126000,   3.411000, 680.190325
Outstanding requests per worker:
7 6 6 5 8 3 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:07   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 119296 pts/0   Sl+  08:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317087238      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3895486788      L1-dcache-loads:u                                           
        1449842846      armv8_pmuv3_0/l2d_cache/:u                                   
         445767846      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080326704 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2133062144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2116612608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100163072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053302.051726,       0.0,      246203,     221631,      24572,     143518,      78113,   0.310332,   0.419100,   0.477100,   0.557100,   0.085308,   0.000000,   2.041000, 462.347912
Outstanding requests per worker:
4 5 5 7 5 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553981,      61437,     409543,     144438,   0.346465,   0.480100,   0.516000,   0.628100,   0.099109,   0.057000,   2.070000, 561.683377
Outstanding requests per worker:
6 5 5 4 5 6 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     553945,      61478,     434755,     119190,   0.368957,   0.494100,   0.551100,   0.675100,   0.104998,   0.057000,   2.042000, 612.356017
Outstanding requests per worker:
6 7 5 7 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553892,      61521,     447645,     106247,   0.385444,   0.514100,   0.573100,   0.708100,   0.128021,   0.049000,   2.631000, 637.792497
Outstanding requests per worker:
5 4 4 10 6 8 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     554026,      61393,     456763,      97263,   0.400341,   0.551100,   0.615100,   0.750100,   0.130521,   0.123000,   2.565000, 656.115547
Outstanding requests per worker:
6 4 5 9 5 6 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553875,      61539,     462906,      90969,   0.422017,   0.580100,   0.671100,   0.811100,   0.138640,   0.052000,   2.757000, 667.806660
Outstanding requests per worker:
5 6 6 5 6 9 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     553687,      61733,     468299,      85388,   0.433460,   0.611100,   0.681100,   0.833100,   0.146679,   0.157000,   3.343000, 679.085895
Outstanding requests per worker:
5 6 5 11 5 4 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:08   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 114432 pts/0   Sl+  08:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317192006      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3947958941      L1-dcache-loads:u                                           
        1449246789      armv8_pmuv3_0/l2d_cache/:u                                   
         443866338      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850593873 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3171217920
starting receive base loop
num_worker_connections 1
Creating worker on tid 3087004160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070554624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054105088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037655552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
Created 8 connections total
Creating worker on tid 2785669632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053351.051775,       0.0,      246226,     221562,      24664,     144083,      77479,   1.506903,   0.481100,   6.400000,  33.900000,   5.513094,   0.000000,  40.488999, 463.349861
Outstanding requests per worker:
6 5 5 5 7 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553897,      61511,     409206,     144691,   2.069530,   0.612100,  16.700000,  37.100000,   6.725839,   0.062000,  43.579001, 562.083649
Outstanding requests per worker:
9 8 5 3 10 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     553827,      61614,     434885,     118942,   2.282676,   0.680100,  18.900000,  39.000000,   7.201864,   0.051000,  44.826999, 612.111566
Outstanding requests per worker:
7 3 7 3 9 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553657,      61779,     447309,     106348,   2.509501,   0.946100,  21.600000,  40.300000,   7.660416,   0.122000,  46.137001, 637.835290
Outstanding requests per worker:
11 4 7 6 8 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123078.1,      615391,     553875,      61516,     456156,      97719,   2.682617,   1.100000,  23.500000,  41.300000,   7.981912,   0.118000,  47.479000, 655.125998
Outstanding requests per worker:
31 6 10 7 43 8 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  122924.3,      614622,     553163,      61459,     462827,      90336,   2.796615,   2.400000,  24.000000,  42.100000,   8.167108,   0.125000,  47.502000, 669.720370
Outstanding requests per worker:
6 415 4 5 7 466 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  122991.3,      614957,     553683,      61274,     468270,      85413,   3.214913,   5.800000,  27.700000,  43.600000,   8.971444,   0.091000,  49.710002, 679.547118
Outstanding requests per worker:
8 702 5 6 13 644 7 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:09   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116608 pts/0   Sl+  08:09   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317064348      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3955426443      L1-dcache-loads:u                                           
        1454812080      armv8_pmuv3_0/l2d_cache/:u                                   
         444039399      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080319218 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2781671936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765222400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053399.051823,       0.0,      246226,     221529,      24697,     143290,      78239,   1.658374,   0.492100,   9.400000,  36.200000,   6.008861,   0.000000,  43.529999, 461.230033
Outstanding requests per worker:
4 4 5 6 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553738,      61693,     409364,     144374,   2.200686,   0.679100,  18.500000,  38.400000,   7.056232,   0.051000,  44.555001, 562.294202
Outstanding requests per worker:
6 3 6 8 3 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     553715,      61730,     434094,     119621,   2.496442,   0.776000,  21.800000,  40.300000,   7.669038,   0.112000,  46.792001, 611.168793
Outstanding requests per worker:
7 4 5 11 8 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     554118,      61304,     447664,     106454,   2.456054,   0.961100,  21.200000,  38.400000,   7.388576,   0.057000,  45.070000, 637.653879
Outstanding requests per worker:
8 4 3 10 6 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  122977.1,      614886,     553959,      60927,     457332,      96627,   2.678814,   2.300000,  22.800000,  40.200000,   7.833970,   0.118000,  45.853000, 656.199869
Outstanding requests per worker:
6 265 5 8 3 288 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  122923.1,      614616,     553108,      61508,     462315,      90793,   2.902646,   3.800000,  25.400000,  41.700000,   8.332156,   0.091000,  46.305001, 668.845039
Outstanding requests per worker:
8 679 6 11 6 692 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123120.5,      615603,     554159,      61444,     468750,      85409,   3.087988,   5.100000,  27.400000,  42.600000,   8.714351,   0.119000,  47.933999, 678.303406
Outstanding requests per worker:
7 620 5 12 5 604 5 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:10   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116288 pts/0   Sl+  08:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321279584      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3956642776      L1-dcache-loads:u                                           
        1455050089      armv8_pmuv3_0/l2d_cache/:u                                   
         444844867      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.938028086 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2596139520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2579689984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563240448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053448.051872,       0.0,      245247,     220591,      24656,     143228,      77363,   1.618284,   0.512100,  10.400000,  32.900000,   5.595368,   0.000000,  40.392000, 463.225426
Outstanding requests per worker:
489 6 5 5 470 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123035.5,      615178,     554036,      61142,     410047,     143989,   2.347030,   0.675100,  20.000000,  40.000000,   7.460925,   0.055000,  45.269001, 562.538810
Outstanding requests per worker:
597 4 7 6 614 6 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123122.7,      615614,     554298,      61316,     434445,     119853,   2.673139,   1.800000,  23.900000,  41.000000,   8.034594,   0.058000,  46.854001, 611.306802
Outstanding requests per worker:
514 5 8 6 540 3 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123132.3,      615662,     554253,      61409,     447820,     106433,   2.781299,   1.700000,  24.800000,  41.500000,   8.190349,   0.059000,  46.636999, 638.562830
Outstanding requests per worker:
433 5 9 7 413 6 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123115.3,      615577,     554354,      61223,     457069,      97285,   2.904736,   3.000000,  25.400000,  42.200000,   8.376593,   0.115000,  47.410998, 655.408503
Outstanding requests per worker:
352 4 6 7 343 6 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123154.3,      615772,     554431,      61341,     463782,      90649,   2.742255,   3.300000,  22.800000,  39.200000,   7.756642,   0.124000,  45.072999, 668.978861
Outstanding requests per worker:
146 4 12 8 215 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123121.9,      615610,     554348,      61262,     468273,      86075,   2.879901,   4.600000,  24.700000,  40.500000,   8.082607,   0.059000,  45.547001, 678.422329
Outstanding requests per worker:
106 8 11 8 61 6 9 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:10   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115200 pts/0   Sl+  08:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317323878      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        3947866225      L1-dcache-loads:u                                           
        1458083063      armv8_pmuv3_0/l2d_cache/:u                                   
         453492539      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200819984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2410607104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2394157568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377708032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2361258496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053497.051921,       0.0,      248853,     223890,      24963,     145262,      78628,   2.046318,   0.683100,  16.300000,  36.400000,   6.563176,   0.000000,  42.357001, 463.035321
Outstanding requests per worker:
8 2 615 6 7 5 606 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562635,      62418,     417260,     145375,   2.831436,   2.100000,  24.600000,  41.100000,   8.167241,   0.051000,  46.494000, 564.714252
Outstanding requests per worker:
6 4 612 10 9 6 601 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125052.3,      625262,     562958,      62304,     442415,     120543,   3.101285,   5.300000,  26.900000,  41.000000,   8.521293,   0.090000,  47.968000, 613.001721
Outstanding requests per worker:
7 9 507 16 7 7 524 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125020.7,      625104,     562118,      62986,     454735,     107383,   3.497148,   9.800000,  28.900000,  42.700000,   9.006868,   0.121000,  47.906000, 639.678637
Outstanding requests per worker:
7 8 492 23 6 9 448 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125029.1,      625146,     563088,      62058,     464772,      98316,   3.893389,  12.100000,  30.300000,  43.800000,   9.381838,   0.058000,  48.620000, 656.780640
Outstanding requests per worker:
7 9 441 22 8 6 405 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125049.7,      625249,     562428,      62821,     471522,      90906,   4.130596,  14.400000,  30.600000,  44.800000,   9.605361,   0.122000,  49.114000, 670.713562
Outstanding requests per worker:
10 7 310 35 6 10 341 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125135.1,      625676,     562589,      63087,     476555,      86034,   3.230942,   3.300000,  22.400000,  43.300000,   8.132610,   0.050000,  50.615001, 680.980289
Outstanding requests per worker:
9 6 5 25 10 9 7 52 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   08:11   0:00 /usr/lib/linux
memcache      8  290  0.0 425664 118784 pts/0   Sl+  08:11   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316931866      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        4044976939      L1-dcache-loads:u                                           
        1464672555      armv8_pmuv3_0/l2d_cache/:u                                   
         446670591      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.530877709 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2860511744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844062208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827612672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053545.051969,       0.0,      250023,     225163,      24860,     146909,      78254,   2.191605,   0.859100,  16.500000,  38.700000,   6.848745,   0.000000,  44.020999, 465.558893
Outstanding requests per worker:
14 5 8 6 9 5 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562406,      62646,     416923,     145483,   3.046284,   4.100000,  25.400000,  41.100000,   8.289606,   0.088000,  47.026001, 563.840352
Outstanding requests per worker:
12 5 10 9 12 4 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.5,      625003,     562867,      62136,     441423,     121444,   3.557561,   9.000000,  28.400000,  42.700000,   8.914787,   0.150000,  48.342999, 611.829615
Outstanding requests per worker:
25 7 10 10 30 7 13 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562792,      62261,     454932,     107860,   4.161445,  13.800000,  31.000000,  44.300000,   9.572366,   0.094000,  49.210001, 637.682025
Outstanding requests per worker:
34 6 9 5 27 7 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124998.7,      624994,     562792,      62202,     463756,      99036,   4.719357,  17.300000,  33.200000,  45.500000,  10.115611,   0.163000,  50.292999, 655.593342
Outstanding requests per worker:
42 4 15 9 48 7 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125016.5,      625083,     562418,      62665,     470429,      91989,   4.989916,  18.800000,  35.100000,  46.000000,  10.472656,   0.093000,  50.533999, 669.001607
Outstanding requests per worker:
51 5 11 10 40 3 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124933.5,      624668,     562441,      62227,     475750,      86691,   4.765183,  17.400000,  32.700000,  43.800000,   9.857046,   0.130000,  49.570002, 679.422219
Outstanding requests per worker:
41 202 13 8 48 183 10 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:12   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114624 pts/0   Sl+  08:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311155882      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        4050579358      L1-dcache-loads:u                                           
        1443990222      armv8_pmuv3_0/l2d_cache/:u                                   
         436954135      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310084758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2872308224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2855858688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2839409152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053594.052018,       0.0,      250046,     225102,      24944,     146584,      78518,   2.084131,   0.727100,  16.100000,  37.200000,   6.655254,   0.000000,  44.702001, 465.930183
Outstanding requests per worker:
3 8 8 4 6 9 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.5,      625018,     562492,      62526,     416666,     145826,   2.798708,   2.800000,  23.800000,  40.300000,   7.884349,   0.083000,  45.979999, 564.556538
Outstanding requests per worker:
6 10 12 6 7 8 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562997,      62055,     441654,     121343,   3.087700,   5.800000,  25.700000,  41.000000,   8.332868,   0.061000,  46.510998, 611.969431
Outstanding requests per worker:
10 6 12 5 7 11 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.1,      625006,     562507,      62499,     454286,     108221,   3.477429,   9.500000,  28.400000,  43.200000,   8.969433,   0.123000,  48.691001, 637.707577
Outstanding requests per worker:
8 13 27 8 10 11 19 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124990.9,      624955,     562882,      62073,     463910,      98972,   4.046742,  13.600000,  31.100000,  44.300000,   9.570639,   0.077000,  48.859999, 655.783111
Outstanding requests per worker:
40 20 42 11 34 22 44 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125029.5,      625148,     562357,      62791,     470331,      92026,   4.254774,  14.700000,  31.400000,  44.600000,   9.674681,   0.159000,  49.254000, 669.295352
Outstanding requests per worker:
15 9 27 5 9 12 35 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124935.3,      624677,     562022,      62655,     475452,      86570,   4.725933,  18.300000,  33.300000,  45.200000,  10.196281,   0.151000,  49.720999, 679.001836
Outstanding requests per worker:
8 14 54 189 11 8 24 188 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:13   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 118656 pts/0   Sl+  08:13   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312612673      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        4037436266      L1-dcache-loads:u                                           
        1441384893      armv8_pmuv3_0/l2d_cache/:u                                   
         456910120      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221292539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2729964032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2713514496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2697064960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053643.052067,       0.0,      250017,     225136,      24881,     146403,      78733,   2.178227,   0.749100,  17.500000,  38.400000,   6.915164,   0.000000,  44.387002, 464.146116
Outstanding requests per worker:
13 10 7 8 8 13 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124991.7,      624959,     562700,      62259,     416698,     146002,   3.131108,   5.800000,  26.400000,  42.200000,   8.566709,   0.068000,  47.901999, 563.496577
Outstanding requests per worker:
10 22 42 7 9 20 43 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124837.9,      624190,     561992,      62198,     441530,     120462,   3.621521,  11.300000,  29.000000,  42.500000,   9.086611,   0.112000,  48.168998, 613.198731
Outstanding requests per worker:
10 22 456 5 10 27 492 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124929.9,      624650,     562442,      62208,     454702,     107740,   3.990680,  13.100000,  30.700000,  43.200000,   9.370152,   0.058000,  47.773000, 638.471729
Outstanding requests per worker:
10 29 687 8 12 20 679 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125023.1,      625116,     563170,      61946,     465124,      98046,   4.481765,  16.500000,  32.500000,  43.500000,   9.849099,   0.152000,  48.289999, 656.761465
Outstanding requests per worker:
18 52 654 6 10 23 591 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125022.7,      625114,     562939,      62175,     470947,      91992,   4.752635,  17.700000,  33.700000,  44.600000,  10.125164,   0.061000,  49.500000, 669.623107
Outstanding requests per worker:
11 34 621 10 10 30 568 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125037.7,      625189,     562711,      62478,     476582,      86129,   5.138163,  20.700000,  35.100000,  45.300000,  10.561635,   0.171000,  49.917001, 680.921651
Outstanding requests per worker:
14 45 533 4 9 48 494 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:14   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 112640 pts/0   Sl+  08:14   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  08:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310050455      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4048745744      L1-dcache-loads:u                                           
        1439774885      armv8_pmuv3_0/l2d_cache/:u                                   
         449521623      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990417019 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2508124672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2491675136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053692.052116,       0.0,      252604,     227237,      25367,     148468,      78769,   2.948473,   3.300000,  25.500000,  42.400000,   8.408311,   0.000000,  47.212999, 466.815074
Outstanding requests per worker:
680 15 8 8 732 9 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571521,      63425,     423768,     147753,   4.012001,  15.000000,  32.000000,  45.600000,   9.996112,   0.059000,  50.443999, 563.849582
Outstanding requests per worker:
716 29 10 10 697 17 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127008.3,      635042,     571759,      63283,     448931,     122828,   4.839668,  20.900000,  36.000000,  46.300000,  10.876465,   0.157000,  51.286999, 612.806548
Outstanding requests per worker:
676 39 10 27 621 55 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127019.7,      635099,     571507,      63592,     462494,     109013,   5.355884,  23.400000,  36.800000,  46.300000,  11.154789,   0.170000,  50.749000, 638.707101
Outstanding requests per worker:
588 48 12 12 585 31 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127013.9,      635070,     571845,      63225,     472339,      99506,   5.674756,  24.600000,  36.400000,  46.000000,  11.230816,   0.171000,  51.073000, 657.995639
Outstanding requests per worker:
507 38 7 18 563 36 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127015.1,      635076,     571773,      63303,     478854,      92919,   6.030846,  26.000000,  36.600000,  45.700000,  11.323059,   0.173000,  49.253002, 670.617946
Outstanding requests per worker:
504 50 10 12 446 51 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.1,      634966,     572112,      62854,     485100,      87012,   6.482670,  27.700000,  39.000000,  47.500000,  11.953683,   0.216000,  51.337998, 681.287979
Outstanding requests per worker:
467 55 11 10 511 36 10 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:15   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117248 pts/0   Sl+  08:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314966912      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        4121765050      L1-dcache-loads:u                                           
        1463316968      armv8_pmuv3_0/l2d_cache/:u                                   
         447271751      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230784352 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2442457600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426008064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053740.052164,       0.0,      252602,     227027,      25575,     147878,      79149,   3.571221,   8.900000,  30.500000,  44.400000,   9.405907,   0.000000,  48.043001, 466.332410
Outstanding requests per worker:
26 9 10 705 9 9 9 683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127010.1,      635051,     571258,      63793,     423345,     147913,   3.861325,  12.600000,  30.900000,  43.400000,   9.458561,   0.085000,  48.283000, 564.366145
Outstanding requests per worker:
17 10 10 707 27 9 6 599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127021.3,      635107,     571554,      63553,     449096,     122458,   4.614297,  18.400000,  34.000000,  44.700000,  10.244068,   0.091000,  48.785999, 612.590534
Outstanding requests per worker:
39 12 13 612 26 14 10 554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127217.5,      636088,     572253,      63835,     463635,     108618,   2.881033,   3.200000,  18.900000,  39.600000,   7.115957,   0.057000,  48.610002, 639.766747
Outstanding requests per worker:
41 17 12 4 43 10 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.7,      634909,     571705,      63204,     472604,      99101,   1.127725,   2.900000,   3.200000,   3.600000,   0.966250,   0.158000,   5.220000, 659.006022
Outstanding requests per worker:
59 14 18 12 54 10 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     571495,      63460,     478766,      92729,   1.278014,   3.200000,   3.500000,   4.000000,   1.101468,   0.161000,   5.504000, 670.617232
Outstanding requests per worker:
54 21 8 5 55 29 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.7,      634979,     571417,      63562,     484522,      86895,   1.498868,   3.600000,   4.000000,   4.600000,   1.264511,   0.089000,   5.594000, 681.784427
Outstanding requests per worker:
69 13 12 7 49 31 11 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:15   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120384 pts/0   Sl+  08:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312147296      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        4126521896      L1-dcache-loads:u                                           
        1466424963      armv8_pmuv3_0/l2d_cache/:u                                   
         461712513      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960754548 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2148921856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2132472320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2116022784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2099573248
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053789.052213,       0.0,      254010,     228472,      25538,     148637,      79835,   0.755449,   0.765100,   1.700000,   9.100000,   1.441008,   0.000000,  13.468000, 465.468941
Outstanding requests per worker:
13 7 10 8 10 7 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571281,      63653,     424167,     147114,   0.753210,   1.800000,   2.000000,   2.400000,   0.537949,   0.052000,   3.313000, 565.628645
Outstanding requests per worker:
24 5 9 12 34 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.9,      634925,     571609,      63316,     449362,     122247,   1.007626,   2.600000,   2.900000,   3.400000,   0.865456,   0.092000,   5.451000, 613.803187
Outstanding requests per worker:
22 15 12 9 65 9 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571544,      63414,     463601,     107943,   1.164218,   3.100000,   3.300000,   3.900000,   1.054625,   0.059000,   6.282000, 640.443684
Outstanding requests per worker:
53 13 10 9 47 13 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.5,      634963,     571706,      63257,     472295,      99411,   1.359508,   3.700000,   4.000000,   5.000000,   1.313993,   0.223000,   6.853000, 657.578742
Outstanding requests per worker:
60 11 10 12 62 9 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571393,      63585,     478949,      92444,   1.463293,   4.000000,   4.400000,   4.900000,   1.418434,   0.173000,   6.293000, 671.294382
Outstanding requests per worker:
61 12 14 8 66 14 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571432,      63504,     484417,      87015,   1.754398,   5.100000,   5.500000,   6.000000,   1.822264,   0.118000,   6.960000, 681.302701
Outstanding requests per worker:
78 7 14 9 81 10 10 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:16   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117376 pts/0   Sl+  08:16   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316000014      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4111173550      L1-dcache-loads:u                                           
        1453980590      armv8_pmuv3_0/l2d_cache/:u                                   
         440355522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.741198906 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2143810048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127360512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110910976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094461440
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053837.052261,       0.0,      258065,     232473,      25592,     151332,      81141,   0.665487,   0.926100,   1.200000,   1.900000,   0.289988,   0.000000,   2.444000, 465.541551
Outstanding requests per worker:
8 15 8 30 11 7 7 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.1,      645111,     580670,      64441,     430906,     149764,   1.377136,   2.700000,   2.900000,   3.300000,   0.823602,   0.220000,   4.823000, 565.555753
Outstanding requests per worker:
11 31 21 41 16 41 24 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     581155,      63975,     457067,     124088,   1.877040,   3.300000,   3.500000,   4.200000,   1.014089,   0.179000,   6.352000, 614.128351
Outstanding requests per worker:
26 30 29 64 17 42 22 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.1,      645126,     580736,      64390,     470707,     110029,   2.581001,   4.400000,   4.900000,   5.600000,   1.198342,   0.219000,   7.613000, 640.867091
Outstanding requests per worker:
21 52 47 70 28 57 26 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.9,      645070,     580833,      64237,     480238,     100595,   2.900986,   4.800000,   5.200000,   5.800000,   1.219871,   0.655000,   7.773000, 658.000413
Outstanding requests per worker:
38 78 39 84 43 86 26 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.9,      645205,     580777,      64428,     487214,      93563,   3.882037,   7.200000,   8.900000,  10.300000,   2.182370,   0.774000,  11.867000, 672.358434
Outstanding requests per worker:
50 77 29 127 39 62 32 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128998.5,      644993,     580949,      64044,     492429,      88520,   4.369060,   7.700000,   8.900000,  15.400000,   2.579993,   0.864000,  18.325999, 681.744275
Outstanding requests per worker:
50 53 51 175 41 52 56 244 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:17   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120256 pts/0   Sl+  08:17   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317914067      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4250708980      L1-dcache-loads:u                                           
        1500847132      armv8_pmuv3_0/l2d_cache/:u                                   
         459525357      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880646133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2864378368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2847928832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831479296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053886.052310,       0.0,      258067,     232070,      25997,     151113,      80957,   0.616492,   0.895100,   1.300000,   1.800000,   0.279772,   0.000000,   2.697000, 465.649097
Outstanding requests per worker:
18 9 11 5 12 11 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.9,      645210,     580291,      64919,     430900,     149391,   0.943628,   2.100000,   2.600000,   3.000000,   0.674947,   0.052000,   3.743000, 565.465983
Outstanding requests per worker:
26 8 8 7 35 8 13 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.7,      645129,     580445,      64684,     457054,     123391,   1.263194,   2.900000,   3.200000,   3.600000,   0.924161,   0.208000,   5.052000, 615.048273
Outstanding requests per worker:
48 8 11 24 51 8 11 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.3,      645182,     580944,      64238,     471603,     109341,   1.606333,   3.300000,   3.700000,   4.300000,   1.082761,   0.213000,   5.319000, 641.940082
Outstanding requests per worker:
59 11 19 29 52 11 12 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580887,      64272,     480195,     100692,   2.029413,   4.600000,   4.900000,   5.500000,   1.478973,   0.142000,   7.095000, 658.513186
Outstanding requests per worker:
69 11 11 40 80 31 17 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.5,      645183,     581050,      64133,     486431,      94619,   2.427452,   5.000000,   5.400000,   5.800000,   1.500636,   0.170000,   6.809000, 670.302148
Outstanding requests per worker:
113 17 31 33 50 28 30 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.1,      645171,     580915,      64256,     493138,      87777,   2.910630,   6.000000,   6.400000,   7.200000,   1.734993,   0.232000,   8.843000, 681.884133
Outstanding requests per worker:
122 27 28 44 85 20 18 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   08:18   0:00 /usr/lib/linux
memcache      8  284  0.0 427712 115456 pts/0   Sl+  08:18   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318960265      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        4222869296      L1-dcache-loads:u                                           
        1492892719      armv8_pmuv3_0/l2d_cache/:u                                   
         465330162      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060727107 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2546004480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2529554944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513105408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2496655872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053934.052358,       0.0,      258088,     232462,      25626,     151105,      81357,   0.659979,   1.100000,   1.600000,   2.100000,   0.370163,   0.000000,   4.198000, 463.925670
Outstanding requests per worker:
22 7 8 9 25 10 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.9,      645140,     580345,      64795,     430830,     149515,   1.056229,   2.400000,   2.800000,   3.400000,   0.781867,   0.045000,   6.692000, 565.531679
Outstanding requests per worker:
48 14 16 10 41 14 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580652,      64527,     456997,     123655,   1.374904,   3.100000,   3.300000,   3.700000,   0.964247,   0.225000,   5.049000, 615.092606
Outstanding requests per worker:
48 24 31 21 56 8 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580588,      64561,     471540,     109048,   1.939469,   4.000000,   4.400000,   4.900000,   1.213738,   0.081000,   6.045000, 641.857136
Outstanding requests per worker:
73 24 24 34 63 31 26 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.1,      645211,     581112,      64099,     480221,     100891,   2.298117,   4.500000,   5.000000,   5.600000,   1.326862,   0.209000,   7.172000, 657.686319
Outstanding requests per worker:
73 27 27 28 73 36 31 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.9,      645115,     580543,      64572,     487125,      93418,   3.065034,   6.700000,   7.400000,   8.500000,   2.109699,   0.180000,  10.639000, 671.229635
Outstanding requests per worker:
72 42 39 17 134 23 47 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128945.5,      644728,     579973,      64755,     491781,      88192,   4.482981,  12.100000,  18.700000,  22.300000,   5.204725,   0.176000,  24.768000, 682.219900
Outstanding requests per worker:
386 30 40 33 291 42 34 36 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:19   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 113408 pts/0   Sl+  08:19   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322600228      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4234183323      L1-dcache-loads:u                                           
        1498987176      armv8_pmuv3_0/l2d_cache/:u                                   
         458525324      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020931725 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2294542848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2278093312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2261643776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245194240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228744704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053983.052407,       0.0,      258040,     232480,      25560,     151195,      81285,   0.747069,   1.600000,   1.900000,   2.500000,   0.499046,   0.000000,   5.391000, 464.395105
Outstanding requests per worker:
7 13 5 35 11 11 10 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.9,      645160,     580382,      64778,     430685,     149697,   1.061805,   2.500000,   2.800000,   3.200000,   0.779290,   0.075000,   5.047000, 565.272664
Outstanding requests per worker:
7 26 10 49 10 17 12 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.9,      645070,     580400,      64670,     456590,     123810,   1.525919,   3.100000,   3.400000,   3.900000,   0.960764,   0.209000,   5.110000, 614.936897
Outstanding requests per worker:
33 37 29 66 24 38 40 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129050.5,      645253,     580662,      64591,     470662,     110000,   2.029647,   4.000000,   4.400000,   5.000000,   1.219067,   0.065000,   6.304000, 640.562377
Outstanding requests per worker:
26 37 19 74 22 46 9 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.7,      645099,     580582,      64517,     479441,     101141,   2.510812,   5.200000,   5.800000,   6.500000,   1.597756,   0.225000,   9.011000, 657.779490
Outstanding requests per worker:
49 49 21 86 44 38 27 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.1,      645176,     580754,      64422,     486563,      94191,   3.033819,   6.200000,   6.900000,   7.900000,   1.906700,   0.176000,  10.468000, 671.272007
Outstanding requests per worker:
34 51 30 115 43 39 23 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128933.9,      644670,     580337,      64333,     491954,      88383,   5.044408,  14.500000,  18.700000,  21.200000,   5.265336,   0.740000,  23.598000, 681.482657
Outstanding requests per worker:
48 60 23 357 43 54 45 361 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   08:19   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 120000 pts/0   Sl+  08:19   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318190945      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4234505885      L1-dcache-loads:u                                           
        1500686776      armv8_pmuv3_0/l2d_cache/:u                                   
         453536417      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.241292762 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2948723200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2932273664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915824128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2899374592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054031.052455,       0.0,      258044,     232272,      25772,     151078,      81194,   0.809813,   1.700000,   1.900000,   2.100000,   0.445266,   0.000000,   2.446000, 464.197910
Outstanding requests per worker:
11 8 31 15 8 12 30 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.1,      645151,     580763,      64388,     431680,     149083,   1.176690,   2.400000,   2.800000,   3.300000,   0.747530,   0.205000,   4.700000, 566.408153
Outstanding requests per worker:
26 8 36 24 30 12 34 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.7,      645094,     581048,      64046,     457942,     123106,   1.880041,   3.500000,   3.900000,   4.600000,   1.057121,   0.215000,   7.920000, 616.060186
Outstanding requests per worker:
37 34 61 15 37 42 60 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.7,      645199,     580550,      64649,     470696,     109854,   2.453522,   4.400000,   4.800000,   5.500000,   1.177027,   0.213000,   8.092000, 641.340508
Outstanding requests per worker:
33 36 77 35 37 26 70 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.9,      645125,     580865,      64260,     480638,     100227,   2.973409,   5.400000,   6.000000,   7.200000,   1.462688,   0.318000,   9.165000, 659.017498
Outstanding requests per worker:
39 36 89 27 47 39 99 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128985.3,      644927,     580276,      64651,     486790,      93486,   4.372062,  10.100000,  12.900000,  14.800000,   3.398400,   0.766000,  20.655001, 672.066086
Outstanding requests per worker:
50 49 180 45 51 44 234 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128960.9,      644805,     580302,      64503,     491996,      88306,   6.163936,  18.200000,  20.600000,  26.100000,   6.501926,   0.795000,  29.347001, 681.791631
Outstanding requests per worker:
51 47 406 42 43 43 418 48 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:20   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117632 pts/0   Sl+  08:20   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315580877      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        4245833895      L1-dcache-loads:u                                           
        1497750934      armv8_pmuv3_0/l2d_cache/:u                                   
         467665856      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970266996 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2632708608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2616259072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2599809536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2583360000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566910464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054080.052504,       0.0,      262164,     236013,      26151,     154156,      81857,   1.419284,   3.300000,   3.700000,   6.000000,   1.230290,   0.000000,   8.805000, 467.496091
Outstanding requests per worker:
8 26 18 55 12 17 25 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131107.1,      655536,     589986,      65550,     438436,     151550,   2.959650,   6.400000,   8.400000,  11.500000,   2.310550,   0.177000,  13.259000, 566.850493
Outstanding requests per worker:
30 33 23 82 34 40 27 217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130944.5,      654723,     589325,      65398,     464943,     124382,   6.900177,  18.900000,  30.500000,  38.000000,   9.105208,   0.819000,  41.575000, 616.500289
Outstanding requests per worker:
49 42 38 670 42 35 36 660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130715.3,      653577,     588495,      65082,     478166,     110329,  20.287014,  80.400000,  92.100000, 104.300000,  31.680474,   1.120000, 110.501997, 642.767082
Outstanding requests per worker:
57 50 54 1797 48 43 55 1660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130810.9,      654055,     588860,      65195,     487246,     101614,  35.208637, 136.500000, 147.400000, 156.000000,  55.885081,   0.947000, 159.835994, 659.495440
Outstanding requests per worker:
60 57 57 2601 59 47 75 2537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130922.5,      654613,     589622,      64991,     494815,      94807,  46.291940, 175.200000, 185.400000, 194.200000,  73.694423,   1.797000, 197.871000, 672.284860
Outstanding requests per worker:
64 53 74 3056 75 62 72 3220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130927.9,      654640,     589004,      65636,     499674,      89330,  54.319050, 208.500000, 216.400000, 221.100000,  87.150667,   1.873000, 225.364998, 681.488857
Outstanding requests per worker:
80 79 89 3643 100 78 68 3679 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:21   0:00 /usr/lib/linux
memcache      7  277  0.0 430784 120256 pts/0   Sl+  08:21   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320424585      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        4320571045      L1-dcache-loads:u                                           
        1518925754      armv8_pmuv3_0/l2d_cache/:u                                   
         459303067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280777956 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2142761472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126311936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109862400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093412864
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054129.052553,       0.0,      262140,     235909,      26231,     154010,      81899,   2.413770,   3.900000,   4.200000,   4.700000,   0.937984,   0.000000,   5.397000, 466.935009
Outstanding requests per worker:
29 51 30 31 27 48 24 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131110.3,      655552,     589965,      65587,     438470,     151495,   2.731330,   4.200000,   4.500000,   5.500000,   0.950634,   0.701000,   7.471000, 567.068029
Outstanding requests per worker:
49 94 42 68 47 93 52 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131132.1,      655661,     590186,      65475,     465280,     124906,   3.740334,   5.500000,   6.400000,   9.600000,   1.419465,   0.911000,  11.369000, 615.771960
Outstanding requests per worker:
68 167 66 48 71 132 69 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130984.7,      654924,     589708,      65216,     478632,     111076,   7.738828,  19.000000,  24.200000,  30.300000,   6.781099,   1.019000,  32.923002, 642.311001
Outstanding requests per worker:
94 527 80 56 102 514 90 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130794.5,      653973,     588610,      65363,     487550,     101060,  17.263667,  55.800000,  63.500000,  90.900000,  22.366429,   1.733000,  97.474001, 660.041421
Outstanding requests per worker:
207 992 91 78 206 1593 83 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130613.9,      653070,     587590,      65480,     493874,      93716,  35.583035, 108.900000, 129.300000, 146.400000,  43.295399,   1.945000, 150.763005, 673.547708
Outstanding requests per worker:
732 1894 100 84 621 2414 138 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130586.3,      652932,     588049,      64883,     499324,      88725,  57.247639, 158.400000, 176.300000, 180.700000,  61.211149,   2.737000, 185.417995, 682.533695
Outstanding requests per worker:
1256 2676 231 93 1335 3008 254 90 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:22   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 116864 pts/0   Sl+  08:22   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319210050      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        4317810505      L1-dcache-loads:u                                           
        1511680275      armv8_pmuv3_0/l2d_cache/:u                                   
         456738848      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.122432946 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2318791168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2302341632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054177.052601,       0.0,      242492,     218284,      24208,     141213,      77071,   0.363094,   0.387100,   0.449100,   3.100000,   0.553088,   0.000000,  10.149000, 460.727561
Outstanding requests per worker:
3 4 4 5 5 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545547,      60541,     403259,     142288,   0.315397,   0.423100,   0.455100,   0.560100,   0.089471,   0.085000,   2.211000, 562.193109
Outstanding requests per worker:
4 5 4 4 5 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545624,      60470,     427632,     117992,   0.333589,   0.445100,   0.492100,   0.580100,   0.090203,   0.115000,   1.976000, 611.062145
Outstanding requests per worker:
5 5 5 8 6 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545803,      60305,     440671,     105132,   0.349543,   0.485100,   0.512100,   0.624100,   0.105815,   0.093000,   2.338000, 637.385253
Outstanding requests per worker:
8 3 6 6 4 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.3,      606127,     545440,      60687,     449031,      96409,   0.360673,   0.490100,   0.552100,   0.653100,   0.107239,   0.092000,   2.474000, 654.905700
Outstanding requests per worker:
6 4 3 6 5 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545502,      60581,     455949,      89553,   0.370884,   0.499100,   0.558100,   0.687100,   0.112635,   0.079000,   2.683000, 668.476568
Outstanding requests per worker:
6 5 5 3 7 4 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545952,      60146,     461111,      84841,   0.380537,   0.512100,   0.571100,   0.710100,   0.128204,   0.125000,   2.954000, 677.894108
Outstanding requests per worker:
7 5 6 9 4 5 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:23   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 114240 pts/0   Sl+  08:23   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316594482      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3891781897      L1-dcache-loads:u                                           
        1443702376      armv8_pmuv3_0/l2d_cache/:u                                   
         446875522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019319154 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2623926784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2607477248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2591027712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574578176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054226.052650,       0.0,      242500,     217957,      24543,     141211,      76746,   0.304243,   0.423100,   0.485100,   0.574100,   0.090253,   0.000000,   2.036000, 462.294705
Outstanding requests per worker:
4 4 4 7 5 3 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545900,      60207,     403569,     142331,   0.334591,   0.466100,   0.515100,   0.631000,   0.103185,   0.056000,   2.049000, 561.788197
Outstanding requests per worker:
5 4 6 5 5 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121209.7,      606049,     545905,      60144,     427677,     118228,   0.357860,   0.497100,   0.561100,   0.689100,   0.112437,   0.060000,   2.296000, 610.194243
Outstanding requests per worker:
8 8 14 20 8 8 10 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121231.1,      606156,     545775,      60381,     440582,     105193,   0.382091,   0.548100,   0.615100,   0.750100,   0.121560,   0.124000,   2.404000, 636.495428
Outstanding requests per worker:
6 7 9 6 6 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.1,      606121,     545977,      60144,     449600,      96377,   0.395184,   0.559100,   0.629100,   0.786100,   0.145427,   0.083000,   2.613000, 654.079586
Outstanding requests per worker:
5 6 11 8 5 5 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545304,      60821,     455340,      89964,   0.416297,   0.589100,   0.686100,   0.896100,   0.188423,   0.114000,   3.267000, 667.824813
Outstanding requests per worker:
5 8 8 8 6 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545368,      60728,     460832,      84536,   0.418278,   0.620100,   0.696100,   0.846100,   0.139997,   0.093000,   2.191000, 678.521706
Outstanding requests per worker:
4 10 10 5 5 7 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:23   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114496 pts/0   Sl+  08:23   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310123051      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
        3888874105      L1-dcache-loads:u                                           
        1435532252      armv8_pmuv3_0/l2d_cache/:u                                   
         440825000      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870622887 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2720788992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704339456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054274.052698,       0.0,      242488,     218475,      24013,     141365,      77110,   0.323492,   0.436100,   0.491100,   0.587100,   0.093770,   0.000000,   1.911000, 460.410692
Outstanding requests per worker:
7 3 4 5 9 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545515,      60594,     402471,     143044,   0.350620,   0.488100,   0.552100,   0.659100,   0.104668,   0.056000,   2.163000, 559.932445
Outstanding requests per worker:
8 5 5 6 8 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545752,      60338,     427341,     118411,   0.375352,   0.517100,   0.585000,   0.736100,   0.116356,   0.126000,   1.937000, 610.645495
Outstanding requests per worker:
9 5 6 5 6 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545414,      60686,     439842,     105572,   0.398529,   0.561100,   0.635100,   0.789100,   0.128334,   0.080000,   2.350000, 636.438218
Outstanding requests per worker:
8 5 7 8 10 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545704,      60420,     449296,      96408,   0.410605,   0.578100,   0.667100,   0.820100,   0.135534,   0.153000,   2.484000, 654.767073
Outstanding requests per worker:
8 6 4 4 4 3 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545495,      60630,     455770,      89725,   0.462303,   0.646000,   0.762100,   1.900000,   0.332263,   0.045000,   6.309000, 667.806117
Outstanding requests per worker:
9 7 5 6 8 3 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.1,      606091,     545501,      60590,     460765,      84736,   0.446630,   0.653100,   0.757100,   0.949100,   0.166514,   0.128000,   2.967000, 678.261160
Outstanding requests per worker:
8 3 5 5 11 7 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:24   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 117312 pts/0   Sl+  08:24   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315222441      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3888458274      L1-dcache-loads:u                                           
        1436739762      armv8_pmuv3_0/l2d_cache/:u                                   
         456588395      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990889652 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2188046848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2171597312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054322.052746,       0.0,      246219,     221386,      24833,     143198,      78188,   0.369009,   0.501000,   0.563100,   0.702100,   0.111855,   0.000000,   2.141000, 460.647331
Outstanding requests per worker:
3 5 5 7 6 10 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.3,      615397,     553553,      61844,     409742,     143811,   0.431858,   0.612100,   0.681100,   0.827100,   0.134385,   0.061000,   2.361000, 563.375662
Outstanding requests per worker:
6 11 6 6 9 8 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     553958,      61486,     435022,     118936,   0.480257,   0.675100,   0.748100,   0.944100,   0.156797,   0.050000,   2.363000, 612.984818
Outstanding requests per worker:
6 10 6 9 7 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     553939,      61507,     447608,     106331,   0.510797,   0.711100,   0.812100,   1.100000,   0.180042,   0.094000,   2.518000, 637.550248
Outstanding requests per worker:
8 13 7 7 9 11 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.9,      615405,     554105,      61300,     456613,      97492,   0.545026,   0.768100,   0.883100,   1.200000,   0.210289,   0.174000,   3.466000, 655.152186
Outstanding requests per worker:
8 14 8 10 7 14 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553564,      61854,     462878,      90686,   0.633166,   1.100000,   1.600000,   2.100000,   0.360672,   0.177000,   3.473000, 669.095487
Outstanding requests per worker:
9 19 8 11 10 10 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554025,      61415,     468613,      85412,   0.685460,   1.400000,   1.800000,   2.200000,   0.420643,   0.060000,   3.422000, 679.567628
Outstanding requests per worker:
11 12 12 8 7 16 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:25   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113152 pts/0   Sl+  08:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         308713055      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        3963697437      L1-dcache-loads:u                                           
        1420520661      armv8_pmuv3_0/l2d_cache/:u                                   
         445271314      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.921485757 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2926703104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910253568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810180096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2793730560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777281024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2760831488
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054371.052795,       0.0,      246215,     221401,      24814,     143659,      77742,   0.310833,   0.417100,   0.446100,   0.546100,   0.081868,   0.000000,   2.033000, 462.786550
Outstanding requests per worker:
5 5 6 4 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553744,      61681,     410358,     143386,   0.335818,   0.444100,   0.489100,   0.609100,   0.100519,   0.049000,   2.109000, 563.821529
Outstanding requests per worker:
5 5 7 5 5 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554049,      61388,     435071,     118978,   0.357279,   0.482100,   0.540100,   0.643100,   0.116811,   0.056000,   2.231000, 612.207424
Outstanding requests per worker:
7 6 9 6 6 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     554188,      61250,     448338,     105850,   0.371756,   0.496100,   0.551100,   0.676100,   0.116606,   0.054000,   2.521000, 638.532859
Outstanding requests per worker:
5 6 6 6 6 3 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     554452,      60963,     457111,      97341,   0.387907,   0.543100,   0.603100,   0.741100,   0.127622,   0.151000,   3.164000, 655.417760
Outstanding requests per worker:
5 4 5 7 6 7 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     554071,      61336,     463830,      90241,   0.398982,   0.548100,   0.611100,   0.739100,   0.112325,   0.060000,   2.078000, 669.415914
Outstanding requests per worker:
5 6 14 5 6 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     554097,      61333,     468441,      85656,   0.417287,   0.568100,   0.637100,   0.808100,   0.153587,   0.149000,   3.403000, 678.862625
Outstanding requests per worker:
7 6 8 6 7 7 11 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:26   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116416 pts/0   Sl+  08:26   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316498803      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        3954455435      L1-dcache-loads:u                                           
        1447628152      armv8_pmuv3_0/l2d_cache/:u                                   
         433046654      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069947315 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2392322560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375873024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359423488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054419.052843,       0.0,      246208,     221427,      24781,     143414,      78013,   0.332308,   0.441100,   0.485100,   0.578100,   0.087295,   0.000000,   2.009000, 461.354361
Outstanding requests per worker:
4 3 9 4 5 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553869,      61544,     409906,     143963,   0.377549,   0.506100,   0.563100,   0.689100,   0.113716,   0.057000,   2.250000, 563.140347
Outstanding requests per worker:
3 7 8 6 5 6 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     554090,      61336,     434258,     119832,   0.405685,   0.556100,   0.619100,   0.758100,   0.129031,   0.058000,   2.131000, 611.473149
Outstanding requests per worker:
6 8 11 7 5 7 12 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     553979,      61464,     448250,     105729,   0.443729,   0.613100,   0.685100,   0.945100,   0.163458,   0.058000,   2.577000, 638.564886
Outstanding requests per worker:
4 7 8 9 7 8 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123094.3,      615472,     554213,      61259,     457023,      97190,   0.447015,   0.617100,   0.682100,   0.810100,   0.126721,   0.158000,   1.198000, 655.531180
Outstanding requests per worker:
7 3 7 7 6 5 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.9,      615405,     554243,      61162,     463125,      91118,   0.477013,   0.678100,   0.759100,   0.945100,   0.161921,   0.153000,   2.947000, 668.674049
Outstanding requests per worker:
8 9 14 7 6 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553788,      61649,     468599,      85189,   0.498863,   0.705100,   0.811100,   1.100000,   0.199954,   0.047000,   3.737000, 679.493550
Outstanding requests per worker:
7 5 9 4 9 9 12 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:27   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115776 pts/0   Sl+  08:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316538004      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        3952814513      L1-dcache-loads:u                                           
        1439407504      armv8_pmuv3_0/l2d_cache/:u                                   
         455915752      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070415587 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3004428800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987979264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971529728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054468.052892,       0.0,      246213,     221766,      24447,     144086,      77680,   0.329175,   0.456100,   0.507100,   0.618100,   0.098709,   0.000000,   2.116000, 463.386660
Outstanding requests per worker:
7 5 6 5 6 8 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     553898,      61534,     409290,     144608,   0.362791,   0.503100,   0.570000,   0.703100,   0.113924,   0.053000,   2.274000, 561.939505
Outstanding requests per worker:
5 10 5 5 7 7 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     554288,      61155,     434753,     119535,   0.392561,   0.553100,   0.622100,   0.768100,   0.128795,   0.061000,   2.236000, 610.927383
Outstanding requests per worker:
6 8 6 7 6 10 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.7,      615454,     553981,      61473,     447875,     106106,   0.415904,   0.606100,   0.679100,   0.873100,   0.149205,   0.059000,   2.332000, 638.060670
Outstanding requests per worker:
9 10 5 3 8 12 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     554242,      61194,     456445,      97797,   0.427593,   0.616100,   0.694100,   0.828100,   0.135613,   0.156000,   1.194000, 654.904150
Outstanding requests per worker:
5 12 5 6 5 10 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     553763,      61671,     462495,      91268,   0.449288,   0.667100,   0.751100,   0.936100,   0.160848,   0.092000,   2.757000, 668.071038
Outstanding requests per worker:
5 10 7 5 8 8 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554281,      61164,     468399,      85882,   0.468221,   0.692000,   0.807000,   1.100000,   0.186357,   0.155000,   3.242000, 678.226569
Outstanding requests per worker:
6 14 7 7 8 7 3 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:27   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115968 pts/0   Sl+  08:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318386436      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3948793219      L1-dcache-loads:u                                           
        1447789839      armv8_pmuv3_0/l2d_cache/:u                                   
         442531828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240441969 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2491478528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2475028992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458579456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442129920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425680384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054516.052940,       0.0,      250035,     225120,      24915,     146443,      78677,   0.393348,   0.540100,   0.602100,   0.729100,   0.112216,   0.000000,   2.027000, 464.500808
Outstanding requests per worker:
4 8 5 9 6 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562482,      62534,     416695,     145787,   0.470779,   0.657100,   0.728100,   0.879100,   0.140200,   0.082000,   2.216000, 563.070367
Outstanding requests per worker:
8 10 14 8 7 6 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562854,      62173,     441773,     121081,   0.526430,   0.733100,   0.816100,   1.100000,   0.164414,   0.075000,   2.102000, 611.792522
Outstanding requests per worker:
7 6 11 10 8 11 15 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562975,      62065,     455451,     107524,   0.607472,   0.863100,   1.100000,   1.800000,   0.261348,   0.057000,   2.862000, 639.072298
Outstanding requests per worker:
8 9 11 6 11 9 16 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124981.3,      624907,     562867,      62040,     464647,      98220,   0.739315,   1.300000,   1.800000,   3.300000,   0.579864,   0.215000,   8.366000, 657.122405
Outstanding requests per worker:
33 16 43 15 40 16 34 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125027.3,      625137,     562808,      62329,     471541,      91267,   0.815442,   1.700000,   1.900000,   2.400000,   0.493035,   0.087000,   3.373000, 669.858637
Outstanding requests per worker:
9 9 23 10 10 13 32 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562913,      62124,     476428,      86485,   0.924364,   1.900000,   2.200000,   2.700000,   0.583138,   0.189000,   3.620000, 680.490605
Outstanding requests per worker:
7 8 18 8 11 13 31 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:28   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 117312 pts/0   Sl+  08:28   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310415329      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4030477910      L1-dcache-loads:u                                           
        1432099769      armv8_pmuv3_0/l2d_cache/:u                                   
         441448686      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000871533 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2119561728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103112192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054565.052989,       0.0,      250066,     225198,      24868,     145952,      79246,   0.373913,   0.496100,   0.546100,   0.667100,   0.103102,   0.000000,   2.236000, 461.491616
Outstanding requests per worker:
7 5 7 6 5 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562537,      62505,     416777,     145760,   0.439526,   0.603100,   0.666100,   0.798100,   0.125283,   0.047000,   2.465000, 564.033809
Outstanding requests per worker:
9 7 9 7 7 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562649,      62373,     441975,     120674,   0.478354,   0.664100,   0.730100,   0.920100,   0.156364,   0.050000,   2.521000, 613.643922
Outstanding requests per worker:
8 6 8 4 5 10 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562595,      62451,     454837,     107758,   0.522879,   0.725100,   0.798100,   1.100000,   0.205220,   0.092000,   4.283000, 638.008887
Outstanding requests per worker:
9 7 12 6 7 9 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.9,      625045,     562470,      62575,     463883,      98587,   0.554270,   0.753000,   0.857100,   1.200000,   0.186825,   0.159000,   3.176000, 655.891680
Outstanding requests per worker:
7 11 11 8 9 11 15 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562635,      62397,     470261,      92374,   0.584850,   0.803100,   0.929100,   1.700000,   0.244454,   0.185000,   3.510000, 668.275847
Outstanding requests per worker:
10 8 15 6 9 12 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.9,      625070,     562305,      62765,     475479,      86826,   0.647783,   0.904100,   1.200000,   2.200000,   0.335001,   0.059000,   4.138000, 679.489636
Outstanding requests per worker:
11 8 16 7 6 10 18 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:29   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 119360 pts/0   Sl+  08:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315191959      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        4016742891      L1-dcache-loads:u                                           
        1435201234      armv8_pmuv3_0/l2d_cache/:u                                   
         449792754      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260078257 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2874536448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2858086912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2841637376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054613.053037,       0.0,      249915,     224983,      24932,     145878,      79105,   0.366953,   0.493100,   0.546100,   0.666100,   0.101816,   0.000000,   2.194000, 462.813635
Outstanding requests per worker:
10 5 7 8 7 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562395,      62649,     416389,     146006,   0.428256,   0.600100,   0.665100,   0.804100,   0.128889,   0.047000,   2.279000, 563.417536
Outstanding requests per worker:
6 6 15 10 8 6 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562477,      62570,     441396,     121081,   0.468333,   0.665100,   0.737100,   0.889100,   0.143826,   0.053000,   2.619000, 612.087431
Outstanding requests per worker:
4 6 9 6 8 5 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     562329,      62696,     454702,     107627,   0.530547,   0.747100,   0.918100,   1.600000,   0.230392,   0.090000,   3.101000, 638.486649
Outstanding requests per worker:
5 8 11 8 8 5 34 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124997.7,      624989,     562659,      62330,     463752,      98907,   0.532468,   0.758100,   0.875100,   1.200000,   0.191602,   0.164000,   2.678000, 655.635712
Outstanding requests per worker:
9 18 15 32 17 20 20 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125035.7,      625179,     562651,      62528,     471165,      91486,   0.632879,   1.100000,   1.600000,   2.000000,   0.347575,   0.182000,   2.666000, 669.992070
Outstanding requests per worker:
5 9 13 7 7 6 16 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562375,      62658,     475943,      86432,   0.646632,   1.100000,   1.600000,   2.000000,   0.347089,   0.048000,   3.483000, 679.371464
Outstanding requests per worker:
11 8 12 11 6 7 14 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:30   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 116224 pts/0   Sl+  08:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317376477      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        4018861392      L1-dcache-loads:u                                           
        1447236542      armv8_pmuv3_0/l2d_cache/:u                                   
         443557052      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850593232 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2772365824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054661.053085,       0.0,      250062,     224995,      25067,     146081,      78914,   0.385696,   0.540100,   0.602100,   0.730100,   0.114638,   0.000000,   2.026000, 464.057219
Outstanding requests per worker:
7 7 4 5 6 10 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562272,      62751,     416443,     145829,   0.443407,   0.617100,   0.688100,   0.857100,   0.140559,   0.056000,   2.557000, 563.759858
Outstanding requests per worker:
8 6 4 7 8 10 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562749,      62291,     441241,     121508,   0.477860,   0.676100,   0.761000,   0.987000,   0.166049,   0.069000,   2.206000, 611.292374
Outstanding requests per worker:
9 9 7 6 8 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562584,      62443,     455040,     107544,   0.516145,   0.739100,   0.857100,   1.200000,   0.189799,   0.053000,   2.356000, 638.723865
Outstanding requests per worker:
6 23 8 5 10 27 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125017.7,      625089,     562792,      62297,     464170,      98622,   0.584637,   0.922100,   1.300000,   1.800000,   0.302393,   0.152000,   2.521000, 656.501553
Outstanding requests per worker:
7 20 6 5 9 19 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562060,      62977,     469903,      92157,   0.631358,   1.100000,   1.600000,   2.100000,   0.362786,   0.119000,   3.111000, 668.465199
Outstanding requests per worker:
9 20 9 7 8 14 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562478,      62536,     475940,      86538,   0.740350,   1.700000,   2.000000,   2.400000,   0.511861,   0.056000,   3.543000, 680.176946
Outstanding requests per worker:
11 28 8 7 8 34 10 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:31   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111360 pts/0   Sl+  08:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311487984      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4028079190      L1-dcache-loads:u                                           
        1445651959      armv8_pmuv3_0/l2d_cache/:u                                   
         436211314      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941949426 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2430136832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2413687296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2397237760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2380788224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364338688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054710.053134,       0.0,      254014,     228587,      25427,     149168,      79419,   0.459358,   0.652100,   0.719100,   0.857100,   0.137573,   0.000000,   2.284000, 466.564568
Outstanding requests per worker:
13 5 9 7 11 7 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.5,      634973,     571468,      63505,     423498,     147970,   0.541054,   0.745100,   0.854100,   1.500000,   0.204194,   0.056000,   2.474000, 564.488050
Outstanding requests per worker:
13 4 11 6 15 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571485,      63473,     449308,     122177,   0.648966,   0.989100,   1.500000,   2.000000,   0.323837,   0.176000,   2.609000, 613.497591
Outstanding requests per worker:
12 6 6 6 10 12 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.3,      634932,     571160,      63772,     461787,     109373,   0.801309,   1.700000,   1.900000,   2.200000,   0.463865,   0.089000,   3.303000, 638.407280
Outstanding requests per worker:
34 9 9 7 25 12 15 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.7,      634894,     571791,      63103,     472062,      99729,   0.987389,   2.100000,   2.400000,   3.100000,   0.678233,   0.178000,   5.004000, 657.521879
Outstanding requests per worker:
45 29 7 5 35 26 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.3,      634987,     571767,      63220,     478854,      92913,   1.034823,   2.400000,   2.700000,   3.200000,   0.736049,   0.091000,   3.801000, 670.482154
Outstanding requests per worker:
46 12 9 10 26 18 14 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571607,      63335,     483672,      87935,   1.163453,   2.500000,   2.900000,   3.700000,   0.829552,   0.211000,   6.324000, 680.583913
Outstanding requests per worker:
38 17 13 9 47 25 10 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:31   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115904 pts/0   Sl+  08:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314164937      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4099394525      L1-dcache-loads:u                                           
        1455728128      armv8_pmuv3_0/l2d_cache/:u                                   
         460190311      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900805778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3039031808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054758.053182,       0.0,      254019,     228650,      25369,     148448,      80202,   0.430675,   0.603100,   0.673100,   0.813100,   0.132805,   0.000000,   2.081000, 463.431131
Outstanding requests per worker:
7 9 3 7 6 10 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.1,      634926,     571172,      63754,     424427,     146745,   0.511731,   0.735100,   0.845100,   1.200000,   0.186411,   0.097000,   2.431000, 566.437868
Outstanding requests per worker:
8 25 8 7 9 16 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.3,      634982,     571582,      63400,     449832,     121750,   0.574634,   0.853100,   1.100000,   1.700000,   0.252999,   0.095000,   2.422000, 614.489226
Outstanding requests per worker:
6 12 11 4 11 10 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.5,      634918,     571287,      63631,     462732,     108555,   0.777502,   1.800000,   2.000000,   2.300000,   0.515237,   0.103000,   3.368000, 639.997402
Outstanding requests per worker:
10 27 8 9 13 26 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126974.1,      634871,     571400,      63471,     472152,      99248,   0.916419,   2.000000,   2.300000,   3.300000,   0.735242,   0.214000,   7.466000, 658.077298
Outstanding requests per worker:
13 37 40 15 10 46 22 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127002.9,      635015,     571179,      63836,     478640,      92539,   0.949087,   2.200000,   2.600000,   3.000000,   0.697837,   0.213000,   3.752000, 670.799214
Outstanding requests per worker:
13 44 11 5 7 34 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571885,      63086,     484355,      87530,   1.027740,   2.400000,   2.800000,   3.300000,   0.785978,   0.058000,   4.659000, 681.316237
Outstanding requests per worker:
14 24 12 11 10 43 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:32   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 114560 pts/0   Sl+  08:32   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311961474      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4101684713      L1-dcache-loads:u                                           
        1468082021      armv8_pmuv3_0/l2d_cache/:u                                   
         442426452      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180481761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2184704512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168254976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054806.053230,       0.0,      254002,     228603,      25399,     149369,      79234,   0.563911,   0.601100,   0.719100,   5.700000,   0.887808,   0.000000,  11.431000, 466.944086
Outstanding requests per worker:
9 3 8 7 8 6 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     571590,      63365,     424737,     146853,   0.512197,   0.683100,   0.746100,   0.911100,   0.144929,   0.087000,   2.209000, 565.367146
Outstanding requests per worker:
11 9 11 10 12 10 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571665,      63281,     450196,     121469,   0.593763,   0.799000,   0.921100,   1.700000,   0.221979,   0.181000,   2.486000, 615.061328
Outstanding requests per worker:
12 5 10 8 17 9 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.5,      634943,     571414,      63529,     462774,     108640,   0.719701,   1.300000,   1.600000,   2.000000,   0.348969,   0.090000,   3.113000, 639.601933
Outstanding requests per worker:
15 15 14 8 25 11 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.9,      634940,     571898,      63042,     472450,      99448,   0.803380,   1.500000,   1.800000,   2.200000,   0.413845,   0.221000,   3.431000, 658.481617
Outstanding requests per worker:
25 12 12 13 20 10 15 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571501,      63452,     478806,      92695,   0.928479,   1.900000,   2.100000,   2.700000,   0.536211,   0.084000,   3.866000, 670.912655
Outstanding requests per worker:
28 8 9 6 33 14 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571548,      63399,     483727,      87821,   1.062436,   2.000000,   2.300000,   2.900000,   0.602509,   0.210000,   3.806000, 680.308431
Outstanding requests per worker:
20 11 14 9 52 10 15 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:33   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117504 pts/0   Sl+  08:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315598535      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4099803294      L1-dcache-loads:u                                           
        1453726272      armv8_pmuv3_0/l2d_cache/:u                                   
         452289531      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949530852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2261709312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245259776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228810240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054855.053279,       0.0,      258078,     232437,      25641,     151723,      80714,   0.634343,   0.897100,   1.100000,   1.700000,   0.330006,   0.000000,   6.612000, 467.395522
Outstanding requests per worker:
12 19 12 10 6 17 10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.1,      645121,     580433,      64688,     431259,     149174,   1.104335,   2.100000,   2.300000,   2.800000,   0.634177,   0.096000,   3.621000, 565.298353
Outstanding requests per worker:
32 51 7 10 23 30 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.7,      645204,     580485,      64719,     456658,     123827,   1.541542,   2.900000,   3.200000,   3.800000,   0.932723,   0.092000,   5.112000, 613.609914
Outstanding requests per worker:
28 12 13 37 34 6 13 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.3,      645137,     580590,      64547,     470300,     110290,   2.000622,   3.400000,   3.700000,   4.300000,   1.071609,   0.220000,   5.612000, 640.495410
Outstanding requests per worker:
54 9 29 56 51 32 11 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.1,      645141,     580808,      64333,     480391,     100417,   2.445204,   4.300000,   4.600000,   5.200000,   1.298329,   0.214000,   6.353000, 658.407388
Outstanding requests per worker:
46 23 34 77 45 27 25 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.9,      645160,     580667,      64493,     487271,      93396,   3.167317,   5.700000,   6.300000,   7.600000,   1.732977,   0.231000,   9.798000, 671.531623
Outstanding requests per worker:
56 31 21 83 44 23 19 118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.5,      645123,     580489,      64634,     492433,      88056,   3.578333,   7.200000,   8.100000,   9.300000,   2.190552,   0.302000,  11.764000, 681.483325
Outstanding requests per worker:
61 23 27 125 70 28 41 122 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:34   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 113984 pts/0   Sl+  08:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320339338      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        4238756005      L1-dcache-loads:u                                           
        1490704366      armv8_pmuv3_0/l2d_cache/:u                                   
         447291080      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310034478 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2424631808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2408182272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391732736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375283200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358833664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054904.053328,       0.0,      258053,     232384,      25669,     150892,      81492,   0.725063,   1.500000,   1.800000,   2.100000,   0.426476,   0.000000,   3.254000, 463.833960
Outstanding requests per worker:
23 12 8 10 32 11 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.3,      645152,     580725,      64427,     431222,     149503,   1.094397,   2.700000,   2.900000,   3.400000,   0.839382,   0.082000,   4.947000, 566.153989
Outstanding requests per worker:
34 11 12 12 53 13 15 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.9,      645070,     580809,      64261,     456694,     124115,   1.428709,   3.400000,   4.000000,   5.200000,   1.186331,   0.207000,   6.441000, 614.083112
Outstanding requests per worker:
73 24 25 27 76 13 17 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580618,      64541,     469487,     111131,   1.959740,   4.400000,   4.700000,   5.300000,   1.375554,   0.186000,   6.424000, 639.121837
Outstanding requests per worker:
76 7 32 30 78 23 36 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.1,      645106,     580975,      64131,     480211,     100764,   2.611022,   5.500000,   6.000000,   7.000000,   1.672362,   0.220000,   8.785000, 658.339066
Outstanding requests per worker:
132 24 36 30 103 19 33 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128970.9,      644855,     580550,      64305,     486240,      94310,   4.341062,  11.700000,  14.200000,  18.500000,   4.446166,   0.408000,  20.632001, 670.749865
Outstanding requests per worker:
310 23 31 32 263 27 34 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128838.7,      644194,     579560,      64634,     491526,      88034,   8.733829,  27.400000,  37.000000,  49.500000,  12.386181,   0.408000,  52.292999, 681.834438
Outstanding requests per worker:
818 29 49 41 727 28 29 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:35   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121472 pts/0   Sl+  08:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317368220      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4229569914      L1-dcache-loads:u                                           
        1493697400      armv8_pmuv3_0/l2d_cache/:u                                   
         475692775      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920654349 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2737238528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2720788992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704339456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576054952.053376,       0.0,      258054,     232320,      25734,     152242,      80078,   0.620258,   0.955100,   1.500000,   1.900000,   0.323854,   0.000000,   2.400000, 469.719322
Outstanding requests per worker:
9 28 11 7 7 21 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.9,      645120,     580360,      64760,     430519,     149841,   0.980815,   2.200000,   2.700000,   3.300000,   0.729983,   0.091000,   6.106000, 565.552443
Outstanding requests per worker:
17 69 14 8 25 47 10 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.7,      645234,     581084,      64150,     458075,     123009,   1.215862,   2.900000,   3.100000,   3.500000,   0.937286,   0.077000,   5.175000, 615.866952
Outstanding requests per worker:
11 52 13 10 27 46 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.3,      645107,     580709,      64398,     471266,     109443,   1.599290,   3.500000,   3.900000,   4.400000,   1.116874,   0.082000,   5.357000, 641.063817
Outstanding requests per worker:
28 71 26 21 26 63 23 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.3,      645202,     580858,      64344,     480250,     100608,   2.077309,   4.600000,   5.200000,   5.800000,   1.478403,   0.219000,   7.474000, 658.996395
Outstanding requests per worker:
23 70 40 9 12 60 33 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.1,      645141,     580489,      64652,     486789,      93700,   2.483581,   5.400000,   6.000000,   7.000000,   1.730546,   0.210000,   8.277000, 671.954137
Outstanding requests per worker:
30 84 30 16 30 81 33 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128967.3,      644837,     580724,      64113,     492947,      87777,   3.590562,  10.500000,  12.900000,  16.000000,   3.718832,   0.157000,  19.433999, 682.470514
Outstanding requests per worker:
46 281 39 25 32 200 35 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:36   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 119808 pts/0   Sl+  08:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320569383      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4224673251      L1-dcache-loads:u                                           
        1487652711      armv8_pmuv3_0/l2d_cache/:u                                   
         466760788      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230963482 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3031233024
starting receive base loop
num_worker_connections 1
Creating worker on tid 3014783488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2998333952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981884416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965434880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055001.053425,       0.0,      258101,     232308,      25793,     151482,      80826,   0.559337,   0.786100,   0.896100,   1.200000,   0.185118,   0.000000,   2.518000, 465.635592
Outstanding requests per worker:
6 12 16 9 11 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129014.1,      645071,     580453,      64618,     430995,     149458,   0.912814,   2.000000,   2.400000,   2.900000,   0.611932,   0.045000,   3.748000, 565.318891
Outstanding requests per worker:
11 34 49 26 10 23 41 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.9,      645210,     580678,      64532,     457418,     123260,   1.253583,   2.600000,   2.900000,   3.500000,   0.824107,   0.149000,   5.862000, 614.766969
Outstanding requests per worker:
11 27 46 8 15 44 42 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.7,      645139,     580455,      64684,     471048,     109407,   1.573610,   3.100000,   3.400000,   4.200000,   0.993636,   0.096000,   5.936000, 641.345601
Outstanding requests per worker:
10 47 63 26 15 29 60 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129055.1,      645276,     580916,      64360,     480141,     100775,   1.754670,   3.400000,   3.800000,   4.400000,   1.083633,   0.174000,   5.882000, 657.895367
Outstanding requests per worker:
13 36 48 11 11 28 55 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.5,      645123,     580267,      64856,     486911,      93356,   2.136881,   4.100000,   4.300000,   4.800000,   1.189844,   0.191000,   5.983000, 672.070929
Outstanding requests per worker:
5 30 62 25 23 47 71 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580784,      64365,     492742,      88042,   2.518619,   4.600000,   5.100000,   5.800000,   1.377347,   0.180000,   7.538000, 682.353047
Outstanding requests per worker:
25 51 72 39 17 36 74 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:36   0:00 /usr/lib/linux
memcache      7  290  0.0 429760 121408 pts/0   Sl+  08:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317777626      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        4221436110      L1-dcache-loads:u                                           
        1482451832      armv8_pmuv3_0/l2d_cache/:u                                   
         444071600      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930504957 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2274750976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2258301440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241851904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225402368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055050.053474,       0.0,      258102,     232517,      25585,     150721,      81796,   0.614653,   0.840100,   0.963100,   1.600000,   0.218411,   0.000000,   3.268000, 462.220878
Outstanding requests per worker:
12 8 12 19 9 10 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.7,      645104,     580737,      64367,     431134,     149603,   0.986627,   2.000000,   2.200000,   2.700000,   0.569357,   0.086000,   3.684000, 565.370601
Outstanding requests per worker:
16 13 14 37 27 9 11 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.9,      645160,     580554,      64606,     456651,     123903,   1.634128,   3.000000,   3.300000,   3.900000,   0.880063,   0.202000,   5.129000, 614.344536
Outstanding requests per worker:
35 30 13 45 38 22 9 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.9,      645155,     580704,      64451,     470605,     110099,   1.949489,   3.200000,   3.500000,   3.900000,   0.893865,   0.209000,   5.294000, 641.159469
Outstanding requests per worker:
40 26 14 52 34 40 31 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.5,      645103,     581107,      63996,     480299,     100808,   2.353619,   4.000000,   4.300000,   5.200000,   1.088689,   0.171000,   6.981000, 658.403583
Outstanding requests per worker:
48 31 29 96 55 39 34 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129052.9,      645265,     580637,      64628,     486830,      93807,   2.758939,   4.600000,   5.100000,   5.700000,   1.202581,   0.221000,   7.528000, 671.588843
Outstanding requests per worker:
44 42 26 86 47 43 19 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.1,      645141,     580380,      64761,     492189,      88191,   2.986810,   5.000000,   5.300000,   5.900000,   1.258116,   0.332000,   7.795000, 681.906604
Outstanding requests per worker:
58 49 30 85 57 49 21 81 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:37   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117504 pts/0   Sl+  08:37   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315373227      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        4243158813      L1-dcache-loads:u                                           
        1487071333      armv8_pmuv3_0/l2d_cache/:u                                   
         449248533      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380902801 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2283139584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2266690048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2250240512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2233790976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055099.053523,       0.0,      262263,     236018,      26245,     153528,      82490,   0.810530,   1.600000,   1.900000,   2.700000,   0.484310,   0.000000,   3.580000, 464.384818
Outstanding requests per worker:
12 43 10 9 9 26 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131125.7,      655629,     590093,      65536,     438597,     151496,   1.564699,   2.900000,   3.200000,   3.600000,   0.845652,   0.081000,   5.051000, 566.620758
Outstanding requests per worker:
33 66 21 24 42 52 30 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131147.7,      655739,     590064,      65675,     464660,     125404,   2.193717,   3.700000,   4.100000,   4.500000,   0.980334,   0.212000,   6.078000, 615.197385
Outstanding requests per worker:
43 64 41 34 34 73 38 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131162.1,      655811,     590433,      65378,     478817,     111616,   2.756715,   4.600000,   5.200000,   6.000000,   1.206542,   0.180000,   7.714000, 641.172331
Outstanding requests per worker:
57 77 26 29 52 72 33 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131128.1,      655641,     590257,      65384,     488443,     101814,   3.680221,   7.000000,   8.200000,  10.800000,   2.131889,   0.713000,  13.222000, 659.259690
Outstanding requests per worker:
43 183 36 28 52 82 44 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130990.3,      654952,     589429,      65523,     495007,      94422,   6.675503,  19.300000,  24.100000,  31.100000,   7.440194,   0.768000,  33.806998, 672.193094
Outstanding requests per worker:
64 542 54 28 76 464 47 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130901.5,      654508,     588785,      65723,     500225,      88560,  14.491167,  52.700000,  60.800000,  68.100000,  20.445506,   0.768000,  72.254002, 683.757001
Outstanding requests per worker:
71 1173 46 54 95 1064 57 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   08:38   0:00 /usr/lib/linux
memcache      8  284  0.0 429760 121664 pts/0   Sl+  08:38   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323005724      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        4330088835      L1-dcache-loads:u                                           
        1521898162      armv8_pmuv3_0/l2d_cache/:u                                   
         461310359      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.203232363 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2274816512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2258366976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241917440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225467904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055148.053572,       0.0,      262226,     235916,      26310,     154105,      81811,   0.929902,   2.000000,   2.300000,   2.900000,   0.604838,   0.000000,   3.621000, 466.869322
Outstanding requests per worker:
33 8 10 10 40 26 26 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131124.1,      655621,     589794,      65827,     438853,     150941,   1.870896,   3.500000,   3.800000,   4.400000,   1.007866,   0.107000,   5.281000, 567.156489
Outstanding requests per worker:
68 51 40 32 58 23 45 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131140.7,      655704,     589989,      65715,     464965,     125024,   2.913823,   5.000000,   5.500000,   6.400000,   1.289403,   0.230000,   9.626000, 615.646739
Outstanding requests per worker:
89 55 46 31 90 56 44 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131135.3,      655677,     590441,      65236,     479093,     111348,   3.659355,   6.500000,   7.600000,   9.400000,   1.797719,   0.709000,  11.396000, 640.963107
Outstanding requests per worker:
160 37 53 41 155 43 50 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130902.5,      654513,     589287,      65226,     487474,     101813,   9.341696,  31.900000,  37.800000,  50.000000,  12.164338,   0.779000,  53.034000, 658.977688
Outstanding requests per worker:
707 46 66 43 839 48 53 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130818.9,      654095,     588682,      65413,     494289,      94393,  21.083874,  79.100000,  89.400000,  96.800000,  31.180467,   1.227000, 102.991000, 673.215092
Outstanding requests per worker:
1504 77 74 47 1668 50 82 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130884.1,      654421,     588843,      65578,     499876,      88967,  32.012089, 119.200000, 129.300000, 137.400000,  48.950930,   1.660000, 140.211001, 682.648137
Outstanding requests per worker:
2263 65 98 54 2197 53 94 63 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:39   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 122048 pts/0   Sl+  08:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         326387301      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        4320733239      L1-dcache-loads:u                                           
        1530804179      armv8_pmuv3_0/l2d_cache/:u                                   
         479746167      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989609478 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2542334464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525884928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509435392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492985856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055196.053620,       0.0,      242497,     218103,      24394,     141553,      76550,   0.269481,   0.357100,   0.380100,   0.485100,   0.071030,   0.000000,   1.956000, 462.746670
Outstanding requests per worker:
4 4 4 3 3 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545290,      60817,     403310,     141980,   0.290818,   0.380100,   0.423100,   0.496100,   0.079156,   0.057000,   2.083000, 561.592307
Outstanding requests per worker:
5 4 5 7 3 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545650,      60475,     427441,     118209,   0.302581,   0.415100,   0.433100,   0.509100,   0.078705,   0.103000,   2.073000, 609.886893
Outstanding requests per worker:
4 6 4 6 4 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545633,      60460,     439922,     105711,   0.318289,   0.425100,   0.456100,   0.558100,   0.099926,   0.088000,   2.470000, 635.528705
Outstanding requests per worker:
5 6 5 7 3 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121204.1,      606021,     545660,      60361,     448969,      96691,   0.327536,   0.436100,   0.487100,   0.559100,   0.084881,   0.105000,   2.035000, 653.826881
Outstanding requests per worker:
11 36 12 11 10 23 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121235.3,      606177,     545851,      60326,     455963,      89888,   0.340957,   0.453100,   0.497100,   0.616100,   0.105355,   0.058000,   2.472000, 667.818729
Outstanding requests per worker:
4 5 5 5 6 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.3,      606122,     545551,      60571,     460300,      85251,   0.343474,   0.455100,   0.498100,   0.618100,   0.109068,   0.106000,   2.895000, 677.378672
Outstanding requests per worker:
4 5 5 6 3 7 3 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:40   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 119168 pts/0   Sl+  08:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322039387      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3884199696      L1-dcache-loads:u                                           
        1457959907      armv8_pmuv3_0/l2d_cache/:u                                   
         447520424      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.261058912 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2316235264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299785728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055245.053669,       0.0,      242486,     218301,      24185,     141489,      76812,   0.270271,   0.358100,   0.385100,   0.492100,   0.083326,   0.000000,   2.074000, 462.185368
Outstanding requests per worker:
4 4 4 5 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545555,      60532,     402469,     143086,   0.294197,   0.384100,   0.427100,   0.511100,   0.082274,   0.058000,   2.154000, 560.762259
Outstanding requests per worker:
5 3 5 4 7 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545555,      60537,     427012,     118543,   0.312960,   0.423100,   0.457100,   0.557100,   0.087395,   0.089000,   2.008000, 610.480217
Outstanding requests per worker:
7 4 5 5 5 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545590,      60496,     440372,     105218,   0.345251,   0.437100,   0.493100,   0.820100,   0.294424,   0.085000,   7.356000, 636.948150
Outstanding requests per worker:
5 5 5 6 6 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.5,      606118,     545389,      60729,     448412,      96977,   0.334666,   0.447100,   0.495100,   0.618100,   0.100923,   0.112000,   2.496000, 654.078362
Outstanding requests per worker:
5 5 7 6 7 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545220,      60865,     455558,      89662,   0.344731,   0.483100,   0.513100,   0.624100,   0.094382,   0.059000,   2.260000, 667.968407
Outstanding requests per worker:
8 4 5 8 6 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545243,      60852,     461191,      84052,   0.351607,   0.487100,   0.525100,   0.647100,   0.112073,   0.123000,   2.961000, 679.304517
Outstanding requests per worker:
4 4 6 5 9 5 8 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:40   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115136 pts/0   Sl+  08:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319771732      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3893011129      L1-dcache-loads:u                                           
        1458962283      armv8_pmuv3_0/l2d_cache/:u                                   
         450610179      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851952990 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3022647808
starting receive base loop
num_worker_connections 1
Creating worker on tid 3006198272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2989748736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973299200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055294.053718,       0.0,      242469,     218049,      24420,     141578,      76471,   0.282519,   0.369000,   0.421100,   0.494100,   0.075714,   0.000000,   1.977000, 464.129398
Outstanding requests per worker:
4 5 4 5 5 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545271,      60854,     403344,     141927,   0.310272,   0.424100,   0.483100,   0.566100,   0.091580,   0.062000,   2.013000, 562.628211
Outstanding requests per worker:
5 5 3 5 5 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545477,      60608,     427227,     118250,   0.332765,   0.454100,   0.512100,   0.632100,   0.103261,   0.063000,   2.207000, 610.941477
Outstanding requests per worker:
8 6 5 4 6 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545195,      60915,     439952,     105243,   0.343583,   0.488100,   0.553100,   0.684100,   0.113361,   0.088000,   2.349000, 636.475237
Outstanding requests per worker:
9 5 3 4 7 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.5,      606118,     545420,      60698,     449384,      96036,   0.354657,   0.493100,   0.558100,   0.689100,   0.126045,   0.124000,   2.734000, 654.469138
Outstanding requests per worker:
8 5 4 5 7 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.1,      606136,     545580,      60556,     455495,      90085,   0.356418,   0.496100,   0.559100,   0.684100,   0.105161,   0.119000,   1.017000, 668.058310
Outstanding requests per worker:
5 6 6 5 7 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545408,      60682,     460417,      84991,   0.373475,   0.518100,   0.593000,   0.753000,   0.139682,   0.117000,   3.887000, 677.922515
Outstanding requests per worker:
7 6 6 7 6 5 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:41   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 114944 pts/0   Sl+  08:41   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318799563      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3885824215      L1-dcache-loads:u                                           
        1443315594      armv8_pmuv3_0/l2d_cache/:u                                   
         447550138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780171977 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2209739264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2193289728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176840192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2160390656
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055343.053767,       0.0,      246223,     221562,      24661,     143973,      77589,   2.113292,   2.500000,  16.500000,  35.500000,   6.494894,   0.000000,  40.520001, 463.952140
Outstanding requests per worker:
7 6 6 3 3 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553753,      61660,     409604,     144149,   2.923401,   7.900000,  25.500000,  39.100000,   8.159638,   0.083000,  44.362999, 562.819445
Outstanding requests per worker:
6 5 4 3 7 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123075.1,      615376,     554020,      61356,     434511,     119509,   3.474633,  13.500000,  29.000000,  41.400000,   9.120026,   0.127000,  47.173999, 611.850552
Outstanding requests per worker:
7 19 9 10 12 20 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123099.9,      615500,     554012,      61488,     447716,     106296,   3.914951,  16.600000,  31.600000,  42.900000,   9.756808,   0.049000,  47.217999, 637.934992
Outstanding requests per worker:
7 6 4 6 4 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.3,      615452,     554182,      61270,     457157,      97025,   4.262802,  19.300000,  33.100000,  43.400000,  10.189438,   0.154000,  47.749002, 655.680264
Outstanding requests per worker:
6 6 6 7 8 8 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     553763,      61652,     463000,      90763,   4.665515,  21.500000,  34.500000,  44.500000,  10.710708,   0.061000,  48.811000, 669.136315
Outstanding requests per worker:
6 7 3 7 10 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553746,      61689,     468039,      85707,   5.069651,  24.200000,  35.600000,  44.900000,  11.205742,   0.154000,  49.419999, 679.041851
Outstanding requests per worker:
9 8 4 7 10 7 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:42   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117568 pts/0   Sl+  08:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314710342      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        3957233591      L1-dcache-loads:u                                           
        1450338609      armv8_pmuv3_0/l2d_cache/:u                                   
         454510985      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190121022 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2120544768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104095232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055391.053815,       0.0,      246219,     221536,      24683,     143809,      77727,   0.306346,   0.415100,   0.439100,   0.545100,   0.080783,   0.000000,   1.969000, 462.486950
Outstanding requests per worker:
3 5 4 5 7 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554030,      61399,     409544,     144486,   0.337714,   0.447100,   0.490100,   0.610100,   0.094703,   0.056000,   2.064000, 561.830448
Outstanding requests per worker:
7 6 6 5 6 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554029,      61383,     433917,     120112,   0.359255,   0.486100,   0.545100,   0.646000,   0.105462,   0.051000,   2.235000, 610.786233
Outstanding requests per worker:
8 10 20 7 14 8 14 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123098.3,      615492,     553967,      61525,     447761,     106206,   0.381076,   0.515100,   0.574100,   0.702100,   0.115334,   0.097000,   2.561000, 638.204066
Outstanding requests per worker:
7 7 6 4 10 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.3,      615417,     554423,      60994,     457007,      97416,   0.395571,   0.551100,   0.615100,   0.744100,   0.124637,   0.124000,   2.499000, 655.466148
Outstanding requests per worker:
8 7 8 5 10 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553757,      61672,     463030,      90727,   0.405537,   0.559100,   0.621100,   0.750100,   0.117803,   0.153000,   1.130000, 668.572713
Outstanding requests per worker:
9 4 2 8 6 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.3,      615452,     553786,      61666,     467712,      86074,   0.416965,   0.574100,   0.639100,   0.802100,   0.140934,   0.058000,   3.031000, 678.308538
Outstanding requests per worker:
11 7 3 4 9 7 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:43   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116416 pts/0   Sl+  08:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316336762      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        3952408277      L1-dcache-loads:u                                           
        1454530977      armv8_pmuv3_0/l2d_cache/:u                                   
         438584370      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770419670 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3118199296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101749760
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055440.053864,       0.0,      246198,     221491,      24707,     143600,      77891,   0.324665,   0.429100,   0.482100,   0.605100,   0.091728,   0.000000,   2.201000, 463.110479
Outstanding requests per worker:
6 5 5 7 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.5,      615403,     553548,      61855,     409963,     143585,   0.369142,   0.493100,   0.550100,   0.675100,   0.106668,   0.057000,   2.082000, 563.877078
Outstanding requests per worker:
3 5 5 7 5 7 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     554429,      60981,     434796,     119633,   0.393494,   0.544100,   0.605100,   0.707100,   0.114506,   0.146000,   2.060000, 611.616095
Outstanding requests per worker:
8 7 7 4 3 4 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.5,      615403,     553493,      61910,     448195,     105298,   0.423348,   0.573100,   0.637100,   0.771100,   0.127697,   0.057000,   2.468000, 639.875700
Outstanding requests per worker:
7 7 7 5 8 8 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553900,      61514,     456403,      97497,   0.439783,   0.610100,   0.674100,   0.805100,   0.130002,   0.160000,   2.390000, 655.677527
Outstanding requests per worker:
7 7 8 9 5 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     553458,      61946,     463684,      89774,   0.465920,   0.636100,   0.710100,   0.877100,   0.154679,   0.060000,   3.229000, 670.554506
Outstanding requests per worker:
6 4 7 7 10 7 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553854,      61548,     468876,      84978,   0.478356,   0.672100,   0.745100,   0.965100,   0.168581,   0.163000,   3.149000, 680.240114
Outstanding requests per worker:
9 7 9 14 7 5 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:44   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114880 pts/0   Sl+  08:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315850746      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        3950955878      L1-dcache-loads:u                                           
        1454814437      armv8_pmuv3_0/l2d_cache/:u                                   
         458407797      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.981206225 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2465788416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2449338880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2432889344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055489.053913,       0.0,      246215,     221700,      24515,     143109,      78591,   0.337481,   0.446100,   0.490100,   0.605100,   0.091000,   0.000000,   2.218000, 459.887803
Outstanding requests per worker:
4 4 5 7 6 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     554066,      61366,     409345,     144721,   0.392910,   0.545100,   0.605100,   0.711100,   0.113516,   0.047000,   2.116000, 561.577520
Outstanding requests per worker:
6 7 4 6 4 7 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554175,      61270,     433973,     120202,   0.431480,   0.602100,   0.673100,   0.875100,   0.159788,   0.047000,   3.729000, 610.101217
Outstanding requests per worker:
5 6 8 9 7 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553844,      61566,     447102,     106742,   0.454144,   0.625100,   0.700000,   0.882100,   0.148130,   0.083000,   2.383000, 637.072257
Outstanding requests per worker:
7 7 5 14 5 8 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     554468,      60945,     457091,      97377,   0.475960,   0.677000,   0.751100,   0.897100,   0.144850,   0.162000,   1.683000, 655.631728
Outstanding requests per worker:
8 8 9 8 8 7 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.3,      615457,     553737,      61720,     462797,      90940,   0.508877,   0.727100,   0.817100,   1.100000,   0.179091,   0.092000,   3.039000, 667.865844
Outstanding requests per worker:
8 7 10 8 6 7 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553916,      61494,     468423,      85493,   0.535746,   0.752100,   0.877100,   1.600000,   0.234522,   0.061000,   3.473000, 678.804335
Outstanding requests per worker:
6 6 9 13 5 7 8 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:44   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 114176 pts/0   Sl+  08:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312306121      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        3952393160      L1-dcache-loads:u                                           
        1428611312      armv8_pmuv3_0/l2d_cache/:u                                   
         439351137      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.609110987 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2792944128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2776494592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2760045056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055538.053962,       0.0,      250058,     225073,      24985,     145987,      79086,   0.338522,   0.471100,   0.498100,   0.610100,   0.094826,   0.000000,   2.081000, 462.007966
Outstanding requests per worker:
5 6 6 6 7 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562468,      62555,     416551,     145917,   0.396937,   0.541100,   0.603100,   0.751100,   0.127303,   0.059000,   2.036000, 563.028206
Outstanding requests per worker:
8 5 8 9 6 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562754,      62281,     441854,     120900,   0.431668,   0.602100,   0.666100,   0.801100,   0.129506,   0.060000,   2.139000, 612.412555
Outstanding requests per worker:
11 6 7 14 8 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562824,      62238,     454809,     108015,   0.460476,   0.631000,   0.701100,   0.859100,   0.141395,   0.092000,   2.713000, 637.708463
Outstanding requests per worker:
6 6 5 6 3 10 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562402,      62655,     464881,      97521,   0.498925,   0.687100,   0.784000,   0.998100,   0.169486,   0.153000,   2.682000, 657.519241
Outstanding requests per worker:
9 6 9 14 7 8 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562410,      62617,     470715,      91695,   0.504835,   0.698100,   0.791100,   0.928100,   0.147676,   0.053000,   1.402000, 670.348314
Outstanding requests per worker:
9 5 5 11 12 8 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     563128,      61919,     477057,      86071,   0.538015,   0.745100,   0.855100,   1.200000,   0.191343,   0.075000,   3.478000, 680.939161
Outstanding requests per worker:
10 10 7 10 9 9 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:45   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 111680 pts/0   Sl+  08:45   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317419502      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        4015769431      L1-dcache-loads:u                                           
        1447522310      armv8_pmuv3_0/l2d_cache/:u                                   
         423525136      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.299819017 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2537615872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2521166336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2504716800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055586.054010,       0.0,      250063,     225229,      24834,     146287,      78942,   0.374684,   0.535100,   0.599100,   0.727100,   0.113086,   0.000000,   2.261000, 463.605455
Outstanding requests per worker:
6 5 7 7 6 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562303,      62727,     417662,     144641,   0.444211,   0.637100,   0.735100,   0.911100,   0.149815,   0.050000,   2.076000, 565.250820
Outstanding requests per worker:
7 7 8 9 6 8 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562498,      62534,     441742,     120756,   0.484921,   0.697100,   0.810100,   1.100000,   0.179754,   0.154000,   2.207000, 612.245181
Outstanding requests per worker:
5 6 11 9 8 6 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.7,      625059,     562692,      62367,     455188,     107504,   0.536830,   0.811100,   0.976100,   1.500000,   0.227156,   0.061000,   2.459000, 638.588267
Outstanding requests per worker:
5 6 5 12 9 9 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562591,      62463,     464239,      98352,   0.681654,   1.500000,   1.800000,   2.100000,   0.429023,   0.171000,   2.592000, 655.924922
Outstanding requests per worker:
4 9 6 12 8 8 8 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.7,      625009,     562418,      62591,     470051,      92367,   0.837802,   2.000000,   2.200000,   2.900000,   0.641239,   0.058000,   3.862000, 668.485337
Outstanding requests per worker:
6 6 8 32 9 6 8 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562425,      62641,     475204,      87221,   0.902777,   2.100000,   2.500000,   3.000000,   0.702108,   0.046000,   4.775000, 679.334285
Outstanding requests per worker:
7 7 8 24 8 9 10 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   08:46   0:00 /usr/lib/linux
memcache      8  284  0.0 425664 118336 pts/0   Sl+  08:46   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  08:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316105524      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        4029673693      L1-dcache-loads:u                                           
        1442718601      armv8_pmuv3_0/l2d_cache/:u                                   
         430603145      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901252474 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2748903936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2732454400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2716004864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699555328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055635.054059,       0.0,      250042,     224962,      25080,     145904,      79058,   0.474202,   0.580100,   0.666100,   1.200000,   0.791099,   0.000000,  14.575000, 463.530432
Outstanding requests per worker:
6 8 4 10 7 6 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562212,      62815,     416767,     145445,   0.466318,   0.666100,   0.741100,   0.920100,   0.145557,   0.060000,   2.434000, 564.498099
Outstanding requests per worker:
10 7 9 11 6 9 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562654,      62403,     442155,     120499,   0.524817,   0.748100,   0.866100,   1.400000,   0.198666,   0.163000,   2.462000, 613.591920
Outstanding requests per worker:
8 7 9 10 4 5 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562768,      62287,     455663,     107105,   0.593558,   0.870100,   1.200000,   1.700000,   0.262097,   0.050000,   2.540000, 638.913378
Outstanding requests per worker:
4 9 7 11 9 7 12 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124993.1,      624966,     562716,      62250,     463970,      98746,   0.679522,   1.300000,   1.700000,   2.100000,   0.383929,   0.168000,   3.366000, 656.212599
Outstanding requests per worker:
20 9 41 28 10 17 30 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125028.1,      625141,     562756,      62385,     470970,      91786,   0.782091,   1.700000,   1.900000,   2.300000,   0.483264,   0.056000,   3.487000, 670.094405
Outstanding requests per worker:
10 8 7 14 7 11 7 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562383,      62643,     475959,      86424,   0.916054,   2.000000,   2.300000,   3.200000,   0.679830,   0.180000,   5.161000, 680.282647
Outstanding requests per worker:
10 13 4 25 6 11 8 33 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:47   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 119424 pts/0   Sl+  08:47   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312243337      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4031052385      L1-dcache-loads:u                                           
        1443258287      armv8_pmuv3_0/l2d_cache/:u                                   
         455667247      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.931541374 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2781278720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764829184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055684.054108,       0.0,      250055,     224890,      25165,     146431,      78459,   0.393776,   0.560100,   0.630100,   0.800100,   0.132014,   0.000000,   1.972000, 464.889435
Outstanding requests per worker:
6 5 3 6 5 4 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562285,      62754,     416577,     145708,   0.448247,   0.663100,   0.739100,   0.921100,   0.152784,   0.076000,   2.177000, 563.462516
Outstanding requests per worker:
7 6 8 9 10 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562762,      62274,     441483,     121279,   0.490249,   0.730100,   0.818100,   1.100000,   0.176313,   0.136000,   2.638000, 612.610063
Outstanding requests per worker:
5 5 10 5 7 7 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.3,      625007,     562623,      62384,     455096,     107527,   0.532763,   0.803100,   0.940100,   1.500000,   0.222875,   0.087000,   2.479000, 638.876990
Outstanding requests per worker:
6 8 8 20 3 7 10 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562427,      62631,     463733,      98694,   0.615720,   1.100000,   1.600000,   1.900000,   0.346554,   0.161000,   2.714000, 655.793973
Outstanding requests per worker:
7 7 7 9 7 7 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562446,      62601,     471022,      91424,   0.662850,   1.300000,   1.700000,   2.000000,   0.386428,   0.051000,   3.227000, 669.428158
Outstanding requests per worker:
8 8 9 12 8 6 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562534,      62515,     476196,      86338,   0.736468,   1.600000,   1.900000,   2.100000,   0.472020,   0.079000,   3.296000, 679.957083
Outstanding requests per worker:
9 6 10 20 5 8 12 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:48   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115200 pts/0   Sl+  08:48   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310044784      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4025250084      L1-dcache-loads:u                                           
        1439746842      armv8_pmuv3_0/l2d_cache/:u                                   
         435137692      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.279650753 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2754277888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2737828352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2721378816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704929280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055732.054156,       0.0,      254025,     228684,      25341,     148426,      80258,   0.432917,   0.602100,   0.668100,   0.823100,   0.132782,   0.000000,   2.366000, 464.030684
Outstanding requests per worker:
5 10 12 7 7 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.5,      634968,     571266,      63702,     423604,     147662,   0.534712,   0.777100,   0.878100,   1.500000,   0.216901,   0.044000,   2.875000, 564.831875
Outstanding requests per worker:
5 11 10 6 9 12 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.3,      634962,     571693,      63269,     450189,     121504,   0.637075,   0.926100,   1.500000,   2.000000,   0.326770,   0.167000,   2.940000, 614.927575
Outstanding requests per worker:
9 7 25 7 5 10 26 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571685,      63251,     463440,     108245,   0.827363,   1.800000,   2.000000,   2.300000,   0.509776,   0.169000,   3.613000, 640.256563
Outstanding requests per worker:
8 7 30 12 9 11 30 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571876,      63066,     472085,      99791,   0.990670,   2.200000,   2.600000,   3.000000,   0.712989,   0.087000,   3.777000, 657.005715
Outstanding requests per worker:
10 12 30 12 11 18 42 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.9,      634980,     571623,      63357,     478842,      92781,   1.129904,   2.500000,   2.800000,   3.200000,   0.801406,   0.218000,   4.374000, 670.407877
Outstanding requests per worker:
9 23 39 10 8 13 27 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.5,      634968,     571315,      63653,     483759,      87556,   1.274330,   2.700000,   3.000000,   3.400000,   0.853862,   0.215000,   4.692000, 680.313783
Outstanding requests per worker:
5 21 30 14 8 21 56 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:49   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 112448 pts/0   Sl+  08:49   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315994968      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        4115361733      L1-dcache-loads:u                                           
        1462542384      armv8_pmuv3_0/l2d_cache/:u                                   
         447652337      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950536176 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2270097920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2253648384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237198848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055781.054205,       0.0,      254026,     228774,      25252,     148796,      79978,   0.451321,   0.617100,   0.681100,   0.844100,   0.134776,   0.000000,   2.177000, 464.392073
Outstanding requests per worker:
5 9 6 10 8 7 5 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.5,      634968,     571569,      63399,     424111,     147458,   0.538648,   0.737100,   0.839100,   1.100000,   0.173555,   0.059000,   2.359000, 565.294143
Outstanding requests per worker:
9 11 6 8 7 6 7 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571543,      63428,     448973,     122570,   0.631114,   0.905100,   1.200000,   1.800000,   0.266804,   0.073000,   2.439000, 613.330231
Outstanding requests per worker:
12 12 7 14 11 12 9 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.9,      634935,     571792,      63143,     462927,     108865,   0.766210,   1.500000,   1.700000,   2.100000,   0.392619,   0.045000,   3.166000, 639.216916
Outstanding requests per worker:
10 14 8 28 7 9 13 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.5,      634973,     571461,      63512,     472379,      99082,   0.950417,   1.900000,   2.200000,   2.700000,   0.574190,   0.180000,   4.591000, 657.903253
Outstanding requests per worker:
12 8 10 38 10 11 8 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.7,      634994,     571358,      63636,     478422,      92936,   1.001315,   2.100000,   2.300000,   2.800000,   0.616825,   0.221000,   3.746000, 670.389180
Outstanding requests per worker:
11 9 11 28 9 14 8 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.3,      634952,     571377,      63575,     484314,      87063,   1.208044,   2.500000,   2.900000,   3.900000,   0.824380,   0.192000,   6.273000, 681.527891
Outstanding requests per worker:
10 21 13 49 14 10 7 39 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:49   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117376 pts/0   Sl+  08:49   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314795731      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        4101664758      L1-dcache-loads:u                                           
        1450441257      armv8_pmuv3_0/l2d_cache/:u                                   
         430552935      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.370778566 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3086938624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070489088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054039552
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037590016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055830.054254,       0.0,      254023,     228668,      25355,     149255,      79413,   0.429828,   0.598100,   0.661100,   0.788100,   0.127442,   0.000000,   2.115000, 465.921327
Outstanding requests per worker:
7 9 10 7 8 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     571148,      63822,     423876,     147272,   0.522574,   0.728100,   0.811100,   1.100000,   0.173089,   0.053000,   2.393000, 564.917277
Outstanding requests per worker:
9 9 9 8 7 12 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571408,      63538,     449351,     122057,   0.627377,   0.910100,   1.300000,   1.800000,   0.285532,   0.085000,   3.174000, 614.011176
Outstanding requests per worker:
11 13 12 8 9 13 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.7,      634924,     571550,      63374,     462591,     108959,   0.801039,   1.700000,   1.900000,   2.400000,   0.485748,   0.089000,   3.491000, 640.174546
Outstanding requests per worker:
6 35 13 6 12 39 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.5,      634998,     572022,      62976,     472620,      99402,   0.920950,   1.900000,   2.200000,   2.700000,   0.575338,   0.212000,   3.635000, 657.467064
Outstanding requests per worker:
11 34 14 7 5 34 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571088,      63873,     478089,      92999,   1.059039,   2.200000,   2.600000,   3.200000,   0.719389,   0.197000,   4.653000, 669.826111
Outstanding requests per worker:
13 42 13 8 9 40 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571324,      63615,     483940,      87384,   1.162411,   2.700000,   3.000000,   3.300000,   0.847153,   0.213000,   4.255000, 680.707068
Outstanding requests per worker:
11 26 10 8 24 43 29 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   08:50   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 113856 pts/0   Sl+  08:50   2:07 memcached -t 4
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  08:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317309429      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        4102161223      L1-dcache-loads:u                                           
        1461416869      armv8_pmuv3_0/l2d_cache/:u                                   
         443615156      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.611522636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2616652288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600202752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2583753216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567303680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055878.054302,       0.0,      258043,     232224,      25819,     151332,      80892,   0.796669,   1.700000,   2.000000,   2.400000,   0.505305,   0.000000,   3.314000, 465.405703
Outstanding requests per worker:
9 36 11 7 14 29 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129014.1,      645071,     580277,      64794,     431938,     148339,   1.296200,   2.900000,   3.200000,   3.800000,   0.924692,   0.054000,   5.241000, 567.370333
Outstanding requests per worker:
27 62 22 9 29 63 30 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.3,      645172,     580754,      64418,     458006,     122748,   1.976755,   3.900000,   4.300000,   4.800000,   1.235467,   0.211000,   6.346000, 615.822312
Outstanding requests per worker:
44 74 25 9 33 66 28 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129010.3,      645052,     580648,      64404,     470998,     109650,   2.788227,   6.000000,   7.000000,   9.000000,   2.042935,   0.164000,  11.025000, 640.815100
Outstanding requests per worker:
40 176 31 12 32 95 32 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128884.7,      644424,     579995,      64429,     479465,     100530,   6.538202,  17.900000,  27.300000,  41.000000,   9.066665,   0.186000,  44.045001, 658.255647
Outstanding requests per worker:
53 287 23 31 51 703 46 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128838.5,      644193,     579427,      64766,     486155,      93272,  13.068360,  46.800000,  62.500000,  75.900000,  20.335985,   0.227000,  77.358998, 672.145941
Outstanding requests per worker:
46 784 34 27 49 1210 45 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128770.3,      643852,     579478,      64374,     491638,      87840,  21.504560,  82.600000, 100.500000, 109.000000,  33.919473,   0.664000, 116.090998, 681.647445
Outstanding requests per worker:
71 1382 47 50 74 1870 58 33 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:51   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 124416 pts/0   Sl+  08:51   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318124407      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        4244761004      L1-dcache-loads:u                                           
        1492943150      armv8_pmuv3_0/l2d_cache/:u                                   
         465234531      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820913206 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2822631936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2806182400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789732864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773283328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055927.054351,       0.0,      258031,     232372,      25659,     151638,      80734,   0.617008,   0.893100,   1.300000,   2.000000,   0.306614,   0.000000,   3.015000, 466.273252
Outstanding requests per worker:
40 7 13 10 27 10 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     581172,      64009,     431234,     149938,   1.102381,   2.700000,   3.000000,   3.500000,   0.840558,   0.089000,   4.584000, 565.428680
Outstanding requests per worker:
36 15 26 8 44 10 18 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.7,      645099,     580547,      64552,     457148,     123399,   1.676848,   3.900000,   4.500000,   5.600000,   1.329849,   0.081000,   7.482000, 615.206366
Outstanding requests per worker:
94 18 28 10 77 10 19 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.3,      645152,     580723,      64429,     471290,     109433,   2.178816,   4.900000,   5.400000,   6.400000,   1.619511,   0.095000,   8.398000, 641.572762
Outstanding requests per worker:
99 25 53 23 87 29 25 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128992.3,      644962,     580644,      64318,     480012,     100632,   3.521390,   8.200000,  11.000000,  16.300000,   3.333636,   0.212000,  18.453000, 658.371114
Outstanding requests per worker:
150 32 22 21 255 28 46 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128842.1,      644211,     579882,      64329,     486591,      93291,   7.673833,  26.000000,  35.900000,  44.000000,  11.096888,   0.217000,  48.463002, 671.755973
Outstanding requests per worker:
762 36 41 30 615 39 40 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128759.5,      643798,     579189,      64609,     490825,      88364,  17.943028,  71.100000,  79.400000,  88.200000,  27.905768,   0.720000,  95.000997, 681.172738
Outstanding requests per worker:
1534 29 37 29 1268 41 41 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:52   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117888 pts/0   Sl+  08:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315305182      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4237884720      L1-dcache-loads:u                                           
        1489276582      armv8_pmuv3_0/l2d_cache/:u                                   
         449500620      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030566469 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3099390464
starting receive base loop
num_worker_connections 1
Creating worker on tid 3082940928
starting receive base loop
num_worker_connections 1
Creating worker on tid 3066491392
starting receive base loop
num_worker_connections 1
Creating worker on tid 3050041856
starting receive base loop
num_worker_connections 1
Creating worker on tid 3033592320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576055976.054400,       0.0,      258107,     232178,      25929,     151439,      80739,   0.505287,   0.706100,   0.775100,   0.958100,   0.152981,   0.000000,   2.289000, 466.268901
Outstanding requests per worker:
10 7 7 8 6 11 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.5,      645153,     580679,      64474,     430923,     149756,   0.620294,   0.841100,   0.960100,   1.600000,   0.220778,   0.090000,   2.947000, 565.495529
Outstanding requests per worker:
13 25 12 9 10 35 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.1,      645206,     580631,      64575,     457795,     122836,   0.879442,   1.800000,   1.900000,   2.300000,   0.476117,   0.177000,   3.249000, 615.276315
Outstanding requests per worker:
11 30 15 16 16 41 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.5,      645233,     580949,      64284,     471067,     109882,   1.055199,   2.100000,   2.400000,   2.900000,   0.631251,   0.057000,   3.640000, 640.401061
Outstanding requests per worker:
20 25 11 12 17 34 30 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580845,      64334,     481147,      99698,   1.303114,   2.500000,   2.800000,   3.300000,   0.738629,   0.175000,   4.614000, 660.050339
Outstanding requests per worker:
17 45 16 20 17 39 30 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.1,      645201,     580719,      64482,     487080,      93639,   1.626646,   2.900000,   3.200000,   4.100000,   0.818610,   0.194000,   6.289000, 670.968956
Outstanding requests per worker:
13 44 30 25 27 35 26 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.3,      645197,     580925,      64272,     492758,      88167,   1.936744,   3.100000,   3.400000,   4.200000,   0.801718,   0.216000,   6.298000, 681.579911
Outstanding requests per worker:
22 42 39 14 26 49 35 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:53   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121856 pts/0   Sl+  08:53   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322201421      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4206898608      L1-dcache-loads:u                                           
        1491300761      armv8_pmuv3_0/l2d_cache/:u                                   
         434975834      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870643164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2836263424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056024.054448,       0.0,      258085,     232024,      26061,     151204,      80820,   0.535029,   0.739100,   0.831100,   0.986100,   0.160020,   0.000000,   2.302000, 465.632706
Outstanding requests per worker:
12 10 11 9 8 11 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.9,      645170,     580854,      64316,     431724,     149130,   0.721535,   1.300000,   1.600000,   2.000000,   0.353549,   0.086000,   2.773000, 567.113283
Outstanding requests per worker:
16 33 10 6 15 30 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.5,      645198,     580914,      64284,     457478,     123436,   1.051059,   2.000000,   2.300000,   2.900000,   0.625343,   0.051000,   3.832000, 614.952365
Outstanding requests per worker:
29 38 10 9 24 35 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.5,      645173,     581143,      64030,     470500,     110643,   1.334514,   2.500000,   2.800000,   3.500000,   0.765380,   0.054000,   4.925000, 639.603416
Outstanding requests per worker:
29 22 13 8 35 52 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.7,      645169,     580885,      64284,     480722,     100163,   1.704103,   3.000000,   3.300000,   4.300000,   0.908422,   0.216000,   6.041000, 659.624824
Outstanding requests per worker:
28 47 20 23 31 43 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128999.7,      644999,     580740,      64259,     487259,      93481,   1.857659,   3.300000,   3.600000,   4.200000,   0.971427,   0.177000,   5.728000, 671.828565
Outstanding requests per worker:
49 84 39 21 40 87 46 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129055.9,      645280,     580819,      64461,     492488,      88331,   2.140738,   3.700000,   4.100000,   4.800000,   1.106397,   0.216000,   5.744000, 681.705433
Outstanding requests per worker:
52 61 31 29 33 70 23 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:53   0:00 /usr/lib/linux
memcache      7  277  0.0 427712 114176 pts/0   Sl+  08:53   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322560679      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4213513192      L1-dcache-loads:u                                           
        1505332613      armv8_pmuv3_0/l2d_cache/:u                                   
         468015000      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.481127892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2182017536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165568000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056073.054497,       0.0,      258097,     232309,      25788,     151177,      81132,   0.548569,   0.770100,   0.894100,   1.500000,   0.205106,   0.000000,   2.137000, 465.314267
Outstanding requests per worker:
10 15 17 10 9 8 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580667,      64457,     431351,     149316,   0.749274,   1.400000,   1.700000,   2.100000,   0.380875,   0.078000,   3.197000, 565.892067
Outstanding requests per worker:
10 31 37 8 9 19 29 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.5,      645193,     580955,      64238,     457065,     123890,   1.102825,   2.100000,   2.400000,   2.900000,   0.644235,   0.162000,   3.731000, 614.429656
Outstanding requests per worker:
9 24 36 13 10 33 34 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.7,      645174,     580760,      64414,     471213,     109547,   1.449190,   2.700000,   3.000000,   3.800000,   0.811249,   0.214000,   4.873000, 641.101080
Outstanding requests per worker:
31 33 46 13 10 29 38 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.1,      645086,     581041,      64045,     480279,     100762,   1.745110,   2.900000,   3.100000,   3.700000,   0.793575,   0.188000,   5.424000, 658.257977
Outstanding requests per worker:
29 68 56 27 30 60 50 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129055.7,      645279,     581173,      64106,     487655,      93518,   2.100062,   3.200000,   3.500000,   4.000000,   0.760921,   0.147000,   5.230000, 672.274736
Outstanding requests per worker:
12 45 62 13 28 28 47 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580275,      64855,     492237,      88038,   2.291730,   3.400000,   3.800000,   5.000000,   0.828047,   0.300000,   7.595000, 681.623994
Outstanding requests per worker:
34 49 50 22 40 51 61 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:54   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 115904 pts/0   Sl+  08:54   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319711590      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        4227539809      L1-dcache-loads:u                                           
        1495467085      armv8_pmuv3_0/l2d_cache/:u                                   
         439673844      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190163131 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3023303168
starting receive base loop
num_worker_connections 1
Creating worker on tid 3006853632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990404096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973954560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056122.054546,       0.0,      262246,     236155,      26091,     153834,      82321,   1.115968,   2.900000,   3.200000,   3.700000,   0.933376,   0.000000,   5.893000, 466.004260
Outstanding requests per worker:
46 7 12 13 42 9 10 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131097.9,      655490,     589828,      65662,     439022,     150806,   2.238481,   5.200000,   5.700000,   7.000000,   1.710333,   0.077000,   9.189000, 567.576997
Outstanding requests per worker:
112 22 37 33 130 30 48 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130961.3,      654807,     589584,      65223,     465190,     124394,   5.661146,  17.100000,  24.100000,  35.100000,   7.589682,   0.223000,  44.567000, 616.778264
Outstanding requests per worker:
718 30 50 57 409 34 51 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130825.1,      654126,     588742,      65384,     477779,     110963,  16.826875,  68.100000,  80.900000,  94.000000,  26.885213,   0.232000,  99.514998, 641.978308
Outstanding requests per worker:
1603 32 45 57 1187 43 42 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130829.5,      654148,     588797,      65351,     487334,     101463,  29.734462, 113.400000, 129.000000, 143.500000,  47.501255,   0.766000, 150.269002, 659.582382
Outstanding requests per worker:
2463 33 58 57 1946 41 63 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130886.5,      654433,     588958,      65475,     494024,      94934,  41.750750, 158.200000, 187.500000, 200.900000,  67.990063,   0.830000, 204.191998, 671.915048
Outstanding requests per worker:
3326 26 68 64 2465 39 49 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130904.9,      654525,     588855,      65670,     499682,      89173,  51.249112, 211.600000, 219.100000, 227.900000,  83.769972,   0.825000, 232.398003, 681.817291
Outstanding requests per worker:
3788 45 68 53 3219 47 62 62 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:55   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 120448 pts/0   Sl+  08:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321259030      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4317553064      L1-dcache-loads:u                                           
        1522152601      armv8_pmuv3_0/l2d_cache/:u                                   
         486778498      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910417205 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2935157248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2918707712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902258176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056170.054594,       0.0,      262279,     236175,      26104,     154594,      81581,   1.149823,   2.100000,   2.500000,   2.900000,   0.654679,   0.000000,   3.874000, 468.635787
Outstanding requests per worker:
23 30 10 11 15 21 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131122.7,      655614,     589731,      65883,     438335,     151396,   1.505762,   2.800000,   3.000000,   3.600000,   0.843295,   0.082000,   4.807000, 566.680273
Outstanding requests per worker:
30 59 15 24 67 50 16 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131158.9,      655795,     590395,      65400,     464795,     125600,   2.136406,   3.200000,   3.500000,   4.000000,   0.804858,   0.227000,   6.449000, 615.966736
Outstanding requests per worker:
36 51 28 27 41 47 28 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131139.3,      655697,     590368,      65329,     479084,     111284,   2.690656,   4.100000,   4.400000,   5.300000,   0.965330,   0.290000,   7.549000, 641.756745
Outstanding requests per worker:
40 61 46 46 53 69 25 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131137.3,      655687,     590259,      65428,     488384,     101875,   3.322968,   5.400000,   5.800000,   6.600000,   1.285724,   0.758000,   8.686000, 659.193595
Outstanding requests per worker:
71 87 46 40 70 84 37 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131128.7,      655644,     589870,      65774,     495242,      94628,   3.993446,   6.700000,   7.500000,  11.300000,   1.910136,   0.764000,  13.767000, 672.477780
Outstanding requests per worker:
68 105 50 47 71 181 41 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131056.7,      655284,     589738,      65546,     500405,      89333,   6.350732,  15.000000,  21.300000,  25.900000,   5.770103,   0.832000,  29.188000, 681.939348
Outstanding requests per worker:
84 312 41 50 74 461 36 58 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:56   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 118848 pts/0   Sl+  08:56   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         326263342      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        4320110181      L1-dcache-loads:u                                           
        1525685009      armv8_pmuv3_0/l2d_cache/:u                                   
         459668861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820461754 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2255024640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2238575104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056219.054643,       0.0,      242503,     218198,      24305,     141497,      76701,   0.257076,   0.355100,   0.367100,   0.450100,   0.068141,   0.000000,   1.957000, 462.231139
Outstanding requests per worker:
2 5 5 5 5 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545490,      60604,     403305,     142185,   0.279533,   0.370100,   0.422100,   0.493100,   0.078332,   0.060000,   2.185000, 562.169226
Outstanding requests per worker:
3 5 4 4 5 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545538,      60571,     427796,     117742,   0.297849,   0.419100,   0.448100,   0.554100,   0.086853,   0.103000,   2.016000, 611.311870
Outstanding requests per worker:
4 6 3 3 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.5,      606118,     545830,      60288,     440659,     105171,   0.310069,   0.426100,   0.487100,   0.579100,   0.098340,   0.051000,   2.404000, 637.035846
Outstanding requests per worker:
5 5 6 6 3 6 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545785,      60313,     449275,      96510,   0.319779,   0.435100,   0.491100,   0.603100,   0.098265,   0.112000,   2.545000, 654.661724
Outstanding requests per worker:
5 7 4 6 7 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545624,      60469,     455798,      89826,   0.328955,   0.451100,   0.506100,   0.621100,   0.095511,   0.052000,   2.156000, 667.965553
Outstanding requests per worker:
4 8 6 4 4 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545508,      60599,     461097,      84411,   0.337485,   0.481100,   0.517100,   0.636100,   0.110401,   0.111000,   3.019000, 679.291213
Outstanding requests per worker:
7 8 3 6 5 7 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:57   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114176 pts/0   Sl+  08:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         326472311      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
        3883679841      L1-dcache-loads:u                                           
        1467410258      armv8_pmuv3_0/l2d_cache/:u                                   
         448057853      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120777441 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2611540480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2595090944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2578641408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2562191872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056268.054692,       0.0,      242477,     218155,      24322,     141664,      76491,   0.304915,   0.423100,   0.459100,   0.559100,   0.091943,   0.000000,   2.544000, 463.633297
Outstanding requests per worker:
4 4 5 7 5 7 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545557,      60551,     403138,     142419,   0.337464,   0.483100,   0.519100,   0.643100,   0.104150,   0.057000,   2.389000, 561.833456
Outstanding requests per worker:
6 6 5 6 5 3 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545558,      60567,     428143,     117415,   0.365624,   0.508100,   0.574100,   0.709100,   0.117943,   0.087000,   2.212000, 612.013394
Outstanding requests per worker:
5 6 5 9 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121214.7,      606074,     545729,      60345,     440710,     105019,   0.385144,   0.554100,   0.621100,   0.756100,   0.126818,   0.055000,   2.479000, 637.783292
Outstanding requests per worker:
4 5 5 14 8 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545511,      60593,     449177,      96334,   0.403823,   0.580100,   0.678100,   0.822100,   0.141573,   0.124000,   2.608000, 654.591594
Outstanding requests per worker:
5 7 5 9 5 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545085,      61030,     455295,      89790,   0.407555,   0.588100,   0.685100,   0.824100,   0.135738,   0.126000,   1.411000, 667.388807
Outstanding requests per worker:
7 5 5 6 4 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545641,      60447,     461017,      84624,   0.424868,   0.623100,   0.704100,   0.884100,   0.151832,   0.092000,   3.083000, 678.325885
Outstanding requests per worker:
8 3 7 8 4 6 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:57   0:00 /usr/lib/linux
memcache      7  284  0.0 422592 112704 pts/0   Sl+  08:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319815635      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3885855699      L1-dcache-loads:u                                           
        1439707344      armv8_pmuv3_0/l2d_cache/:u                                   
         428363707      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030496147 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2924933632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2908484096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056316.054740,       0.0,      242489,     218359,      24130,     141577,      76782,   0.291854,   0.381100,   0.424100,   0.496100,   0.076190,   0.000000,   2.030000, 462.511845
Outstanding requests per worker:
6 3 5 3 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545304,      60801,     402176,     143128,   0.318628,   0.425100,   0.456100,   0.554100,   0.087883,   0.057000,   2.188000, 560.420032
Outstanding requests per worker:
5 5 4 6 5 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545771,      60353,     427675,     118096,   0.335993,   0.444100,   0.489100,   0.565100,   0.089645,   0.090000,   1.939000, 610.498986
Outstanding requests per worker:
7 6 5 5 6 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.9,      606080,     545694,      60386,     440842,     104852,   0.356614,   0.487100,   0.516000,   0.635100,   0.110805,   0.053000,   2.431000, 637.686082
Outstanding requests per worker:
7 9 6 3 8 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545827,      60272,     449717,      96110,   0.369137,   0.494100,   0.554100,   0.686100,   0.129240,   0.045000,   4.007000, 654.688995
Outstanding requests per worker:
7 5 3 4 6 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545686,      60421,     456350,      89336,   0.370071,   0.496100,   0.554100,   0.645100,   0.098451,   0.058000,   2.121000, 668.823102
Outstanding requests per worker:
8 9 4 3 3 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.1,      606126,     545561,      60565,     461490,      84071,   0.384448,   0.516000,   0.569100,   0.692000,   0.121259,   0.138000,   3.201000, 679.056633
Outstanding requests per worker:
5 7 8 3 5 9 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:58   0:00 /usr/lib/linux
memcache      7  277  0.0 423616 110912 pts/0   Sl+  08:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318556407      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3874818619      L1-dcache-loads:u                                           
        1455310234      armv8_pmuv3_0/l2d_cache/:u                                   
         438734919      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180585076 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2591355392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574905856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056364.054788,       0.0,      246231,     221528,      24703,     143524,      78004,   0.322846,   0.435100,   0.486100,   0.608000,   0.091541,   0.000000,   2.100000, 462.244204
Outstanding requests per worker:
3 4 5 5 6 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     553994,      61426,     409672,     144322,   0.362181,   0.492100,   0.553100,   0.677000,   0.105276,   0.057000,   2.088000, 562.069308
Outstanding requests per worker:
7 7 7 10 7 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.3,      615467,     554102,      61365,     434604,     119498,   0.398389,   0.553100,   0.619100,   0.753000,   0.121575,   0.057000,   1.991000, 612.181606
Outstanding requests per worker:
4 8 3 9 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553698,      61724,     448219,     105479,   0.436584,   0.604100,   0.677000,   1.100000,   0.273976,   0.048000,   5.696000, 639.712856
Outstanding requests per worker:
4 4 7 7 6 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     553993,      61430,     456837,      97156,   0.427300,   0.613100,   0.686100,   0.832100,   0.137904,   0.150000,   2.371000, 656.279552
Outstanding requests per worker:
10 8 5 11 7 6 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553680,      61738,     463274,      90406,   0.447180,   0.632100,   0.738000,   0.937100,   0.176307,   0.095000,   3.279000, 669.205660
Outstanding requests per worker:
6 8 6 7 9 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553876,      61532,     468585,      85291,   0.464600,   0.668100,   0.748100,   0.961100,   0.192477,   0.057000,   3.731000, 679.203444
Outstanding requests per worker:
6 6 9 9 8 7 6 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:59   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116288 pts/0   Sl+  08:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313113451      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        3957562393      L1-dcache-loads:u                                           
        1443302511      armv8_pmuv3_0/l2d_cache/:u                                   
         438869521      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210525205 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2805395968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2788946432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772496896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056413.054837,       0.0,      246229,     221514,      24715,     143648,      77866,   0.308396,   0.416100,   0.443100,   0.553100,   0.089705,   0.000000,   2.890000, 462.490159
Outstanding requests per worker:
5 5 5 4 3 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553726,      61702,     410227,     143499,   0.342592,   0.468100,   0.495100,   0.612100,   0.098036,   0.055000,   2.827000, 563.554155
Outstanding requests per worker:
7 5 6 5 6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553950,      61463,     434413,     119537,   0.367051,   0.491100,   0.548100,   0.681100,   0.116970,   0.061000,   2.914000, 611.153258
Outstanding requests per worker:
6 5 9 3 6 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553452,      61981,     447181,     106271,   0.383195,   0.508100,   0.560100,   0.704100,   0.123486,   0.057000,   2.976000, 637.628354
Outstanding requests per worker:
7 5 6 5 5 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553958,      61453,     456522,      97436,   0.397772,   0.545100,   0.592100,   0.696100,   0.119612,   0.154000,   2.457000, 655.075024
Outstanding requests per worker:
6 6 8 6 4 5 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553777,      61648,     463109,      90668,   0.411376,   0.555100,   0.614100,   0.742100,   0.133516,   0.152000,   3.276000, 668.654502
Outstanding requests per worker:
5 6 7 6 6 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123064.5,      615323,     553959,      61364,     467787,      86172,   0.415566,   0.563100,   0.620100,   0.749100,   0.131105,   0.061000,   3.473000, 678.011044
Outstanding requests per worker:
27 13 21 12 43 9 13 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:00   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 120320 pts/0   Sl+  09:00   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  09:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319379174      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
        3954445716      L1-dcache-loads:u                                           
        1449527816      armv8_pmuv3_0/l2d_cache/:u                                   
         438739821      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221617026 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2296705536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2280256000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2263806464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247356928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230907392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056462.054886,       0.0,      246237,     221384,      24853,     144288,      77096,   0.325761,   0.424100,   0.480100,   0.620100,   0.109006,   0.000000,   2.370000, 464.734452
Outstanding requests per worker:
5 5 5 4 4 8 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553955,      61470,     409870,     144085,   0.351435,   0.479100,   0.503100,   0.611100,   0.093815,   0.055000,   2.180000, 562.662021
Outstanding requests per worker:
5 7 5 5 5 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     553877,      61527,     434609,     119268,   0.379612,   0.502100,   0.553100,   0.677000,   0.111661,   0.050000,   2.185000, 612.656866
Outstanding requests per worker:
7 8 6 6 5 5 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553572,      61850,     447947,     105625,   0.400657,   0.545100,   0.599100,   0.740100,   0.122339,   0.054000,   2.582000, 638.935707
Outstanding requests per worker:
7 10 7 6 7 10 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     554323,      61121,     456763,      97560,   0.412752,   0.552100,   0.611100,   0.738000,   0.118382,   0.155000,   2.596000, 655.977531
Outstanding requests per worker:
8 7 8 7 5 11 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.1,      615461,     553907,      61554,     463398,      90509,   0.425120,   0.566100,   0.618100,   0.738000,   0.108899,   0.161000,   1.064000, 670.011386
Outstanding requests per worker:
6 5 7 5 7 12 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553937,      61473,     468781,      85156,   0.445161,   0.608000,   0.642100,   0.801100,   0.141442,   0.087000,   3.234000, 679.749972
Outstanding requests per worker:
8 6 10 9 10 7 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:01   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114688 pts/0   Sl+  09:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316130006      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        3954102418      L1-dcache-loads:u                                           
        1445882619      armv8_pmuv3_0/l2d_cache/:u                                   
         454165344      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.759189548 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2243359232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226909696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056510.054934,       0.0,      246196,     221737,      24459,     144157,      77580,   0.319903,   0.422100,   0.477100,   0.551100,   0.086125,   0.000000,   2.153000, 464.083586
Outstanding requests per worker:
5 4 8 6 6 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553806,      61618,     409134,     144672,   0.362728,   0.486100,   0.545100,   0.669000,   0.104313,   0.051000,   2.157000, 561.715530
Outstanding requests per worker:
4 5 5 4 7 6 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553593,      61842,     434419,     119174,   0.387835,   0.540100,   0.580100,   0.740100,   0.119485,   0.091000,   2.238000, 612.486475
Outstanding requests per worker:
7 4 8 5 6 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553761,      61661,     447064,     106697,   0.406980,   0.557100,   0.621100,   0.749100,   0.119938,   0.155000,   2.368000, 637.624118
Outstanding requests per worker:
6 6 12 7 5 6 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553845,      61563,     456415,      97430,   0.426130,   0.579100,   0.646000,   0.806100,   0.132776,   0.058000,   3.013000, 655.295639
Outstanding requests per worker:
8 6 9 6 8 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     553688,      61735,     462970,      90718,   0.443316,   0.616100,   0.686100,   0.841100,   0.140307,   0.162000,   2.564000, 668.644152
Outstanding requests per worker:
6 4 11 9 5 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553732,      61703,     468495,      85237,   0.454449,   0.626100,   0.701100,   0.878100,   0.154862,   0.157000,   3.086000, 678.529482
Outstanding requests per worker:
7 4 10 7 7 8 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:01   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114432 pts/0   Sl+  09:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313746559      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3959784021      L1-dcache-loads:u                                           
        1438068692      armv8_pmuv3_0/l2d_cache/:u                                   
         445809304      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140025360 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2122183168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105733632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089284096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056558.054982,       0.0,      250038,     224942,      25096,     146450,      78492,   0.384199,   0.548100,   0.630100,   0.803100,   0.131755,   0.000000,   2.330000, 463.611304
Outstanding requests per worker:
14 5 8 7 8 8 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.1,      625021,     562607,      62414,     416353,     146254,   0.455625,   0.684100,   0.800100,   1.100000,   0.179243,   0.059000,   2.564000, 562.542318
Outstanding requests per worker:
12 10 8 7 19 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562949,      62100,     441797,     121152,   0.512135,   0.793100,   0.930100,   1.600000,   0.233493,   0.054000,   2.458000, 612.218213
Outstanding requests per worker:
18 7 9 6 19 9 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562547,      62479,     454774,     107773,   0.726514,   1.800000,   2.000000,   2.400000,   0.544097,   0.115000,   3.688000, 638.482216
Outstanding requests per worker:
22 9 8 8 30 6 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562722,      62308,     464457,      98265,   0.909058,   2.300000,   2.700000,   3.200000,   0.780460,   0.045000,   3.930000, 656.205743
Outstanding requests per worker:
38 11 10 9 30 8 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     562438,      62587,     470048,      92390,   0.972677,   2.600000,   3.000000,   3.400000,   0.876192,   0.173000,   5.980000, 668.490214
Outstanding requests per worker:
44 10 7 9 38 9 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562541,      62495,     475760,      86781,   1.062130,   2.900000,   3.200000,   3.600000,   0.985910,   0.168000,   5.993000, 679.845410
Outstanding requests per worker:
45 7 9 12 52 6 5 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:02   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 120320 pts/0   Sl+  09:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313563903      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        4038241133      L1-dcache-loads:u                                           
        1461508866      armv8_pmuv3_0/l2d_cache/:u                                   
         455709036      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920375563 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2640114176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056607.055031,       0.0,      250060,     225275,      24785,     146652,      78623,   0.389496,   0.545100,   0.614100,   0.754100,   0.120691,   0.000000,   2.304000, 464.630936
Outstanding requests per worker:
4 7 5 10 6 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562797,      62230,     416670,     146127,   0.449175,   0.637100,   0.733100,   0.927100,   0.154590,   0.075000,   2.631000, 563.363955
Outstanding requests per worker:
7 5 3 11 9 10 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562724,      62317,     441416,     121308,   0.495522,   0.729100,   0.823100,   1.100000,   0.177328,   0.086000,   2.331000, 611.297457
Outstanding requests per worker:
9 6 6 13 5 9 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562714,      62333,     454588,     108126,   0.548756,   0.811100,   0.989100,   1.600000,   0.243673,   0.061000,   3.004000, 637.985637
Outstanding requests per worker:
8 8 6 10 5 10 5 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.9,      625065,     562790,      62275,     464316,      98474,   0.620619,   0.986100,   1.500000,   2.000000,   0.335984,   0.166000,   3.491000, 656.035315
Outstanding requests per worker:
8 8 6 30 6 7 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124999.5,      624998,     562666,      62332,     470844,      91822,   0.786126,   1.800000,   2.000000,   2.500000,   0.545737,   0.167000,   4.396000, 669.489655
Outstanding requests per worker:
6 10 10 36 7 8 8 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562803,      62238,     476302,      86501,   0.831009,   1.900000,   2.100000,   2.600000,   0.597995,   0.169000,   4.711000, 680.006651
Outstanding requests per worker:
9 5 8 37 6 12 12 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:03   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 120384 pts/0   Sl+  09:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313011656      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
        4023775384      L1-dcache-loads:u                                           
        1440497425      armv8_pmuv3_0/l2d_cache/:u                                   
         444731388      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071032701 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2542924288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2526474752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2510025216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2493575680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056655.055079,       0.0,      250037,     225127,      24910,     146523,      78604,   0.422498,   0.600100,   0.665100,   0.828100,   0.137238,   0.000000,   2.621000, 465.198621
Outstanding requests per worker:
10 13 5 7 6 11 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562391,      62666,     416792,     145599,   0.485968,   0.677000,   0.756100,   0.935100,   0.152734,   0.081000,   2.584000, 563.819035
Outstanding requests per worker:
7 14 5 7 10 9 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562812,      62250,     441723,     121089,   0.543278,   0.766100,   0.870100,   1.400000,   0.198246,   0.084000,   2.546000, 612.550024
Outstanding requests per worker:
7 7 7 8 10 12 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562766,      62300,     455512,     107254,   0.605336,   0.869100,   1.100000,   1.700000,   0.253990,   0.058000,   2.694000, 639.660077
Outstanding requests per worker:
10 14 8 7 6 10 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.9,      625015,     562733,      62282,     464585,      98148,   0.723917,   1.400000,   1.700000,   2.100000,   0.393619,   0.174000,   3.117000, 657.781415
Outstanding requests per worker:
13 11 7 11 9 21 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     562074,      62945,     469867,      92207,   0.859802,   1.800000,   2.100000,   2.800000,   0.573066,   0.182000,   4.440000, 668.813784
Outstanding requests per worker:
15 37 9 8 10 27 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.7,      625059,     562741,      62318,     476201,      86540,   0.919678,   2.000000,   2.300000,   2.800000,   0.621148,   0.058000,   3.829000, 680.058259
Outstanding requests per worker:
7 21 10 9 14 44 8 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:04   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 113216 pts/0   Sl+  09:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         308999841      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4034258763      L1-dcache-loads:u                                           
        1429958999      armv8_pmuv3_0/l2d_cache/:u                                   
         429589148      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990683874 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2945774080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2929324544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2912875008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896425472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056704.055128,       0.0,      250035,     225060,      24975,     146349,      78711,   0.381381,   0.532100,   0.572100,   0.706100,   0.107765,   0.000000,   2.147000, 464.536999
Outstanding requests per worker:
8 8 6 10 9 7 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562608,      62444,     416948,     145660,   0.450941,   0.624100,   0.699100,   0.872100,   0.143508,   0.087000,   2.199000, 563.969234
Outstanding requests per worker:
9 7 6 11 6 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562278,      62777,     441932,     120346,   0.494094,   0.686100,   0.784000,   0.990100,   0.170660,   0.160000,   2.521000, 613.019974
Outstanding requests per worker:
7 10 8 8 9 9 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.1,      625061,     562371,      62690,     454467,     107904,   0.542459,   0.748100,   0.862100,   1.600000,   0.228713,   0.090000,   3.446000, 638.297067
Outstanding requests per worker:
8 8 10 18 6 11 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562926,      62123,     464330,      98596,   0.612361,   0.922100,   1.300000,   1.800000,   0.292451,   0.165000,   3.293000, 656.636615
Outstanding requests per worker:
10 6 10 10 5 9 7 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562333,      62690,     470502,      91831,   0.632123,   0.965100,   1.400000,   1.900000,   0.316678,   0.088000,   3.291000, 669.706537
Outstanding requests per worker:
8 14 8 17 6 10 9 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562355,      62698,     475822,      86533,   0.728605,   1.500000,   1.800000,   2.000000,   0.415345,   0.175000,   3.416000, 679.749361
Outstanding requests per worker:
7 7 8 7 10 7 12 30 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:05   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 113920 pts/0   Sl+  09:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315831897      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        4026371419      L1-dcache-loads:u                                           
        1445315478      armv8_pmuv3_0/l2d_cache/:u                                   
         465992087      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010520798 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2388587008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372137472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056753.055177,       0.0,      254023,     228749,      25274,     148132,      80617,   0.484864,   0.685100,   0.790100,   1.100000,   0.166234,   0.000000,   2.219000, 462.229675
Outstanding requests per worker:
11 7 7 9 8 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.7,      634949,     571626,      63323,     424052,     147574,   0.685934,   1.400000,   1.700000,   2.100000,   0.398695,   0.054000,   2.630000, 564.944591
Outstanding requests per worker:
22 7 10 9 16 9 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.5,      634923,     571926,      62997,     449642,     122284,   0.901341,   2.000000,   2.200000,   2.700000,   0.604196,   0.089000,   3.493000, 613.881861
Outstanding requests per worker:
29 6 9 9 34 11 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571251,      63694,     462838,     108413,   1.082879,   2.600000,   3.000000,   3.600000,   0.842901,   0.225000,   4.651000, 640.042216
Outstanding requests per worker:
45 13 13 8 30 16 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571891,      63054,     472577,      99314,   1.276938,   3.200000,   3.400000,   3.900000,   1.049465,   0.076000,   5.128000, 658.462798
Outstanding requests per worker:
55 13 15 11 52 12 14 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571570,      63380,     479101,      92469,   1.398873,   3.400000,   3.800000,   4.600000,   1.175584,   0.176000,   6.274000, 671.173216
Outstanding requests per worker:
58 19 15 9 55 24 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.3,      634892,     571805,      63087,     484299,      87506,   1.674545,   4.000000,   4.400000,   5.100000,   1.324143,   0.215000,   6.357000, 680.954231
Outstanding requests per worker:
61 29 15 15 68 25 23 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:06   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 116352 pts/0   Sl+  09:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311773130      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4114095342      L1-dcache-loads:u                                           
        1452445845      armv8_pmuv3_0/l2d_cache/:u                                   
         439272160      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270657759 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2903765504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056802.055226,       0.0,      254013,     228684,      25329,     149115,      79569,   0.518813,   0.717100,   0.795100,   1.400000,   0.241011,   0.000000,   4.560000, 466.479767
Outstanding requests per worker:
10 7 8 14 6 9 13 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.9,      634930,     571259,      63671,     423440,     147819,   0.667458,   1.100000,   1.500000,   1.800000,   0.313802,   0.059000,   2.546000, 564.704138
Outstanding requests per worker:
12 7 11 34 9 12 13 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.1,      634951,     571569,      63382,     449202,     122367,   0.878072,   1.800000,   2.000000,   2.300000,   0.509736,   0.057000,   3.297000, 614.003293
Outstanding requests per worker:
10 9 10 39 7 14 16 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.7,      634944,     571375,      63569,     462864,     108511,   1.215940,   2.400000,   2.900000,   4.300000,   0.878641,   0.174000,   8.468000, 639.747824
Outstanding requests per worker:
13 13 10 47 7 9 28 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.9,      634985,     571749,      63236,     472576,      99173,   1.225792,   2.700000,   2.900000,   3.300000,   0.800021,   0.212000,   4.687000, 658.111383
Outstanding requests per worker:
15 9 12 32 16 11 30 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571572,      63406,     478843,      92729,   1.399841,   3.000000,   3.200000,   3.600000,   0.910177,   0.147000,   5.005000, 670.566950
Outstanding requests per worker:
16 12 12 43 11 10 30 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126970.3,      634852,     571408,      63444,     484819,      86589,   1.773544,   3.400000,   3.700000,   5.100000,   1.022455,   0.212000,   6.893000, 682.038477
Outstanding requests per worker:
35 27 36 47 25 33 33 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:06   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 121920 pts/0   Sl+  09:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  09:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         309867020      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4133964469      L1-dcache-loads:u                                           
        1454693607      armv8_pmuv3_0/l2d_cache/:u                                   
         442054497      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380423867 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056851.055275,       0.0,      254006,     228386,      25620,     148219,      80167,   0.473741,   0.664100,   0.776000,   1.200000,   0.170742,   0.000000,   2.052000, 463.699570
Outstanding requests per worker:
9 8 11 5 6 4 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.7,      634929,     571586,      63343,     423565,     148021,   0.615537,   0.927100,   1.500000,   2.000000,   0.326334,   0.057000,   3.306000, 564.118885
Outstanding requests per worker:
9 11 19 9 12 8 30 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571655,      63306,     449228,     122427,   0.837220,   1.800000,   2.000000,   2.300000,   0.536201,   0.211000,   3.429000, 612.866245
Outstanding requests per worker:
10 17 30 7 9 10 42 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571305,      63662,     463157,     108148,   1.022778,   2.300000,   2.700000,   3.200000,   0.752641,   0.214000,   4.372000, 640.071878
Outstanding requests per worker:
16 9 49 7 8 9 52 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.7,      634949,     571727,      63222,     472461,      99266,   1.136831,   2.700000,   2.900000,   3.200000,   0.832668,   0.198000,   4.250000, 658.068671
Outstanding requests per worker:
13 22 38 7 12 17 46 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.7,      634984,     571602,      63382,     478676,      92926,   1.215261,   3.000000,   3.200000,   3.500000,   0.946490,   0.186000,   4.974000, 670.018079
Outstanding requests per worker:
10 9 55 16 9 12 36 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.7,      634964,     571251,      63713,     483986,      87265,   1.403131,   3.200000,   3.500000,   4.100000,   1.052148,   0.101000,   5.195000, 681.018001
Outstanding requests per worker:
13 14 49 15 13 7 57 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:07   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117632 pts/0   Sl+  09:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320105666      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
        4116076948      L1-dcache-loads:u                                           
        1468165658      armv8_pmuv3_0/l2d_cache/:u                                   
         449103264      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.420231535 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2628252160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2611802624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2595353088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2578903552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2562454016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056899.055323,       0.0,      258101,     232156,      25945,     151328,      80828,   0.548201,   0.741100,   0.833100,   1.100000,   0.170310,   0.000000,   2.442000, 466.152342
Outstanding requests per worker:
6 8 9 10 10 11 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.5,      645158,     580577,      64581,     431314,     149263,   0.795824,   1.600000,   1.800000,   2.200000,   0.433926,   0.104000,   3.809000, 566.439843
Outstanding requests per worker:
15 10 10 28 14 17 9 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.7,      645184,     581012,      64172,     457016,     123996,   1.098394,   2.200000,   2.600000,   3.100000,   0.682084,   0.215000,   4.615000, 613.691857
Outstanding requests per worker:
10 24 13 46 15 20 13 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     580930,      64214,     470989,     109941,   1.549753,   2.800000,   3.000000,   3.400000,   0.776695,   0.175000,   4.925000, 640.973252
Outstanding requests per worker:
28 25 29 53 16 29 16 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.9,      645175,     580856,      64319,     480477,     100379,   1.995034,   3.100000,   3.500000,   4.100000,   0.766032,   0.211000,   5.063000, 658.830836
Outstanding requests per worker:
14 31 22 57 30 29 25 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.1,      645171,     580908,      64263,     486503,      94405,   2.237374,   3.800000,   4.100000,   4.500000,   0.881327,   0.295000,   5.305000, 670.273129
Outstanding requests per worker:
28 38 34 58 37 41 27 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.9,      645185,     580519,      64666,     492481,      88038,   2.588297,   4.100000,   4.400000,   5.000000,   0.953592,   0.727000,   6.477000, 682.414545
Outstanding requests per worker:
42 62 33 80 35 32 32 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:08   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117888 pts/0   Sl+  09:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316804062      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        4229697220      L1-dcache-loads:u                                           
        1489186247      armv8_pmuv3_0/l2d_cache/:u                                   
         451799783      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070972084 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2184638976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168189440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056948.055372,       0.0,      258086,     232503,      25583,     150994,      81509,   0.472972,   0.646000,   0.709100,   0.861100,   0.135287,   0.000000,   2.277000, 464.019092
Outstanding requests per worker:
10 12 8 10 8 12 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.3,      645212,     580423,      64789,     431363,     149060,   0.596248,   0.828100,   0.951100,   1.600000,   0.214792,   0.080000,   2.566000, 566.594460
Outstanding requests per worker:
12 14 8 11 11 17 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.3,      645207,     580608,      64599,     456976,     123632,   0.743513,   1.300000,   1.600000,   2.000000,   0.347340,   0.060000,   3.188000, 614.450366
Outstanding requests per worker:
12 24 14 12 8 28 11 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.3,      645192,     580381,      64811,     470572,     109809,   0.936378,   1.800000,   2.000000,   2.300000,   0.494916,   0.172000,   3.738000, 640.798589
Outstanding requests per worker:
10 30 13 14 10 33 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.5,      645198,     580864,      64334,     480555,     100309,   1.141708,   2.200000,   2.600000,   3.100000,   0.676204,   0.158000,   4.394000, 658.726580
Outstanding requests per worker:
13 40 13 13 11 29 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129008.5,      645043,     580472,      64571,     486745,      93727,   1.312008,   2.600000,   2.900000,   3.500000,   0.791804,   0.157000,   4.688000, 671.420489
Outstanding requests per worker:
24 62 50 43 31 42 36 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.5,      645233,     580891,      64342,     491985,      88906,   1.585370,   2.800000,   3.100000,   3.600000,   0.760794,   0.172000,   5.248000, 680.619843
Outstanding requests per worker:
28 53 29 21 24 54 29 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  09:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:09   0:00 /usr/lib/linux
memcache      7  290  0.0 428736 117824 pts/0   Sl+  09:09   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320199254      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        4184147938      L1-dcache-loads:u                                           
        1478167268      armv8_pmuv3_0/l2d_cache/:u                                   
         441172355      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.610169982 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2626613760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2610164224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2593714688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2577265152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2560815616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576056997.055421,       0.0,      258071,     232256,      25815,     151561,      80695,   0.778648,   1.300000,   1.700000,   6.700000,   0.992601,   0.000000,  12.568000, 466.251188
Outstanding requests per worker:
8 8 23 8 11 12 16 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.9,      645115,     580379,      64736,     431512,     148867,   1.121495,   2.200000,   2.600000,   3.100000,   0.704810,   0.217000,   3.963000, 566.673829
Outstanding requests per worker:
10 36 41 6 11 27 36 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.1,      645171,     580937,      64234,     457171,     123766,   1.582256,   3.000000,   3.300000,   3.700000,   0.967147,   0.173000,   5.047000, 613.641872
Outstanding requests per worker:
24 30 36 9 12 30 45 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.1,      645066,     580543,      64523,     471343,     109200,   2.190596,   4.000000,   4.500000,   5.600000,   1.270545,   0.234000,   7.653000, 641.635064
Outstanding requests per worker:
29 39 81 21 35 43 67 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580979,      64180,     480139,     100840,   2.631408,   4.500000,   5.000000,   6.200000,   1.257638,   0.210000,   8.233000, 657.934476
Outstanding requests per worker:
19 53 88 33 24 56 83 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.1,      645106,     580503,      64603,     486936,      93567,   3.340167,   6.200000,   7.300000,   9.600000,   1.922422,   0.339000,  12.365000, 671.867555
Outstanding requests per worker:
39 64 80 32 41 64 129 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128979.7,      644899,     580018,      64881,     491863,      88155,   4.438211,  10.100000,  12.800000,  16.300000,   3.554267,   0.726000,  18.035000, 682.427195
Outstanding requests per worker:
48 63 219 36 33 66 273 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:10   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 112448 pts/0   Sl+  09:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  09:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324002118      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        4238601164      L1-dcache-loads:u                                           
        1501577993      armv8_pmuv3_0/l2d_cache/:u                                   
         477830446      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850657255 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2858545664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2842096128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576057045.055469,       0.0,      258098,     232163,      25935,     151697,      80466,   0.558701,   0.768100,   0.841100,   1.200000,   0.171061,   0.000000,   2.206000, 466.790703
Outstanding requests per worker:
10 12 6 10 10 10 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.7,      645189,     580708,      64481,     431028,     149680,   0.761988,   1.300000,   1.700000,   2.000000,   0.357217,   0.091000,   3.476000, 565.587199
Outstanding requests per worker:
12 11 11 28 9 13 11 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.3,      645127,     580686,      64441,     457310,     123376,   1.088528,   2.000000,   2.400000,   3.100000,   0.630503,   0.132000,   4.552000, 615.516251
Outstanding requests per worker:
30 25 25 23 12 10 7 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     581100,      64081,     471306,     109794,   1.583018,   2.800000,   3.100000,   4.000000,   0.838257,   0.054000,   7.145000, 641.012848
Outstanding requests per worker:
9 26 32 20 13 23 32 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.1,      645161,     581178,      63983,     480254,     100924,   1.875645,   3.000000,   3.300000,   4.100000,   0.832452,   0.188000,   6.360000, 658.414075
Outstanding requests per worker:
16 32 32 58 10 28 40 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.7,      645154,     580730,      64424,     487282,      93448,   2.137485,   3.200000,   3.400000,   3.800000,   0.688644,   0.175000,   5.109000, 671.600245
Outstanding requests per worker:
22 33 30 51 31 22 56 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129043.5,      645218,     581051,      64167,     492949,      88102,   2.488656,   3.800000,   4.100000,   4.900000,   0.904527,   0.724000,   6.871000, 681.841976
Outstanding requests per worker:
24 29 31 56 34 31 42 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  09:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:10   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117696 pts/0   Sl+  09:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  09:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316820889      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4235708033      L1-dcache-loads:u                                           
        1490380875      armv8_pmuv3_0/l2d_cache/:u                                   
         460930161      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.409570708 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2591748608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575299072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2558849536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576057094.055518,       0.0,      258015,     232306,      25709,     151159,      81147,   0.649528,   0.951100,   1.500000,   2.000000,   0.330916,   0.000000,   3.382000, 466.198290
Outstanding requests per worker:
49 12 11 12 28 9 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.1,      645121,     580603,      64518,     431408,     149195,   1.116876,   2.600000,   3.000000,   3.400000,   0.811400,   0.055000,   4.754000, 566.235901
Outstanding requests per worker:
47 24 9 14 55 24 7 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129007.7,      645039,     580549,      64490,     456938,     123611,   1.620495,   3.700000,   4.100000,   4.800000,   1.188557,   0.057000,   6.369000, 615.014195
Outstanding requests per worker:
93 26 34 50 63 24 27 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129051.3,      645257,     580695,      64562,     471041,     109654,   2.225555,   4.500000,   4.900000,   5.500000,   1.321031,   0.207000,   7.590000, 641.437741
Outstanding requests per worker:
97 25 29 25 81 37 9 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.9,      645095,     580826,      64269,     480341,     100485,   2.852769,   5.800000,   6.800000,  10.600000,   2.083188,   0.216000,  12.669000, 658.118116
Outstanding requests per worker:
123 28 20 38 104 45 24 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128923.7,      644619,     579902,      64717,     486802,      93100,   5.133871,  15.400000,  19.100000,  25.400000,   5.922339,   0.358000,  29.123999, 672.590996
Outstanding requests per worker:
338 32 34 34 455 21 25 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128758.7,      643794,     579058,      64736,     491461,      87597,  12.542800,  45.800000,  57.800000,  68.200000,  19.155674,   0.727000,  73.126003, 682.179523
Outstanding requests per worker:
975 45 38 51 1174 42 31 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:11   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 123264 pts/0   Sl+  09:11   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322036724      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4234410127      L1-dcache-loads:u                                           
        1496472864      armv8_pmuv3_0/l2d_cache/:u                                   
         447879047      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310975778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2657284608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2640835072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576057143.055567,       0.0,      262250,     236001,      26249,     154756,      81245,   0.787023,   1.500000,   1.800000,   2.200000,   0.546443,   0.000000,   8.769000, 469.770035
Outstanding requests per worker:
36 9 12 16 33 14 17 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131114.7,      655574,     590173,      65401,     438962,     151211,   1.482620,   2.600000,   2.900000,   3.500000,   0.749733,   0.090000,   5.139000, 567.471562
Outstanding requests per worker:
57 62 40 29 52 60 37 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131163.1,      655816,     589737,      66079,     464172,     125565,   2.141344,   3.200000,   3.500000,   4.200000,   0.761385,   0.169000,   5.090000, 615.580730
Outstanding requests per worker:
55 65 46 25 62 25 29 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131149.3,      655747,     590427,      65320,     479142,     111285,   2.678152,   4.000000,   4.200000,   4.700000,   0.835574,   0.806000,   6.371000, 641.758246
Outstanding requests per worker:
62 43 52 26 61 53 27 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131129.3,      655647,     590147,      65500,     488038,     102109,   3.541863,   6.200000,   7.100000,   9.600000,   1.717897,   0.729000,  11.823000, 658.762890
Outstanding requests per worker:
85 74 39 50 94 62 44 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131133.1,      655666,     590023,      65643,     494918,      95105,   4.232030,   8.600000,   9.600000,  11.100000,   2.362417,   0.840000,  13.144000, 672.110894
Outstanding requests per worker:
155 65 49 55 125 72 46 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131012.9,      655065,     589461,      65604,     500154,      89307,   6.239732,  15.200000,  20.300000,  25.300000,   5.688212,   1.194000,  27.679000, 682.076285
Outstanding requests per worker:
408 73 91 84 426 96 95 63 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  09:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   09:12   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 126720 pts/0   Sl+  09:12   2:07 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  09:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323583406      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4327214356      L1-dcache-loads:u                                           
        1525554755      armv8_pmuv3_0/l2d_cache/:u                                   
         477272897      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.750598105 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3103126016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3086676480
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070226944
starting receive base loop
num_worker_connections 1
Creating worker on tid 3053777408
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037327872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576057192.055616,       0.0,      262149,     236020,      26129,     153858,      82162,   1.347218,   3.000000,   3.300000,   3.900000,   0.950399,   0.000000,   4.789000, 465.244873
Outstanding requests per worker:
24 10 57 15 26 29 60 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131106.1,      655531,     589579,      65952,     437896,     151683,   2.741919,   5.500000,   6.000000,   7.500000,   1.617066,   0.237000,  10.033000, 566.193355
Outstanding requests per worker:
43 45 121 34 20 47 130 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130983.9,      654920,     589589,      65331,     464639,     124950,   6.177706,  15.600000,  26.600000,  32.700000,   7.468793,   0.763000,  35.985000, 615.711572
Outstanding requests per worker:
41 47 553 26 53 54 559 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130789.1,      653946,     588732,      65214,     477830,     110902,  17.038757,  62.000000,  73.200000,  84.500000,  25.131891,   0.896000,  90.329997, 641.990544
Outstanding requests per worker:
45 89 1472 47 65 92 1363 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130801.9,      654010,     588246,      65764,     486350,     101896,  31.127162, 121.000000, 127.400000, 137.700000,  47.784873,   1.696000, 144.584000, 658.570584
Outstanding requests per worker:
60 121 2182 58 71 77 2365 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130877.1,      654386,     589096,      65290,     495083,      94013,  43.851869, 165.900000, 173.600000, 182.900000,  67.687607,   1.681000, 186.197996, 673.049121
Outstanding requests per worker:
54 121 2928 74 59 82 3028 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130867.5,      654338,     588908,      65430,     499835,      89073,  54.399043, 201.000000, 213.800000, 228.100000,  84.048648,   1.794000, 231.051996, 682.965777
Outstanding requests per worker:
102 335 3360 77 98 110 3729 88 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   09:13   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 121472 pts/0   Sl+  09:13   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323293354      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4320485951      L1-dcache-loads:u                                           
        1520511078      armv8_pmuv3_0/l2d_cache/:u                                   
         467659764      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.330139634 seconds time elapsed

