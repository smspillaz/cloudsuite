+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2950033920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2933584384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2917134848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2900685312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032749.031173,       0.0,      181571,     163287,      18284,     103743,      59544,   2.957286,   5.400000,   5.700000,   6.100000,   1.960108,   0.000000,   7.957000, 447.988499
Outstanding requests per worker:
56 57 0 49 65 0 40 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90760.5,      453803,     408545,      45258,     295872,     112673,   7.009481,  19.500000,  22.500000,  25.900000,   6.747166,   0.045000,  30.387999, 545.341062
Outstanding requests per worker:
74 276 0 60 295 0 66 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90424.5,      452123,     406673,      45450,     312187,      94486,  23.956352,  70.100000,  80.800000,  95.900000,  28.079541,   0.045000, 102.476001, 593.544007
Outstanding requests per worker:
80 1140 61 92 926 59 87 1111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90269.9,      451350,     406480,      44870,     321684,      84796,  54.841190, 151.200000, 163.300000, 179.300000,  61.904476,   0.044000, 187.643006, 618.898061
Outstanding requests per worker:
264 2123 7 321 1898 5 288 1879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90153.3,      450767,     405790,      44977,     327547,      78243,  94.673274, 220.100000, 229.600000, 257.200000,  89.520198,   0.045000, 266.256988, 637.055043
Outstanding requests per worker:
680 3017 0 862 2602 0 880 2563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90135.7,      450679,     405755,      44924,     332569,      73186, 137.675552, 278.900000, 298.300000, 316.300000, 109.257492,   0.045000, 323.105991, 649.667356
Outstanding requests per worker:
1202 3652 0 1747 3285 0 1468 3169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90167.1,      450836,     405700,      45136,     336578,      69122, 180.511840, 336.700000, 343.100000, 359.300000, 127.446632,   0.044000, 363.905013, 661.736170
Outstanding requests per worker:
1781 4112 0 2473 3892 0 2176 3821 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:25   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 93504 pts/0    Sl+  02:25   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243307491      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2943169398      L1-dcache-loads:u                                           
        1181349780      armv8_pmuv3_0/l2d_cache/:u                                   
         373785011      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909866009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3127177728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110728192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032797.031221,       0.0,      181375,     163124,      18251,     103630,      59494,   9.990931,  34.800000,  43.100000,  49.700000,  13.677187,   0.000000,  53.915001, 448.374004
Outstanding requests per worker:
83 118 0 87 96 0 56 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90294.7,      451474,     405869,      45605,     293227,     112642,  26.937568,  68.400000,  80.800000,  91.900000,  26.019568,   0.042000,  99.590003, 544.260072
Outstanding requests per worker:
418 633 0 452 815 0 486 797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89643.1,      448216,     403156,      45060,     309124,      94032,  79.601405, 151.100000, 174.900000, 183.800000,  56.856547,   0.042000, 190.599993, 592.412738
Outstanding requests per worker:
1276 1662 0 1383 2116 0 1485 2033 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89508.7,      447544,     402737,      44807,     318721,      84016, 146.562105, 253.800000, 269.400000, 293.200000,  93.744194,   0.041000, 314.489007, 618.981852
Outstanding requests per worker:
2207 3084 0 2264 3428 0 2446 3561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89878.5,      449393,     404461,      44932,     326735,      77726, 208.303446, 338.400000, 356.100000, 371.300000, 127.625595,   0.042000, 403.081000, 637.518038
Outstanding requests per worker:
3112 3968 0 3089 4338 0 3108 4572 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90082.7,      450414,     405411,      45003,     332280,      73131, 260.445119, 417.900000, 433.300000, 460.700000, 158.124781,   0.042000, 469.815999, 650.300811
Outstanding requests per worker:
3704 4712 1 3607 5242 0 3826 5280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90001.7,      450009,     405105,      44904,     336097,      69008, 307.047781, 491.400000, 519.400000, 538.600000, 186.817347,   0.041000, 566.128016, 661.083415
Outstanding requests per worker:
4371 5445 0 4321 6415 0 4449 5932 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:26   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 96640 pts/0    Sl+  02:26   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241586045      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2933341793      L1-dcache-loads:u                                           
        1185447573      armv8_pmuv3_0/l2d_cache/:u                                   
         369487469      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.866242415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3168989696
starting receive base loop
num_worker_connections 1
Creating worker on tid 3152540160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3136090624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119641088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103191552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032846.031270,       0.0,      181623,     163442,      18181,     103848,      59594,  16.766446,  46.500000,  50.300000,  52.900000,  17.804842,   0.000000,  54.669999, 448.456058
Outstanding requests per worker:
457 432 0 398 268 0 404 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90293.5,      451468,     406275,      45193,     293630,     112645,  75.396625, 148.500000, 162.000000, 174.700000,  55.588671,   0.045000, 180.483997, 543.677792
Outstanding requests per worker:
1929 1756 0 1858 1624 0 1627 1883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90439.7,      452199,     406808,      45391,     312396,      94412, 164.579744, 262.300000, 281.400000, 308.800000, 101.725755,   0.045000, 314.188987, 593.391674
Outstanding requests per worker:
3491 3035 0 3155 2788 0 2673 3130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90632.5,      453163,     408005,      45158,     322835,      85170, 240.771466, 372.400000, 388.100000, 413.400000, 144.416284,   0.043000, 419.328988, 619.548979
Outstanding requests per worker:
4630 4152 0 4290 4088 2 3713 4031 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90431.5,      452158,     406742,      45416,     328954,      77788, 313.109602, 463.600000, 484.000000, 522.300000, 186.218014,   0.043000, 547.694027, 638.293680
Outstanding requests per worker:
6289 5356 0 5587 5009 0 5113 5182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90671.9,      453360,     408226,      45134,     334867,      73359, 382.760627, 559.100000, 597.400000, 634.500000, 226.859121,   0.044000, 676.244020, 651.781969
Outstanding requests per worker:
7735 6372 0 6657 5779 0 6130 6295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90724.7,      453624,     408407,      45217,     339381,      69026, 448.176100, 669.500000, 706.400000, 739.300000, 265.810958,   0.044000, 768.764019, 662.725646
Outstanding requests per worker:
8794 7277 0 7951 6703 0 7225 7189 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:27   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 93504 pts/0    Sl+  02:27   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245652977      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2955905331      L1-dcache-loads:u                                           
        1195815471      armv8_pmuv3_0/l2d_cache/:u                                   
         375685663      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.891884986 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2455302656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2438853120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032894.031318,       0.0,      182755,     164452,      18303,     104456,      59996,  10.348716,  42.000000,  47.000000,  49.300000,  16.156083,   0.000000,  51.561002, 448.177803
Outstanding requests per worker:
37 464 0 75 298 0 49 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91180.9,      455905,     410045,      45860,     296569,     113476,  38.060176, 118.600000, 145.200000, 149.200000,  49.693826,   0.043000, 154.378995, 543.325447
Outstanding requests per worker:
97 1627 0 91 1538 0 89 1680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91018.9,      455095,     409626,      45469,     314903,      94723,  86.149443, 239.200000, 255.400000, 271.100000, 100.316859,   0.042000, 277.240992, 594.119199
Outstanding requests per worker:
395 2724 0 275 2842 0 522 3074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90847.7,      454239,     408931,      45308,     324068,      84863, 142.937953, 339.400000, 366.400000, 374.700000, 140.576000,   0.042000, 380.560011, 620.099178
Outstanding requests per worker:
1140 3713 0 1023 4173 0 1155 4205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90723.3,      453617,     408269,      45348,     329953,      78316, 205.691189, 440.100000, 463.600000, 474.100000, 174.029816,   0.043000, 479.339004, 637.854995
Outstanding requests per worker:
2133 4916 0 1667 5505 0 2053 5341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90530.3,      452652,     407483,      45169,     334657,      72826, 271.735285, 544.100000, 563.800000, 585.800000, 209.945092,   0.042000, 621.209025, 652.223995
Outstanding requests per worker:
2943 6500 0 2542 7126 0 2852 6792 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90830.3,      454152,     408827,      45325,     339426,      69401, 334.136185, 655.000000, 668.100000, 696.600000, 248.787536,   0.042000, 735.503972, 662.400142
Outstanding requests per worker:
3465 7597 0 3295 8436 1 3584 8029 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:28   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 93504 pts/0    Sl+  02:28   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246350845      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2966327463      L1-dcache-loads:u                                           
        1199788960      armv8_pmuv3_0/l2d_cache/:u                                   
         385772798      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999779588 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2389176832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372727296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032942.031366,       0.0,      183934,     165679,      18255,     104812,      60867,  14.915209,  52.300000,  54.600000,  58.000000,  19.916444,   0.000000,  61.168998, 447.065645
Outstanding requests per worker:
285 541 0 152 590 0 120 489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91382.5,      456913,     411219,      45694,     297458,     113761,  71.340957, 161.400000, 193.200000, 211.200000,  63.508458,   0.042000, 215.800002, 544.595819
Outstanding requests per worker:
1145 2252 0 1163 2461 0 1181 2202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91467.9,      457340,     411565,      45775,     315531,      96034, 159.357035, 313.700000, 322.200000, 350.200000, 112.520985,   0.042000, 354.117006, 592.953973
Outstanding requests per worker:
2239 3694 0 2401 3931 1 2254 3693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91583.3,      457917,     412320,      45597,     326965,      85355, 242.580311, 446.600000, 459.300000, 467.200000, 162.275828,   0.041000, 471.114010, 620.519858
Outstanding requests per worker:
3317 5078 0 3232 5383 0 3183 5267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91684.1,      458421,     412505,      45916,     333808,      78697, 313.824312, 544.400000, 572.800000, 587.100000, 205.687282,   0.042000, 590.764999, 638.603067
Outstanding requests per worker:
4225 6359 1 3845 6818 0 4147 6824 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91476.9,      457385,     411545,      45840,     337725,      73820, 382.810790, 662.500000, 699.300000, 709.700000, 251.283913,   0.041000, 759.427011, 651.736036
Outstanding requests per worker:
5040 7983 0 4604 8520 0 5023 8808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91663.7,      458319,     412609,      45710,     343040,      69569, 456.580130, 806.100000, 823.400000, 854.100000, 302.414197,   0.042000, 898.792982, 663.457617
Outstanding requests per worker:
5877 9524 0 5326 9950 0 5734 10405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:29   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 94848 pts/0    Sl+  02:29   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247121051      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2971786133      L1-dcache-loads:u                                           
        1195654854      armv8_pmuv3_0/l2d_cache/:u                                   
         364936369      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890771625 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2897998336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2881548800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2865099264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848649728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832200192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032991.031415,       0.0,      182564,     164254,      18310,     104460,      59794,  22.140160,  65.000000,  70.900000,  75.800000,  24.702052,   0.000000,  78.144997, 448.861605
Outstanding requests per worker:
657 415 0 876 280 0 889 431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90981.7,      454909,     409411,      45498,     295157,     114254,  97.879873, 220.800000, 235.900000, 250.100000,  78.111464,   0.045000, 254.810005, 542.310744
Outstanding requests per worker:
2743 1640 0 2743 1679 0 2910 2075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91244.7,      456224,     410382,      45842,     314951,      95431, 200.801227, 369.800000, 395.500000, 398.600000, 133.286739,   0.044000, 401.627004, 593.238276
Outstanding requests per worker:
4349 2892 0 4632 3007 0 4589 3258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91286.9,      456435,     410894,      45541,     324974,      85920, 297.322325, 525.900000, 544.800000, 547.400000, 191.811529,   0.044000, 550.279021, 618.598524
Outstanding requests per worker:
6116 4243 0 6376 3906 0 6344 4476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91146.5,      455733,     410091,      45642,     331466,      78625, 384.913661, 663.400000, 688.900000, 693.800000, 248.055368,   0.044000, 733.022988, 638.281840
Outstanding requests per worker:
8217 5231 0 8502 4845 0 8523 5553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91333.1,      456666,     411025,      45641,     337192,      73833, 474.523202, 808.700000, 843.800000, 861.400000, 306.551497,   0.044000, 904.536009, 651.510091
Outstanding requests per worker:
9995 6358 0 10123 5868 0 10468 6543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91345.7,      456729,     411019,      45710,     341061,      69958, 565.251787, 958.300000, 992.400000, 1014.700000, 363.642925,   0.043000, 1046.820045, 661.191804
Outstanding requests per worker:
11631 7515 0 11811 7091 0 12146 7593 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:30   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 96768 pts/0    Sl+  02:30   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  02:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246162364      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2971091575      L1-dcache-loads:u                                           
        1205740037      armv8_pmuv3_0/l2d_cache/:u                                   
         377050612      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030878462 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2565730816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2549281280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2532831744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2516382208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2499932672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033039.031463,       0.0,      184695,     166102,      18593,     105564,      60538,   8.326092,  24.800000,  32.200000,  39.200000,  10.079335,   0.000000,  42.249002, 447.793440
Outstanding requests per worker:
484 52 0 364 64 0 406 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91995.5,      459978,     414115,      45863,     299916,     114199,  41.808485, 132.600000, 150.000000, 166.600000,  52.174379,   0.042000, 174.299002, 545.434087
Outstanding requests per worker:
2028 181 0 1967 159 0 1861 405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91949.7,      459749,     413604,      46145,     317971,      95633,  98.358453, 249.100000, 261.300000, 279.400000,  99.881914,   0.045000, 291.842014, 594.700907
Outstanding requests per worker:
3257 831 0 3396 480 0 3038 1014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91774.9,      458875,     413169,      45706,     327306,      85863, 160.221908, 353.600000, 368.200000, 377.700000, 137.911835,   0.043000, 386.725008, 620.597978
Outstanding requests per worker:
4404 1579 152 4476 1361 126 4395 1829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91201.7,      456009,     410607,      45402,     332572,      78035, 238.190052, 441.500000, 452.900000, 467.000000, 169.392416,   0.043000, 473.098010, 639.335579
Outstanding requests per worker:
5198 3694 0 5472 3467 1 5492 4136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91397.5,      456988,     411292,      45696,     337853,      73439, 329.657628, 535.700000, 549.100000, 569.300000, 204.874913,   0.042000, 576.354027, 652.323174
Outstanding requests per worker:
6392 5379 0 6553 4895 0 6678 5729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91457.5,      457288,     411666,      45622,     342765,      68901, 416.160513, 631.400000, 643.400000, 664.800000, 249.437707,   0.043000, 675.899029, 664.358529
Outstanding requests per worker:
7467 6793 0 7579 6377 0 7847 7416 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:30   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 95936 pts/0    Sl+  02:30   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245872735      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2991434657      L1-dcache-loads:u                                           
        1204609618      armv8_pmuv3_0/l2d_cache/:u                                   
         366945891      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980322016 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2927030784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910581248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894131712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033088.031512,       0.0,      185147,     166675,      18472,     105630,      61045,  21.112554,  68.900000,  71.800000,  77.800000,  27.412344,   0.000000,  80.792002, 446.929510
Outstanding requests per worker:
210 942 0 136 847 1 151 868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92198.5,      460993,     415079,      45914,     300182,     114897,  91.482173, 249.400000, 255.000000, 275.000000,  88.795519,   0.042000, 280.663013, 544.575929
Outstanding requests per worker:
1349 2971 0 1110 2998 0 1059 3285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92069.3,      460347,     414366,      45981,     318001,      96365, 194.323047, 405.900000, 423.800000, 442.800000, 150.978497,   0.041000, 463.600993, 593.186171
Outstanding requests per worker:
2361 5037 0 2292 5273 1 2641 5464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92336.3,      461682,     415581,      46101,     328827,      86754, 286.754175, 558.000000, 563.600000, 574.800000, 204.786048,   0.041000, 618.999004, 618.916483
Outstanding requests per worker:
3456 7085 0 3539 7262 1 3478 7179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92600.9,      463005,     416921,      46084,     337383,      79538, 371.043013, 698.600000, 711.600000, 738.600000, 259.617372,   0.042000, 767.724991, 638.849127
Outstanding requests per worker:
4346 8706 0 4429 9024 1 4399 8714 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92544.3,      462722,     416436,      46286,     341921,      74515, 453.090831, 841.500000, 871.300000, 891.600000, 316.972240,   0.042000, 931.034029, 652.665317
Outstanding requests per worker:
5257 10335 0 5266 10926 0 5248 10499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92551.7,      462759,     416587,      46172,     346219,      70368, 538.081860, 990.600000, 1015.400000, 1050.700000, 376.566321,   0.042000, 1060.945034, 662.763269
Outstanding requests per worker:
6068 12152 0 6327 12444 1 6170 12260 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:31   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 92096 pts/0    Sl+  02:31   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250800168      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2984900894      L1-dcache-loads:u                                           
        1200748554      armv8_pmuv3_0/l2d_cache/:u                                   
         379224859      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880701468 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2767254016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2750804480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2734354944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717905408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701455872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033136.031560,       0.0,      184966,     166397,      18569,     105703,      60694,  21.398479,  69.900000,  73.200000,  80.200000,  27.671789,   0.000000,  84.279999, 448.662662
Outstanding requests per worker:
837 306 0 890 156 0 977 174 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92029.5,      460148,     413802,      46346,     299582,     114220,  98.314787, 265.800000, 275.200000, 281.600000,  92.530014,   0.044000, 285.306990, 545.296217
Outstanding requests per worker:
3301 1518 0 3177 1343 0 3316 1167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92142.1,      460711,     414586,      46125,     318729,      95857, 203.504699, 421.500000, 440.800000, 452.900000, 154.926021,   0.043000, 468.694001, 594.893084
Outstanding requests per worker:
5522 2791 0 5178 2443 0 5436 2371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92138.1,      460691,     414707,      45984,     328573,      86134, 299.369493, 583.000000, 606.200000, 612.100000, 216.743200,   0.044000, 659.362018, 620.450036
Outstanding requests per worker:
7730 3889 0 7470 3580 0 7697 3310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92516.1,      462581,     416344,      46237,     336702,      79642, 390.615829, 741.500000, 753.200000, 791.700000, 277.203940,   0.044000, 803.618014, 638.462224
Outstanding requests per worker:
9435 4789 0 9353 4597 0 9351 4189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92473.1,      462366,     416527,      45839,     342523,      74004, 476.943210, 895.200000, 909.600000, 953.700000, 336.625385,   0.044000, 967.339993, 654.020510
Outstanding requests per worker:
11291 5763 0 11198 5611 0 10968 5147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92530.5,      462653,     416529,      46124,     346190,      70339, 560.485160, 1039.600000, 1053.800000, 1094.400000, 392.016772,   0.042000, 1113.165021, 663.480867
Outstanding requests per worker:
13089 6639 0 12868 6570 0 12687 6115 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:32   0:00 /usr/lib/linux
memcache      7  206  0.0 327104 96704 pts/0    Sl+  02:32   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246978247      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3016616951      L1-dcache-loads:u                                           
        1219878815      armv8_pmuv3_0/l2d_cache/:u                                   
         391404231      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151579470 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2147611136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131161600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114712064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098262528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033185.031609,       0.0,      184283,     165839,      18444,     105988,      59851,  31.369101,  74.200000,  88.000000, 101.200000,  29.217648,   0.000000, 110.151999, 451.167180
Outstanding requests per worker:
1291 840 1 1211 814 0 1152 950 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92278.5,      461393,     415214,      46179,     299987,     115227, 146.022533, 273.300000, 297.300000, 326.000000, 102.037580,   0.042000, 343.286008, 544.537475
Outstanding requests per worker:
4061 2975 131 3878 3103 119 3629 3213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93091.3,      465457,     418695,      46762,     321343,      97352, 275.402817, 446.600000, 472.100000, 500.200000, 169.423633,   0.043000, 510.195017, 593.632415
Outstanding requests per worker:
6046 4644 0 5872 4671 0 5573 5058 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93208.1,      466041,     419722,      46319,     332527,      87195, 386.200431, 593.000000, 617.600000, 651.300000, 232.394471,   0.042000, 663.779020, 621.314603
Outstanding requests per worker:
7874 6513 0 7441 6197 0 7179 6850 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93366.3,      466832,     420177,      46655,     340578,      79599, 488.360094, 727.900000, 755.200000, 781.100000, 289.981205,   0.041000, 791.894019, 640.014768
Outstanding requests per worker:
9423 7982 0 9180 7860 0 8610 8399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93366.7,      466834,     420065,      46769,     345431,      74634, 584.126265, 859.300000, 886.500000, 924.100000, 345.360113,   0.042000, 939.285994, 653.849540
Outstanding requests per worker:
11179 9596 1 10650 9494 0 10014 9929 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93366.3,      466832,     420100,      46732,     348945,      71155, 685.407626, 994.900000, 1015.100000, 1054.000000, 403.834983,   0.042000, 1065.086961, 662.842478
Outstanding requests per worker:
12672 11322 1 12109 10961 0 11424 11763 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:33   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93760 pts/0    Sl+  02:33   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248353636      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3036700558      L1-dcache-loads:u                                           
        1209754796      armv8_pmuv3_0/l2d_cache/:u                                   
         389026314      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.991027251 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3062362624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045913088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029463552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033233.031657,       0.0,      182053,     164016,      18037,     104441,      59575,  42.375970,  86.100000,  91.700000, 147.100000,  36.879920,   0.000000, 153.504997, 449.672130
Outstanding requests per worker:
1810 951 0 1801 1096 0 1710 1125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92178.1,      460891,     414522,      46369,     300322,     114200, 165.622307, 308.700000, 316.300000, 367.100000, 113.209055,   0.042000, 381.891012, 545.494741
Outstanding requests per worker:
4375 3354 0 4524 3607 1 4423 3553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92883.5,      464418,     417919,      46499,     320372,      97547, 304.146574, 488.500000, 493.400000, 545.800000, 186.015176,   0.042000, 553.632975, 592.122576
Outstanding requests per worker:
6405 5304 0 6516 5606 0 6583 5228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92972.7,      464864,     418566,      46298,     330822,      87744, 426.108674, 657.300000, 662.300000, 714.100000, 255.853509,   0.043000, 719.061017, 618.221117
Outstanding requests per worker:
8170 7275 0 8518 7511 0 8439 7095 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92974.7,      464874,     418297,      46577,     338128,      80169, 546.910414, 809.600000, 829.700000, 873.200000, 325.538970,   0.041000, 877.049029, 638.205696
Outstanding requests per worker:
9965 9221 0 10428 9643 0 10114 9002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93114.5,      465573,     418901,      46672,     344215,      74686, 663.329500, 955.500000, 965.800000, 1002.800000, 391.556037,   0.042000, 1005.977035, 651.806888
Outstanding requests per worker:
11665 11261 0 11941 11593 0 11426 11130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93315.1,      466576,     420112,      46464,     349018,      71094, 772.907936, 1095.700000, 1109.400000, 1130.200000, 454.280301,   0.043000, 1135.727048, 662.035771
Outstanding requests per worker:
13024 13240 0 13405 13491 0 12861 12645 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:34   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 92160 pts/0    Sl+  02:34   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253453065      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
        3027430624      L1-dcache-loads:u                                           
        1226355854      armv8_pmuv3_0/l2d_cache/:u                                   
         384152597      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290725497 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2938106368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2921656832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905207296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033282.031706,       0.0,      183862,     165553,      18309,     105334,      60219,  43.962337, 110.700000, 118.300000, 129.600000,  42.779198,   0.000000, 139.298007, 448.192253
Outstanding requests per worker:
1645 1462 0 1514 1299 1 1575 1484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92761.7,      463809,     417429,      46380,     302566,     114863, 191.736951, 342.500000, 366.900000, 393.800000, 130.225293,   0.041000, 398.445010, 545.937002
Outstanding requests per worker:
4364 4636 0 4299 4555 1 4489 4785 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93836.5,      469183,     422165,      47018,     324373,      97792, 345.050020, 518.200000, 565.100000, 574.700000, 208.514623,   0.041000, 578.278005, 593.983281
Outstanding requests per worker:
6348 6926 1 6401 6933 1 6480 6827 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94068.5,      470343,     423475,      46868,     336135,      87340, 473.507711, 686.700000, 733.600000, 737.700000, 281.644499,   0.041000, 740.985990, 621.557062
Outstanding requests per worker:
8220 8761 0 8389 8910 1 8387 8880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94189.5,      470948,     423796,      47152,     343313,      80483, 589.366449, 850.900000, 871.400000, 886.200000, 348.284454,   0.041000, 889.330029, 640.021690
Outstanding requests per worker:
10322 10484 0 10458 10363 0 10289 10672 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94479.1,      472396,     425059,      47337,     349602,      75457, 699.397626, 992.600000, 1000.600000, 1009.000000, 410.795104,   0.040000, 1016.201019, 653.709485
Outstanding requests per worker:
12231 11859 1 12221 11777 0 12054 12008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94368.3,      471842,     425036,      46806,     353621,      71415, 798.659401, 1131.200000, 1140.800000, 1154.600000, 469.218038,   0.041000, 1170.408010, 664.253164
Outstanding requests per worker:
14087 13219 1 13985 13137 0 13916 13657 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:34   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 95424 pts/0    Sl+  02:34   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247339325      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3008489021      L1-dcache-loads:u                                           
        1187184692      armv8_pmuv3_0/l2d_cache/:u                                   
         378619485      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150390757 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2546659840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530210304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513760768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497311232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033331.031755,       0.0,      184680,     166164,      18516,     105230,      60934,  42.722067, 101.000000, 107.000000, 114.500000,  40.659955,   0.000000, 123.536997, 444.529832
Outstanding requests per worker:
1351 1243 0 1391 1393 0 1306 1476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92991.7,      464959,     418427,      46532,     302591,     115836, 182.566110, 338.700000, 351.800000, 355.900000, 123.725072,   0.041000, 360.662013, 544.333597
Outstanding requests per worker:
4301 4006 0 4326 4117 0 4297 4116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93796.3,      468982,     421999,      46983,     324362,      97637, 332.587815, 527.000000, 540.300000, 549.500000, 201.803383,   0.041000, 554.620981, 594.044341
Outstanding requests per worker:
6665 5980 0 6496 6328 1 6482 6206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93969.7,      469849,     423223,      46626,     335361,      87862, 462.884372, 694.000000, 701.000000, 707.900000, 275.864927,   0.041000, 717.270017, 620.278236
Outstanding requests per worker:
8467 8067 0 8433 8613 1 8386 8294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93908.5,      469543,     422806,      46737,     341858,      80948, 582.423490, 843.900000, 862.100000, 872.000000, 344.776049,   0.041000, 898.651004, 638.638884
Outstanding requests per worker:
10830 10052 0 10572 10634 1 10558 10060 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93948.3,      469742,     422662,      47080,     347288,      75374, 701.380947, 999.200000, 1020.500000, 1031.100000, 414.190301,   0.042000, 1073.819995, 652.562570
Outstanding requests per worker:
12879 12193 0 12663 12429 0 12627 12135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94238.1,      471191,     424446,      46745,     352171,      72275, 820.549144, 1159.900000, 1172.900000, 1189.300000, 482.506886,   0.041000, 1218.788981, 661.975962
Outstanding requests per worker:
14657 14177 0 14148 14401 1 14321 14000 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:35   0:00 /usr/lib/linux
memcache      8  202  0.0 331200 94272 pts/0    Sl+  02:35   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253828108      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3056353591      L1-dcache-loads:u                                           
        1232686388      armv8_pmuv3_0/l2d_cache/:u                                   
         368760800      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410669239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2435838464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033380.031804,       0.0,      184721,     166426,      18295,     106028,      60398,  52.991672, 130.000000, 143.200000, 159.900000,  50.016042,   0.000000, 195.400998, 449.739890
Outstanding requests per worker:
1135 2264 0 1274 2207 0 1207 2383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93732.5,      468663,     421374,      47289,     305505,     115869, 203.017228, 422.000000, 438.100000, 457.300000, 146.924028,   0.043000, 512.875974, 545.210215
Outstanding requests per worker:
3743 6148 0 3912 6047 0 3565 6244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94713.5,      473568,     426022,      47546,     327407,      98615, 367.611725, 663.000000, 679.800000, 722.400000, 240.850206,   0.043000, 748.798013, 594.591899
Outstanding requests per worker:
5633 9093 0 5848 8811 1 5584 8984 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95059.1,      475296,     428024,      47272,     339541,      88483, 503.992292, 856.900000, 872.300000, 912.200000, 320.986943,   0.042000, 939.234018, 620.772380
Outstanding requests per worker:
7473 11420 0 7861 11074 0 7514 11147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94711.9,      473560,     426367,      47193,     345136,      81231, 629.255347, 1031.300000, 1061.200000, 1121.300000, 393.253952,   0.043000, 1133.492947, 639.741221
Outstanding requests per worker:
9315 11630 0 9823 13807 0 9506 11688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94466.7,      472334,     425125,      47209,     350222,      74903, 727.421014, 1147.700000, 1286.300000, 1332.900000, 448.491361,   0.043000, 1392.761946, 654.572006
Outstanding requests per worker:
11177 10996 0 11704 15722 0 11421 11925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94243.7,      471219,     424173,      47046,     353483,      70690, 803.476905, 1320.400000, 1372.600000, 1415.500000, 488.167290,   0.042000, 1448.807001, 664.996181
Outstanding requests per worker:
13223 11132 0 13442 15313 0 13328 12294 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:36   0:00 /usr/lib/linux
memcache      8  212  0.0 330176 94656 pts/0    Sl+  02:36   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254499970      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3081457111      L1-dcache-loads:u                                           
        1239078671      armv8_pmuv3_0/l2d_cache/:u                                   
         374848057      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800788473 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3109089792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033429.031853,       0.0,      187045,     168537,      18508,     107233,      61304,  40.624305,  98.900000, 114.300000, 128.900000,  38.257366,   0.000000, 135.858998, 449.890261
Outstanding requests per worker:
969 1656 1 1243 1625 0 1092 1579 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94221.3,      471107,     423848,      47259,     306982,     116866, 173.703626, 328.200000, 358.900000, 381.900000, 121.634300,   0.040000, 391.245991, 546.079307
Outstanding requests per worker:
3481 4781 0 3736 4752 1 3567 4577 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95245.1,      476226,     428394,      47832,     330139,      98255, 315.380657, 514.500000, 537.400000, 560.200000, 194.462193,   0.041000, 567.839980, 595.784745
Outstanding requests per worker:
5222 6897 0 5551 6917 1 5259 6652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95100.1,      475501,     428255,      47246,     339732,      88523, 431.322916, 689.800000, 713.000000, 742.400000, 263.641466,   0.040000, 756.514013, 621.761324
Outstanding requests per worker:
7106 8874 1 7616 9201 0 7084 8958 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95138.3,      475692,     428382,      47310,     347170,      81212, 560.011271, 861.500000, 883.200000, 904.300000, 337.304985,   0.040000, 909.757972, 640.227358
Outstanding requests per worker:
9015 10814 1 9714 11077 0 9311 11066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95411.1,      477056,     429740,      47316,     353533,      76207, 675.525274, 1004.200000, 1018.900000, 1037.100000, 401.685944,   0.041000, 1048.967004, 653.295223
Outstanding requests per worker:
10933 12489 1 11681 12722 0 11195 12780 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95599.9,      478000,     430241,      47759,     357993,      72248, 780.351563, 1127.600000, 1145.300000, 1166.700000, 460.384255,   0.040000, 1177.173972, 664.732229
Outstanding requests per worker:
12597 14142 1 13495 14136 0 12933 14328 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:37   0:00 /usr/lib/linux
memcache      8  205  0.0 331200 100800 pts/0   Sl+  02:37   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254511294      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3050793429      L1-dcache-loads:u                                           
        1203996145      armv8_pmuv3_0/l2d_cache/:u                                   
         355870184      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961114819 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3142513152
starting receive base loop
num_worker_connections 1
Creating worker on tid 3126063616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109614080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033477.031901,       0.0,      187727,     169185,      18542,     107391,      61794,  36.749732,  86.900000,  95.000000, 102.000000,  33.212148,   0.000000, 107.065000, 447.743902
Outstanding requests per worker:
1260 1224 1 1299 1294 0 1208 1179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94384.9,      471925,     424626,      47299,     308006,     116620, 163.737738, 295.700000, 308.100000, 325.100000, 110.750368,   0.041000, 333.786994, 547.015600
Outstanding requests per worker:
3987 3764 1 4054 3992 0 3794 3779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95152.7,      475764,     427949,      47815,     329326,      98623, 300.811340, 463.200000, 477.900000, 501.000000, 181.708454,   0.041000, 511.695027, 596.111621
Outstanding requests per worker:
6044 5716 1 6228 5908 0 5884 5660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95189.9,      475950,     428549,      47401,     339910,      88639, 420.139873, 626.900000, 649.200000, 681.100000, 250.824465,   0.040000, 694.154024, 621.509067
Outstanding requests per worker:
8322 7686 1 8455 7786 0 7825 7250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95166.3,      475832,     428366,      47466,     347371,      80995, 540.028326, 795.500000, 822.400000, 855.700000, 321.143323,   0.041000, 877.182007, 641.093194
Outstanding requests per worker:
10321 9507 1 10667 9795 0 9837 9201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95302.9,      476515,     428851,      47664,     352818,      76033, 661.463641, 961.100000, 984.900000, 1020.200000, 391.296848,   0.041000, 1035.833001, 654.085032
Outstanding requests per worker:
12132 11405 1 12621 11447 0 11927 11116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95286.7,      476434,     428797,      47637,     356983,      71814, 774.096928, 1120.200000, 1139.300000, 1175.500000, 457.234758,   0.041000, 1187.446952, 665.287444
Outstanding requests per worker:
14026 13249 1 14471 13351 0 13942 13014 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:38   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 100864 pts/0   Sl+  02:38   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254667205      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3078297863      L1-dcache-loads:u                                           
        1231320216      armv8_pmuv3_0/l2d_cache/:u                                   
         383508736      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180368786 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2792419840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2775970304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2675962368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659512832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643063296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626613760
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033526.031950,       0.0,      186194,     167598,      18596,     106981,      60617,  56.643597, 132.900000, 153.300000, 171.400000,  52.477174,   0.000000, 179.126993, 451.197490
Outstanding requests per worker:
1542 2138 0 1685 2216 0 1679 2156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94751.7,      473759,     426493,      47266,     310065,     116428, 223.487747, 400.400000, 430.000000, 457.100000, 150.794278,   0.042000, 467.312008, 547.953012
Outstanding requests per worker:
4798 5766 0 5011 5749 0 4634 5554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95390.5,      476953,     429077,      47876,     330563,      98514, 398.637736, 627.300000, 657.800000, 685.000000, 244.460553,   0.041000, 695.554972, 596.164514
Outstanding requests per worker:
7709 8584 0 7729 8522 0 7420 8447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95563.9,      477820,     430265,      47555,     341887,      88378, 560.427731, 838.200000, 868.800000, 904.700000, 336.472506,   0.041000, 918.649971, 623.687416
Outstanding requests per worker:
10237 11324 0 10466 10505 0 9819 11230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95705.1,      478526,     430582,      47944,     348671,      81911, 699.714027, 1055.000000, 1106.200000, 1144.200000, 420.107707,   0.042000, 1153.467059, 640.046976
Outstanding requests per worker:
12677 14232 0 12734 10600 0 11920 14225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95803.3,      479017,     431244,      47773,     355002,      76242, 824.164283, 1283.000000, 1324.800000, 1361.400000, 502.169845,   0.041000, 1382.061958, 654.029814
Outstanding requests per worker:
14791 17033 0 14958 10348 1 14183 16267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95728.3,      478642,     431124,      47518,     359118,      72006, 936.310184, 1436.800000, 1519.600000, 1596.500000, 580.084100,   0.042000, 1625.180006, 665.057566
Outstanding requests per worker:
16977 20042 0 17039 10445 0 16451 15975 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:38   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 95616 pts/0    Sl+  02:38   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  02:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259469125      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        3114850313      L1-dcache-loads:u                                           
        1259995528      armv8_pmuv3_0/l2d_cache/:u                                   
         378235202      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170227578 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2241851904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225402368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033575.031999,       0.0,      188907,     170242,      18665,     108319,      61923,  41.808554, 100.100000, 109.100000, 125.300000,  38.422463,   0.000000, 132.801995, 448.535820
Outstanding requests per worker:
1365 1429 0 1360 1602 0 1323 1615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95202.7,      476014,     428257,      47757,     310314,     117943, 182.751688, 332.600000, 344.900000, 365.500000, 123.865721,   0.041000, 379.016012, 545.051357
Outstanding requests per worker:
4243 4473 0 4345 4668 0 4253 4558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96018.5,      480093,     431941,      48152,     331926,     100015, 336.893139, 523.200000, 546.300000, 570.900000, 204.383244,   0.042000, 590.981007, 594.103408
Outstanding requests per worker:
6310 6948 0 6538 7285 0 6273 6968 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96170.9,      480855,     432615,      48240,     343577,      89038, 470.431335, 715.700000, 744.200000, 769.100000, 282.002332,   0.042000, 784.689009, 622.168186
Outstanding requests per worker:
8218 9399 1 8522 9679 0 8183 9331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96270.7,      481354,     433294,      48060,     351609,      81685, 599.497255, 901.500000, 923.900000, 950.400000, 357.762442,   0.042000, 967.155993, 641.122704
Outstanding requests per worker:
10065 11737 1 10520 11918 0 10119 11511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96384.7,      481924,     433842,      48082,     357117,      76725, 722.297795, 1077.500000, 1100.500000, 1123.600000, 429.641441,   0.042000, 1141.175032, 654.006869
Outstanding requests per worker:
11884 13875 0 12201 14080 0 12126 13635 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96474.5,      482373,     434273,      48100,     361280,      72993, 839.420842, 1242.100000, 1264.100000, 1318.100000, 498.698488,   0.041000, 1334.491014, 663.737451
Outstanding requests per worker:
13769 15733 0 14162 16476 0 13717 15450 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:39   0:00 /usr/lib/linux
memcache      8  212  0.0 331200 97536 pts/0    Sl+  02:39   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257613708      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3130779432      L1-dcache-loads:u                                           
        1250028019      armv8_pmuv3_0/l2d_cache/:u                                   
         364749928      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021197969 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2836001280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033624.032048,       0.0,      188960,     170083,      18877,     108370,      61713,  54.687082, 126.200000, 147.300000, 164.300000,  50.338740,   0.000000, 172.024995, 450.326940
Outstanding requests per worker:
1604 2124 0 1581 2071 0 1592 2141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96008.3,      480042,     431768,      48274,     312540,     119228, 215.250715, 387.900000, 420.500000, 445.300000, 145.946580,   0.042000, 458.357006, 545.283335
Outstanding requests per worker:
4763 5651 0 4774 5724 0 4573 5612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96772.1,      483861,     435318,      48543,     335212,     100106, 387.744344, 620.300000, 652.400000, 677.300000, 238.273997,   0.043000, 693.659008, 595.469216
Outstanding requests per worker:
7406 8458 1 7365 8675 0 6895 8462 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96909.7,      484549,     436128,      48421,     346153,      89975, 545.155213, 844.700000, 873.000000, 893.800000, 329.625700,   0.043000, 904.268026, 621.684042
Outstanding requests per worker:
9778 11146 0 10015 11301 0 9372 11136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97329.7,      486649,     437794,      48855,     355099,      82695, 690.012361, 1028.500000, 1052.800000, 1081.400000, 411.441947,   0.042000, 1094.359040, 640.803236
Outstanding requests per worker:
11854 13364 0 12244 13659 0 11685 13329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97223.9,      486120,     437508,      48612,     360193,      77315, 819.336975, 1199.000000, 1233.300000, 1270.200000, 487.053674,   0.043000, 1285.019994, 654.716780
Outstanding requests per worker:
13992 14430 0 14604 16045 0 13929 15751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97273.3,      486367,     437582,      48785,     364762,      72820, 937.715361, 1388.700000, 1431.400000, 1463.200000, 557.573604,   0.043000, 1480.949998, 666.026119
Outstanding requests per worker:
15957 14368 0 16822 18505 0 16039 18243 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:40   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 97344 pts/0    Sl+  02:40   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         263399527      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3157283909      L1-dcache-loads:u                                           
        1275522454      armv8_pmuv3_0/l2d_cache/:u                                   
         388302925      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989506824 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2622878208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2606428672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2589979136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2573529600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033673.032097,       0.0,      189023,     169873,      19150,     108086,      61787,  54.345714, 132.400000, 156.300000, 174.900000,  51.748265,   0.000000, 187.870994, 449.655184
Outstanding requests per worker:
2164 1606 0 2206 1298 1 2349 1422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96085.3,      480427,     432190,      48237,     312904,     119286, 214.268862, 404.700000, 439.300000, 470.200000, 149.153741,   0.042000, 481.397003, 545.844703
Outstanding requests per worker:
5786 4615 0 5967 4215 0 5997 4085 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97074.5,      485373,     437021,      48352,     337041,      99980, 378.576373, 629.700000, 660.900000, 693.600000, 237.082054,   0.042000, 705.105007, 596.258567
Outstanding requests per worker:
8174 6749 0 8469 6566 0 8804 6250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97189.5,      485948,     437224,      48724,     347119,      90105, 509.245712, 809.500000, 848.800000, 887.300000, 311.962117,   0.041000, 908.680975, 621.610536
Outstanding requests per worker:
10989 8616 0 8295 8668 1 11133 8078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96973.7,      484869,     436531,      48338,     354082,      82449, 616.329303, 986.100000, 1029.700000, 1114.500000, 377.223771,   0.041000, 1134.279966, 640.799535
Outstanding requests per worker:
14173 10491 1 9077 10772 0 12065 10113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96816.3,      484082,     435720,      48362,     359100,      76620, 706.153497, 1173.800000, 1258.800000, 1325.300000, 436.933506,   0.042000, 1378.615022, 655.544148
Outstanding requests per worker:
16353 12595 0 9492 12645 1 10869 12222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96649.1,      483246,     434929,      48317,     362826,      72103, 778.278657, 1280.000000, 1334.700000, 1378.100000, 482.835194,   0.042000, 1411.497951, 666.724072
Outstanding requests per worker:
14629 14443 0 8079 14825 1 11126 14220 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:41   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 96512 pts/0    Sl+  02:41   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         262164557      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3160584024      L1-dcache-loads:u                                           
        1268870799      armv8_pmuv3_0/l2d_cache/:u                                   
         378750543      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.670301306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2677928448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2661478912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645029376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2628579840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033722.032146,       0.0,      187791,     169063,      18728,     107714,      61349,  61.076968, 144.000000, 153.800000, 164.300000,  55.049359,   0.000000, 172.627002, 449.628062
Outstanding requests per worker:
2134 2145 1 2035 2067 0 1918 1984 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95784.3,      478922,     430986,      47936,     312901,     118085, 232.783804, 412.400000, 429.900000, 451.200000, 154.776736,   0.042000, 462.125003, 547.556120
Outstanding requests per worker:
5772 5708 1 5589 5524 0 5474 5320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96668.9,      483345,     434934,      48411,     335507,      99427, 413.851124, 636.500000, 652.200000, 673.700000, 250.582682,   0.042000, 689.795017, 597.540268
Outstanding requests per worker:
8604 7577 0 8471 8095 0 8395 8147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96669.1,      483346,     435236,      48110,     346091,      89145, 564.465982, 848.400000, 866.200000, 888.900000, 338.751592,   0.042000, 900.671005, 623.509946
Outstanding requests per worker:
10901 7477 1 11219 11044 0 10824 11245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97210.7,      486054,     437520,      48534,     355083,      82437, 687.814403, 1036.100000, 1059.600000, 1093.100000, 418.352427,   0.043000, 1112.102032, 642.397442
Outstanding requests per worker:
12900 7693 1 13273 13694 0 12826 13892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97392.3,      486962,     438568,      48394,     360702,      77866, 794.465613, 1215.500000, 1251.200000, 1301.700000, 492.539654,   0.042000, 1317.134023, 653.658885
Outstanding requests per worker:
14639 7606 1 15091 15622 0 14582 16467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96508.9,      482545,     434204,      48341,     361549,      72655, 878.312025, 1359.800000, 1443.000000, 1510.500000, 558.594605,   0.042000, 1544.512987, 664.671164
Outstanding requests per worker:
14763 7858 1 15531 14611 1 15848 18346 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:42   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 97024 pts/0    Sl+  02:42   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  02:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258556492      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3150598343      L1-dcache-loads:u                                           
        1259634422      armv8_pmuv3_0/l2d_cache/:u                                   
         377791388      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.651049495 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2610098688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2593649152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2577199616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2560750080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033771.032195,       0.0,      181581,     163460,      18121,     103946,      59514,   2.164521,   4.500000,   4.800000,   5.300000,   1.737303,   0.000000,   7.414000, 449.114230
Outstanding requests per worker:
45 49 0 53 50 0 53 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90892.5,      454463,     409170,      45293,     296271,     112899,   4.190255,   7.000000,   7.400000,   8.000000,   2.580725,   0.042000,  10.441000, 545.288917
Outstanding requests per worker:
73 62 0 84 70 0 69 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90891.7,      454459,     409258,      45201,     314089,      95169,   5.584373,   9.200000,  10.600000,  12.800000,   3.503552,   0.041000,  15.914001, 593.627174
Outstanding requests per worker:
117 86 0 92 73 0 104 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90678.3,      453392,     407905,      45487,     322767,      85138,  10.875079,  24.800000,  29.000000,  37.100000,   9.274397,   0.042000,  43.995000, 619.566247
Outstanding requests per worker:
369 151 0 361 215 1 491 139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90272.7,      451364,     406348,      45016,     328427,      77921,  35.073134,  73.600000,  84.900000,  95.800000,  27.658209,   0.040000, 105.667002, 637.884121
Outstanding requests per worker:
890 660 0 988 639 0 1186 574 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90079.7,      450399,     405650,      44749,     332599,      73051,  76.796014, 141.100000, 152.500000, 161.700000,  51.386604,   0.042000, 169.336006, 650.576347
Outstanding requests per worker:
1594 1333 0 1820 1194 0 1918 1255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90054.1,      450271,     405365,      44906,     336723,      68642, 123.552085, 203.900000, 212.300000, 226.000000,  76.749999,   0.042000, 230.930001, 662.248559
Outstanding requests per worker:
2436 2002 0 2460 1812 0 2595 2124 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:43   0:00 /usr/lib/linux
memcache      8  205  0.0 326080 95616 pts/0    Sl+  02:43   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245170526      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2949297377      L1-dcache-loads:u                                           
        1185321413      armv8_pmuv3_0/l2d_cache/:u                                   
         358285452      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260868531 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2673734144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2657284608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2640835072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033820.032244,       0.0,      181551,     163637,      17914,     104155,      59482,   2.434925,   5.700000,   6.200000,  10.000000,   2.409113,   0.000000,  13.575000, 449.052531
Outstanding requests per worker:
73 32 0 66 29 0 110 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90673.7,      453369,     407949,      45420,     294428,     113521,   9.204727,  29.900000,  36.200000,  43.300000,  11.881167,   0.044000,  47.038000, 542.858048
Outstanding requests per worker:
403 46 0 524 30 0 512 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90412.9,      452065,     406566,      45499,     312187,      94379,  29.672766,  92.800000, 106.600000, 127.700000,  38.764263,   0.044000, 142.189994, 593.475382
Outstanding requests per worker:
1080 41 0 1599 37 0 1278 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90396.7,      451984,     407199,      44785,     322561,      84638,  58.949401, 170.600000, 186.500000, 211.500000,  75.195146,   0.045000, 220.118001, 620.767723
Outstanding requests per worker:
1959 55 0 2482 64 0 2048 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90422.9,      452115,     406984,      45131,     328930,      78054,  85.987579, 242.000000, 257.800000, 271.200000, 109.072295,   0.045000, 276.183993, 637.182619
Outstanding requests per worker:
2781 67 0 3104 71 0 3055 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90504.3,      452522,     407041,      45481,     333854,      73187, 110.870869, 309.800000, 316.900000, 329.200000, 140.242870,   0.045000, 335.842997, 650.631430
Outstanding requests per worker:
3376 60 0 3812 67 0 3794 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90489.5,      452448,     407301,      45147,     338068,      69233, 133.318421, 369.200000, 380.300000, 393.700000, 168.905920,   0.045000, 401.477993, 662.082470
Outstanding requests per worker:
4146 82 0 4539 88 0 4414 81 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:43   0:00 /usr/lib/linux
memcache      7  209  0.0 327104 85952 pts/0    Sl+  02:43   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248744758      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
        2958528710      L1-dcache-loads:u                                           
        1200095434      armv8_pmuv3_0/l2d_cache/:u                                   
         372460623      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930121271 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2388455936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372006400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033869.032293,       0.0,      183767,     165414,      18353,     105361,      60053,   1.659406,   3.700000,   4.100000,   4.600000,   1.340828,   0.000000,   5.687000, 450.492897
Outstanding requests per worker:
44 45 0 39 24 0 36 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91930.5,      459653,     413417,      46236,     299764,     113653,   3.630196,   6.100000,   6.500000,   7.300000,   2.292661,   0.041000,   8.947000, 546.375326
Outstanding requests per worker:
73 62 0 65 52 0 72 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91914.1,      459571,     413616,      45955,     318236,      95380,   5.176991,   9.200000,  10.000000,  13.100000,   3.468353,   0.042000,  19.568000, 594.840761
Outstanding requests per worker:
112 78 0 89 82 0 195 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91677.9,      458390,     412190,      46200,     326576,      85614,  12.923176,  30.500000,  40.400000,  47.300000,  12.359644,   0.042000,  51.702000, 620.634232
Outstanding requests per worker:
453 149 0 539 206 0 565 134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91487.1,      457436,     411552,      45884,     333177,      78375,  33.560496,  74.300000,  82.600000,  91.800000,  28.107577,   0.042000,  95.637999, 638.809266
Outstanding requests per worker:
957 326 0 1071 387 0 1076 604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91236.1,      456181,     410855,      45326,     337356,      73499,  68.198886, 135.000000, 140.200000, 165.600000,  50.717388,   0.042000, 170.935005, 653.186141
Outstanding requests per worker:
1585 818 0 1956 850 0 1619 1209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91174.3,      455872,     410786,      45086,     341666,      69120, 110.112750, 195.900000, 209.100000, 224.200000,  73.436801,   0.043000, 228.079006, 663.237464
Outstanding requests per worker:
2214 1451 0 2599 1474 0 2443 1816 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:44   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 93568 pts/0    Sl+  02:44   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248503398      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2993178083      L1-dcache-loads:u                                           
        1206874922      armv8_pmuv3_0/l2d_cache/:u                                   
         378941566      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039630570 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2963599872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2947150336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930700800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914251264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897801728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033917.032341,       0.0,      183084,     164899,      18185,     104637,      60262,   5.427364,  14.200000,  18.900000,  28.700000,   6.456203,   0.000000,  34.139998, 446.716784
Outstanding requests per worker:
45 163 0 30 223 0 37 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91242.5,      456213,     410270,      45943,     296269,     114001,  28.146756,  93.500000, 107.900000, 137.100000,  38.629125,   0.043000, 146.733999, 542.798798
Outstanding requests per worker:
70 1197 0 49 1413 0 64 1679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91257.5,      456288,     410571,      45717,     315330,      95241,  67.802684, 203.000000, 216.400000, 229.400000,  85.761689,   0.042000, 235.370994, 592.737239
Outstanding requests per worker:
61 2536 0 66 2548 0 94 2676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91305.1,      456526,     411237,      45289,     325530,      85707, 103.439723, 288.600000, 302.100000, 314.400000, 128.742994,   0.042000, 320.556998, 619.218511
Outstanding requests per worker:
198 3667 0 110 3474 0 147 3663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91202.7,      456014,     410460,      45554,     331942,      78518, 140.439516, 370.200000, 383.700000, 407.700000, 164.695564,   0.042000, 415.275991, 637.349354
Outstanding requests per worker:
599 4744 0 381 4284 1 419 4613 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91056.7,      455284,     409814,      45470,     336272,      73542, 187.167979, 460.400000, 480.000000, 505.800000, 196.008212,   0.042000, 516.735017, 651.358492
Outstanding requests per worker:
1097 5915 0 916 5070 0 1003 5551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90974.1,      454871,     409389,      45482,     340236,      69153, 237.818834, 548.900000, 561.600000, 590.400000, 223.397961,   0.041000, 598.977029, 663.296249
Outstanding requests per worker:
1691 6868 0 1585 6041 0 1814 6487 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:45   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 90560 pts/0    Sl+  02:45   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245549225      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        2982574523      L1-dcache-loads:u                                           
        1202462822      armv8_pmuv3_0/l2d_cache/:u                                   
         383037577      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700402988 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2225336832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2208887296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192437760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175988224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159538688
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576033966.032390,       0.0,      184047,     165704,      18343,     105230,      60474,  11.310593,  33.500000,  40.900000,  51.200000,  13.178990,   0.000000,  54.903001, 447.529879
Outstanding requests per worker:
628 81 0 486 202 0 608 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91527.9,      457640,     411945,      45695,     297912,     114033,  61.347735, 163.900000, 183.000000, 208.500000,  60.896020,   0.043000, 215.716004, 543.896333
Outstanding requests per worker:
2487 803 0 2260 997 0 2307 747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91590.9,      457955,     412037,      45918,     316048,      95989, 141.724193, 293.100000, 305.500000, 336.900000, 108.686793,   0.043000, 344.116986, 593.513468
Outstanding requests per worker:
3993 1857 0 3623 2088 0 3556 1682 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91592.9,      457965,     412218,      45747,     326572,      85646, 218.201617, 405.500000, 421.400000, 452.800000, 150.042923,   0.043000, 462.446988, 620.061681
Outstanding requests per worker:
5368 3097 0 4892 3030 0 4917 2691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91843.9,      459220,     413426,      45794,     334232,      79194, 289.290566, 508.500000, 520.400000, 545.600000, 189.949327,   0.042000, 555.108011, 638.299081
Outstanding requests per worker:
6432 3822 0 6056 3933 0 6106 3578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91769.5,      458848,     413051,      45797,     338833,      74218, 353.584582, 619.700000, 634.600000, 660.200000, 231.529586,   0.043000, 674.745977, 651.614430
Outstanding requests per worker:
7829 4547 0 7494 4592 0 7433 4365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91763.7,      458819,     413146,      45673,     343189,      69957, 422.056225, 739.800000, 753.700000, 776.600000, 276.934673,   0.042000, 784.790993, 662.906338
Outstanding requests per worker:
9117 5438 0 8817 5353 0 8797 5069 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:46   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 91712 pts/0    Sl+  02:46   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248289331      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2997055978      L1-dcache-loads:u                                           
        1202953707      armv8_pmuv3_0/l2d_cache/:u                                   
         362502767      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941042474 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3135631872
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119182336
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102732800
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034014.032438,       0.0,      185780,     167167,      18613,     106088,      61079,   3.329184,   5.800000,   6.300000,   7.600000,   2.229883,   0.000000,   9.737000, 447.288759
Outstanding requests per worker:
53 62 0 48 70 2 59 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92732.5,      463663,     417343,      46320,     302225,     115118,  10.068985,  27.100000,  36.000000,  46.300000,  11.175369,   0.043000,  51.288001, 544.921065
Outstanding requests per worker:
105 407 0 101 596 1 105 530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92263.1,      461316,     415414,      45902,     319134,      96280,  38.117272,  98.900000, 108.300000, 127.400000,  37.463907,   0.043000, 139.617994, 593.420756
Outstanding requests per worker:
424 1313 0 557 1595 1 466 1329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91923.5,      459618,     413600,      46018,     327423,      86177,  89.222402, 180.900000, 194.200000, 211.900000,  67.706399,   0.043000, 219.164997, 619.963119
Outstanding requests per worker:
1246 2312 0 1473 2553 1 1282 2349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92036.7,      460184,     414273,      45911,     334849,      79424, 146.703434, 257.900000, 270.000000, 275.800000,  95.772036,   0.042000, 289.249003, 638.050831
Outstanding requests per worker:
1941 3360 0 2285 3192 1 2261 3165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92174.3,      460872,     414937,      45935,     340463,      74474, 197.605315, 323.800000, 334.800000, 347.200000, 122.671517,   0.042000, 353.493005, 651.301725
Outstanding requests per worker:
2614 4065 0 2974 3953 1 3042 3833 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92169.3,      460847,     414778,      46069,     344181,      70597, 241.777737, 385.800000, 395.400000, 407.100000, 147.272437,   0.043000, 411.927998, 662.524659
Outstanding requests per worker:
3406 4748 0 3562 4754 1 3701 4605 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:47   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 94656 pts/0    Sl+  02:47   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243366340      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2965745563      L1-dcache-loads:u                                           
        1176269450      armv8_pmuv3_0/l2d_cache/:u                                   
         375484155      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.709559669 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2657284608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2640835072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034063.032487,       0.0,      183991,     165563,      18428,     105351,      60212,  11.316823,  31.500000,  40.000000,  47.100000,  12.350960,   0.000000,  51.975001, 448.364653
Outstanding requests per worker:
245 584 0 102 588 0 139 477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91446.1,      457231,     411433,      45798,     297374,     114059,  64.764212, 162.800000, 181.500000, 195.300000,  58.797870,   0.043000, 209.775001, 544.475057
Outstanding requests per worker:
1129 2415 0 1002 2273 0 1005 2241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91608.5,      458043,     412180,      45863,     316684,      95496, 145.873359, 286.000000, 300.100000, 319.200000, 104.813932,   0.043000, 329.923004, 594.286826
Outstanding requests per worker:
2198 3814 0 2043 3666 0 1886 3586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91660.9,      458305,     412430,      45875,     326730,      85700, 221.481466, 408.000000, 421.100000, 438.400000, 149.579268,   0.044000, 448.092997, 620.387496
Outstanding requests per worker:
3308 5210 0 2830 5123 0 2737 4857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91743.7,      458719,     413393,      45326,     334939,      78454, 291.637628, 511.700000, 530.400000, 551.700000, 191.537054,   0.043000, 558.858991, 640.026024
Outstanding requests per worker:
4126 6484 0 3595 6453 0 3743 6096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91692.1,      458461,     412590,      45871,     338920,      73670, 361.492458, 626.100000, 651.000000, 676.900000, 235.333744,   0.043000, 692.126989, 652.566044
Outstanding requests per worker:
5014 8044 0 4529 7775 0 4652 7178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91695.3,      458477,     412525,      45952,     342842,      69683, 433.820388, 756.900000, 774.300000, 810.400000, 281.750342,   0.043000, 817.848027, 663.419759
Outstanding requests per worker:
5866 9506 0 5426 9067 0 5514 8509 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:47   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 96384 pts/0    Sl+  02:47   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248800389      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2989102613      L1-dcache-loads:u                                           
        1207794841      armv8_pmuv3_0/l2d_cache/:u                                   
         369589606      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.450531789 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2734354944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717905408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701455872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034112.032536,       0.0,      185074,     166628,      18446,     106214,      60414,  17.079714,  47.800000,  57.200000,  66.600000,  17.853083,   0.000000,  71.722999, 450.903672
Outstanding requests per worker:
296 714 0 335 831 0 262 802 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92103.3,      460517,     414632,      45885,     299503,     115129,  88.215097, 203.800000, 223.000000, 242.800000,  73.616384,   0.042000, 256.002009, 544.469479
Outstanding requests per worker:
1555 3001 0 1698 2790 0 1442 2871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92285.5,      461428,     415507,      45921,     319162,      96345, 190.356394, 353.500000, 371.000000, 402.100000, 128.596381,   0.042000, 416.202009, 593.427122
Outstanding requests per worker:
2849 4883 0 3194 4400 0 2786 4464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92637.9,      463190,     417058,      46132,     330027,      87031, 277.679870, 481.500000, 500.100000, 532.800000, 178.740773,   0.043000, 544.992983, 619.657712
Outstanding requests per worker:
3858 6389 1 4188 5956 0 3744 5866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92552.9,      462765,     416519,      46246,     336333,      80186, 356.819153, 610.400000, 630.000000, 654.000000, 227.999248,   0.043000, 667.486012, 637.533102
Outstanding requests per worker:
5064 7844 0 5215 7543 0 4686 7513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92588.7,      462944,     416432,      46512,     341778,      74654, 440.260913, 749.900000, 767.500000, 787.400000, 280.999550,   0.042000, 798.889995, 652.369566
Outstanding requests per worker:
5879 9386 0 6271 9212 0 5647 9142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92499.3,      462497,     415964,      46533,     346035,      69929, 522.607889, 886.000000, 909.400000, 941.700000, 334.619350,   0.042000, 955.856979, 663.175436
Outstanding requests per worker:
6941 11237 0 7262 10753 0 6686 10785 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:48   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 93056 pts/0    Sl+  02:48   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247738500      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3017462107      L1-dcache-loads:u                                           
        1215014633      armv8_pmuv3_0/l2d_cache/:u                                   
         377711512      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.089784292 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2441671168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425221632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034161.032585,       0.0,      182828,     164482,      18346,     104461,      60021,  25.585321,  62.000000,  75.900000,  86.100000,  24.638761,   0.000000,  91.315001, 448.222468
Outstanding requests per worker:
637 1069 0 736 1015 0 637 1041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91449.9,      457250,     411689,      45561,     298023,     113666, 129.335655, 253.900000, 275.900000, 295.800000,  93.348993,   0.042000, 308.712989, 544.797850
Outstanding requests per worker:
2583 3409 1 2795 3630 0 2694 3420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92017.3,      460087,     414085,      46002,     317831,      96254, 252.269587, 419.300000, 439.600000, 458.700000, 156.715238,   0.042000, 469.377995, 593.443981
Outstanding requests per worker:
4153 5322 1 4322 5514 0 4410 5335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92267.1,      461336,     415460,      45876,     329070,      86390, 356.736519, 564.900000, 583.800000, 598.300000, 216.199233,   0.042000, 612.452984, 620.545042
Outstanding requests per worker:
5521 6969 1 5736 7191 0 5892 7039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92158.1,      460791,     414968,      45823,     335821,      79147, 455.744994, 711.700000, 734.500000, 750.800000, 274.889388,   0.042000, 764.303029, 639.024703
Outstanding requests per worker:
7104 8767 1 7383 8973 0 7118 8847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92111.7,      460559,     414672,      45887,     339985,      74687, 559.941390, 861.600000, 882.400000, 908.100000, 336.386922,   0.042000, 925.049007, 651.359641
Outstanding requests per worker:
8609 10640 1 9178 10870 0 8505 10476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92062.7,      460314,     414222,      46092,     343935,      70287, 669.430248, 1021.400000, 1040.100000, 1059.400000, 400.943256,   0.041000, 1073.570967, 662.079800
Outstanding requests per worker:
10153 12605 0 10866 12498 0 10287 12172 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:49   0:00 /usr/lib/linux
memcache      7  206  0.0 327104 96640 pts/0    Sl+  02:49   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245990270      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        2987305358      L1-dcache-loads:u                                           
        1188877711      armv8_pmuv3_0/l2d_cache/:u                                   
         376199342      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009879199 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2441605632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425156096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034209.032633,       0.0,      187443,     168772,      18671,     107755,      61017,  15.442420,  37.100000,  41.700000,  48.400000,  14.047005,   0.000000,  54.632999, 450.964479
Outstanding requests per worker:
452 532 0 541 446 0 507 637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93164.3,      465822,     419115,      46707,     303873,     115242,  87.291005, 170.200000, 179.000000, 206.900000,  63.795459,   0.041000, 225.899994, 546.266879
Outstanding requests per worker:
2135 2316 0 2214 2106 1 2077 2679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93519.1,      467596,     420545,      47051,     323366,      97179, 187.026779, 293.500000, 312.200000, 358.400000, 114.885363,   0.041000, 365.390986, 594.548460
Outstanding requests per worker:
3523 3595 0 3603 3730 1 3362 4338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93816.1,      469081,     422588,      46493,     334121,      88467, 269.202303, 405.600000, 426.000000, 453.700000, 160.595977,   0.041000, 463.138014, 619.744927
Outstanding requests per worker:
4616 4894 0 4673 5147 0 4470 5499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93765.7,      468829,     422160,      46669,     341461,      80699, 343.905604, 514.900000, 535.400000, 555.800000, 204.153569,   0.041000, 562.070012, 638.149178
Outstanding requests per worker:
5655 6185 0 5874 6654 0 5659 6684 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93692.5,      468463,     422005,      46458,     346387,      75618, 424.734380, 629.400000, 648.500000, 665.100000, 251.469961,   0.042000, 672.160029, 651.916537
Outstanding requests per worker:
6710 7552 0 7196 7937 0 7110 7978 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93504.7,      467524,     421178,      46346,     349950,      71228, 509.416472, 748.000000, 769.400000, 790.000000, 301.256269,   0.042000, 803.820014, 663.001491
Outstanding requests per worker:
8186 8998 0 8615 9348 1 8476 9559 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:50   0:00 /usr/lib/linux
memcache      7  207  0.0 329152 92736 pts/0    Sl+  02:50   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251112122      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3049206869      L1-dcache-loads:u                                           
        1222517166      armv8_pmuv3_0/l2d_cache/:u                                   
         369566950      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929960378 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2690314752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2673865216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2657415680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2640966144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034258.032682,       0.0,      187173,     168726,      18447,     106953,      61773,  18.418243,  39.400000,  44.200000,  51.200000,  15.136682,   0.000000,  56.175001, 447.032734
Outstanding requests per worker:
647 562 0 568 505 1 445 641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93053.1,      465266,     418717,      46549,     303146,     115571,  93.845510, 183.000000, 195.100000, 221.900000,  68.394336,   0.041000, 236.089006, 545.150995
Outstanding requests per worker:
2454 2793 0 2003 2415 1 2292 2373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93429.5,      467148,     420285,      46863,     323433,      96852, 197.949393, 319.100000, 336.500000, 372.600000, 122.010949,   0.041000, 381.989002, 594.802258
Outstanding requests per worker:
3877 4532 1 3425 3922 1 3547 4096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93633.3,      468167,     421755,      46412,     334433,      87322, 286.645252, 439.900000, 462.100000, 494.400000, 172.484166,   0.041000, 499.734998, 621.326851
Outstanding requests per worker:
5298 5908 0 4627 5509 1 4765 5355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93621.5,      468108,     421171,      46937,     341131,      80040, 370.763506, 558.400000, 576.500000, 601.400000, 221.196476,   0.041000, 610.226989, 640.085362
Outstanding requests per worker:
6616 7248 1 5695 7001 2 6097 6931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93547.5,      467738,     421064,      46674,     345982,      75082, 456.792964, 686.800000, 702.200000, 718.100000, 272.066108,   0.042000, 724.626005, 653.355309
Outstanding requests per worker:
7982 8592 0 6932 8575 1 7609 8376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93440.7,      467204,     420325,      46879,     349841,      70484, 547.658874, 803.900000, 820.700000, 837.700000, 324.291619,   0.041000, 853.477001, 664.103065
Outstanding requests per worker:
9383 10159 1 8536 9926 0 9158 9911 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:51   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 96768 pts/0    Sl+  02:51   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  02:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242218094      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3003364649      L1-dcache-loads:u                                           
        1175977397      armv8_pmuv3_0/l2d_cache/:u                                   
         355038616      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.059852199 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2319249920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2302800384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034306.032730,       0.0,      186108,     167641,      18467,     106307,      61334,  33.265770,  78.400000,  94.600000, 108.800000,  31.257614,   0.000000, 116.420001, 447.697443
Outstanding requests per worker:
875 1385 0 893 1303 1 924 1355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93415.7,      467079,     420085,      46994,     304783,     115302, 151.197210, 284.400000, 309.500000, 330.100000, 105.681525,   0.041000, 342.503011, 546.656624
Outstanding requests per worker:
3251 4109 0 3225 3869 1 3053 4120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94206.1,      471031,     424000,      47031,     326229,      97771, 279.427925, 452.500000, 470.300000, 489.800000, 171.871085,   0.041000, 508.062005, 595.472790
Outstanding requests per worker:
5040 5849 0 4975 5864 1 4732 6097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94188.3,      470942,     424215,      46727,     336993,      87222, 391.083691, 609.200000, 628.700000, 656.300000, 235.794358,   0.041000, 668.263972, 623.229110
Outstanding requests per worker:
6848 7740 0 6879 7733 1 6341 8042 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94168.1,      470841,     424015,      46826,     343829,      80186, 504.561110, 765.300000, 786.200000, 812.700000, 302.070107,   0.041000, 825.664997, 640.793451
Outstanding requests per worker:
8772 9591 0 8741 9657 1 7997 9935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94192.9,      470965,     423564,      47401,     348085,      75479, 618.596236, 916.000000, 938.000000, 960.300000, 367.708751,   0.041000, 978.528976, 653.682938
Outstanding requests per worker:
10603 11351 0 10642 11525 0 9773 11792 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94222.9,      471115,     423786,      47329,     352888,      70898, 734.006601, 1073.400000, 1091.200000, 1128.800000, 434.487108,   0.041000, 1136.813998, 664.538326
Outstanding requests per worker:
12322 13053 0 12447 13226 1 11795 13695 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:51   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   02:51   0:00 /usr/lib/linux
memcache      9  211  0.0 329152 93952 pts/0    Sl+  02:51   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  02:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250753509      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3027226243      L1-dcache-loads:u                                           
        1198440334      armv8_pmuv3_0/l2d_cache/:u                                   
         358230877      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970821862 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2207445504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190995968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174546432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2158096896
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034355.032779,       0.0,      186225,     167675,      18550,     106213,      61462,  32.748403,  77.300000,  85.900000,  98.000000,  30.039656,   0.000000, 104.546003, 446.301202
Outstanding requests per worker:
1016 1179 0 986 1255 0 969 1209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93427.5,      467138,     420672,      46466,     304967,     115705, 149.531059, 273.400000, 286.400000, 318.900000, 102.794366,   0.042000, 334.003001, 546.059888
Outstanding requests per worker:
3387 3636 0 3379 4014 1 3385 3628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94076.5,      470383,     423394,      46989,     325572,      97822, 281.887414, 438.900000, 461.100000, 480.800000, 171.271280,   0.041000, 494.922996, 594.857480
Outstanding requests per worker:
5303 5779 0 5103 5941 1 5210 5678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94194.7,      470974,     423602,      47372,     336229,      87373, 394.963086, 597.200000, 623.200000, 647.800000, 236.171307,   0.040000, 657.482982, 621.607412
Outstanding requests per worker:
6842 7845 0 7062 7910 1 6787 7569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94178.5,      470893,     424008,      46885,     343089,      80919, 509.384912, 763.200000, 785.300000, 807.700000, 303.336322,   0.041000, 822.504997, 638.630108
Outstanding requests per worker:
8593 9730 0 8842 9895 1 8544 9507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94269.5,      471348,     424208,      47140,     348238,      75970, 621.440156, 927.600000, 951.300000, 977.600000, 369.110159,   0.041000, 985.107005, 651.703004
Outstanding requests per worker:
10048 11807 0 10478 11867 0 9980 11542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94246.3,      471232,     424198,      47034,     352269,      71929, 735.097489, 1095.700000, 1124.800000, 1146.700000, 437.509644,   0.042000, 1153.542995, 662.695501
Outstanding requests per worker:
11889 13715 0 12228 13878 1 11487 13260 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:52   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 94400 pts/0    Sl+  02:52   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250075737      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3021944567      L1-dcache-loads:u                                           
        1202371122      armv8_pmuv3_0/l2d_cache/:u                                   
         373660148      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.400696747 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2316956160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300506624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034403.032827,       0.0,      186692,     168134,      18558,     107420,      60714,  42.201508,  99.600000, 118.800000, 138.000000,  39.928806,   0.000000, 147.060007, 450.650993
Outstanding requests per worker:
1709 1069 0 1499 1222 1 1785 1213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94089.7,      470449,     423422,      47027,     307260,     116162, 181.922596, 341.800000, 370.000000, 406.800000, 126.723076,   0.041000, 414.209992, 546.995026
Outstanding requests per worker:
5012 3584 0 4579 3860 1 5043 3809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94959.5,      474798,     427538,      47260,     328477,      99061, 330.370553, 543.500000, 573.200000, 599.400000, 205.520869,   0.042000, 617.431998, 593.812571
Outstanding requests per worker:
7525 5700 0 6774 5727 0 7339 5879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95231.3,      476157,     428926,      47231,     340003,      88923, 453.869127, 710.000000, 737.900000, 767.800000, 274.924358,   0.042000, 777.800024, 620.052223
Outstanding requests per worker:
9479 7577 0 8754 7494 1 9388 7955 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95103.7,      475519,     427835,      47684,     346272,      81563, 578.723054, 880.100000, 909.300000, 931.800000, 347.165108,   0.042000, 945.811987, 639.163549
Outstanding requests per worker:
11509 9518 0 10778 9698 1 11429 10027 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95339.7,      476699,     429035,      47664,     352926,      76109, 698.122125, 1035.200000, 1058.200000, 1074.700000, 414.582893,   0.042000, 1084.743977, 653.594429
Outstanding requests per worker:
13218 11403 0 12725 11609 1 13104 12040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95482.5,      477413,     429711,      47702,     357514,      72197, 807.297954, 1163.700000, 1184.900000, 1212.800000, 476.413627,   0.042000, 1224.545002, 663.822106
Outstanding requests per worker:
14922 13462 0 14383 13182 0 14831 13758 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:53   0:00 /usr/lib/linux
memcache      8  212  0.0 330176 98688 pts/0    Sl+  02:53   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256191036      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3093203792      L1-dcache-loads:u                                           
        1234173069      armv8_pmuv3_0/l2d_cache/:u                                   
         365660853      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060099639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2874929664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2858480128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2842030592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034451.032875,       0.0,      186560,     167904,      18656,     106903,      61001,  43.197550, 101.900000, 109.700000, 118.900000,  38.899496,   0.000000, 125.011995, 450.243991
Outstanding requests per worker:
1519 1369 1 1453 1394 1 1517 1380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94182.7,      470914,     423759,      47155,     307425,     116334, 180.437013, 325.200000, 337.500000, 351.000000, 121.147115,   0.042000, 362.222999, 546.797472
Outstanding requests per worker:
4341 4098 0 4275 4212 0 4400 4237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95034.9,      475175,     427942,      47233,     328862,      99080, 324.918933, 500.300000, 513.600000, 534.500000, 196.037550,   0.043000, 542.015016, 594.633345
Outstanding requests per worker:
6361 6139 0 6595 6328 0 6584 6235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95231.7,      476159,     428680,      47479,     339874,      88806, 448.008914, 663.600000, 679.600000, 698.900000, 266.326609,   0.043000, 710.449994, 621.479117
Outstanding requests per worker:
8474 8138 0 8583 8283 0 8647 7809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95511.7,      477559,     429877,      47682,     348553,      81324, 563.242312, 811.400000, 825.100000, 840.300000, 332.251357,   0.043000, 846.771002, 640.645052
Outstanding requests per worker:
10235 9917 0 10273 9935 0 10316 9535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95581.3,      477907,     430143,      47764,     353753,      76390, 664.015099, 949.200000, 962.500000, 978.300000, 390.753839,   0.043000, 989.866018, 653.266979
Outstanding requests per worker:
12050 11433 1 12030 11522 0 11831 11284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95556.7,      477784,     429900,      47884,     358177,      71723, 763.520322, 1081.900000, 1094.800000, 1117.800000, 448.736097,   0.041000, 1132.006049, 665.232861
Outstanding requests per worker:
13455 13383 1 13787 13225 0 13409 12962 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:54   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 98048 pts/0    Sl+  02:54   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255110735      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3108464483      L1-dcache-loads:u                                           
        1242174088      armv8_pmuv3_0/l2d_cache/:u                                   
         366137825      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110677552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2801005056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2784555520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768105984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034500.032924,       0.0,      187841,     169060,      18781,     108026,      61034,  36.514446,  85.900000,  93.900000, 105.300000,  32.999802,   0.000000, 112.365000, 450.658991
Outstanding requests per worker:
1307 1111 0 1241 1078 1 1346 1273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94417.7,      472089,     424750,      47339,     307819,     116931, 161.165858, 290.100000, 306.700000, 328.300000, 109.506014,   0.041000, 339.367002, 545.512662
Outstanding requests per worker:
3961 3489 0 4112 3734 1 4130 3675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95072.3,      475362,     427646,      47716,     329940,      97706, 300.097842, 467.200000, 486.200000, 515.100000, 182.355730,   0.041000, 528.281987, 597.662064
Outstanding requests per worker:
5994 5359 0 6414 5829 1 6276 5731 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95383.1,      476916,     429321,      47595,     340858,      88463, 415.547225, 621.800000, 637.200000, 660.400000, 247.597049,   0.040000, 671.136022, 622.135514
Outstanding requests per worker:
7800 7275 0 8178 7703 0 8101 7466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95253.7,      476269,     428752,      47517,     347734,      81018, 531.809995, 776.200000, 792.500000, 820.200000, 315.186239,   0.042000, 832.985997, 641.635227
Outstanding requests per worker:
9723 9214 0 9939 9637 1 10132 9454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95174.9,      475875,     428355,      47520,     352564,      75791, 651.739091, 940.800000, 962.300000, 988.400000, 385.482550,   0.041000, 1000.792980, 654.616647
Outstanding requests per worker:
11564 11309 0 12183 11662 1 12062 11287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95208.5,      476043,     428396,      47647,     356759,      71637, 771.847944, 1103.900000, 1125.000000, 1147.500000, 455.422558,   0.041000, 1160.719037, 665.120020
Outstanding requests per worker:
13388 13337 0 14147 13813 1 14009 13198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:55   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 96640 pts/0    Sl+  02:55   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251858592      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3052788484      L1-dcache-loads:u                                           
        1201591213      armv8_pmuv3_0/l2d_cache/:u                                   
         357777842      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071140485 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2912612864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896163328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034548.032972,       0.0,      187812,     169134,      18678,     106866,      62268,  47.890414, 113.800000, 122.600000, 137.900000,  43.809953,   0.000000, 144.644007, 445.209520
Outstanding requests per worker:
1744 1520 0 1786 1505 0 1712 1522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95222.5,      476113,     428391,      47722,     309756,     118635, 194.158526, 341.700000, 360.800000, 387.700000, 129.427680,   0.041000, 403.151989, 544.656594
Outstanding requests per worker:
4798 4309 0 4784 4343 1 4958 4336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96040.7,      480204,     432320,      47884,     332351,      99969, 346.182932, 537.600000, 560.900000, 587.300000, 210.164918,   0.042000, 601.742029, 595.096239
Outstanding requests per worker:
7405 6369 1 7008 6469 0 7264 6659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96321.3,      481607,     433331,      48276,     344016,      89315, 475.439108, 704.900000, 728.000000, 747.800000, 283.299484,   0.042000, 758.354008, 622.242570
Outstanding requests per worker:
9354 8736 0 8862 8517 0 9275 8678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96404.1,      482021,     434079,      47942,     352100,      81979, 596.398844, 860.500000, 872.500000, 894.600000, 352.570403,   0.042000, 913.390994, 641.893927
Outstanding requests per worker:
11262 10933 1 10634 10700 0 10837 10887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96676.7,      483384,     435556,      47828,     358449,      77107, 708.993739, 1007.300000, 1024.600000, 1045.500000, 417.059519,   0.042000, 1059.283018, 654.390540
Outstanding requests per worker:
12777 13062 1 12012 12519 0 12400 12951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96515.1,      482576,     434563,      48013,     361799,      72764, 814.450802, 1156.000000, 1189.300000, 1226.500000, 479.935028,   0.042000, 1242.324948, 664.974476
Outstanding requests per worker:
14258 15329 1 13598 14682 0 13937 15194 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:55   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 96512 pts/0    Sl+  02:55   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258458363      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3140051321      L1-dcache-loads:u                                           
        1257675498      armv8_pmuv3_0/l2d_cache/:u                                   
         370304631      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.101421235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2189619712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173170176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2156720640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034597.033021,       0.0,      186735,     168116,      18619,     106989,      61127,  54.070251, 133.300000, 156.100000, 172.900000,  51.691122,   0.000000, 183.005005, 449.177901
Outstanding requests per worker:
2199 1395 0 2140 1514 0 2241 1378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94717.9,      473590,     425806,      47784,     309131,     116675, 216.907199, 414.400000, 449.800000, 477.300000, 151.684876,   0.042000, 492.312998, 547.610682
Outstanding requests per worker:
5906 4237 0 5979 4540 0 6071 4400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95772.5,      478863,     430874,      47989,     331278,      99596, 390.622247, 650.900000, 677.700000, 700.400000, 244.211168,   0.042000, 714.286983, 595.060609
Outstanding requests per worker:
8559 6599 1 8679 6954 0 8817 6522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95921.5,      479608,     431304,      48304,     342256,      89048, 531.346972, 844.100000, 873.100000, 898.100000, 324.797832,   0.042000, 917.841971, 621.682048
Outstanding requests per worker:
11135 9105 0 11139 9011 0 9887 8654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95857.5,      479288,     431283,      48005,     349312,      81971, 663.756053, 1048.900000, 1091.500000, 1123.800000, 402.796601,   0.042000, 1136.479974, 639.765458
Outstanding requests per worker:
14030 10750 0 13952 11178 0 10421 10704 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95991.1,      479956,     432116,      47840,     355466,      76650, 773.173302, 1254.000000, 1297.500000, 1352.900000, 472.798759,   0.042000, 1367.120981, 653.827572
Outstanding requests per worker:
16868 12540 0 14894 12988 0 10514 12393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96076.7,      480384,     432535,      47849,     359656,      72879, 861.381968, 1405.900000, 1511.900000, 1592.800000, 532.522588,   0.042000, 1617.634058, 663.295306
Outstanding requests per worker:
19971 14241 0 15255 14475 0 11137 13765 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:56   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 92992 pts/0    Sl+  02:56   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257674126      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3124773691      L1-dcache-loads:u                                           
        1254505104      armv8_pmuv3_0/l2d_cache/:u                                   
         361574554      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870591772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2283532800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2267083264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2250633728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234184192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034645.033069,       0.0,      188835,     169985,      18850,     108017,      61968,  56.497584, 131.000000, 141.000000, 150.300000,  50.416229,   0.000000, 155.718997, 448.978933
Outstanding requests per worker:
1937 1915 0 1836 1916 0 1857 1785 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95890.9,      479455,     431676,      47779,     312975,     118701, 220.054707, 393.100000, 408.500000, 429.600000, 147.298227,   0.042000, 448.033005, 547.242052
Outstanding requests per worker:
5265 5298 0 5287 5597 1 5272 5101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96792.3,      483962,     435327,      48635,     335287,     100040, 395.616028, 611.000000, 624.300000, 658.800000, 239.763684,   0.042000, 675.379992, 596.543334
Outstanding requests per worker:
7939 7957 0 7877 8451 0 7981 7700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97307.7,      486539,     437752,      48787,     347429,      90323, 543.787427, 797.600000, 817.100000, 839.300000, 323.323583,   0.041000, 851.695001, 622.308535
Outstanding requests per worker:
9964 10292 1 10269 10625 1 10452 9797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97526.7,      487634,     438713,      48921,     355737,      82976, 670.011518, 961.600000, 976.900000, 1001.300000, 395.902024,   0.042000, 1012.169003, 641.177670
Outstanding requests per worker:
12039 12127 0 12272 12625 0 12227 12106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97577.5,      487888,     439658,      48230,     362057,      77601, 783.144433, 1112.400000, 1128.800000, 1163.600000, 461.539099,   0.042000, 1179.003954, 655.807312
Outstanding requests per worker:
14140 14198 0 14708 13737 0 12417 13806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96920.7,      484604,     435841,      48763,     363243,      72598, 877.752148, 1281.900000, 1313.500000, 1343.000000, 523.790302,   0.042000, 1365.334988, 665.790573
Outstanding requests per worker:
16530 17070 0 16833 14940 0 12744 14307 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:57   0:00 /usr/lib/linux
memcache      8  212  0.0 333248 98432 pts/0    Sl+  02:57   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         261296403      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3163134542      L1-dcache-loads:u                                           
        1268956978      armv8_pmuv3_0/l2d_cache/:u                                   
         372882155      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020688141 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3018977792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002528256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986078720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969629184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034694.033118,       0.0,      186763,     168227,      18536,     107005,      61222,  66.820899, 153.800000, 174.100000, 192.800000,  60.941470,   0.000000, 201.692000, 449.242197
Outstanding requests per worker:
2429 1958 1 2432 1975 1 2519 2002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95613.1,      478066,     429867,      48199,     311889,     117978, 249.066216, 436.800000, 473.900000, 501.700000, 166.415642,   0.042000, 513.433993, 547.198403
Outstanding requests per worker:
6333 5452 1 6202 5511 0 6395 5380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96704.1,      483521,     435036,      48485,     335458,      99578, 433.526733, 680.000000, 708.800000, 731.000000, 264.051519,   0.041000, 738.767028, 596.439964
Outstanding requests per worker:
9217 7939 0 9223 8184 1 9198 8027 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96785.7,      483929,     435559,      48370,     346028,      89531, 584.697733, 878.300000, 929.000000, 967.700000, 351.635233,   0.041000, 994.759023, 622.970130
Outstanding requests per worker:
9865 10166 1 12170 10530 0 12443 10321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96704.1,      483521,     435402,      48119,     352957,      82445, 699.339780, 1051.600000, 1139.900000, 1221.900000, 422.594376,   0.042000, 1268.612027, 640.538121
Outstanding requests per worker:
9212 11960 1 14747 12607 0 11982 12438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96060.5,      480303,     431932,      48371,     355519,      76413, 776.198914, 1203.900000, 1251.600000, 1290.000000, 473.400479,   0.042000, 1319.929004, 653.977068
Outstanding requests per worker:
9806 13011 1 14843 14093 0 11097 15207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95765.5,      478828,     430546,      48282,     358691,      71855, 816.719147, 1287.500000, 1341.000000, 1437.400000, 505.210492,   0.042000, 1454.174995, 665.685943
Outstanding requests per worker:
10339 12050 1 13885 13942 0 11668 18183 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:58   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 96128 pts/0    Sl+  02:58   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253228331      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3103340241      L1-dcache-loads:u                                           
        1217485884      armv8_pmuv3_0/l2d_cache/:u                                   
         388999978      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161009239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2371875328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034742.033166,       0.0,      187428,     168622,      18806,     107789,      60833,  62.254813, 144.400000, 164.200000, 182.500000,  56.981230,   0.000000, 191.661000, 452.067951
Outstanding requests per worker:
1830 2297 0 1891 2394 0 1903 2340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95713.5,      478568,     430994,      47574,     312356,     118638, 240.097734, 422.600000, 459.100000, 489.300000, 161.008547,   0.042000, 504.631996, 546.539170
Outstanding requests per worker:
5089 6181 0 5302 6289 0 5228 6022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96879.7,      484399,     435826,      48573,     336023,      99803, 416.482257, 655.200000, 681.800000, 711.000000, 254.137568,   0.043000, 722.115993, 597.109516
Outstanding requests per worker:
7468 8919 0 7986 9022 0 7748 8611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97113.5,      485568,     437169,      48399,     347218,      89951, 563.234674, 843.800000, 876.900000, 917.800000, 337.635207,   0.043000, 935.083985, 622.444670
Outstanding requests per worker:
9714 11680 0 10417 10914 0 9993 10381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96846.1,      484231,     435554,      48677,     352945,      82609, 685.841355, 1021.000000, 1100.700000, 1183.800000, 412.180745,   0.043000, 1206.575036, 639.990116
Outstanding requests per worker:
11543 15093 0 12424 11946 0 12001 10503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96598.1,      482991,     434629,      48362,     357299,      77330, 777.768995, 1248.600000, 1361.800000, 1431.600000, 477.058752,   0.043000, 1478.806973, 653.567769
Outstanding requests per worker:
13695 16702 0 12882 11209 0 13988 10627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96085.3,      480427,     432201,      48226,     359795,      72406, 841.946585, 1375.800000, 1429.900000, 1474.700000, 522.344359,   0.043000, 1505.290985, 664.711683
Outstanding requests per worker:
16271 16494 0 13926 11597 0 15335 10445 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:59   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 99008 pts/0    Sl+  02:59   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259405410      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3155417387      L1-dcache-loads:u                                           
        1262593196      armv8_pmuv3_0/l2d_cache/:u                                   
         370064340      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.789212701 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2638279168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034791.033215,       0.0,      181709,     163375,      18334,     103599,      59776,   0.924472,   2.300000,   2.600000,   3.000000,   0.781607,   0.000000,   3.676000, 446.578589
Outstanding requests per worker:
32 33 0 31 22 0 29 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90897.5,      454488,     408811,      45677,     295005,     113806,   2.643267,   4.500000,   4.900000,   5.700000,   1.685143,   0.042000,   7.638000, 543.688800
Outstanding requests per worker:
40 41 0 40 45 0 47 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90907.1,      454536,     409423,      45113,     314411,      95012,   3.218309,   5.200000,   5.500000,   6.100000,   1.933025,   0.042000,   7.861000, 593.745522
Outstanding requests per worker:
61 47 0 57 56 0 41 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90898.5,      454493,     408819,      45674,     323120,      85699,   4.139982,   6.400000,   6.800000,   7.900000,   2.475848,   0.042000,  11.731000, 617.887801
Outstanding requests per worker:
71 60 0 57 67 0 65 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90897.1,      454486,     409273,      45213,     330512,      78761,   5.133787,   7.800000,   8.200000,  10.000000,   3.057088,   0.043000,  12.462000, 637.943470
Outstanding requests per worker:
85 80 0 83 80 0 71 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90807.3,      454037,     408611,      45426,     335412,      73199,   7.441663,  14.500000,  16.100000,  18.200000,   5.140871,   0.042000,  21.144001, 652.231518
Outstanding requests per worker:
216 105 0 197 181 0 184 141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90631.5,      453158,     407854,      45304,     338559,      69295,  18.038531,  32.000000,  35.500000,  46.700000,  12.403128,   0.043000,  49.981002, 662.386847
Outstanding requests per worker:
559 369 0 337 407 0 398 369 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:00   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 95104 pts/0    Sl+  03:00   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247147231      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2966980303      L1-dcache-loads:u                                           
        1202041980      armv8_pmuv3_0/l2d_cache/:u                                   
         373491297      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290227059 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2899440128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2882990592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2866541056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2850091520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2833641984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034839.033263,       0.0,      181690,     163509,      18181,     103780,      59729,   1.717769,   4.900000,   5.400000,   5.900000,   1.858140,   0.000000,   6.794000, 446.014623
Outstanding requests per worker:
54 9 0 57 5 0 55 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90813.5,      454068,     408611,      45457,     295960,     112651,   4.549775,  13.300000,  16.100000,  18.000000,   4.942444,   0.044000,  20.763000, 545.310234
Outstanding requests per worker:
193 35 0 198 49 0 189 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90599.5,      452998,     407644,      45354,     313117,      94527,  14.860557,  44.700000,  53.000000,  62.000000,  18.517026,   0.044000,  68.572000, 594.094610
Outstanding requests per worker:
696 49 0 766 47 0 680 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90530.3,      452652,     407755,      44897,     322754,      85001,  34.830595, 102.800000, 110.700000, 122.100000,  43.259208,   0.044000, 128.255993, 619.592429
Outstanding requests per worker:
1276 43 0 1431 47 0 1375 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90460.7,      452304,     407193,      45111,     329174,      78019,  58.299178, 166.500000, 178.800000, 188.900000,  73.081027,   0.043000, 192.846000, 638.158360
Outstanding requests per worker:
1999 81 0 2138 39 0 2187 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90480.5,      452403,     407488,      44915,     334353,      73135,  82.850933, 231.100000, 239.300000, 250.500000, 103.965679,   0.043000, 259.644985, 651.793857
Outstanding requests per worker:
2698 71 0 2777 81 0 2945 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90507.7,      452539,     407663,      44876,     338401,      69262, 106.285081, 293.300000, 303.900000, 313.400000, 133.389992,   0.043000, 320.304006, 662.034889
Outstanding requests per worker:
3360 76 0 3509 52 0 3614 83 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:00   0:00 /usr/lib/linux
memcache      8  208  0.0 327104 91648 pts/0    Sl+  03:00   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245409016      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2960343352      L1-dcache-loads:u                                           
        1194722630      armv8_pmuv3_0/l2d_cache/:u                                   
         372468537      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080161778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2414408192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2397958656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381509120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365059584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 2106520064
Creating worker on tid 2090070528
starting receive base loop
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034888.033312,       0.0,      183064,     164528,      18536,     104730,      59798,   5.179231,  15.500000,  18.400000,  24.500000,   6.065918,   0.000000,  29.872000, 449.644595
Outstanding requests per worker:
321 59 0 162 53 0 254 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91164.9,      455825,     410396,      45429,     297018,     113378,  29.327705,  99.100000, 115.300000, 132.100000,  39.098675,   0.044000, 139.331996, 544.893522
Outstanding requests per worker:
1593 115 0 1459 83 0 1558 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91010.9,      455055,     409565,      45490,     314865,      94700,  77.441588, 217.700000, 228.300000, 261.000000,  90.530007,   0.042000, 269.641995, 593.986014
Outstanding requests per worker:
3076 286 0 2671 455 0 2659 485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90778.7,      453894,     408752,      45142,     323667,      85085, 136.854505, 317.100000, 331.900000, 368.900000, 128.510663,   0.043000, 376.080990, 619.558620
Outstanding requests per worker:
4283 1086 0 3818 1230 1 3842 1283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90837.9,      454190,     408716,      45474,     330364,      78352, 198.933526, 413.900000, 422.800000, 445.100000, 160.010754,   0.044000, 455.294997, 639.204724
Outstanding requests per worker:
5205 2042 0 4906 2198 0 4847 1949 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90916.7,      454584,     409173,      45411,     335771,      73402, 258.412785, 498.500000, 509.000000, 527.200000, 189.723833,   0.043000, 539.263010, 651.804029
Outstanding requests per worker:
6189 2815 0 5935 2770 0 5800 2853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90878.1,      454391,     408750,      45641,     339806,      68944, 314.908889, 594.400000, 608.400000, 618.800000, 224.805328,   0.043000, 631.703019, 662.903834
Outstanding requests per worker:
7238 3365 0 7130 3496 0 7034 3514 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:01   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 93056 pts/0    Sl+  03:01   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247935951      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2964964998      L1-dcache-loads:u                                           
        1201942006      armv8_pmuv3_0/l2d_cache/:u                                   
         392081419      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870827727 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2992566784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2976117248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034936.033360,       0.0,      182942,     164448,      18494,     104573,      59875,   6.147441,  15.300000,  20.700000,  30.900000,   6.712848,   0.000000,  35.105001, 448.707281
Outstanding requests per worker:
55 396 0 54 203 0 62 267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91014.5,      455073,     409913,      45160,     296511,     113402,  34.910208, 111.200000, 128.100000, 139.600000,  42.649880,   0.042000, 145.195007, 544.774169
Outstanding requests per worker:
264 1661 0 178 1609 0 412 1650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90779.3,      453897,     408123,      45774,     313186,      94937,  94.512595, 225.400000, 239.500000, 253.100000,  86.838928,   0.043000, 259.894013, 592.884625
Outstanding requests per worker:
912 2968 0 1024 2955 0 990 2845 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90799.1,      453996,     408622,      45374,     322694,      85928, 157.943044, 328.900000, 343.500000, 357.300000, 124.407592,   0.043000, 362.480015, 618.146049
Outstanding requests per worker:
1674 4046 0 1918 4151 0 1702 4035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90803.1,      454016,     408761,      45255,     330458,      78303, 221.068718, 420.900000, 441.000000, 460.000000, 159.864804,   0.043000, 472.433001, 638.205893
Outstanding requests per worker:
2477 5236 0 2717 5422 0 2582 4873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90953.3,      454767,     409340,      45427,     335844,      73496, 280.336777, 514.900000, 534.300000, 560.400000, 194.974321,   0.042000, 572.477996, 651.436666
Outstanding requests per worker:
3113 5923 0 3440 6570 0 3243 6061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90899.9,      454500,     409090,      45410,     339818,      69272, 335.331825, 608.000000, 624.800000, 668.300000, 229.609480,   0.043000, 676.186979, 662.618742
Outstanding requests per worker:
3800 7025 0 4167 7769 0 3761 7125 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:02   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 93376 pts/0    Sl+  03:02   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248061845      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2965946361      L1-dcache-loads:u                                           
        1198936794      armv8_pmuv3_0/l2d_cache/:u                                   
         374483400      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879492362 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2615472640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2599023104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582573568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566124032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576034984.033408,       0.0,      185467,     166892,      18575,     105603,      61289,   4.534172,   8.100000,   9.800000,  14.400000,   3.426867,   0.000000,  16.706999, 446.146029
Outstanding requests per worker:
183 63 0 92 87 0 139 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92194.7,      460974,     414756,      46218,     299991,     114765,  26.461930,  67.700000,  81.600000,  96.000000,  25.758879,   0.043000, 103.914000, 545.239628
Outstanding requests per worker:
1128 471 0 989 562 0 1183 506 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91804.3,      459022,     412996,      46026,     317153,      95843,  84.639543, 171.600000, 184.600000, 192.800000,  61.322569,   0.043000, 209.728003, 594.097359
Outstanding requests per worker:
2421 1246 0 2199 1396 0 2242 1483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91855.3,      459277,     413727,      45550,     327960,      85767, 150.305887, 265.200000, 274.600000, 284.300000,  97.319260,   0.043000, 290.019006, 621.178487
Outstanding requests per worker:
3334 2205 0 3238 2309 0 3356 2412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92001.3,      460007,     414047,      45960,     334398,      79649, 209.172592, 339.500000, 352.500000, 361.300000, 128.619824,   0.043000, 366.560996, 637.321961
Outstanding requests per worker:
4243 3028 0 4061 3007 0 4211 3448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92030.7,      460154,     413956,      46198,     339991,      73965, 262.288749, 413.700000, 422.400000, 436.400000, 158.660107,   0.043000, 445.535004, 652.216424
Outstanding requests per worker:
4953 3751 0 4941 3893 0 5165 4302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92087.5,      460438,     414548,      45890,     344205,      70343, 312.982095, 482.700000, 494.800000, 508.300000, 187.554798,   0.043000, 514.747024, 662.193444
Outstanding requests per worker:
5717 4437 0 5921 4705 0 5960 4999 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:03   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 97728 pts/0    Sl+  03:03   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244207353      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3000370419      L1-dcache-loads:u                                           
        1207633465      armv8_pmuv3_0/l2d_cache/:u                                   
         369826533      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.932864458 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2520576512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2504126976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035033.033457,       0.0,      184539,     166176,      18363,     105158,      61018,   8.946687,  27.500000,  33.700000,  38.100000,  10.634934,   0.000000,  45.862999, 445.724551
Outstanding requests per worker:
433 69 0 443 64 0 507 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91809.3,      459047,     413066,      45981,     298165,     114901,  48.334095, 145.400000, 163.700000, 180.700000,  55.828848,   0.042000, 192.843005, 543.038974
Outstanding requests per worker:
2240 307 0 1920 668 0 2151 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91730.9,      458655,     412821,      45834,     316363,      96458, 116.595152, 272.200000, 297.300000, 315.700000, 104.939881,   0.042000, 327.600986, 591.957805
Outstanding requests per worker:
3798 972 0 3102 1363 0 3660 1333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91681.9,      458410,     412532,      45878,     326669,      85863, 187.836124, 384.700000, 410.200000, 433.500000, 145.826188,   0.042000, 445.598006, 619.962628
Outstanding requests per worker:
5159 2031 0 4370 2246 0 4843 2314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91779.7,      458899,     412964,      45935,     333048,      79916, 258.381002, 495.200000, 514.800000, 540.100000, 184.951609,   0.042000, 551.717997, 636.243491
Outstanding requests per worker:
6394 2821 0 5640 3080 0 6125 3165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91700.3,      458502,     412813,      45689,     338543,      74270, 325.630503, 612.200000, 643.000000, 675.900000, 229.880380,   0.042000, 692.659974, 650.661244
Outstanding requests per worker:
8040 3533 0 6913 3899 0 7568 3911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91762.1,      458811,     412994,      45817,     342210,      70784, 394.510736, 745.300000, 766.900000, 801.700000, 276.656234,   0.043000, 813.153028, 660.884158
Outstanding requests per worker:
9448 4238 0 8212 4577 0 9027 4732 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  03:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:04   0:00 /usr/lib/linux
memcache      8  205  0.0 327104 95808 pts/0    Sl+  03:04   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247816681      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2993863386      L1-dcache-loads:u                                           
        1204226678      armv8_pmuv3_0/l2d_cache/:u                                   
         364212071      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869835494 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3045192192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028742656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035081.033505,       0.0,      181006,     162766,      18240,     103179,      59587,  28.216770,  50.700000,  62.900000,  99.100000,  24.482861,   0.000000, 102.312997, 446.622003
Outstanding requests per worker:
580 1107 0 690 1134 1 575 1040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90809.1,      454046,     408946,      45100,     295297,     113649, 111.008464, 207.800000, 221.600000, 258.800000,  78.724621,   0.041000, 275.144011, 542.744296
Outstanding requests per worker:
2413 2954 0 2487 3183 1 2338 2851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91231.9,      456160,     410296,      45864,     314876,      95420, 217.042217, 342.500000, 363.700000, 404.700000, 133.014506,   0.042000, 410.425991, 593.298075
Outstanding requests per worker:
3864 4521 0 3954 4712 1 3763 4393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91355.1,      456776,     411325,      45451,     325544,      85781, 312.785695, 484.600000, 496.200000, 542.800000, 188.138698,   0.041000, 547.330022, 619.133274
Outstanding requests per worker:
5075 6138 0 5003 6281 1 5091 5933 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91503.7,      457519,     411805,      45714,     333291,      78514, 398.177232, 603.800000, 628.700000, 662.700000, 237.947278,   0.042000, 668.420970, 638.687847
Outstanding requests per worker:
6382 7443 0 6166 7675 0 6259 7292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91536.1,      457681,     412074,      45607,     337721,      74353, 480.073051, 721.800000, 744.000000, 765.100000, 285.358463,   0.041000, 768.546999, 650.990589
Outstanding requests per worker:
7480 8888 0 7411 8867 1 7472 8562 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91355.5,      456778,     411347,      45431,     341431,      69916, 564.933743, 852.700000, 859.200000, 901.400000, 336.224409,   0.042000, 907.671988, 661.656565
Outstanding requests per worker:
8633 10425 0 8830 10499 1 8847 9809 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:04   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 93952 pts/0    Sl+  03:04   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  03:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240245939      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2925648855      L1-dcache-loads:u                                           
        1160434299      armv8_pmuv3_0/l2d_cache/:u                                   
         362450507      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061530420 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2894393856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877944320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861494784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2845045248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828595712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035129.033553,       0.0,      182675,     164222,      18453,     104862,      59360,  23.792705,  69.800000,  76.200000,  86.600000,  27.483440,   0.000000,  93.895003, 450.963129
Outstanding requests per worker:
816 1015 0 779 1080 1 904 1061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91245.9,      456230,     410809,      45421,     297507,     113302, 137.403398, 263.700000, 277.200000, 285.000000,  97.202806,   0.041000, 301.137000, 545.932316
Outstanding requests per worker:
3309 3342 1 3259 3341 0 3286 3522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91965.5,      459828,     413535,      46293,     317823,      95712, 268.152397, 415.500000, 441.200000, 450.300000, 162.476319,   0.042000, 454.037994, 593.805719
Outstanding requests per worker:
5210 4900 0 5152 5024 1 5257 5308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92113.9,      460570,     414243,      46327,     328499,      85744, 379.128355, 566.500000, 581.200000, 590.400000, 225.548797,   0.042000, 594.702005, 620.959080
Outstanding requests per worker:
6791 6757 0 6720 6727 1 6934 6983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92155.1,      460776,     414984,      45792,     335615,      79369, 484.075198, 708.600000, 715.500000, 724.800000, 285.836539,   0.042000, 738.605976, 638.261846
Outstanding requests per worker:
8386 8474 0 8323 8500 1 8432 8661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92085.7,      460429,     414429,      46000,     340986,      73443, 592.232020, 853.900000, 862.300000, 874.300000, 349.181020,   0.042000, 880.285978, 652.987192
Outstanding requests per worker:
9949 10340 0 10023 10191 1 10155 10337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92203.3,      461017,     415205,      45812,     344815,      70390, 699.331733, 993.800000, 1003.800000, 1021.800000, 411.013784,   0.041000, 1031.072974, 662.102236
Outstanding requests per worker:
11632 11834 0 11439 11789 1 11806 12103 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:05   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 93440 pts/0    Sl+  03:05   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241879436      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        2956718059      L1-dcache-loads:u                                           
        1165316285      armv8_pmuv3_0/l2d_cache/:u                                   
         357985538      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.979784775 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2156130816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139681280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123231744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106782208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090332672
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035178.033602,       0.0,      185871,     167509,      18362,     106895,      60614,  13.121005,  40.400000,  48.000000,  59.100000,  15.512074,   0.000000,  66.211000, 450.919885
Outstanding requests per worker:
100 612 1 138 669 0 161 773 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92437.9,      462190,     415839,      46351,     300642,     115197,  70.542191, 186.700000, 206.600000, 225.200000,  69.019138,   0.042000, 233.282000, 544.399378
Outstanding requests per worker:
824 2576 1 973 2662 0 1135 2724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92504.7,      462524,     416238,      46286,     319522,      96716, 158.855727, 326.100000, 341.100000, 353.600000, 120.164621,   0.042000, 364.199996, 593.813227
Outstanding requests per worker:
1786 4151 0 2215 4275 0 2371 4191 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92642.3,      463212,     416942,      46270,     330535,      86407, 240.180329, 443.600000, 461.700000, 485.300000, 165.009743,   0.042000, 499.090999, 620.645968
Outstanding requests per worker:
2793 5450 1 3453 5589 0 3273 5852 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92621.3,      463107,     416976,      46131,     337290,      79686, 318.102754, 571.800000, 593.100000, 610.100000, 212.258014,   0.043000, 620.568991, 638.920916
Outstanding requests per worker:
3824 6859 1 4533 7223 0 4216 7284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92640.5,      463203,     417026,      46177,     342825,      74201, 396.973898, 703.300000, 720.400000, 738.800000, 262.637540,   0.042000, 752.606988, 652.738167
Outstanding requests per worker:
4764 8574 1 5264 8721 0 5232 8831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92584.1,      462921,     416471,      46450,     345747,      70724, 478.639290, 847.700000, 874.900000, 895.600000, 318.401230,   0.041000, 903.604984, 662.184171
Outstanding requests per worker:
5473 10027 1 6086 10624 0 6275 10595 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:06   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 92288 pts/0    Sl+  03:06   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         239633188      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        2978287888      L1-dcache-loads:u                                           
        1164443704      armv8_pmuv3_0/l2d_cache/:u                                   
         370152614      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161094885 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326131200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309681664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293232128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035226.033650,       0.0,      186307,     167588,      18719,     106579,      61009,  21.574015,  57.900000,  70.800000,  80.100000,  21.880366,   0.000000,  86.791001, 447.846606
Outstanding requests per worker:
944 511 0 1024 359 1 969 427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92822.3,      464112,     417913,      46199,     302684,     115229, 109.365805, 236.200000, 259.400000, 278.400000,  84.984679,   0.042000, 295.370996, 545.031846
Outstanding requests per worker:
3292 2040 0 3289 2011 0 3498 2212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93383.7,      466919,     420287,      46632,     323081,      97206, 220.242392, 392.100000, 412.000000, 428.800000, 142.999565,   0.043000, 437.734991, 593.749098
Outstanding requests per worker:
5052 3398 0 5126 3287 0 5185 3600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93531.1,      467656,     420916,      46740,     333651,      87265, 312.876278, 527.700000, 544.000000, 578.700000, 196.920055,   0.042000, 593.107998, 620.630722
Outstanding requests per worker:
6434 4798 0 6613 4458 0 7054 4873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93576.9,      467885,     421095,      46790,     340611,      80484, 399.385155, 663.500000, 681.100000, 711.800000, 248.656272,   0.042000, 732.263029, 639.360926
Outstanding requests per worker:
8185 5775 0 8192 5711 0 8708 6012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93488.9,      467445,     421055,      46390,     345926,      75129, 491.015852, 809.500000, 824.500000, 857.100000, 305.435130,   0.041000, 874.047995, 653.314538
Outstanding requests per worker:
9916 7038 0 9809 6870 0 10394 7334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93466.5,      467333,     420356,      46977,     349514,      70842, 582.242122, 947.200000, 968.100000, 1007.400000, 360.436274,   0.042000, 1016.059995, 663.850091
Outstanding requests per worker:
11612 8271 0 11508 8240 0 12091 8539 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:07   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95872 pts/0    Sl+  03:07   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247712920      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3044686960      L1-dcache-loads:u                                           
        1212704596      armv8_pmuv3_0/l2d_cache/:u                                   
         369365969      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940348304 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2261512704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245063168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228613632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035275.033699,       0.0,      185951,     167380,      18571,     106690,      60690,  20.655532,  73.000000,  85.300000,  93.300000,  25.074299,   0.000000,  97.332001, 450.629514
Outstanding requests per worker:
1137 466 1 962 436 0 1135 458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92584.3,      462922,     416658,      46264,     301605,     115053, 119.167067, 261.800000, 302.100000, 332.100000,  96.964696,   0.043000, 338.019997, 544.790658
Outstanding requests per worker:
3988 2186 1 3633 2083 0 3874 2136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93452.7,      467264,     420579,      46685,     323674,      96905, 240.879569, 445.500000, 454.800000, 465.700000, 161.847759,   0.042000, 474.325001, 594.948478
Outstanding requests per worker:
5641 3752 0 5225 3316 0 5426 3511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93942.9,      469715,     422886,      46829,     335514,      87372, 313.359299, 511.700000, 535.600000, 551.600000, 195.653472,   0.042000, 559.973001, 621.105404
Outstanding requests per worker:
6657 4975 1 6067 4390 0 6481 4804 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93688.9,      468445,     422029,      46416,     341585,      80444, 391.380432, 617.900000, 642.000000, 661.900000, 238.141284,   0.041000, 669.405997, 639.100713
Outstanding requests per worker:
7863 6326 0 7231 5771 1 7933 6019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93692.3,      468462,     421493,      46969,     346494,      74999, 469.841841, 727.200000, 752.100000, 772.300000, 282.558231,   0.042000, 778.900981, 652.851053
Outstanding requests per worker:
9099 7600 1 8569 7083 0 9256 7298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93470.1,      467351,     421005,      46346,     349552,      71453, 555.829293, 843.700000, 871.400000, 897.500000, 332.379604,   0.042000, 910.094976, 663.427275
Outstanding requests per worker:
10529 9213 1 9960 8572 0 10823 8693 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:08   0:00 /usr/lib/linux
memcache      8  206  0.0 329152 97792 pts/0    Sl+  03:08   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249159156      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3032998982      L1-dcache-loads:u                                           
        1209748761      armv8_pmuv3_0/l2d_cache/:u                                   
         375298804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780708444 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2225402368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2208952832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192503296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176053760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159604224
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035323.033747,       0.0,      185844,     167230,      18614,     106317,      60913,  34.823804,  90.200000, 108.400000, 123.100000,  34.784953,   0.000000, 133.693993, 449.373569
Outstanding requests per worker:
1484 841 0 1602 734 0 1469 870 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93250.9,      466255,     419631,      46624,     303779,     115852, 157.197312, 323.900000, 353.300000, 379.300000, 116.228178,   0.042000, 392.132998, 544.809187
Outstanding requests per worker:
4615 2926 0 4724 3009 0 4419 3017 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93836.9,      469185,     422551,      46634,     325207,      97344, 300.265120, 528.300000, 555.500000, 584.700000, 194.685360,   0.041000, 599.743009, 595.260250
Outstanding requests per worker:
7046 4909 0 7208 4806 0 6837 4695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94244.3,      471222,     424388,      46834,     336422,      87966, 418.522469, 704.800000, 726.300000, 746.300000, 263.553876,   0.043000, 759.833992, 621.292226
Outstanding requests per worker:
8909 6356 0 9133 6582 0 8976 6309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94185.9,      470930,     424027,      46903,     343420,      80607, 532.478535, 873.100000, 897.500000, 920.400000, 330.456644,   0.042000, 926.800013, 640.301990
Outstanding requests per worker:
10906 8068 0 11149 8246 0 11128 7800 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94392.3,      471962,     424900,      47062,     349392,      75508, 641.710844, 1026.400000, 1046.800000, 1069.800000, 394.047362,   0.043000, 1081.359029, 653.130148
Outstanding requests per worker:
12687 9480 0 12817 9826 0 13022 9468 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94394.7,      471974,     424705,      47269,     353791,      70914, 744.512930, 1166.900000, 1183.000000, 1209.900000, 452.922425,   0.042000, 1223.072052, 665.313064
Outstanding requests per worker:
14318 11215 0 14524 11394 0 14729 11127 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:08   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 97856 pts/0    Sl+  03:08   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254388861      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3069374781      L1-dcache-loads:u                                           
        1240192664      armv8_pmuv3_0/l2d_cache/:u                                   
         384341171      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.259968224 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2319249920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2302800384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035372.033796,       0.0,      188748,     169851,      18897,     108136,      61715,  20.091612,  46.300000,  54.000000,  60.100000,  18.048264,   0.000000,  67.594998, 450.442582
Outstanding requests per worker:
698 716 0 738 564 1 803 584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93977.9,      469890,     422853,      47037,     306891,     115962, 107.451183, 204.800000, 219.900000, 236.300000,  77.047856,   0.041000, 243.011996, 547.159585
Outstanding requests per worker:
2857 2536 0 2913 2569 0 2901 2409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94437.7,      472189,     425093,      47096,     326926,      98167, 218.886570, 349.300000, 368.400000, 379.500000, 133.791674,   0.042000, 386.572003, 594.959875
Outstanding requests per worker:
4532 4080 0 4651 4093 0 4586 4008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94730.5,      473653,     426676,      46977,     338427,      88249, 310.589805, 468.500000, 484.700000, 502.100000, 184.918779,   0.041000, 516.461015, 620.784705
Outstanding requests per worker:
5892 5573 0 6216 5209 1 6041 5329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94533.9,      472670,     425540,      47130,     344939,      80601, 400.220304, 610.300000, 632.800000, 652.500000, 238.953908,   0.042000, 666.516006, 640.429880
Outstanding requests per worker:
7776 6788 0 8021 6594 1 7747 6620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94446.7,      472234,     425067,      47167,     349334,      75733, 499.094962, 759.600000, 780.100000, 799.900000, 298.176672,   0.042000, 815.843999, 653.483079
Outstanding requests per worker:
9625 8158 0 9816 8086 1 9456 8144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94409.5,      472048,     425079,      46969,     353849,      71230, 599.785698, 903.400000, 924.100000, 941.600000, 357.518349,   0.041000, 956.367016, 664.234058
Outstanding requests per worker:
11335 9667 0 11521 9495 1 11336 9865 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:09   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 94720 pts/0    Sl+  03:09   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249900111      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3074083307      L1-dcache-loads:u                                           
        1226048228      armv8_pmuv3_0/l2d_cache/:u                                   
         364700955      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880930252 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2328687104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2312237568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2295788032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035420.033844,       0.0,      186365,     167778,      18587,     106732,      61046,  44.166415, 103.500000, 121.500000, 141.200000,  41.110812,   0.000000, 152.381003, 448.763539
Outstanding requests per worker:
1141 1581 0 1303 1775 1 1206 1836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94066.9,      470335,     423391,      46944,     306329,     117062, 184.941123, 332.500000, 361.600000, 398.100000, 126.678735,   0.041000, 420.215994, 544.978462
Outstanding requests per worker:
3928 4534 0 4056 4757 0 3951 5131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94915.5,      474578,     427082,      47496,     328645,      98437, 336.579009, 538.300000, 566.100000, 608.700000, 206.636870,   0.042000, 623.741984, 595.085712
Outstanding requests per worker:
6129 7112 0 6001 6956 1 5838 7605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95098.7,      475494,     427983,      47511,     339854,      88129, 466.380059, 729.000000, 752.000000, 808.400000, 282.592874,   0.042000, 820.438027, 622.308501
Outstanding requests per worker:
8045 9161 0 7957 9212 1 7611 9993 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95392.9,      476965,     429201,      47764,     347330,      81871, 584.953084, 892.200000, 919.400000, 965.000000, 350.759939,   0.041000, 981.993020, 638.589139
Outstanding requests per worker:
9668 10943 0 9701 11278 1 9300 11964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95193.3,      475967,     428658,      47309,     352615,      76043, 697.292217, 1046.900000, 1080.600000, 1129.400000, 417.138371,   0.041000, 1148.195028, 653.179259
Outstanding requests per worker:
11653 11994 1 11737 13319 1 10995 13985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94878.3,      474392,     427075,      47317,     355185,      71890, 812.705493, 1230.200000, 1279.600000, 1336.200000, 486.355609,   0.042000, 1346.071959, 663.854356
Outstanding requests per worker:
13625 13056 0 13900 15701 1 13082 16399 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:10   0:00 /usr/lib/linux
memcache      7  212  0.0 330176 97536 pts/0    Sl+  03:10   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251019230      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3088981689      L1-dcache-loads:u                                           
        1232874809      armv8_pmuv3_0/l2d_cache/:u                                   
         374101456      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.921776504 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2673930752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2657481216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641031680
starting receive base loop
Creating worker on tid 2415915520
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407526912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391077376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374627840
starting receive base loop
Created 8 connections total
Creating worker on tid 2358178304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035469.033893,       0.0,      185557,     167160,      18397,     106092,      61068,  48.103955, 115.700000, 136.400000, 152.600000,  45.584332,   0.000000, 166.586995, 448.276418
Outstanding requests per worker:
2030 1342 0 1835 1387 0 1874 1185 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93857.3,      469287,     422525,      46762,     305519,     117006, 198.624449, 373.700000, 407.700000, 440.500000, 138.259254,   0.042000, 450.325996, 544.220872
Outstanding requests per worker:
5474 4147 0 5233 4049 0 5447 3866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94757.9,      473790,     426348,      47442,     327473,      98875, 360.367074, 606.200000, 632.900000, 653.300000, 225.668903,   0.043000, 661.718011, 594.598080
Outstanding requests per worker:
8054 6119 0 8042 6041 0 8054 5949 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95271.9,      476360,     428739,      47621,     339863,      88876, 487.012056, 787.200000, 810.500000, 826.800000, 299.019773,   0.043000, 834.950984, 620.498340
Outstanding requests per worker:
10189 7971 0 10097 7694 0 10138 7641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95184.7,      475924,     428384,      47540,     346733,      81651, 605.740566, 955.800000, 978.300000, 998.700000, 368.450262,   0.043000, 1009.776950, 639.535690
Outstanding requests per worker:
12298 9576 0 12143 9655 1 11802 9681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94863.9,      474320,     427050,      47270,     351152,      75898, 725.933044, 1124.900000, 1177.300000, 1209.900000, 439.972949,   0.043000, 1218.209028, 653.234848
Outstanding requests per worker:
14834 11500 0 14793 11676 0 11325 11489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94768.7,      473844,     426743,      47101,     354860,      71883, 839.402411, 1335.200000, 1367.200000, 1405.200000, 508.410351,   0.042000, 1416.584015, 663.941194
Outstanding requests per worker:
16166 13586 0 17248 13723 0 12999 13726 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:11   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 94016 pts/0    Sl+  03:11   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253282740      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3088869473      L1-dcache-loads:u                                           
        1249434622      armv8_pmuv3_0/l2d_cache/:u                                   
         376478416      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110228032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2945905152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2929455616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913006080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896556544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035517.033941,       0.0,      187575,     168713,      18862,     107293,      61420,  37.659870,  94.300000, 112.400000, 128.600000,  36.614609,   0.000000, 141.803995, 449.447049
Outstanding requests per worker:
1019 1524 1 953 1514 0 878 1726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94296.9,      471485,     424157,      47328,     307765,     116392, 164.656978, 319.600000, 353.400000, 377.700000, 117.428377,   0.042000, 397.044986, 547.039594
Outstanding requests per worker:
3378 4606 0 3286 4603 0 3255 4834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95029.9,      475150,     427480,      47670,     329173,      98307, 307.887139, 527.100000, 551.500000, 590.600000, 195.586012,   0.041000, 606.100023, 595.517470
Outstanding requests per worker:
5114 6924 1 5255 6911 0 5049 7393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95069.1,      475346,     427877,      47469,     339943,      87934, 436.178331, 728.900000, 755.800000, 788.000000, 272.556689,   0.042000, 806.722999, 622.115461
Outstanding requests per worker:
6828 9382 1 6888 9412 1 6801 9834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95024.1,      475121,     427780,      47341,     346526,      81254, 563.794670, 926.000000, 950.800000, 984.900000, 350.846589,   0.042000, 1001.739979, 639.867878
Outstanding requests per worker:
8596 11725 0 8992 11861 0 8495 12205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95135.7,      475679,     428447,      47232,     352547,      75900, 691.274084, 1123.200000, 1142.100000, 1182.600000, 427.144632,   0.041000, 1189.841986, 654.426716
Outstanding requests per worker:
10163 13936 1 10833 14249 1 10344 14500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95295.1,      476476,     428434,      48042,     357307,      71127, 808.652616, 1279.600000, 1301.300000, 1336.900000, 495.179627,   0.041000, 1354.778051, 666.261247
Outstanding requests per worker:
12026 16024 1 12747 16080 1 11971 16538 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:12   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 95744 pts/0    Sl+  03:12   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258710660      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        3092893252      L1-dcache-loads:u                                           
        1247250950      armv8_pmuv3_0/l2d_cache/:u                                   
         364859177      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.149516703 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3073896960
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057447424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040997888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035566.033990,       0.0,      188274,     169361,      18913,     108297,      61064,  45.852402, 109.600000, 117.100000, 127.700000,  41.675745,   0.000000, 138.145998, 451.434102
Outstanding requests per worker:
1566 1606 0 1461 1513 0 1685 1519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95074.5,      475373,     427341,      48032,     310216,     117125, 192.818747, 348.300000, 363.100000, 376.800000, 130.210074,   0.042000, 383.161992, 547.446922
Outstanding requests per worker:
4692 4700 0 4397 4737 0 4702 4622 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96044.9,      480225,     432007,      48218,     333006,      99001, 349.378328, 536.300000, 548.300000, 560.800000, 210.688455,   0.042000, 569.132984, 596.090846
Outstanding requests per worker:
6889 7024 0 6872 6992 0 6864 6845 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95853.3,      479267,     431405,      47862,     342539,      88866, 488.130452, 728.800000, 745.600000, 766.100000, 291.840612,   0.043000, 780.709982, 623.096749
Outstanding requests per worker:
9017 9467 0 9267 9621 0 9170 9549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96056.1,      480281,     432369,      47912,     350469,      81900, 631.308407, 923.600000, 943.300000, 964.500000, 374.827228,   0.043000, 973.013997, 639.567943
Outstanding requests per worker:
11057 11927 0 11599 12005 1 11229 11879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95956.1,      479781,     431934,      47847,     355435,      76499, 766.735954, 1112.000000, 1132.000000, 1156.100000, 454.545818,   0.043000, 1163.789988, 653.501810
Outstanding requests per worker:
13391 14274 0 12433 14320 0 13368 14359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95514.5,      477573,     429911,      47662,     357781,      72130, 897.863998, 1303.000000, 1334.000000, 1361.800000, 534.720951,   0.043000, 1372.681975, 664.261354
Outstanding requests per worker:
16217 16847 1 13096 16938 0 16222 16904 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:12   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 95616 pts/0    Sl+  03:12   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259627334      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3125065404      L1-dcache-loads:u                                           
        1256745252      armv8_pmuv3_0/l2d_cache/:u                                   
         371446431      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120940390 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2718626304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702176768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035614.034038,       0.0,      184887,     166434,      18453,     104995,      61439,  74.763394, 154.200000, 164.500000, 173.600000,  58.696807,   0.000000, 182.144001, 444.656410
Outstanding requests per worker:
2103 2153 0 2234 2157 0 2000 2065 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94926.5,      474633,     427282,      47351,     309314,     117968, 229.028196, 399.300000, 431.800000, 472.300000, 151.497832,   0.043000, 501.139998, 545.739804
Outstanding requests per worker:
5712 4795 0 6170 5020 0 5480 4755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95838.3,      479192,     431223,      47969,     332245,      98978, 395.320187, 636.100000, 667.400000, 721.900000, 243.269490,   0.042000, 743.315995, 596.219024
Outstanding requests per worker:
8436 6975 0 9173 7174 0 8109 6738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96177.5,      480888,     432805,      48083,     343625,      89180, 531.953379, 830.500000, 861.200000, 913.000000, 322.383266,   0.043000, 933.699012, 622.731179
Outstanding requests per worker:
10752 8896 0 11134 9206 0 10423 8781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96311.5,      481558,     433757,      47801,     351637,      82120, 650.469634, 990.700000, 1016.200000, 1057.600000, 390.184912,   0.043000, 1071.885943, 641.148922
Outstanding requests per worker:
13216 10447 0 10905 11084 0 12756 10465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96275.1,      481376,     433162,      48214,     356629,      76533, 748.836218, 1168.200000, 1206.200000, 1243.000000, 450.123138,   0.043000, 1280.025005, 654.720479
Outstanding requests per worker:
14327 12249 0 11925 12599 0 15291 12089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96098.9,      480495,     432326,      48169,     360391,      71935, 831.232813, 1282.200000, 1359.700000, 1425.500000, 502.011590,   0.042000, 1443.925023, 665.877523
Outstanding requests per worker:
13957 13929 0 11507 14426 0 17084 13790 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:13   0:00 /usr/lib/linux
memcache      7  207  0.0 332352 100928 pts/0   Sl+  03:13   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257038143      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3121664118      L1-dcache-loads:u                                           
        1246608116      armv8_pmuv3_0/l2d_cache/:u                                   
         365233130      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110453921 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2413752832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2397303296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2380853760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364404224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035663.034087,       0.0,      187940,     169199,      18741,     107871,      61328,  60.942999, 141.500000, 162.500000, 182.500000,  56.174251,   0.000000, 191.857994, 449.866701
Outstanding requests per worker:
2242 1661 0 2300 1821 0 2381 1735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95545.7,      477729,     429700,      48029,     311333,     118367, 236.292297, 429.100000, 466.800000, 496.500000, 161.743744,   0.042000, 509.105980, 545.616358
Outstanding requests per worker:
6355 5141 0 6186 5165 0 6276 5332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96486.1,      482431,     434343,      48088,     334675,      99668, 431.057200, 693.700000, 727.400000, 766.200000, 265.813256,   0.041000, 786.243021, 596.542447
Outstanding requests per worker:
9460 7843 0 9109 7885 0 9821 7964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96779.3,      483897,     435536,      48361,     345907,      89629, 591.897432, 921.300000, 948.600000, 990.400000, 358.624025,   0.042000, 1010.066032, 622.749405
Outstanding requests per worker:
12589 10223 0 11978 10143 1 10863 10298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97005.9,      485030,     436575,      48455,     353867,      82708, 721.987127, 1124.700000, 1169.900000, 1226.100000, 435.390700,   0.041000, 1247.503996, 640.769552
Outstanding requests per worker:
15280 12086 0 14947 12150 1 11447 12308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96954.5,      484773,     436534,      48239,     358870,      77664, 826.310759, 1314.100000, 1364.000000, 1450.400000, 504.296843,   0.042000, 1475.574017, 653.868730
Outstanding requests per worker:
15835 14060 0 17791 13734 1 11332 13897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96635.9,      483180,     434540,      48640,     362022,      72518, 902.773650, 1489.200000, 1539.200000, 1590.800000, 555.584787,   0.041000, 1615.461946, 664.938171
Outstanding requests per worker:
15549 15520 1 18135 15528 0 10683 15502 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:14   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 98752 pts/0    Sl+  03:14   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260148489      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3145226666      L1-dcache-loads:u                                           
        1258141242      armv8_pmuv3_0/l2d_cache/:u                                   
         371548581      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240142025 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2166157824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035712.034136,       0.0,      186034,     167462,      18572,     106225,      61237,  70.510219, 164.300000, 178.300000, 196.100000,  64.034721,   0.000000, 204.345003, 447.403769
Outstanding requests per worker:
2512 2265 0 2446 2166 0 2549 2085 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95517.7,      477589,     429608,      47981,     310892,     118716, 258.384401, 450.400000, 479.200000, 508.500000, 171.221381,   0.042000, 519.845009, 545.758147
Outstanding requests per worker:
6479 5650 1 6464 5906 1 6386 5604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96775.9,      483880,     435683,      48197,     335358,     100325, 444.995253, 684.500000, 707.400000, 738.200000, 269.534747,   0.042000, 748.512030, 595.416475
Outstanding requests per worker:
9343 8334 0 9311 8699 0 8901 8083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97375.1,      486876,     438227,      48649,     348429,      89798, 584.501173, 860.800000, 888.600000, 923.800000, 347.758853,   0.042000, 943.921030, 622.958229
Outstanding requests per worker:
11622 10296 0 9455 10657 0 11470 9985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96627.9,      483140,     434641,      48499,     352540,      82101, 691.020462, 1015.500000, 1058.500000, 1114.600000, 413.295284,   0.042000, 1154.479027, 641.689051
Outstanding requests per worker:
12134 12700 0 11132 11319 0 14204 11537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96009.3,      480047,     432027,      48020,     356306,      75721, 752.262322, 1149.700000, 1182.300000, 1234.700000, 454.906239,   0.042000, 1260.314941, 655.736227
Outstanding requests per worker:
11777 15744 0 10905 11742 0 12431 11470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95982.5,      479913,     432133,      47780,     360043,      72090, 785.097904, 1304.500000, 1413.400000, 1490.600000, 488.365373,   0.042000, 1512.357950, 665.865930
Outstanding requests per worker:
12378 18900 1 9970 11617 0 12908 10996 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:15   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 98816 pts/0    Sl+  03:15   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257757359      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3150543195      L1-dcache-loads:u                                           
        1255034397      armv8_pmuv3_0/l2d_cache/:u                                   
         369468973      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010009144 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506355200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035761.034185,       0.0,      188753,     169935,      18818,     108219,      61716,  56.471719, 131.500000, 141.400000, 157.400000,  50.816985,   0.000000, 164.799005, 449.011004
Outstanding requests per worker:
1755 2040 0 1779 1893 0 1813 2049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95873.3,      479367,     431363,      48004,     312599,     118764, 220.425067, 393.000000, 411.600000, 436.900000, 147.576077,   0.041000, 454.465002, 546.060789
Outstanding requests per worker:
5215 5682 1 5157 5377 0 5054 5507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96981.3,      484907,     436249,      48658,     335802,     100447, 395.546284, 603.600000, 617.200000, 634.000000, 238.566923,   0.043000, 648.734987, 595.915663
Outstanding requests per worker:
7842 8091 0 7787 7772 0 7708 7918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97352.9,      486765,     438490,      48275,     348887,      89603, 534.011085, 781.200000, 794.800000, 811.800000, 317.050995,   0.043000, 821.662009, 624.315535
Outstanding requests per worker:
10259 9548 0 9921 9786 0 10120 10091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97207.1,      486036,     437431,      48605,     354900,      82531, 658.541822, 955.800000, 969.500000, 989.900000, 390.182412,   0.042000, 1002.122045, 641.603062
Outstanding requests per worker:
12384 10067 0 12095 12247 0 12395 12522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97080.5,      485403,     436930,      48473,     359718,      77212, 770.041946, 1126.200000, 1149.900000, 1195.300000, 459.804083,   0.043000, 1211.544037, 654.669267
Outstanding requests per worker:
14560 11027 0 14141 15136 0 14479 11966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97124.5,      485623,     437322,      48301,     364978,      72344, 860.307786, 1301.800000, 1344.200000, 1416.400000, 524.727126,   0.042000, 1435.960054, 666.204355
Outstanding requests per worker:
16603 9744 0 15971 17948 0 16336 13218 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:16   0:00 /usr/lib/linux
memcache      8  212  0.0 332224 94080 pts/0    Sl+  03:16   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259508450      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3163528878      L1-dcache-loads:u                                           
        1264694757      armv8_pmuv3_0/l2d_cache/:u                                   
         389932859      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840293827 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2636378624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035810.034234,       0.0,      181628,     163694,      17934,     103976,      59718,   1.560219,   5.000000,   5.500000,   6.100000,   1.732500,   0.000000,   7.900000, 448.714608
Outstanding requests per worker:
11 38 0 23 54 0 17 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90880.3,      454402,     408850,      45552,     296022,     112828,   3.449980,   7.200000,   7.700000,   8.800000,   2.658296,   0.046000,  10.865000, 545.183573
Outstanding requests per worker:
34 96 0 27 84 0 43 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90712.3,      453562,     408165,      45397,     313002,      95163,   8.535714,  24.900000,  34.500000,  41.700000,  10.475703,   0.044000,  46.695001, 592.931111
Outstanding requests per worker:
45 297 0 58 421 0 51 508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90465.3,      452327,     407216,      45111,     322472,      84744,  26.162857,  81.300000,  91.700000, 104.500000,  32.821423,   0.044000, 108.392999, 619.040406
Outstanding requests per worker:
68 1172 0 76 1026 1 67 1210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90363.7,      451819,     406958,      44861,     328908,      78050,  53.584464, 154.400000, 165.200000, 179.100000,  66.223005,   0.044000, 185.562998, 637.565375
Outstanding requests per worker:
130 1980 0 84 1969 0 104 2101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90532.5,      452663,     407323,      45340,     333851,      73472,  80.345632, 225.200000, 233.200000, 248.200000,  99.659580,   0.044000, 252.447993, 650.369157
Outstanding requests per worker:
77 2555 0 83 2635 0 85 2836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90429.5,      452148,     407040,      45108,     338170,      68870, 103.381762, 282.500000, 289.000000, 302.100000, 126.867846,   0.043000, 308.640987, 663.047455
Outstanding requests per worker:
170 3335 0 151 3332 0 211 3491 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:16   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 93376 pts/0    Sl+  03:16   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243626888      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2964364200      L1-dcache-loads:u                                           
        1195461926      armv8_pmuv3_0/l2d_cache/:u                                   
         367135422      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240964615 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2867327488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2850877952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2834428416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035859.034283,       0.0,      181669,     163549,      18120,     103464,      60085,   1.788617,   4.700000,   5.300000,   6.100000,   1.844223,   0.000000,   7.712000, 445.956863
Outstanding requests per worker:
4 63 0 10 56 0 28 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90824.9,      454125,     408791,      45334,     295927,     112864,   4.561286,  11.500000,  13.500000,  17.900000,   4.499122,   0.044000,  21.407999, 545.789171
Outstanding requests per worker:
38 211 0 46 123 0 37 221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90632.3,      453162,     407729,      45433,     313271,      94458,  14.100181,  43.900000,  54.600000,  65.800000,  18.228563,   0.044000,  69.826998, 593.790096
Outstanding requests per worker:
42 741 0 36 496 0 40 743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91024.1,      455121,     409657,      45464,     324352,      85305,  25.300961,  72.200000,  77.400000,  83.100000,  30.424077,   0.044000,  86.755000, 619.542771
Outstanding requests per worker:
52 511 0 50 426 0 42 486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91175.9,      455880,     410352,      45528,     331505,      78847,   6.593302,  20.500000,  32.800000,  44.000000,   9.696147,   0.043000,  49.676001, 637.672925
Outstanding requests per worker:
70 37 0 58 36 0 47 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90908.7,      454544,     409118,      45426,     336179,      72939,   3.381388,   6.000000,   6.300000,   6.900000,   2.179042,   0.044000,   8.940000, 652.547312
Outstanding requests per worker:
75 35 0 63 44 0 62 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90910.9,      454555,     409068,      45487,     339913,      69155,   3.931666,   6.600000,   7.300000,   8.600000,   2.496254,   0.044000,  11.077000, 663.102531
Outstanding requests per worker:
71 54 0 58 59 0 65 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:17   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 92224 pts/0    Sl+  03:17   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250039537      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2977516371      L1-dcache-loads:u                                           
        1210974584      armv8_pmuv3_0/l2d_cache/:u                                   
         370346881      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151358749 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2454581760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2438132224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035907.034331,       0.0,      182745,     164321,      18424,     104994,      59327,   6.666632,  20.800000,  27.300000,  32.800000,   8.594972,   0.000000,  38.091000, 451.845370
Outstanding requests per worker:
334 47 2 353 38 3 413 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91079.1,      455396,     410168,      45228,     296863,     113305,  36.582427, 124.900000, 141.700000, 159.200000,  49.707975,   0.043000, 169.465005, 545.421627
Outstanding requests per worker:
1947 68 0 1673 60 0 1834 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91157.7,      455789,     409840,      45949,     315314,      94526,  83.609156, 246.200000, 263.400000, 274.800000, 106.243635,   0.043000, 285.149992, 594.968178
Outstanding requests per worker:
3259 100 0 2972 81 0 3160 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91194.9,      455975,     410482,      45493,     325468,      85014, 123.951568, 347.700000, 361.700000, 377.100000, 154.194592,   0.042000, 387.721986, 620.831603
Outstanding requests per worker:
4449 260 0 4130 129 0 4311 237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91049.3,      455247,     409772,      45475,     331472,      78300, 169.500841, 442.200000, 461.400000, 476.300000, 195.692501,   0.044000, 484.973013, 639.342781
Outstanding requests per worker:
5551 621 0 5185 690 0 5484 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90862.5,      454313,     408510,      45803,     335486,      73024, 223.986073, 545.300000, 567.500000, 585.500000, 233.099301,   0.042000, 593.747973, 652.310056
Outstanding requests per worker:
6820 1182 0 6335 1560 0 6701 960 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90809.3,      454047,     408801,      45246,     339589,      69212, 284.291947, 649.500000, 667.800000, 690.100000, 269.804255,   0.043000, 697.264016, 663.295276
Outstanding requests per worker:
7963 1863 0 7593 2207 0 8001 1700 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:18   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 96832 pts/0    Sl+  03:18   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246586724      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2976077932      L1-dcache-loads:u                                           
        1202122508      armv8_pmuv3_0/l2d_cache/:u                                   
         378733924      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179870041 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2575430144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2558980608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576035956.034380,       0.0,      183187,     164732,      18455,     104616,      60116,   4.327997,  13.000000,  16.100000,  18.900000,   5.063135,   0.000000,  22.414001, 447.761667
Outstanding requests per worker:
51 196 0 40 209 0 48 253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91343.1,      456716,     411449,      45267,     297151,     114298,  23.527247,  78.200000,  92.700000, 106.100000,  31.564952,   0.042000, 115.734003, 543.993581
Outstanding requests per worker:
60 1164 0 48 1317 0 69 1236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91230.5,      456153,     410512,      45641,     315320,      95192,  62.452948, 185.000000, 199.200000, 211.400000,  78.468342,   0.042000, 216.578007, 593.180445
Outstanding requests per worker:
151 2381 0 57 2468 0 64 2450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91308.3,      456542,     411423,      45119,     325397,      86026,  99.186109, 277.600000, 288.900000, 299.500000, 122.015992,   0.041000, 305.920005, 618.295394
Outstanding requests per worker:
269 3366 0 109 3504 0 113 3465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91066.3,      455332,     409658,      45674,     331315,      78343, 141.809205, 364.600000, 375.000000, 384.200000, 157.751166,   0.042000, 391.021013, 637.982012
Outstanding requests per worker:
774 4419 0 586 4366 0 668 4484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91030.3,      455152,     409535,      45617,     335822,      73713, 191.340955, 443.100000, 454.000000, 469.100000, 183.865943,   0.042000, 478.516996, 651.371700
Outstanding requests per worker:
1440 5485 1 1223 5148 1 1333 5320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90976.5,      454883,     409666,      45217,     340015,      69651, 241.796558, 522.400000, 537.200000, 560.000000, 210.320507,   0.042000, 569.844007, 662.370931
Outstanding requests per worker:
2138 6527 0 1878 6016 0 2042 6292 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:19   0:00 /usr/lib/linux
memcache      8  209  0.0 327104 96640 pts/0    Sl+  03:19   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247218487      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2976849027      L1-dcache-loads:u                                           
        1198423180      armv8_pmuv3_0/l2d_cache/:u                                   
         365587136      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081087276 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2832331264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2815881728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2799432192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782982656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766533120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036004.034428,       0.0,      184409,     166220,      18189,     105563,      60657,   9.501938,  25.800000,  32.900000,  50.700000,  11.124731,   0.000000,  57.765000, 447.896324
Outstanding requests per worker:
100 653 0 93 354 0 122 399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91553.7,      457769,     412103,      45666,     298374,     113729,  55.262257, 153.300000, 170.600000, 191.000000,  56.620677,   0.041000, 201.027006, 545.371948
Outstanding requests per worker:
794 2324 1 938 2212 0 777 2066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91563.7,      457819,     412065,      45754,     316323,      95742, 136.448893, 278.200000, 290.900000, 304.300000, 102.019350,   0.041000, 309.736997, 593.260122
Outstanding requests per worker:
1839 3586 1 2039 3584 1 1898 3486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91703.3,      458517,     412671,      45846,     326626,      86045, 212.081484, 387.400000, 401.300000, 416.400000, 142.489654,   0.041000, 423.768014, 619.313800
Outstanding requests per worker:
2721 4920 1 2983 4727 0 2937 4775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91681.1,      458406,     412779,      45627,     334087,      78692, 282.459535, 492.500000, 506.500000, 523.000000, 183.531783,   0.041000, 535.480022, 639.144082
Outstanding requests per worker:
3830 6108 0 3836 6211 1 3870 5961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91831.7,      459159,     413348,      45811,     339424,      73924, 351.194238, 598.800000, 616.200000, 634.300000, 225.119497,   0.041000, 644.545019, 652.077192
Outstanding requests per worker:
4857 7362 1 4570 7480 0 4523 7016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91801.1,      459006,     413272,      45734,     343271,      70001, 415.023297, 706.300000, 722.000000, 749.200000, 265.619452,   0.041000, 757.290006, 662.347623
Outstanding requests per worker:
5552 8546 1 5364 8780 0 5369 8333 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:20   0:00 /usr/lib/linux
memcache      7  209  0.0 329152 96064 pts/0    Sl+  03:20   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244619053      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2943233466      L1-dcache-loads:u                                           
        1159726989      armv8_pmuv3_0/l2d_cache/:u                                   
         361566656      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.521186725 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3006525952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990076416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973626880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036053.034477,       0.0,      185313,     166829,      18484,     105942,      60887,   4.117689,   8.300000,  11.200000,  14.300000,   3.341854,   0.000000,  16.969001, 449.148973
Outstanding requests per worker:
173 134 0 165 116 0 114 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92615.7,      463079,     417088,      45991,     301891,     115197,  16.288276,  41.300000,  47.000000,  55.900000,  14.997665,   0.043000,  60.653999, 546.286278
Outstanding requests per worker:
681 209 0 605 307 0 664 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91977.1,      459886,     414130,      45756,     318026,      96104,  56.695602, 115.000000, 125.300000, 136.800000,  41.820851,   0.044000, 143.776000, 593.411559
Outstanding requests per worker:
1563 970 0 1618 990 0 1652 1317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91835.9,      459180,     413236,      45944,     327468,      85768, 119.028632, 201.300000, 211.400000, 227.100000,  75.921971,   0.042000, 234.327003, 620.945849
Outstanding requests per worker:
2537 1981 0 2703 1916 0 2518 2419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92006.3,      460032,     414376,      45656,     334945,      79431, 178.270643, 280.400000, 287.500000, 314.600000, 108.338749,   0.044000, 321.121991, 638.770110
Outstanding requests per worker:
3363 2774 0 3713 2657 0 3381 3309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92108.1,      460541,     414696,      45845,     340644,      74052, 231.432448, 355.000000, 366.700000, 380.900000, 138.683351,   0.043000, 384.050995, 651.825031
Outstanding requests per worker:
4092 3405 0 4453 3446 0 4154 4276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92163.9,      460820,     414812,      46008,     344412,      70400, 278.886100, 413.600000, 420.800000, 432.400000, 164.997536,   0.044000, 435.952008, 662.591839
Outstanding requests per worker:
4748 4183 0 5054 4305 0 4972 4921 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:21   0:00 /usr/lib/linux
memcache      8  206  0.0 327104 89792 pts/0    Sl+  03:21   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250952459      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        3005892835      L1-dcache-loads:u                                           
        1217696063      armv8_pmuv3_0/l2d_cache/:u                                   
         374600764      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180835640 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2157244928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2140795392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124345856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107896320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091446784
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036102.034526,       0.0,      182737,     164497,      18240,     104656,      59841,  17.633679,  43.200000,  53.700000,  64.200000,  17.192324,   0.000000,  69.179997, 448.720512
Outstanding requests per worker:
433 799 0 365 649 1 364 764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90880.5,      454403,     408991,      45412,     295460,     113531,  94.188962, 196.200000, 216.500000, 241.000000,  72.473463,   0.043000, 256.175995, 543.669650
Outstanding requests per worker:
2044 2967 0 1844 2597 0 1880 2799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91305.1,      456526,     410894,      45632,     315549,      95345, 198.655615, 339.600000, 357.200000, 376.000000, 126.043706,   0.042000, 387.459010, 593.945813
Outstanding requests per worker:
3477 4468 0 3077 4248 0 3158 4322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91591.3,      457957,     412204,      45753,     326109,      86095, 282.071137, 454.900000, 471.800000, 490.800000, 173.219951,   0.043000, 499.422997, 619.128461
Outstanding requests per worker:
4791 5646 0 4105 5543 0 4076 5793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91670.9,      458355,     412164,      46191,     333146,      79018, 355.867220, 567.500000, 583.600000, 602.300000, 217.346304,   0.042000, 615.749002, 638.306723
Outstanding requests per worker:
5861 6923 0 5048 6809 0 4963 7144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91741.3,      458707,     413091,      45616,     338780,      74311, 427.069094, 677.100000, 692.500000, 710.900000, 260.043415,   0.042000, 722.945988, 650.642459
Outstanding requests per worker:
6635 8189 0 6108 7965 0 5920 8400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91546.9,      457735,     411721,      46014,     342349,      69372, 500.973529, 783.200000, 805.600000, 831.600000, 303.694735,   0.041000, 838.976026, 662.552702
Outstanding requests per worker:
7713 9515 0 7381 9157 0 7127 9734 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:21   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 92864 pts/0    Sl+  03:21   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246856045      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2983275966      L1-dcache-loads:u                                           
        1203371871      armv8_pmuv3_0/l2d_cache/:u                                   
         372549075      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020200322 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2460152320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443702784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427253248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036151.034575,       0.0,      185012,     166511,      18501,     105907,      60604,  16.440960,  48.500000,  60.400000,  72.000000,  19.029959,   0.000000,  78.079000, 448.770904
Outstanding requests per worker:
326 870 0 224 784 0 181 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92098.5,      460493,     414115,      46378,     299915,     114200,  89.853781, 215.900000, 235.400000, 266.200000,  79.465567,   0.044000, 278.281987, 545.296422
Outstanding requests per worker:
1565 2911 0 1392 2967 0 1315 3273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92363.5,      461818,     415516,      46302,     319562,      95954, 188.830107, 366.700000, 384.100000, 412.900000, 133.825434,   0.044000, 422.731012, 594.678349
Outstanding requests per worker:
2763 4707 0 2731 4559 0 2515 4961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92563.5,      462818,     416586,      46232,     330288,      86298, 276.227860, 495.400000, 512.300000, 550.200000, 184.121575,   0.044000, 563.534975, 620.972121
Outstanding requests per worker:
3912 6184 0 3731 5990 0 3631 6610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92565.3,      462827,     416844,      45983,     336884,      79960, 357.552624, 627.400000, 646.900000, 676.900000, 234.088773,   0.044000, 693.796992, 638.351882
Outstanding requests per worker:
4865 7690 0 4854 7655 0 4643 8138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92567.9,      462840,     416719,      46121,     342594,      74125, 440.981043, 769.000000, 786.700000, 811.600000, 287.433167,   0.044000, 830.222011, 653.200024
Outstanding requests per worker:
5722 9297 0 5841 9338 0 5671 9755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92605.7,      463029,     416522,      46507,     345824,      70698, 521.844979, 893.900000, 914.400000, 952.800000, 338.390301,   0.044000, 963.338017, 661.922280
Outstanding requests per worker:
6741 10819 0 6843 10732 0 6770 11323 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:22   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 94656 pts/0    Sl+  03:22   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249152576      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3021393172      L1-dcache-loads:u                                           
        1218071725      armv8_pmuv3_0/l2d_cache/:u                                   
         368642769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080583272 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2688414208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2671964672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2655515136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639065600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036199.034623,       0.0,      184829,     166355,      18474,     105840,      60515,  17.918991,  53.000000,  64.800000,  76.100000,  20.456448,   0.000000,  84.636003, 447.937531
Outstanding requests per worker:
275 876 0 233 981 1 255 856 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92176.1,      460881,     414946,      45935,     300237,     114709,  88.845624, 216.700000, 238.800000, 271.700000,  80.300856,   0.041000, 282.193005, 544.377278
Outstanding requests per worker:
1303 2908 0 1371 3301 1 1299 3039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92381.1,      461906,     415834,      46072,     318978,      96856, 187.708562, 371.500000, 389.800000, 425.800000, 136.898730,   0.042000, 436.598003, 592.760301
Outstanding requests per worker:
2575 4695 0 2604 5125 1 2368 4588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92643.9,      463220,     417281,      45939,     330763,      86518, 270.947448, 498.500000, 513.600000, 539.700000, 185.041230,   0.042000, 550.240993, 620.102432
Outstanding requests per worker:
3643 6160 0 3640 6462 1 3328 6147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92526.5,      462633,     416740,      45893,     336835,      79905, 351.896075, 632.600000, 654.000000, 670.600000, 235.602779,   0.041000, 680.113971, 638.307614
Outstanding requests per worker:
4676 7758 1 4605 7978 0 4435 7912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92662.3,      463312,     416800,      46512,     342100,      74700, 433.559887, 764.200000, 782.500000, 806.400000, 287.284034,   0.041000, 816.893995, 651.535070
Outstanding requests per worker:
5620 9314 0 5572 9359 1 5233 9583 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92473.3,      462367,     416259,      46108,     346114,      70145, 513.639491, 898.500000, 920.000000, 966.000000, 339.544168,   0.041000, 978.307009, 663.341569
Outstanding requests per worker:
6727 11004 0 6684 10807 1 6193 11512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:23   0:00 /usr/lib/linux
memcache      7  209  0.0 328128 97664 pts/0    Sl+  03:23   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241643524      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        2971344478      L1-dcache-loads:u                                           
        1167868770      armv8_pmuv3_0/l2d_cache/:u                                   
         362375049      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.570828468 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
Creating worker on tid 2646077952
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637689344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036248.034672,       0.0,      184682,     166340,      18342,     105614,      60726,  29.800827,  75.200000,  89.000000, 104.200000,  29.077508,   0.000000, 110.785998, 448.375526
Outstanding requests per worker:
754 1123 0 678 1292 0 734 1298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92460.9,      462305,     416008,      46297,     300974,     115034, 137.932613, 271.700000, 296.400000, 324.400000,  99.740054,   0.044000, 340.575010, 544.215118
Outstanding requests per worker:
2931 3623 0 2560 4031 0 2758 3908 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93155.5,      465778,     419469,      46309,     322133,      97336, 261.450035, 443.300000, 468.200000, 480.800000, 164.516088,   0.044000, 489.816010, 593.310245
Outstanding requests per worker:
4498 5765 0 4158 5818 0 4303 5736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93265.1,      466326,     419536,      46790,     332710,      86826, 367.164782, 599.200000, 620.600000, 648.200000, 226.303071,   0.043000, 660.134017, 620.494847
Outstanding requests per worker:
6028 7493 0 5628 7848 0 5648 7526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93299.3,      466497,     419673,      46824,     339447,      80226, 469.641126, 742.200000, 765.800000, 795.800000, 285.762743,   0.043000, 806.070983, 638.767066
Outstanding requests per worker:
7423 8965 0 7231 9580 0 7287 9406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93354.7,      466774,     420345,      46429,     345539,      74806, 570.023832, 872.700000, 904.000000, 942.000000, 342.788386,   0.043000, 955.218017, 652.482401
Outstanding requests per worker:
9147 10371 0 8752 11359 0 8849 10882 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93387.7,      466939,     420592,      46347,     349672,      70920, 666.578632, 1006.100000, 1033.800000, 1060.700000, 397.986109,   0.043000, 1075.515985, 663.468211
Outstanding requests per worker:
10658 11964 0 10260 12781 0 10594 12414 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:24   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 98816 pts/0    Sl+  03:24   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248077316      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        3042698998      L1-dcache-loads:u                                           
        1223601547      armv8_pmuv3_0/l2d_cache/:u                                   
         392773525      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200663608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2723934720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2707485184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036296.034720,       0.0,      185174,     166746,      18428,     105692,      61054,  27.645252,  75.200000,  91.200000, 104.100000,  28.744078,   0.000000, 114.877999, 446.203399
Outstanding requests per worker:
1234 600 0 1340 477 0 1220 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92605.3,      463027,     416858,      46169,     301461,     115397, 128.893724, 277.600000, 302.700000, 321.300000,  99.794990,   0.042000, 332.343012, 544.237930
Outstanding requests per worker:
3855 2264 0 3948 2286 0 3895 2353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93247.1,      466236,     419233,      47003,     322357,      96876, 247.089222, 447.000000, 470.200000, 486.100000, 163.440971,   0.042000, 496.464014, 594.944460
Outstanding requests per worker:
5798 3681 0 5891 3685 0 5770 3756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93310.1,      466551,     420392,      46159,     333133,      87259, 347.596321, 610.200000, 630.300000, 650.000000, 224.879526,   0.043000, 656.583011, 621.151432
Outstanding requests per worker:
7791 4766 1 7801 4925 1 7683 5293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93326.1,      466631,     419778,      46853,     339238,      80540, 445.893350, 766.900000, 789.000000, 811.000000, 286.674867,   0.042000, 821.416974, 637.549283
Outstanding requests per worker:
9779 6003 0 9747 6206 0 9569 6561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93217.5,      466088,     419503,      46585,     344619,      74884, 552.142489, 936.000000, 958.000000, 978.000000, 352.359390,   0.041000, 993.381977, 653.061079
Outstanding requests per worker:
11812 7391 0 11570 7708 0 11624 7917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93300.1,      466501,     420411,      46090,     349759,      70652, 657.374027, 1103.100000, 1131.200000, 1140.000000, 416.999656,   0.042000, 1145.027995, 664.249556
Outstanding requests per worker:
13594 8653 0 13571 8990 0 13562 9366 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:25   0:00 /usr/lib/linux
memcache      7  202  0.0 329152 90432 pts/0    Sl+  03:25   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250315929      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3041404922      L1-dcache-loads:u                                           
        1222463671      armv8_pmuv3_0/l2d_cache/:u                                   
         374718065      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.199606709 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2577199616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2560750080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036345.034769,       0.0,      185194,     166767,      18427,     105894,      60873,  38.109086,  89.600000, 105.600000, 119.500000,  35.556825,   0.000000, 130.253002, 447.455024
Outstanding requests per worker:
967 1550 1 1166 1452 0 1074 1454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93147.1,      465736,     419353,      46383,     303871,     115482, 168.056779, 311.600000, 333.800000, 357.700000, 116.196707,   0.041000, 375.378996, 546.045902
Outstanding requests per worker:
3409 4513 1 3628 4233 0 3780 4338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93884.3,      469422,     422738,      46684,     325521,      97217, 311.597196, 490.700000, 516.200000, 532.800000, 190.152780,   0.041000, 541.773975, 594.871317
Outstanding requests per worker:
5530 6493 1 5731 6489 0 5705 6515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94032.5,      470163,     423412,      46751,     336116,      87296, 434.465588, 660.800000, 684.800000, 704.800000, 260.438866,   0.041000, 719.678998, 621.849385
Outstanding requests per worker:
7355 8529 1 7621 8345 0 7749 8661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94023.9,      470120,     423263,      46857,     342299,      80964, 558.218093, 823.100000, 847.000000, 871.200000, 332.015932,   0.040000, 876.886010, 638.224870
Outstanding requests per worker:
9302 10527 1 9806 10177 0 9742 10553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94196.5,      470983,     424016,      46967,     348541,      75475, 675.560020, 972.600000, 992.300000, 1020.700000, 399.051881,   0.041000, 1033.164978, 653.653579
Outstanding requests per worker:
11146 12227 1 11720 11874 0 11705 12428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93999.5,      469998,     423089,      46909,     351874,      71215, 792.083388, 1130.500000, 1146.500000, 1173.000000, 467.538875,   0.041000, 1188.755035, 664.244263
Outstanding requests per worker:
13322 14180 1 13617 13888 0 13742 14309 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  03:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:25   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 94208 pts/0    Sl+  03:25   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250410725      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3033981009      L1-dcache-loads:u                                           
        1204300416      armv8_pmuv3_0/l2d_cache/:u                                   
         364593467      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179892610 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2835608064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036393.034817,       0.0,      189109,     170087,      19022,     108427,      61660,  18.273187,  43.100000,  48.300000,  55.500000,  16.480565,   0.000000,  60.364999, 450.444843
Outstanding requests per worker:
473 703 1 578 687 1 609 701 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94009.7,      470049,     423015,      47034,     306306,     116709, 102.018661, 198.700000, 211.800000, 229.000000,  74.138205,   0.043000, 239.996001, 545.710771
Outstanding requests per worker:
2250 2650 0 2600 2881 0 2516 2778 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94466.7,      472334,     425312,      47022,     326928,      98384, 211.889748, 334.300000, 347.100000, 366.700000, 129.030415,   0.043000, 375.317007, 595.146147
Outstanding requests per worker:
3960 4122 0 4243 4510 0 3991 4471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94760.5,      473803,     426619,      47184,     338538,      88081, 302.506644, 451.000000, 464.000000, 482.000000, 179.515459,   0.043000, 489.674985, 621.887998
Outstanding requests per worker:
5293 5634 0 5526 5899 0 5270 5838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94619.3,      473097,     425762,      47335,     344565,      81197, 392.467760, 578.800000, 593.900000, 605.300000, 232.299319,   0.042000, 612.493992, 639.874925
Outstanding requests per worker:
6632 7308 0 6985 7320 0 6699 7372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94636.3,      473182,     425941,      47241,     350237,      75704, 482.289110, 700.300000, 713.900000, 723.500000, 284.355951,   0.043000, 727.550983, 653.675178
Outstanding requests per worker:
8150 8747 0 8499 8735 0 8225 8739 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94688.1,      473441,     425992,      47449,     354173,      71819, 571.330865, 811.800000, 821.800000, 832.400000, 335.454147,   0.043000, 839.164972, 663.613105
Outstanding requests per worker:
9546 9956 0 10023 10091 0 9926 10072 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:26   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95552 pts/0    Sl+  03:26   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254708119      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3082446133      L1-dcache-loads:u                                           
        1241592166      armv8_pmuv3_0/l2d_cache/:u                                   
         359624995      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070231852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2322985472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2306535936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2290086400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036442.034866,       0.0,      185558,     167263,      18295,     106136,      61127,  48.533420, 112.000000, 132.200000, 148.800000,  44.967545,   0.000000, 155.956998, 447.058519
Outstanding requests per worker:
1364 1832 1 1378 1891 0 1355 1830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93884.1,      469421,     422404,      47017,     306432,     115972, 198.380712, 366.900000, 396.400000, 420.300000, 136.121789,   0.042000, 434.136987, 546.496911
Outstanding requests per worker:
4068 5291 1 4302 5269 0 4065 5068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94684.9,      473425,     426128,      47297,     327976,      98152, 357.227462, 581.900000, 614.500000, 646.300000, 221.032444,   0.040000, 660.860002, 595.195181
Outstanding requests per worker:
6168 7898 1 6615 8053 0 6148 7598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94969.7,      474849,     427555,      47294,     339098,      88457, 499.317814, 784.700000, 806.000000, 835.800000, 303.090104,   0.042000, 844.711006, 621.976230
Outstanding requests per worker:
8135 10287 1 8741 10288 0 8162 9872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95056.7,      475284,     427854,      47430,     346565,      81289, 627.606589, 971.700000, 995.800000, 1022.000000, 378.247553,   0.041000, 1037.405968, 639.826710
Outstanding requests per worker:
10040 12648 0 10625 12504 1 10044 12200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95241.1,      476206,     428668,      47538,     352680,      75988, 750.094157, 1142.800000, 1166.500000, 1182.600000, 449.706253,   0.042000, 1191.228986, 653.702856
Outstanding requests per worker:
11884 14523 0 12461 14507 1 11885 14426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95094.9,      475475,     427912,      47563,     355884,      72028, 869.065609, 1331.700000, 1364.000000, 1383.800000, 521.554331,   0.042000, 1399.795055, 664.005361
Outstanding requests per worker:
13486 16952 1 14255 15875 0 13468 16811 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:27   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 96512 pts/0    Sl+  03:27   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248052797      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3045476833      L1-dcache-loads:u                                           
        1190068584      armv8_pmuv3_0/l2d_cache/:u                                   
         361932458      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100418217 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3146576384
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130126848
starting receive base loop
num_worker_connections 1
Creating worker on tid 3113677312
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097227776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036490.034914,       0.0,      186557,     167934,      18623,     106706,      61228,  44.836851, 103.500000, 110.800000, 117.100000,  39.628151,   0.000000, 123.384997, 448.057862
Outstanding requests per worker:
1403 1416 0 1436 1450 0 1488 1440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94278.9,      471395,     423970,      47425,     307649,     116321, 178.487394, 319.000000, 330.500000, 343.300000, 119.458217,   0.042000, 352.708995, 547.216930
Outstanding requests per worker:
4171 4292 0 4169 4249 1 4113 4092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94914.7,      474574,     426796,      47778,     328661,      98135, 321.466757, 498.500000, 511.300000, 532.200000, 194.474650,   0.042000, 550.821006, 595.975173
Outstanding requests per worker:
6270 6699 0 6383 6311 1 6418 6275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95083.7,      475419,     427992,      47427,     339842,      88150, 452.504229, 670.600000, 682.500000, 710.400000, 269.320277,   0.041000, 722.050011, 622.067957
Outstanding requests per worker:
8338 8772 0 8373 8449 1 8479 8367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95155.5,      475778,     428351,      47427,     346748,      81603, 576.934323, 838.500000, 852.000000, 865.600000, 341.429908,   0.041000, 878.858984, 639.674185
Outstanding requests per worker:
10310 10699 0 10342 10542 1 10502 10466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95105.9,      475530,     427944,      47586,     351915,      76029, 701.205302, 1005.800000, 1017.400000, 1036.800000, 414.074280,   0.041000, 1049.877048, 653.885525
Outstanding requests per worker:
12340 12686 0 12525 12795 1 12477 12378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95273.5,      476368,     429057,      47311,     356773,      72284, 822.231801, 1162.300000, 1178.700000, 1204.200000, 484.096418,   0.041000, 1217.939019, 664.188120
Outstanding requests per worker:
14163 14694 0 14523 14844 1 14367 14080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:28   0:00 /usr/lib/linux
memcache      7  208  0.0 330176 94592 pts/0    Sl+  03:28   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252923469      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3086238206      L1-dcache-loads:u                                           
        1230947405      armv8_pmuv3_0/l2d_cache/:u                                   
         374658162      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.111693768 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2936992256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2920542720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2904093184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036538.034962,       0.0,      186420,     167859,      18561,     106448,      61411,  43.474324, 108.900000, 129.000000, 146.300000,  42.302287,   0.000000, 153.716996, 447.395099
Outstanding requests per worker:
1812 1219 0 1776 1055 1 1864 1048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94081.3,      470407,     423711,      46696,     307281,     116430, 184.859814, 358.800000, 389.500000, 422.700000, 131.270730,   0.042000, 434.709996, 546.749829
Outstanding requests per worker:
5258 3683 0 4772 3757 1 5281 3459 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94863.5,      474318,     426868,      47450,     328555,      98313, 335.468426, 576.500000, 606.600000, 639.200000, 213.357837,   0.041000, 654.235005, 595.496402
Outstanding requests per worker:
7843 5508 0 7294 5664 1 7968 5467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95024.9,      475125,     427692,      47433,     339081,      88611, 467.917197, 764.100000, 788.800000, 816.100000, 289.846222,   0.041000, 831.366003, 620.899643
Outstanding requests per worker:
9911 7689 0 9618 7651 1 10112 7500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94988.1,      474941,     427283,      47658,     346508,      80775, 596.665729, 937.000000, 961.700000, 987.500000, 362.379645,   0.041000, 998.272002, 641.346747
Outstanding requests per worker:
12062 9686 0 11962 9821 1 12148 9694 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94773.1,      473866,     426822,      47044,     351080,      75742, 722.638618, 1112.600000, 1151.400000, 1180.200000, 434.852697,   0.041000, 1191.256046, 654.071437
Outstanding requests per worker:
12116 11905 1 14491 11924 1 14526 11801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94718.7,      473594,     426264,      47330,     354360,      71904, 837.922361, 1293.600000, 1340.700000, 1397.200000, 505.057477,   0.042000, 1414.342999, 663.863798
Outstanding requests per worker:
11928 14150 0 16754 14072 1 17232 14033 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:29   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95168 pts/0    Sl+  03:29   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251986103      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3081893521      L1-dcache-loads:u                                           
        1232952308      armv8_pmuv3_0/l2d_cache/:u                                   
         380131207      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880627526 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2138501632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122052096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105602560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089153024
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036587.035011,       0.0,      187833,     168990,      18843,     108001,      60989,  47.738762, 117.000000, 138.200000, 156.500000,  45.962674,   0.000000, 166.288003, 450.908243
Outstanding requests per worker:
1238 1919 0 1291 1939 1 1341 2047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95183.7,      475919,     428140,      47779,     310841,     117299, 194.477867, 363.800000, 393.000000, 420.600000, 134.500054,   0.041000, 439.188987, 547.736019
Outstanding requests per worker:
3991 5073 0 3972 5187 1 4099 5400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96124.9,      480625,     432533,      48092,     333223,      99310, 347.171292, 565.200000, 588.000000, 608.900000, 213.949650,   0.041000, 618.366003, 597.861682
Outstanding requests per worker:
6151 7383 0 6145 7552 1 6108 7632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96398.5,      481993,     434137,      47856,     344668,      89469, 472.526367, 728.300000, 751.100000, 766.100000, 284.278896,   0.040000, 776.669025, 622.414876
Outstanding requests per worker:
8045 9574 0 8090 9463 0 8136 9556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96526.5,      482633,     434532,      48101,     351781,      82751, 588.028566, 885.000000, 901.500000, 918.400000, 350.639849,   0.042000, 929.750979, 639.287479
Outstanding requests per worker:
10035 11306 0 9888 11341 1 10062 11457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96440.7,      482204,     434381,      47823,     357243,      77138, 699.372375, 1015.200000, 1042.300000, 1069.600000, 414.158687,   0.042000, 1081.858039, 653.825642
Outstanding requests per worker:
12113 13274 1 11783 12953 0 12075 13353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96131.9,      480660,     432858,      47802,     360376,      72482, 798.823718, 1141.900000, 1194.000000, 1268.400000, 473.356163,   0.041000, 1286.420941, 664.832550
Outstanding requests per worker:
13958 15876 0 13660 12428 1 13868 13747 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:29   0:00 /usr/lib/linux
memcache      8  207  0.0 333248 100672 pts/0   Sl+  03:29   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256612076      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3121245356      L1-dcache-loads:u                                           
        1246541197      armv8_pmuv3_0/l2d_cache/:u                                   
         377718645      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120694168 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3131634176
starting receive base loop
num_worker_connections 1
Creating worker on tid 3115184640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098735104
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036635.035059,       0.0,      187301,     168788,      18513,     107083,      61705,  50.740670, 121.900000, 142.000000, 158.500000,  47.749299,   0.000000, 166.649997, 447.100842
Outstanding requests per worker:
1463 2004 1 1243 2000 0 1557 2035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95002.1,      475011,     427207,      47804,     310020,     117187, 205.558945, 380.900000, 412.500000, 441.500000, 141.580231,   0.041000, 460.924000, 546.490505
Outstanding requests per worker:
4229 5674 1 4007 5283 0 4476 5491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95874.5,      479373,     431470,      47903,     332037,      99433, 365.430054, 597.800000, 626.800000, 652.200000, 226.495024,   0.042000, 664.151013, 595.670714
Outstanding requests per worker:
6606 8176 1 6130 7975 0 6661 8118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96116.3,      480582,     432502,      48080,     343817,      88685, 505.898344, 797.400000, 823.700000, 846.500000, 307.414573,   0.041000, 860.947013, 623.031174
Outstanding requests per worker:
8760 10621 1 8224 10337 0 8644 10389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96302.3,      481512,     432975,      48537,     350995,      81980, 634.669119, 978.200000, 998.900000, 1020.200000, 381.988963,   0.040000, 1033.257008, 640.686984
Outstanding requests per worker:
10688 12746 1 10161 12490 0 10619 12081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96071.9,      480360,     432570,      47790,     356423,      76147, 753.386688, 1144.300000, 1184.000000, 1225.400000, 452.187530,   0.042000, 1247.869015, 655.500416
Outstanding requests per worker:
12596 15377 1 12058 14973 0 12592 13279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96129.7,      480649,     432834,      47815,     360641,      72193, 865.242554, 1355.900000, 1396.800000, 1432.500000, 520.967389,   0.041000, 1444.558978, 665.309872
Outstanding requests per worker:
14252 17834 1 14066 17549 1 14704 12915 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:30   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 94208 pts/0    Sl+  03:30   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256798438      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3123945810      L1-dcache-loads:u                                           
        1248488662      armv8_pmuv3_0/l2d_cache/:u                                   
         388707364      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010692574 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3147362816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130913280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3114463744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098014208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036684.035108,       0.0,      187292,     168468,      18824,     107667,      60801,  64.544664, 151.200000, 167.700000, 186.200000,  58.692792,   0.000000, 196.526006, 451.418477
Outstanding requests per worker:
2437 1803 1 2326 2104 0 2377 1738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95654.1,      478271,     430516,      47755,     312340,     118176, 242.525028, 432.500000, 455.600000, 480.200000, 162.802105,   0.041000, 491.183013, 547.170389
Outstanding requests per worker:
6100 5575 1 6138 5720 0 5987 5039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96931.1,      484656,     435864,      48792,     335689,     100175, 421.356896, 647.600000, 663.700000, 688.900000, 254.826961,   0.042000, 697.403014, 595.546485
Outstanding requests per worker:
8706 8282 1 8670 8184 0 8396 7718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97095.1,      485476,     436899,      48577,     347095,      89804, 564.421540, 827.800000, 845.800000, 879.200000, 336.077784,   0.042000, 898.102999, 623.225162
Outstanding requests per worker:
10073 10599 1 11215 10439 0 10783 10291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96762.7,      483814,     435433,      48381,     353189,      82244, 682.509181, 997.800000, 1059.800000, 1146.300000, 408.252715,   0.041000, 1171.231985, 640.435449
Outstanding requests per worker:
10616 12698 1 13935 12536 1 10362 12530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96680.3,      483402,     435082,      48320,     358484,      76598, 767.075070, 1170.700000, 1220.100000, 1268.200000, 466.641285,   0.041000, 1309.278965, 654.980868
Outstanding requests per worker:
11106 14635 1 13827 14509 0 11122 14373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96275.3,      481377,     433451,      47926,     361086,      72365, 825.350778, 1278.400000, 1310.000000, 1341.400000, 511.067083,   0.041000, 1353.085995, 665.653453
Outstanding requests per worker:
10476 16908 1 14430 14595 0 9676 15897 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:31   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   03:31   0:00 /usr/lib/linux
memcache      9  207  0.0 332224 96640 pts/0    Sl+  03:31   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254566116      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3111588588      L1-dcache-loads:u                                           
        1224621169      armv8_pmuv3_0/l2d_cache/:u                                   
         370696865      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960095429 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2744185344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2727735808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2711286272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694836736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036732.035156,       0.0,      188278,     169603,      18675,     114131,      55472,  60.081297, 138.300000, 148.600000, 168.400000,  53.777930,   0.000000, 181.664005, 459.697930
Outstanding requests per worker:
1976 1819 0 2259 1794 1 2015 1937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95878.1,      479391,     431667,      47724,     324615,     107052, 225.766412, 400.900000, 417.400000, 458.900000, 151.079176,   0.041000, 483.837008, 545.024049
Outstanding requests per worker:
5320 5110 0 6039 5326 0 5372 5279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96502.5,      482513,     434283,      48230,     344011,      90272, 399.349459, 614.600000, 631.800000, 653.200000, 242.310343,   0.042000, 671.627998, 589.635770
Outstanding requests per worker:
8212 7723 0 6663 7886 0 8381 8048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96800.1,      484001,     435494,      48507,     353675,      81819, 534.553283, 817.600000, 850.700000, 887.700000, 324.064227,   0.042000, 905.471981, 611.344202
Outstanding requests per worker:
11113 9926 0 7235 10341 1 11084 10332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96327.7,      481639,     433511,      48128,     358331,      75180, 652.758549, 1002.700000, 1044.000000, 1120.900000, 405.421600,   0.042000, 1143.424034, 628.750828
Outstanding requests per worker:
14274 12604 0 7367 12823 0 11878 10599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96414.1,      482071,     433867,      48204,     364117,      69750, 739.593752, 1214.300000, 1288.000000, 1362.800000, 475.524651,   0.042000, 1386.764050, 641.345138
Outstanding requests per worker:
17316 15168 0 7474 15435 1 11396 11364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96477.7,      482389,     434593,      47796,     368350,      66243, 821.815904, 1440.900000, 1530.200000, 1602.800000, 555.449221,   0.041000, 1635.732055, 651.033627
Outstanding requests per worker:
18992 17753 0 6483 18161 1 10997 11582 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:32   0:00 /usr/lib/linux
memcache      7  212  0.0 324032 91584 pts/0    Sl+  03:32   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  03:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258883058      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3214520043      L1-dcache-loads:u                                           
        1256653730      armv8_pmuv3_0/l2d_cache/:u                                   
         374167040      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980399498 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3059937792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3043488256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
Creating worker on tid 2617242112
num_worker_connections 1
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036781.035205,       0.0,      189133,     170171,      18962,     108435,      61736,  53.259210, 126.300000, 136.400000, 148.800000,  48.458933,   0.000000, 155.252993, 449.288316
Outstanding requests per worker:
1925 1891 0 1804 1686 0 1889 1752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95970.9,      479855,     431960,      47895,     312762,     119198, 214.991686, 383.900000, 401.600000, 416.600000, 143.943492,   0.042000, 431.317002, 544.792997
Outstanding requests per worker:
5200 5196 0 5236 4899 0 5390 5176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96985.5,      484928,     436657,      48271,     336563,     100094, 384.893722, 589.700000, 601.900000, 615.600000, 232.174928,   0.042000, 623.622000, 596.440925
Outstanding requests per worker:
7511 7761 1 7758 7677 0 7722 7782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97227.5,      486138,     437779,      48359,     347671,      90108, 525.514077, 777.500000, 789.100000, 808.500000, 312.796290,   0.041000, 822.142005, 623.066648
Outstanding requests per worker:
9841 10160 1 9932 10254 0 9938 9980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97316.5,      486583,     438058,      48525,     355403,      82655, 660.667173, 951.300000, 964.000000, 989.000000, 390.955784,   0.042000, 1004.531026, 640.972636
Outstanding requests per worker:
12226 12535 1 11334 12051 0 12257 12080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97199.1,      485996,     437602,      48394,     360434,      77168, 774.754849, 1111.000000, 1138.000000, 1190.300000, 459.349838,   0.041000, 1207.708955, 654.870997
Outstanding requests per worker:
14047 14199 1 11582 13927 0 15077 13841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97186.7,      485934,     437425,      48509,     363990,      73435, 861.740885, 1260.500000, 1357.300000, 1428.300000, 517.785361,   0.042000, 1450.783968, 664.964163
Outstanding requests per worker:
12729 15787 1 11814 15542 0 18141 15491 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:33   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 93248 pts/0    Sl+  03:33   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256299521      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3139452305      L1-dcache-loads:u                                           
        1235501447      armv8_pmuv3_0/l2d_cache/:u                                   
         366859105      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270362131 seconds time elapsed

