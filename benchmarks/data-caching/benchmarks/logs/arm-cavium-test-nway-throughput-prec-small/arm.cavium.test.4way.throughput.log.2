+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2162553344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2146103808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2129654272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2113204736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096755200
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004185.002609,       0.0,      241750,     217604,      24146,     141475,      76129,   2.549059,   1.200000,  25.200000,  36.900000,   7.731234,   0.000000,  41.676998, 464.247592
Outstanding requests per worker:
339 3 5 5 401 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121194.1,      605971,     545397,      60574,     402402,     142995,   2.953207,   3.500000,  27.900000,  44.600000,   9.024314,   0.059000,  50.044999, 561.238799
Outstanding requests per worker:
426 4 4 5 447 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121234.9,      606175,     545520,      60655,     427953,     117567,   3.270292,   8.300000,  29.600000,  44.800000,   9.435327,   0.052000,  50.797999, 611.801941
Outstanding requests per worker:
385 3 5 5 414 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121246.9,      606235,     545890,      60345,     441060,     104830,   3.505244,  12.000000,  30.800000,  45.200000,   9.704785,   0.051000,  49.605999, 637.492026
Outstanding requests per worker:
295 4 6 3 367 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121264.5,      606323,     545981,      60342,     449721,      96260,   3.595766,  13.700000,  31.000000,  45.200000,   9.800361,   0.103000,  50.253000, 655.000015
Outstanding requests per worker:
240 4 4 6 209 5 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.3,      606132,     545882,      60250,     456150,      89732,   3.627148,  13.000000,  31.600000,  44.700000,   9.807401,   0.088000,  49.256001, 667.507392
Outstanding requests per worker:
125 5 4 3 284 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121236.3,      606182,     545324,      60858,     460640,      84684,   3.897337,  16.100000,  32.900000,  45.300000,  10.212561,   0.107000,  51.041000, 678.999983
Outstanding requests per worker:
149 5 3 6 167 6 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:29   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 110080 pts/0   Sl+  18:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317814657      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        3901343582      L1-dcache-loads:u                                           
        1458724041      armv8_pmuv3_0/l2d_cache/:u                                   
         446074369      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150750112 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2291266048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2274816512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2258366976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241917440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225467904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004233.002657,       0.0,      242392,     218376,      24016,     141656,      76720,   2.089486,   0.433100,  17.300000,  40.300000,   7.164694,   0.000000,  45.770999, 462.558546
Outstanding requests per worker:
5 6 45 6 4 6 63 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  6.000006,  101016.2,      606098,     545576,      60522,     403488,     142088,   2.840806,   4.500000,  25.700000,  42.100000,   8.473369,   0.089000,  47.414001, 562.283053
Outstanding requests per worker:
4 4 68 4 4 5 61 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121229.9,      606150,     545448,      60702,     427483,     117965,   3.031945,   6.000000,  27.000000,  43.000000,   8.834353,   0.047000,  48.939999, 611.192253
Outstanding requests per worker:
6 5 46 7 4 5 37 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121201.9,      606010,     545660,      60350,     440342,     105318,   3.648222,  13.300000,  31.600000,  46.200000,   9.946947,   0.050000,  52.099001, 636.636598
Outstanding requests per worker:
5 7 103 5 5 4 81 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121249.5,      606248,     545863,      60385,     449509,      96354,   3.763334,  14.000000,  32.400000,  46.200000,  10.081642,   0.115000,  50.388001, 654.096607
Outstanding requests per worker:
5 5 23 7 5 8 26 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121232.7,      606164,     545578,      60586,     455392,      90186,   3.758773,  14.100000,  32.200000,  46.200000,  10.101764,   0.116000,  52.165002, 667.209054
Outstanding requests per worker:
4 7 5 7 4 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545164,      60926,     460474,      84690,   4.099325,  17.400000,  34.300000,  46.100000,  10.496689,   0.116000,  49.989000, 677.956562
Outstanding requests per worker:
5 7 7 9 5 7 8 7 
Ran for 33.000033, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:30   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113920 pts/0   Sl+  18:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318478275      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3896338068      L1-dcache-loads:u                                           
        1455062637      armv8_pmuv3_0/l2d_cache/:u                                   
         463508023      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.681040060 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2681795072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2665345536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2648896000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632446464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004282.002706,       0.0,      241793,     217650,      24143,     141209,      76441,   2.838298,   3.200000,  27.700000,  40.000000,   8.495041,   0.000000,  45.961998, 461.918502
Outstanding requests per worker:
4 340 4 4 4 375 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121237.5,      606188,     545530,      60658,     403000,     142530,   2.593750,   0.650100,  23.300000,  42.300000,   8.170543,   0.056000,  48.407000, 561.445801
Outstanding requests per worker:
5 298 4 5 3 329 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121234.1,      606171,     545651,      60520,     427324,     118327,   2.918884,   3.800000,  26.700000,  43.900000,   8.821572,   0.058000,  50.069999, 610.840671
Outstanding requests per worker:
6 277 5 4 6 292 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121253.1,      606266,     545716,      60550,     440757,     104959,   3.133955,   7.600000,  28.400000,  43.900000,   9.075966,   0.108000,  50.528001, 637.436975
Outstanding requests per worker:
5 237 4 5 5 193 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121261.5,      606308,     546198,      60110,     449366,      96832,   3.110459,   8.400000,  28.000000,  43.200000,   8.922198,   0.052000,  48.675999, 653.978934
Outstanding requests per worker:
3 127 5 4 4 132 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121241.9,      606210,     545703,      60507,     455578,      90125,   3.159939,   7.700000,  28.500000,  43.700000,   9.059153,   0.105000,  49.924999, 667.508845
Outstanding requests per worker:
5 63 5 5 6 89 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.1,      606131,     545676,      60455,     460658,      85018,   3.725180,  12.900000,  32.600000,  47.700000,  10.267460,   0.113000,  53.493001, 678.054879
Outstanding requests per worker:
5 54 3 4 4 63 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:31   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 111232 pts/0   Sl+  18:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316062507      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3901756083      L1-dcache-loads:u                                           
        1455942197      armv8_pmuv3_0/l2d_cache/:u                                   
         459387398      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.569600032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2486366720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2469917184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2453467648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2437018112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004330.002754,       0.0,      244949,     220656,      24293,     142986,      77670,   3.134569,   4.900000,  29.100000,  45.200000,   9.384684,   0.000000,  49.958002, 462.293665
Outstanding requests per worker:
621 6 6 7 667 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123104.3,      615522,     554255,      61267,     410535,     143720,   3.617791,  12.000000,  31.900000,  46.100000,   9.992665,   0.059000,  52.365001, 563.573036
Outstanding requests per worker:
586 7 8 10 595 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123112.3,      615562,     554435,      61127,     435216,     119219,   3.915279,  15.500000,  33.700000,  45.900000,  10.296112,   0.124000,  51.731002, 612.052455
Outstanding requests per worker:
493 5 6 5 569 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123104.9,      615525,     554210,      61315,     447823,     106387,   4.260915,  18.700000,  34.300000,  46.300000,  10.718980,   0.148000,  51.274002, 637.831362
Outstanding requests per worker:
459 8 10 5 500 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.7,      615449,     554114,      61335,     456838,      97276,   4.374400,  19.200000,  35.300000,  47.200000,  10.924997,   0.123000,  52.168999, 655.187723
Outstanding requests per worker:
493 4 7 7 463 6 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123123.7,      615619,     554157,      61462,     463757,      90400,   4.626386,  21.700000,  34.800000,  46.800000,  11.020434,   0.152000,  51.242001, 668.769325
Outstanding requests per worker:
339 7 7 9 420 5 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.9,      615460,     554114,      61346,     468821,      85293,   4.862525,  23.100000,  36.800000,  46.800000,  11.384258,   0.059000,  50.535999, 679.470248
Outstanding requests per worker:
403 9 6 7 341 4 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:32   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 120256 pts/0   Sl+  18:32   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317208512      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        3965535142      L1-dcache-loads:u                                           
        1455107675      armv8_pmuv3_0/l2d_cache/:u                                   
         436699817      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049578959 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2172383744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2155934208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004379.002803,       0.0,      244842,     220296,      24546,     143204,      77092,   2.349293,   0.871100,  20.800000,  37.600000,   7.275422,   0.000000,  46.399001, 464.326520
Outstanding requests per worker:
6 666 4 6 3 709 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123099.5,      615498,     553711,      61787,     409634,     144077,   3.571105,  12.600000,  30.800000,  44.200000,   9.644468,   0.052000,  49.371999, 562.933249
Outstanding requests per worker:
7 645 5 7 3 661 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123125.3,      615627,     554067,      61560,     434842,     119225,   3.911747,  16.400000,  33.000000,  43.400000,   9.977214,   0.053000,  48.650999, 612.054179
Outstanding requests per worker:
5 541 5 5 8 584 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123126.7,      615634,     554033,      61601,     447874,     106159,   3.888759,  17.300000,  31.300000,  41.400000,   9.598598,   0.055000,  45.270000, 638.097826
Outstanding requests per worker:
6 486 7 5 9 455 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123097.7,      615489,     554240,      61249,     456909,      97331,   4.022313,  18.100000,  31.600000,  41.800000,   9.741789,   0.127000,  45.655999, 655.587801
Outstanding requests per worker:
8 473 7 7 6 389 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123075.7,      615379,     553759,      61620,     462836,      90923,   4.657915,  22.100000,  34.200000,  43.800000,  10.688474,   0.060000,  47.219999, 668.375114
Outstanding requests per worker:
8 483 6 7 9 429 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123120.7,      615604,     554317,      61287,     468808,      85509,   4.854963,  23.700000,  34.000000,  43.700000,  10.785420,   0.141000,  47.028001, 678.957539
Outstanding requests per worker:
8 404 4 5 9 340 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:33   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 114752 pts/0   Sl+  18:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314132917      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3968526011      L1-dcache-loads:u                                           
        1452268431      armv8_pmuv3_0/l2d_cache/:u                                   
         453303392      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900428802 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3150049792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3133600256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117150720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100701184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004427.002851,       0.0,      246194,     221424,      24770,     143330,      78094,   0.326448,   0.441100,   0.489100,   0.609100,   0.092472,   0.000000,   2.057000, 461.461323
Outstanding requests per worker:
4 6 6 5 7 7 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553687,      61729,     410145,     143542,   0.370892,   0.508100,   0.569100,   0.702100,   0.114920,   0.050000,   2.146000, 563.270913
Outstanding requests per worker:
7 5 7 5 10 8 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     554249,      61170,     434831,     119418,   0.405874,   0.570000,   0.646000,   0.827100,   0.142700,   0.090000,   2.329000, 611.715765
Outstanding requests per worker:
7 4 9 5 9 7 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     553909,      61530,     447643,     106266,   0.425968,   0.612100,   0.684100,   0.836100,   0.138771,   0.060000,   2.245000, 637.721205
Outstanding requests per worker:
7 7 7 4 4 5 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     554040,      61367,     456695,      97345,   0.453214,   0.673100,   0.752100,   0.937100,   0.166871,   0.099000,   3.149000, 656.048323
Outstanding requests per worker:
4 4 10 5 8 8 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553747,      61675,     463761,      89986,   0.472427,   0.690100,   0.806100,   1.100000,   0.187441,   0.111000,   2.824000, 669.873440
Outstanding requests per worker:
6 6 12 6 4 10 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553317,      62097,     468334,      84983,   0.487603,   0.741100,   0.864100,   1.100000,   0.190613,   0.051000,   2.246000, 680.017729
Outstanding requests per worker:
5 8 11 4 9 5 11 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:33   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 112960 pts/0   Sl+  18:33   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314028833      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3954049772      L1-dcache-loads:u                                           
        1439508756      armv8_pmuv3_0/l2d_cache/:u                                   
         431749510      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221485523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004476.002900,       0.0,      246196,     221689,      24507,     144011,      77678,   0.330584,   0.429100,   0.483100,   0.617100,   0.184750,   0.000000,   6.405000, 462.858035
Outstanding requests per worker:
5 5 5 8 6 5 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     553864,      61551,     410641,     143223,   0.362587,   0.490100,   0.547000,   0.669000,   0.108452,   0.059000,   2.153000, 563.960106
Outstanding requests per worker:
4 5 5 7 7 5 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553825,      61585,     434275,     119550,   0.388220,   0.544100,   0.606100,   0.709100,   0.114124,   0.103000,   2.002000, 611.162205
Outstanding requests per worker:
7 4 5 9 6 5 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553815,      61598,     447473,     106342,   0.430009,   0.572100,   0.662100,   1.300000,   0.287104,   0.048000,   6.288000, 637.841283
Outstanding requests per worker:
4 6 6 7 6 4 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     554070,      61332,     457199,      96871,   0.423119,   0.582100,   0.644100,   0.781100,   0.129198,   0.138000,   2.333000, 656.439028
Outstanding requests per worker:
5 9 6 5 9 8 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.1,      615406,     554210,      61196,     463881,      90329,   0.452737,   0.630100,   0.708100,   0.940100,   0.164870,   0.090000,   3.089000, 670.266051
Outstanding requests per worker:
7 8 7 12 10 8 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     553670,      61750,     468536,      85134,   0.456556,   0.635100,   0.725100,   0.887100,   0.160471,   0.156000,   3.211000, 680.142901
Outstanding requests per worker:
11 8 5 9 9 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:34   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 120512 pts/0   Sl+  18:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319558557      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3943943101      L1-dcache-loads:u                                           
        1448905536      armv8_pmuv3_0/l2d_cache/:u                                   
         448046986      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810439521 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2181100032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164650496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004525.002949,       0.0,      250069,     225224,      24845,     145671,      79553,   0.375798,   0.536100,   0.601100,   0.729100,   0.113563,   0.000000,   2.119000, 462.106028
Outstanding requests per worker:
7 5 4 6 9 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562604,      62439,     417050,     145554,   0.441333,   0.624100,   0.704100,   0.874100,   0.152524,   0.055000,   2.395000, 564.452318
Outstanding requests per worker:
8 5 7 4 11 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     563210,      61804,     442908,     120302,   0.484149,   0.688100,   0.793100,   1.100000,   0.169804,   0.090000,   2.272000, 613.331296
Outstanding requests per worker:
14 10 9 6 17 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.1,      625061,     562916,      62145,     455702,     107214,   0.513803,   0.745100,   0.860100,   1.100000,   0.182567,   0.089000,   2.532000, 639.471314
Outstanding requests per worker:
7 9 9 7 13 6 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.3,      625067,     562632,      62435,     464917,      97715,   0.557255,   0.819100,   0.983100,   1.600000,   0.230644,   0.158000,   2.523000, 657.819473
Outstanding requests per worker:
14 8 11 7 9 6 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.1,      625076,     562694,      62382,     470863,      91831,   0.638156,   1.200000,   1.500000,   1.900000,   0.340140,   0.160000,   2.603000, 669.450060
Outstanding requests per worker:
12 9 11 5 14 6 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.3,      625012,     562631,      62381,     476435,      86196,   0.797428,   1.800000,   2.000000,   2.300000,   0.531274,   0.162000,   3.644000, 680.760580
Outstanding requests per worker:
26 7 8 8 25 8 6 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:35   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 116160 pts/0   Sl+  18:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313469905      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4022229725      L1-dcache-loads:u                                           
        1441013199      armv8_pmuv3_0/l2d_cache/:u                                   
         426728155      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.861164994 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3030118912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3013669376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997219840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980770304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964320768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004573.002997,       0.0,      250059,     224895,      25164,     146576,      78319,   0.436059,   0.542100,   0.607100,   1.600000,   0.460828,   0.000000,   8.344000, 465.584780
Outstanding requests per worker:
6 6 5 7 5 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     562931,      62094,     416086,     146845,   0.450179,   0.610100,   0.674100,   0.826100,   0.133961,   0.059000,   2.208000, 562.364764
Outstanding requests per worker:
4 8 8 11 8 6 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562625,      62407,     441511,     121114,   0.496906,   0.676100,   0.745100,   0.923100,   0.153463,   0.055000,   2.458000, 612.431950
Outstanding requests per worker:
7 8 8 9 11 4 11 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562965,      62093,     455724,     107241,   0.545525,   0.748100,   0.857100,   1.200000,   0.183033,   0.089000,   2.527000, 639.124940
Outstanding requests per worker:
8 6 10 11 12 9 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562723,      62293,     464582,      98141,   0.587042,   0.799000,   0.901100,   1.500000,   0.209511,   0.182000,   2.716000, 656.534387
Outstanding requests per worker:
8 13 9 18 8 10 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562057,      62997,     470997,      91060,   0.624114,   0.878100,   1.100000,   1.800000,   0.251280,   0.177000,   2.652000, 670.519529
Outstanding requests per worker:
9 13 7 10 6 6 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562441,      62598,     475888,      86553,   0.648870,   0.919100,   1.200000,   1.800000,   0.270878,   0.092000,   3.034000, 679.457218
Outstanding requests per worker:
9 8 11 15 11 8 8 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:36   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 117248 pts/0   Sl+  18:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         308813007      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4018111911      L1-dcache-loads:u                                           
        1434193161      armv8_pmuv3_0/l2d_cache/:u                                   
         446485264      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150064866 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3121345024
starting receive base loop
num_worker_connections 1
Creating worker on tid 3104895488
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004622.003046,       0.0,      250057,     224904,      25153,     146420,      78484,   0.341656,   0.471100,   0.496100,   0.608000,   0.092659,   0.000000,   2.030000, 464.523103
Outstanding requests per worker:
7 5 5 5 5 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.1,      625051,     562885,      62166,     417468,     145417,   0.392037,   0.536100,   0.570000,   0.685100,   0.113189,   0.059000,   2.230000, 564.656061
Outstanding requests per worker:
7 6 4 6 6 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562888,      62146,     442245,     120643,   0.419130,   0.561100,   0.615100,   0.748100,   0.124493,   0.057000,   2.134000, 613.734061
Outstanding requests per worker:
8 4 7 6 6 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562398,      62649,     454485,     107913,   0.444900,   0.606100,   0.668100,   0.795100,   0.126198,   0.068000,   2.334000, 638.240013
Outstanding requests per worker:
8 6 5 8 7 9 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562727,      62333,     464596,      98131,   0.472018,   0.656100,   0.725100,   0.863100,   0.142470,   0.100000,   2.665000, 657.209226
Outstanding requests per worker:
6 11 5 7 7 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     561868,      63171,     470050,      91818,   0.492467,   0.672100,   0.741100,   0.944100,   0.170511,   0.097000,   3.246000, 669.191274
Outstanding requests per worker:
7 11 7 9 8 8 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562538,      62497,     476099,      86439,   0.492094,   0.673100,   0.737100,   0.865100,   0.135905,   0.052000,   2.139000, 680.561951
Outstanding requests per worker:
6 15 8 8 10 9 4 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:37   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115264 pts/0   Sl+  18:37   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317814528      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        4012057246      L1-dcache-loads:u                                           
        1456985616      armv8_pmuv3_0/l2d_cache/:u                                   
         439606490      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.751374815 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2981491200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965041664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004670.003094,       0.0,      250060,     225171,      24889,     146285,      78886,   0.410619,   0.565100,   0.630100,   0.788100,   0.122075,   0.000000,   2.233000, 464.541686
Outstanding requests per worker:
9 8 5 8 6 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.5,      625013,     562639,      62374,     416714,     145925,   0.489022,   0.688100,   0.797100,   1.300000,   0.191111,   0.054000,   2.413000, 563.805149
Outstanding requests per worker:
20 8 4 6 16 10 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562411,      62628,     441753,     120658,   0.545056,   0.800100,   0.934100,   1.500000,   0.220859,   0.168000,   2.417000, 612.296959
Outstanding requests per worker:
14 6 10 8 28 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.1,      625061,     562827,      62234,     455403,     107424,   0.684137,   1.400000,   1.700000,   2.100000,   0.409617,   0.081000,   2.924000, 638.556798
Outstanding requests per worker:
8 9 10 9 33 10 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.9,      625045,     562701,      62344,     463930,      98771,   0.847750,   1.900000,   2.200000,   2.800000,   0.604379,   0.183000,   3.868000, 655.201675
Outstanding requests per worker:
25 9 11 9 34 11 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562581,      62458,     470736,      91845,   0.908853,   2.100000,   2.400000,   2.900000,   0.667078,   0.088000,   3.768000, 669.494112
Outstanding requests per worker:
29 6 13 8 36 12 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562912,      62119,     476597,      86315,   0.975714,   2.200000,   2.600000,   3.300000,   0.743652,   0.215000,   4.778000, 679.995760
Outstanding requests per worker:
36 8 11 8 44 11 8 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:38   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 118336 pts/0   Sl+  18:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310253797      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        4038031085      L1-dcache-loads:u                                           
        1436438309      armv8_pmuv3_0/l2d_cache/:u                                   
         448473271      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270643434 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2637230592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004719.003143,       0.0,      253991,     228626,      25365,     148704,      79922,   0.469651,   0.654000,   0.720100,   0.859100,   0.134756,   0.000000,   2.200000, 464.157620
Outstanding requests per worker:
7 4 15 5 8 7 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571254,      63679,     424252,     147002,   0.599549,   0.844100,   1.100000,   1.800000,   0.260355,   0.054000,   3.385000, 564.589928
Outstanding requests per worker:
8 12 29 11 6 8 20 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571663,      63297,     449521,     122142,   0.832894,   1.700000,   2.000000,   2.900000,   0.561125,   0.059000,   4.903000, 613.922523
Outstanding requests per worker:
7 10 35 10 8 11 36 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.3,      634982,     571589,      63393,     462835,     108754,   0.969231,   2.100000,   2.400000,   2.900000,   0.638922,   0.195000,   3.838000, 639.442362
Outstanding requests per worker:
7 11 26 8 13 11 49 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126977.1,      634886,     571409,      63477,     471607,      99802,   1.138598,   2.700000,   3.000000,   3.400000,   0.858475,   0.193000,   5.380000, 657.292925
Outstanding requests per worker:
10 27 46 18 16 16 55 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.5,      634923,     571515,      63408,     478822,      92693,   1.235366,   3.000000,   3.300000,   3.700000,   0.975613,   0.228000,   5.127000, 670.329972
Outstanding requests per worker:
18 28 63 20 8 29 62 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127002.9,      635015,     571569,      63446,     484185,      87384,   1.474679,   3.500000,   3.800000,   4.400000,   1.149400,   0.083000,   5.414000, 680.724598
Outstanding requests per worker:
11 25 54 11 16 12 56 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:38   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 113280 pts/0   Sl+  18:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311596676      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4111375595      L1-dcache-loads:u                                           
        1454993475      armv8_pmuv3_0/l2d_cache/:u                                   
         442182275      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080637125 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2388390400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2371940864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004767.003191,       0.0,      253998,     228474,      25524,     149670,      78804,   0.456979,   0.627100,   0.717100,   0.855100,   0.134222,   0.000000,   2.186000, 469.521749
Outstanding requests per worker:
11 6 8 4 10 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571490,      63449,     424513,     146977,   0.557120,   0.793100,   0.936100,   1.500000,   0.219062,   0.080000,   2.509000, 565.218413
Outstanding requests per worker:
15 10 6 9 11 7 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.7,      634909,     571519,      63390,     449287,     122232,   0.782807,   1.700000,   1.900000,   2.200000,   0.458587,   0.200000,   3.390000, 613.170631
Outstanding requests per worker:
31 7 10 10 28 10 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.7,      634929,     571287,      63642,     462315,     108972,   0.913665,   1.900000,   2.200000,   2.700000,   0.575699,   0.092000,   3.554000, 639.035824
Outstanding requests per worker:
49 7 12 12 15 13 14 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571858,      63088,     472242,      99616,   1.043963,   2.300000,   2.700000,   3.200000,   0.724802,   0.218000,   4.684000, 657.232306
Outstanding requests per worker:
41 16 13 12 27 13 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571307,      63626,     478765,      92542,   1.182256,   2.700000,   3.000000,   3.500000,   0.839492,   0.054000,   4.940000, 670.552719
Outstanding requests per worker:
49 23 12 15 23 13 8 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.5,      634918,     571293,      63625,     483894,      87399,   1.340281,   2.900000,   3.200000,   3.600000,   0.887872,   0.214000,   5.020000, 680.489733
Outstanding requests per worker:
47 26 16 13 43 19 13 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:39   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 112384 pts/0   Sl+  18:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318949104      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        4112762482      L1-dcache-loads:u                                           
        1465246342      armv8_pmuv3_0/l2d_cache/:u                                   
         458679524      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961349029 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3142578688
starting receive base loop
num_worker_connections 1
Creating worker on tid 3126129152
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109679616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004816.003240,       0.0,      254024,     228721,      25303,     149062,      79659,   0.452053,   0.606100,   0.681100,   1.100000,   0.179426,   0.000000,   3.060000, 466.333061
Outstanding requests per worker:
6 7 10 7 7 3 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.7,      634954,     571215,      63739,     424327,     146888,   0.515099,   0.718100,   0.786100,   0.970100,   0.153847,   0.055000,   2.869000, 566.015525
Outstanding requests per worker:
9 7 11 14 7 10 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.5,      634993,     571809,      63184,     450047,     121762,   0.590341,   0.816100,   0.935100,   1.500000,   0.208455,   0.169000,   2.373000, 614.939342
Outstanding requests per worker:
6 13 15 8 7 6 12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571462,      63459,     463366,     108096,   0.770978,   1.600000,   1.800000,   2.100000,   0.430188,   0.045000,   3.237000, 640.855675
Outstanding requests per worker:
9 13 26 15 11 9 22 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     572184,      62771,     472834,      99350,   0.880301,   1.900000,   2.200000,   2.700000,   0.567713,   0.185000,   3.523000, 658.143555
Outstanding requests per worker:
7 10 31 12 9 12 42 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     571386,      63584,     479006,      92380,   0.968924,   2.000000,   2.300000,   2.900000,   0.637779,   0.058000,   3.743000, 670.618659
Outstanding requests per worker:
8 10 34 7 12 13 39 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126977.5,      634888,     571690,      63198,     483857,      87833,   1.035471,   2.300000,   2.700000,   3.100000,   0.713399,   0.215000,   3.868000, 680.493232
Outstanding requests per worker:
42 21 16 40 43 14 14 58 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:40   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 119872 pts/0   Sl+  18:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319844536      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        4102244455      L1-dcache-loads:u                                           
        1465278827      armv8_pmuv3_0/l2d_cache/:u                                   
         445863031      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850160971 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2791436800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2774987264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004864.003288,       0.0,      258057,     232279,      25778,     152027,      80252,   0.720983,   1.500000,   1.900000,   2.300000,   0.448231,   0.000000,   3.988000, 468.038910
Outstanding requests per worker:
30 9 16 9 22 9 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.9,      645180,     580715,      64465,     431341,     149374,   1.159818,   2.800000,   3.200000,   3.700000,   0.912798,   0.050000,   5.066000, 565.536618
Outstanding requests per worker:
37 13 16 9 47 12 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.7,      645139,     581160,      63979,     457681,     123479,   1.632053,   3.600000,   4.000000,   4.500000,   1.171490,   0.082000,   6.166000, 614.292572
Outstanding requests per worker:
58 19 41 12 56 27 30 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.5,      645118,     580883,      64235,     470897,     109986,   2.288965,   4.900000,   5.600000,   6.900000,   1.640752,   0.219000,   9.140000, 640.868889
Outstanding requests per worker:
81 31 44 11 80 36 39 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.1,      645116,     580893,      64223,     479976,     100917,   2.716333,   5.700000,   6.500000,   8.600000,   1.980347,   0.222000,  10.489000, 657.973276
Outstanding requests per worker:
147 24 35 14 106 52 26 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128969.5,      644848,     580430,      64418,     486333,      94097,   4.040503,  10.200000,  15.500000,  19.600000,   4.440596,   0.217000,  22.843000, 670.686767
Outstanding requests per worker:
347 23 29 13 283 25 50 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128796.5,      643983,     579970,      64013,     491302,      88668,  10.659691,  40.000000,  44.700000,  54.400000,  15.454756,   0.210000,  57.305001, 681.271768
Outstanding requests per worker:
922 49 48 31 822 55 53 24 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:41   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 119104 pts/0   Sl+  18:41   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320141131      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4227895535      L1-dcache-loads:u                                           
        1497611623      armv8_pmuv3_0/l2d_cache/:u                                   
         467615187      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100434786 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2618552832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2602103296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2585653760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2569204224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004913.003337,       0.0,      258083,     232294,      25789,     151327,      80967,   0.610613,   0.843100,   1.100000,   1.700000,   0.239270,   0.000000,   2.707000, 464.795931
Outstanding requests per worker:
10 14 21 12 6 9 17 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.1,      645121,     580364,      64757,     430642,     149722,   1.032528,   2.000000,   2.400000,   3.000000,   0.614279,   0.084000,   3.970000, 565.064187
Outstanding requests per worker:
15 12 50 23 15 11 48 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580559,      64600,     456858,     123701,   1.585976,   3.000000,   3.400000,   4.100000,   0.896866,   0.204000,   5.507000, 614.248989
Outstanding requests per worker:
33 15 54 38 24 14 43 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.5,      645088,     580536,      64552,     470330,     110206,   2.071826,   3.400000,   3.900000,   4.700000,   0.984487,   0.175000,   6.173000, 639.842084
Outstanding requests per worker:
41 13 75 32 50 31 68 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129043.9,      645220,     580643,      64577,     479504,     101139,   2.456910,   3.900000,   4.300000,   5.000000,   1.035969,   0.219000,   6.353000, 656.815269
Outstanding requests per worker:
42 26 64 24 49 34 61 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.1,      645176,     580682,      64494,     486036,      94646,   2.791464,   4.500000,   4.900000,   5.700000,   1.130882,   0.265000,   7.463000, 670.770542
Outstanding requests per worker:
50 30 77 40 45 23 86 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.1,      645166,     580761,      64405,     492731,      88030,   3.296858,   5.500000,   5.900000,   7.100000,   1.369040,   0.790000,   8.955000, 681.982523
Outstanding requests per worker:
47 37 91 53 43 53 88 51 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:42   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 118336 pts/0   Sl+  18:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319298170      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        4237727828      L1-dcache-loads:u                                           
        1501308598      armv8_pmuv3_0/l2d_cache/:u                                   
         461302246      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880363958 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2969301504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004961.003385,       0.0,      258029,     232283,      25746,     151544,      80739,   0.675726,   0.956100,   1.400000,   1.900000,   0.294668,   0.000000,   2.636000, 467.233414
Outstanding requests per worker:
17 12 22 10 13 14 28 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.5,      645148,     580514,      64634,     431146,     149368,   1.232227,   2.300000,   2.600000,   3.100000,   0.692186,   0.057000,   3.805000, 565.947600
Outstanding requests per worker:
8 27 32 8 13 29 42 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.9,      645100,     581129,      63971,     457648,     123481,   1.740300,   2.900000,   3.100000,   3.700000,   0.806027,   0.051000,   6.749000, 615.179456
Outstanding requests per worker:
22 27 47 31 32 50 47 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.3,      645097,     580816,      64281,     470730,     110086,   2.188696,   3.300000,   3.500000,   4.400000,   0.823310,   0.209000,   6.102000, 640.937233
Outstanding requests per worker:
50 57 65 22 37 51 83 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129044.5,      645223,     580704,      64519,     479990,     100714,   2.590662,   3.800000,   4.100000,   5.300000,   0.891766,   0.233000,   6.611000, 658.087248
Outstanding requests per worker:
31 46 69 37 48 50 64 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.9,      645230,     580503,      64727,     486856,      93647,   2.974568,   4.400000,   4.800000,   5.700000,   1.026041,   0.334000,   8.629000, 670.638193
Outstanding requests per worker:
29 62 79 35 55 64 65 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129044.3,      645222,     580382,      64840,     491585,      88797,   3.130270,   4.600000,   4.900000,   5.400000,   1.004065,   0.778000,   6.740000, 680.899034
Outstanding requests per worker:
47 48 74 25 37 49 80 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:42   0:00 /usr/lib/linux
memcache      8  284  0.0 428736 114176 pts/0   Sl+  18:42   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320412745      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4251121471      L1-dcache-loads:u                                           
        1506753402      armv8_pmuv3_0/l2d_cache/:u                                   
         467948446      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901632287 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3155423744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3138974208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3122524672
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106075136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005010.003434,       0.0,      258104,     232254,      25850,     151015,      81239,   0.522302,   0.722100,   0.828100,   1.100000,   0.158468,   0.000000,   2.145000, 463.874788
Outstanding requests per worker:
8 8 13 9 12 7 8 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580461,      64663,     430102,     150359,   0.853432,   1.800000,   2.100000,   2.700000,   0.547543,   0.047000,   3.698000, 564.048572
Outstanding requests per worker:
13 10 8 27 23 12 12 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.5,      645173,     580909,      64264,     457200,     123709,   1.158697,   2.600000,   3.000000,   3.600000,   0.828398,   0.209000,   4.924000, 614.459822
Outstanding requests per worker:
23 13 13 53 26 9 16 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.7,      645209,     580691,      64518,     470776,     109915,   1.578851,   3.200000,   3.600000,   4.200000,   1.002444,   0.183000,   5.545000, 641.195586
Outstanding requests per worker:
22 16 15 43 26 22 21 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.7,      645084,     580912,      64172,     479807,     101105,   2.012282,   3.700000,   4.100000,   4.600000,   1.080361,   0.179000,   6.287000, 657.956059
Outstanding requests per worker:
44 40 27 70 54 41 26 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129052.5,      645263,     580626,      64637,     486379,      94247,   2.477169,   4.500000,   4.900000,   5.800000,   1.227159,   0.144000,   7.775000, 670.814977
Outstanding requests per worker:
43 18 30 57 51 46 26 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.1,      645141,     580459,      64682,     492362,      88097,   2.846817,   5.200000,   5.800000,   6.800000,   1.433124,   0.672000,   8.426000, 681.411144
Outstanding requests per worker:
51 25 27 109 52 16 44 85 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:43   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 118784 pts/0   Sl+  18:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323065702      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        4224584688      L1-dcache-loads:u                                           
        1501863204      armv8_pmuv3_0/l2d_cache/:u                                   
         459687156      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070060366 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2385965568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2369516032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005059.003483,       0.0,      258095,     232364,      25731,     152118,      80246,   0.611243,   0.843100,   1.200000,   1.700000,   0.255652,   0.000000,   2.471000, 468.518209
Outstanding requests per worker:
11 10 9 13 9 13 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.5,      645083,     580703,      64380,     432080,     148623,   0.996580,   2.000000,   2.300000,   2.900000,   0.603300,   0.082000,   4.005000, 567.191861
Outstanding requests per worker:
17 28 26 43 8 26 21 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129051.1,      645256,     580847,      64409,     457110,     123737,   1.346837,   2.400000,   2.800000,   3.300000,   0.726436,   0.167000,   4.550000, 614.471906
Outstanding requests per worker:
20 26 14 33 11 22 8 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.5,      645133,     580931,      64202,     470882,     110049,   1.861954,   3.100000,   3.300000,   3.800000,   0.852711,   0.219000,   5.181000, 640.820257
Outstanding requests per worker:
33 38 23 40 30 51 14 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.5,      645213,     580894,      64319,     480232,     100662,   2.227148,   3.400000,   3.600000,   4.400000,   0.849000,   0.222000,   5.974000, 657.409577
Outstanding requests per worker:
31 43 33 55 31 46 22 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.9,      645205,     580340,      64865,     486716,      93624,   2.692432,   4.100000,   4.500000,   5.200000,   0.945689,   0.350000,   6.257000, 671.329116
Outstanding requests per worker:
43 38 24 41 27 46 34 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.1,      645066,     580892,      64174,     492390,      88502,   3.097795,   4.800000,   5.200000,   6.300000,   1.167142,   0.763000,  10.629000, 681.930658
Outstanding requests per worker:
39 50 48 92 51 55 40 82 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:44   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 118784 pts/0   Sl+  18:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319897294      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4244661679      L1-dcache-loads:u                                           
        1499409623      armv8_pmuv3_0/l2d_cache/:u                                   
         464145134      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120911562 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2243883520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227433984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005108.003532,       0.0,      262202,     235976,      26226,     153991,      81985,   1.257666,   2.500000,   2.800000,   3.200000,   0.758855,   0.000000,   4.188000, 466.756556
Outstanding requests per worker:
31 11 48 8 26 14 49 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131136.9,      655685,     590127,      65558,     438717,     151410,   2.282290,   4.200000,   4.500000,   4.900000,   1.269843,   0.213000,   6.250000, 566.440790
Outstanding requests per worker:
45 31 77 12 39 44 50 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131091.9,      655460,     590364,      65096,     465669,     124695,   3.386677,   5.700000,   6.500000,   8.000000,   1.742316,   0.234000,   9.974000, 616.207901
Outstanding requests per worker:
87 58 139 47 91 53 120 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131025.5,      655128,     589839,      65289,     479183,     110656,   6.239294,  14.500000,  18.900000,  27.200000,   5.817647,   0.783000,  32.598000, 642.779274
Outstanding requests per worker:
186 38 300 32 149 46 507 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130791.1,      653956,     588842,      65114,     487328,     101514,  15.334647,  44.200000,  62.200000,  80.100000,  19.521812,   0.767000,  89.451000, 659.566974
Outstanding requests per worker:
397 60 869 44 209 72 1433 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130625.3,      653127,     587772,      65355,     493247,      94525,  33.513096,  97.700000, 120.700000, 132.400000,  39.571986,   0.835000, 136.977002, 672.884183
Outstanding requests per worker:
1005 67 1600 48 723 57 2230 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130656.9,      653285,     587747,      65538,     499380,      88367,  53.360645, 140.200000, 152.500000, 161.300000,  55.839454,   1.519000, 166.994005, 683.625420
Outstanding requests per worker:
1601 80 2327 49 1417 66 2713 58 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:45   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 123456 pts/0   Sl+  18:45   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         326183298      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4308699678      L1-dcache-loads:u                                           
        1524087532      armv8_pmuv3_0/l2d_cache/:u                                   
         455255887      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811165793 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2351231488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2334781952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2318332416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2301882880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005156.003580,       0.0,      262117,     235991,      26126,     153532,      82459,   1.429367,   3.000000,   3.700000,   4.200000,   0.976044,   0.000000,   4.723000, 466.068053
Outstanding requests per worker:
36 70 20 13 29 68 24 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131098.9,      655495,     590052,      65443,     438397,     151655,   2.947663,   6.100000,   6.600000,   7.800000,   1.781974,   0.226000,   9.746000, 566.755394
Outstanding requests per worker:
61 93 47 50 59 128 66 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131020.9,      655105,     589771,      65334,     465064,     124707,   5.333218,  12.200000,  18.600000,  26.000000,   5.428099,   0.723000,  31.998999, 616.123333
Outstanding requests per worker:
65 391 43 41 61 519 49 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130717.5,      653588,     588554,      65034,     477859,     110695,  17.012101,  61.500000,  76.400000,  88.400000,  25.127695,   0.839000,  93.234003, 641.739382
Outstanding requests per worker:
91 1524 62 66 94 1454 56 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130788.1,      653941,     588967,      64974,     487736,     101231,  32.542908, 119.300000, 133.800000, 151.100000,  50.270245,   1.045000, 159.222007, 659.631552
Outstanding requests per worker:
109 2590 107 55 102 2114 101 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130826.7,      654134,     588896,      65238,     494874,      94022,  46.151265, 170.900000, 195.200000, 209.900000,  71.959439,   1.745000, 213.292003, 672.772396
Outstanding requests per worker:
149 3481 82 49 162 2809 89 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130824.1,      654121,     589007,      65114,     500251,      88756,  57.488258, 223.200000, 236.000000, 246.600000,  88.831783,   1.755000, 250.993013, 683.081615
Outstanding requests per worker:
301 4105 155 74 275 3437 82 85 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:46   0:00 /usr/lib/linux
memcache      8  284  0.0 429760 121856 pts/0   Sl+  18:46   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316115305      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        4315465447      L1-dcache-loads:u                                           
        1508675530      armv8_pmuv3_0/l2d_cache/:u                                   
         460583395      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740656899 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2117136896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100687360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005205.003629,       0.0,      242499,     218215,      24284,     141855,      76360,   0.278622,   0.365100,   0.419100,   0.492100,   0.075213,   0.000000,   2.158000, 463.510451
Outstanding requests per worker:
3 7 3 3 5 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545199,      60916,     403892,     141307,   0.312491,   0.420100,   0.452100,   0.580100,   0.204069,   0.058000,   7.418000, 563.609733
Outstanding requests per worker:
6 4 4 5 3 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545669,      60414,     427310,     118359,   0.319723,   0.431100,   0.489100,   0.584100,   0.094520,   0.053000,   2.076000, 610.696375
Outstanding requests per worker:
4 6 6 5 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545754,      60338,     440772,     104982,   0.333976,   0.451100,   0.505100,   0.625100,   0.102425,   0.051000,   2.433000, 637.467047
Outstanding requests per worker:
5 7 4 7 3 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545675,      60437,     449646,      96029,   0.347774,   0.486100,   0.526100,   0.647100,   0.125655,   0.115000,   2.807000, 655.634401
Outstanding requests per worker:
4 8 6 6 7 12 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.9,      606135,     545268,      60867,     454743,      90525,   0.352531,   0.491100,   0.554100,   0.679100,   0.103336,   0.081000,   2.067000, 666.472531
Outstanding requests per worker:
5 5 3 7 5 10 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.9,      606080,     545390,      60690,     461128,      84262,   0.369641,   0.511100,   0.581100,   0.750100,   0.144676,   0.117000,   3.455000, 679.004841
Outstanding requests per worker:
3 10 4 6 6 16 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:46   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 112320 pts/0   Sl+  18:46   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319129875      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3893450116      L1-dcache-loads:u                                           
        1456389701      armv8_pmuv3_0/l2d_cache/:u                                   
         445732257      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930505636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506027520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005253.003677,       0.0,      242481,     218575,      23906,     141552,      77023,   0.456020,   0.423100,   0.489100,   7.700000,   1.250219,   0.000000,  17.406000, 460.632863
Outstanding requests per worker:
3 5 3 5 4 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545639,      60469,     403158,     142481,   0.333046,   0.451100,   0.504100,   0.626100,   0.101974,   0.057000,   2.409000, 561.861991
Outstanding requests per worker:
4 4 6 7 6 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545627,      60459,     428061,     117566,   0.354985,   0.491100,   0.554100,   0.683100,   0.113099,   0.061000,   2.457000, 611.653740
Outstanding requests per worker:
4 6 5 7 6 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545732,      60380,     440822,     104910,   0.374479,   0.514100,   0.581100,   0.751100,   0.131570,   0.060000,   2.499000, 637.250845
Outstanding requests per worker:
5 3 7 8 5 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.3,      606082,     545641,      60441,     449438,      96203,   0.384559,   0.552100,   0.619100,   0.749100,   0.116751,   0.119000,   1.629000, 655.046690
Outstanding requests per worker:
4 4 5 8 7 5 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545191,      60919,     455142,      90049,   0.389335,   0.555100,   0.622100,   0.752100,   0.118159,   0.123000,   1.084000, 667.954671
Outstanding requests per worker:
6 3 4 7 6 5 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545450,      60633,     460865,      84585,   0.401771,   0.561100,   0.628100,   0.757100,   0.122337,   0.058000,   2.412000, 678.295637
Outstanding requests per worker:
6 6 8 11 6 7 6 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:47   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114048 pts/0   Sl+  18:47   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318087486      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3881853163      L1-dcache-loads:u                                           
        1445001028      armv8_pmuv3_0/l2d_cache/:u                                   
         438830837      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800539758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2536305152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2519855616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2503406080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005302.003726,       0.0,      242479,     218572,      23907,     141942,      76630,   0.294648,   0.383100,   0.426100,   0.513100,   0.077403,   0.000000,   1.983000, 462.635228
Outstanding requests per worker:
5 5 7 5 4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545285,      60803,     402875,     142410,   0.321753,   0.428100,   0.485100,   0.560100,   0.087551,   0.058000,   1.997000, 561.594638
Outstanding requests per worker:
7 5 6 5 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.1,      606081,     545333,      60748,     426386,     118947,   0.339092,   0.452100,   0.499100,   0.620100,   0.100253,   0.049000,   2.161000, 609.142065
Outstanding requests per worker:
9 6 7 4 16 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545763,      60354,     440608,     105155,   0.357505,   0.489100,   0.543100,   0.630100,   0.108917,   0.057000,   2.343000, 636.515231
Outstanding requests per worker:
5 5 8 6 10 4 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     546160,      59944,     449795,      96365,   0.364840,   0.494100,   0.553100,   0.648100,   0.107140,   0.121000,   2.553000, 655.051121
Outstanding requests per worker:
9 2 8 5 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545297,      60786,     455065,      90232,   0.368503,   0.498100,   0.555100,   0.647100,   0.100518,   0.096000,   1.078000, 667.304973
Outstanding requests per worker:
7 6 10 5 3 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545186,      60912,     460695,      84491,   0.389501,   0.521100,   0.580100,   0.749100,   0.185566,   0.063000,   5.182000, 677.833626
Outstanding requests per worker:
8 5 7 3 6 6 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:48   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114624 pts/0   Sl+  18:48   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316775862      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3893701423      L1-dcache-loads:u                                           
        1439968508      armv8_pmuv3_0/l2d_cache/:u                                   
         439717508      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.801107937 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2142564864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126115328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109665792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093216256
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005350.003774,       0.0,      246195,     221471,      24724,     144125,      77346,   0.364796,   0.497100,   0.557100,   0.690100,   0.112691,   0.000000,   2.580000, 464.352958
Outstanding requests per worker:
5 5 6 5 8 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553832,      61577,     409840,     143992,   0.374505,   0.508100,   0.572100,   0.739100,   0.115550,   0.055000,   2.581000, 562.706918
Outstanding requests per worker:
6 3 9 6 8 6 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     554021,      61400,     434987,     119034,   0.401185,   0.559100,   0.635100,   0.810100,   0.137250,   0.045000,   2.575000, 612.271195
Outstanding requests per worker:
7 7 5 7 9 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     553718,      61689,     447617,     106101,   0.422900,   0.610100,   0.684100,   0.866100,   0.141694,   0.056000,   2.738000, 637.927205
Outstanding requests per worker:
7 6 5 7 12 7 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     553682,      61741,     456802,      96880,   0.447536,   0.632100,   0.738000,   0.939100,   0.159548,   0.055000,   2.591000, 656.002805
Outstanding requests per worker:
10 8 7 6 8 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553472,      61930,     463096,      90376,   0.460903,   0.673100,   0.749100,   0.935100,   0.149908,   0.057000,   2.695000, 669.138889
Outstanding requests per worker:
13 8 11 6 10 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554306,      61139,     468776,      85530,   0.478308,   0.693100,   0.811100,   1.200000,   0.194636,   0.160000,   3.147000, 679.128999
Outstanding requests per worker:
9 5 7 4 8 6 8 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:49   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 113152 pts/0   Sl+  18:49   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318636129      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
        3943089082      L1-dcache-loads:u                                           
        1451450868      armv8_pmuv3_0/l2d_cache/:u                                   
         452662936      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870286912 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2731012608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2714563072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698113536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005398.003822,       0.0,      246217,     221586,      24631,     143935,      77651,   0.328192,   0.481100,   0.546100,   0.673100,   0.106234,   0.000000,   1.977000, 463.139138
Outstanding requests per worker:
5 5 4 5 7 3 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553937,      61475,     409240,     144697,   0.371824,   0.554100,   0.635100,   0.805100,   0.138909,   0.054000,   2.234000, 561.145172
Outstanding requests per worker:
8 5 8 7 12 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     554018,      61424,     434887,     119131,   0.398570,   0.618100,   0.708100,   0.878100,   0.151750,   0.053000,   2.305000, 611.896503
Outstanding requests per worker:
9 5 7 4 11 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     554023,      61391,     447203,     106820,   0.433193,   0.684100,   0.806100,   1.100000,   0.193803,   0.090000,   2.463000, 636.716620
Outstanding requests per worker:
9 6 7 5 11 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     554281,      61163,     456651,      97630,   0.466465,   0.760100,   0.892100,   1.500000,   0.233610,   0.154000,   2.656000, 655.893913
Outstanding requests per worker:
10 7 5 5 16 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.5,      615403,     554192,      61211,     463557,      90635,   0.481015,   0.804100,   0.944100,   1.400000,   0.233622,   0.124000,   2.563000, 669.326600
Outstanding requests per worker:
12 5 10 5 11 9 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.1,      615396,     553699,      61697,     467895,      85804,   0.604408,   1.500000,   1.800000,   2.100000,   0.453207,   0.084000,   3.103000, 677.835228
Outstanding requests per worker:
28 10 9 7 23 8 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:50   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 113408 pts/0   Sl+  18:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317882989      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3950724687      L1-dcache-loads:u                                           
        1443074774      armv8_pmuv3_0/l2d_cache/:u                                   
         436191648      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901417239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3051287040
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034837504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005446.003870,       0.0,      246225,     221482,      24743,     143360,      78122,   0.312658,   0.421100,   0.479100,   0.557100,   0.085829,   0.000000,   2.092000, 461.710934
Outstanding requests per worker:
5 3 3 6 7 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     554086,      61322,     409739,     144347,   0.360420,   0.488100,   0.552100,   0.762100,   0.158897,   0.058000,   3.885000, 562.318274
Outstanding requests per worker:
6 6 6 6 10 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.1,      615401,     554563,      60838,     434789,     119774,   0.375290,   0.513100,   0.577100,   0.737100,   0.119496,   0.125000,   2.178000, 610.629332
Outstanding requests per worker:
9 7 7 7 15 24 4 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     553884,      61561,     447280,     106604,   0.393385,   0.551100,   0.617100,   0.750100,   0.125738,   0.079000,   2.451000, 637.097802
Outstanding requests per worker:
7 7 5 6 11 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     554082,      61325,     456527,      97555,   0.410816,   0.570000,   0.644100,   0.810100,   0.139285,   0.153000,   2.560000, 655.573087
Outstanding requests per worker:
8 9 5 9 10 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     553806,      61621,     463037,      90769,   0.419023,   0.605100,   0.675100,   0.808100,   0.128634,   0.048000,   2.169000, 668.822777
Outstanding requests per worker:
7 6 6 7 8 10 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     553689,      61750,     468807,      84882,   0.434000,   0.616100,   0.694100,   0.873100,   0.157269,   0.149000,   3.015000, 679.517083
Outstanding requests per worker:
10 7 5 5 7 6 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:50   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111680 pts/0   Sl+  18:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319542705      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        3947824646      L1-dcache-loads:u                                           
        1449959886      armv8_pmuv3_0/l2d_cache/:u                                   
         441627530      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860231362 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2142695936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126246400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109796864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093347328
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005495.003919,       0.0,      246204,     221699,      24505,     143645,      78054,   0.308799,   0.416100,   0.444100,   0.547000,   0.084741,   0.000000,   2.051000, 462.498690
Outstanding requests per worker:
4 4 4 6 5 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     554054,      61374,     409870,     144184,   0.346200,   0.478100,   0.504100,   0.615100,   0.097086,   0.055000,   2.050000, 562.692043
Outstanding requests per worker:
6 5 5 7 5 2 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553711,      61718,     434913,     118798,   0.377313,   0.504100,   0.556100,   0.677000,   0.108948,   0.053000,   2.171000, 613.088691
Outstanding requests per worker:
6 7 7 7 5 3 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.3,      615462,     553930,      61532,     447986,     105944,   0.391652,   0.543100,   0.579100,   0.693100,   0.113388,   0.059000,   2.327000, 637.608813
Outstanding requests per worker:
6 5 6 5 5 5 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     554245,      61159,     457009,      97236,   0.409991,   0.558100,   0.619100,   0.747100,   0.121423,   0.153000,   2.448000, 655.584814
Outstanding requests per worker:
7 7 6 7 6 4 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553969,      61461,     463017,      90952,   0.420082,   0.565100,   0.626100,   0.776000,   0.148886,   0.155000,   3.227000, 668.680477
Outstanding requests per worker:
5 7 5 5 7 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553944,      61494,     468180,      85764,   0.427787,   0.592100,   0.648100,   0.800100,   0.122264,   0.095000,   2.447000, 678.389920
Outstanding requests per worker:
6 5 9 11 4 4 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:51   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 111936 pts/0   Sl+  18:51   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317289088      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3949782160      L1-dcache-loads:u                                           
        1447270109      armv8_pmuv3_0/l2d_cache/:u                                   
         440917047      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970365485 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3042177536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005543.003967,       0.0,      250029,     225054,      24975,     146065,      78989,   0.417646,   0.601100,   0.670100,   0.820100,   0.141354,   0.000000,   2.435000, 463.146200
Outstanding requests per worker:
6 14 7 6 9 12 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562485,      62564,     417308,     145177,   0.494126,   0.730100,   0.819100,   1.100000,   0.174706,   0.055000,   2.248000, 565.172645
Outstanding requests per worker:
7 9 6 8 10 14 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562807,      62246,     442253,     120554,   0.572922,   0.872100,   1.200000,   1.800000,   0.295084,   0.166000,   2.911000, 612.970919
Outstanding requests per worker:
9 14 5 8 10 10 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562672,      62351,     455595,     107077,   0.729244,   1.600000,   1.900000,   2.200000,   0.484245,   0.078000,   3.485000, 639.202960
Outstanding requests per worker:
8 40 5 8 11 34 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     563043,      62009,     464834,      98209,   0.864835,   2.000000,   2.200000,   2.900000,   0.647550,   0.168000,   4.507000, 657.153887
Outstanding requests per worker:
8 32 7 8 9 29 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562711,      62324,     471072,      91639,   1.016004,   2.600000,   3.000000,   3.400000,   0.849374,   0.058000,   4.699000, 670.013854
Outstanding requests per worker:
9 26 7 9 10 40 8 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.1,      625021,     562770,      62251,     476075,      86695,   1.104854,   2.800000,   3.200000,   3.800000,   0.970200,   0.046000,   7.896000, 680.040608
Outstanding requests per worker:
7 54 8 10 14 24 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:52   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 113920 pts/0   Sl+  18:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310363140      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4033068240      L1-dcache-loads:u                                           
        1443717433      armv8_pmuv3_0/l2d_cache/:u                                   
         460521019      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.641466852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2510221824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2493772288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005592.004016,       0.0,      250048,     225318,      24730,     146297,      79021,   0.383514,   0.537100,   0.596100,   0.693100,   0.112072,   0.000000,   2.358000, 461.559414
Outstanding requests per worker:
6 7 4 3 9 10 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562439,      62609,     416848,     145591,   0.454756,   0.640100,   0.730100,   0.877100,   0.145077,   0.050000,   2.190000, 564.015413
Outstanding requests per worker:
9 10 7 6 5 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562455,      62587,     441736,     120719,   0.500505,   0.715000,   0.799000,   1.100000,   0.175317,   0.162000,   2.267000, 612.555612
Outstanding requests per worker:
14 8 11 9 9 14 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562550,      62489,     455655,     106895,   0.552161,   0.796100,   0.922100,   1.500000,   0.217397,   0.049000,   2.459000, 639.218898
Outstanding requests per worker:
8 12 8 6 10 15 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562566,      62466,     464348,      98218,   0.580746,   0.825100,   0.949100,   1.600000,   0.233338,   0.171000,   2.552000, 657.059941
Outstanding requests per worker:
8 13 7 5 9 11 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.5,      625018,     562191,      62827,     471163,      91028,   0.658505,   1.100000,   1.600000,   2.000000,   0.338322,   0.075000,   2.658000, 671.044528
Outstanding requests per worker:
8 30 9 7 11 31 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.3,      625077,     562578,      62499,     476256,      86322,   0.772356,   1.600000,   1.900000,   2.200000,   0.466059,   0.179000,   3.099000, 680.149178
Outstanding requests per worker:
8 17 14 8 7 27 6 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:53   0:00 /usr/lib/linux
memcache      8  284  0.0 425664 112576 pts/0   Sl+  18:53   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313057360      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4019150205      L1-dcache-loads:u                                           
        1442484316      armv8_pmuv3_0/l2d_cache/:u                                   
         444117713      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230182914 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3122917888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106468352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005640.004064,       0.0,      250056,     225038,      25018,     146366,      78672,   0.395746,   0.550100,   0.611100,   0.735100,   0.120498,   0.000000,   2.396000, 464.153312
Outstanding requests per worker:
8 5 8 4 8 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     562304,      62715,     417147,     145157,   0.463822,   0.668100,   0.740100,   0.919100,   0.150448,   0.057000,   2.290000, 564.825201
Outstanding requests per worker:
9 9 9 8 11 4 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.3,      625072,     562884,      62188,     442332,     120552,   0.514728,   0.743100,   0.856100,   1.100000,   0.180483,   0.060000,   2.207000, 613.089152
Outstanding requests per worker:
9 10 9 8 9 6 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562485,      62545,     455225,     107260,   0.600577,   0.923100,   1.300000,   1.900000,   0.311505,   0.055000,   3.162000, 639.004334
Outstanding requests per worker:
10 11 9 7 9 5 14 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124999.1,      624996,     562342,      62654,     464083,      98259,   0.717314,   1.600000,   1.900000,   2.200000,   0.455637,   0.157000,   3.546000, 656.269277
Outstanding requests per worker:
15 8 24 12 13 6 33 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.9,      625015,     562332,      62683,     470388,      91944,   0.807335,   1.800000,   2.100000,   2.500000,   0.555328,   0.167000,   3.447000, 669.092797
Outstanding requests per worker:
17 9 34 6 22 9 33 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125019.3,      625097,     562476,      62621,     476091,      86385,   0.940709,   2.100000,   2.400000,   3.200000,   0.719447,   0.061000,   4.765000, 679.737217
Outstanding requests per worker:
14 7 29 9 16 10 24 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:54   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117312 pts/0   Sl+  18:54   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315525641      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        4037429023      L1-dcache-loads:u                                           
        1451432794      armv8_pmuv3_0/l2d_cache/:u                                   
         455535846      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180617192 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2444816896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428367360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005689.004113,       0.0,      250008,     224866,      25142,     146147,      78719,   0.571964,   0.627100,   1.100000,   5.100000,   0.763202,   0.000000,   8.423000, 464.126618
Outstanding requests per worker:
7 7 29 6 4 3 25 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562596,      62461,     416857,     145739,   0.515376,   0.698100,   0.793100,   1.100000,   0.171201,   0.057000,   2.425000, 563.793310
Outstanding requests per worker:
8 7 20 9 8 9 20 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562955,      62077,     442696,     120259,   0.597653,   0.825100,   0.955100,   1.600000,   0.222899,   0.079000,   2.643000, 614.095381
Outstanding requests per worker:
9 6 9 7 13 10 24 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562687,      62354,     455384,     107303,   0.694051,   1.100000,   1.600000,   2.000000,   0.343478,   0.076000,   3.418000, 639.070369
Outstanding requests per worker:
12 10 18 8 11 5 21 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124986.9,      624935,     562511,      62424,     463686,      98825,   0.841816,   1.800000,   2.000000,   2.500000,   0.507056,   0.212000,   4.127000, 656.073200
Outstanding requests per worker:
19 22 58 15 10 25 46 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125033.9,      625170,     562725,      62445,     471650,      91075,   0.950633,   2.000000,   2.200000,   2.900000,   0.598622,   0.225000,   4.517000, 670.465238
Outstanding requests per worker:
12 6 29 11 9 8 24 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562725,      62289,     476455,      86270,   1.029066,   2.100000,   2.500000,   3.200000,   0.678425,   0.082000,   4.910000, 680.728329
Outstanding requests per worker:
6 10 34 14 12 10 32 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:54   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116288 pts/0   Sl+  18:54   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310209530      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        4037016034      L1-dcache-loads:u                                           
        1431462082      armv8_pmuv3_0/l2d_cache/:u                                   
         427665368      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969999832 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2556817920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2540368384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2523918848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2507469312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005737.004161,       0.0,      254017,     228573,      25444,     148565,      80008,   0.497746,   0.674100,   0.745100,   0.933100,   0.147685,   0.000000,   2.336000, 464.544500
Outstanding requests per worker:
11 8 5 8 7 9 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.7,      634969,     571411,      63558,     423978,     147433,   0.628254,   0.867100,   1.100000,   1.700000,   0.239009,   0.080000,   2.396000, 565.510613
Outstanding requests per worker:
9 8 10 8 10 9 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.3,      634892,     571813,      63079,     449740,     122073,   0.840563,   1.700000,   1.900000,   2.300000,   0.462654,   0.053000,   3.433000, 614.106453
Outstanding requests per worker:
10 15 35 7 9 9 35 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.5,      634968,     571846,      63122,     463476,     108370,   1.049812,   2.200000,   2.600000,   3.200000,   0.682370,   0.218000,   4.375000, 640.724450
Outstanding requests per worker:
14 13 29 11 13 17 28 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.9,      634940,     571438,      63502,     471693,      99745,   1.172243,   2.400000,   2.800000,   3.300000,   0.753344,   0.184000,   4.689000, 657.046481
Outstanding requests per worker:
14 26 19 14 25 14 51 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571656,      63283,     478825,      92831,   1.398267,   2.900000,   3.100000,   3.500000,   0.861983,   0.210000,   5.190000, 669.798566
Outstanding requests per worker:
11 18 49 18 33 13 41 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571545,      63391,     483899,      87646,   1.639324,   3.100000,   3.300000,   3.900000,   0.915380,   0.179000,   5.141000, 680.067143
Outstanding requests per worker:
23 20 44 14 32 28 35 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:55   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 117248 pts/0   Sl+  18:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315794819      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4123169342      L1-dcache-loads:u                                           
        1453932620      armv8_pmuv3_0/l2d_cache/:u                                   
         447471820      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121663313 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2563109376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2546659840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530210304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513760768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497311232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005785.004209,       0.0,      253987,     228393,      25594,     148282,      80111,   0.523281,   0.730100,   0.810100,   0.990100,   0.159767,   0.000000,   2.156000, 463.253055
Outstanding requests per worker:
9 5 15 7 12 10 14 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571540,      63393,     423774,     147766,   0.836940,   1.800000,   2.000000,   2.500000,   0.528744,   0.093000,   3.807000, 564.454399
Outstanding requests per worker:
10 9 27 8 10 15 31 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.7,      634919,     571918,      63001,     449512,     122406,   1.077410,   2.400000,   2.900000,   3.400000,   0.793254,   0.144000,   4.694000, 613.873475
Outstanding requests per worker:
11 13 42 12 29 8 34 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571363,      63584,     462373,     108990,   1.356185,   3.000000,   3.300000,   3.900000,   0.989656,   0.052000,   5.010000, 639.304517
Outstanding requests per worker:
13 10 37 14 26 12 52 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.5,      634913,     571658,      63255,     471979,      99679,   1.632078,   3.500000,   3.900000,   4.500000,   1.163432,   0.214000,   5.471000, 657.561530
Outstanding requests per worker:
23 14 62 10 25 7 61 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.9,      634910,     571476,      63434,     478609,      92867,   1.876671,   4.100000,   4.600000,   5.500000,   1.383218,   0.043000,   7.493000, 669.862097
Outstanding requests per worker:
35 15 73 12 31 12 71 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571305,      63642,     483720,      87585,   2.103638,   4.500000,   4.800000,   5.600000,   1.446455,   0.165000,   7.584000, 680.066838
Outstanding requests per worker:
45 14 74 16 26 13 72 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:56   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120000 pts/0   Sl+  18:56   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313836168      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4134302317      L1-dcache-loads:u                                           
        1457932204      armv8_pmuv3_0/l2d_cache/:u                                   
         445999551      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.809863331 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2963403264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2946953728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930504192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914054656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897605120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005834.004258,       0.0,      254010,     228455,      25555,     148272,      80183,   0.506110,   0.723000,   0.813100,   1.100000,   0.165173,   0.000000,   2.275000, 463.168681
Outstanding requests per worker:
13 13 10 8 7 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571767,      63169,     423797,     147970,   0.794585,   1.700000,   2.000000,   2.400000,   0.510672,   0.052000,   3.589000, 564.232416
Outstanding requests per worker:
13 17 6 9 9 26 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126971.3,      634857,     571614,      63243,     449145,     122469,   0.989196,   2.300000,   2.600000,   3.200000,   0.731197,   0.141000,   3.880000, 612.722456
Outstanding requests per worker:
38 49 9 12 30 53 15 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127003.3,      635017,     571602,      63415,     462853,     108749,   1.165711,   2.800000,   3.100000,   3.400000,   0.886427,   0.103000,   4.707000, 639.482374
Outstanding requests per worker:
28 47 7 15 11 51 13 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571833,      63088,     472067,      99766,   1.501909,   3.400000,   3.700000,   4.600000,   1.139456,   0.210000,   6.275000, 657.834672
Outstanding requests per worker:
37 52 9 13 29 51 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.9,      634910,     571567,      63343,     478955,      92612,   1.773815,   3.800000,   4.400000,   6.700000,   1.407513,   0.208000,  10.565000, 670.929814
Outstanding requests per worker:
38 65 12 17 35 66 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.5,      634948,     571471,      63477,     484151,      87320,   2.009776,   4.600000,   5.200000,   5.900000,   1.560072,   0.140000,   7.902000, 681.461770
Outstanding requests per worker:
33 76 14 16 24 80 12 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:57   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117824 pts/0   Sl+  18:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313327000      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4126981517      L1-dcache-loads:u                                           
        1457032990      armv8_pmuv3_0/l2d_cache/:u                                   
         444782950      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010745719 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3051942400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035492864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005882.004306,       0.0,      258036,     232387,      25649,     151577,      80810,   0.690669,   1.300000,   1.700000,   2.100000,   0.379526,   0.000000,   3.187000, 466.253512
Outstanding requests per worker:
37 11 8 9 28 8 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.9,      645155,     580336,      64819,     430802,     149534,   1.116753,   2.700000,   3.000000,   3.500000,   0.864157,   0.054000,   4.933000, 565.177244
Outstanding requests per worker:
50 13 11 11 46 12 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580888,      64208,     456725,     124163,   1.434814,   3.300000,   3.700000,   4.600000,   1.116754,   0.210000,   6.305000, 613.710404
Outstanding requests per worker:
77 24 13 34 71 9 21 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.3,      645177,     580661,      64516,     470794,     109867,   2.099441,   4.400000,   5.000000,   5.600000,   1.382461,   0.212000,   6.616000, 640.770641
Outstanding requests per worker:
70 22 28 27 67 28 29 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129010.3,      645052,     580393,      64659,     480150,     100243,   2.637738,   5.400000,   5.900000,   6.700000,   1.591281,   0.238000,   8.546000, 659.312325
Outstanding requests per worker:
78 32 37 39 114 49 36 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128936.5,      644683,     580037,      64646,     487095,      92942,   4.448819,  11.200000,  15.100000,  30.400000,   5.609838,   0.277000,  34.625001, 672.772756
Outstanding requests per worker:
556 36 34 45 157 34 28 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128868.7,      644344,     579718,      64626,     492042,      87676,  10.272475,  42.300000,  58.800000,  67.000000,  17.385751,   0.767000,  70.391998, 683.004733
Outstanding requests per worker:
1120 51 29 48 421 49 48 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:58   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 115392 pts/0   Sl+  18:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322619087      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4233614227      L1-dcache-loads:u                                           
        1496785410      armv8_pmuv3_0/l2d_cache/:u                                   
         459817545      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210929409 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2881352192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864902656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848453120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832003584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005931.004355,       0.0,      258014,     232154,      25860,     151179,      80975,   0.791403,   1.700000,   1.900000,   2.500000,   0.479582,   0.000000,   3.496000, 464.649362
Outstanding requests per worker:
15 11 34 13 11 11 41 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.9,      645135,     580501,      64634,     431506,     148995,   1.471840,   3.200000,   3.700000,   4.300000,   1.048764,   0.070000,   6.166000, 566.464175
Outstanding requests per worker:
9 30 61 9 11 33 55 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.1,      645081,     580550,      64531,     456976,     123574,   2.228976,   4.900000,   5.300000,   6.000000,   1.518763,   0.215000,   7.648000, 614.790924
Outstanding requests per worker:
41 26 99 19 31 28 86 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128998.5,      644993,     580250,      64743,     470414,     109836,   3.453768,   7.100000,  11.700000,  14.500000,   3.057949,   0.241000,  16.535999, 640.504541
Outstanding requests per worker:
27 48 196 33 40 41 153 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128888.3,      644442,     580040,      64402,     479737,     100303,   6.840880,  22.500000,  25.200000,  31.800000,   8.390500,   0.705000,  35.057001, 658.483858
Outstanding requests per worker:
41 58 545 47 36 47 521 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128791.1,      643956,     579833,      64123,     486006,      93827,  14.921550,  55.600000,  64.500000,  71.800000,  22.197019,   0.353000,  76.286003, 671.218225
Outstanding requests per worker:
37 39 1186 43 62 50 1123 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128725.3,      643627,     579317,      64310,     491523,      87794,  26.046059,  97.600000, 107.900000, 127.900000,  40.957928,   0.794000, 133.704007, 682.437498
Outstanding requests per worker:
78 73 2133 26 82 79 1677 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:59   0:00 /usr/lib/linux
memcache      8  284  0.0 427712 122624 pts/0   Sl+  18:59   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316336883      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4250263528      L1-dcache-loads:u                                           
        1487414143      armv8_pmuv3_0/l2d_cache/:u                                   
         460847279      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.241897721 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2584408576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567959040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576005980.004404,       0.0,      258025,     232364,      25661,     151718,      80646,   0.763487,   1.600000,   1.900000,   2.400000,   0.471963,   0.000000,   3.252000, 467.986138
Outstanding requests per worker:
9 34 11 6 16 31 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.9,      645100,     580621,      64479,     431098,     149523,   1.268973,   2.800000,   3.100000,   3.400000,   0.878852,   0.167000,   5.002000, 565.478586
Outstanding requests per worker:
40 52 6 21 38 43 22 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.7,      645114,     580711,      64403,     457168,     123543,   1.827178,   3.700000,   4.000000,   4.700000,   1.206529,   0.157000,   5.932000, 614.211813
Outstanding requests per worker:
32 73 30 14 57 68 22 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.9,      645200,     580695,      64505,     470745,     109950,   2.283317,   4.400000,   4.800000,   5.700000,   1.404024,   0.090000,   6.533000, 640.948036
Outstanding requests per worker:
44 74 30 12 38 74 25 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128993.5,      644968,     580177,      64791,     479703,     100474,   2.833760,   5.600000,   6.200000,   7.500000,   1.770802,   0.215000,   9.651000, 658.213030
Outstanding requests per worker:
56 108 64 26 59 135 57 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128939.9,      644700,     580291,      64409,     486464,      93827,   5.206408,  15.000000,  18.000000,  26.400000,   5.911802,   0.217000,  29.723000, 671.507556
Outstanding requests per worker:
60 428 26 16 51 392 51 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128809.7,      644049,     579216,      64833,     491277,      87939,  12.544100,  47.000000,  54.500000,  59.500000,  18.114388,   0.185000,  61.719999, 681.220935
Outstanding requests per worker:
68 954 49 27 67 992 41 21 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:59   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 118464 pts/0   Sl+  18:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320390846      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4227885188      L1-dcache-loads:u                                           
        1496293797      armv8_pmuv3_0/l2d_cache/:u                                   
         449108659      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000833760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2502291968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006029.004453,       0.0,      258064,     232267,      25797,     151601,      80666,   0.600676,   0.906100,   1.400000,   1.900000,   0.305147,   0.000000,   2.564000, 466.140941
Outstanding requests per worker:
9 27 6 6 7 18 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.3,      645187,     580565,      64622,     431408,     149157,   0.994440,   2.400000,   2.700000,   3.100000,   0.753106,   0.079000,   4.075000, 565.769297
Outstanding requests per worker:
10 29 18 9 10 32 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.3,      645197,     580747,      64450,     457012,     123735,   1.182099,   2.800000,   3.100000,   3.400000,   0.902645,   0.096000,   4.813000, 614.119487
Outstanding requests per worker:
10 41 14 17 10 46 18 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.7,      645109,     580436,      64673,     470243,     110193,   1.511799,   3.600000,   3.900000,   4.400000,   1.174768,   0.208000,   5.426000, 640.380678
Outstanding requests per worker:
16 61 29 25 10 71 22 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.1,      645201,     581351,      63850,     479998,     101353,   2.047743,   4.300000,   4.700000,   5.500000,   1.373659,   0.054000,   8.778000, 657.750517
Outstanding requests per worker:
17 65 27 17 26 70 29 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.5,      645118,     581088,      64030,     487252,      93836,   2.410503,   5.000000,   5.800000,   7.200000,   1.626763,   0.215000,   9.143000, 672.082819
Outstanding requests per worker:
16 112 47 28 20 99 39 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129048.7,      645244,     580566,      64678,     492193,      88373,   2.771314,   5.700000,   6.300000,   7.500000,   1.751740,   0.224000,   9.701000, 681.807614
Outstanding requests per worker:
32 95 32 35 27 84 37 25 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:00   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117056 pts/0   Sl+  19:00   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314542378      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        4221544528      L1-dcache-loads:u                                           
        1475683778      armv8_pmuv3_0/l2d_cache/:u                                   
         445872813      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290799465 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2469327360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2452877824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2436428288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006077.004501,       0.0,      258107,     232256,      25851,     150879,      81377,   0.587709,   0.797100,   0.949100,   1.600000,   0.224808,   0.000000,   2.315000, 463.936208
Outstanding requests per worker:
11 5 9 23 6 9 10 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.3,      645122,     580769,      64353,     429889,     150880,   0.937532,   1.800000,   2.000000,   2.600000,   0.523925,   0.084000,   3.590000, 563.141704
Outstanding requests per worker:
10 20 24 44 7 28 6 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129011.9,      645060,     580643,      64417,     456734,     123909,   1.356240,   2.600000,   2.900000,   3.300000,   0.753783,   0.200000,   4.496000, 614.309002
Outstanding requests per worker:
42 32 37 57 32 50 26 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129055.3,      645277,     581043,      64234,     470893,     110150,   2.006387,   3.100000,   3.400000,   4.100000,   0.772745,   0.220000,   5.052000, 640.210399
Outstanding requests per worker:
24 32 32 39 31 27 26 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.7,      645169,     581057,      64112,     480012,     101045,   2.268005,   3.400000,   3.700000,   4.700000,   0.784701,   0.335000,   5.860000, 657.662056
Outstanding requests per worker:
27 43 37 54 28 37 30 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580623,      64526,     486821,      93802,   2.539825,   3.900000,   4.200000,   4.600000,   0.852511,   0.774000,   6.313000, 670.994676
Outstanding requests per worker:
41 39 53 66 35 48 28 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.9,      645215,     580841,      64374,     492719,      88122,   3.080234,   4.700000,   5.400000,   7.300000,   1.191072,   0.778000,   9.700000, 681.656533
Outstanding requests per worker:
42 36 46 54 32 38 47 68 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:01   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117376 pts/0   Sl+  19:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317885790      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        4243676918      L1-dcache-loads:u                                           
        1499288996      armv8_pmuv3_0/l2d_cache/:u                                   
         471840151      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821403884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2257842688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241393152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224943616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006126.004550,       0.0,      262246,     236226,      26020,     153862,      82364,   1.156420,   2.400000,   2.800000,   3.100000,   0.720346,   0.000000,   3.532000, 466.372228
Outstanding requests per worker:
12 24 45 16 10 29 35 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131131.5,      655658,     589879,      65779,     438848,     151031,   2.267377,   3.900000,   4.400000,   5.100000,   1.049557,   0.204000,   6.393000, 567.222357
Outstanding requests per worker:
23 52 52 35 35 34 54 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131114.9,      655575,     590327,      65248,     465682,     124645,   3.298108,   5.600000,   6.400000,   9.000000,   1.527285,   0.768000,  11.942000, 617.088033
Outstanding requests per worker:
45 55 135 42 31 50 122 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131022.9,      655115,     589918,      65197,     478407,     111511,   5.749184,  14.400000,  19.800000,  25.700000,   5.568371,   0.927000,  30.224999, 641.058561
Outstanding requests per worker:
46 60 482 68 41 66 377 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130809.9,      654050,     588756,      65294,     486746,     102010,  15.226767,  52.900000,  64.900000,  75.900000,  21.080069,   1.752000,  81.099004, 658.743417
Outstanding requests per worker:
51 77 1307 50 62 95 1239 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130832.9,      654165,     588636,      65529,     493918,      94718,  29.265691, 109.200000, 116.200000, 133.600000,  43.864523,   1.758000, 137.639999, 672.195109
Outstanding requests per worker:
65 83 2236 62 56 79 1946 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130877.1,      654386,     588901,      65485,     499781,      89120,  40.813393, 150.400000, 159.400000, 171.700000,  61.615534,   1.919000, 178.078994, 682.713083
Outstanding requests per worker:
89 135 2913 63 77 112 2493 93 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:02   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 119168 pts/0   Sl+  19:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319030442      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        4321007797      L1-dcache-loads:u                                           
        1518689401      armv8_pmuv3_0/l2d_cache/:u                                   
         471267197      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.031182653 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2630087168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2613637632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2597188096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580738560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2564289024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006174.004598,       0.0,      262274,     236028,      26246,     153898,      82130,   0.810908,   1.600000,   2.000000,   2.600000,   0.480011,   0.000000,   3.630000, 466.676682
Outstanding requests per worker:
11 16 49 11 10 8 26 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131127.9,      655640,     590188,      65452,     438713,     151475,   1.418890,   2.800000,   3.100000,   3.700000,   0.877824,   0.147000,   5.821000, 566.621334
Outstanding requests per worker:
32 25 64 9 35 29 72 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131157.5,      655788,     590391,      65397,     464802,     125589,   2.014545,   3.900000,   4.200000,   4.700000,   1.127873,   0.213000,   5.941000, 615.487065
Outstanding requests per worker:
34 28 65 14 33 43 61 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131151.7,      655759,     590062,      65697,     478721,     111341,   2.606155,   5.000000,   5.500000,   6.400000,   1.490261,   0.164000,   8.332000, 641.675639
Outstanding requests per worker:
44 41 74 23 29 43 70 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131109.7,      655549,     590244,      65305,     488656,     101588,   3.312657,   6.300000,   7.800000,  11.600000,   2.257324,   0.261000,  13.688000, 659.809450
Outstanding requests per worker:
41 38 206 22 54 52 166 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130918.5,      654593,     588818,      65775,     494472,      94346,   9.339773,  34.900000,  41.400000,  50.600000,  13.499051,   0.210000,  52.850999, 673.091150
Outstanding requests per worker:
52 50 826 33 47 46 700 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130914.1,      654571,     589093,      65478,     500217,      88876,  18.289533,  69.300000,  78.000000,  83.700000,  27.600202,   0.690000,  88.013999, 683.113376
Outstanding requests per worker:
46 57 1438 38 45 66 1277 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:03   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 120704 pts/0   Sl+  19:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324617781      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4317455846      L1-dcache-loads:u                                           
        1523498130      armv8_pmuv3_0/l2d_cache/:u                                   
         462069568      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910882866 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2562978304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2546528768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530079232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513629696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497180160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006223.004647,       0.0,      242496,     218471,      24025,     142096,      76375,   0.272458,   0.358100,   0.381100,   0.452100,   0.069212,   0.000000,   1.966000, 464.175090
Outstanding requests per worker:
3 7 5 4 5 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545729,      60386,     403898,     141831,   0.296103,   0.385100,   0.427100,   0.504100,   0.079774,   0.056000,   2.147000, 563.023579
Outstanding requests per worker:
5 5 5 4 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545517,      60611,     428156,     117361,   0.313788,   0.423100,   0.454100,   0.555100,   0.087333,   0.055000,   2.039000, 612.257202
Outstanding requests per worker:
4 5 4 4 7 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.9,      606080,     545487,      60593,     440117,     105370,   0.322380,   0.428100,   0.485100,   0.558100,   0.087195,   0.082000,   2.289000, 637.340281
Outstanding requests per worker:
2 7 5 5 5 9 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545866,      60243,     449261,      96605,   0.332346,   0.441100,   0.489100,   0.577100,   0.093112,   0.098000,   2.471000, 654.422285
Outstanding requests per worker:
5 5 5 5 4 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545714,      60395,     455750,      89964,   0.343083,   0.457100,   0.507100,   0.622100,   0.101512,   0.092000,   2.633000, 667.488780
Outstanding requests per worker:
4 4 5 6 5 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.1,      606126,     545500,      60626,     461037,      84463,   0.356545,   0.489100,   0.552100,   0.656100,   0.113500,   0.054000,   2.868000, 678.242821
Outstanding requests per worker:
5 9 5 6 4 6 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:03   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 117248 pts/0   Sl+  19:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319374037      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3891136853      L1-dcache-loads:u                                           
        1451296824      armv8_pmuv3_0/l2d_cache/:u                                   
         446426316      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990268651 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2275602944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2259153408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2242703872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226254336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006272.004696,       0.0,      242495,     217989,      24506,     141551,      76438,   0.273858,   0.359100,   0.381100,   0.466100,   0.072609,   0.000000,   2.667000, 463.900839
Outstanding requests per worker:
2 2 5 3 5 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545468,      60641,     403224,     142244,   0.295940,   0.384100,   0.424100,   0.494100,   0.079071,   0.052000,   2.679000, 561.363213
Outstanding requests per worker:
4 5 4 5 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.7,      606079,     545609,      60470,     427367,     118242,   0.314343,   0.422100,   0.448100,   0.547000,   0.083973,   0.058000,   2.749000, 610.796072
Outstanding requests per worker:
5 6 4 5 4 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545382,      60718,     440041,     105341,   0.330454,   0.433100,   0.487100,   0.566100,   0.103397,   0.058000,   2.723000, 637.270873
Outstanding requests per worker:
6 7 5 5 5 4 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545933,      60157,     449328,      96605,   0.362854,   0.449100,   0.493100,   1.400000,   0.317560,   0.114000,   7.622000, 654.679078
Outstanding requests per worker:
5 6 6 6 4 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545896,      60232,     455351,      90545,   0.342606,   0.452100,   0.493100,   0.564100,   0.085885,   0.106000,   1.018000, 667.418188
Outstanding requests per worker:
3 3 6 5 5 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.9,      606080,     545675,      60405,     460919,      84756,   0.353527,   0.486100,   0.511100,   0.622100,   0.109728,   0.055000,   2.948000, 678.118393
Outstanding requests per worker:
6 5 9 5 6 5 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:04   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114944 pts/0   Sl+  19:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320050174      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3887436785      L1-dcache-loads:u                                           
        1461686454      armv8_pmuv3_0/l2d_cache/:u                                   
         441491503      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010647483 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2254696960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2238247424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006321.004745,       0.0,      242495,     218230,      24265,     141414,      76816,   0.302421,   0.418100,   0.447100,   0.558100,   0.086582,   0.000000,   2.312000, 461.717711
Outstanding requests per worker:
6 8 5 7 4 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545291,      60819,     403210,     142081,   0.330531,   0.449100,   0.501000,   0.620100,   0.097748,   0.060000,   2.253000, 562.149427
Outstanding requests per worker:
3 10 4 4 5 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.3,      606127,     545749,      60378,     427553,     118196,   0.355819,   0.496100,   0.563100,   0.697100,   0.115052,   0.059000,   2.240000, 611.041404
Outstanding requests per worker:
6 9 6 6 8 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.5,      606103,     545506,      60597,     440952,     104554,   0.370901,   0.515100,   0.582100,   0.706100,   0.111815,   0.083000,   2.266000, 637.751876
Outstanding requests per worker:
7 8 7 5 5 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545378,      60731,     449135,      96243,   0.391429,   0.556100,   0.627100,   0.766100,   0.141322,   0.126000,   2.606000, 655.239346
Outstanding requests per worker:
10 7 7 5 6 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     546006,      60119,     456068,      89938,   0.410322,   0.573100,   0.654000,   0.952100,   0.183830,   0.135000,   3.456000, 667.103781
Outstanding requests per worker:
6 9 3 7 5 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.9,      606135,     545368,      60767,     460594,      84774,   0.409183,   0.587100,   0.684100,   0.817100,   0.132495,   0.063000,   2.285000, 678.182766
Outstanding requests per worker:
7 11 4 6 5 8 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:05   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 108672 pts/0   Sl+  19:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313881403      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        3890429021      L1-dcache-loads:u                                           
        1439050361      armv8_pmuv3_0/l2d_cache/:u                                   
         464728828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950233098 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3144282624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127833088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111383552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006370.004794,       0.0,      246222,     221579,      24643,     143922,      77657,   0.307878,   0.415100,   0.442100,   0.545100,   0.079282,   0.000000,   2.016000, 463.065552
Outstanding requests per worker:
5 5 4 4 5 7 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     553969,      61463,     410230,     143739,   0.337618,   0.447100,   0.493100,   0.611100,   0.094964,   0.060000,   1.963000, 563.040950
Outstanding requests per worker:
5 6 5 5 5 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     553847,      61560,     434367,     119480,   0.359003,   0.485100,   0.545100,   0.645100,   0.104137,   0.096000,   2.110000, 611.958443
Outstanding requests per worker:
5 7 7 5 4 4 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     554230,      61179,     447866,     106364,   0.381503,   0.517100,   0.579100,   0.734100,   0.119798,   0.083000,   2.309000, 637.988470
Outstanding requests per worker:
4 10 6 6 6 10 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554106,      61306,     456693,      97413,   0.391856,   0.546100,   0.610100,   0.742100,   0.120710,   0.144000,   2.566000, 655.705024
Outstanding requests per worker:
6 6 7 6 4 9 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553901,      61513,     463148,      90753,   0.408897,   0.568100,   0.638100,   0.774100,   0.123069,   0.054000,   2.354000, 668.774689
Outstanding requests per worker:
4 9 6 6 7 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.3,      615417,     553843,      61574,     468229,      85614,   0.410678,   0.564100,   0.632100,   0.800100,   0.133827,   0.151000,   2.823000, 678.199968
Outstanding requests per worker:
5 6 7 6 5 12 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:06   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 116096 pts/0   Sl+  19:06   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317640862      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3953605111      L1-dcache-loads:u                                           
        1449153185      armv8_pmuv3_0/l2d_cache/:u                                   
         445472958      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010442137 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2944397824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2927948288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911498752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895049216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006418.004842,       0.0,      246205,     221499,      24706,     143818,      77681,   0.333119,   0.442100,   0.486100,   0.580100,   0.089622,   0.000000,   2.153000, 463.587939
Outstanding requests per worker:
5 7 10 9 8 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553608,      61822,     409296,     144312,   0.378858,   0.509100,   0.571100,   0.739100,   0.119927,   0.058000,   2.186000, 562.210786
Outstanding requests per worker:
6 4 7 7 7 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     554222,      61208,     434635,     119587,   0.407952,   0.562000,   0.628100,   0.768100,   0.124012,   0.096000,   2.131000, 611.704662
Outstanding requests per worker:
7 6 9 6 6 5 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     554058,      61367,     447318,     106740,   0.429461,   0.610100,   0.678100,   0.820100,   0.134828,   0.089000,   2.241000, 637.147071
Outstanding requests per worker:
6 4 8 5 10 6 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554165,      61275,     456183,      97982,   0.461852,   0.640100,   0.740100,   0.958100,   0.171921,   0.136000,   3.374000, 654.441358
Outstanding requests per worker:
7 5 11 7 10 6 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553863,      61547,     463264,      90599,   0.466397,   0.674100,   0.749100,   0.903100,   0.146187,   0.125000,   1.721000, 668.145144
Outstanding requests per worker:
11 7 10 8 7 4 10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     554059,      61382,     468375,      85684,   0.493253,   0.704100,   0.816100,   1.200000,   0.191262,   0.052000,   3.342000, 678.373707
Outstanding requests per worker:
7 6 10 7 8 6 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:07   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116544 pts/0   Sl+  19:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314339670      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        3950486358      L1-dcache-loads:u                                           
        1442245828      armv8_pmuv3_0/l2d_cache/:u                                   
         443122360      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.499957256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2277634560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2261185024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244735488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228285952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006467.004891,       0.0,      245387,     220930,      24457,     143534,      77396,   2.955181,   6.600000,  27.700000,  39.500000,   8.398515,   0.000000,  44.612002, 464.352093
Outstanding requests per worker:
446 5 7 6 391 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123073.5,      615368,     554020,      61348,     409457,     144563,   3.316634,  11.500000,  29.300000,  41.000000,   8.967181,   0.053000,  46.385001, 562.176412
Outstanding requests per worker:
452 6 5 6 436 9 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123104.9,      615525,     553815,      61710,     434354,     119461,   3.845829,  16.500000,  31.000000,  42.600000,   9.692979,   0.055000,  47.369000, 611.370436
Outstanding requests per worker:
459 4 5 5 325 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     553746,      61677,     447328,     106418,   4.469422,  20.800000,  34.200000,  44.700000,  10.615294,   0.056000,  47.935002, 638.120712
Outstanding requests per worker:
405 7 6 6 385 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123074.1,      615371,     553844,      61527,     455979,      97865,   4.907513,  22.900000,  36.000000,  45.700000,  11.196549,   0.153000,  49.563002, 654.668356
Outstanding requests per worker:
478 15 29 13 325 11 34 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123124.1,      615621,     554109,      61512,     463199,      90910,   5.157909,  25.200000,  36.200000,  45.300000,  11.389037,   0.155000,  48.726998, 668.476181
Outstanding requests per worker:
347 4 5 7 330 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123098.5,      615493,     554026,      61467,     467979,      86047,   5.727558,  27.900000,  38.200000,  47.000000,  12.111523,   0.059000,  51.058002, 677.565362
Outstanding requests per worker:
200 6 6 7 398 4 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:07   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 115328 pts/0   Sl+  19:07   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313683627      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
        3974529998      L1-dcache-loads:u                                           
        1446918238      armv8_pmuv3_0/l2d_cache/:u                                   
         435961268      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081241665 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2454843904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2438394368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006516.004940,       0.0,      246207,     221773,      24434,     143373,      78400,   0.352799,   0.493100,   0.558100,   0.683100,   0.109374,   0.000000,   2.070000, 461.503497
Outstanding requests per worker:
9 5 4 6 6 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553905,      61523,     409507,     144398,   0.401381,   0.576100,   0.674100,   0.811100,   0.134196,   0.059000,   2.033000, 561.718040
Outstanding requests per worker:
6 6 9 7 10 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.5,      615448,     554240,      61208,     434736,     119504,   0.441155,   0.643100,   0.744100,   0.907100,   0.153386,   0.057000,   2.045000, 611.424347
Outstanding requests per worker:
7 6 6 6 10 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     554101,      61345,     446884,     107217,   0.546309,   0.746100,   0.885100,   3.800000,   0.548356,   0.057000,   8.405000, 636.832956
Outstanding requests per worker:
13 9 7 8 10 12 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     554074,      61362,     455939,      98135,   0.506508,   0.756100,   0.883100,   1.300000,   0.203135,   0.157000,   2.452000, 654.865404
Outstanding requests per worker:
9 6 6 6 10 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553938,      61480,     463325,      90613,   0.529053,   0.797100,   0.931100,   1.500000,   0.242231,   0.165000,   3.244000, 668.692942
Outstanding requests per worker:
15 7 8 8 11 5 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     553949,      61485,     468043,      85906,   0.582726,   0.942100,   1.400000,   1.900000,   0.313592,   0.053000,   2.520000, 678.561774
Outstanding requests per worker:
17 10 7 7 20 7 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:08   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114240 pts/0   Sl+  19:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311525727      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        3952741172      L1-dcache-loads:u                                           
        1436213153      armv8_pmuv3_0/l2d_cache/:u                                   
         446808135      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.899895025 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2587750912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2571301376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006564.004988,       0.0,      250050,     225094,      24956,     146186,      78908,   2.763630,   9.100000,  21.900000,  36.500000,   7.337254,   0.000000,  43.613002, 463.321364
Outstanding requests per worker:
7 7 6 5 6 8 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562489,      62559,     416439,     146050,   0.444257,   0.606100,   0.671100,   0.818100,   0.128469,   0.059000,   3.034000, 563.456491
Outstanding requests per worker:
6 11 7 5 7 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     563069,      61994,     442030,     121039,   0.496872,   0.681100,   0.781100,   1.100000,   0.166678,   0.089000,   2.394000, 612.132849
Outstanding requests per worker:
7 12 11 8 8 9 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.5,      625013,     562257,      62756,     454851,     107406,   0.612770,   0.931100,   1.600000,   2.100000,   0.349092,   0.059000,   3.417000, 638.767300
Outstanding requests per worker:
10 27 9 6 6 20 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124999.7,      624999,     562199,      62800,     463568,      98631,   0.702141,   1.600000,   1.900000,   2.200000,   0.448039,   0.119000,   2.659000, 656.224632
Outstanding requests per worker:
9 33 9 10 9 38 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562023,      63031,     470396,      91627,   0.802952,   1.800000,   2.100000,   2.600000,   0.560519,   0.182000,   3.612000, 669.792421
Outstanding requests per worker:
10 20 5 9 9 28 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562353,      62709,     476576,      85777,   0.929660,   2.100000,   2.400000,   3.000000,   0.695820,   0.169000,   3.817000, 680.577084
Outstanding requests per worker:
7 30 9 10 9 32 12 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:09   0:00 /usr/lib/linux
memcache      7  283  0.0 425664 117888 pts/0   Sl+  19:09   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316329237      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        4029554031      L1-dcache-loads:u                                           
        1443765274      armv8_pmuv3_0/l2d_cache/:u                                   
         439886598      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900576941 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2591683072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575233536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2558784000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006613.005037,       0.0,      250038,     225008,      25030,     145918,      79090,   0.362121,   0.489100,   0.547000,   0.669000,   0.103803,   0.000000,   2.039000, 462.167412
Outstanding requests per worker:
6 5 11 3 6 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.3,      625072,     562685,      62387,     416523,     146162,   0.418627,   0.596100,   0.664100,   0.804100,   0.133424,   0.054000,   2.231000, 562.825407
Outstanding requests per worker:
6 8 10 5 5 3 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     563212,      61812,     442408,     120804,   0.457869,   0.657100,   0.733100,   0.920100,   0.151152,   0.050000,   2.346000, 612.770981
Outstanding requests per worker:
4 7 9 6 8 4 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562554,      62481,     454445,     108109,   0.490245,   0.697100,   0.801100,   1.100000,   0.171424,   0.059000,   2.426000, 638.652668
Outstanding requests per worker:
7 11 14 5 7 6 12 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562894,      62162,     464365,      98529,   0.537661,   0.794100,   0.947100,   1.600000,   0.232321,   0.091000,   2.523000, 656.533584
Outstanding requests per worker:
6 11 6 6 9 7 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562350,      62707,     469948,      92402,   0.604451,   0.985100,   1.500000,   2.000000,   0.345117,   0.153000,   2.977000, 668.794246
Outstanding requests per worker:
10 13 10 10 5 10 16 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.3,      625002,     562468,      62534,     476513,      85955,   0.688398,   1.500000,   1.800000,   2.200000,   0.445483,   0.172000,   3.676000, 680.766826
Outstanding requests per worker:
10 6 31 5 9 8 31 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:10   0:00 /usr/lib/linux
memcache      7  277  0.0 424640 119296 pts/0   Sl+  19:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312594433      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4024585645      L1-dcache-loads:u                                           
        1440552814      armv8_pmuv3_0/l2d_cache/:u                                   
         446706402      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.649905530 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2931749376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915299840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898850304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006662.005086,       0.0,      250085,     225301,      24784,     145946,      79355,   0.360499,   0.482100,   0.538100,   0.630100,   0.097815,   0.000000,   2.206000, 462.259892
Outstanding requests per worker:
7 6 5 4 5 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562353,      62677,     415524,     146829,   0.425554,   0.599100,   0.663100,   0.797100,   0.127294,   0.086000,   2.060000, 561.675117
Outstanding requests per worker:
7 6 4 7 8 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562242,      62797,     441572,     120670,   0.468106,   0.661100,   0.730100,   0.870100,   0.139764,   0.077000,   2.284000, 613.051295
Outstanding requests per worker:
6 13 8 4 7 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562554,      62494,     454922,     107632,   0.500199,   0.692000,   0.788100,   0.945100,   0.154569,   0.056000,   2.274000, 637.970975
Outstanding requests per worker:
6 11 8 10 10 10 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.3,      625077,     562568,      62509,     463875,      98693,   0.538197,   0.741100,   0.824100,   1.100000,   0.175104,   0.171000,   2.667000, 655.794883
Outstanding requests per worker:
8 15 4 9 5 11 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562781,      62243,     471172,      91609,   0.566770,   0.797100,   0.915100,   1.400000,   0.202334,   0.176000,   3.428000, 669.804563
Outstanding requests per worker:
11 10 8 9 9 9 9 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562834,      62209,     476166,      86668,   0.591671,   0.819100,   0.962100,   1.700000,   0.251107,   0.058000,   3.448000, 679.947564
Outstanding requests per worker:
6 11 5 10 10 13 9 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:11   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116224 pts/0   Sl+  19:11   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313794356      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        4017795131      L1-dcache-loads:u                                           
        1438233467      armv8_pmuv3_0/l2d_cache/:u                                   
         436301305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091045523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2142630400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126180864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109731328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093281792
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006711.005135,       0.0,      250065,     225044,      25021,     146526,      78518,   0.356292,   0.483100,   0.540100,   0.664100,   0.102375,   0.000000,   2.258000, 464.720206
Outstanding requests per worker:
8 8 7 7 4 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562606,      62432,     416968,     145638,   0.413864,   0.565100,   0.627100,   0.768100,   0.126961,   0.050000,   2.214000, 564.481589
Outstanding requests per worker:
5 6 8 6 9 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562805,      62229,     441810,     120995,   0.453607,   0.628100,   0.696100,   0.859100,   0.146110,   0.054000,   2.217000, 612.634202
Outstanding requests per worker:
13 6 6 6 14 12 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.1,      625071,     563046,      62025,     455744,     107302,   0.499656,   0.722100,   0.801100,   1.200000,   0.191554,   0.086000,   3.365000, 639.581995
Outstanding requests per worker:
8 9 9 7 11 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.7,      625074,     562905,      62169,     464170,      98735,   0.525582,   0.750100,   0.858100,   1.200000,   0.193795,   0.137000,   3.353000, 656.391071
Outstanding requests per worker:
8 10 8 8 11 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562701,      62335,     470914,      91787,   0.544341,   0.793100,   0.883100,   1.200000,   0.189306,   0.165000,   2.326000, 669.678620
Outstanding requests per worker:
11 5 7 7 9 9 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562124,      62910,     475975,      86149,   0.646496,   1.100000,   1.600000,   2.000000,   0.349083,   0.079000,   3.485000, 680.212490
Outstanding requests per worker:
28 9 6 7 12 5 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:12   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 113088 pts/0   Sl+  19:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314551927      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        4016966466      L1-dcache-loads:u                                           
        1448685449      armv8_pmuv3_0/l2d_cache/:u                                   
         429032276      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.480542425 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3058758144
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042308608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006759.005183,       0.0,      253985,     228502,      25483,     148608,      79894,   0.471409,   0.660100,   0.730100,   0.903100,   0.140342,   0.000000,   2.297000, 464.795927
Outstanding requests per worker:
7 13 8 7 11 9 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571389,      63557,     424355,     147034,   0.628361,   0.924100,   1.300000,   1.800000,   0.291159,   0.048000,   2.551000, 565.852050
Outstanding requests per worker:
11 10 9 7 6 37 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.7,      634959,     571791,      63168,     449097,     122694,   0.914684,   2.000000,   2.200000,   3.200000,   0.651111,   0.213000,   5.270000, 613.529382
Outstanding requests per worker:
10 30 12 10 9 35 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.7,      634994,     571439,      63555,     462394,     109045,   0.974964,   2.200000,   2.500000,   2.900000,   0.679522,   0.090000,   3.829000, 639.476348
Outstanding requests per worker:
9 41 14 12 12 25 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571452,      63495,     472242,      99210,   1.152802,   2.800000,   3.000000,   3.400000,   0.867187,   0.230000,   3.860000, 657.934005
Outstanding requests per worker:
10 40 8 10 12 45 14 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     570848,      64098,     478125,      92723,   1.261362,   3.100000,   3.400000,   4.100000,   1.008026,   0.092000,   5.585000, 670.321129
Outstanding requests per worker:
17 51 11 12 10 41 13 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571272,      63699,     484380,      86892,   1.307361,   3.000000,   3.200000,   3.500000,   0.953630,   0.180000,   5.026000, 681.886501
Outstanding requests per worker:
14 50 17 17 24 41 10 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:12   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 116224 pts/0   Sl+  19:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312407700      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4112667004      L1-dcache-loads:u                                           
        1451285964      armv8_pmuv3_0/l2d_cache/:u                                   
         436894864      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920221556 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2166354432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006808.005232,       0.0,      254017,     228609,      25408,     148531,      80078,   0.472850,   0.677000,   0.781100,   0.965100,   0.157663,   0.000000,   2.335000, 464.329523
Outstanding requests per worker:
8 8 9 4 15 11 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.9,      634935,     571077,      63858,     424131,     146946,   0.665542,   1.400000,   1.700000,   2.100000,   0.405237,   0.058000,   3.393000, 565.841485
Outstanding requests per worker:
32 5 13 8 22 9 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.7,      634984,     571545,      63439,     449597,     121948,   0.935159,   2.200000,   2.600000,   3.100000,   0.724594,   0.213000,   3.835000, 614.255096
Outstanding requests per worker:
32 13 7 8 29 13 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.9,      634935,     571775,      63160,     462608,     109167,   1.056245,   2.700000,   3.000000,   3.400000,   0.841345,   0.173000,   4.564000, 639.318293
Outstanding requests per worker:
43 9 9 12 32 11 15 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.9,      634920,     571718,      63202,     472170,      99548,   1.225350,   3.100000,   3.400000,   4.100000,   1.063724,   0.219000,   5.949000, 658.124470
Outstanding requests per worker:
51 12 13 10 54 9 12 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571145,      63812,     478591,      92554,   1.392221,   3.600000,   4.000000,   4.600000,   1.232331,   0.183000,   5.631000, 670.948433
Outstanding requests per worker:
71 10 12 11 67 13 16 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.7,      634924,     571309,      63615,     484083,      87226,   1.633710,   4.200000,   4.700000,   6.100000,   1.511395,   0.172000,   7.649000, 680.575596
Outstanding requests per worker:
71 14 22 12 72 11 29 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:13   0:00 /usr/lib/linux
memcache      7  277  0.0 426688 119552 pts/0   Sl+  19:13   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312453803      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4112197377      L1-dcache-loads:u                                           
        1451444093      armv8_pmuv3_0/l2d_cache/:u                                   
         447793492      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.549961564 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3136614912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3120165376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103715840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006857.005281,       0.0,      253991,     228252,      25739,     149106,      79146,   0.500354,   0.674100,   0.733100,   0.857100,   0.134687,   0.000000,   2.154000, 467.640709
Outstanding requests per worker:
7 10 12 7 6 7 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571523,      63398,     424515,     147008,   0.612750,   0.845100,   0.966100,   1.600000,   0.217530,   0.070000,   2.493000, 565.569974
Outstanding requests per worker:
8 6 11 20 12 9 12 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.5,      634908,     571854,      63054,     449195,     122659,   0.763787,   1.400000,   1.700000,   2.000000,   0.372336,   0.182000,   3.242000, 613.218507
Outstanding requests per worker:
16 11 15 24 25 8 10 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.7,      634954,     571747,      63207,     462165,     109582,   1.018123,   1.900000,   2.100000,   2.500000,   0.539484,   0.214000,   3.615000, 639.177776
Outstanding requests per worker:
12 8 12 32 22 13 18 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571725,      63196,     471785,      99940,   1.297428,   2.300000,   2.700000,   3.200000,   0.718060,   0.213000,   4.125000, 656.481649
Outstanding requests per worker:
25 9 15 28 32 14 11 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571359,      63580,     478508,      92851,   1.450261,   2.500000,   2.800000,   3.200000,   0.744610,   0.224000,   3.809000, 670.091804
Outstanding requests per worker:
35 9 17 27 34 13 10 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.3,      634912,     571875,      63037,     484722,      87153,   1.662612,   2.900000,   3.200000,   3.700000,   0.874424,   0.173000,   5.066000, 681.395287
Outstanding requests per worker:
45 12 9 38 36 14 32 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:14   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121728 pts/0   Sl+  19:14   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313474440      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4133869208      L1-dcache-loads:u                                           
        1463622637      armv8_pmuv3_0/l2d_cache/:u                                   
         447589955      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160269573 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2295198208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2278748672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2262299136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245849600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229400064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006906.005330,       0.0,      258034,     232326,      25708,     151382,      80944,   0.779494,   1.800000,   2.100000,   2.700000,   0.547582,   0.000000,   3.440000, 466.121850
Outstanding requests per worker:
34 8 10 10 30 10 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.1,      645161,     580532,      64629,     431395,     149137,   1.192067,   2.900000,   3.300000,   4.100000,   0.989825,   0.079000,   5.731000, 566.169476
Outstanding requests per worker:
55 15 10 7 42 9 8 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.3,      645152,     580834,      64318,     456886,     123948,   1.646731,   4.000000,   4.400000,   5.400000,   1.362762,   0.114000,   7.478000, 613.978980
Outstanding requests per worker:
62 21 6 14 60 25 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128999.3,      644997,     580725,      64272,     470470,     110255,   2.504607,   6.100000,   7.600000,   9.600000,   2.296039,   0.069000,  11.995000, 639.961756
Outstanding requests per worker:
153 23 37 15 143 29 29 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128946.5,      644733,     580779,      63954,     479921,     100858,   5.227849,  14.400000,  25.100000,  32.900000,   7.576487,   0.172000,  35.629001, 658.250464
Outstanding requests per worker:
563 30 28 29 189 47 20 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128829.3,      644147,     579680,      64467,     485244,      94436,  10.812544,  39.400000,  57.500000,  68.000000,  17.766581,   0.722000,  74.491002, 670.449460
Outstanding requests per worker:
1196 40 23 27 602 46 32 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128736.1,      643681,     579277,      64404,     491362,      87915,  20.950760,  81.000000, 100.100000, 124.000000,  34.645093,   0.727000, 130.578995, 682.188768
Outstanding requests per worker:
2076 55 34 32 1197 48 35 38 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:15   0:00 /usr/lib/linux
memcache      7  290  0.0 427712 122496 pts/0   Sl+  19:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318210053      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4229035776      L1-dcache-loads:u                                           
        1493579100      armv8_pmuv3_0/l2d_cache/:u                                   
         467558533      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.720146371 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2805068288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2788618752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772169216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576006955.005379,       0.0,      258073,     232370,      25703,     151254,      81116,   0.668908,   1.100000,   1.600000,   2.000000,   0.350122,   0.000000,   2.451000, 465.472686
Outstanding requests per worker:
23 11 12 9 26 10 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.1,      645156,     580717,      64439,     431629,     149088,   1.063330,   2.300000,   2.800000,   3.300000,   0.733836,   0.082000,   5.045000, 565.989906
Outstanding requests per worker:
45 10 11 22 32 6 8 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.9,      645150,     580717,      64433,     457740,     122977,   1.459352,   3.200000,   3.600000,   4.300000,   1.026967,   0.076000,   5.062000, 615.188248
Outstanding requests per worker:
53 9 10 25 62 16 16 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.5,      645208,     580388,      64820,     470458,     109930,   1.904174,   3.800000,   4.100000,   4.600000,   1.139322,   0.170000,   5.501000, 640.954224
Outstanding requests per worker:
54 9 13 26 66 25 11 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129014.1,      645071,     580331,      64740,     479821,     100510,   2.397971,   4.400000,   4.800000,   5.400000,   1.182248,   0.234000,   6.795000, 658.517274
Outstanding requests per worker:
99 28 36 45 78 33 32 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.1,      645176,     580874,      64302,     487690,      93184,   2.946318,   5.700000,   7.000000,   8.600000,   1.747276,   0.338000,  11.190000, 672.370041
Outstanding requests per worker:
114 42 30 36 112 26 32 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580620,      64559,     492342,      88278,   3.603208,   7.200000,   9.100000,  11.500000,   2.413660,   0.767000,  13.242000, 681.401548
Outstanding requests per worker:
99 42 31 44 104 36 54 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:16   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 120064 pts/0   Sl+  19:16   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322102147      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4234185680      L1-dcache-loads:u                                           
        1501716523      armv8_pmuv3_0/l2d_cache/:u                                   
         464553964      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810393134 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2414670336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2398220800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381771264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365321728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007004.005428,       0.0,      257996,     232362,      25634,     151015,      81347,   1.004258,   2.600000,   2.900000,   3.300000,   0.828108,   0.000000,   4.126000, 464.357158
Outstanding requests per worker:
47 12 12 15 49 8 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.9,      645095,     580447,      64648,     430750,     149697,   1.579015,   3.900000,   4.400000,   5.100000,   1.323965,   0.051000,   6.540000, 565.403310
Outstanding requests per worker:
65 24 12 26 68 33 17 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129014.9,      645075,     580624,      64451,     456738,     123886,   2.490995,   6.000000,   6.600000,   8.400000,   2.148520,   0.197000,  11.127000, 614.509807
Outstanding requests per worker:
161 33 9 54 100 23 14 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128846.9,      644235,     579714,      64521,     469901,     109813,   6.640002,  24.400000,  31.400000,  39.300000,   9.745598,   0.160000,  41.701999, 640.551831
Outstanding requests per worker:
660 23 30 59 570 34 19 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128715.3,      643577,     579196,      64381,     478998,     100198,  17.471625,  68.800000,  78.700000,  86.000000,  27.545331,   0.282000,  93.406998, 658.271005
Outstanding requests per worker:
1345 53 17 58 1468 25 27 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128721.9,      643610,     579141,      64469,     486160,      92981,  30.169795, 120.400000, 126.200000, 136.200000,  48.639227,   0.661000, 141.812995, 672.534255
Outstanding requests per worker:
2118 24 30 48 2277 39 39 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128774.3,      643872,     579630,      64242,     492035,      87595,  40.969884, 159.600000, 169.700000, 177.900000,  66.645321,   0.419000, 180.013999, 682.542798
Outstanding requests per worker:
2844 63 28 44 2868 32 32 62 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:16   0:00 /usr/lib/linux
memcache      8  284  0.0 427712 119232 pts/0   Sl+  19:16   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318333986      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4239023075      L1-dcache-loads:u                                           
        1490192181      armv8_pmuv3_0/l2d_cache/:u                                   
         483189789      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150650384 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3063017984
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046568448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3030118912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007052.005476,       0.0,      257422,     231640,      25782,     150336,      81304,   3.699986,   1.200000,  32.600000,  43.800000,   9.998104,   0.000000,  48.029002, 463.491176
Outstanding requests per worker:
7 11 6 357 7 6 11 346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128881.9,      644410,     579556,      64854,     430491,     149065,   7.813572,  35.900000,  45.800000,  59.700000,  15.186178,   0.077000,  66.180997, 565.887072
Outstanding requests per worker:
10 8 7 870 4 13 10 638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128638.1,      643191,     579235,      63956,     456036,     123199,  19.769207,  84.000000, 104.500000, 120.600000,  35.559698,   0.100000, 129.236996, 614.730940
Outstanding requests per worker:
16 34 29 1772 28 37 33 1663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128605.3,      643027,     578806,      64221,     469410,     109396,  36.711262, 153.600000, 173.900000, 191.700000,  63.788183,   0.154000, 199.309006, 640.991389
Outstanding requests per worker:
13 26 9 2897 20 35 14 2778 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128686.5,      643433,     579477,      63956,     479656,      99821,  53.859195, 220.700000, 233.900000, 250.500000,  92.033040,   0.208000, 256.401002, 658.977507
Outstanding requests per worker:
30 29 11 3765 35 28 21 3650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128693.5,      643468,     579154,      64314,     486413,      92741,  67.672651, 276.300000, 290.100000, 310.800000, 115.742256,   0.173000, 317.407012, 672.348914
Outstanding requests per worker:
12 36 13 4731 20 25 14 4476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128731.7,      643659,     579421,      64238,     491733,      87688,  81.329831, 328.800000, 342.300000, 357.200000, 138.891096,   0.196000, 369.264990, 682.132841
Outstanding requests per worker:
32 27 14 5483 56 22 22 5257 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:17   0:00 /usr/lib/linux
memcache      8  290  0.0 427712 113920 pts/0   Sl+  19:17   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314049235      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4198902711      L1-dcache-loads:u                                           
        1478352112      armv8_pmuv3_0/l2d_cache/:u                                   
         459785617      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.801708311 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2184704512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168254976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007101.005525,       0.0,      257343,     231516,      25827,     151216,      80300,   4.609278,  26.300000,  38.500000,  46.700000,  11.612369,   0.000000,  50.062001, 467.394685
Outstanding requests per worker:
10 12 12 386 7 6 7 402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128873.7,      644369,     579783,      64586,     431171,     148612,   9.453036,  42.400000,  51.200000,  62.400000,  17.231619,   0.203000,  72.082996, 566.986857
Outstanding requests per worker:
31 30 10 793 24 22 12 771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128644.7,      643224,     578815,      64409,     456397,     122418,  21.251145,  90.200000, 104.100000, 124.400000,  37.147809,   0.181000, 132.469997, 616.894873
Outstanding requests per worker:
30 25 17 1953 39 32 12 1554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128621.9,      643110,     579097,      64013,     469840,     109257,  37.669395, 153.700000, 169.600000, 189.800000,  64.065687,   0.172000, 197.684005, 642.154537
Outstanding requests per worker:
28 36 32 2647 34 44 29 2896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128729.1,      643646,     579566,      64080,     479240,     100326,  52.202704, 209.700000, 223.900000, 240.300000,  88.050794,   0.215000, 248.708993, 659.486193
Outstanding requests per worker:
50 48 31 3293 43 36 20 3798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128638.1,      643191,     578623,      64568,     485645,      92978,  67.750050, 273.600000, 290.200000, 313.100000, 114.771799,   0.736000, 323.006988, 672.537613
Outstanding requests per worker:
42 48 25 4261 34 43 32 4879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128714.1,      643571,     579346,      64225,     492066,      87280,  82.926686, 332.500000, 354.900000, 378.900000, 140.482044,   0.773000, 389.445990, 683.032977
Outstanding requests per worker:
43 59 28 4964 40 46 32 5782 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:18   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 121408 pts/0   Sl+  19:18   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314928106      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4234588991      L1-dcache-loads:u                                           
        1490345134      armv8_pmuv3_0/l2d_cache/:u                                   
         460291334      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380799528 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2629825024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2613375488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596925952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580476416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2564026880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007150.005574,       0.0,      261574,     235414,      26160,     153218,      82196,   6.835169,  34.900000,  42.000000,  48.600000,  13.765651,   0.000000,  50.760999, 465.618910
Outstanding requests per worker:
17 10 514 15 9 9 245 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130479.9,      652400,     587329,      65071,     435749,     151580,  22.357269,  92.900000, 123.100000, 132.500000,  39.862456,   0.086000, 138.374001, 565.185067
Outstanding requests per worker:
45 35 2014 30 35 40 1999 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130641.1,      653206,     588179,      65027,     463024,     125155,  45.935813, 185.100000, 203.600000, 215.200000,  77.415637,   0.354000, 222.007006, 614.457119
Outstanding requests per worker:
42 38 3279 35 35 37 3301 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130596.5,      652983,     587500,      65483,     476463,     111037,  63.389074, 255.800000, 263.700000, 279.600000, 106.580282,   0.723000, 289.258987, 640.807123
Outstanding requests per worker:
64 38 4698 33 61 42 4640 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130635.3,      653177,     587797,      65380,     486067,     101730,  79.372989, 320.100000, 329.300000, 350.200000, 133.701833,   0.784000, 367.013007, 659.009617
Outstanding requests per worker:
52 71 5941 42 46 54 6004 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130763.1,      653816,     588442,      65374,     493963,      94479,  95.201724, 380.300000, 389.700000, 407.400000, 160.204190,   0.837000, 431.194007, 672.686195
Outstanding requests per worker:
80 50 6906 42 82 54 7001 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130705.1,      653526,     588175,      65351,     499164,      89011, 111.635850, 443.200000, 459.800000, 488.100000, 187.672383,   0.897000, 495.829999, 682.693494
Outstanding requests per worker:
71 78 8099 63 73 82 7988 56 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:19   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 119616 pts/0   Sl+  19:19   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318777882      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        4310014586      L1-dcache-loads:u                                           
        1516444801      armv8_pmuv3_0/l2d_cache/:u                                   
         465905914      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010289813 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2275275264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2258825728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2242376192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225926656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007198.005622,       0.0,      261409,     235267,      26142,     153987,      81280,   7.221848,  37.400000,  44.000000,  49.000000,  14.626205,   0.000000,  51.943000, 468.184658
Outstanding requests per worker:
379 15 8 15 551 8 16 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130476.1,      652381,     587065,      65316,     435880,     151185,  24.506682, 105.100000, 129.700000, 142.500000,  43.671408,   0.083000, 149.620995, 565.522995
Outstanding requests per worker:
2008 41 28 29 2213 24 34 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130609.3,      653047,     587815,      65232,     463583,     124232,  48.593323, 198.900000, 215.400000, 227.700000,  82.385074,   0.280000, 239.454001, 615.942448
Outstanding requests per worker:
3480 45 36 28 3427 45 31 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130511.9,      652560,     587428,      65132,     476799,     110629,  67.513309, 272.100000, 290.600000, 301.200000, 114.513508,   0.744000, 311.177999, 641.705237
Outstanding requests per worker:
5050 45 35 25 5104 53 42 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130521.3,      652607,     587703,      64904,     485552,     102151,  86.834872, 351.500000, 367.200000, 380.500000, 147.630962,   0.826000, 412.560999, 657.848367
Outstanding requests per worker:
6566 47 44 66 6728 57 54 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130590.5,      652953,     587405,      65548,     492574,      94831, 107.833766, 436.700000, 450.300000, 474.500000, 183.538084,   0.782000, 505.412996, 671.926308
Outstanding requests per worker:
7841 51 56 45 8267 60 58 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130691.5,      653458,     587920,      65538,     499221,      88699, 128.151767, 514.500000, 528.900000, 554.700000, 217.922066,   1.187000, 573.081017, 683.138742
Outstanding requests per worker:
9049 79 60 40 9346 70 60 50 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:20   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 119936 pts/0   Sl+  19:20   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317784339      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        4309059750      L1-dcache-loads:u                                           
        1522243587      armv8_pmuv3_0/l2d_cache/:u                                   
         485475934      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.984352465 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2419257856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2402808320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2386358784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2369909248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007247.005671,       0.0,      241936,     217542,      24394,     140955,      76587,   1.717670,   0.435100,  12.200000,  34.600000,   5.984701,   0.000000,  41.212000, 461.612144
Outstanding requests per worker:
4 276 5 5 5 267 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121070.9,      605355,     544910,      60445,     401826,     143084,   2.677754,   4.100000,  24.600000,  39.400000,   7.895586,   0.063000,  44.711001, 560.323011
Outstanding requests per worker:
4 654 5 4 6 637 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121239.9,      606200,     545851,      60349,     427719,     118132,   2.902563,   5.400000,  26.100000,  40.900000,   8.465215,   0.102000,  45.502000, 610.697245
Outstanding requests per worker:
5 600 5 7 6 599 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121253.3,      606267,     545555,      60712,     439966,     105589,   3.217299,   9.200000,  28.900000,  41.900000,   8.983169,   0.047000,  46.227999, 635.558618
Outstanding requests per worker:
5 540 6 5 8 493 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121259.5,      606298,     546155,      60143,     449318,      96837,   2.996987,   8.000000,  27.100000,  38.900000,   8.317817,   0.113000,  44.183001, 654.856279
Outstanding requests per worker:
7 418 6 4 7 406 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121241.3,      606207,     545703,      60504,     456079,      89624,   3.355570,  12.000000,  28.500000,  40.600000,   8.951403,   0.125000,  46.041001, 668.167817
Outstanding requests per worker:
5 364 8 6 3 345 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121245.1,      606226,     545780,      60446,     461251,      84529,   3.530516,  14.100000,  29.800000,  41.800000,   9.223603,   0.089000,  46.257999, 679.089459
Outstanding requests per worker:
6 289 8 4 7 288 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:20   0:00 /usr/lib/linux
memcache      8  284  0.0 422592 113344 pts/0   Sl+  19:20   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312675312      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3900820448      L1-dcache-loads:u                                           
        1445510359      armv8_pmuv3_0/l2d_cache/:u                                   
         450086564      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011235223 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2881155584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864706048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848256512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831806976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007295.005719,       0.0,      242476,     218175,      24301,     141576,      76599,   1.725919,   0.442100,  12.500000,  34.500000,   6.012400,   0.000000,  40.289000, 462.137857
Outstanding requests per worker:
5 5 4 5 8 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121045.1,      605226,     544625,      60601,     401564,     143061,   2.525496,   3.100000,  22.500000,  38.100000,   7.561034,   0.059000,  43.917000, 560.559317
Outstanding requests per worker:
455 2 4 5 445 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121147.7,      605739,     545020,      60719,     426301,     118719,   3.076464,   8.700000,  27.700000,  40.600000,   8.642940,   0.049000,  45.313001, 609.509165
Outstanding requests per worker:
639 3 3 5 619 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121248.5,      606243,     545768,      60475,     440571,     105197,   3.461673,  12.500000,  30.300000,  41.900000,   9.324615,   0.055000,  45.761999, 636.586731
Outstanding requests per worker:
587 6 5 4 519 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121239.9,      606200,     546118,      60082,     448963,      97155,   3.844391,  17.100000,  31.800000,  42.500000,   9.803538,   0.115000,  46.689998, 653.909816
Outstanding requests per worker:
452 7 5 6 544 7 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121233.9,      606170,     545765,      60405,     455901,      89864,   4.009602,  17.900000,  32.700000,  43.800000,  10.107805,   0.120000,  48.165999, 667.411269
Outstanding requests per worker:
467 5 4 6 468 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121238.3,      606192,     545493,      60699,     460568,      84925,   4.013524,  18.100000,  32.100000,  43.000000,  10.026876,   0.092000,  49.095001, 678.125265
Outstanding requests per worker:
397 5 5 6 435 5 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:21   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 118272 pts/0   Sl+  19:21   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319796220      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3897066446      L1-dcache-loads:u                                           
        1448899824      armv8_pmuv3_0/l2d_cache/:u                                   
         442643093      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821472414 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2324230656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307781120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291331584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007344.005768,       0.0,      242476,     218234,      24242,     141730,      76504,   1.740300,   0.458100,  12.900000,  33.800000,   5.957836,   0.000000,  41.333001, 463.491440
Outstanding requests per worker:
5 5 5 5 7 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.7,      606089,     545477,      60612,     402790,     142687,   2.462079,   2.100000,  22.100000,  37.900000,   7.410681,   0.056000,  42.998001, 561.403716
Outstanding requests per worker:
22 2 7 6 13 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121051.7,      605259,     544909,      60350,     426793,     118116,   2.819706,   6.300000,  24.700000,  39.700000,   8.092852,   0.053000,  45.372002, 610.550466
Outstanding requests per worker:
448 5 4 6 459 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121159.3,      605797,     545130,      60667,     440051,     105079,   3.296195,  10.700000,  28.900000,  41.800000,   9.016415,   0.094000,  44.776998, 636.979150
Outstanding requests per worker:
637 5 6 5 619 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121240.5,      606203,     545796,      60407,     449579,      96217,   3.509254,  13.000000,  29.900000,  41.700000,   9.302009,   0.108000,  45.642000, 655.720068
Outstanding requests per worker:
559 5 7 6 593 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121236.5,      606183,     546089,      60094,     456401,      89688,   3.724599,  15.600000,  31.600000,  42.000000,   9.572654,   0.103000,  45.965001, 668.320585
Outstanding requests per worker:
539 5 39 7 481 5 36 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121250.1,      606251,     545498,      60753,     461132,      84366,   4.073611,  18.100000,  33.000000,  43.300000,  10.079334,   0.096000,  47.313001, 678.149968
Outstanding requests per worker:
468 4 5 6 499 6 3 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:22   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113024 pts/0   Sl+  19:22   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313789647      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3895915689      L1-dcache-loads:u                                           
        1444341643      armv8_pmuv3_0/l2d_cache/:u                                   
         455101960      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.005000818 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2781803008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765353472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007392.005816,       0.0,      246225,     221848,      24377,     144211,      77637,   1.905690,   0.479100,  15.200000,  36.600000,   6.468948,   0.000000,  43.574002, 463.718965
Outstanding requests per worker:
3 5 4 4 6 4 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554019,      61412,     409560,     144459,   1.101093,   0.476100,   0.545100,  32.000000,   4.656424,   0.088000,  44.029001, 561.288979
Outstanding requests per worker:
6 7 3 5 6 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     554214,      61237,     434010,     120204,   0.357059,   0.481100,   0.509100,   0.612100,   0.097732,   0.061000,   2.116000, 610.215837
Outstanding requests per worker:
6 6 5 6 8 9 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553737,      61685,     446928,     106809,   0.370649,   0.491100,   0.546100,   0.631000,   0.103059,   0.055000,   2.261000, 636.776975
Outstanding requests per worker:
6 7 6 5 6 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     554096,      61322,     456651,      97445,   0.389354,   0.527100,   0.569100,   0.679100,   0.111160,   0.151000,   2.453000, 656.248296
Outstanding requests per worker:
8 6 5 7 8 8 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.3,      615417,     553872,      61545,     463179,      90693,   0.403618,   0.547000,   0.607100,   0.702100,   0.122926,   0.097000,   2.635000, 668.979212
Outstanding requests per worker:
12 4 4 7 10 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.5,      615458,     553454,      62004,     467814,      85640,   0.407208,   0.550100,   0.610100,   0.687100,   0.106491,   0.049000,   2.060000, 679.065339
Outstanding requests per worker:
6 8 6 7 9 4 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:23   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114624 pts/0   Sl+  19:23   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316464130      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        3952296179      L1-dcache-loads:u                                           
        1454927928      armv8_pmuv3_0/l2d_cache/:u                                   
         441294736      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061191587 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2193617408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2177167872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2160718336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007441.005865,       0.0,      246226,     221368,      24858,     143680,      77688,   0.312187,   0.431100,   0.490100,   0.613100,   0.096695,   0.000000,   2.198000, 463.085333
Outstanding requests per worker:
5 5 5 3 9 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553697,      61739,     410002,     143695,   0.355687,   0.514100,   0.610100,   0.748100,   0.125710,   0.090000,   2.137000, 563.713918
Outstanding requests per worker:
7 2 4 5 10 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     554294,      61120,     434456,     119838,   0.380264,   0.564100,   0.671100,   0.824100,   0.158804,   0.121000,   3.351000, 610.511680
Outstanding requests per worker:
11 7 4 4 12 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553837,      61579,     447129,     106708,   0.403163,   0.612100,   0.698100,   0.883100,   0.155956,   0.088000,   2.387000, 637.322187
Outstanding requests per worker:
14 9 6 7 16 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554191,      61268,     456724,      97467,   0.426311,   0.673100,   0.759100,   0.946100,   0.171411,   0.123000,   2.564000, 656.075124
Outstanding requests per worker:
12 7 5 5 9 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.7,      615454,     553763,      61691,     463418,      90345,   0.433533,   0.678100,   0.774100,   0.957100,   0.166645,   0.059000,   2.148000, 669.539926
Outstanding requests per worker:
8 5 6 8 12 9 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     554029,      61386,     468999,      85030,   0.453596,   0.692000,   0.810100,   1.200000,   0.203036,   0.121000,   3.300000, 680.259051
Outstanding requests per worker:
9 6 6 6 11 7 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:24   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 115008 pts/0   Sl+  19:24   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  19:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314086952      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3954069859      L1-dcache-loads:u                                           
        1447282272      armv8_pmuv3_0/l2d_cache/:u                                   
         435263540      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971760698 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3071996416
starting receive base loop
num_worker_connections 1
Creating worker on tid 3055546880
starting receive base loop
num_worker_connections 1
Creating worker on tid 3039097344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007489.005913,       0.0,      246159,     221350,      24809,     144050,      77300,   0.349503,   0.440100,   0.495100,   0.984100,   0.343571,   0.000000,   7.275000, 465.552604
Outstanding requests per worker:
5 7 4 5 5 8 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553923,      61527,     410486,     143437,   0.360046,   0.497100,   0.561100,   0.682100,   0.109415,   0.059000,   2.503000, 563.579647
Outstanding requests per worker:
5 5 6 4 4 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     553977,      61430,     434581,     119396,   0.392458,   0.550100,   0.618100,   0.773100,   0.137314,   0.062000,   2.503000, 611.424384
Outstanding requests per worker:
7 26 4 6 5 31 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.1,      615461,     553699,      61762,     447263,     106436,   0.416562,   0.578100,   0.674100,   0.870100,   0.156984,   0.051000,   2.647000, 637.662154
Outstanding requests per worker:
5 7 5 8 8 12 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553975,      61462,     457157,      96818,   0.428255,   0.613100,   0.687100,   0.829100,   0.133194,   0.154000,   1.265000, 656.305326
Outstanding requests per worker:
6 9 6 5 10 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554086,      61354,     463510,      90576,   0.458120,   0.673100,   0.754100,   0.946100,   0.175833,   0.157000,   3.536000, 669.342328
Outstanding requests per worker:
8 9 7 6 8 10 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.9,      615465,     553810,      61655,     468429,      85381,   0.475212,   0.683100,   0.797100,   1.100000,   0.216874,   0.054000,   4.443000, 679.396190
Outstanding requests per worker:
5 8 5 9 6 11 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:24   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 118976 pts/0   Sl+  19:24   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316507015      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        3959577942      L1-dcache-loads:u                                           
        1439626396      armv8_pmuv3_0/l2d_cache/:u                                   
         443759679      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900700448 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2995057152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978607616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962158080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007538.005962,       0.0,      246220,     221708,      24512,     144060,      77648,   0.348871,   0.484100,   0.546100,   0.643100,   0.100885,   0.000000,   1.955000, 463.090903
Outstanding requests per worker:
6 5 4 9 9 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553954,      61457,     410127,     143827,   0.407830,   0.572100,   0.654000,   0.811100,   0.134964,   0.056000,   2.335000, 563.773561
Outstanding requests per worker:
8 5 10 6 6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553957,      61473,     434500,     119457,   0.453444,   0.669000,   0.750100,   0.992100,   0.169256,   0.061000,   2.370000, 612.117164
Outstanding requests per worker:
11 8 5 7 12 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.9,      615405,     553447,      61958,     447328,     106119,   0.472220,   0.685100,   0.793100,   0.965100,   0.164808,   0.079000,   2.371000, 637.991470
Outstanding requests per worker:
11 8 8 8 10 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554054,      61391,     456676,      97378,   0.502932,   0.743100,   0.870100,   1.400000,   0.205985,   0.158000,   2.658000, 655.845338
Outstanding requests per worker:
9 8 8 5 13 7 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554049,      61410,     462969,      91080,   0.526643,   0.803100,   0.937100,   1.400000,   0.220388,   0.157000,   2.398000, 668.919058
Outstanding requests per worker:
11 6 7 9 9 7 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553720,      61690,     467964,      85756,   0.577264,   0.905100,   1.300000,   1.900000,   0.305560,   0.093000,   2.960000, 678.523936
Outstanding requests per worker:
13 9 8 7 14 10 7 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:25   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115264 pts/0   Sl+  19:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         308314799      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        3957865437      L1-dcache-loads:u                                           
        1427606215      armv8_pmuv3_0/l2d_cache/:u                                   
         448967459      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030540678 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2993877504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977427968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877288960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860839424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844389888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827940352
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007586.006010,       0.0,      250044,     224988,      25056,     146287,      78701,   1.733955,   0.732100,  12.600000,  30.300000,   5.245040,   0.000000,  37.753999, 463.765036
Outstanding requests per worker:
4 10 4 6 8 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562854,      62188,     416104,     146750,   0.414168,   0.601100,   0.670100,   0.819100,   0.136775,   0.056000,   2.112000, 562.300952
Outstanding requests per worker:
7 6 6 5 5 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562939,      62102,     441626,     121313,   0.459871,   0.668100,   0.784000,   1.400000,   0.195779,   0.058000,   2.336000, 611.877642
Outstanding requests per worker:
8 5 9 6 9 10 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562592,      62450,     454868,     107724,   0.486837,   0.729100,   0.824100,   1.200000,   0.200396,   0.083000,   2.587000, 638.271696
Outstanding requests per worker:
4 11 5 6 6 10 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562569,      62459,     463871,      98698,   0.517604,   0.798100,   0.937100,   1.500000,   0.235137,   0.124000,   2.459000, 656.029580
Outstanding requests per worker:
7 21 5 6 6 14 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562568,      62463,     471074,      91494,   0.617128,   1.200000,   1.600000,   2.000000,   0.387755,   0.153000,   3.992000, 670.225139
Outstanding requests per worker:
8 27 8 7 9 13 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562376,      62656,     475873,      86503,   0.630578,   1.200000,   1.700000,   2.100000,   0.386672,   0.154000,   3.158000, 680.496337
Outstanding requests per worker:
8 34 8 4 10 24 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:26   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 111296 pts/0   Sl+  19:26   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311962186      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4024192192      L1-dcache-loads:u                                           
        1455511548      armv8_pmuv3_0/l2d_cache/:u                                   
         434195120      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.670633363 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2265510400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2249060864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232611328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007634.006058,       0.0,      250036,     225278,      24758,     146945,      78333,   0.422168,   0.604100,   0.675100,   0.836100,   0.135698,   0.000000,   2.084000, 465.853297
Outstanding requests per worker:
5 5 9 13 6 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     561951,      63080,     415830,     146121,   0.484373,   0.688100,   0.792100,   0.977100,   0.157033,   0.046000,   2.315000, 562.450497
Outstanding requests per worker:
8 7 5 11 8 8 7 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.3,      625017,     563075,      61942,     441238,     121837,   0.594550,   0.911100,   1.300000,   1.800000,   0.292350,   0.052000,   2.810000, 610.927084
Outstanding requests per worker:
9 11 9 24 10 8 7 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125017.3,      625087,     562222,      62865,     455101,     107121,   0.790927,   1.800000,   2.000000,   2.300000,   0.532370,   0.050000,   3.484000, 639.638604
Outstanding requests per worker:
10 6 8 14 7 11 8 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.1,      625006,     562766,      62240,     464070,      98696,   0.918776,   2.200000,   2.500000,   3.000000,   0.705295,   0.174000,   3.824000, 655.966965
Outstanding requests per worker:
7 8 9 32 9 4 7 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562705,      62315,     470882,      91823,   1.014809,   2.600000,   3.000000,   3.400000,   0.838182,   0.182000,   4.145000, 669.350482
Outstanding requests per worker:
5 7 11 37 9 9 8 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562605,      62422,     475730,      86875,   1.044933,   2.700000,   3.000000,   3.400000,   0.860403,   0.187000,   4.530000, 680.051507
Outstanding requests per worker:
10 9 11 43 12 11 5 39 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:27   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 113792 pts/0   Sl+  19:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314641579      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        4036054794      L1-dcache-loads:u                                           
        1445068368      armv8_pmuv3_0/l2d_cache/:u                                   
         434999617      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939194931 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2492461568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2476012032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459562496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443112960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426663424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007683.006107,       0.0,      250045,     225092,      24953,     146184,      78908,   0.377291,   0.537100,   0.601100,   0.730100,   0.114391,   0.000000,   2.469000, 463.626264
Outstanding requests per worker:
5 8 6 6 6 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562751,      62289,     417204,     145547,   0.429635,   0.608000,   0.682100,   0.856100,   0.137953,   0.060000,   2.946000, 564.396787
Outstanding requests per worker:
7 6 6 6 5 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.9,      625045,     562627,      62418,     441771,     120856,   0.463185,   0.674100,   0.787100,   0.949100,   0.157919,   0.163000,   2.274000, 612.590990
Outstanding requests per worker:
7 8 8 5 5 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     563088,      61972,     455556,     107532,   0.513757,   0.750100,   0.873100,   1.400000,   0.203865,   0.045000,   2.393000, 638.490884
Outstanding requests per worker:
8 11 8 7 5 12 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124988.1,      624941,     562655,      62286,     464436,      98219,   0.552988,   0.846100,   1.100000,   1.600000,   0.248756,   0.167000,   2.715000, 656.389306
Outstanding requests per worker:
24 30 8 14 31 25 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125024.1,      625121,     562966,      62155,     471024,      91942,   0.616312,   1.100000,   1.500000,   1.900000,   0.338011,   0.060000,   2.608000, 668.967675
Outstanding requests per worker:
8 12 11 9 8 15 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562754,      62268,     476288,      86466,   0.741134,   1.700000,   1.900000,   2.300000,   0.503532,   0.171000,   3.415000, 679.786411
Outstanding requests per worker:
7 15 8 8 7 22 10 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:28   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 115328 pts/0   Sl+  19:28   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315291430      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        4024491287      L1-dcache-loads:u                                           
        1453245712      armv8_pmuv3_0/l2d_cache/:u                                   
         433665585      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990441288 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2793337344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2776887808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2760438272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007731.006155,       0.0,      250043,     225263,      24780,     146390,      78873,   0.380715,   0.539000,   0.604100,   0.732100,   0.116866,   0.000000,   2.140000, 463.306895
Outstanding requests per worker:
7 6 12 7 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562325,      62719,     416921,     145404,   0.453667,   0.664100,   0.740100,   0.947100,   0.169102,   0.059000,   2.552000, 563.934716
Outstanding requests per worker:
6 5 8 7 5 7 16 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.1,      625061,     562661,      62400,     441820,     120841,   0.505202,   0.747100,   0.871100,   1.500000,   0.219778,   0.061000,   2.680000, 612.876361
Outstanding requests per worker:
5 8 7 11 6 5 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562844,      62212,     454575,     108269,   0.577963,   0.921100,   1.400000,   1.900000,   0.316310,   0.053000,   3.124000, 637.881212
Outstanding requests per worker:
9 8 12 9 7 8 26 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124985.9,      624930,     563159,      61771,     464469,      98690,   0.702785,   1.600000,   1.800000,   2.100000,   0.465016,   0.086000,   3.348000, 655.806014
Outstanding requests per worker:
12 13 38 43 14 8 39 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125028.5,      625143,     562888,      62255,     470663,      92225,   0.801873,   1.800000,   2.100000,   2.700000,   0.580480,   0.163000,   3.739000, 668.831880
Outstanding requests per worker:
3 9 27 11 7 9 28 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562592,      62466,     476167,      86425,   0.911294,   2.100000,   2.400000,   3.100000,   0.706284,   0.156000,   4.647000, 679.792681
Outstanding requests per worker:
7 7 22 9 7 8 51 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:29   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116224 pts/0   Sl+  19:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317184685      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        4028222896      L1-dcache-loads:u                                           
        1453002770      armv8_pmuv3_0/l2d_cache/:u                                   
         454975712      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000338841 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2336158208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2319708672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2303259136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007780.006204,       0.0,      254019,     228921,      25098,     148701,      80220,   0.425853,   0.590100,   0.625100,   0.738000,   0.116461,   0.000000,   2.047000, 463.573787
Outstanding requests per worker:
6 6 8 7 7 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.1,      634966,     571306,      63660,     423098,     148208,   0.504787,   0.686100,   0.779100,   0.981100,   0.157878,   0.058000,   2.339000, 563.656816
Outstanding requests per worker:
8 4 7 11 6 8 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571830,      63104,     449918,     121912,   0.567064,   0.786100,   0.875100,   1.300000,   0.189295,   0.079000,   2.317000, 614.493764
Outstanding requests per worker:
8 7 14 14 9 9 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.9,      634915,     571866,      63049,     462949,     108917,   0.663075,   0.935100,   1.400000,   2.000000,   0.319449,   0.161000,   3.491000, 639.131249
Outstanding requests per worker:
9 10 15 27 13 7 19 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127003.1,      635016,     571593,      63423,     471228,     100365,   0.746181,   1.400000,   1.700000,   2.100000,   0.376479,   0.209000,   3.305000, 656.244737
Outstanding requests per worker:
11 8 8 13 8 7 14 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571262,      63683,     478306,      92956,   0.848515,   1.700000,   1.900000,   2.300000,   0.471549,   0.175000,   3.329000, 669.925365
Outstanding requests per worker:
11 9 9 21 7 8 14 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.3,      634987,     571546,      63441,     483974,      87572,   0.952902,   1.900000,   2.100000,   2.600000,   0.566009,   0.192000,   3.455000, 680.656420
Outstanding requests per worker:
9 9 11 31 7 11 25 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:29   0:00 /usr/lib/linux
memcache      8  284  0.0 425664 115072 pts/0   Sl+  19:29   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316491230      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4096524254      L1-dcache-loads:u                                           
        1456285990      armv8_pmuv3_0/l2d_cache/:u                                   
         439622065      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990871968 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2353263104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2336813568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2320364032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2303914496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007828.006252,       0.0,      254004,     228502,      25502,     148992,      79510,   0.478075,   0.669000,   0.745100,   0.924100,   0.149161,   0.000000,   2.264000, 466.119448
Outstanding requests per worker:
10 8 6 8 14 11 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.9,      634935,     571795,      63140,     423826,     147969,   0.672303,   1.300000,   1.700000,   2.000000,   0.374053,   0.055000,   2.683000, 563.981229
Outstanding requests per worker:
31 12 6 8 23 11 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.5,      634988,     571552,      63436,     448589,     122963,   0.913549,   2.000000,   2.200000,   2.900000,   0.635126,   0.137000,   4.748000, 612.265456
Outstanding requests per worker:
23 9 9 11 32 10 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.7,      634914,     571126,      63788,     461983,     109143,   1.075892,   2.600000,   2.900000,   3.300000,   0.812840,   0.093000,   4.501000, 638.663235
Outstanding requests per worker:
33 11 9 6 43 28 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571624,      63326,     471935,      99689,   1.209571,   2.800000,   3.100000,   3.500000,   0.897525,   0.214000,   4.766000, 657.119078
Outstanding requests per worker:
46 25 10 11 36 20 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.5,      634938,     571370,      63568,     478765,      92605,   1.474734,   3.200000,   3.600000,   4.200000,   1.066320,   0.177000,   6.705000, 671.031291
Outstanding requests per worker:
47 29 9 9 38 24 10 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.1,      634966,     571664,      63302,     484634,      87030,   1.612631,   3.500000,   3.900000,   4.600000,   1.162275,   0.179000,   6.519000, 681.322508
Outstanding requests per worker:
57 30 8 8 57 19 12 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:30   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 112448 pts/0   Sl+  19:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316472731      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        4125779454      L1-dcache-loads:u                                           
        1466799366      armv8_pmuv3_0/l2d_cache/:u                                   
         461475017      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989597276 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3091919360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3075469824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3059020288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042570752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007877.006301,       0.0,      254014,     228916,      25098,     148810,      80106,   0.478792,   0.655100,   0.721100,   0.909100,   0.167840,   0.000000,   3.057000, 464.385333
Outstanding requests per worker:
9 7 13 9 5 6 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571197,      63764,     424164,     147033,   0.579492,   0.791100,   0.907100,   1.400000,   0.190716,   0.055000,   2.485000, 565.351828
Outstanding requests per worker:
11 13 14 8 6 7 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.5,      634923,     571642,      63281,     449615,     122027,   0.707687,   1.100000,   1.600000,   2.000000,   0.345447,   0.052000,   3.491000, 614.670294
Outstanding requests per worker:
14 16 29 17 9 11 15 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571319,      63641,     462861,     108458,   0.866407,   1.700000,   1.900000,   2.200000,   0.468920,   0.096000,   3.380000, 640.193403
Outstanding requests per worker:
12 8 32 10 8 13 36 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571930,      63023,     472406,      99524,   1.025740,   2.200000,   2.500000,   3.000000,   0.660716,   0.221000,   4.437000, 656.811257
Outstanding requests per worker:
10 13 51 11 18 10 20 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571481,      63475,     479368,      92113,   1.199922,   2.500000,   2.900000,   3.200000,   0.753192,   0.145000,   3.932000, 671.475592
Outstanding requests per worker:
27 32 46 13 12 13 27 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571515,      63430,     484385,      87130,   1.386095,   2.800000,   3.100000,   3.500000,   0.819040,   0.050000,   4.882000, 681.153443
Outstanding requests per worker:
18 32 30 12 14 22 45 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:31   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115520 pts/0   Sl+  19:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311738127      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4119319230      L1-dcache-loads:u                                           
        1450880802      armv8_pmuv3_0/l2d_cache/:u                                   
         448025365      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.201242063 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2516513280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500063744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007926.006350,       0.0,      258077,     232341,      25736,     151441,      80900,   0.609698,   0.904100,   1.600000,   2.100000,   0.346579,   0.000000,   2.656000, 466.049690
Outstanding requests per worker:
6 31 9 6 11 21 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.3,      645137,     580679,      64458,     430967,     149712,   1.020045,   2.500000,   2.900000,   3.700000,   0.838336,   0.047000,   4.746000, 565.409596
Outstanding requests per worker:
12 61 8 9 15 62 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129043.5,      645218,     580897,      64321,     457257,     123640,   1.283855,   3.200000,   3.500000,   4.100000,   1.069114,   0.084000,   5.190000, 615.112492
Outstanding requests per worker:
22 57 9 10 17 43 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.1,      645141,     580688,      64453,     470596,     110092,   1.642115,   3.800000,   4.400000,   5.300000,   1.313092,   0.079000,   6.310000, 640.121707
Outstanding requests per worker:
30 77 9 8 20 73 22 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129050.5,      645253,     581348,      63905,     480676,     100672,   1.988899,   4.300000,   4.800000,   5.900000,   1.470277,   0.200000,   7.869000, 658.943664
Outstanding requests per worker:
20 53 10 10 26 63 15 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129012.3,      645062,     580639,      64423,     487378,      93261,   2.802421,   7.000000,   8.800000,  10.400000,   2.528050,   0.212000,  12.020000, 672.395296
Outstanding requests per worker:
31 149 23 19 26 121 22 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128991.7,      644959,     580667,      64292,     492537,      88130,   4.329859,  13.100000,  15.100000,  17.300000,   4.776928,   0.153000,  19.680999, 681.778878
Outstanding requests per worker:
34 262 25 27 52 190 29 31 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:32   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120128 pts/0   Sl+  19:32   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319664129      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4209469194      L1-dcache-loads:u                                           
        1487727449      armv8_pmuv3_0/l2d_cache/:u                                   
         459147847      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.660050329 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2247291392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230841856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576007974.006398,       0.0,      258031,     232327,      25704,     151206,      81121,   0.606863,   0.950100,   1.400000,   1.900000,   0.321375,   0.000000,   3.391000, 464.789293
Outstanding requests per worker:
8 33 8 11 14 42 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.5,      645198,     580157,      65041,     431200,     148957,   1.012211,   2.400000,   2.800000,   3.200000,   0.761088,   0.075000,   3.929000, 566.162723
Outstanding requests per worker:
15 31 10 10 14 43 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129012.7,      645064,     580500,      64564,     457438,     123062,   1.313136,   3.400000,   3.800000,   4.200000,   1.119473,   0.069000,   5.497000, 615.364758
Outstanding requests per worker:
31 68 41 18 25 69 32 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129053.1,      645266,     580715,      64551,     470887,     109828,   1.643607,   3.900000,   4.300000,   5.600000,   1.333275,   0.213000,   7.528000, 641.386661
Outstanding requests per worker:
25 79 21 15 20 73 17 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.7,      645184,     580851,      64333,     480285,     100566,   2.218627,   5.100000,   5.500000,   6.100000,   1.669400,   0.177000,   8.272000, 658.777792
Outstanding requests per worker:
13 75 15 29 25 75 17 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.7,      645104,     580820,      64284,     487226,      93594,   2.716497,   5.900000,   6.500000,   7.900000,   1.887120,   0.223000,  10.131000, 671.276316
Outstanding requests per worker:
32 61 20 19 27 161 25 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128852.3,      644262,     579996,      64266,     491953,      88043,   6.410908,  20.700000,  28.600000,  37.900000,   9.053651,   0.220000,  40.201999, 682.721919
Outstanding requests per worker:
29 497 30 44 52 623 32 25 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:33   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 114624 pts/0   Sl+  19:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321106205      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4219836205      L1-dcache-loads:u                                           
        1494596618      armv8_pmuv3_0/l2d_cache/:u                                   
         465046976      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.281179030 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2183328256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2166878720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008023.006447,       0.0,      258039,     232269,      25770,     151011,      81258,   0.771515,   1.600000,   2.000000,   2.600000,   0.479026,   0.000000,   3.382000, 465.557840
Outstanding requests per worker:
12 37 9 10 12 34 14 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.3,      645127,     580645,      64482,     430517,     150128,   1.351501,   2.900000,   3.200000,   3.700000,   0.917893,   0.066000,   5.049000, 564.612102
Outstanding requests per worker:
23 51 12 24 25 58 9 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.7,      645114,     580755,      64359,     457534,     123221,   1.983463,   3.900000,   4.300000,   5.300000,   1.176331,   0.151000,   7.347000, 615.847054
Outstanding requests per worker:
24 70 28 27 30 89 30 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.5,      645078,     580819,      64259,     470529,     110290,   2.832023,   5.500000,   6.000000,   7.300000,   1.585171,   0.347000,   8.970000, 640.640969
Outstanding requests per worker:
49 99 31 30 58 121 34 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128943.5,      644718,     580063,      64655,     479614,     100449,   4.798225,  12.800000,  16.800000,  22.600000,   4.929272,   0.779000,  25.072999, 658.070716
Outstanding requests per worker:
40 399 39 44 49 281 45 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128806.7,      644034,     579755,      64279,     486299,      93456,  11.124196,  39.400000,  46.800000,  64.300000,  16.016668,   0.798000,  68.846002, 671.796157
Outstanding requests per worker:
46 1106 46 28 49 762 35 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128760.7,      643804,     579608,      64196,     491833,      87775,  21.550080,  84.000000,  91.300000, 102.000000,  33.389100,   0.780000, 108.988002, 682.350107
Outstanding requests per worker:
48 1756 33 39 50 1508 43 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:33   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 118208 pts/0   Sl+  19:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317325066      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4249174156      L1-dcache-loads:u                                           
        1502443943      armv8_pmuv3_0/l2d_cache/:u                                   
         466799216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.219366216 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2616259072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2599809536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2583360000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566910464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008072.006496,       0.0,      258093,     232463,      25630,     151363,      81100,   0.517800,   0.721100,   0.825100,   1.100000,   0.170920,   0.000000,   2.386000, 466.065791
Outstanding requests per worker:
7 10 11 9 8 9 14 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.5,      645178,     580747,      64431,     430703,     150044,   0.799610,   1.700000,   2.000000,   2.300000,   0.491959,   0.057000,   3.404000, 564.821993
Outstanding requests per worker:
9 16 23 7 10 14 32 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.7,      645214,     580810,      64404,     456794,     124016,   1.006044,   2.200000,   2.600000,   3.100000,   0.691213,   0.210000,   4.366000, 614.185534
Outstanding requests per worker:
10 19 40 12 14 14 32 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580537,      64612,     470399,     110138,   1.317683,   2.800000,   3.100000,   3.400000,   0.867186,   0.103000,   4.800000, 640.825622
Outstanding requests per worker:
17 16 52 11 12 28 47 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.3,      645177,     580733,      64444,     479960,     100773,   1.673041,   3.300000,   3.600000,   4.400000,   1.044717,   0.149000,   6.230000, 658.264979
Outstanding requests per worker:
29 24 51 11 14 31 55 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     580660,      64521,     486927,      93733,   1.887479,   3.600000,   3.900000,   4.500000,   1.082119,   0.172000,   6.690000, 670.727457
Outstanding requests per worker:
21 28 63 14 28 11 59 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.3,      645167,     580464,      64703,     491931,      88533,   2.273832,   4.200000,   4.700000,   5.400000,   1.280421,   0.210000,   6.596000, 681.544216
Outstanding requests per worker:
45 37 56 24 41 29 75 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:34   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 121472 pts/0   Sl+  19:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318158411      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        4208266598      L1-dcache-loads:u                                           
        1491236037      armv8_pmuv3_0/l2d_cache/:u                                   
         446078999      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040614089 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2452025856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2435576320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008121.006545,       0.0,      258119,     232276,      25843,     151026,      81250,   0.523708,   0.723000,   0.831100,   1.200000,   0.175940,   0.000000,   2.399000, 465.599472
Outstanding requests per worker:
9 10 8 9 10 10 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.1,      645166,     580790,      64376,     432411,     148379,   0.806728,   1.800000,   2.000000,   2.300000,   0.490750,   0.074000,   3.251000, 567.485892
Outstanding requests per worker:
5 34 11 14 9 30 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.9,      645090,     580717,      64373,     456690,     124027,   1.082852,   2.500000,   2.900000,   3.400000,   0.795027,   0.087000,   4.860000, 614.527791
Outstanding requests per worker:
34 75 28 13 12 64 31 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.3,      645232,     580924,      64308,     471429,     109495,   1.359914,   3.000000,   3.400000,   4.200000,   1.001459,   0.172000,   5.055000, 641.512769
Outstanding requests per worker:
26 47 34 9 13 54 28 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129050.5,      645253,     580799,      64454,     480004,     100795,   1.549469,   3.300000,   3.600000,   4.200000,   1.046683,   0.216000,   5.189000, 658.800082
Outstanding requests per worker:
13 53 20 9 11 49 26 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.7,      645154,     580829,      64325,     486978,      93851,   1.922869,   3.800000,   4.100000,   4.700000,   1.160327,   0.172000,   6.233000, 671.158527
Outstanding requests per worker:
17 76 27 20 11 73 26 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.1,      645116,     580894,      64222,     492359,      88535,   2.337006,   4.500000,   5.100000,   6.000000,   1.363277,   0.206000,   7.827000, 681.869713
Outstanding requests per worker:
33 82 42 28 24 81 47 26 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:35   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 123072 pts/0   Sl+  19:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318674502      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4205994650      L1-dcache-loads:u                                           
        1493186298      armv8_pmuv3_0/l2d_cache/:u                                   
         455301677      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290438107 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2133389824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2116940288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100490752
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008170.006594,       0.0,      262225,     236220,      26005,     154242,      81978,   1.083725,   2.400000,   2.800000,   3.200000,   0.729278,   0.000000,   3.807000, 466.476708
Outstanding requests per worker:
20 43 10 8 17 52 31 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131130.7,      655654,     589706,      65948,     438524,     151182,   2.153184,   4.000000,   4.400000,   5.000000,   1.149362,   0.207000,   6.307000, 566.813444
Outstanding requests per worker:
36 74 45 33 33 65 30 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131089.5,      655448,     590011,      65437,     464737,     125274,   3.257294,   6.000000,   7.200000,  11.900000,   2.112750,   0.272000,  15.584000, 615.268724
Outstanding requests per worker:
49 227 42 26 44 173 45 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130940.9,      654705,     589477,      65228,     477935,     111542,   8.048004,  26.500000,  32.400000,  43.800000,  10.495963,   0.762000,  53.521998, 641.390670
Outstanding requests per worker:
61 848 76 45 70 547 75 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130826.1,      654131,     588778,      65353,     486910,     101868,  19.238239,  71.300000,  85.700000, 100.800000,  29.342866,   0.893000, 106.050000, 659.062886
Outstanding requests per worker:
55 1720 67 39 58 1386 55 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130871.5,      654358,     588862,      65496,     493923,      94939,  31.844631, 120.200000, 133.800000, 144.500000,  49.370614,   0.999000, 149.859995, 671.509610
Outstanding requests per worker:
116 2443 62 51 60 2046 65 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130924.7,      654624,     589339,      65285,     500191,      89148,  42.202741, 158.700000, 165.500000, 181.000000,  66.157498,   1.795000, 184.847996, 682.713462
Outstanding requests per worker:
71 3013 87 48 81 2629 69 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:36   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 120768 pts/0   Sl+  19:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320367659      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        4322546241      L1-dcache-loads:u                                           
        1514034101      armv8_pmuv3_0/l2d_cache/:u                                   
         475598043      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.201235807 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2606297600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2589848064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2573398528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008218.006642,       0.0,      262250,     235844,      26406,     154813,      81031,   0.907690,   1.700000,   1.900000,   2.500000,   0.498293,   0.000000,   5.322000, 470.234706
Outstanding requests per worker:
20 15 31 8 28 11 37 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131109.3,      655547,     590060,      65487,     438632,     151428,   1.916430,   3.000000,   3.300000,   4.000000,   0.760533,   0.212000,   5.337000, 566.980568
Outstanding requests per worker:
52 38 58 44 37 41 64 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131156.5,      655783,     590323,      65460,     464566,     125757,   2.567863,   3.800000,   4.100000,   4.700000,   0.792079,   0.699000,   6.256000, 614.459738
Outstanding requests per worker:
50 34 81 46 40 35 80 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131144.5,      655723,     589967,      65756,     479334,     110633,   3.373744,   5.500000,   6.000000,   6.900000,   1.262565,   0.789000,   8.506000, 642.392197
Outstanding requests per worker:
59 52 90 48 49 47 88 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131113.7,      655569,     590428,      65141,     488849,     101579,   4.020418,   7.000000,   8.900000,  10.800000,   2.059076,   0.888000,  13.080000, 659.158753
Outstanding requests per worker:
97 52 128 48 100 48 159 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130983.7,      654919,     589779,      65140,     494977,      94802,   8.465267,  21.900000,  33.000000,  40.900000,   9.574501,   0.953000,  42.971998, 672.240833
Outstanding requests per worker:
94 61 691 50 75 47 469 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130838.3,      654192,     588588,      65604,     499752,      88836,  17.719323,  56.600000,  85.200000, 103.800000,  26.290522,   1.625000, 107.642002, 683.075358
Outstanding requests per worker:
102 59 1748 71 98 54 927 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:37   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 120448 pts/0   Sl+  19:37   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322188274      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4328578118      L1-dcache-loads:u                                           
        1527949785      armv8_pmuv3_0/l2d_cache/:u                                   
         478097060      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.051489578 seconds time elapsed

