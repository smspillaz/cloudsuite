+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2350051840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2333602304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2317152768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300703232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008267.006691,       0.0,       60150,      54148,       6002,      31836,      22312,   2.968438,  11.100000,  21.700000,  32.000000,   6.939696,   0.000000,  42.247001, 398.299549
Outstanding requests per worker:
4 2 2 2 1 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135471,      14916,      89380,      46091,   3.648671,  15.600000,  25.000000,  32.700000,   7.756623,   0.102000,  39.002001, 475.459006
Outstanding requests per worker:
2 2 3 2 2 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30006.2,      150031,     135179,      14852,      95100,      40079,   3.872058,  16.500000,  25.700000,  33.400000,   8.011358,   0.103000,  42.663001, 523.237981
Outstanding requests per worker:
42 52 44 43 48 48 56 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29970.2,      149851,     134781,      15070,      97909,      36872,   4.561635,  20.200000,  28.200000,  34.500000,   8.871191,   0.103000,  41.266002, 548.501465
Outstanding requests per worker:
117 112 110 116 116 107 111 131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30182.8,      150914,     135969,      14945,     101217,      34752,   4.765986,  21.100000,  28.400000,  35.100000,   9.057896,   0.102000,  40.382002, 568.288558
Outstanding requests per worker:
63 59 38 35 39 67 42 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30151.0,      150755,     135408,      15347,     102689,      32719,   4.584253,  19.500000,  28.800000,  36.000000,   8.944135,   0.103000,  42.066000, 582.776948
Outstanding requests per worker:
2 1 1 5 1 1 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135189,      15195,     104156,      31033,   4.630229,  20.400000,  29.400000,  36.400000,   9.156989,   0.103000,  42.617999, 595.166508
Outstanding requests per worker:
1 3 2 2 2 1 6 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   19:37   0:00 /usr/lib/linux
memcache      9 71.0  0.0 127424 42176 pts/0    Sl+  19:37   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75133032      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
         923775023      L1-dcache-loads:u                                           
         348602717      armv8_pmuv3_0/l2d_cache/:u                                   
          98635335      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030852079 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2543907328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2527457792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511008256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2494558720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008315.006739,       0.0,       61049,      54853,       6196,      31984,      22869,   3.559051,  14.400000,  25.700000,  35.600000,   8.012180,   0.000000,  44.757999, 394.068200
Outstanding requests per worker:
9 3 7 5 6 2 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30347.8,      151739,     136608,      15131,      90638,      45970,   4.481047,  19.700000,  27.800000,  34.700000,   8.734670,   0.100000,  40.972002, 479.188195
Outstanding requests per worker:
120 123 126 128 118 115 124 131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30588.6,      152943,     137481,      15462,      97443,      40038,   5.229861,  23.500000,  30.900000,  36.600000,   9.811531,   0.105000,  46.011999, 526.857057
Outstanding requests per worker:
85 78 81 90 95 116 96 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30630.6,      153153,     137669,      15484,     100541,      37128,   5.155156,  21.700000,  29.700000,  36.900000,   9.489963,   0.112000,  51.415998, 551.681693
Outstanding requests per worker:
36 37 32 23 49 34 21 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30583.0,      152915,     137641,      15274,     102521,      35120,   4.848895,  20.900000,  29.600000,  37.100000,   9.296508,   0.104000,  42.801999, 568.621159
Outstanding requests per worker:
3 2 3 2 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137343,      15339,     104440,      32903,   5.038354,  21.800000,  30.200000,  37.200000,   9.537519,   0.105000,  49.422000, 585.191914
Outstanding requests per worker:
2 3 2 4 3 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137426,      15261,     105911,      31515,   5.166782,  22.400000,  30.600000,  37.500000,   9.688460,   0.116000,  44.220001, 596.568364
Outstanding requests per worker:
2 2 3 2 4 0 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:38   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:38   0:00 /usr/lib/linux
memcache      9 71.0  0.0 127424 44160 pts/0    Sl+  19:38   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74221626      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
         942311673      L1-dcache-loads:u                                           
         350289625      armv8_pmuv3_0/l2d_cache/:u                                   
         105350050      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950476977 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3089232384
starting receive base loop
num_worker_connections 1
Creating worker on tid 3072782848
starting receive base loop
num_worker_connections 1
Creating worker on tid 3056333312
starting receive base loop
num_worker_connections 1
Creating worker on tid 3039883776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008364.006788,       0.0,       62017,      55813,       6204,      33144,      22669,   0.638820,   1.100000,   1.200000,   1.600000,   0.310280,   0.000000,   2.348000, 401.351800
Outstanding requests per worker:
3 3 4 1 4 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139547,      15506,      92929,      46618,   0.663684,   1.100000,   1.200000,   1.700000,   0.324635,   0.116000,   2.291000, 481.152694
Outstanding requests per worker:
3 3 4 4 1 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139325,      15730,      98520,      40805,   0.678979,   1.100000,   1.200000,   1.800000,   0.333533,   0.120000,   2.577000, 528.115191
Outstanding requests per worker:
3 2 4 3 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139532,      15515,     102058,      37474,   0.692634,   1.200000,   1.300000,   1.800000,   0.339981,   0.112000,   2.416000, 553.995284
Outstanding requests per worker:
3 1 4 3 3 1 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139460,      15585,     104702,      34758,   0.702165,   1.200000,   1.300000,   1.800000,   0.342699,   0.116000,   3.123000, 574.295497
Outstanding requests per worker:
3 3 2 2 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139555,      15490,     106300,      33255,   0.711076,   1.200000,   1.300000,   1.800000,   0.345504,   0.119000,   3.582000, 587.531289
Outstanding requests per worker:
2 2 3 6 3 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139619,      15428,     107676,      31943,   0.714907,   1.200000,   1.300000,   1.800000,   0.348025,   0.122000,   2.878000, 598.517960
Outstanding requests per worker:
3 2 2 7 1 2 1 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:39   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:39   0:00 /usr/lib/linux
memcache     10 69.4  0.0 130496 45184 pts/0    Sl+  19:39   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75191022      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
         951052742      L1-dcache-loads:u                                           
         351737608      armv8_pmuv3_0/l2d_cache/:u                                   
          95560514      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.261046926 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3147297280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130847744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3114398208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097948672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008413.006837,       0.0,       63238,      56920,       6318,      33707,      23213,   0.692594,   1.200000,   1.300000,   1.800000,   0.338320,   0.000000,   2.526000, 399.798419
Outstanding requests per worker:
2 5 1 3 4 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142246,      15865,      94776,      47470,   0.708918,   1.200000,   1.300000,   1.800000,   0.344426,   0.118000,   2.763000, 481.575151
Outstanding requests per worker:
2 4 4 1 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142274,      15837,     100662,      41612,   0.724904,   1.200000,   1.300000,   1.900000,   0.352414,   0.120000,   2.954000, 527.025233
Outstanding requests per worker:
4 3 2 5 1 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142232,      15879,     104150,      38082,   0.738650,   1.200000,   1.300000,   1.800000,   0.355147,   0.122000,   2.919000, 553.629338
Outstanding requests per worker:
4 3 1 5 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.2,      158106,     142363,      15743,     106903,      35460,   0.751900,   1.300000,   1.300000,   1.900000,   0.359658,   0.120000,   3.255000, 574.623175
Outstanding requests per worker:
3 1 5 3 5 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142226,      15886,     108462,      33764,   0.764877,   1.300000,   1.400000,   1.900000,   0.366913,   0.124000,   3.324000, 588.566155
Outstanding requests per worker:
3 2 6 4 2 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142274,      15838,     109811,      32463,   0.771423,   1.300000,   1.400000,   1.900000,   0.369007,   0.127000,   3.326000, 598.295711
Outstanding requests per worker:
4 3 2 5 2 4 4 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:40   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:40   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46272 pts/0    Sl+  19:40   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75946907      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
         971482671      L1-dcache-loads:u                                           
         355100806      armv8_pmuv3_0/l2d_cache/:u                                   
          99454516      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209746939 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008462.006886,       0.0,       64000,      57658,       6342,      34369,      23289,   0.738046,   1.200000,   1.300000,   1.800000,   0.352229,   0.000000,   2.528000, 402.345208
Outstanding requests per worker:
4 5 1 1 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.6,      160003,     143990,      16013,      96180,      47810,   0.779600,   1.300000,   1.400000,   1.900000,   0.372374,   0.124000,   2.660000, 483.659768
Outstanding requests per worker:
3 6 4 4 2 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144027,      15986,     102325,      41702,   0.812053,   1.400000,   1.500000,   2.000000,   0.386694,   0.139000,   3.375000, 529.743562
Outstanding requests per worker:
4 4 2 3 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     144060,      15955,     105486,      38574,   0.831069,   1.400000,   1.500000,   2.000000,   0.395295,   0.131000,   3.025000, 554.730883
Outstanding requests per worker:
4 6 1 2 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143969,      16043,     108094,      35875,   0.856495,   1.400000,   1.500000,   2.000000,   0.405608,   0.146000,   3.170000, 574.004466
Outstanding requests per worker:
4 2 6 5 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143969,      16038,     109933,      34036,   0.864432,   1.400000,   1.600000,   2.000000,   0.409044,   0.142000,   3.928000, 588.547965
Outstanding requests per worker:
4 2 5 3 7 1 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144109,      15902,     111582,      32527,   0.883226,   1.500000,   1.600000,   2.000000,   0.416311,   0.145000,   3.037000, 599.187879
Outstanding requests per worker:
2 7 4 4 4 5 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:41   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   19:41   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 45888 pts/0    Sl+  19:41   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75089684      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
         984319572      L1-dcache-loads:u                                           
         354360689      armv8_pmuv3_0/l2d_cache/:u                                   
          96190699      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060862421 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2250961408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234511872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008511.006935,       0.0,       65036,      58690,       6346,      34939,      23751,   0.862798,   1.400000,   1.600000,   2.000000,   0.407027,   0.000000,   2.928000, 403.234043
Outstanding requests per worker:
3 8 5 5 2 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146417,      16193,      97917,      48500,   0.900481,   1.500000,   1.600000,   2.100000,   0.423298,   0.145000,   3.656000, 483.498965
Outstanding requests per worker:
5 5 3 1 3 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146240,      16372,     103695,      42545,   0.932912,   1.600000,   1.700000,   2.100000,   0.435590,   0.147000,   3.288000, 528.128891
Outstanding requests per worker:
3 8 4 4 6 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146467,      16148,     107074,      39393,   0.953769,   1.600000,   1.700000,   2.100000,   0.445178,   0.155000,   3.290000, 553.059413
Outstanding requests per worker:
7 6 3 6 4 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32525.2,      162626,     146258,      16368,     109928,      36330,   0.985098,   1.600000,   1.700000,   2.200000,   0.461491,   0.164000,   4.138000, 575.435648
Outstanding requests per worker:
6 5 6 6 2 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146338,      16271,     111549,      34789,   0.996381,   1.700000,   1.800000,   2.200000,   0.464957,   0.158000,   3.291000, 586.610170
Outstanding requests per worker:
3 2 4 3 6 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146275,      16337,     113007,      33268,   1.013921,   1.700000,   1.800000,   2.100000,   0.469345,   0.161000,   3.353000, 599.086317
Outstanding requests per worker:
6 4 7 6 1 6 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:41   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:42   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46528 pts/0    Sl+  19:42   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  19:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76114510      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        1002196816      L1-dcache-loads:u                                           
         357500667      armv8_pmuv3_0/l2d_cache/:u                                   
         100522738      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940689416 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3081302528
starting receive base loop
num_worker_connections 1
Creating worker on tid 3064852992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3048403456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3031953920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008560.006984,       0.0,       66106,      59512,       6594,      35315,      24197,   0.914710,   1.500000,   1.600000,   2.100000,   0.428451,   0.000000,   3.255000, 401.734995
Outstanding requests per worker:
6 2 4 2 3 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148754,      16546,      99380,      49374,   0.957085,   1.600000,   1.700000,   2.000000,   0.443000,   0.155000,   3.706000, 482.748887
Outstanding requests per worker:
2 4 5 5 5 2 1 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.8,      165309,     148934,      16375,     105850,      43084,   0.997447,   1.600000,   1.800000,   2.100000,   0.462612,   0.162000,   3.375000, 531.106598
Outstanding requests per worker:
3 4 6 5 5 2 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148627,      16677,     109323,      39304,   1.015225,   1.700000,   1.800000,   2.100000,   0.469583,   0.161000,   4.038000, 558.605671
Outstanding requests per worker:
7 2 5 3 4 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.6,      165303,     148892,      16411,     112049,      36843,   1.040633,   1.700000,   1.800000,   2.100000,   0.479524,   0.173000,   3.246000, 576.674173
Outstanding requests per worker:
3 4 7 5 5 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148648,      16651,     113635,      35013,   1.059178,   1.800000,   1.900000,   2.200000,   0.489137,   0.159000,   3.680000, 589.567858
Outstanding requests per worker:
8 7 3 1 2 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148754,      16542,     115312,      33442,   1.079186,   1.800000,   1.900000,   2.300000,   0.500692,   0.174000,   3.704000, 601.433447
Outstanding requests per worker:
6 6 9 8 8 4 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:42   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46976 pts/0    Sl+  19:42   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  19:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76871643      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        1019649795      L1-dcache-loads:u                                           
         358530198      armv8_pmuv3_0/l2d_cache/:u                                   
          98127697      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000230414 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2179854848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163405312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008609.007033,       0.0,       67218,      60474,       6744,      35824,      24650,   0.988375,   1.600000,   1.700000,   2.000000,   0.455126,   0.000000,   3.330000, 400.568294
Outstanding requests per worker:
5 6 3 8 4 3 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151361,      16718,     101323,      50038,   1.040298,   1.700000,   1.800000,   2.000000,   0.473832,   0.167000,   3.354000, 484.317182
Outstanding requests per worker:
6 7 4 8 5 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33618.8,      168094,     151406,      16688,     107366,      44040,   1.092282,   1.800000,   1.900000,   2.100000,   0.495100,   0.172000,   3.373000, 530.422804
Outstanding requests per worker:
2 2 7 4 7 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.0,      168070,     151165,      16905,     111360,      39805,   1.121007,   1.800000,   2.000000,   2.200000,   0.506378,   0.193000,   3.839000, 559.859736
Outstanding requests per worker:
2 4 8 6 3 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151291,      16795,     113559,      37732,   1.154992,   1.900000,   2.000000,   2.200000,   0.522445,   0.168000,   3.577000, 576.079483
Outstanding requests per worker:
2 3 7 5 3 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151268,      16809,     115599,      35669,   1.189548,   2.000000,   2.100000,   2.300000,   0.540755,   0.198000,   3.593000, 590.315592
Outstanding requests per worker:
8 9 5 3 7 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151373,      16704,     117368,      34005,   1.211771,   2.000000,   2.100000,   2.400000,   0.552503,   0.203000,   3.669000, 601.849927
Outstanding requests per worker:
4 5 1 8 3 6 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:43   0:00 /usr/lib/linux
memcache      8 71.0  0.0 131520 46976 pts/0    Sl+  19:43   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76598915      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        1037113396      L1-dcache-loads:u                                           
         363701651      armv8_pmuv3_0/l2d_cache/:u                                   
          94190023      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150186133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2409296384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2392846848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2376397312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359947776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008657.007081,       0.0,       68075,      61323,       6752,      36530,      24793,   1.139238,   1.900000,   2.000000,   2.200000,   0.519237,   0.000000,   3.309000, 404.251390
Outstanding requests per worker:
4 8 2 8 7 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153137,      17086,     102209,      50928,   1.241982,   2.000000,   2.200000,   2.500000,   0.569451,   0.187000,   4.476000, 484.046814
Outstanding requests per worker:
8 2 4 3 4 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153335,      16889,     109093,      44242,   1.409067,   2.300000,   2.500000,   3.000000,   0.658861,   0.227000,   4.185000, 531.522353
Outstanding requests per worker:
6 9 2 4 8 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34038.8,      170194,     153139,      17055,     112743,      40396,   1.649424,   2.700000,   2.900000,   3.800000,   0.805460,   0.261000,   6.555000, 558.977824
Outstanding requests per worker:
4 22 13 11 9 9 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.4,      170232,     153133,      17099,     115252,      37881,   2.225679,   3.800000,   4.900000,   6.400000,   1.271496,   0.286000,   9.327000, 577.236063
Outstanding requests per worker:
13 10 9 8 6 11 13 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34041.8,      170209,     153221,      16988,     117069,      36152,   2.335213,   4.000000,   5.200000,   6.600000,   1.335914,   0.308000,   9.084000, 588.875213
Outstanding requests per worker:
5 26 14 12 10 16 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34016.0,      170080,     152980,      17100,     118635,      34345,   3.944048,   7.300000,   7.900000,  10.100000,   2.380972,   0.347000,  13.326000, 603.184573
Outstanding requests per worker:
31 35 27 25 39 33 27 20 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:44   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:44   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47040 pts/0    Sl+  19:44   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75801294      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        1058808267      L1-dcache-loads:u                                           
         363773928      armv8_pmuv3_0/l2d_cache/:u                                   
          93223848      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160619377 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2519265792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2502816256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008706.007130,       0.0,       69234,      62407,       6827,      36960,      25447,   1.410922,   2.300000,   2.500000,   2.900000,   0.655638,   0.000000,   3.509000, 401.193776
Outstanding requests per worker:
9 12 7 8 10 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34628.8,      173144,     155834,      17310,     104702,      51132,   1.929094,   3.100000,   3.500000,   5.700000,   1.046495,   0.256000,   8.264000, 487.050406
Outstanding requests per worker:
6 9 27 5 8 2 12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34612.8,      173064,     155832,      17232,     111171,      44661,   3.774595,   8.900000,  10.000000,  11.300000,   2.878517,   0.368000,  13.236000, 532.956402
Outstanding requests per worker:
10 50 28 7 12 5 45 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34604.8,      173024,     155487,      17537,     114685,      40802,   9.425149,  11.800000,  12.300000,  13.300000,   2.099188,   0.372000,  15.619000, 560.212822
Outstanding requests per worker:
32 54 51 35 32 37 57 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.2,      173151,     155686,      17465,     116960,      38726,  10.588005,  12.400000,  13.800000,  20.200000,   2.194470,   6.727000,  27.288999, 575.322335
Outstanding requests per worker:
47 41 39 50 45 53 37 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34606.6,      173033,     155712,      17321,     119425,      36287,  13.275202,  15.400000,  15.800000,  16.300000,   1.745808,   2.057000,  17.769000, 592.161465
Outstanding requests per worker:
55 56 67 62 59 71 67 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34638.6,      173193,     155813,      17380,     120716,      35097,  14.349370,  16.200000,  16.900000,  19.900000,   1.638520,  10.879000,  27.286001, 601.427089
Outstanding requests per worker:
64 67 58 51 69 61 56 53 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:45   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 48512 pts/0    Sl+  19:45   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  19:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76863545      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1095169923      L1-dcache-loads:u                                           
         374398564      armv8_pmuv3_0/l2d_cache/:u                                   
         101272587      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071142673 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2669605376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653155840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2636706304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008755.007179,       0.0,       70052,      62997,       7055,      37562,      25435,   2.743340,   5.200000,   7.600000,  10.500000,   2.052142,   0.000000,  13.523000, 406.304713
Outstanding requests per worker:
6 12 36 15 27 10 32 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35032.4,      175162,     157693,      17469,     105508,      52185,   9.581212,  13.600000,  14.500000,  15.800000,   3.692942,   0.400000,  18.859001, 486.914353
Outstanding requests per worker:
62 51 47 57 60 50 64 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35076.0,      175380,     157828,      17552,     112451,      45377,  13.248304,  16.000000,  16.900000,  18.000000,   2.118646,   6.136000,  20.833001, 532.815438
Outstanding requests per worker:
62 75 70 62 65 53 50 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35028.2,      175141,     157662,      17479,     116501,      41161,  19.282987,  30.900000,  39.300000,  48.500000,   8.352576,   9.212000,  57.994999, 560.895612
Outstanding requests per worker:
234 129 59 73 76 56 62 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34943.4,      174717,     157464,      17253,     118914,      38550,  33.092884,  58.600000,  74.000000,  82.200000,  18.113878,   8.916000,  88.455997, 579.278292
Outstanding requests per worker:
366 132 234 257 157 83 81 232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34795.0,      173975,     156640,      17335,     120350,      36290,  63.124084,  90.400000,  97.000000, 115.300000,  21.696029,  12.494000, 123.943999, 593.980554
Outstanding requests per worker:
486 357 314 406 220 397 299 538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34640.2,      173201,     155819,      17382,     121400,      34419, 114.284757, 153.700000, 164.300000, 187.500000,  29.880376,  43.977998, 195.893005, 605.035978
Outstanding requests per worker:
821 670 490 580 530 723 649 802 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:46   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:46   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  19:46   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77407266      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1108835578      L1-dcache-loads:u                                           
         378345732      armv8_pmuv3_0/l2d_cache/:u                                   
         101276490      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.791067970 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3054760448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038310912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008803.007227,       0.0,       70454,      63388,       7066,      37889,      25499,  13.667404,  19.300000,  20.100000,  21.600000,   5.001328,   0.000000,  30.853000, 406.545498
Outstanding requests per worker:
78 86 83 74 81 84 76 122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35139.6,      175698,     158091,      17607,     106412,      51679,  44.685188,  75.500000,  83.000000,  91.000000,  20.794249,  11.886000, 104.342997, 488.945272
Outstanding requests per worker:
254 362 392 314 311 384 313 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34917.0,      174585,     156877,      17708,     112026,      44851, 120.426005, 160.500000, 170.500000, 180.900000,  29.238963,  54.364000, 192.635000, 534.823154
Outstanding requests per worker:
760 719 835 799 655 736 666 809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34728.6,      173643,     156384,      17259,     115645,      40739, 226.094990, 279.100000, 288.600000, 319.600000,  38.359494, 144.326001, 335.370988, 561.428445
Outstanding requests per worker:
1217 1261 1292 1474 1233 1163 1150 1336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34697.8,      173489,     155868,      17621,     117441,      38427, 346.054044, 398.600000, 412.100000, 437.500000,  40.437094, 251.248002, 456.149995, 577.740460
Outstanding requests per worker:
1825 1779 1935 2020 1766 1675 1701 1722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34768.4,      173842,     156369,      17473,     119986,      36383, 462.195959, 509.800000, 526.400000, 563.600000,  39.356837, 374.545991, 570.065022, 592.643804
Outstanding requests per worker:
2347 2301 2278 2520 2219 2166 2310 2229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34827.0,      174135,     156903,      17232,     122000,      34903, 568.447162, 623.200000, 639.400000, 662.700000,  39.545925, 482.820004, 678.861976, 604.195490
Outstanding requests per worker:
2796 2675 2770 2991 2679 2518 2883 2717 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:46   0:00 /usr/lib/linux
memcache      8 72.6  0.0 132544 49216 pts/0    Sl+  19:46   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  19:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77314389      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1105037135      L1-dcache-loads:u                                           
         377614562      armv8_pmuv3_0/l2d_cache/:u                                   
         100931859      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819944640 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2305225216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008852.007276,       0.0,       70529,      63505,       7024,      37841,      25664,  23.840406,  50.300000,  57.400000,  70.800000,  15.380238,   0.000000,  78.033999, 404.445634
Outstanding requests per worker:
125 242 116 330 270 141 99 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35008.4,      175042,     157655,      17387,     105703,      51952, 111.468162, 175.900000, 194.000000, 217.800000,  47.373840,  21.044999, 234.546006, 487.647731
Outstanding requests per worker:
807 872 736 1040 977 664 719 912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34835.0,      174175,     156634,      17541,     112268,      44366, 269.165761, 352.700000, 368.400000, 384.700000,  57.376068, 146.431997, 395.628989, 537.114879
Outstanding requests per worker:
1551 1730 1539 1765 1692 1324 1428 1724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34855.2,      174276,     156991,      17285,     116134,      40857, 439.544466, 521.400000, 536.600000, 549.300000,  59.544674, 289.413989, 566.730022, 562.174749
Outstanding requests per worker:
2361 2518 2185 2427 2478 1989 2201 2508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35134.2,      175671,     157850,      17821,     119172,      38678, 583.457870, 656.600000, 672.400000, 689.700000,  54.591832, 436.399013, 700.051010, 578.913348
Outstanding requests per worker:
2781 3003 2750 3080 3125 2521 2808 3121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35245.6,      176228,     158544,      17684,     121796,      36748, 700.031463, 770.700000, 793.300000, 823.300000,  56.700905, 555.558026, 837.199986, 593.897038
Outstanding requests per worker:
3251 3425 3297 3517 3640 2953 3323 3755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35223.6,      176118,     158540,      17578,     123620,      34920, 808.944248, 892.000000, 909.200000, 931.200000,  65.160868, 649.335980, 946.807027, 606.613107
Outstanding requests per worker:
3685 4002 3745 4160 4091 3374 3936 4249 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:47   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   19:47   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48384 pts/0    Sl+  19:47   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76981814      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1112955913      L1-dcache-loads:u                                           
         379179333      armv8_pmuv3_0/l2d_cache/:u                                   
         103720823      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100598758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2152854016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2136404480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2119954944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103505408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008901.007325,       0.0,       71463,      64423,       7040,      38124,      26299,  24.477180,  45.000000,  52.300000,  60.600000,  13.431499,   0.000000,  68.086997, 401.069214
Outstanding requests per worker:
142 309 220 216 140 175 155 272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35413.4,      177067,     159405,      17662,     107339,      52066, 115.919094, 183.900000, 201.000000, 229.900000,  49.174826,  24.359999, 253.201008, 489.308961
Outstanding requests per worker:
808 999 795 1001 824 882 788 1129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35281.2,      176406,     158698,      17708,     113506,      45192, 282.869628, 354.200000, 372.700000, 392.900000,  55.474702, 166.154996, 409.565002, 535.488569
Outstanding requests per worker:
1635 1801 1735 1614 1659 1672 1535 1841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35421.6,      177108,     159372,      17736,     117586,      41786, 448.561856, 510.100000, 524.400000, 555.000000,  47.910812, 333.747000, 570.044994, 559.701936
Outstanding requests per worker:
2449 2316 2432 2342 2245 2460 2214 2588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35431.6,      177158,     159411,      17747,     120326,      39085, 597.799225, 667.400000, 688.400000, 719.200000,  53.339717, 478.664011, 733.568013, 579.610679
Outstanding requests per worker:
3096 2974 3217 2991 2952 3178 2818 3326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35585.6,      177928,     160101,      17827,     122869,      37232, 737.975764, 807.900000, 821.900000, 845.300000,  49.785627, 614.319980, 865.583003, 592.788259
Outstanding requests per worker:
3764 3527 3934 3543 3546 3699 3454 3822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35714.2,      178571,     160681,      17890,     125182,      35499, 859.615680, 926.700000, 952.500000, 984.600000,  51.015149, 752.898991, 995.431006, 604.863612
Outstanding requests per worker:
4280 4037 4534 4045 4103 4163 3936 4287 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:48   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48512 pts/0    Sl+  19:48   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  19:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78171000      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1122310037      L1-dcache-loads:u                                           
         385926035      armv8_pmuv3_0/l2d_cache/:u                                   
         106435487      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280938083 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2731602432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715152896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698703360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008949.007373,       0.0,       70659,      63511,       7148,      37799,      25712,  47.978624,  83.200000,  90.500000, 100.900000,  26.156985,   0.000000, 115.809001, 405.027507
Outstanding requests per worker:
425 395 371 459 470 384 521 413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35137.0,      175685,     158220,      17465,     106251,      51969, 222.456011, 324.000000, 342.900000, 362.900000,  76.830621,  77.431001, 385.123998, 488.388674
Outstanding requests per worker:
1607 1463 1503 1694 1630 1615 1772 1665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35456.0,      177280,     159263,      18017,     113641,      45622, 460.198904, 542.400000, 555.500000, 576.800000,  63.239863, 314.155996, 595.107973, 535.399170
Outstanding requests per worker:
2688 2504 2570 2633 2665 2524 2723 2559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35754.4,      178772,     161101,      17671,     119144,      41957, 652.573076, 722.200000, 740.700000, 778.300000,  54.416522, 538.088024, 793.483019, 562.960559
Outstanding requests per worker:
3451 3336 3268 3396 3554 3283 3675 3334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35940.6,      179703,     161759,      17944,     122251,      39508, 814.441960, 889.000000, 915.200000, 955.300000,  56.718171, 702.368975, 977.360010, 580.443301
Outstanding requests per worker:
4037 4155 3822 4094 4231 3820 4507 4129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36081.8,      180409,     162466,      17943,     124873,      37593, 950.593676, 1038.200000, 1066.800000, 1093.800000,  62.937866, 822.359979, 1105.496049, 593.982790
Outstanding requests per worker:
4765 4722 4381 4523 5027 4419 5089 4671 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36117.0,      180585,     162478,      18107,     126745,      35733, 1076.715818, 1167.700000, 1188.100000, 1200.600000,  64.743182, 942.512989, 1207.909942, 606.586886
Outstanding requests per worker:
5263 5451 4966 5089 5573 4996 5563 5309 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:49   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49280 pts/0    Sl+  19:49   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  19:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77825855      L1-dcache-load-misses:u   # [33m   6.86%[m of all L1-dcache hits  
        1134210538      L1-dcache-loads:u                                           
         384180978      armv8_pmuv3_0/l2d_cache/:u                                   
         101902749      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060746994 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2444161536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427712000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576008998.007422,       0.0,       70748,      63709,       7039,      38038,      25671,  59.061385, 104.400000, 114.900000, 125.400000,  33.085657,   0.000000, 135.890007, 406.543189
Outstanding requests per worker:
513 579 620 576 500 532 478 602 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35270.4,      176352,     158575,      17777,     106705,      51870, 273.566483, 394.500000, 407.700000, 424.300000,  89.414044,  97.710997, 444.137990, 488.785754
Outstanding requests per worker:
1982 1984 2065 2011 1963 1918 1917 2016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35823.2,      179116,     161169,      17947,     114893,      46276, 542.452480, 632.700000, 648.300000, 663.400000,  67.469433, 401.807010, 678.759992, 533.064665
Outstanding requests per worker:
3105 3177 3109 3097 3159 2934 2932 3036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36170.2,      180851,     162910,      17941,     120220,      42690, 748.640030, 829.500000, 844.400000, 862.100000,  59.282379, 620.176017, 879.415989, 560.432730
Outstanding requests per worker:
3981 4006 4113 4039 4023 3632 3781 3931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36389.4,      181947,     163701,      18246,     123846,      39855, 920.824644, 991.100000, 1004.300000, 1024.800000,  55.292697, 755.258977, 1034.816980, 580.524878
Outstanding requests per worker:
4741 4733 4640 4849 4706 4393 4485 4832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36631.2,      183156,     164822,      18334,     127046,      37776, 1060.927594, 1119.600000, 1134.300000, 1153.800000,  46.367506, 934.192002, 1171.756983, 596.514009
Outstanding requests per worker:
5494 5234 5185 5225 5364 5051 5089 5385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36730.2,      183651,     165225,      18426,     128822,      36403, 1174.851697, 1238.000000, 1248.900000, 1283.200000,  48.780572, 1073.040009, 1301.105976, 607.448921
Outstanding requests per worker:
6091 5687 5874 5862 5901 5476 5469 5824 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:50   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:50   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49280 pts/0    Sl+  19:50   0:31 memcached -t 1
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  19:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78673749      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1145610408      L1-dcache-loads:u                                           
         390349291      armv8_pmuv3_0/l2d_cache/:u                                   
         103907340      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980106384 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2574447104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009047.007471,       0.0,       70758,      63753,       7005,      37905,      25848,  71.981897, 127.700000, 136.400000, 147.200000,  40.341782,   0.000000, 155.793995, 403.871990
Outstanding requests per worker:
625 743 705 645 670 715 697 664 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35471.8,      177359,     159496,      17863,     107251,      52245, 324.151012, 457.400000, 473.100000, 503.600000, 102.588916, 129.877999, 528.253973, 486.493624
Outstanding requests per worker:
2258 2336 2274 2331 2221 2392 2500 2280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36207.0,      181035,     162913,      18122,     116133,      46780, 615.943381, 714.300000, 725.800000, 747.500000,  73.343081, 466.675013, 769.448996, 533.338174
Outstanding requests per worker:
3502 3429 3466 3550 3464 3500 3643 3495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36547.8,      182739,     164380,      18359,     122127,      42253, 841.547534, 923.300000, 933.600000, 946.900000,  60.089127, 715.725005, 964.978993, 565.730326
Outstanding requests per worker:
4374 4452 4447 4524 4446 4464 4580 4520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36735.4,      183677,     165355,      18322,     125242,      40113, 1033.147420, 1100.600000, 1108.700000, 1129.300000,  52.390103, 915.700018, 1145.071030, 580.966321
Outstanding requests per worker:
5278 5366 5296 5283 5287 5280 5403 5425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36939.0,      184695,     166354,      18341,     127878,      38476, 1194.786145, 1257.700000, 1272.100000, 1299.000000,  46.608014, 1102.218032, 1315.686941, 595.324387
Outstanding requests per worker:
6058 6037 6015 5876 6102 5951 6134 6238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37060.2,      185301,     166691,      18610,     130199,      36492, 1338.224817, 1395.400000, 1409.800000, 1426.700000,  44.726354, 1229.401946, 1442.953944, 608.480710
Outstanding requests per worker:
6691 6643 6673 6566 6817 6632 6719 6860 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:50   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   19:50   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48192 pts/0    Sl+  19:50   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  19:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80640432      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1155672630      L1-dcache-loads:u                                           
         394896537      armv8_pmuv3_0/l2d_cache/:u                                   
         104218828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971155889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2102260224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009095.007519,       0.0,       70821,      63780,       7041,      38022,      25758,  84.328291, 151.400000, 160.000000, 173.000000,  47.849736,   0.000000, 185.957000, 405.198855
Outstanding requests per worker:
768 825 768 747 835 879 849 829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35888.4,      179442,     161423,      18019,     108418,      53005, 356.061031, 494.200000, 510.500000, 538.700000, 105.055515, 153.255999, 559.383988, 487.777014
Outstanding requests per worker:
2421 2644 2547 2476 2579 2694 2469 2480 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36549.6,      182748,     164470,      18278,     117881,      46589, 665.711811, 776.000000, 793.700000, 820.400000,  81.885576, 496.728987, 836.924016, 536.475576
Outstanding requests per worker:
3823 4029 3787 3885 3916 3996 3594 3789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36945.6,      184728,     166326,      18402,     122704,      43622, 912.999016, 1010.500000, 1028.700000, 1071.500000,  71.672037, 739.417017, 1095.486045, 560.901386
Outstanding requests per worker:
4828 5295 4930 5065 4870 5021 4608 4727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37181.0,      185905,     167223,      18682,     126713,      40510, 1113.686159, 1205.000000, 1228.300000, 1267.900000,  68.479557, 949.137986, 1276.942015, 582.391190
Outstanding requests per worker:
5670 6153 5852 5899 5843 6108 5591 5569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37248.2,      186241,     167693,      18548,     129146,      38547, 1294.438742, 1387.700000, 1425.600000, 1461.800000,  70.593831, 1124.513030, 1476.251006, 595.891200
Outstanding requests per worker:
6596 7127 6310 6588 6594 6994 6464 6444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37182.6,      185913,     167332,      18581,     130647,      36685, 1465.417925, 1574.600000, 1619.300000, 1676.500000,  81.621452, 1212.437987, 1698.233962, 608.145155
Outstanding requests per worker:
7318 8180 6651 6352 7434 7899 7311 7349 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:51   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:51   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50304 pts/0    Sl+  19:51   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79477387      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1163310257      L1-dcache-loads:u                                           
         394127914      armv8_pmuv3_0/l2d_cache/:u                                   
         102953451      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.680803309 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2682384896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2665935360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649485824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633036288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009144.007568,       0.0,       70805,      63702,       7103,      37998,      25704,  94.271603, 167.400000, 177.000000, 192.000000,  53.179528,   0.000000, 206.367999, 405.570987
Outstanding requests per worker:
862 918 881 946 873 842 951 997 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35995.2,      179976,     162069,      17907,     108724,      53345, 397.665527, 544.500000, 560.800000, 575.600000, 113.348693, 172.140002, 591.401994, 486.971876
Outstanding requests per worker:
2746 2740 2819 2878 2799 2814 2857 2776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37017.2,      185086,     166655,      18431,     119169,      47486, 708.284164, 804.000000, 824.600000, 844.000000,  73.076993, 559.481978, 862.617016, 534.939168
Outstanding requests per worker:
4094 3942 3987 4005 4172 4042 4131 3376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37332.2,      186661,     168056,      18605,     124161,      43895, 925.651910, 1020.600000, 1039.200000, 1078.700000,  73.453440, 676.366985, 1089.239955, 561.575987
Outstanding requests per worker:
5297 4982 5044 4646 5293 5055 5046 4047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37395.8,      186979,     168097,      18882,     127301,      40796, 1109.964495, 1230.800000, 1250.500000, 1283.100000, 107.705740, 718.433022, 1305.372953, 581.984753
Outstanding requests per worker:
6342 5518 5981 5466 6248 6131 6141 3875 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37117.0,      185585,     167115,      18470,     128631,      38484, 1271.222262, 1460.400000, 1491.000000, 1533.200000, 173.718468, 725.769997, 1560.839057, 594.846417
Outstanding requests per worker:
7600 5804 5695 5566 6891 7163 7391 4271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36716.6,      183583,     165136,      18447,     128986,      36150, 1405.451827, 1696.400000, 1751.400000, 1814.000000, 248.074672, 768.178999, 1862.115979, 608.871748
Outstanding requests per worker:
7621 5631 6467 6400 8033 7187 8247 3845 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:52   0:00 /usr/lib/linux
memcache      9 69.4  0.0 133568 49792 pts/0    Sl+  19:52   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79534484      L1-dcache-load-misses:u   # [33m   6.80%[m of all L1-dcache hits  
        1169892455      L1-dcache-loads:u                                           
         395263610      armv8_pmuv3_0/l2d_cache/:u                                   
         106766603      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.419330866 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2630939136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2614489600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2598040064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2581590528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565140992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009193.007617,       0.0,       70545,      63455,       7090,      37556,      25899, 112.203063, 199.500000, 209.800000, 226.100000,  63.329727,   0.000000, 242.860004, 400.934710
Outstanding requests per worker:
1178 1067 1086 1052 1079 1128 1055 1055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36465.0,      182325,     164060,      18265,     110075,      53985, 436.486936, 584.700000, 601.100000, 625.100000, 114.016509, 208.237007, 639.976978, 486.501426
Outstanding requests per worker:
3146 2966 3149 2969 3084 3149 3023 2926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37268.2,      186341,     167687,      18654,     120468,      47219, 765.256688, 880.500000, 898.100000, 929.800000,  85.296875, 569.889009, 960.532010, 538.884869
Outstanding requests per worker:
4576 4471 4509 4006 3953 4740 4425 4363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37145.2,      185726,     167305,      18421,     123988,      43317, 1014.776055, 1144.000000, 1174.900000, 1204.500000,  90.979160, 777.198017, 1246.299028, 564.717181
Outstanding requests per worker:
5011 5533 6003 4698 4207 4906 5902 5635 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36896.6,      184483,     165803,      18680,     125627,      40176, 1171.812348, 1406.600000, 1472.700000, 1537.100000, 174.757929, 781.336010, 1571.511030, 583.101940
Outstanding requests per worker:
4567 6257 7618 5484 4183 4876 7218 6337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36769.8,      183849,     165536,      18313,     127310,      38226, 1272.867412, 1647.800000, 1703.100000, 1797.200000, 243.050908, 843.656003, 1857.355952, 594.108273
Outstanding requests per worker:
4974 5603 7110 4763 4684 5846 8106 6362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36599.6,      182998,     164654,      18344,     128643,      36011, 1319.395175, 1661.200000, 1736.000000, 1802.300000, 228.708824, 928.065002, 1844.056010, 609.294259
Outstanding requests per worker:
5566 5924 6724 5734 5709 5882 8013 6651 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:53   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   19:53   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49152 pts/0    Sl+  19:53   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79952087      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1166549841      L1-dcache-loads:u                                           
         395411438      armv8_pmuv3_0/l2d_cache/:u                                   
         109490578      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980963018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2788946432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772496896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009241.007665,       0.0,       71326,      64339,       6987,      38383,      25956, 110.962854, 195.600000, 207.100000, 225.500000,  62.570466,   0.000000, 244.261995, 406.516467
Outstanding requests per worker:
1211 1067 1094 1064 1034 1015 1063 1153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36734.4,      183672,     165282,      18390,     110658,      54624, 438.495252, 591.600000, 610.400000, 631.900000, 118.787510, 199.382007, 644.829988, 484.989194
Outstanding requests per worker:
3209 3157 3021 3196 3021 3097 3200 3146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37687.2,      188436,     169498,      18938,     121374,      48124, 776.842380, 891.400000, 907.500000, 940.200000,  85.732066, 582.796991, 955.685019, 536.481091
Outstanding requests per worker:
4752 4641 4523 4617 4426 4509 4550 4606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37663.6,      188318,     169268,      19050,     125473,      43795, 1042.236953, 1160.300000, 1188.000000, 1227.900000,  84.185687, 851.966977, 1254.004955, 563.474402
Outstanding requests per worker:
6260 4961 4727 6057 5775 5561 6007 5307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37218.4,      186092,     167435,      18657,     126994,      40441, 1237.307666, 1432.400000, 1495.500000, 1585.800000, 143.020040, 889.388978, 1618.741989, 583.267483
Outstanding requests per worker:
8095 5497 5100 6091 7396 5348 7353 5397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36991.2,      184956,     166574,      18382,     128402,      38172, 1340.613451, 1684.500000, 1768.400000, 1873.700000, 225.152797, 931.096017, 1930.999994, 596.027735
Outstanding requests per worker:
8534 5280 4722 6067 7314 5379 7298 5689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36894.8,      184474,     165948,      18526,     129689,      36259, 1383.105000, 1783.000000, 1892.300000, 1971.000000, 232.372777, 984.030008, 2034.300089, 608.930767
Outstanding requests per worker:
9112 5493 5319 6769 7780 5432 7064 5718 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:54   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50048 pts/0    Sl+  19:54   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80543439      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1178371110      L1-dcache-loads:u                                           
         398025788      armv8_pmuv3_0/l2d_cache/:u                                   
         105407456      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190209796 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2144596480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2128146944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2111697408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2095247872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009290.007714,       0.0,       60160,      54153,       6007,      32052,      22101,   0.536475,   0.830100,   0.960100,   1.500000,   0.378999,   0.000000,   7.049000, 398.188484
Outstanding requests per worker:
3 2 2 3 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135267,      15117,      89651,      45616,   0.515755,   0.823100,   0.925100,   1.400000,   0.255873,   0.089000,   2.151000, 476.326288
Outstanding requests per worker:
2 6 3 2 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135237,      15147,      95526,      39711,   0.550454,   0.879100,   1.100000,   1.500000,   0.274958,   0.095000,   2.685000, 524.770115
Outstanding requests per worker:
2 2 2 1 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135244,      15145,      98803,      36441,   0.568555,   0.903100,   1.100000,   1.500000,   0.280962,   0.095000,   2.338000, 551.782245
Outstanding requests per worker:
4 3 3 3 3 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135293,      15093,     101055,      34238,   0.587261,   0.945100,   1.100000,   1.600000,   0.289768,   0.104000,   2.160000, 569.841359
Outstanding requests per worker:
2 7 2 1 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135394,      15000,     102822,      32572,   0.600378,   0.978100,   1.100000,   1.600000,   0.295595,   0.103000,   3.068000, 584.575779
Outstanding requests per worker:
5 1 1 3 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135253,      15136,     104178,      31075,   0.606058,   0.983100,   1.100000,   1.600000,   0.297980,   0.105000,   2.029000, 595.458933
Outstanding requests per worker:
2 5 2 2 3 2 2 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:55   0:00 /usr/lib/linux
memcache      9 72.6  0.0 127424 43392 pts/0    Sl+  19:55   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78352940      L1-dcache-load-misses:u   # [33m   8.56%[m of all L1-dcache hits  
         915464827      L1-dcache-loads:u                                           
         355612165      armv8_pmuv3_0/l2d_cache/:u                                   
          98856943      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730799719 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2314465792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298016256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009338.007762,       0.0,       61074,      55044,       6030,      32312,      22732,   0.599713,   0.972100,   1.100000,   1.500000,   0.296313,   0.000000,   2.520000, 396.113019
Outstanding requests per worker:
2 1 2 3 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137221,      15460,      90820,      46401,   0.616719,   0.988100,   1.100000,   1.600000,   0.301013,   0.103000,   2.470000, 478.386829
Outstanding requests per worker:
3 2 2 3 3 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137305,      15377,      96949,      40356,   0.633899,   1.100000,   1.200000,   1.600000,   0.309501,   0.105000,   2.541000, 525.177692
Outstanding requests per worker:
2 2 3 4 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137331,      15353,      99962,      37369,   0.659152,   1.100000,   1.200000,   1.700000,   0.322884,   0.106000,   2.492000, 548.808790
Outstanding requests per worker:
1 2 3 1 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137251,      15434,     102263,      34988,   0.668037,   1.100000,   1.200000,   1.700000,   0.327648,   0.124000,   3.049000, 569.608338
Outstanding requests per worker:
5 1 3 3 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137436,      15244,     104493,      32943,   0.673106,   1.100000,   1.200000,   1.800000,   0.328578,   0.111000,   3.338000, 583.178716
Outstanding requests per worker:
3 4 2 4 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137518,      15164,     105873,      31645,   0.680266,   1.100000,   1.200000,   1.800000,   0.328634,   0.110000,   3.588000, 595.822547
Outstanding requests per worker:
2 6 4 2 3 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   19:55   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 44928 pts/0    Sl+  19:55   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  19:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76348232      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
         934159882      L1-dcache-loads:u                                           
         351940106      armv8_pmuv3_0/l2d_cache/:u                                   
         100447958      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099237412 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2336485888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2320036352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2303586816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009387.007811,       0.0,       62016,      55813,       6203,      32825,      22988,   0.621261,   0.993100,   1.100000,   1.600000,   0.301038,   0.000000,   2.634000, 397.222457
Outstanding requests per worker:
4 1 4 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139753,      15292,      92890,      46863,   0.644513,   1.100000,   1.200000,   1.600000,   0.310514,   0.106000,   2.534000, 479.686690
Outstanding requests per worker:
1 6 1 3 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.4,      155042,     139358,      15684,      98390,      40968,   0.667298,   1.100000,   1.200000,   1.700000,   0.324368,   0.103000,   2.290000, 525.595610
Outstanding requests per worker:
2 7 3 4 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139662,      15386,     101991,      37671,   0.681897,   1.100000,   1.300000,   1.800000,   0.332443,   0.116000,   2.511000, 552.780449
Outstanding requests per worker:
3 3 3 2 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139599,      15446,     104548,      35051,   0.695512,   1.200000,   1.300000,   1.800000,   0.339986,   0.115000,   2.410000, 572.153225
Outstanding requests per worker:
2 7 2 4 2 0 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139532,      15513,     106237,      33295,   0.701798,   1.200000,   1.300000,   1.800000,   0.343361,   0.115000,   2.848000, 586.241651
Outstanding requests per worker:
2 3 2 4 3 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139518,      15530,     107616,      31902,   0.700048,   1.200000,   1.300000,   1.800000,   0.344384,   0.114000,   2.687000, 598.131768
Outstanding requests per worker:
4 1 1 3 2 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:56   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   19:56   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 45888 pts/0    Sl+  19:56   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77749913      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
         949918929      L1-dcache-loads:u                                           
         355300542      armv8_pmuv3_0/l2d_cache/:u                                   
          93990483      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069934504 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2507469312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009435.007859,       0.0,       63239,      56870,       6369,      33938,      22932,   0.722404,   1.200000,   1.300000,   1.800000,   0.347766,   0.000000,   2.765000, 404.638421
Outstanding requests per worker:
1 4 3 2 2 1 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142194,      15919,      94498,      47696,   0.749642,   1.300000,   1.300000,   1.800000,   0.357434,   0.126000,   2.774000, 480.607895
Outstanding requests per worker:
4 3 2 1 4 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142474,      15646,     100941,      41533,   0.780696,   1.300000,   1.400000,   1.900000,   0.372981,   0.124000,   2.854000, 528.439708
Outstanding requests per worker:
2 4 4 4 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142179,      15937,     104106,      38073,   0.809688,   1.400000,   1.500000,   2.000000,   0.387586,   0.127000,   3.131000, 553.687176
Outstanding requests per worker:
5 3 1 2 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142306,      15808,     106584,      35722,   0.821197,   1.400000,   1.500000,   2.000000,   0.393384,   0.126000,   2.902000, 572.694250
Outstanding requests per worker:
2 5 5 4 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142393,      15718,     108319,      34074,   0.841232,   1.400000,   1.500000,   2.000000,   0.403143,   0.137000,   4.043000, 586.317221
Outstanding requests per worker:
5 3 2 3 5 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142490,      15630,     110052,      32438,   0.858762,   1.400000,   1.500000,   2.100000,   0.411867,   0.134000,   2.959000, 598.335610
Outstanding requests per worker:
5 3 2 0 5 5 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:57   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   19:57   0:00 /usr/lib/linux
memcache     10 71.0  0.0 128448 43968 pts/0    Sl+  19:57   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76604260      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
         971032932      L1-dcache-loads:u                                           
         354408556      armv8_pmuv3_0/l2d_cache/:u                                   
          97039383      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000317598 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2823877120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2807427584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790978048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2774528512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009484.007908,       0.0,       63998,      57697,       6301,      34041,      23656,   0.730406,   1.200000,   1.300000,   1.800000,   0.348288,   0.000000,   2.651000, 398.665182
Outstanding requests per worker:
2 4 3 2 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143952,      16060,      95587,      48365,   0.769320,   1.300000,   1.400000,   1.900000,   0.367597,   0.124000,   2.671000, 479.745492
Outstanding requests per worker:
4 4 2 3 4 2 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.8,      160019,     143923,      16096,     101956,      41967,   0.803130,   1.300000,   1.500000,   2.000000,   0.387677,   0.132000,   3.352000, 527.523697
Outstanding requests per worker:
4 5 2 3 2 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.8,      160019,     143942,      16077,     105489,      38453,   0.820606,   1.400000,   1.500000,   2.000000,   0.394760,   0.132000,   3.138000, 554.067805
Outstanding requests per worker:
4 3 3 3 4 1 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143870,      16138,     108061,      35809,   0.846285,   1.400000,   1.500000,   2.100000,   0.406410,   0.130000,   2.913000, 574.087579
Outstanding requests per worker:
3 3 5 2 4 5 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143892,      16121,     109763,      34129,   0.859850,   1.400000,   1.500000,   2.100000,   0.412668,   0.138000,   3.077000, 587.226878
Outstanding requests per worker:
2 1 5 6 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143977,      16035,     111083,      32894,   0.882014,   1.500000,   1.600000,   2.100000,   0.420175,   0.146000,   3.457000, 596.413073
Outstanding requests per worker:
2 1 5 7 3 6 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:58   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   19:58   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 45504 pts/0    Sl+  19:58   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78231282      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
         983905841      L1-dcache-loads:u                                           
         359731286      armv8_pmuv3_0/l2d_cache/:u                                   
         101638542      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210621623 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2959995392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2943545856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2927096320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910646784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894197248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009532.007956,       0.0,       65035,      58368,       6667,      34433,      23935,   0.802631,   1.300000,   1.400000,   1.900000,   0.380875,   0.000000,   3.006000, 400.582151
Outstanding requests per worker:
3 5 5 6 2 1 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.4,      162622,     146214,      16408,      97685,      48529,   0.847989,   1.400000,   1.500000,   2.000000,   0.403873,   0.145000,   3.341000, 483.477232
Outstanding requests per worker:
7 4 4 1 2 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.8,      162619,     146331,      16288,     104324,      42007,   0.875545,   1.500000,   1.600000,   2.000000,   0.413975,   0.142000,   3.064000, 531.642331
Outstanding requests per worker:
4 5 6 2 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146199,      16409,     107381,      38818,   0.899644,   1.500000,   1.600000,   2.100000,   0.423474,   0.146000,   2.976000, 556.384284
Outstanding requests per worker:
7 5 2 3 5 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146284,      16323,     109977,      36307,   0.912395,   1.500000,   1.600000,   2.100000,   0.428567,   0.155000,   3.092000, 575.791262
Outstanding requests per worker:
6 8 2 3 6 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.8,      162619,     146453,      16166,     111867,      34586,   0.933260,   1.600000,   1.700000,   2.000000,   0.436439,   0.153000,   3.750000, 589.283504
Outstanding requests per worker:
5 7 1 4 6 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146532,      16083,     113789,      32743,   0.945320,   1.600000,   1.700000,   2.000000,   0.439917,   0.153000,   3.158000, 603.363907
Outstanding requests per worker:
4 3 4 6 2 3 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:59   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   19:59   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 46080 pts/0    Sl+  19:59   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  19:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76799947      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        1003472410      L1-dcache-loads:u                                           
         360240898      armv8_pmuv3_0/l2d_cache/:u                                   
          97861804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980108341 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2535191040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2518741504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2502291968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009581.008005,       0.0,       66039,      59435,       6604,      35259,      24176,   0.914466,   1.500000,   1.600000,   2.100000,   0.429758,   0.000000,   3.375000, 402.219618
Outstanding requests per worker:
5 5 3 7 2 2 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.2,      165311,     148796,      16515,      99248,      49548,   0.952362,   1.600000,   1.700000,   2.000000,   0.442746,   0.157000,   3.612000, 481.984314
Outstanding requests per worker:
6 3 2 5 6 7 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148694,      16606,     105869,      42825,   0.985038,   1.600000,   1.700000,   2.000000,   0.455443,   0.163000,   3.323000, 530.414623
Outstanding requests per worker:
6 2 4 3 4 5 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148691,      16608,     109224,      39467,   1.023108,   1.700000,   1.800000,   2.000000,   0.469122,   0.162000,   3.353000, 557.675703
Outstanding requests per worker:
5 7 6 2 3 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148561,      16740,     111649,      36912,   1.039729,   1.700000,   1.800000,   2.100000,   0.477715,   0.159000,   3.412000, 574.544106
Outstanding requests per worker:
5 6 5 7 4 2 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.6,      165313,     148852,      16461,     113831,      35021,   1.063677,   1.800000,   1.900000,   2.100000,   0.488196,   0.164000,   4.626000, 590.834218
Outstanding requests per worker:
2 4 3 6 7 2 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148809,      16490,     115535,      33274,   1.073569,   1.800000,   1.900000,   2.100000,   0.491554,   0.162000,   3.476000, 602.039104
Outstanding requests per worker:
3 7 3 5 6 7 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:59   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   19:59   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 46144 pts/0    Sl+  19:59   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  20:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76885926      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        1019668165      L1-dcache-loads:u                                           
         362517089      armv8_pmuv3_0/l2d_cache/:u                                   
         103878251      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070782456 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3084448256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3067998720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3051549184
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035099648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009629.008053,       0.0,       67212,      60590,       6622,      35723,      24867,   1.046555,   1.700000,   1.800000,   2.100000,   0.477611,   0.000000,   4.167000, 399.279271
Outstanding requests per worker:
2 5 3 4 7 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151292,      16790,     100704,      50588,   1.081972,   1.800000,   1.900000,   2.100000,   0.491313,   0.181000,   3.993000, 483.087784
Outstanding requests per worker:
2 13 2 3 5 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151311,      16765,     107567,      43744,   1.137108,   1.900000,   2.000000,   2.200000,   0.515013,   0.180000,   3.645000, 530.391287
Outstanding requests per worker:
3 7 8 4 7 1 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.2,      168081,     151033,      17048,     111034,      39999,   1.182912,   2.000000,   2.100000,   2.300000,   0.534686,   0.190000,   3.460000, 557.247840
Outstanding requests per worker:
7 5 4 8 3 5 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151255,      16824,     113788,      37467,   1.199990,   2.000000,   2.100000,   2.300000,   0.542605,   0.204000,   3.633000, 575.407385
Outstanding requests per worker:
6 3 2 6 5 5 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.6,      168088,     151277,      16811,     115581,      35696,   1.247730,   2.000000,   2.200000,   2.500000,   0.574870,   0.205000,   3.996000, 589.082656
Outstanding requests per worker:
7 4 3 7 2 6 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.4,      168072,     151190,      16882,     116881,      34309,   1.264251,   2.100000,   2.200000,   2.600000,   0.581050,   0.212000,   4.237000, 599.723480
Outstanding requests per worker:
3 9 9 4 8 2 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:00   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:00   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 48000 pts/0    Sl+  20:00   0:31 memcached -t 1
memcache     19  2.0  0.0   6656  4352 pts/1    Rs+  20:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77959306      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        1039312898      L1-dcache-loads:u                                           
         365161058      armv8_pmuv3_0/l2d_cache/:u                                   
          98168285      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.059980815 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2739073536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2722624000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2706174464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009677.008101,       0.0,       68070,      61296,       6774,      36329,      24967,   1.125079,   1.900000,   2.000000,   2.200000,   0.508608,   0.000000,   3.316000, 400.457942
Outstanding requests per worker:
8 7 2 6 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.2,      170226,     153292,      16934,     102367,      50925,   1.177247,   2.000000,   2.100000,   2.200000,   0.528479,   0.195000,   3.560000, 483.376425
Outstanding requests per worker:
5 4 7 3 8 8 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.2,      170216,     153253,      16963,     109343,      43910,   1.247823,   2.100000,   2.200000,   2.400000,   0.565499,   0.220000,   3.680000, 533.782875
Outstanding requests per worker:
4 4 7 9 10 8 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.6,      170233,     153320,      16913,     112791,      40529,   1.269626,   2.100000,   2.200000,   2.500000,   0.578580,   0.214000,   3.617000, 559.256574
Outstanding requests per worker:
3 3 5 8 6 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.4,      170232,     153044,      17188,     115400,      37644,   1.395342,   2.300000,   2.500000,   2.800000,   0.638359,   0.260000,   3.705000, 578.199439
Outstanding requests per worker:
3 2 5 8 7 6 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.6,      170228,     153246,      16982,     117207,      36039,   1.514052,   2.500000,   2.700000,   3.100000,   0.702928,   0.261000,   4.177000, 591.449787
Outstanding requests per worker:
3 4 5 9 7 7 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.0,      170215,     153200,      17015,     119107,      34093,   1.541208,   2.500000,   2.800000,   3.400000,   0.755214,   0.261000,   8.034000, 604.751939
Outstanding requests per worker:
6 2 8 10 11 9 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:01   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:01   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 46976 pts/0    Sl+  20:01   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77487626      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        1053373649      L1-dcache-loads:u                                           
         365555080      armv8_pmuv3_0/l2d_cache/:u                                   
          97053955      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120520837 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2666066432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649616896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633167360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009726.008150,       0.0,       69237,      62255,       6982,      36777,      25478,   1.447464,   2.400000,   2.600000,   2.900000,   0.661931,   0.000000,   3.596000, 398.790651
Outstanding requests per worker:
3 7 5 9 10 8 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34622.0,      173110,     155939,      17171,     104684,      51255,   2.022445,   3.300000,   4.200000,   6.500000,   1.194694,   0.269000,   9.288000, 486.745926
Outstanding requests per worker:
14 4 11 12 6 22 16 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34587.2,      172936,     155424,      17512,     111050,      44374,   7.917238,  11.800000,  12.300000,  13.100000,   3.241705,   0.413000,  18.645000, 535.375071
Outstanding requests per worker:
51 54 48 45 45 43 41 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34615.0,      173075,     155589,      17486,     114703,      40886,  11.542565,  14.700000,  15.300000,  16.400000,   2.648675,   1.787000,  19.060999, 559.516984
Outstanding requests per worker:
67 70 64 64 28 62 40 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34634.6,      173173,     155726,      17447,     117577,      38149,  13.088720,  15.700000,  16.200000,  17.400000,   2.646221,   1.934000,  19.803001, 579.435053
Outstanding requests per worker:
54 57 51 59 52 53 63 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34626.8,      173134,     155791,      17343,     119287,      36504,  14.498134,  16.700000,  17.200000,  18.600000,   1.732675,   7.052000,  21.291999, 591.227459
Outstanding requests per worker:
65 68 62 70 56 59 53 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34607.2,      173036,     155719,      17317,     121030,      34689,  15.738353,  19.400000,  20.200000,  21.200000,   2.619189,   3.993000,  22.793001, 604.014391
Outstanding requests per worker:
76 78 66 82 91 87 69 78 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:02   0:00 /usr/lib/linux
memcache      8 72.6  0.0 132544 48832 pts/0    Sl+  20:02   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  20:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77064571      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1100941625      L1-dcache-loads:u                                           
         379370833      armv8_pmuv3_0/l2d_cache/:u                                   
         111004333      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871459562 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2905272832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009774.008198,       0.0,       70136,      63117,       7019,      37134,      25983,   1.544169,   2.600000,   2.800000,   3.100000,   0.715499,   0.000000,   3.611000, 399.560626
Outstanding requests per worker:
7 4 3 9 5 12 13 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35040.8,      175204,     157496,      17708,     105640,      51856,   4.629157,   9.700000,  10.900000,  12.200000,   3.237725,   0.303000,  16.757000, 486.110092
Outstanding requests per worker:
47 42 24 50 44 26 40 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35081.6,      175408,     157841,      17567,     112461,      45380,   9.123402,  11.500000,  12.000000,  12.900000,   1.968171,   2.254000,  15.490000, 532.554058
Outstanding requests per worker:
48 43 51 51 45 34 40 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35064.6,      175323,     157997,      17326,     116325,      41672,  11.851587,  17.600000,  19.200000,  21.600000,   3.371866,   5.674000,  25.970999, 558.952328
Outstanding requests per worker:
61 50 43 100 48 92 32 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35078.2,      175391,     157684,      17707,     119318,      38366,  14.395164,  16.700000,  17.500000,  21.400000,   2.283762,   5.526000,  26.532000, 579.649673
Outstanding requests per worker:
73 57 59 70 65 74 67 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35067.4,      175337,     157725,      17612,     121221,      36504,  17.021130,  19.600000,  20.000000,  20.600000,   2.043520,   8.732000,  21.692000, 593.919803
Outstanding requests per worker:
80 64 84 93 90 78 61 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35033.0,      175165,     157674,      17491,     122821,      34853,  21.244760,  31.800000,  37.000000,  42.000000,   6.003051,  12.206000,  48.198000, 606.026479
Outstanding requests per worker:
91 173 78 178 88 95 88 129 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:03   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48192 pts/0    Sl+  20:03   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  20:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78946723      L1-dcache-load-misses:u   # [33m   7.08%[m of all L1-dcache hits  
        1114612785      L1-dcache-loads:u                                           
         382475987      armv8_pmuv3_0/l2d_cache/:u                                   
         102652798      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830345618 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2209018368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192568832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176119296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159669760
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009823.008247,       0.0,       70411,      63403,       7008,      37830,      25573,  14.185718,  19.800000,  20.600000,  22.900000,   5.252533,   0.000000,  31.246001, 405.141271
Outstanding requests per worker:
95 79 114 82 85 91 88 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35228.8,      176144,     158608,      17536,     106593,      52015,  39.470442,  90.900000, 113.500000, 134.400000,  32.071106,  13.526000, 143.204004, 487.653057
Outstanding requests per worker:
208 68 615 417 71 568 167 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34929.2,      174646,     157273,      17373,     112509,      44764, 109.035050, 187.900000, 218.000000, 259.100000,  56.958331,  13.683000, 270.249993, 535.027754
Outstanding requests per worker:
490 424 1191 851 413 919 652 572 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34770.2,      173851,     156287,      17564,     115206,      41081, 208.843980, 313.700000, 361.100000, 412.000000,  74.762564,  89.951999, 427.996993, 560.642114
Outstanding requests per worker:
841 774 1876 1436 998 1405 1112 1004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34719.6,      173598,     155857,      17741,     117292,      38565, 324.617396, 458.700000, 500.800000, 528.500000,  88.428007, 172.299996, 538.906991, 577.399392
Outstanding requests per worker:
1306 1346 2370 1986 1451 2052 1641 1487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34756.2,      173781,     156369,      17412,     120006,      36363, 441.121985, 572.600000, 608.600000, 652.500000,  91.360359, 284.539014, 664.238989, 593.242100
Outstanding requests per worker:
1766 1864 2922 2569 2012 2523 2017 1970 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34828.8,      174144,     156632,      17512,     121861,      34771, 549.385706, 684.600000, 700.300000, 735.600000,  91.547866, 391.270012, 748.510003, 604.068262
Outstanding requests per worker:
2248 2214 3313 3090 2488 3021 2464 2452 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:03   0:00 /usr/lib/linux
memcache      8 72.6  0.0 132544 47168 pts/0    Sl+  20:03   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77617584      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1105623412      L1-dcache-loads:u                                           
         378218170      armv8_pmuv3_0/l2d_cache/:u                                   
         104772640      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.510386150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2797072896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2780623360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764173824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009872.008296,       0.0,       71168,      64102,       7066,      38208,      25894,  16.019340,  27.100000,  31.000000,  35.000000,   7.550963,   0.000000,  40.378001, 405.714892
Outstanding requests per worker:
156 85 71 147 94 85 141 152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35380.6,      176903,     159308,      17595,     107080,      52228,  65.902990, 127.700000, 140.600000, 152.000000,  39.498777,  13.258000, 167.901993, 487.787569
Outstanding requests per worker:
747 351 341 649 667 273 603 596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35104.6,      175523,     158017,      17506,     113155,      44862, 178.689206, 253.800000, 267.500000, 290.200000,  54.095926,  59.873998, 302.680999, 535.823785
Outstanding requests per worker:
1333 836 939 1248 1270 932 1252 1092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35033.0,      175165,     157575,      17590,     116421,      41154, 317.499690, 389.200000, 411.100000, 431.200000,  55.764115, 179.675996, 446.067005, 561.510221
Outstanding requests per worker:
1984 1466 1649 1783 1780 1610 1901 1759 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35119.8,      175599,     157910,      17689,     119105,      38805, 452.608352, 518.300000, 543.100000, 563.600000,  50.814532, 324.620008, 578.724980, 580.516180
Outstanding requests per worker:
2531 2061 2263 2381 2269 2119 2590 2310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35244.8,      176224,     158516,      17708,     121829,      36687, 570.556522, 632.100000, 646.500000, 656.200000,  46.975750, 448.810011, 669.619024, 594.292153
Outstanding requests per worker:
2925 2586 2721 2821 2869 2630 3009 2938 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35333.8,      176669,     158975,      17694,     124127,      34848, 672.316709, 730.700000, 737.700000, 746.400000,  42.934192, 566.851974, 755.795002, 606.228243
Outstanding requests per worker:
3333 3057 3174 3269 3379 3047 3374 3385 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:04   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   20:04   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49216 pts/0    Sl+  20:04   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77385106      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1117797638      L1-dcache-loads:u                                           
         380500201      armv8_pmuv3_0/l2d_cache/:u                                   
         103911932      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010885546 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3172528640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3087004160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070554624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054105088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037655552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
Created 8 connections total
Creating worker on tid 2785669632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009920.008344,       0.0,       70901,      63870,       7031,      37789,      26081,  31.328991,  54.800000,  62.900000,  75.800000,  17.603976,   0.000000,  84.173001, 401.883560
Outstanding requests per worker:
234 369 266 251 347 196 276 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35174.8,      175874,     158340,      17534,     106522,      51818, 151.244562, 227.400000, 238.500000, 253.200000,  55.724644,  39.907999, 266.829014, 487.955185
Outstanding requests per worker:
1038 1155 1192 1186 1135 1107 1133 1034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35163.6,      175818,     158064,      17754,     113004,      45060, 342.330333, 417.100000, 427.400000, 440.700000,  55.812178, 220.947996, 453.723997, 534.591653
Outstanding requests per worker:
1885 2056 2044 1978 1969 2008 1970 1923 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35319.0,      176595,     158842,      17753,     117220,      41622, 520.006735, 588.900000, 599.900000, 610.800000,  50.994482, 412.788987, 630.029976, 561.456869
Outstanding requests per worker:
2666 2793 2847 2745 2755 2675 2655 2774 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35465.0,      177325,     159480,      17845,     120331,      39149, 673.456350, 737.500000, 750.700000, 767.400000,  46.072721, 573.947012, 778.343976, 579.350834
Outstanding requests per worker:
3170 3512 3509 3396 3343 3442 3338 3537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35544.4,      177722,     159880,      17842,     122673,      37207, 814.529693, 876.900000, 887.300000, 902.500000,  47.005593, 686.686993, 911.695004, 593.751920
Outstanding requests per worker:
3808 4150 4141 4013 3944 4083 3929 4119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35714.4,      178572,     160708,      17864,     124847,      35861, 937.876706, 1000.000000, 1018.000000, 1035.600000,  45.188434, 830.442011, 1049.829960, 605.390161
Outstanding requests per worker:
4308 4775 4527 4482 4612 4567 4305 4707 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:05   0:00 /usr/lib/linux
memcache      9 72.6  0.0 133568 49152 pts/0    Sl+  20:05   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  20:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79177269      L1-dcache-load-misses:u   # [33m   7.06%[m of all L1-dcache hits  
        1122044100      L1-dcache-loads:u                                           
         383140496      armv8_pmuv3_0/l2d_cache/:u                                   
         105524831      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800455863 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2686185984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2669736448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653286912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2636837376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576009969.008393,       0.0,       71031,      63966,       7065,      38172,      25794,  43.080682,  74.300000,  80.400000,  90.000000,  22.703587,   0.000000,  98.162003, 405.561001
Outstanding requests per worker:
325 394 366 326 357 414 438 446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35251.8,      176259,     158592,      17667,     106657,      51935, 202.539969, 300.500000, 313.800000, 331.900000,  72.336338,  65.794997, 342.664987, 489.035613
Outstanding requests per worker:
1452 1575 1456 1461 1467 1550 1472 1576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35486.6,      177433,     159669,      17764,     114035,      45634, 433.364047, 515.600000, 528.100000, 537.700000,  62.576743, 310.306996, 558.456004, 534.748906
Outstanding requests per worker:
2459 2466 2488 2376 2491 2519 2403 2569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35812.6,      179063,     161189,      17874,     119053,      42136, 617.500818, 684.600000, 699.400000, 733.900000,  51.357350, 509.742975, 751.860976, 560.701382
Outstanding requests per worker:
3136 3243 3243 3120 3159 3449 3202 3357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36003.6,      180018,     161989,      18029,     122154,      39835, 770.899787, 834.700000, 844.900000, 867.900000,  46.860435, 666.674972, 876.376987, 578.746217
Outstanding requests per worker:
3863 3931 3922 3725 3754 4028 3866 3998 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36081.6,      180408,     162431,      17977,     124791,      37640, 904.460758, 968.500000, 985.700000, 1006.500000,  47.343879, 801.952004, 1014.646053, 594.168736
Outstanding requests per worker:
4595 4480 4503 4301 4231 4676 4415 4685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36175.6,      180878,     162721,      18157,     126646,      36075, 1027.744697, 1086.900000, 1101.200000, 1133.900000,  46.379292, 910.422981, 1150.396943, 604.986732
Outstanding requests per worker:
5038 5049 5076 4846 4873 5113 4909 5299 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:06   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48192 pts/0    Sl+  20:06   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77845524      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1136707417      L1-dcache-loads:u                                           
         386347988      armv8_pmuv3_0/l2d_cache/:u                                   
         106328570      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949836252 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2313548288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297098752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010017.008441,       0.0,       71949,      64775,       7174,      38890,      25885,  43.408846,  75.500000,  82.600000,  91.000000,  23.600855,   0.000000,  98.108999, 408.619822
Outstanding requests per worker:
438 450 400 372 394 375 428 347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35709.0,      178545,     160710,      17835,     107787,      52923, 207.679896, 307.800000, 319.000000, 335.200000,  72.776093,  72.319001, 354.151994, 486.852386
Outstanding requests per worker:
1593 1500 1557 1566 1655 1487 1538 1566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35898.0,      179490,     161788,      17702,     116001,      45787, 447.958283, 535.100000, 548.200000, 580.200000,  66.191189, 316.545010, 601.791024, 536.692134
Outstanding requests per worker:
2568 2514 2615 2468 2653 2581 2806 2575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36158.2,      180791,     162587,      18204,     120556,      42031, 646.740105, 726.500000, 738.900000, 762.600000,  58.234732, 516.659975, 772.239983, 563.273097
Outstanding requests per worker:
3517 3391 3535 3306 3479 3458 3593 3524 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36367.2,      181836,     163420,      18416,     123694,      39726, 821.875751, 892.000000, 903.300000, 911.600000,  51.553493, 698.451996, 922.706008, 581.301040
Outstanding requests per worker:
4279 4155 4287 4004 4206 4279 4257 4316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36525.2,      182626,     164354,      18272,     126329,      38025, 968.680889, 1026.200000, 1035.900000, 1045.500000,  42.809269, 838.301003, 1053.820014, 594.664200
Outstanding requests per worker:
4892 4919 4898 4720 4831 4848 4924 4926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36640.6,      183203,     164838,      18365,     128687,      36151, 1099.087022, 1157.900000, 1168.400000, 1192.100000,  41.532184, 996.245980, 1199.112058, 607.923816
Outstanding requests per worker:
5500 5483 5314 5274 5457 5331 5609 5594 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:07   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   20:07   0:00 /usr/lib/linux
memcache     12 71.0  0.0 133568 50368 pts/0    Sl+  20:07   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  20:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79048164      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1149820481      L1-dcache-loads:u                                           
         390243581      armv8_pmuv3_0/l2d_cache/:u                                   
         101944003      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.142068083 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2266624512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2250174976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2233725440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010066.008490,       0.0,       71658,      64553,       7105,      38308,      26245,  60.512780, 107.900000, 114.200000, 121.500000,  33.539995,   0.000000, 127.724007, 402.186002
Outstanding requests per worker:
550 583 587 604 531 523 592 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35868.8,      179344,     161698,      17646,     107988,      53710, 271.455250, 386.800000, 402.200000, 428.800000,  86.846098, 107.554004, 456.288010, 483.395608
Outstanding requests per worker:
2019 2034 1846 2161 1899 1894 1958 1894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36237.0,      181185,     162932,      18253,     115950,      46982, 539.339632, 635.300000, 662.800000, 693.700000,  75.196248, 382.418007, 712.916017, 532.170955
Outstanding requests per worker:
3168 3270 2939 3375 3218 3008 3026 3011 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36602.6,      183013,     164826,      18187,     121316,      43510, 757.948441, 850.000000, 869.700000, 902.300000,  67.550737, 612.856984, 925.547004, 559.286296
Outstanding requests per worker:
4112 4393 3843 4267 4185 3875 3894 3924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36771.8,      183859,     165282,      18577,     124643,      40639, 940.567105, 1026.200000, 1046.100000, 1076.900000,  63.675183, 784.994006, 1096.369982, 578.852676
Outstanding requests per worker:
4982 5209 4657 5021 4964 4730 4791 4780 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36874.0,      184370,     166117,      18253,     127352,      38765, 1110.074441, 1191.000000, 1210.100000, 1242.100000,  61.439459, 978.354990, 1253.175020, 592.492237
Outstanding requests per worker:
5703 5935 5545 5968 5656 5509 5470 5466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37065.2,      185326,     166940,      18386,     129938,      37002, 1255.853778, 1324.600000, 1352.800000, 1379.100000,  54.405432, 1143.322945, 1393.038988, 605.299239
Outstanding requests per worker:
6331 6625 6227 6540 6242 6150 6141 6157 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:07   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:07   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50176 pts/0    Sl+  20:07   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80775691      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1156289388      L1-dcache-loads:u                                           
         394833172      armv8_pmuv3_0/l2d_cache/:u                                   
         102636996      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980031752 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3110728192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010114.008538,       0.0,       70946,      63865,       7081,      37987,      25878,  82.277510, 147.300000, 156.800000, 169.200000,  46.888485,   0.000000, 181.672007, 404.809207
Outstanding requests per worker:
746 747 820 756 860 841 762 844 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35938.8,      179694,     161727,      17967,     109131,      52596, 352.300903, 485.400000, 499.700000, 526.600000, 101.287254, 152.221993, 556.289017, 490.501691
Outstanding requests per worker:
2469 2477 2463 2515 2668 2429 2473 2436 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36631.6,      183158,     164861,      18297,     118048,      46813, 650.737530, 753.800000, 767.600000, 790.000000,  76.622434, 500.744998, 809.270024, 536.057897
Outstanding requests per worker:
3681 3744 3698 3662 3885 3637 3734 3866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36850.6,      184253,     165832,      18421,     122593,      43239, 883.296741, 980.100000, 1001.100000, 1042.400000,  70.967714, 722.039998, 1065.631986, 563.220977
Outstanding requests per worker:
4843 4890 4759 4048 5137 4777 4774 4937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37009.0,      185045,     166474,      18571,     125957,      40517, 1072.176489, 1198.600000, 1215.500000, 1273.800000, 110.736806, 712.571979, 1295.799971, 581.937726
Outstanding requests per worker:
5900 5899 4530 4634 6237 5779 5841 5888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37193.8,      185969,     167555,      18414,     129127,      38428, 1227.652867, 1393.300000, 1408.600000, 1461.200000, 175.687751, 749.108016, 1476.385951, 597.122945
Outstanding requests per worker:
6866 6838 4507 3940 7112 6794 6670 6715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37233.4,      186167,     167482,      18685,     130764,      36718, 1374.766384, 1571.800000, 1599.400000, 1657.900000, 236.947226, 801.631987, 1677.147985, 608.183787
Outstanding requests per worker:
7673 7768 5017 5163 8081 7705 7577 7574 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:08   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:08   0:00 /usr/lib/linux
memcache     11 72.6  0.0 133568 50176 pts/0    Sl+  20:08   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80902330      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1167475927      L1-dcache-loads:u                                           
         397705446      armv8_pmuv3_0/l2d_cache/:u                                   
         109029651      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940349051 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2893935104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877485568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861036032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844586496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828136960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010162.008586,       0.0,       71118,      63967,       7151,      38089,      25878,  90.277546, 160.200000, 169.800000, 183.700000,  50.797008,   0.000000, 196.668997, 406.774055
Outstanding requests per worker:
894 846 853 861 964 870 798 870 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36189.2,      180946,     162864,      18082,     109673,      53191, 374.458755, 511.200000, 527.000000, 550.600000, 104.290840, 160.576999, 575.797021, 490.142598
Outstanding requests per worker:
2778 2729 2616 2688 2652 2518 2572 2594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36919.4,      184597,     166301,      18296,     119413,      46888, 684.389858, 788.600000, 805.100000, 834.800000,  80.922088, 515.191019, 853.859007, 537.469733
Outstanding requests per worker:
4139 4070 4027 3943 3868 3780 3938 3923 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37276.0,      186380,     167970,      18410,     124174,      43796, 924.768420, 1017.100000, 1034.400000, 1058.000000,  68.938721, 772.628009, 1073.771000, 561.262737
Outstanding requests per worker:
5216 5163 5142 5016 4845 4887 5067 4999 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37318.6,      186593,     167823,      18770,     127072,      40751, 1131.680039, 1227.000000, 1249.200000, 1271.600000,  69.853430, 929.795027, 1292.080045, 580.453251
Outstanding requests per worker:
6283 5700 6172 6184 5921 5826 6185 5491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37415.0,      187075,     168599,      18476,     129688,      38911, 1302.218656, 1431.800000, 1451.100000, 1481.400000, 115.168635, 976.980984, 1492.570996, 595.544790
Outstanding requests per worker:
7259 5466 6990 7254 7068 6963 7135 5683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37505.4,      187527,     168647,      18880,     131739,      36908, 1454.116188, 1628.900000, 1651.800000, 1676.600000, 180.136549, 982.179999, 1703.062057, 608.196725
Outstanding requests per worker:
8288 5423 7875 8171 8062 7851 8141 5219 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:09   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50240 pts/0    Sl+  20:09   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80580070      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1176674273      L1-dcache-loads:u                                           
         398952103      armv8_pmuv3_0/l2d_cache/:u                                   
         106398025      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080187818 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3131109888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3114660352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098210816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010211.008635,       0.0,       70339,      63177,       7162,      37412,      25765, 114.468619, 203.100000, 213.600000, 225.800000,  64.527471,   0.000000, 237.036005, 401.671779
Outstanding requests per worker:
1060 1118 1083 1084 1130 1134 1152 1137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36303.0,      181515,     163415,      18100,     110056,      53359, 450.620422, 606.600000, 627.600000, 649.200000, 119.647068, 211.575001, 676.909983, 490.467925
Outstanding requests per worker:
3015 3162 3199 3148 3105 3337 3229 3226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37231.2,      186156,     167419,      18737,     119834,      47585, 785.828725, 902.600000, 920.800000, 947.200000,  85.110555, 602.311015, 997.444987, 536.612553
Outstanding requests per worker:
4542 4052 4106 4588 4616 4302 4675 4472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36976.4,      184882,     166654,      18228,     123202,      43452, 1028.992187, 1194.700000, 1230.500000, 1268.200000, 111.540406, 756.393015, 1290.691972, 562.857357
Outstanding requests per worker:
5871 4699 4490 6369 6361 4231 6310 5249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36628.6,      183143,     164682,      18461,     124631,      40051, 1183.012711, 1447.100000, 1488.500000, 1546.400000, 210.963188, 780.511975, 1599.959016, 581.772076
Outstanding requests per worker:
6751 4154 5034 6613 6531 4973 7118 4560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36497.8,      182489,     164486,      18003,     126695,      37791, 1233.700538, 1526.600000, 1558.400000, 1590.300000, 225.603782, 820.236027, 1627.985001, 595.748757
Outstanding requests per worker:
6636 4836 4667 5972 6073 5290 6826 5465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36449.2,      182246,     163957,      18289,     128160,      35797, 1252.067500, 1526.400000, 1557.100000, 1592.300000, 210.805078, 817.323029, 1635.149956, 607.321298
Outstanding requests per worker:
7113 4674 5543 6655 6708 4904 6257 5751 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:10   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:10   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49664 pts/0    Sl+  20:10   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80101963      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1161943460      L1-dcache-loads:u                                           
         394863894      armv8_pmuv3_0/l2d_cache/:u                                   
         110497231      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901032883 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2679239168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2662789632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2646340096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629890560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010259.008683,       0.0,       70531,      63552,       6979,      37884,      25668, 120.776629, 215.500000, 226.100000, 238.400000,  68.427064,   0.000000, 254.826009, 405.137525
Outstanding requests per worker:
1143 1190 1163 1194 1293 1166 1214 1132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36579.6,      182898,     164790,      18108,     110708,      54082, 468.844729, 629.300000, 647.200000, 666.000000, 123.047715, 225.302994, 688.534021, 488.674677
Outstanding requests per worker:
3353 3233 3179 3277 3322 3424 3349 3376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37502.8,      187514,     168838,      18676,     120833,      48005, 817.564700, 942.700000, 963.400000, 1001.200000,  91.298694, 548.802972, 1024.579048, 536.259574
Outstanding requests per worker:
4787 3390 4797 4886 4436 5119 4914 5026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37228.2,      186141,     167710,      18431,     124113,      43597, 1073.690643, 1227.400000, 1261.700000, 1339.300000, 129.098795, 670.062006, 1375.082970, 563.332365
Outstanding requests per worker:
6322 4366 6081 5374 5243 6862 4834 5216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36868.4,      184342,     165968,      18374,     125384,      40584, 1202.160514, 1452.100000, 1594.200000, 1724.900000, 195.334860, 725.777984, 1768.167019, 580.299088
Outstanding requests per worker:
6007 4346 5853 4953 5661 8830 5565 4764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36721.2,      183606,     165341,      18265,     127620,      37721, 1289.606629, 1851.200000, 2003.700000, 2112.200000, 296.657866, 715.797007, 2167.717934, 597.336160
Outstanding requests per worker:
5821 3958 5977 5292 5886 9533 5689 5661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36595.0,      182975,     164652,      18323,     128776,      35876, 1345.896300, 2054.500000, 2181.400000, 2254.100000, 339.122151, 745.446026, 2307.385921, 609.287327
Outstanding requests per worker:
6805 3854 6947 5623 6447 10296 6027 5528 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:11   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   20:11   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  20:11   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  20:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81175291      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1168544419      L1-dcache-loads:u                                           
         396519385      armv8_pmuv3_0/l2d_cache/:u                                   
         106022272      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210866920 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2247422464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230972928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010308.008732,       0.0,       60157,      54057,       6100,      31710,      22347,   0.528441,   0.849100,   0.968100,   1.400000,   0.265672,   0.000000,   2.028000, 396.095473
Outstanding requests per worker:
3 1 2 2 3 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135407,      14980,      89750,      45657,   0.549390,   0.883100,   1.100000,   1.500000,   0.275495,   0.100000,   2.249000, 477.772309
Outstanding requests per worker:
2 2 3 2 2 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135311,      15079,      95342,      39969,   0.561727,   0.908100,   1.100000,   1.500000,   0.282352,   0.079000,   2.473000, 523.245213
Outstanding requests per worker:
2 2 3 4 2 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135353,      15036,      98864,      36489,   0.572191,   0.928100,   1.100000,   1.500000,   0.288277,   0.103000,   2.183000, 550.980414
Outstanding requests per worker:
3 3 1 2 2 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135438,      14944,     100980,      34458,   0.587517,   0.950100,   1.100000,   1.600000,   0.295247,   0.102000,   2.679000, 568.221511
Outstanding requests per worker:
2 4 3 3 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135228,      15162,     102478,      32750,   0.597491,   0.968100,   1.100000,   1.600000,   0.297493,   0.101000,   2.328000, 583.297291
Outstanding requests per worker:
1 2 0 2 5 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135544,      14837,     104287,      31257,   0.602550,   0.977100,   1.200000,   1.600000,   0.303785,   0.103000,   3.367000, 594.660634
Outstanding requests per worker:
7 1 3 3 3 1 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:11   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:11   0:00 /usr/lib/linux
memcache      9 71.0  0.0 126400 42880 pts/0    Sl+  20:11   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75117766      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
         917352195      L1-dcache-loads:u                                           
         349287259      armv8_pmuv3_0/l2d_cache/:u                                   
         102160415      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200216950 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2264527360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248077824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231628288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Creating worker on tid 1963913728
num_worker_connections 1
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010356.008780,       0.0,       61075,      54993,       6082,      32328,      22665,   0.615577,   0.986100,   1.100000,   1.600000,   0.301579,   0.000000,   2.288000, 395.399833
Outstanding requests per worker:
3 2 3 2 1 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137330,      15355,      90680,      46650,   0.630590,   1.100000,   1.200000,   1.600000,   0.305752,   0.104000,   2.387000, 476.563766
Outstanding requests per worker:
1 2 2 3 3 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.2,      152691,     137308,      15383,      96932,      40376,   0.647987,   1.100000,   1.200000,   1.700000,   0.314572,   0.105000,   2.656000, 524.576754
Outstanding requests per worker:
2 1 2 4 3 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137401,      15279,     100815,      36586,   0.661620,   1.100000,   1.200000,   1.700000,   0.323981,   0.111000,   2.524000, 555.592608
Outstanding requests per worker:
1 2 3 3 3 3 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137319,      15366,     102880,      34439,   0.668472,   1.100000,   1.200000,   1.700000,   0.326715,   0.109000,   2.239000, 571.767534
Outstanding requests per worker:
3 3 3 2 1 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.2,      152686,     137392,      15294,     104591,      32801,   0.679759,   1.100000,   1.200000,   1.800000,   0.332574,   0.114000,   2.972000, 586.027607
Outstanding requests per worker:
1 1 3 6 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.4,      152692,     137411,      15281,     106001,      31410,   0.687374,   1.200000,   1.300000,   1.800000,   0.337675,   0.114000,   2.602000, 597.575973
Outstanding requests per worker:
3 3 2 2 4 4 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:12   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 45376 pts/0    Sl+  20:12   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74637019      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
         935960699      L1-dcache-loads:u                                           
         348825867      armv8_pmuv3_0/l2d_cache/:u                                   
          97849563      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039855012 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2960126464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2943676928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2927227392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910777856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894328320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010405.008829,       0.0,       62016,      55745,       6271,      32611,      23134,   0.631599,   1.100000,   1.200000,   1.600000,   0.308721,   0.000000,   2.649000, 394.006386
Outstanding requests per worker:
5 3 3 1 3 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139450,      15602,      92771,      46679,   0.658214,   1.100000,   1.200000,   1.700000,   0.324190,   0.114000,   2.441000, 481.406339
Outstanding requests per worker:
7 1 2 4 3 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139353,      15703,      98535,      40818,   0.674930,   1.100000,   1.200000,   1.800000,   0.333764,   0.107000,   2.448000, 527.266934
Outstanding requests per worker:
2 1 3 4 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139573,      15474,     102325,      37248,   0.696019,   1.200000,   1.300000,   1.800000,   0.342812,   0.119000,   3.070000, 555.727963
Outstanding requests per worker:
3 3 1 4 2 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139591,      15457,     104423,      35168,   0.702943,   1.200000,   1.300000,   1.800000,   0.345437,   0.124000,   2.628000, 570.949846
Outstanding requests per worker:
2 5 3 2 1 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139668,      15384,     106343,      33325,   0.710086,   1.200000,   1.300000,   1.800000,   0.348170,   0.118000,   2.845000, 585.404266
Outstanding requests per worker:
1 8 2 3 4 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139597,      15449,     108026,      31571,   0.718258,   1.200000,   1.300000,   1.800000,   0.351826,   0.116000,   3.570000, 600.165240
Outstanding requests per worker:
4 3 4 2 2 2 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:13   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   20:13   0:00 /usr/lib/linux
memcache     11 71.0  0.0 129472 45952 pts/0    Sl+  20:13   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77173472      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
         948554161      L1-dcache-loads:u                                           
         353990814      armv8_pmuv3_0/l2d_cache/:u                                   
         101341099      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730868189 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2926113280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909663744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010453.008877,       0.0,       63235,      56970,       6265,      33610,      23360,   0.706663,   1.200000,   1.300000,   1.800000,   0.344019,   0.000000,   2.616000, 397.748306
Outstanding requests per worker:
5 2 3 3 6 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.2,      158121,     142454,      15667,      94913,      47541,   0.737026,   1.200000,   1.300000,   1.800000,   0.352654,   0.125000,   2.915000, 481.484149
Outstanding requests per worker:
5 1 2 4 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142046,      16066,     100885,      41161,   0.768229,   1.300000,   1.400000,   1.800000,   0.363887,   0.126000,   2.809000, 528.279036
Outstanding requests per worker:
5 1 3 4 3 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142358,      15761,     104106,      38252,   0.794744,   1.300000,   1.400000,   1.900000,   0.374886,   0.131000,   3.264000, 553.999185
Outstanding requests per worker:
2 4 5 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142393,      15726,     106500,      35893,   0.815286,   1.400000,   1.500000,   1.900000,   0.385927,   0.126000,   2.844000, 572.521205
Outstanding requests per worker:
2 5 5 1 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142107,      16013,     108419,      33688,   0.835005,   1.400000,   1.500000,   2.000000,   0.394711,   0.133000,   3.230000, 587.585784
Outstanding requests per worker:
3 5 5 1 2 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.8,      158109,     142369,      15740,     110234,      32135,   0.852353,   1.400000,   1.500000,   2.000000,   0.404072,   0.139000,   4.507000, 599.847481
Outstanding requests per worker:
5 3 4 6 5 2 1 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:14   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 44864 pts/0    Sl+  20:14   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75759821      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
         973315928      L1-dcache-loads:u                                           
         353487788      armv8_pmuv3_0/l2d_cache/:u                                   
          96936009      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.891805967 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2672751104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2656301568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639852032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010501.008925,       0.0,       64003,      57692,       6311,      34230,      23462,   0.755828,   1.300000,   1.400000,   1.900000,   0.363303,   0.000000,   2.827000, 401.617295
Outstanding requests per worker:
6 4 4 1 3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143926,      16087,      95960,      47966,   0.792933,   1.300000,   1.400000,   2.000000,   0.378832,   0.126000,   2.816000, 482.081889
Outstanding requests per worker:
7 2 1 2 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143963,      16045,     101901,      42062,   0.824782,   1.400000,   1.500000,   2.000000,   0.387949,   0.141000,   3.775000, 527.315935
Outstanding requests per worker:
5 4 5 2 3 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     143839,      16176,     105467,      38372,   0.853787,   1.400000,   1.500000,   2.000000,   0.402443,   0.134000,   3.244000, 554.214983
Outstanding requests per worker:
4 5 5 3 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.2,      160016,     143946,      16070,     107679,      36267,   0.869198,   1.400000,   1.600000,   2.100000,   0.412559,   0.148000,   3.349000, 571.633932
Outstanding requests per worker:
6 1 2 3 5 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144110,      15907,     109685,      34425,   0.884907,   1.500000,   1.600000,   2.000000,   0.418039,   0.134000,   3.410000, 586.836000
Outstanding requests per worker:
5 5 6 2 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144035,      15978,     111230,      32805,   0.908653,   1.500000,   1.600000,   2.100000,   0.427393,   0.152000,   3.037000, 598.274892
Outstanding requests per worker:
3 2 2 4 5 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:15   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   20:15   0:00 /usr/lib/linux
memcache      9 72.6  0.0 130496 44928 pts/0    Sl+  20:15   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75777785      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
         985474958      L1-dcache-loads:u                                           
         355867593      armv8_pmuv3_0/l2d_cache/:u                                   
          98468621      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.051937321 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2875912704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859463168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843013632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010549.008973,       0.0,       65041,      58559,       6482,      34825,      23734,   0.780131,   1.300000,   1.400000,   2.000000,   0.379384,   0.000000,   2.978000, 402.679315
Outstanding requests per worker:
5 5 5 3 2 2 0 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146439,      16178,      97759,      48680,   0.813690,   1.400000,   1.500000,   2.000000,   0.393241,   0.131000,   3.091000, 483.531293
Outstanding requests per worker:
2 2 3 4 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146329,      16279,     103745,      42584,   0.840007,   1.400000,   1.500000,   2.000000,   0.398399,   0.128000,   2.852000, 528.583589
Outstanding requests per worker:
2 2 5 6 1 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.6,      162618,     146375,      16243,     107335,      39040,   0.880326,   1.500000,   1.600000,   2.000000,   0.412993,   0.153000,   3.713000, 555.587033
Outstanding requests per worker:
5 5 3 5 1 4 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146351,      16264,     110003,      36348,   0.894073,   1.500000,   1.600000,   2.100000,   0.421564,   0.143000,   3.038000, 575.891569
Outstanding requests per worker:
5 2 3 6 2 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146383,      16230,     111760,      34623,   0.916442,   1.500000,   1.600000,   2.000000,   0.425926,   0.154000,   3.467000, 589.747505
Outstanding requests per worker:
3 2 5 2 4 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146302,      16313,     113195,      33107,   0.929818,   1.600000,   1.600000,   2.000000,   0.430566,   0.148000,   3.069000, 598.603608
Outstanding requests per worker:
5 9 2 3 4 3 3 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:15   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:15   0:00 /usr/lib/linux
memcache     11 71.0  0.0 129472 45952 pts/0    Sl+  20:15   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77689679      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        1000601762      L1-dcache-loads:u                                           
         360653721      armv8_pmuv3_0/l2d_cache/:u                                   
         100708735      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960082193 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2724393472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2707943936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010598.009022,       0.0,       66108,      59596,       6512,      35272,      24324,   0.968518,   1.600000,   1.700000,   1.900000,   0.443416,   0.000000,   3.253000, 402.226693
Outstanding requests per worker:
6 4 3 2 1 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.0,      165295,     148821,      16474,      99351,      49470,   1.024077,   1.700000,   1.800000,   2.000000,   0.462323,   0.166000,   3.308000, 482.698678
Outstanding requests per worker:
4 2 9 1 6 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148983,      16321,     105791,      43192,   1.085134,   1.800000,   1.900000,   2.100000,   0.487705,   0.179000,   3.440000, 529.381158
Outstanding requests per worker:
4 2 4 7 6 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148768,      16537,     109308,      39460,   1.123408,   1.800000,   2.000000,   2.200000,   0.505773,   0.177000,   3.461000, 556.945479
Outstanding requests per worker:
7 5 3 2 2 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.4,      165297,     148765,      16532,     111971,      36794,   1.166983,   1.900000,   2.000000,   2.300000,   0.525847,   0.188000,   3.410000, 576.520290
Outstanding requests per worker:
7 5 4 3 2 4 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148866,      16436,     113913,      34953,   1.190142,   2.000000,   2.100000,   2.300000,   0.535414,   0.200000,   3.611000, 590.775604
Outstanding requests per worker:
5 7 6 5 4 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148686,      16612,     115222,      33464,   1.205069,   2.000000,   2.100000,   2.300000,   0.543231,   0.188000,   3.501000, 601.642145
Outstanding requests per worker:
4 3 5 9 8 7 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:16   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:16   0:00 /usr/lib/linux
memcache     10 69.4  0.0 131520 46976 pts/0    Sl+  20:16   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75091824      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        1021945670      L1-dcache-loads:u                                           
         358453088      armv8_pmuv3_0/l2d_cache/:u                                   
         100211136      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380786082 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2930045440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913595904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897146368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010647.009071,       0.0,       67215,      60503,       6712,      35631,      24872,   1.047211,   1.700000,   1.800000,   2.100000,   0.478222,   0.000000,   4.013000, 397.693007
Outstanding requests per worker:
4 7 4 7 2 2 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151285,      16792,     101013,      50272,   1.088799,   1.800000,   1.900000,   2.100000,   0.493910,   0.180000,   3.525000, 482.646700
Outstanding requests per worker:
3 5 3 6 5 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151009,      17071,     107289,      43720,   1.143921,   1.900000,   2.000000,   2.200000,   0.518390,   0.184000,   3.523000, 530.724738
Outstanding requests per worker:
9 3 5 4 8 7 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151366,      16720,     111038,      40328,   1.180328,   1.900000,   2.100000,   2.300000,   0.534463,   0.170000,   3.547000, 556.177266
Outstanding requests per worker:
3 5 2 6 7 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151215,      16871,     113805,      37410,   1.248771,   2.000000,   2.200000,   2.600000,   0.579944,   0.212000,   4.893000, 576.220190
Outstanding requests per worker:
8 3 9 4 7 6 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151331,      16744,     115623,      35708,   1.260452,   2.100000,   2.200000,   2.600000,   0.577515,   0.184000,   3.715000, 589.695323
Outstanding requests per worker:
8 3 10 4 7 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.0,      168085,     151368,      16717,     117364,      34004,   1.335018,   2.200000,   2.400000,   2.800000,   0.622955,   0.204000,   3.960000, 601.364978
Outstanding requests per worker:
3 7 4 8 2 6 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:17   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:17   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 48000 pts/0    Sl+  20:17   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  20:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75273008      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        1037625091      L1-dcache-loads:u                                           
         360048359      armv8_pmuv3_0/l2d_cache/:u                                   
          95308619      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890687126 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2607149568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2590700032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574250496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010695.009119,       0.0,       68069,      61322,       6747,      36047,      25275,   1.148081,   1.900000,   2.000000,   2.200000,   0.518590,   0.000000,   3.718000, 398.576596
Outstanding requests per worker:
4 3 7 2 4 9 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.0,      170215,     153312,      16903,     102610,      50702,   1.223704,   2.000000,   2.100000,   2.400000,   0.555332,   0.205000,   4.002000, 485.514004
Outstanding requests per worker:
10 8 2 6 5 3 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.8,      170219,     153095,      17124,     108932,      44163,   1.305902,   2.100000,   2.300000,   2.700000,   0.602486,   0.214000,   3.783000, 532.439707
Outstanding requests per worker:
9 7 11 4 3 4 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.2,      170211,     153197,      17014,     112948,      40249,   1.541671,   2.600000,   2.800000,   3.100000,   0.713101,   0.261000,   3.954000, 559.334432
Outstanding requests per worker:
12 11 2 7 6 4 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.2,      170221,     153132,      17089,     115376,      37756,   2.039830,   3.300000,   4.300000,   6.200000,   1.204388,   0.296000,  11.286000, 577.848849
Outstanding requests per worker:
4 2 7 10 8 24 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34038.8,      170194,     153174,      17020,     117157,      36017,   2.222948,   3.700000,   4.900000,   6.300000,   1.258282,   0.312000,   8.644000, 590.471953
Outstanding requests per worker:
12 15 5 9 7 29 3 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34030.2,      170151,     153097,      17054,     118947,      34150,   3.120901,   6.300000,   7.100000,   8.000000,   1.953926,   0.351000,   9.039000, 604.424692
Outstanding requests per worker:
13 24 15 24 17 37 25 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:18   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:18   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47040 pts/0    Sl+  20:18   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76575473      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        1057105551      L1-dcache-loads:u                                           
         365545493      armv8_pmuv3_0/l2d_cache/:u                                   
         100267292      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910530212 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2517299712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500850176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010744.009168,       0.0,       69235,      62174,       7061,      36835,      25339,   1.554991,   2.600000,   2.800000,   3.200000,   0.731621,   0.000000,   3.789000, 401.813765
Outstanding requests per worker:
10 11 6 6 3 2 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34631.4,      173157,     155985,      17172,     104682,      51303,   2.009621,   3.300000,   3.600000,   3.900000,   0.922514,   0.309000,   4.663000, 487.227112
Outstanding requests per worker:
11 12 6 5 4 16 15 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34581.8,      172909,     155573,      17336,     111146,      44427,   8.011827,  11.700000,  12.200000,  13.100000,   3.188549,   0.295000,  14.749000, 534.881233
Outstanding requests per worker:
49 41 47 38 44 52 37 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34606.0,      173030,     155510,      17520,     115071,      40439,  12.058691,  15.400000,  15.900000,  16.800000,   2.570574,   2.257000,  19.376000, 562.594033
Outstanding requests per worker:
71 32 65 56 62 70 73 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34631.8,      173159,     155871,      17288,     117341,      38530,  13.902916,  16.200000,  16.700000,  17.400000,   1.885483,   3.910000,  18.564999, 578.410025
Outstanding requests per worker:
47 70 64 76 62 73 50 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34609.4,      173047,     155595,      17452,     119390,      36205,  16.004143,  19.200000,  19.800000,  20.700000,   2.368532,   7.943000,  21.885000, 592.855092
Outstanding requests per worker:
73 76 90 82 87 79 62 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34609.0,      173045,     155796,      17249,     121018,      34778,  18.427226,  20.900000,  21.900000,  24.500000,   2.124657,  11.970000,  27.751001, 602.848911
Outstanding requests per worker:
86 101 99 88 93 109 97 94 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:19   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:19   0:00 /usr/lib/linux
memcache     11 71.0  0.0 132544 49280 pts/0    Sl+  20:19   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77254443      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        1098243978      L1-dcache-loads:u                                           
         377298374      armv8_pmuv3_0/l2d_cache/:u                                   
         103332464      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100008519 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2577854976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2561405440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010793.009217,       0.0,       70129,      63110,       7019,      37399,      25711,   1.814820,   3.000000,   3.300000,   3.700000,   0.850694,   0.000000,   4.920000, 401.923657
Outstanding requests per worker:
15 13 3 6 11 12 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35038.4,      175192,     157653,      17539,     105825,      51828,   6.194844,  10.600000,  11.100000,  11.800000,   3.698541,   0.356000,  13.388000, 487.149207
Outstanding requests per worker:
35 33 47 49 41 38 50 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35052.4,      175262,     157639,      17623,     112585,      45054,  12.488826,  15.800000,  16.300000,  17.100000,   2.449685,   2.252000,  18.487999, 534.152456
Outstanding requests per worker:
60 61 70 58 67 64 72 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35061.6,      175308,     157882,      17426,     116547,      41335,  15.344974,  17.300000,  20.100000,  27.400000,   2.964021,   8.009000,  48.361000, 559.658675
Outstanding requests per worker:
71 54 73 67 180 78 76 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35026.0,      175130,     157397,      17733,     118954,      38443,  24.289226,  63.000000,  79.200000,  86.300000,  19.180174,   6.119000,  94.976000, 579.796686
Outstanding requests per worker:
86 78 90 84 386 90 92 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34948.2,      174741,     157198,      17543,     120604,      36594,  35.896366,  99.400000, 142.100000, 161.600000,  37.250566,  14.279000, 177.311003, 592.832129
Outstanding requests per worker:
88 195 92 77 740 335 83 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34796.4,      173982,     156750,      17232,     122154,      34596,  66.031594, 203.600000, 252.800000, 266.900000,  70.074747,  13.858000, 275.707006, 604.816338
Outstanding requests per worker:
149 415 271 271 1193 507 196 159 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:20   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  20:20   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78022466      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        1109776783      L1-dcache-loads:u                                           
         380157872      armv8_pmuv3_0/l2d_cache/:u                                   
         104521016      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.911516274 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2242900480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226450944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010842.009266,       0.0,       70385,      63334,       7051,      37433,      25901,  14.947424,  20.000000,  20.700000,  25.500000,   5.238559,   0.000000,  36.313999, 400.174693
Outstanding requests per worker:
79 88 136 93 97 81 95 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35146.2,      175731,     158264,      17467,     106170,      52094,  46.224154,  91.000000, 115.700000, 129.500000,  29.261419,  11.919000, 138.147995, 487.476571
Outstanding requests per worker:
257 252 604 527 366 331 228 254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34844.0,      174220,     156757,      17463,     111976,      44781, 125.059826, 192.700000, 216.200000, 246.000000,  46.987767,  44.906002, 254.069000, 535.021218
Outstanding requests per worker:
592 701 1062 1104 890 674 673 693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34684.8,      173424,     156106,      17318,     115028,      41078, 239.760516, 323.100000, 342.300000, 358.500000,  55.575241, 128.510997, 374.713004, 558.825862
Outstanding requests per worker:
1228 1239 1582 1638 1481 1202 1158 1230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34679.0,      173395,     155986,      17409,     117376,      38610, 365.545359, 444.100000, 460.800000, 476.900000,  53.732277, 256.599993, 486.743987, 577.401645
Outstanding requests per worker:
1635 1764 2145 2139 2124 1803 1779 1771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34766.0,      173830,     156362,      17468,     119881,      36481, 482.034709, 553.600000, 565.700000, 588.500000,  50.819414, 363.653988, 605.049014, 590.969577
Outstanding requests per worker:
2236 2240 2677 2493 2562 2345 2265 2313 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34801.6,      174008,     156645,      17363,     121557,      35088, 592.944838, 665.300000, 679.500000, 700.400000,  49.124448, 496.244013, 710.352004, 603.352798
Outstanding requests per worker:
2693 2729 3070 2993 3135 2835 2719 2736 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:20   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48384 pts/0    Sl+  20:20   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76528513      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1105466900      L1-dcache-loads:u                                           
         377053354      armv8_pmuv3_0/l2d_cache/:u                                   
         103208413      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840129436 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2151739904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2135290368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2118840832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2102391296
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010890.009314,       0.0,       71366,      64142,       7224,      38275,      25867,  14.237884,  19.800000,  20.500000,  21.500000,   4.962689,   0.000000,  22.892000, 406.239609
Outstanding requests per worker:
97 97 88 71 88 102 100 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35532.0,      177660,     159819,      17841,     107346,      52473,  52.280805,  84.600000,  89.200000,  98.100000,  22.637240,  11.800000, 108.694002, 487.789781
Outstanding requests per worker:
380 421 408 398 411 309 463 475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35165.6,      175828,     158197,      17631,     113688,      44509, 147.011210, 202.800000, 214.100000, 229.000000,  38.887913,  67.405999, 243.604004, 539.274601
Outstanding requests per worker:
1041 961 835 914 1036 791 967 1086 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35009.4,      175047,     157462,      17585,     116643,      40819, 283.395437, 348.700000, 363.300000, 377.900000,  47.485079, 173.648000, 390.017986, 562.976223
Outstanding requests per worker:
1731 1476 1462 1561 1736 1529 1594 1690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35109.0,      175545,     157757,      17788,     119295,      38462, 421.021092, 499.300000, 517.500000, 545.700000,  52.562887, 318.931997, 556.809008, 579.784675
Outstanding requests per worker:
2342 2069 1926 2194 2490 1921 2116 2378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35223.0,      176115,     158413,      17702,     121575,      36838, 541.512185, 620.600000, 639.300000, 654.800000,  55.266296, 423.718005, 664.785981, 591.712827
Outstanding requests per worker:
2939 2555 2434 2744 2977 2478 2573 2812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35265.8,      176329,     158593,      17736,     123478,      35115, 649.710996, 731.300000, 743.200000, 756.000000,  55.865321, 533.851981, 768.378019, 604.600934
Outstanding requests per worker:
3388 3140 2831 3112 3444 2939 3122 3400 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:21   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   20:21   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47808 pts/0    Sl+  20:21   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76569030      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1120372964      L1-dcache-loads:u                                           
         379313550      armv8_pmuv3_0/l2d_cache/:u                                   
         104384467      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080462314 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2827612672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2811163136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794713600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778264064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761814528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010939.009363,       0.0,       70511,      63419,       7092,      37903,      25516,  36.568450,  63.500000,  67.600000,  77.500000,  19.957339,   0.000000,  84.811002, 406.686687
Outstanding requests per worker:
328 284 315 313 304 319 364 353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35094.2,      175471,     157916,      17555,     106124,      51792, 166.020580, 246.700000, 263.200000, 291.800000,  59.725790,  60.031999, 308.901995, 488.178069
Outstanding requests per worker:
1394 1148 1365 1083 1235 1155 1225 1166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35119.4,      175597,     158084,      17513,     113046,      45038, 368.203233, 447.400000, 465.300000, 499.800000,  60.861613, 234.226003, 513.374984, 534.454113
Outstanding requests per worker:
2240 2087 2339 1930 2145 1954 2156 1995 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35284.8,      176424,     158846,      17578,     117470,      41376, 550.293724, 624.700000, 641.400000, 662.400000,  56.368034, 420.801014, 672.694027, 561.608596
Outstanding requests per worker:
2989 2958 3053 2760 2957 2780 2829 2769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35455.0,      177275,     159463,      17812,     120530,      38933, 708.219473, 773.700000, 782.900000, 801.500000,  48.075098, 601.221025, 817.776978, 579.987144
Outstanding requests per worker:
3562 3640 3652 3553 3712 3415 3398 3545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35638.6,      178193,     160472,      17721,     123273,      37199, 840.833625, 901.100000, 915.500000, 944.500000,  44.577246, 738.610029, 957.346022, 593.743581
Outstanding requests per worker:
4081 4365 4124 4158 4252 3850 3973 4145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35633.4,      178167,     160437,      17730,     125000,      35437, 962.981308, 1025.200000, 1041.800000, 1056.800000,  46.896711, 839.240015, 1065.798998, 606.154023
Outstanding requests per worker:
4675 4859 4689 4802 4846 4424 4534 4623 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:22   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:22   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48768 pts/0    Sl+  20:22   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77268889      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1123320492      L1-dcache-loads:u                                           
         381318814      armv8_pmuv3_0/l2d_cache/:u                                   
         107615755      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870628018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2530210304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513760768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497311232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576010989.009413,       0.0,       71374,      64304,       7070,      38242,      26062,  37.643457,  68.400000,  74.700000,  80.800000,  21.236338,   0.000000,  89.954004, 402.569389
Outstanding requests per worker:
255 298 412 383 373 363 343 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35443.8,      177219,     159433,      17786,     107325,      52108, 177.293653, 267.900000, 280.800000, 294.300000,  64.352646,  52.048001, 310.276985, 488.923397
Outstanding requests per worker:
1352 1232 1407 1328 1351 1372 1342 1321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35477.8,      177389,     159753,      17636,     114361,      45392, 398.468149, 482.100000, 496.600000, 519.900000,  62.838557, 261.303008, 541.144013, 536.425156
Outstanding requests per worker:
2349 2184 2499 2288 2390 2358 2181 2260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35799.8,      178999,     160964,      18035,     119330,      41634, 585.409003, 652.400000, 665.700000, 685.300000,  51.739055, 469.199985, 703.103006, 563.192987
Outstanding requests per worker:
3105 2947 3239 3065 3133 3089 3042 3089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35885.8,      179429,     161267,      18162,     122172,      39095, 745.217819, 806.900000, 823.700000, 843.200000,  47.706864, 635.343015, 859.148979, 582.740412
Outstanding requests per worker:
3857 3689 3978 3701 3810 3914 3740 3791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36003.2,      180016,     162159,      17857,     124706,      37453, 896.858115, 961.000000, 973.500000, 998.000000,  47.551043, 792.466998, 1010.494947, 595.570705
Outstanding requests per worker:
4571 4303 4648 4373 4492 4497 4302 4486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36171.0,      180855,     162826,      18029,     126969,      35857, 1019.734591, 1077.900000, 1096.500000, 1143.500000,  45.290328, 920.732975, 1152.598023, 606.950235
Outstanding requests per worker:
5058 4834 5312 4853 4971 5023 4880 5086 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:23   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:23   0:00 /usr/lib/linux
memcache     10 69.4  0.0 133568 50240 pts/0    Sl+  20:23   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78342123      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1135772640      L1-dcache-loads:u                                           
         386434197      armv8_pmuv3_0/l2d_cache/:u                                   
         104886722      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.841248845 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2582901248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566451712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011037.009461,       0.0,       71319,      64078,       7241,      38221,      25857,  51.344036,  90.400000,  98.000000, 105.400000,  28.176186,   0.000000, 115.341999, 404.809545
Outstanding requests per worker:
478 478 489 530 475 410 490 482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35509.8,      177549,     159706,      17843,     107464,      52242, 237.843975, 348.400000, 366.700000, 382.300000,  80.815627,  82.636997, 395.709008, 488.715314
Outstanding requests per worker:
1803 1607 1837 1801 1788 1656 1773 1828 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35867.0,      179335,     161393,      17942,     115798,      45595, 490.709003, 585.200000, 597.600000, 617.800000,  69.431006, 335.105002, 628.300011, 537.133537
Outstanding requests per worker:
2832 2592 2807 2953 2826 2759 2883 2912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36160.4,      180802,     162746,      18056,     120232,      42514, 696.000744, 776.500000, 788.900000, 808.700000,  60.111691, 548.443019, 820.308983, 561.538956
Outstanding requests per worker:
3723 3398 3703 3830 3664 3651 3830 3772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36400.2,      182001,     163760,      18241,     123851,      39909, 865.331073, 937.400000, 950.700000, 975.300000,  54.275247, 719.906986, 987.167001, 580.794431
Outstanding requests per worker:
4434 3976 4409 4526 4410 4407 4598 4620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36471.6,      182358,     164116,      18242,     126228,      37888, 1014.598426, 1091.400000, 1113.800000, 1152.600000,  64.329256, 842.550993, 1169.986010, 595.950620
Outstanding requests per worker:
5130 4512 5052 5111 5136 5089 5335 5473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36551.8,      182759,     164516,      18243,     128372,      36144, 1153.433159, 1239.600000, 1270.500000, 1301.300000,  67.567792, 954.442978, 1328.004956, 607.392156
Outstanding requests per worker:
5672 5151 5627 5661 5755 5859 5939 6223 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:24   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:24   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 50240 pts/0    Sl+  20:24   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  20:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79035786      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1148340291      L1-dcache-loads:u                                           
         391308083      armv8_pmuv3_0/l2d_cache/:u                                   
         100586819      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120387395 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2502554112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Creating worker on tid 2383016448
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011086.009510,       0.0,       70335,      63389,       6946,      37763,      25626,  77.650169, 138.700000, 147.000000, 156.600000,  43.990035,   0.000000, 166.241005, 405.968559
Outstanding requests per worker:
772 742 774 677 750 699 741 732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35475.0,      177375,     159589,      17786,     107039,      52550, 336.821424, 468.500000, 486.200000, 504.600000, 100.628163, 138.987005, 523.301005, 488.444429
Outstanding requests per worker:
2353 2407 2420 2232 2400 2459 2398 2330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36152.6,      180763,     162769,      17994,     116627,      46142, 631.476906, 734.400000, 751.500000, 770.700000,  76.843626, 464.450002, 783.035994, 536.230197
Outstanding requests per worker:
3539 3707 3652 3483 3611 3620 3711 3403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36506.4,      182532,     164460,      18072,     121789,      42671, 861.183504, 947.400000, 961.000000, 987.300000,  64.366595, 711.807013, 999.267995, 562.803369
Outstanding requests per worker:
4532 4730 4631 4508 4570 4604 4747 4358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36765.2,      183826,     165341,      18485,     125270,      40071, 1052.226318, 1127.800000, 1139.100000, 1165.500000,  56.753350, 910.686016, 1180.946946, 580.117896
Outstanding requests per worker:
5381 5595 5426 5341 5476 5430 5485 5211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36982.8,      184914,     166575,      18339,     128328,      38247, 1210.658364, 1278.700000, 1291.000000, 1320.300000,  49.955490, 1087.903023, 1338.166952, 596.066409
Outstanding requests per worker:
6140 6360 5924 6010 6214 6141 6233 5895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37072.6,      185363,     166700,      18663,     129866,      36834, 1349.138819, 1423.500000, 1434.900000, 1470.400000,  54.443833, 1205.407977, 1482.903004, 606.256455
Outstanding requests per worker:
6786 7047 6585 6626 6889 6792 6800 6521 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:24   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:24   0:00 /usr/lib/linux
memcache      9 72.6  0.0 133568 50176 pts/0    Sl+  20:24   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79979173      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1154845600      L1-dcache-loads:u                                           
         394084330      armv8_pmuv3_0/l2d_cache/:u                                   
         109119585      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.530496750 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2379674112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363224576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011134.009558,       0.0,       70834,      63688,       7146,      37929,      25759,  84.849346, 151.200000, 161.400000, 171.100000,  47.697756,   0.000000, 183.385998, 404.596659
Outstanding requests per worker:
838 838 797 797 807 836 703 880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35889.4,      179447,     161505,      17942,     108564,      52941, 357.892109, 494.500000, 513.500000, 536.000000, 104.693728, 144.371003, 559.509993, 487.564057
Outstanding requests per worker:
2676 2632 2481 2596 2455 2517 2354 2586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36706.8,      183534,     165174,      18360,     118086,      47088, 657.688455, 757.200000, 778.300000, 801.800000,  76.267181, 485.969990, 820.532024, 534.856164
Outstanding requests per worker:
3819 3962 3595 3881 3683 3638 3651 3789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37031.2,      185156,     166810,      18346,     123594,      43216, 885.809775, 974.500000, 991.800000, 1007.200000,  65.922817, 648.021996, 1020.373940, 563.346892
Outstanding requests per worker:
4919 4861 4617 4898 4622 4641 4792 4769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37333.8,      186669,     167887,      18782,     127281,      40606, 1074.046780, 1154.000000, 1174.800000, 1191.200000,  57.689833, 950.173974, 1199.555039, 582.463056
Outstanding requests per worker:
5695 5767 5485 5770 5364 5411 5543 5679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37289.8,      186449,     167724,      18725,     129431,      38293, 1243.763570, 1331.500000, 1354.800000, 1373.200000,  62.322626, 1065.932989, 1384.691954, 596.976390
Outstanding requests per worker:
6579 6652 6285 6672 6127 6242 6404 6494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37236.6,      186183,     167462,      18721,     131044,      36418, 1404.086102, 1515.400000, 1530.300000, 1560.600000,  88.844478, 1084.110975, 1583.266973, 609.072375
Outstanding requests per worker:
7422 7633 7250 7433 7064 5998 6188 7380 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:25   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   20:25   0:00 /usr/lib/linux
memcache     11 71.0  0.0 132544 49280 pts/0    Sl+  20:25   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79234476      L1-dcache-load-misses:u   # [33m   6.77%[m of all L1-dcache hits  
        1170713828      L1-dcache-loads:u                                           
         396776845      armv8_pmuv3_0/l2d_cache/:u                                   
         104013735      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940416246 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2778067456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761617920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011183.009607,       0.0,       71411,      64343,       7068,      38372,      25971,  86.174013, 152.500000, 162.400000, 174.100000,  48.239075,   0.000000, 191.158995, 405.672101
Outstanding requests per worker:
781 836 873 821 907 832 762 853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36098.2,      180491,     162295,      18196,     108682,      53613, 370.496380, 516.800000, 532.200000, 556.100000, 110.442890, 152.868003, 583.203971, 487.002649
Outstanding requests per worker:
2715 2610 2656 2649 2831 2655 2629 2563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36868.0,      184340,     166198,      18142,     119015,      47183, 690.047234, 798.200000, 810.400000, 831.200000,  80.791344, 522.777975, 854.816973, 536.072594
Outstanding requests per worker:
4066 3944 3977 3972 4143 4048 3962 4000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37304.2,      186521,     167893,      18628,     124286,      43607, 936.341599, 1021.400000, 1036.800000, 1067.600000,  66.141839, 792.657018, 1085.682988, 563.472080
Outstanding requests per worker:
5151 5050 5102 4988 5023 5017 5035 5104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37495.4,      187477,     168758,      18719,     127791,      40967, 1137.790106, 1215.800000, 1229.200000, 1259.900000,  58.122913, 1020.145059, 1292.248011, 582.097909
Outstanding requests per worker:
5960 5971 5366 5958 6299 6028 5944 6049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37412.0,      187060,     168319,      18741,     129631,      38688, 1320.883376, 1412.300000, 1427.600000, 1451.500000,  68.928820, 1082.731009, 1507.832050, 595.813646
Outstanding requests per worker:
7029 6949 6286 6866 6545 6993 7018 7048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37246.8,      186234,     167572,      18662,     131073,      36499, 1479.851093, 1607.400000, 1632.100000, 1660.400000, 112.827190, 1075.346947, 1692.255020, 609.463228
Outstanding requests per worker:
7686 7984 6398 7880 6983 8110 6527 8235 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:26   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:26   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49792 pts/0    Sl+  20:26   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80306852      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1175294478      L1-dcache-loads:u                                           
         396378506      armv8_pmuv3_0/l2d_cache/:u                                   
         102017937      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.350630300 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2181296640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164847104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Creating worker on tid 2063921664
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011232.009656,       0.0,       70546,      63521,       7025,      37743,      25778, 111.374329, 196.600000, 210.200000, 226.400000,  63.271460,   0.000000, 240.353003, 403.455015
Outstanding requests per worker:
1176 1106 1026 1019 1112 1088 1151 1023 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36308.2,      181541,     163371,      18170,     110090,      53281, 443.989211, 599.400000, 623.500000, 646.300000, 119.549175, 199.936002, 665.989995, 490.470010
Outstanding requests per worker:
3283 3215 2984 3034 3188 3230 3209 3054 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37249.8,      186249,     167528,      18721,     120086,      47442, 770.326992, 898.000000, 918.900000, 949.000000,  95.524495, 503.005028, 964.654028, 537.008417
Outstanding requests per worker:
4729 2849 4420 4492 4607 4768 4712 4523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37531.2,      187656,     169259,      18397,     124849,      44410, 1008.049311, 1156.800000, 1181.900000, 1208.900000, 149.105100, 517.758012, 1229.465961, 561.043868
Outstanding requests per worker:
5985 2873 5715 5301 5854 5475 6057 5817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36996.8,      184984,     166526,      18458,     126194,      40332, 1205.921657, 1403.900000, 1445.000000, 1505.000000, 204.703964, 564.163983, 1544.208050, 581.274552
Outstanding requests per worker:
5776 3255 6353 6196 5722 5938 7026 6756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36729.4,      183647,     165515,      18132,     127851,      37664, 1291.285123, 1567.800000, 1618.300000, 1663.300000, 241.933332, 592.011988, 1710.026979, 596.969725
Outstanding requests per worker:
6269 4093 6094 6095 5473 5946 7561 6864 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36663.8,      183319,     164898,      18421,     128577,      36321, 1319.964111, 1588.500000, 1634.400000, 1673.100000, 237.165168, 629.366994, 1708.544016, 606.534664
Outstanding requests per worker:
6419 3894 6734 5274 5513 6506 6852 6937 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:27   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:27   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49408 pts/0    Sl+  20:27   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80549566      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1170085812      L1-dcache-loads:u                                           
         396988957      armv8_pmuv3_0/l2d_cache/:u                                   
         106159469      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090364738 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2156720640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2140271104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123821568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107372032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090922496
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011281.009705,       0.0,       71104,      64019,       7085,      38361,      25658, 113.787671, 202.200000, 213.500000, 229.100000,  63.997286,   0.000000, 236.774996, 407.257314
Outstanding requests per worker:
1045 1118 1083 1123 1173 1127 1097 1157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36504.2,      182521,     164133,      18388,     110367,      53766, 459.350320, 623.300000, 643.400000, 661.500000, 126.487748, 210.438997, 675.390005, 489.551236
Outstanding requests per worker:
3241 3350 3289 3277 3346 3286 3317 3309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37385.2,      186926,     168215,      18711,     120290,      47925, 820.439588, 951.500000, 967.800000, 984.600000,  92.794545, 641.982973, 1003.147006, 536.375068
Outstanding requests per worker:
4961 3633 5007 4884 4862 4895 4939 4941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37361.0,      186805,     168278,      18527,     124578,      43700, 1086.747268, 1237.200000, 1265.900000, 1292.400000, 122.412591, 697.211981, 1306.740046, 563.301834
Outstanding requests per worker:
5834 4323 6492 6498 6476 5302 5800 5078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37032.0,      185160,     166685,      18475,     126348,      40337, 1249.678739, 1530.500000, 1579.400000, 1652.600000, 217.203747, 679.639995, 1686.277032, 583.472898
Outstanding requests per worker:
5443 4433 7690 7722 7070 6049 5663 5598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36815.2,      184076,     165959,      18117,     127943,      38016, 1345.890166, 1698.000000, 1736.200000, 1778.400000, 267.314328, 714.636028, 1820.981979, 598.046204
Outstanding requests per worker:
5895 3923 7649 7901 7759 6065 5901 5509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36728.8,      183644,     165192,      18452,     129040,      36152, 1375.186444, 1696.000000, 1741.300000, 1780.400000, 247.867208, 743.836999, 1823.758960, 607.303816
Outstanding requests per worker:
5392 4695 8129 7115 6803 6945 6541 6318 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:28   0:00 /usr/lib/linux
memcache      9 72.6  0.0 133568 50240 pts/0    Sl+  20:28   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80761517      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1169994414      L1-dcache-loads:u                                           
         397248250      armv8_pmuv3_0/l2d_cache/:u                                   
         108415825      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090089583 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2203775488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2187325952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170876416
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011330.009754,       0.0,       60153,      54252,       5901,      31903,      22349,   0.602591,   0.952100,   1.200000,   1.700000,   0.411493,   0.000000,   7.266000, 397.016497
Outstanding requests per worker:
2 1 1 2 3 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135521,      14863,      89821,      45700,   0.569274,   0.924100,   1.100000,   1.500000,   0.285436,   0.104000,   2.358000, 478.174394
Outstanding requests per worker:
6 0 1 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135286,      15100,      95228,      40058,   0.595620,   0.964100,   1.100000,   1.500000,   0.294316,   0.104000,   2.890000, 523.235346
Outstanding requests per worker:
3 3 0 1 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135185,      15201,      98685,      36500,   0.618296,   0.999100,   1.200000,   1.600000,   0.302884,   0.102000,   2.372000, 551.540371
Outstanding requests per worker:
3 2 2 3 1 1 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135322,      15062,     101069,      34253,   0.625270,   1.100000,   1.100000,   1.600000,   0.303232,   0.103000,   2.536000, 571.254689
Outstanding requests per worker:
2 2 1 1 3 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135248,      15133,     102708,      32540,   0.633925,   1.100000,   1.100000,   1.600000,   0.305913,   0.106000,   2.452000, 584.309151
Outstanding requests per worker:
3 2 3 3 2 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135161,      15225,     104022,      31139,   0.647007,   1.100000,   1.200000,   1.600000,   0.314293,   0.105000,   3.514000, 595.078455
Outstanding requests per worker:
1 3 4 3 3 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:28   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 44864 pts/0    Sl+  20:28   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74666353      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
         916931628      L1-dcache-loads:u                                           
         347963332      armv8_pmuv3_0/l2d_cache/:u                                   
         101326009      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151690339 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2290414080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273964544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257515008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241065472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224615936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011379.009803,       0.0,       61076,      54980,       6096,      31925,      23055,   0.601057,   0.975100,   1.100000,   1.500000,   0.298581,   0.000000,   2.718000, 392.163387
Outstanding requests per worker:
2 2 1 3 1 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.2,      152676,     137537,      15139,      91012,      46525,   0.635473,   1.100000,   1.200000,   1.600000,   0.308177,   0.101000,   2.436000, 476.276689
Outstanding requests per worker:
2 4 3 3 4 1 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137205,      15479,      96904,      40301,   0.654434,   1.100000,   1.200000,   1.700000,   0.317529,   0.104000,   2.715000, 525.077563
Outstanding requests per worker:
4 3 1 2 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.0,      152690,     137311,      15379,     100104,      37207,   0.674639,   1.100000,   1.200000,   1.700000,   0.329774,   0.106000,   3.080000, 551.257197
Outstanding requests per worker:
3 2 1 3 1 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137380,      15305,     102504,      34876,   0.684454,   1.100000,   1.300000,   1.800000,   0.333395,   0.120000,   3.062000, 570.514078
Outstanding requests per worker:
2 3 3 2 3 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137431,      15249,     104341,      33090,   0.691963,   1.200000,   1.300000,   1.800000,   0.338573,   0.117000,   3.624000, 583.835467
Outstanding requests per worker:
5 4 2 1 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.6,      152688,     137399,      15289,     105985,      31414,   0.700126,   1.200000,   1.300000,   1.800000,   0.341767,   0.123000,   2.702000, 597.735522
Outstanding requests per worker:
6 2 2 1 3 2 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:29   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:29   0:00 /usr/lib/linux
memcache     10 71.0  0.0 128448 43968 pts/0    Sl+  20:29   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76134592      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
         933815733      L1-dcache-loads:u                                           
         350382950      armv8_pmuv3_0/l2d_cache/:u                                   
         100000675      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990291268 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3139564032
starting receive base loop
num_worker_connections 1
Creating worker on tid 3123114496
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106664960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011427.009851,       0.0,       62018,      55808,       6210,      32833,      22975,   0.615960,   0.992100,   1.100000,   1.600000,   0.302047,   0.000000,   2.387000, 396.405569
Outstanding requests per worker:
3 4 2 2 3 3 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139616,      15434,      92755,      46861,   0.644368,   1.100000,   1.200000,   1.700000,   0.314103,   0.105000,   2.190000, 479.530942
Outstanding requests per worker:
1 2 4 4 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139487,      15568,      98595,      40892,   0.667396,   1.100000,   1.200000,   1.700000,   0.326696,   0.113000,   2.810000, 526.605590
Outstanding requests per worker:
4 3 4 4 1 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139363,      15695,     101816,      37547,   0.677700,   1.100000,   1.200000,   1.700000,   0.331965,   0.108000,   2.399000, 552.249320
Outstanding requests per worker:
2 2 1 2 3 3 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139653,      15393,     104393,      35260,   0.686930,   1.200000,   1.300000,   1.800000,   0.337311,   0.115000,   2.373000, 570.751799
Outstanding requests per worker:
2 3 1 4 3 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139457,      15593,     105839,      33618,   0.705825,   1.200000,   1.300000,   1.900000,   0.362332,   0.123000,   5.240000, 583.821737
Outstanding requests per worker:
1 2 4 5 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139859,      15196,     107675,      32184,   0.706241,   1.200000,   1.300000,   1.800000,   0.345980,   0.117000,   3.733000, 595.400325
Outstanding requests per worker:
2 2 1 3 2 3 4 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:30   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:30   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 45952 pts/0    Sl+  20:30   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76565106      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
         947165701      L1-dcache-loads:u                                           
         353447871      armv8_pmuv3_0/l2d_cache/:u                                   
          94958769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.849535182 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2160194048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2143744512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127294976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110845440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094395904
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011476.009900,       0.0,       63244,      56924,       6320,      33572,      23352,   0.670326,   1.100000,   1.200000,   1.700000,   0.326668,   0.000000,   2.566000, 400.666099
Outstanding requests per worker:
3 2 3 3 6 1 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142373,      15744,      94739,      47634,   0.694414,   1.200000,   1.300000,   1.800000,   0.339391,   0.121000,   2.933000, 480.513918
Outstanding requests per worker:
1 2 3 3 3 2 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142223,      15895,     101010,      41213,   0.716176,   1.200000,   1.300000,   1.800000,   0.346571,   0.122000,   3.021000, 528.754217
Outstanding requests per worker:
4 4 2 3 2 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142274,      15837,     104258,      38016,   0.738403,   1.200000,   1.300000,   1.800000,   0.356741,   0.122000,   3.261000, 553.983279
Outstanding requests per worker:
3 2 2 3 3 1 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142344,      15768,     106876,      35468,   0.747928,   1.200000,   1.300000,   1.800000,   0.358148,   0.125000,   3.578000, 574.462801
Outstanding requests per worker:
4 5 2 3 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142135,      15984,     108173,      33962,   0.762761,   1.300000,   1.400000,   1.900000,   0.366408,   0.124000,   3.677000, 586.908376
Outstanding requests per worker:
3 4 4 2 2 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142365,      15754,     109814,      32551,   0.771672,   1.300000,   1.400000,   1.900000,   0.370601,   0.116000,   2.710000, 598.034032
Outstanding requests per worker:
2 3 7 2 5 3 4 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:31   0:00 /usr/lib/linux
memcache      8 72.6  0.0 129472 46016 pts/0    Sl+  20:31   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75450549      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
         970800444      L1-dcache-loads:u                                           
         355967661      armv8_pmuv3_0/l2d_cache/:u                                   
          95834625      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.759426689 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2272260608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2255811072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2239361536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2004873728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988424192
starting receive base loop
num_worker_connections 1
Creating worker on tid 1971974656
starting receive base loop
Created 8 connections total
Creating worker on tid 1955525120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011525.009949,       0.0,       64000,      57560,       6440,      34295,      23265,   0.722615,   1.200000,   1.300000,   1.800000,   0.348207,   0.000000,   2.682000, 402.905716
Outstanding requests per worker:
1 4 5 5 3 5 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144025,      15988,      96095,      47930,   0.757182,   1.300000,   1.400000,   1.900000,   0.361397,   0.122000,   2.602000, 483.532040
Outstanding requests per worker:
4 3 2 2 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143867,      16143,     101931,      41936,   0.787081,   1.300000,   1.400000,   1.900000,   0.375268,   0.129000,   2.714000, 527.761252
Outstanding requests per worker:
1 1 5 4 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143698,      16309,     105170,      38528,   0.807982,   1.400000,   1.500000,   1.900000,   0.384572,   0.130000,   3.174000, 554.757443
Outstanding requests per worker:
5 5 3 3 2 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.2,      160016,     143824,      16192,     107711,      36113,   0.823918,   1.400000,   1.500000,   1.900000,   0.390578,   0.125000,   3.330000, 572.356603
Outstanding requests per worker:
7 3 2 0 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.6,      160003,     143966,      16037,     110197,      33769,   0.845895,   1.400000,   1.500000,   2.000000,   0.399953,   0.135000,   3.045000, 589.991088
Outstanding requests per worker:
2 3 5 5 5 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143923,      16087,     111466,      32457,   0.857043,   1.400000,   1.500000,   2.000000,   0.405766,   0.142000,   2.980000, 600.689813
Outstanding requests per worker:
6 1 5 4 3 5 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:32   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:32   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 46208 pts/0    Sl+  20:32   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76603999      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
         983879340      L1-dcache-loads:u                                           
         357286329      armv8_pmuv3_0/l2d_cache/:u                                   
          95537424      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.569973663 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2296574464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2280124928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2263675392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247225856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230776320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011573.009997,       0.0,       65002,      58526,       6476,      34801,      23725,   0.812896,   1.400000,   1.500000,   1.900000,   0.386282,   0.000000,   2.861000, 403.032686
Outstanding requests per worker:
5 3 5 4 3 2 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146355,      16256,      98050,      48305,   0.856431,   1.400000,   1.500000,   1.900000,   0.401556,   0.148000,   3.030000, 484.220847
Outstanding requests per worker:
5 3 1 4 3 6 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146481,      16136,     104001,      42480,   0.901557,   1.500000,   1.600000,   2.100000,   0.424185,   0.154000,   3.121000, 530.231293
Outstanding requests per worker:
0 4 3 5 5 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146403,      16210,     107309,      39094,   0.933233,   1.600000,   1.700000,   2.100000,   0.437236,   0.160000,   3.215000, 555.981285
Outstanding requests per worker:
3 5 6 2 1 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.6,      162623,     146381,      16242,     109918,      36463,   0.952940,   1.600000,   1.700000,   2.100000,   0.445095,   0.157000,   4.449000, 574.863152
Outstanding requests per worker:
1 6 4 2 6 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32520.6,      162603,     146516,      16087,     112182,      34334,   0.975663,   1.600000,   1.700000,   2.100000,   0.454024,   0.169000,   3.191000, 590.634907
Outstanding requests per worker:
5 2 7 4 3 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146411,      16202,     113217,      33194,   0.981335,   1.600000,   1.700000,   2.100000,   0.456790,   0.161000,   3.808000, 599.767634
Outstanding requests per worker:
5 3 4 5 4 6 7 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:33   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 46016 pts/0    Sl+  20:33   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76079122      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        1002765130      L1-dcache-loads:u                                           
         356730573      armv8_pmuv3_0/l2d_cache/:u                                   
          99214863      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770869361 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2624647680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608198144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2591748608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575299072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2558849536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011622.010046,       0.0,       66112,      59640,       6472,      35495,      24145,   0.909198,   1.500000,   1.600000,   2.100000,   0.428618,   0.000000,   3.088000, 403.229561
Outstanding requests per worker:
6 3 2 6 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148746,      16552,      99256,      49490,   0.950492,   1.600000,   1.700000,   2.000000,   0.442468,   0.155000,   3.127000, 482.975831
Outstanding requests per worker:
2 3 3 4 5 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148782,      16517,     105235,      43547,   0.985243,   1.600000,   1.800000,   2.100000,   0.457456,   0.167000,   3.284000, 528.871409
Outstanding requests per worker:
2 4 4 1 6 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     149025,      16280,     109417,      39608,   1.017508,   1.700000,   1.800000,   2.100000,   0.470569,   0.162000,   3.307000, 556.692179
Outstanding requests per worker:
4 2 3 8 4 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.0,      165310,     148701,      16609,     111540,      37161,   1.032219,   1.700000,   1.800000,   2.100000,   0.475573,   0.167000,   3.329000, 573.500757
Outstanding requests per worker:
4 5 6 4 2 2 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.6,      165293,     148933,      16360,     113823,      35110,   1.051542,   1.800000,   1.900000,   2.100000,   0.483510,   0.167000,   3.322000, 589.401718
Outstanding requests per worker:
7 7 3 6 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148595,      16712,     115414,      33181,   1.078882,   1.800000,   1.900000,   2.200000,   0.499087,   0.179000,   3.668000, 602.373458
Outstanding requests per worker:
3 4 5 3 7 7 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:33   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 46592 pts/0    Sl+  20:33   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75565550      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        1019973178      L1-dcache-loads:u                                           
         360169097      armv8_pmuv3_0/l2d_cache/:u                                   
          96411848      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.149837598 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2134241792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2117792256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101342720
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011670.010094,       0.0,       67217,      60599,       6618,      36116,      24483,   1.045482,   1.700000,   1.800000,   2.100000,   0.479675,   0.000000,   3.277000, 404.424182
Outstanding requests per worker:
5 7 3 8 2 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.8,      168074,     151296,      16778,     102115,      49181,   1.100155,   1.800000,   1.900000,   2.100000,   0.498421,   0.178000,   3.469000, 488.659799
Outstanding requests per worker:
2 4 7 6 7 7 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151123,      16954,     107745,      43378,   1.144117,   1.900000,   2.000000,   2.200000,   0.520354,   0.189000,   3.461000, 533.630751
Outstanding requests per worker:
2 3 6 5 7 8 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.2,      168081,     151281,      16800,     111405,      39876,   1.182007,   1.900000,   2.100000,   2.300000,   0.537120,   0.207000,   3.526000, 559.248987
Outstanding requests per worker:
8 2 4 3 5 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151109,      16977,     114112,      36997,   1.227587,   2.000000,   2.100000,   2.400000,   0.558535,   0.212000,   3.623000, 578.239317
Outstanding requests per worker:
4 6 9 8 5 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.6,      168068,     151092,      16976,     115847,      35245,   1.262931,   2.100000,   2.200000,   2.600000,   0.583015,   0.211000,   3.844000, 591.558402
Outstanding requests per worker:
5 10 2 10 3 4 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151167,      16913,     117466,      33701,   1.359697,   2.200000,   2.500000,   3.000000,   0.642575,   0.223000,   4.116000, 602.189803
Outstanding requests per worker:
5 8 5 10 2 3 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:34   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   20:34   0:00 /usr/lib/linux
memcache     11 72.6  0.0 131520 47936 pts/0    Sl+  20:34   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  20:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75426960      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        1042243004      L1-dcache-loads:u                                           
         362061944      armv8_pmuv3_0/l2d_cache/:u                                   
          98242981      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.759865484 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2724655616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708206080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011719.010143,       0.0,       68076,      61318,       6758,      36092,      25226,   1.092311,   1.800000,   1.900000,   2.100000,   0.495337,   0.000000,   3.399000, 398.685084
Outstanding requests per worker:
7 5 6 2 5 7 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153368,      16849,     102491,      50877,   1.158569,   1.900000,   2.000000,   2.200000,   0.524135,   0.175000,   3.314000, 482.778226
Outstanding requests per worker:
8 4 6 2 9 7 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153319,      16905,     108791,      44528,   1.257170,   2.100000,   2.200000,   2.500000,   0.574501,   0.208000,   3.477000, 530.661973
Outstanding requests per worker:
4 8 2 6 5 3 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.0,      170215,     153058,      17157,     112538,      40520,   1.423147,   2.400000,   2.600000,   2.900000,   0.659321,   0.220000,   3.699000, 557.320036
Outstanding requests per worker:
5 10 2 7 6 3 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.4,      170237,     153031,      17206,     115194,      37837,   1.581523,   2.600000,   2.800000,   3.200000,   0.730606,   0.259000,   4.255000, 576.423084
Outstanding requests per worker:
9 7 8 3 1 9 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.0,      170210,     153305,      16905,     117355,      35950,   1.708147,   2.800000,   3.000000,   3.400000,   0.782104,   0.268000,   4.227000, 591.634878
Outstanding requests per worker:
3 10 13 6 5 7 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34030.0,      170150,     153187,      16963,     119011,      34176,   2.386063,   4.800000,   6.000000,   7.300000,   1.557290,   0.270000,   8.336000, 603.885415
Outstanding requests per worker:
21 18 19 29 10 8 6 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:35   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   20:35   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 48000 pts/0    Sl+  20:35   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75211068      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        1056057224      L1-dcache-loads:u                                           
         362061311      armv8_pmuv3_0/l2d_cache/:u                                   
          95411396      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000479926 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2517103104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500653568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011767.010191,       0.0,       69217,      62209,       7008,      36624,      25585,   1.746778,   2.900000,   3.200000,   3.500000,   0.812243,   0.000000,   3.963000, 399.814705
Outstanding requests per worker:
14 7 3 11 9 5 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34583.2,      172916,     155664,      17252,     104836,      50828,   4.900666,  10.100000,  11.100000,  12.300000,   3.373472,   0.365000,  14.074000, 489.435798
Outstanding requests per worker:
51 44 48 46 43 50 23 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34607.8,      173039,     155669,      17370,     110856,      44813,  11.070902,  13.600000,  14.500000,  15.900000,   1.970836,   3.731000,  17.624000, 533.119876
Outstanding requests per worker:
59 54 51 53 53 60 66 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34616.6,      173083,     155678,      17405,     114684,      40994,  14.225188,  16.800000,  17.400000,  18.500000,   1.973991,   5.999000,  20.365000, 559.088278
Outstanding requests per worker:
73 74 71 68 66 43 72 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34612.4,      173062,     155675,      17387,     117466,      38209,  17.027824,  20.000000,  20.700000,  22.100000,   2.332702,   8.830000,  28.213000, 578.927509
Outstanding requests per worker:
76 96 90 74 93 65 81 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34655.2,      173276,     156005,      17271,     119692,      36313,  21.129238,  32.000000,  37.000000,  45.100000,   6.813998,  10.360000,  56.086998, 592.491907
Outstanding requests per worker:
152 229 72 76 78 86 71 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34495.2,      172476,     155133,      17343,     120903,      34230,  33.098765,  53.700000,  61.400000,  70.400000,  15.302441,  11.372000,  79.259999, 606.995965
Outstanding requests per worker:
250 318 151 71 190 187 103 255 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:36   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:36   0:00 /usr/lib/linux
memcache      9 72.6  0.0 132544 48960 pts/0    Sl+  20:36   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  20:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77276573      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        1097824992      L1-dcache-loads:u                                           
         375538894      armv8_pmuv3_0/l2d_cache/:u                                   
         100527303      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050846872 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2666721792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650272256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633822720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407526912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391077376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374627840
starting receive base loop
Created 8 connections total
Creating worker on tid 2358178304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011816.010240,       0.0,       69760,      62732,       7028,      37379,      25353,   7.263450,  12.500000,  13.300000,  15.800000,   4.221566,   0.000000,  19.718001, 404.517280
Outstanding requests per worker:
79 36 53 34 39 76 60 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35001.2,      175006,     157402,      17604,     105404,      51998,  18.256765,  29.000000,  32.300000,  37.400000,   6.441625,   5.300000,  43.834999, 485.497008
Outstanding requests per worker:
120 95 157 92 113 132 90 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34827.0,      174135,     156448,      17687,     111443,      45005,  40.453166,  79.200000,  85.100000,  98.000000,  23.610627,  13.028000, 106.041998, 533.570880
Outstanding requests per worker:
368 325 375 77 324 418 165 156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34643.8,      173219,     155929,      17290,     115000,      40929,  91.464340, 140.600000, 149.700000, 162.400000,  37.322696,  12.697000, 177.352995, 559.722495
Outstanding requests per worker:
630 652 732 338 555 751 494 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34492.2,      172461,     155129,      17332,     116808,      38321, 169.068532, 226.000000, 243.700000, 256.600000,  44.675677,  64.142004, 264.138013, 577.006659
Outstanding requests per worker:
919 1087 1069 684 953 1135 904 685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34439.4,      172197,     155139,      17058,     119306,      35833, 257.443517, 313.700000, 328.200000, 344.100000,  48.144932, 151.024997, 358.478010, 593.803621
Outstanding requests per worker:
1423 1468 1374 1108 1313 1580 1457 967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34368.8,      171844,     154552,      17292,     119988,      34564, 356.112019, 422.500000, 440.200000, 468.200000,  54.399303, 216.658995, 479.510993, 603.677837
Outstanding requests per worker:
1890 1997 1749 1568 1763 2086 1884 1365 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:37   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48256 pts/0    Sl+  20:37   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75133369      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1099919386      L1-dcache-loads:u                                           
         374254900      armv8_pmuv3_0/l2d_cache/:u                                   
         106262319      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839275791 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2852712960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836263424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011864.010288,       0.0,       70518,      63473,       7045,      37520,      25953,  11.999196,  17.100000,  26.500000,  32.600000,   6.470443,   0.000000,  40.899999, 400.511777
Outstanding requests per worker:
64 165 66 66 58 72 69 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35292.4,      176462,     158888,      17574,     106674,      52214,  34.092708,  75.400000, 134.900000, 151.700000,  34.116878,   8.503000, 159.108996, 487.111664
Outstanding requests per worker:
125 660 215 254 109 169 276 146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35011.4,      175057,     157324,      17733,     112543,      44781,  89.800275, 163.100000, 199.000000, 232.600000,  47.651613,  16.492000, 246.060997, 534.425345
Outstanding requests per worker:
470 1066 538 541 431 477 674 495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34862.0,      174310,     156783,      17527,     115181,      41602, 180.311854, 263.600000, 316.000000, 336.300000,  55.965394,  96.625000, 345.245004, 557.939311
Outstanding requests per worker:
784 1519 920 1014 1085 877 1064 907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34765.2,      173826,     156411,      17415,     117888,      38523, 285.733019, 378.200000, 428.700000, 449.900000,  61.729999, 170.298994, 457.004011, 577.188503
Outstanding requests per worker:
1230 1992 1527 1527 1561 1281 1550 1466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34768.2,      173841,     156521,      17320,     120202,      36319, 399.042838, 474.800000, 518.900000, 537.100000,  57.972120, 271.234989, 546.252012, 593.192709
Outstanding requests per worker:
1746 2408 2100 1945 2092 1749 2025 2021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34855.8,      174279,     156856,      17423,     122095,      34761, 502.359733, 568.500000, 589.700000, 631.500000,  52.232333, 389.766008, 647.705972, 604.316653
Outstanding requests per worker:
2162 2858 2626 2429 2530 2212 2410 2379 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:37   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   20:37   0:00 /usr/lib/linux
memcache     11 72.6  0.0 133568 48768 pts/0    Sl+  20:37   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76406109      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1109079458      L1-dcache-loads:u                                           
         378271970      armv8_pmuv3_0/l2d_cache/:u                                   
         102170743      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951811547 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2278617600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2262168064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245718528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229268992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011913.010337,       0.0,       70888,      63792,       7096,      37837,      25955,  19.351878,  31.200000,  36.300000,  41.500000,   8.733239,   0.000000,  46.222001, 402.952502
Outstanding requests per worker:
102 150 122 181 116 191 142 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35251.2,      176256,     158619,      17637,     106233,      52386,  83.405034, 137.400000, 151.300000, 186.900000,  38.487138,  18.029001, 203.602999, 486.979876
Outstanding requests per worker:
425 737 542 643 627 728 549 884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34973.6,      174868,     157109,      17759,     111958,      45151, 214.719141, 289.400000, 304.900000, 331.400000,  53.539131,  91.651998, 341.518998, 533.407469
Outstanding requests per worker:
1057 1450 1173 1370 1422 1256 1203 1527 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35011.6,      175058,     157415,      17643,     116566,      40849, 362.727154, 428.900000, 453.300000, 473.300000,  52.212777, 226.738006, 482.347995, 562.844589
Outstanding requests per worker:
1634 2115 1873 1910 2084 1946 1867 2166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35128.4,      175642,     157894,      17748,     119303,      38591, 495.456605, 565.700000, 586.700000, 612.400000,  53.404614, 360.390007, 622.820973, 579.693744
Outstanding requests per worker:
2222 2787 2402 2324 2737 2481 2574 2624 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35256.4,      176282,     158780,      17502,     121786,      36994, 616.457080, 693.000000, 706.600000, 720.600000,  53.169973, 487.091005, 734.066010, 592.506890
Outstanding requests per worker:
2717 3297 2943 2755 3249 2980 2977 3155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35318.8,      176594,     158997,      17597,     123809,      35188, 719.053305, 787.900000, 800.100000, 810.300000,  50.571177, 598.320007, 819.213986, 605.293590
Outstanding requests per worker:
3130 3661 3443 3195 3668 3480 3440 3653 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 48960 pts/0    Sl+  20:38   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76045661      L1-dcache-load-misses:u   # [33m   6.81%[m of all L1-dcache hits  
        1117424771      L1-dcache-loads:u                                           
         377914408      armv8_pmuv3_0/l2d_cache/:u                                   
         102612998      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150082833 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3037917696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576011961.010385,       0.0,       71311,      64158,       7153,      38090,      26068,  27.092334,  51.100000,  58.000000,  64.300000,  15.412840,   0.000000,  70.372000, 402.140824
Outstanding requests per worker:
207 316 214 263 171 88 225 296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35353.0,      176765,     158945,      17820,     106866,      52079, 123.857406, 194.600000, 206.300000, 222.300000,  50.396744,  16.638000, 236.765996, 488.635610
Outstanding requests per worker:
1062 948 1021 1036 945 825 895 946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35157.0,      175785,     158197,      17588,     113127,      45070, 304.692654, 382.000000, 401.200000, 422.400000,  58.826919, 179.608002, 437.290013, 534.535168
Outstanding requests per worker:
1859 1987 1882 1935 1761 1690 1719 1734 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35363.6,      176818,     159034,      17784,     117508,      41526, 479.793564, 549.400000, 561.800000, 581.400000,  51.327586, 368.272007, 601.930976, 561.583699
Outstanding requests per worker:
2609 2672 2547 2731 2531 2362 2427 2533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35524.8,      177624,     159970,      17654,     120903,      39067, 630.334810, 686.800000, 696.000000, 728.600000,  44.771588, 513.604999, 742.352009, 579.300094
Outstanding requests per worker:
3201 3194 3132 3355 3228 3116 3164 3061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35632.0,      178160,     160381,      17779,     123232,      37149, 760.137183, 812.700000, 824.700000, 851.500000,  39.948503, 669.552982, 861.266017, 593.761194
Outstanding requests per worker:
3818 3727 3776 3901 3797 3720 3640 3582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35655.6,      178278,     160388,      17890,     124545,      35843, 879.713429, 941.900000, 955.200000, 973.100000,  45.001807, 777.305007, 986.186028, 603.476357
Outstanding requests per worker:
4258 4324 4490 4402 4393 4264 4180 4045 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:39   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   20:39   0:00 /usr/lib/linux
memcache     10 72.6  0.0 133568 48192 pts/0    Sl+  20:39   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77304578      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1125817012      L1-dcache-loads:u                                           
         382982489      armv8_pmuv3_0/l2d_cache/:u                                   
         101280305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.581975409 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3021206016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3004756480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2988306944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971857408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012010.010434,       0.0,       70082,      63052,       7030,      37270,      25782,  56.219781, 100.400000, 106.900000, 122.400000,  31.017223,   0.000000, 133.824006, 400.181136
Outstanding requests per worker:
597 466 489 448 572 495 508 442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35034.6,      175173,     157705,      17468,     106092,      51613, 247.793071, 354.700000, 367.600000, 402.700000,  80.747393,  89.732997, 416.550994, 487.853860
Outstanding requests per worker:
1906 1678 1694 1690 1892 1726 1751 1712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35372.4,      176862,     159165,      17697,     113889,      45276, 496.674168, 587.100000, 602.400000, 623.300000,  68.570971, 359.306991, 641.287982, 536.063821
Outstanding requests per worker:
2878 2767 2795 2855 2938 2768 2656 2726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35746.4,      178732,     161026,      17706,     118989,      42037, 693.422837, 763.000000, 775.800000, 793.100000,  53.732152, 572.224021, 802.115023, 561.295629
Outstanding requests per worker:
3700 3692 3566 3538 3683 3564 3620 3492 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35863.2,      179316,     161375,      17941,     121709,      39666, 862.317087, 927.100000, 939.000000, 956.200000,  48.037066, 750.806987, 968.034029, 578.686178
Outstanding requests per worker:
4474 4340 4216 4243 4398 4386 4269 4417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36007.2,      180036,     162155,      17881,     124458,      37697, 1007.588517, 1064.600000, 1078.400000, 1098.700000,  43.268947, 906.319976, 1107.810974, 593.941377
Outstanding requests per worker:
5089 5036 4789 4932 4991 4968 4995 5118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36076.8,      180384,     162200,      18184,     126417,      35783, 1143.624291, 1205.800000, 1215.000000, 1234.000000,  44.300425, 1030.648947, 1243.975043, 605.980832
Outstanding requests per worker:
5653 5601 5331 5503 5593 5581 5726 5739 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:40   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:40   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49280 pts/0    Sl+  20:40   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78973286      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1127428523      L1-dcache-loads:u                                           
         384338066      armv8_pmuv3_0/l2d_cache/:u                                   
         102753894      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120565612 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2732126720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715677184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699227648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012058.010482,       0.0,       70398,      63331,       7067,      37499,      25832,  63.551177, 114.900000, 122.300000, 135.200000,  35.774105,   0.000000, 143.832996, 401.355150
Outstanding requests per worker:
599 672 502 627 591 508 602 643 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35264.8,      176324,     158686,      17638,     106495,      52191, 284.593610, 404.900000, 420.700000, 437.400000,  90.535267, 104.184002, 450.984001, 486.211077
Outstanding requests per worker:
2099 2046 1902 2088 2096 1935 2060 1998 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35787.8,      178939,     161120,      17819,     114859,      46261, 555.094134, 651.900000, 667.300000, 683.300000,  71.014819, 401.955992, 703.225017, 534.089914
Outstanding requests per worker:
3193 3077 2989 3177 3285 3160 3206 3008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36180.2,      180901,     162736,      18165,     120213,      42523, 765.003874, 843.600000, 856.800000, 886.600000,  58.701626, 634.208024, 905.870020, 560.561185
Outstanding requests per worker:
3996 3960 3839 4003 4242 4109 4066 3793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36397.0,      181985,     163503,      18482,     123798,      39705, 932.106385, 1005.600000, 1022.300000, 1050.500000,  55.380387, 803.716004, 1064.571023, 582.004966
Outstanding requests per worker:
4727 4589 4688 4819 4976 4770 4773 4497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36483.0,      182415,     164396,      18019,     126498,      37898, 1080.824869, 1158.700000, 1173.700000, 1210.100000,  53.396018, 956.066012, 1220.816970, 595.381566
Outstanding requests per worker:
5540 5251 5232 5380 5695 5513 5454 5164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36601.8,      183009,     164516,      18493,     128267,      36249, 1213.609149, 1287.700000, 1303.700000, 1343.700000,  55.044502, 1094.879031, 1356.848955, 607.325701
Outstanding requests per worker:
6203 5915 5771 6085 6364 5967 6079 5647 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:41   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   20:41   0:00 /usr/lib/linux
memcache     11 69.4  0.0 133568 50240 pts/0    Sl+  20:41   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80385530      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        1141541437      L1-dcache-loads:u                                           
         389418507      armv8_pmuv3_0/l2d_cache/:u                                   
         103758120      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.390425447 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2787308032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770858496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012107.010531,       0.0,       71088,      64017,       7071,      38047,      25970,  67.848739, 120.200000, 127.000000, 138.600000,  37.777623,   0.000000, 154.103994, 403.195870
Outstanding requests per worker:
630 627 634 650 624 605 719 641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35607.0,      178035,     160267,      17768,     107768,      52499, 303.105532, 432.700000, 449.700000, 472.800000,  96.178154, 123.240001, 495.521992, 487.750616
Outstanding requests per worker:
2278 2330 2004 2267 2128 2227 2213 2137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36163.8,      180819,     162712,      18107,     116612,      46100, 595.327369, 698.100000, 716.200000, 735.700000,  77.029858, 420.836985, 749.207020, 536.543973
Outstanding requests per worker:
3509 3559 3212 3526 3286 3390 3356 3414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36476.2,      182381,     164105,      18276,     121448,      42657, 824.873883, 911.600000, 932.600000, 972.100000,  67.268848, 671.615005, 992.228985, 563.529307
Outstanding requests per worker:
4445 4635 4268 4727 4162 4398 4334 4390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36622.2,      183111,     164821,      18290,     124965,      39856, 1027.283465, 1115.200000, 1152.900000, 1182.200000,  68.105357, 871.590018, 1198.057055, 582.675405
Outstanding requests per worker:
5361 5586 5119 5697 5119 5305 5269 5279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36831.0,      184155,     165686,      18469,     127802,      37884, 1205.130533, 1294.400000, 1327.400000, 1364.500000,  66.662532, 1070.103049, 1386.111975, 595.869494
Outstanding requests per worker:
6150 6462 5736 6573 5929 6140 5889 6190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37052.2,      185261,     166842,      18419,     130298,      36544, 1359.349421, 1453.400000, 1479.000000, 1515.800000,  69.949595, 1202.324986, 1526.947975, 607.865460
Outstanding requests per worker:
6753 7068 6409 7248 6571 6895 6522 6837 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:41   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48192 pts/0    Sl+  20:41   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  20:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79016072      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1157451978      L1-dcache-loads:u                                           
         393354028      armv8_pmuv3_0/l2d_cache/:u                                   
         106351040      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930263879 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2425680384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2409230848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2392781312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2376331776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359882240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012155.010579,       0.0,       71587,      64354,       7233,      38068,      26286,  74.046692, 133.300000, 142.000000, 153.600000,  42.482123,   0.000000, 163.890004, 401.489993
Outstanding requests per worker:
769 727 761 720 764 656 652 687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35880.0,      179400,     161607,      17793,     108463,      53144, 338.182589, 477.400000, 492.600000, 508.600000, 104.686499, 130.514994, 520.377994, 486.801314
Outstanding requests per worker:
2472 2411 2485 2499 2475 2400 2453 2395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36544.6,      182723,     164359,      18364,     117927,      46432, 651.807629, 757.400000, 771.700000, 803.200000,  81.133628, 493.779987, 820.487022, 537.252898
Outstanding requests per worker:
3657 3748 3861 3955 3800 3712 3710 3671 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37028.8,      185144,     166739,      18405,     123175,      43564, 886.239520, 973.200000, 988.700000, 1015.500000,  64.519773, 736.829996, 1026.275039, 562.079460
Outstanding requests per worker:
4570 4799 4935 4932 4848 4754 4742 4638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37305.4,      186527,     167861,      18666,     127077,      40784, 1077.991006, 1158.500000, 1182.000000, 1234.400000,  62.147041, 939.276993, 1251.721978, 582.056219
Outstanding requests per worker:
5315 5631 6046 5743 5714 5600 5499 5392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37429.0,      187145,     168316,      18829,     129722,      38594, 1241.653816, 1321.400000, 1342.400000, 1370.700000,  61.205214, 1099.143028, 1382.038951, 597.190119
Outstanding requests per worker:
6037 6400 6641 6660 6481 6308 6347 6170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37449.8,      187249,     168336,      18913,     131542,      36794, 1395.629783, 1472.800000, 1492.400000, 1520.600000,  58.576349, 1246.783018, 1535.509944, 608.686734
Outstanding requests per worker:
6726 7166 7391 7311 7274 7120 6731 6994 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:42   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:42   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50304 pts/0    Sl+  20:42   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  20:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80981755      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1171444480      L1-dcache-loads:u                                           
         398237833      armv8_pmuv3_0/l2d_cache/:u                                   
         104266514      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100294907 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2575888896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559439360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012204.010628,       0.0,       70865,      63656,       7209,      38022,      25634,  93.362801, 166.300000, 176.500000, 188.900000,  52.565265,   0.000000, 203.094006, 406.784859
Outstanding requests per worker:
916 849 984 910 867 928 846 917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36006.0,      180030,     162111,      17919,     109388,      52723, 389.775141, 536.500000, 554.700000, 581.100000, 111.524304, 169.327006, 596.027017, 490.597325
Outstanding requests per worker:
2746 2833 2871 2665 2726 2902 2699 2884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36758.0,      183790,     165500,      18290,     118711,      46789, 722.460992, 832.700000, 849.300000, 884.800000,  84.924143, 543.956995, 913.201988, 538.350097
Outstanding requests per worker:
4134 4241 3508 4007 4098 4206 4189 4354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37174.0,      185870,     167362,      18508,     123910,      43452, 966.664476, 1070.300000, 1087.900000, 1130.400000,  79.422060, 726.140022, 1156.438947, 563.092906
Outstanding requests per worker:
5221 5374 4814 5134 5301 5338 5316 5545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37440.4,      187202,     168334,      18868,     127894,      40440, 1163.239720, 1275.100000, 1294.000000, 1328.800000, 110.392794, 757.242978, 1366.215944, 583.359868
Outstanding requests per worker:
6151 6360 4231 6203 6336 6283 6377 6639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37285.2,      186426,     168007,      18419,     129735,      38272, 1343.973177, 1485.900000, 1505.100000, 1532.600000, 154.089630, 790.872991, 1568.804026, 598.586422
Outstanding requests per worker:
6628 6345 4638 7176 7451 7461 7370 6820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37031.0,      185155,     166544,      18611,     130179,      36365, 1495.919907, 1709.000000, 1737.700000, 1777.200000, 205.494630, 885.308027, 1800.629973, 608.664791
Outstanding requests per worker:
6992 6414 5297 8470 8767 8712 8599 6987 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:43   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:43   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50176 pts/0    Sl+  20:43   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  20:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80478224      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1170194103      L1-dcache-loads:u                                           
         396264202      armv8_pmuv3_0/l2d_cache/:u                                   
         105410236      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930709696 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2432627200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012252.010676,       0.0,       71005,      63931,       7074,      37972,      25959, 104.041572, 185.200000, 196.700000, 215.500000,  59.520239,   0.000000, 228.729993, 403.411772
Outstanding requests per worker:
1081 959 991 1013 1109 1028 1023 1034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36244.2,      181221,     163244,      17977,     109733,      53511, 438.187282, 599.900000, 616.900000, 639.900000, 123.964780, 189.585999, 658.344984, 488.852834
Outstanding requests per worker:
3243 3076 3115 2924 3237 3160 3044 3153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37342.8,      186714,     168234,      18480,     120654,      47580, 780.591435, 893.200000, 907.200000, 935.200000,  84.539472, 603.276014, 958.805978, 537.141999
Outstanding requests per worker:
4747 4525 4463 4446 4575 4517 4490 4610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37410.8,      187054,     168271,      18783,     124405,      43866, 1035.942567, 1158.900000, 1183.300000, 1217.500000,  85.896528, 830.357015, 1242.452979, 563.132667
Outstanding requests per worker:
6150 5877 5456 5294 4805 4903 5879 5571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37052.4,      185262,     166584,      18678,     126071,      40513, 1216.455933, 1415.000000, 1456.500000, 1512.800000, 151.889052, 831.471026, 1548.874021, 581.787321
Outstanding requests per worker:
7132 5641 5284 5428 5364 5005 7368 6879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36905.8,      184529,     166284,      18245,     127917,      38367, 1306.470750, 1592.500000, 1674.200000, 1779.100000, 204.156988, 874.783993, 1822.734952, 595.944757
Outstanding requests per worker:
6451 5494 6106 6142 4312 4687 7355 6791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36754.0,      183770,     165342,      18428,     129251,      36091, 1363.981513, 1692.100000, 1801.800000, 1876.000000, 219.987345, 915.462971, 1952.479005, 608.766266
Outstanding requests per worker:
7693 6271 6224 6185 4849 4855 8407 6207 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:44   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   20:44   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  20:44   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81109327      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1169792308      L1-dcache-loads:u                                           
         399346186      armv8_pmuv3_0/l2d_cache/:u                                   
         106629125      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240433495 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2468999680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2452550144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2436100608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012301.010725,       0.0,       71035,      63836,       7199,      37766,      26070, 115.207649, 202.700000, 215.200000, 229.300000,  64.650770,   0.000000, 244.694993, 402.017232
Outstanding requests per worker:
1104 1092 1177 1133 1135 1211 1010 1134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36647.0,      183235,     164761,      18474,     110927,      53834, 452.267639, 609.600000, 630.300000, 652.100000, 121.317153, 202.314004, 668.917000, 489.127409
Outstanding requests per worker:
3172 3176 3287 3221 3328 3328 2984 3287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37742.6,      188713,     169968,      18745,     121870,      48098, 788.837832, 901.400000, 922.400000, 939.100000,  82.694052, 571.204007, 953.984976, 537.585763
Outstanding requests per worker:
4576 4554 4678 4737 3867 4737 4348 4722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37624.0,      188120,     169367,      18753,     125403,      43964, 1026.719615, 1175.900000, 1201.700000, 1232.300000, 106.864760, 710.346997, 1252.711058, 563.972397
Outstanding requests per worker:
6051 4405 5644 6269 4441 5564 5180 6220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37257.8,      186289,     167599,      18690,     126870,      40729, 1179.939305, 1402.200000, 1455.100000, 1514.900000, 178.448874, 718.738019, 1572.587013, 582.459269
Outstanding requests per worker:
6587 4579 6225 5986 3995 5935 5427 6634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37091.6,      185458,     167199,      18259,     128807,      38392, 1250.451137, 1498.800000, 1533.200000, 1587.600000, 186.354075, 762.995005, 1633.023024, 596.560416
Outstanding requests per worker:
7068 5477 6196 6725 4467 5864 4959 6330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37000.6,      185003,     166429,      18574,     130109,      36320, 1259.372605, 1491.000000, 1532.200000, 1586.300000, 183.172192, 778.241992, 1643.370032, 608.522577
Outstanding requests per worker:
6985 6008 5827 7024 4456 5158 5564 6698 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:45   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   20:45   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50304 pts/0    Sl+  20:45   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  20:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81735894      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1178744637      L1-dcache-loads:u                                           
         401535602      armv8_pmuv3_0/l2d_cache/:u                                   
         105875504      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939849540 seconds time elapsed

