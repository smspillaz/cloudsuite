+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2111107584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1513484800
starting receive base loop
num_worker_connections 64
Creating worker on tid 917565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 321647104
starting receive base loop
num_worker_connections 64
Creating worker on tid 4020695552
starting receive base loop
num_worker_connections 64
Creating worker on tid 3424776704
starting receive base loop
num_worker_connections 64
Creating worker on tid 2828857856
starting receive base loop
Created 512 connections total
Creating worker on tid 2232939008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575795816.794241,       0.0,       77864,      69937,       7927,      42011,      27926,   0.607395,   0.229100,   0.387100,   1.500000,   6.085993,   0.000000, 170.521006, 408.892332
Outstanding requests per worker:
0 1 1 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112631,      12377,      75044,      37587,   0.144229,   0.244100,   0.380100,   0.504100,   0.088854,   0.067000,   0.907000, 481.665518
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112493,      12515,      78951,      33542,   0.142800,   0.239100,   0.375100,   0.491100,   0.086027,   0.070000,   0.930000, 521.152027
Outstanding requests per worker:
0 1 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.2,      125011,     112330,      12681,      81158,      31172,   0.143117,   0.239100,   0.375100,   0.490100,   0.085716,   0.066000,   0.864000, 542.411760
Outstanding requests per worker:
1 0 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112531,      12483,      83047,      29484,   0.143544,   0.240100,   0.375100,   0.492100,   0.086448,   0.066000,   1.002000, 561.126090
Outstanding requests per worker:
0 0 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112560,      12447,      84478,      28082,   0.143972,   0.242100,   0.377100,   0.493100,   0.087237,   0.071000,   1.182000, 573.503376
Outstanding requests per worker:
0 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112584,      12424,      85588,      26996,   0.143990,   0.243100,   0.376100,   0.493100,   0.086607,   0.070000,   0.785000, 584.433650
Outstanding requests per worker:
0 1 1 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:37   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   08:37   0:00 /usr/lib/linux
memcache     10 57.4  0.0 122304 46208 pts/0    Sl+  08:37   0:27 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3070072346      instructions:u                                              

      47.679437112 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2190209536
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575795867.794292,       0.0,       91507,      82279,       9228,      49447,      32832,   1.025413,   0.459100,   2.800000,  16.200000,   7.227661,   0.000000, 171.716005, 412.433197
Outstanding requests per worker:
1 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135303,      15090,      91570,      43733,   0.164713,   0.327000,   0.374100,   0.462100,   0.098716,   0.068000,   0.889000, 492.429503
Outstanding requests per worker:
0 1 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135280,      15103,      96339,      38941,   0.169677,   0.331100,   0.390100,   0.479100,   0.105541,   0.068000,   1.020000, 532.297524
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135122,      15262,      98856,      36266,   0.170997,   0.332100,   0.388000,   0.475100,   0.104200,   0.068000,   1.022000, 553.782419
Outstanding requests per worker:
1 1 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135319,      15072,     101464,      33855,   0.170458,   0.329100,   0.382100,   0.460100,   0.099704,   0.068000,   0.901000, 574.075496
Outstanding requests per worker:
1 0 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135385,      15007,     103045,      32340,   0.174977,   0.340100,   0.392000,   0.477100,   0.108889,   0.067000,   1.148000, 585.567020
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135294,      15088,     104614,      30680,   0.175705,   0.337100,   0.390100,   0.480100,   0.109923,   0.068000,   1.286000, 599.547400
Outstanding requests per worker:
0 0 1 1 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:37   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:37   0:00 /usr/lib/linux
memcache      9 69.1  0.0 129472 54208 pts/0    Sl+  08:37   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3695861581      instructions:u                                              

      47.280199585 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1898574336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575795919.794344,       0.0,      107127,      96326,      10801,      58945,      37381,  25.518721,  62.600000,  79.400000, 123.500000,  41.212317,   0.000000, 975.117981, 423.044827
Outstanding requests per worker:
136 155 143 134 138 124 164 121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35169.8,      175849,     158280,      17569,     108368,      49912,  21.727601,  42.700000,  45.200000,  57.900000,  13.968821,   0.129000,  80.793999, 500.272511
Outstanding requests per worker:
81 81 96 92 97 84 90 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35083.4,      175417,     157954,      17463,     114056,      43898,  21.686437,  44.200000,  46.800000,  49.100000,  13.621316,   0.119000,  51.865000, 541.810211
Outstanding requests per worker:
105 93 89 86 90 93 105 100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35087.2,      175436,     158090,      17346,     117093,      40997,  22.309089,  45.600000,  48.700000,  51.600000,  14.098290,   0.107000,  55.204000, 563.666083
Outstanding requests per worker:
80 96 104 99 97 96 115 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35084.6,      175423,     158013,      17410,     119497,      38516,  23.481677,  48.300000,  52.100000,  55.000000,  14.935343,   0.106000,  59.423000, 581.439331
Outstanding requests per worker:
88 94 103 117 103 109 100 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35081.2,      175406,     158040,      17366,     121973,      36067,  24.465978,  50.500000,  54.700000,  58.300000,  15.659461,   0.119000,  66.435002, 597.768331
Outstanding requests per worker:
114 99 108 98 103 119 117 101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35093.2,      175466,     157991,      17475,     123304,      34687,  24.833148,  51.300000,  56.000000,  59.000000,  15.848544,   0.118000,  64.241000, 606.831902
Outstanding requests per worker:
108 106 112 104 98 111 116 100 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:38   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   08:38   0:00 /usr/lib/linux
memcache     10 69.3  0.0 132544 59392 pts/0    Sl+  08:38   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4239182892      instructions:u                                              

      47.950136947 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2275537408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575795970.794395,       0.0,      108861,      97916,      10945,      59876,      38040,  38.172911,  52.500000,  78.500000, 840.000000, 139.293824,   0.000000, 1988.509059, 421.470679
Outstanding requests per worker:
213 180 197 210 200 181 232 9475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38321.2,      191606,     172391,      19215,     118262,      54129, 234.369581, 212.400000, 1325.000000, 4121.500000, 712.861674,   0.160000, 6867.455959, 503.405172
Outstanding requests per worker:
677 542 567 595 639 593 554 15130 
count  185894
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38730.2,      193651,     174243,      19408,     126295,      47948, 605.185141, 565.500000, 3893.300000, 8000.000000, 1401.111336,   0.463000, 9249.654770, 545.784066
Outstanding requests per worker:
1754 1810 1760 1757 1856 1729 1743 13256 
count  188120
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38922.8,      194614,     175175,      19439,     130683,      44492, 740.827312, 777.700000, 2845.300000, 8000.000000, 1241.269199,   0.673000, 9091.139793, 569.437814
Outstanding requests per worker:
2554 2711 2658 2682 2689 2608 2632 12543 
count  190243
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39067.2,      195336,     175889,      19447,     134035,      41854, 851.672732, 946.000000, 2178.800000, 7000.000000, 1122.254452,   2.950000, 9117.179871, 588.160931
Outstanding requests per worker:
3173 3337 3239 3453 3331 3360 3411 12464 
count  191500
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39216.0,      196080,     176510,      19570,     136588,      39922, 957.217301, 1134.900000, 1991.200000, 7000.000000, 1057.156250,  26.578000, 8814.258575, 601.446122
Outstanding requests per worker:
3885 3927 3790 4017 3812 3943 3911 12419 
count  191750
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39205.6,      196028,     176444,      19584,     138497,      37947, 1047.535527, 1290.200000, 1774.200000, 7000.000000, 1012.856300,  52.028999, 8878.072739, 612.901946
Outstanding requests per worker:
4304 4458 4440 4371 4466 4582 4477 12599 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:39   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   08:39   0:00 /usr/lib/linux
memcache     11 70.9  0.0 138688 78208 pts/0    Sl+  08:39   0:33 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  08:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4812573672      instructions:u                                              

      47.370616393 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2612523520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2015490560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3929403904
starting receive base loop
num_worker_connections 64
Creating worker on tid 3333485056
starting receive base loop
Created 512 connections total
Creating worker on tid 2737566208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796021.794446,       0.0,      118375,     106551,      11824,      65555,      40996,  39.395370,  70.200000,  96.500000, 639.900000, 119.847069,   0.000000, 2007.071972, 426.416045
Outstanding requests per worker:
298 297 260 298 249 306 5530 11299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38685.8,      193429,     174066,      19363,     120021,      54045, 273.416446, 331.000000, 1232.300000, 4283.400000, 718.106389,   0.292000, 6877.742767, 506.845673
Outstanding requests per worker:
1260 1302 1239 1228 1237 1319 5233 38292 
count  182684
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37667.2,      188336,     169391,      18945,     122801,      46590, 713.888923, 797.100000, 2938.800000, 8000.000000, 1286.319926,   0.642000, 11023.358345, 546.791565
Outstanding requests per worker:
3641 3549 3628 3593 3710 3702 6650 48818 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36940.8,      184704,     166464,      18240,     124465,      41999, 913.267202, 1200.800000, 1353.300000, 3795.700000, 494.607083,  75.103000, 4698.923111, 571.437764
Outstanding requests per worker:
5465 5463 5525 5700 5509 5620 8244 48818 
count  179811
count  179811
count  179811
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43812.0,      219060,     197213,      21847,     150600,      46613, 3619.577599, 14000.000000, 16000.000000, 18000.000000, 5023.184143, 311.937004, 19322.767258, 588.385355
Outstanding requests per worker:
8708 8827 8706 8864 8962 8971 11605 72418 
count  175074
count  175074
count  175074
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39426.4,      197132,     177129,      20003,     137677,      39452, 2917.865711, 6000.000000, 9000.000000, 18000.000000, 3147.366030, 634.948015, 19578.992844, 604.027980
Outstanding requests per worker:
12316 12347 12452 12486 12364 12645 15307 76021 
count  169906
count  169906
count  169906
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39362.4,      196812,     177066,      19746,     139418,      37648, 3599.652047, 9000.000000, 11000.000000, 13000.000000, 2836.178455, 995.387018, 19958.751678, 615.193007
Outstanding requests per worker:
15746 16079 16114 16202 15855 16332 19082 79728 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:40   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:40   0:00 /usr/lib/linux
memcache      9 70.2  0.0 137664 78784 pts/0    Sl+  08:40   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4870119379      instructions:u                                              

      47.330528090 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2183459328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1588654592
starting receive base loop
num_worker_connections 64
Creating worker on tid 992735744
starting receive base loop
num_worker_connections 64
Creating worker on tid 396816896
starting receive base loop
num_worker_connections 64
Creating worker on tid 4095865344
starting receive base loop
num_worker_connections 64
Creating worker on tid 3499946496
starting receive base loop
num_worker_connections 64
Creating worker on tid 2904027648
starting receive base loop
Created 512 connections total
Creating worker on tid 2310730240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796072.794497,       0.0,      122899,     110698,      12201,      68551,      42147,  43.535529,  61.000000,  97.200000, 765.100000, 136.356878,   0.000000, 2012.270927, 430.841623
Outstanding requests per worker:
274 287 268 298 232 1595 13020 12500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38664.4,      193322,     174093,      19229,     120156,      53937, 309.331634, 352.000000, 1784.500000, 4665.500000, 785.474448,   0.261000, 6959.887981, 509.220583
Outstanding requests per worker:
1614 1580 1542 1580 1616 1652 31833 43752 
count  177900
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37086.0,      185430,     167017,      18413,     120996,      46021, 832.269159, 777.900000, 3699.600000, 11000.000000, 1649.339053,   0.840000, 11656.545639, 546.059647
Outstanding requests per worker:
3892 3941 4093 4279 4050 3930 35141 53346 
count  178641
count  178641
count  178641
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40338.0,      201690,     181564,      20126,     135491,      46073, 1999.958324, 7000.000000, 10000.000000, 12000.000000, 2709.190187, 101.131000, 15384.757996, 569.240339
Outstanding requests per worker:
7986 8041 8057 7956 8177 8029 44211 54456 
count  171790
count  171790
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37945.8,      189729,     171015,      18714,     130758,      40257, 2411.756929, 4725.200000, 8000.000000, 13000.000000, 2331.076039, 512.409985, 18673.133850, 589.767465
Outstanding requests per worker:
12477 12335 12041 12118 12369 12389 48541 54713 
count  164801
count  164801
count  164801
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40416.0,      202080,     181702,      20378,     140973,      40729, 4878.509544, 12000.000000, 25000.000000, 26000.000000, 6309.828232, 954.155028, 26148.063660, 601.813519
Outstanding requests per worker:
17212 16848 16726 16914 17333 17192 53274 56008 
count  145390
count  145390
count  145390
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40219.6,      201098,     181186,      19912,     142625,      38561, 7109.801060, 23000.000000, 24000.000000, 27000.000000, 7311.681314, 1440.670013, 27902.582169, 615.002980
Outstanding requests per worker:
24227 24285 23792 24176 24525 24332 60672 95196 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:41   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   08:41   0:00 /usr/lib/linux
memcache      8 70.3  0.0 137664 78208 pts/0    Sl+  08:41   0:33 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  08:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4862047563      instructions:u                                              

      47.411880418 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2337337856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1738994176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
Created 512 connections total
Creating worker on tid 2461069824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796124.794549,       0.0,      131216,     118182,      13034,      73056,      45126,  65.386332,  72.800000, 287.500000, 1128.200000, 192.720331,   0.000000, 2120.402098, 430.426901
Outstanding requests per worker:
305 337 311 258 293 10649 15058 13793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38518.8,      192594,     173437,      19157,     120211,      53226, 362.372262, 419.100000, 2149.900000, 4858.900000, 854.575654,   0.331000, 7068.119049, 511.440189
Outstanding requests per worker:
2052 2037 2067 1993 1938 16385 49543 48278 
count  182179
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37728.2,      188641,     169795,      18846,     123250,      46545, 878.012753, 1123.700000, 4159.000000, 7000.000000, 1226.135523,   1.120000, 8400.121689, 548.077900
Outstanding requests per worker:
5372 5401 5381 5214 5157 18586 53985 55136 
count  181256
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37836.0,      189180,     170452,      18728,     127602,      42850, 1432.362077, 1709.200000, 4610.300000, 8000.000000, 1715.283863, 272.215009, 16604.185104, 572.256864
Outstanding requests per worker:
8465 8673 8569 8325 8586 21607 54157 55136 
count  164740
count  164740
count  164740
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43170.6,      215853,     194083,      21770,     148390,      45693, 4810.453371, 17000.000000, 18000.000000, 19000.000000, 5954.234042, 348.618001, 19751.646042, 589.350149
Outstanding requests per worker:
14602 14366 14478 14332 14311 27363 87040 55136 
count  152579
count  152579
count  152579
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36801.4,      184007,     165676,      18331,     128715,      36961, 4021.071587, 7000.000000, 10000.000000, 20000.000000, 3582.992707, 1149.585009, 21414.506912, 602.852163
Outstanding requests per worker:
22618 22697 22857 22470 22420 35704 115165 55136 
count  142996
count  142996
count  142996
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37239.6,      186198,     167566,      18632,     131793,      35773, 5060.876287, 10000.000000, 11000.000000, 12000.000000, 2850.169852, 2056.586981, 31803.607941, 614.782754
Outstanding requests per worker:
30608 30709 30666 30463 30424 43801 123115 55203 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:42   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:42   0:00 /usr/lib/linux
memcache      9 72.4  0.0 138688 79424 pts/0    Sl+  08:42   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4902308952      instructions:u                                              

      47.582806226 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2596598272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1999368704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
Created 512 connections total
Creating worker on tid 2721444352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796175.794600,       0.0,      135206,     121619,      13587,      75423,      46196,  89.326469,  86.100000, 355.000000, 1725.900000, 282.943626,   0.000000, 2699.815035, 430.927462
Outstanding requests per worker:
494 466 437 390 2447 16096 16341 15038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38876.8,      194384,     174945,      19439,     120971,      53974, 447.909049, 907.900000, 2287.500000, 4873.000000, 889.591533,   0.567000, 7030.435085, 509.911978
Outstanding requests per worker:
2878 2839 2758 2907 3286 36871 53940 51186 
count  177380
count  177380
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39380.2,      196901,     177004,      19897,     128974,      48030, 1437.786882, 4953.300000, 8000.000000, 11000.000000, 2268.178600,   8.468000, 10914.579391, 549.956572
Outstanding requests per worker:
7018 6549 6771 6960 6998 45938 54160 51186 
count  172791
count  172791
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37761.0,      188805,     170046,      18759,     127293,      42753, 2058.739740, 4170.700000, 9000.000000, 11000.000000, 2091.204933, 196.367994, 12016.320229, 572.582172
Outstanding requests per worker:
13154 12755 12729 13059 13209 52113 54160 51186 
count  163377
count  163377
count  163377
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37516.2,      187581,     168718,      18863,     129348,      39370, 3054.592962, 7000.000000, 9000.000000, 12000.000000, 2468.495975, 922.389984, 21024.576187, 592.560071
Outstanding requests per worker:
19771 19351 19167 19594 19729 58678 54272 51186 
count  140377
count  140377
count  140377
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42659.8,      213299,     191931,      21368,     148835,      43096, 7693.305935, 21000.000000, 22000.000000, 23000.000000, 7114.469070, 1582.062006, 24934.568405, 601.901626
Outstanding requests per worker:
30226 29805 29821 29911 30135 68939 118562 51186 
count  85048
count  85048
count  85048
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35733.0,      178665,     160675,      17990,     126380,      34295, 6345.385039, 11000.000000, 14000.000000, 25000.000000, 3893.170529, 2924.638033, 26385.734558, 614.350030
Outstanding requests per worker:
41872 41616 41355 41801 41976 80869 163388 51186 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:43   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   08:43   0:00 /usr/lib/linux
memcache      8 72.5  0.0 139840 77760 pts/0    Sl+  08:43   0:34 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  08:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4915073146      instructions:u                                              

      47.684560393 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1734406656
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
num_worker_connections 64
Creating worker on tid 2453008896
starting receive base loop
Created 512 connections total
Creating worker on tid 1857090048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796226.794651,       0.0,      138459,     124693,      13766,      77212,      47481,  90.180170,  95.700000, 257.100000, 1741.100000, 287.961410,   0.000000, 3196.223974, 430.684353
Outstanding requests per worker:
620 627 577 645 8876 17652 17585 16260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38818.8,      194094,     174579,      19515,     121095,      53484, 535.413757, 1157.000000, 3132.800000, 4420.200000, 919.928592,   0.556000, 6481.025219, 512.321963
Outstanding requests per worker:
3879 3970 3993 3798 10029 48148 54840 51750 
count  182074
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37240.8,      186204,     167789,      18415,     121987,      45802, 1102.446521, 1311.500000, 3184.700000, 11000.000000, 1500.532131, 133.187994, 11283.795357, 549.848423
Outstanding requests per worker:
8112 8219 8076 8145 14317 48561 54840 51750 
count  175768
count  175768
count  175768
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43311.4,      216557,     194814,      21743,     145736,      49078, 3240.631604, 11000.000000, 12000.000000, 13000.000000, 3559.820934, 375.849009, 14324.357033, 572.419169
Outstanding requests per worker:
16114 16170 15797 15960 21831 78207 55148 51750 
count  157091
count  157091
count  157091
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37635.0,      188175,     169319,      18856,     129923,      39396, 3602.052108, 7000.000000, 8000.000000, 15000.000000, 2680.539147, 1098.726034, 21869.094849, 593.065580
Outstanding requests per worker:
25642 25575 25566 25358 31505 87784 55264 51750 
count  138753
count  138753
count  138753
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42258.0,      211290,     190277,      21013,     148000,      42277, 7862.749868, 23000.000000, 25000.000000, 25000.000000, 7135.137380, 2036.552906, 26023.601532, 604.430877
Outstanding requests per worker:
36807 36695 36708 36577 42640 99034 85240 51750 
count  37530
count  37530
count  37530
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36068.6,      180343,     162203,      18140,     128003,      34200, 8357.638039, 17000.000000, 25000.000000, 27000.000000, 5848.090889, 3236.176014, 31268.337250, 618.335555
Outstanding requests per worker:
51440 51420 51629 51363 57187 113874 139446 52077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:43   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:43   0:00 /usr/lib/linux
memcache      9 71.2  0.0 139712 77376 pts/0    Sl+  08:43   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4971342650      instructions:u                                              

      47.822420294 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2164584960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1572532736
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796277.794702,       0.0,      140685,     126659,      14026,      79035,      47624,  95.102589, 122.100000, 272.600000, 1764.600000, 289.325630,   0.000000, 3136.007071, 436.121989
Outstanding requests per worker:
813 775 791 849 17439 18958 18887 17544 
count  191988
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39090.0,      195450,     176073,      19377,     122217,      53856, 665.775849, 1480.900000, 3491.500000, 6000.000000, 1107.803923,   0.471000, 6754.542828, 513.014835
Outstanding requests per worker:
5003 4909 4872 5256 24599 53222 53642 52532 
count  180495
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37780.8,      188904,     169969,      18935,     123554,      46415, 1368.540017, 3004.900000, 4827.400000, 7000.000000, 1344.663133, 153.126001, 11011.322021, 549.136195
Outstanding requests per worker:
11173 11189 11162 11275 30494 53341 53642 52532 
count  167036
count  167036
count  167036
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43392.4,      216962,     195176,      21786,     146208,      48968, 4105.666704, 14000.000000, 15000.000000, 15000.000000, 4483.691190, 636.116028, 15912.707329, 573.943666
Outstanding requests per worker:
19579 19474 19534 19514 38830 76890 53642 52532 
count  149913
count  149913
count  149913
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37035.0,      185175,     166681,      18494,     128057,      38624, 4367.431843, 8000.000000, 15000.000000, 17000.000000, 3273.827235, 1438.884020, 17814.760208, 594.572645
Outstanding requests per worker:
32658 32781 33057 32764 52101 122516 53642 52532 
count  104687
count  104687
count  104687
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37191.2,      185956,     167357,      18599,     130267,      37090, 5875.852313, 10000.000000, 11000.000000, 24000.000000, 3172.780617, 2669.709921, 25982.908249, 605.483398
Outstanding requests per worker:
46080 45921 46728 46099 65336 136000 53751 52532 
count  9071
count  9071
count  9071
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42215.4,      211077,     189960,      21117,     149324,      40636, 11296.228145, 27000.000000, 27000.000000, 29000.000000, 7870.098705, 1149.078012, 30190.277100, 614.186297
Outstanding requests per worker:
63224 62896 63274 62832 82358 152524 88867 52532 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:44   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:44   0:00 /usr/lib/linux
memcache      9 71.4  0.0 140736 78144 pts/0    Sl+  08:44   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5005034855      instructions:u                                              

      47.875821573 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2543776256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1948381696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
Created 512 connections total
Creating worker on tid 2670457344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796329.794754,       0.0,      143057,     128649,      14408,      80307,      48342, 109.806779, 177.400000, 277.200000, 1781.500000, 294.100226,   0.000000, 3181.020975, 436.009950
Outstanding requests per worker:
1307 1479 1391 1341 24586 20579 20503 18870 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36642.2,      183211,     164715,      18496,     114514,      50201, 580.060288, 806.300000, 1994.900000, 4340.700000, 752.917230,   0.891000, 6924.139023, 514.462520
Outstanding requests per worker:
6437 6609 6534 6530 36316 53572 53238 53693 
count  179832
count  179832
count  179832
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40871.4,      204357,     183934,      20423,     134154,      49780, 2086.777538, 6000.000000, 8000.000000, 9000.000000, 2078.792110,  98.306000, 11506.669998, 550.868469
Outstanding requests per worker:
15578 15688 15601 15488 52658 54279 53238 53693 
count  162608
count  162608
count  162608
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37008.6,      185043,     166494,      18549,     124948,      41546, 2988.507429, 6000.000000, 8000.000000, 10000.000000, 1896.952794, 974.826992, 15527.164459, 574.370398
Outstanding requests per worker:
26177 26016 26108 25868 63015 54470 53238 53693 
count  133882
count  133882
count  133882
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42295.4,      211477,     190425,      21052,     145865,      44560, 7033.574193, 17000.000000, 17000.000000, 19000.000000, 5276.022274, 1675.145984, 19845.401764, 591.081224
Outstanding requests per worker:
41595 41823 41780 41670 78725 92318 54127 53693 
count  39956
count  39956
count  39956
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35075.8,      175379,     157904,      17475,     123070,      34834, 6624.800534, 10000.000000, 13000.000000, 20000.000000, 3076.673789, 3406.761885, 27151.044846, 605.094139
Outstanding requests per worker:
58836 59149 59064 59168 96222 158277 54218 53693 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41167.6,      205838,     185184,      20654,     145814,      39370, 11808.296302, 29000.000000, 30000.000000, 30000.000000, 7790.440836, 5288.846970, 30784.275055, 614.737677
Outstanding requests per worker:
77653 77839 77654 77984 115006 174807 63785 53693 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:45   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   08:45   0:00 /usr/lib/linux
memcache     11 72.9  0.0 139712 75584 pts/0    Sl+  08:45   0:34 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  08:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4950734572      instructions:u                                              

      47.797933528 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2318791168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1722872320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
Created 512 connections total
Creating worker on tid 2444947968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796380.794805,       0.0,      149859,     134646,      15213,      84373,      50273, 139.714467, 246.800000, 331.300000, 1777.300000, 283.079800,   0.000000, 3162.780046, 438.756933
Outstanding requests per worker:
2413 2277 2329 2813 29498 22013 21930 20002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36508.0,      182540,     164235,      18305,     114711,      49524, 689.909582, 1003.200000, 1348.700000, 4071.000000, 662.645990,   0.859000, 6711.962223, 517.383189
Outstanding requests per worker:
9312 9047 9513 9365 42735 52881 53333 51825 
count  174269
count  174269
count  174269
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41803.2,      209016,     188278,      20738,     137322,      50956, 2482.993874, 8000.000000, 9000.000000, 10000.000000, 2352.308623, 370.402008, 10149.522781, 551.954084
Outstanding requests per worker:
20216 20036 20371 20228 67021 53791 53333 51825 
count  155907
count  155907
count  155907
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36980.0,      184900,     166636,      18264,     125355,      41281, 3500.266340, 7000.000000, 8000.000000, 15000.000000, 2040.154588, 1101.554036, 16675.683975, 575.201205
Outstanding requests per worker:
33659 33260 33889 33627 80495 54135 53333 51825 
count  118550
count  118550
count  118550
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41265.2,      206326,     185740,      20586,     141693,      44047, 7501.163738, 18000.000000, 18000.000000, 19000.000000, 5209.332715, 1851.277947, 20697.307587, 589.393588
Outstanding requests per worker:
51299 51165 51313 51134 98254 84319 53834 51825 
count  9659
count  9659
count  9659
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35917.6,      179588,     161534,      18054,     125729,      35805, 7634.157292, 13000.000000, 15000.000000, 22000.000000, 3424.080962, 3593.748093, 22498.945236, 604.186010
Outstanding requests per worker:
71541 71536 71657 71464 118446 156776 53834 51825 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37742.0,      188710,     169979,      18731,     133424,      36555, 11505.352487, 30000.000000, 31000.000000, 31000.000000, 6867.020152, 5954.740047, 31144.716263, 612.762035
Outstanding requests per worker:
92459 92664 92798 92478 139628 180744 55918 51825 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:46   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   08:46   0:00 /usr/lib/linux
memcache      9 72.0  0.0 137664 74880 pts/0    Sl+  08:46   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  08:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4966794757      instructions:u                                              

      48.141842978 seconds time elapsed

++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2121396736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796432.794857,       0.0,      147159,     132301,      14858,      82588,      49713, 152.798972, 276.300000, 350.100000, 1748.400000, 286.847062,   0.000000, 3073.185921, 436.106447
Outstanding requests per worker:
2847 2900 2643 5684 33145 22993 22908 21278 
count  185413
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37512.4,      187562,     168899,      18663,     117254,      51645, 816.342564, 1177.800000, 2091.200000, 6000.000000, 875.060998,   3.432000, 8142.334938, 513.900503
Outstanding requests per worker:
10895 11168 10871 13557 49172 52438 51257 53155 
count  172426
count  172426
count  172426
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42158.0,      210790,     189683,      21107,     138278,      51405, 2831.931927, 9000.000000, 10000.000000, 11000.000000, 2843.493771, 522.116005, 11004.424095, 551.331284
Outstanding requests per worker:
22535 22607 22434 25031 73780 52438 51257 53155 
count  162490
count  162490
count  162490
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37045.2,      185226,     166613,      18613,     125654,      40959, 3584.438375, 6000.000000, 8000.000000, 12000.000000, 1810.077832, 1204.512000, 12533.557892, 577.960705
Outstanding requests per worker:
38954 39259 38894 41541 102971 52438 51257 53155 
count  100864
count  100864
count  100864
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41831.8,      209159,     188152,      21007,     143875,      44277, 7766.656213, 19000.000000, 19000.000000, 20000.000000, 5349.476233, 2685.271025, 20589.202881, 590.441606
Outstanding requests per worker:
58592 59031 58055 61103 122237 83593 51257 53155 
count  5947
count  5947
count  5947
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35732.6,      178663,     160907,      17756,     125543,      35364, 8383.557417, 14000.000000, 20000.000000, 23000.000000, 4049.815740, 3729.238987, 26134.069443, 605.777636
Outstanding requests per worker:
82012 82439 81663 84486 145904 151131 52222 53155 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36372.4,      181862,     163753,      18109,     128992,      34761, 10716.407026, 16000.000000, 18000.000000, 31000.000000, 4346.120139, 6432.396889, 32056.842804, 616.049703
Outstanding requests per worker:
106406 106661 105929 108842 170235 168484 53019 53155 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:47   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   08:47   0:00 /usr/lib/linux
memcache     11 71.7  0.0 139712 75328 pts/0    Sl+  08:47   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5018474231      instructions:u                                              

      48.084401820 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1758589440
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
num_worker_connections 64
Creating worker on tid 2477191680
starting receive base loop
Created 512 connections total
Creating worker on tid 1881272832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796483.794908,       0.0,      150687,     135519,      15168,      84610,      50909, 160.760173, 286.700000, 409.800000, 1839.600000, 301.704215,   0.000000, 3069.413900, 436.566238
Outstanding requests per worker:
3158 3248 3234 11295 36159 24219 24125 22728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38392.4,      191962,     172868,      19094,     119894,      52974, 871.056478, 1391.400000, 2648.900000, 3800.200000, 758.438976,  49.996998, 7879.105091, 511.982021
Outstanding requests per worker:
12531 12593 12541 20534 52720 52197 52606 50189 
count  175800
count  175800
count  175800
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42718.2,      213591,     192317,      21274,     140687,      51630, 3176.512447, 10000.000000, 11000.000000, 12000.000000, 3203.216569, 613.421023, 12314.699173, 553.126515
Outstanding requests per worker:
25363 25450 25503 33431 79399 52197 52606 50189 
count  155141
count  155141
count  155141
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37078.6,      185393,     166769,      18624,     125339,      41430, 4068.284899, 6000.000000, 11000.000000, 13000.000000, 2262.672062, 1395.884037, 13891.634941, 575.399187
Outstanding requests per worker:
45432 45277 45769 53423 128621 52197 52606 50189 
count  72715
count  72715
count  72715
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42680.6,      213403,     192336,      21067,     146964,      45372, 8040.355132, 19000.000000, 20000.000000, 21000.000000, 5238.033415, 1370.859027, 21241.783142, 591.027728
Outstanding requests per worker:
67211 67152 67504 75313 150786 79203 52606 50189 
count  8146
count  8146
count  8146
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35025.2,      175126,     157438,      17688,     122635,      34803, 8835.072663, 14000.000000, 20000.000000, 23000.000000, 3997.988402, 1883.412004, 23456.182480, 605.159453
Outstanding requests per worker:
94315 94097 94220 102068 174148 139581 52606 50189 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33390.0,      166950,     150444,      16506,     118701,      31743, 10284.199257, 16000.000000, 16000.000000, 24000.000000, 2671.704341, 6352.249146, 25157.709122, 617.872896
Outstanding requests per worker:
120069 121320 118669 129129 190611 175426 52606 50189 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:48   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   08:48   0:00 /usr/lib/linux
memcache     10 73.1  0.0 139712 75648 pts/0    Sl+  08:48   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5039924893      instructions:u                                              

      47.840074508 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2128605696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796534.794959,       0.0,      154596,     139135,      15461,      87183,      51952, 173.060767, 311.300000, 451.800000, 1906.000000, 311.915518,   0.000000, 3138.284922, 438.149373
Outstanding requests per worker:
3775 3690 3556 16298 38356 26088 25991 23810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39103.0,      195515,     175908,      19607,     122408,      53500, 976.691538, 1802.100000, 3050.300000, 4220.100000, 814.715858,  46.767000, 5084.170818, 514.579689
Outstanding requests per worker:
14283 14358 14281 27129 54242 51428 52738 52799 
count  177251
count  177251
count  177251
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43677.8,      218389,     196744,      21645,     143666,      53078, 3504.250121, 11000.000000, 12000.000000, 12000.000000, 3392.455165, 697.422981, 12491.483688, 551.777020
Outstanding requests per worker:
28755 28839 28679 41525 66652 51428 52738 52799 
count  151726
count  151726
count  151726
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35899.4,      179497,     161544,      17953,     121495,      40049, 4331.403585, 7000.000000, 12000.000000, 14000.000000, 2471.235106, 1084.442973, 14307.947159, 577.066131
Outstanding requests per worker:
51410 51298 50967 63920 104787 51428 52738 52799 
count  46548
count  46548
count  46548
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39802.2,      199011,     179252,      19759,     137082,      42170, 7358.022156, 15000.000000, 21000.000000, 21000.000000, 4474.547982, 3546.941042, 21868.719101, 591.906746
Outstanding requests per worker:
75399 75125 74956 87651 160760 53081 53589 52799 
count  11636
count  11636
count  11636
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39092.8,      195464,     176105,      19359,     137208,      38897, 10061.788150, 20000.000000, 21000.000000, 23000.000000, 4946.885535, 1886.630058, 24357.225418, 605.706993
Outstanding requests per worker:
104468 104224 103630 116603 159481 120577 53589 52799 
count  240
count  240
count  240
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36111.2,      180556,     162488,      18068,     128055,      34433, 10894.468591, 15000.000000, 16000.000000, 24000.000000, 2795.934809, 4779.337883, 29026.794434, 615.630563
Outstanding requests per worker:
133672 132453 128528 143980 193477 156820 53701 52799 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:49   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   08:49   0:00 /usr/lib/linux
memcache     11 71.8  0.0 140736 77248 pts/0    Sl+  08:49   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5076221888      instructions:u                                              

      47.827090047 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1962471936
starting receive base loop
num_worker_connections 64
Creating worker on tid 1368584704
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796586.795011,       0.0,      159406,     143372,      16034,      90399,      52973, 215.805215, 413.200000, 545.100000, 1953.400000, 325.098425,   0.000000, 3168.864012, 441.972094
Outstanding requests per worker:
5287 5229 5383 20244 40654 27517 27415 25001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38914.4,      194572,     175082,      19490,     122296,      52786, 1214.480437, 2312.300000, 3481.900000, 4744.000000, 902.588278, 185.901001, 5526.827812, 517.146897
Outstanding requests per worker:
18757 18715 18984 35134 53324 51227 52857 51032 
count  174378
count  174378
count  174378
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41010.0,      205050,     184689,      20361,     135205,      49484, 3511.344127, 12000.000000, 12000.000000, 13000.000000, 3077.532498, 883.450985, 12780.418396, 554.368863
Outstanding requests per worker:
35684 35745 35889 52122 55972 51227 52857 51032 
count  133917
count  133917
count  133917
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37595.8,      187979,     169286,      18693,     127358,      41928, 5390.151039, 11000.000000, 13000.000000, 15000.000000, 3004.649040, 1324.967027, 15764.822006, 576.342048
Outstanding requests per worker:
61478 61639 61754 77916 119644 52281 52857 51032 
count  8793
count  8793
count  8793
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38066.4,      190332,     171451,      18881,     131578,      39873, 7419.819064, 10000.000000, 22000.000000, 22000.000000, 3749.872805, 4153.545856, 22021.045685, 592.669457
Outstanding requests per worker:
88162 88421 88249 104813 162514 52924 52857 51032 
count  3710
count  3710
count  3710
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37921.8,      189609,     170825,      18784,     132808,      38017, 11478.818188, 22000.000000, 22000.000000, 24000.000000, 5164.384423, 2438.981056, 24706.319809, 604.073291
Outstanding requests per worker:
116919 115940 120645 136048 164172 91397 52857 51032 
count  77
count  77
count  77
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35772.4,      178862,     160977,      17885,     126861,      34116, 11893.604562, 16000.000000, 17000.000000, 27000.000000, 3220.536711, 4343.286991, 31570.198059, 614.877958
Outstanding requests per worker:
150377 153784 149766 170528 187097 127295 52954 51032 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:49   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   08:49   0:00 /usr/lib/linux
memcache     10 72.0  0.0 139712 77376 pts/0    Sl+  08:49   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5029618025      instructions:u                                              

      47.970036261 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2270294528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1671885312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
Created 512 connections total
Creating worker on tid 2393960960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796637.795062,       0.0,      154404,     138815,      15589,      87358,      51457, 218.382854, 418.800000, 548.600000, 1858.200000, 313.625376,   0.000000, 3052.340031, 442.112488
Outstanding requests per worker:
5677 5776 5742 24650 40947 27648 27540 26318 
count  194983
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39643.4,      198217,     178315,      19902,     124765,      53550, 1323.063992, 2732.100000, 4097.100000, 6000.000000, 1047.351450, 179.613993, 5992.334843, 518.034899
Outstanding requests per worker:
21322 20884 21074 43530 51732 50304 52714 54172 
count  172373
count  172373
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37817.2,      189086,     170472,      18614,     125084,      45388, 2895.375301, 4714.100000, 6000.000000, 12000.000000, 1622.190987, 1113.564014, 13074.245453, 554.867198
Outstanding requests per worker:
40614 40458 40350 62966 52249 50304 52714 54172 
count  129384
count  129384
count  129384
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42294.2,      211471,     190287,      21184,     142651,      47636, 6175.028128, 13000.000000, 13000.000000, 15000.000000, 3509.987095, 1423.027992, 15479.578018, 574.457956
Outstanding requests per worker:
68678 68531 68362 90961 107067 52199 52714 54172 
count  6911
count  6911
count  6911
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35726.0,      178630,     161016,      17614,     123637,      37379, 6894.778716, 9000.000000, 10000.000000, 16000.000000, 1841.545339, 3957.700014, 19967.544556, 592.697421
Outstanding requests per worker:
98516 97993 97948 119236 170790 52385 52714 54172 
count  4421
count  4421
count  4421
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38767.8,      193839,     174590,      19249,     135522,      39068, 12194.067558, 23000.000000, 23000.000000, 24000.000000, 5648.399134, 2401.752949, 25333.322525, 601.467553
Outstanding requests per worker:
131099 127250 130170 155332 172116 79364 52747 54172 
count  3070
count  3070
count  3070
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36413.4,      182067,     163715,      18352,     129215,      34500, 12110.920868, 16000.000000, 17000.000000, 26000.000000, 3322.700639, 3287.499905, 27768.043518, 617.018007
Outstanding requests per worker:
164351 165201 164432 192740 210972 147188 53283 54172 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:50   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   08:50   0:00 /usr/lib/linux
memcache     11 73.1  0.0 139712 75904 pts/0    Sl+  08:50   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  08:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5025529807      instructions:u                                              

      47.962777100 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1917448704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796688.795113,       0.0,      156428,     140732,      15696,      88115,      52617, 250.473061, 485.700000, 622.700000, 1931.700000, 333.658003,   0.000000, 3096.884012, 438.931885
Outstanding requests per worker:
6962 6944 7003 30196 43920 29324 29211 27780 
count  190839
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39830.0,      199150,     179321,      19829,     125136,      54185, 1535.948099, 3520.300000, 4797.000000, 6000.000000, 1231.823621, 166.943997, 6604.582787, 516.070494
Outstanding requests per worker:
24894 24965 24980 55074 53512 53648 53694 51892 
count  168341
count  168341
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37342.2,      186711,     168241,      18470,     123211,      45030, 3164.385892, 4961.100000, 7000.000000, 12000.000000, 1462.341313, 1422.906995, 11466.487885, 553.634738
Outstanding requests per worker:
48050 48479 48573 78404 53808 53648 53694 51892 
count  101452
count  101452
count  101452
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42895.4,      214477,     193083,      21394,     144837,      48246, 6689.370356, 14000.000000, 14000.000000, 15000.000000, 3608.770921, 1440.963984, 15788.027763, 573.618382
Outstanding requests per worker:
79130 79025 79526 109231 103532 53648 53694 51892 
count  5719
count  5719
count  5719
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36436.4,      182182,     164057,      18125,     125502,      38555, 7751.020031, 10000.000000, 12000.000000, 22000.000000, 2655.086572, 3662.048101, 21665.805817, 590.683567
Outstanding requests per worker:
112928 112910 113324 142578 153090 53841 53694 51892 
count  5966
count  5966
count  5966
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38231.2,      191156,     172033,      19123,     133468,      38565, 12558.469026, 23000.000000, 23000.000000, 25000.000000, 5512.095514, 1450.440049, 25221.242905, 602.618021
Outstanding requests per worker:
140478 147059 140396 180897 157424 127314 53694 51892 
count  628
count  628
count  628
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36483.8,      182419,     164354,      18065,     129624,      34730, 12992.976421, 16000.000000, 18000.000000, 27000.000000, 3782.830712, 3380.990982, 28553.016663, 615.362285
Outstanding requests per worker:
179090 181945 188143 216377 167319 182385 53906 51892 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:51   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   08:51   0:00 /usr/lib/linux
memcache      8 71.6  0.0 139712 75200 pts/0    Sl+  08:51   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5032824050      instructions:u                                              

      47.855168584 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1839264256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796739.795164,       0.0,      159692,     143836,      15856,      90669,      53167, 258.576139, 498.800000, 646.300000, 1947.200000, 340.997550,   0.000000, 3123.475075, 441.765219
Outstanding requests per worker:
7701 7680 7534 35501 45826 30744 30625 28988 
count  187293
count  187293
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40512.0,      202560,     182426,      20134,     127287,      55139, 1684.492572, 4463.700000, 6000.000000, 7000.000000, 1457.992407, 224.353001, 6998.714924, 515.929917
Outstanding requests per worker:
26809 26642 26823 65472 53149 52638 52786 51952 
count  168172
count  168172
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37013.6,      185068,     166527,      18541,     121636,      44891, 3195.406919, 4860.200000, 6000.000000, 8000.000000, 1308.058523, 1311.035991, 12975.037575, 552.392231
Outstanding requests per worker:
53337 53018 53122 91784 53254 52638 52786 51952 
count  79584
count  79584
count  79584
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41626.4,      208132,     187555,      20577,     140716,      46839, 7214.697690, 14000.000000, 15000.000000, 16000.000000, 3796.878557, 2823.168993, 16481.964111, 574.232433
Outstanding requests per worker:
86592 86325 86242 125172 90963 52638 52786 51952 
count  3139
count  3139
count  3139
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33651.6,      168258,     151391,      16867,     115916,      35475, 8162.623007, 12000.000000, 14000.000000, 22000.000000, 2929.680580, 3450.037956, 22027.902603, 592.206855
Outstanding requests per worker:
123144 123239 121729 149630 149564 53270 52786 51952 
count  2477
count  2477
count  2477
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40615.2,      203076,     183096,      19980,     142066,      41030, 13082.343436, 24000.000000, 24000.000000, 25000.000000, 5417.870960, 1701.882958, 26250.389099, 603.175771
Outstanding requests per worker:
150612 156341 162385 202026 150075 102810 53681 51952 
count  4199
count  4199
count  4199
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31936.8,      159684,     143593,      16091,     112812,      30781, 13426.437854, 17000.000000, 20000.000000, 28000.000000, 4094.658048, 2809.037924, 28744.052887, 613.298928
Outstanding requests per worker:
194581 189788 206681 241771 153918 154584 53681 51952 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:52   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   08:52   0:00 /usr/lib/linux
memcache      8 71.6  0.0 137664 72448 pts/0    Sl+  08:52   0:34 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  08:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4967242808      instructions:u                                              

      47.870768381 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2621895168
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796791.795216,       0.0,       37793,      34001,       3792,      19516,      14485,   0.619808,   0.122100,   0.166100,   0.544100,   6.725085,   0.000000, 184.187993, 382.128290
Outstanding requests per worker:
0 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54041,       6024,      33569,      20472,   0.102020,   0.123100,   0.149100,   0.413100,   0.056437,   0.065000,   0.840000, 434.621306
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      54191,       5871,      35808,      18383,   0.103716,   0.121100,   0.195100,   0.462100,   0.066697,   0.066000,   0.880000, 475.787861
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.6,       60068,      53987,       6081,      36687,      17300,   0.103862,   0.121100,   0.192100,   0.467100,   0.067381,   0.066000,   1.143000, 498.030785
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.0,       60060,      54053,       6007,      37703,      16350,   0.103952,   0.121100,   0.195100,   0.470100,   0.066958,   0.067000,   0.754000, 517.034133
Outstanding requests per worker:
0 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      53959,       6107,      38347,      15612,   0.104239,   0.121100,   0.194000,   0.471100,   0.067521,   0.066000,   0.793000, 530.787301
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      54195,       5871,      39090,      15105,   0.104166,   0.121100,   0.197100,   0.469100,   0.067052,   0.067000,   0.780000, 542.475653
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:53   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   08:53   0:00 /usr/lib/linux
memcache      8 33.0  0.0 107968 31104 pts/0    Sl+  08:53   0:15 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  08:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        1513693030      instructions:u                                              

      47.700183306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2359292416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1763176960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
Created 512 connections total
Creating worker on tid 2485252608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796842.795267,       0.0,      163837,     147486,      16351,      92986,      54500, 335.146335, 690.900000, 839.800000, 2048.500000, 377.352817,   0.000000, 3193.078995, 442.877643
Outstanding requests per worker:
11407 11074 11283 39425 50195 33774 33647 31253 
count  183609
count  183609
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40083.8,      200419,     180259,      20160,     126505,      53754, 1976.191341, 4678.300000, 6000.000000, 7000.000000, 1417.168042, 385.762006, 6941.184998, 520.838150
Outstanding requests per worker:
35957 35845 36256 73125 52506 53786 52914 53091 
count  166760
count  166760
count  166760
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37419.0,      187095,     168396,      18699,     123060,      45336, 3699.785933, 6000.000000, 7000.000000, 9000.000000, 1325.117984, 1821.094990, 12035.593033, 554.666073
Outstanding requests per worker:
68336 68115 68574 107113 52836 53786 52914 53091 
count  45327
count  45327
count  45327
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42157.6,      210788,     189565,      21223,     142366,      47199, 7662.150763, 14000.000000, 15000.000000, 16000.000000, 3540.280577, 1587.339044, 16764.034271, 575.458740
Outstanding requests per worker:
107277 107149 107447 137789 95046 53786 52914 53091 
count  7844
count  7844
count  7844
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34399.4,      171997,     154773,      17224,     118836,      35937, 8725.631710, 12000.000000, 13000.000000, 17000.000000, 2335.402683, 3347.692013, 19776.248932, 594.246245
Outstanding requests per worker:
142570 141231 140987 164974 150161 53786 52914 53091 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36375.8,      181879,     163930,      17949,     127214,      36716, 13834.692920, 24000.000000, 24000.000000, 25000.000000, 5291.481046, 7103.402138, 25685.501099, 603.465302
Outstanding requests per worker:
171568 178401 186087 218928 162327 91112 52914 53091 
count  816
count  816
count  816
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29607.4,      148037,     133264,      14773,     104899,      28365, 14759.708559, 25000.000000, 27000.000000, 29000.000000, 4695.258411, 3677.772045, 31355.884552, 613.622081
Outstanding requests per worker:
220303 242844 240843 234546 167324 145003 53038 53091 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:54   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   08:54   0:00 /usr/lib/linux
memcache      8 73.3  0.0 139712 76672 pts/0    Sl+  08:54   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4960421927      instructions:u                                              

      47.949825297 seconds time elapsed

+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1795682816
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796893.795318,       0.0,      164689,     148280,      16409,      93725,      54555, 336.756509, 687.700000, 838.900000, 2003.500000, 376.427490,   0.000000, 3087.088108, 444.588818
Outstanding requests per worker:
12061 11964 12389 45036 51675 34777 34644 32790 
count  175808
count  175808
count  175808
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41081.4,      205407,     184905,      20502,     128940,      55965, 2176.529352, 6000.000000, 7000.000000, 7000.000000, 1748.586625, 451.568007, 7331.252098, 517.257159
Outstanding requests per worker:
37050 37131 37735 51002 52878 50829 50612 51793 
count  164715
count  164715
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35878.8,      179394,     161560,      17834,     117974,      43586, 3632.390034, 4663.100000, 7000.000000, 9000.000000, 1287.403418, 712.243974, 9711.580276, 553.297964
Outstanding requests per worker:
73433 73482 73925 118863 52878 50829 50612 51793 
count  34526
count  34526
count  34526
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40398.8,      201994,     181788,      20206,     136453,      45335, 7546.117978, 15000.000000, 15000.000000, 15000.000000, 3502.338130, 3930.735111, 16072.128296, 573.972451
Outstanding requests per worker:
115371 110733 116076 167583 80233 50829 50612 51793 
count  11229
count  11229
count  11229
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33800.0,      169000,     152086,      16914,     116559,      35527, 9237.802639, 13000.000000, 17000.000000, 19000.000000, 3056.738495, 3291.243076, 20034.790039, 591.887879
Outstanding requests per worker:
149133 153994 160979 181819 145642 52724 50612 51793 
count  378
count  378
count  378
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39662.8,      198314,     178582,      19732,     138757,      39825, 13788.040174, 25000.000000, 25000.000000, 25000.000000, 5192.523513, 1727.697968, 26113.298416, 603.535356
Outstanding requests per worker:
191104 208641 211715 207011 149797 74698 50612 51793 
count  4636
count  4636
count  4636
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33976.2,      169881,     152861,      17020,     120388,      32473, 15070.106719, 20000.000000, 27000.000000, 29000.000000, 4649.135757, 2199.032068, 29970.668793, 615.012148
Outstanding requests per worker:
226841 267567 268246 216748 151031 113020 50612 51793 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:54   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   08:55   0:00 /usr/lib/linux
memcache      9 73.0  0.0 138688 73536 pts/0    Sl+  08:55   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  08:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4973257294      instructions:u                                              

      47.785791529 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1778512384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
num_worker_connections 64
Creating worker on tid 2501374464
starting receive base loop
Created 512 connections total
Creating worker on tid 1908077056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796944.795369,       0.0,      164946,     148431,      16515,      93584,      54847, 238.682567, 465.000000, 957.900000, 2174.400000, 395.050253,   0.000000, 3132.101059, 443.203866
Outstanding requests per worker:
7350 7144 21306 51801 53255 36124 35986 33902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37507.6,      187538,     168953,      18585,     118535,      50418, 1323.985397, 2433.700000, 3135.000000, 3944.900000, 783.093269, 181.218997, 4606.748104, 520.570455
Outstanding requests per worker:
29790 29225 43499 51801 53292 53931 51909 52348 
count  156232
count  156232
count  156232
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42448.6,      212243,     190868,      21375,     139580,      51288, 4240.044981, 9000.000000, 9000.000000, 11000.000000, 2504.071096, 1293.877959, 10901.811600, 553.350085
Outstanding requests per worker:
65547 64709 79446 97958 53292 53931 51909 52348 
count  63451
count  63451
count  63451
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40019.4,      200097,     180041,      20056,     135680,      44361, 6846.034675, 17000.000000, 17000.000000, 18000.000000, 3846.654941, 3400.394917, 17755.399704, 577.396537
Outstanding requests per worker:
106418 105574 117907 155068 55759 53931 51909 52348 
count  11970
count  11970
count  11970
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33121.8,      165609,     149072,      16537,     114438,      34634, 9617.695053, 17000.000000, 18000.000000, 20000.000000, 3930.810177, 2678.142071, 20715.547562, 593.144829
Outstanding requests per worker:
141327 151946 161242 166083 126119 53944 51909 52348 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33046.0,      165230,     148913,      16317,     115756,      33157, 10715.324204, 13000.000000, 14000.000000, 16000.000000, 2257.832161, 6106.789112, 22266.185760, 604.295569
Outstanding requests per worker:
190283 205766 202176 188112 156661 53944 51909 52348 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37644.6,      188223,     169354,      18869,     132851,      36503, 16961.345795, 28000.000000, 28000.000000, 29000.000000, 5652.808550, 8625.899315, 30641.353607, 611.862064
Outstanding requests per worker:
263947 262664 256810 206902 156757 99348 51909 52348 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:55   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   08:55   0:00 /usr/lib/linux
memcache     10 71.6  0.0 138688 75136 pts/0    Sl+  08:55   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4941791862      instructions:u                                              

      48.406348069 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1616245248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
num_worker_connections 64
Creating worker on tid 2334913024
starting receive base loop
Created 512 connections total
Creating worker on tid 1738994176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575796996.795421,       0.0,      164155,     147780,      16375,      93202,      54578, 250.969644, 487.500000, 995.600000, 2210.500000, 392.337510,   0.000000, 3180.943012, 443.369847
Outstanding requests per worker:
8234 8348 24797 50794 52797 37041 36900 35091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37765.0,      188825,     170164,      18661,     119216,      50948, 1483.888146, 2792.700000, 3419.300000, 4393.500000, 884.835440, 222.572997, 5302.164078, 518.638190
Outstanding requests per worker:
33624 33877 50193 52236 52797 51529 52619 52095 
count  151982
count  151982
count  151982
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42038.6,      210193,     188980,      21213,     138202,      50778, 4502.497708, 9000.000000, 10000.000000, 11000.000000, 2603.660609, 1552.541018, 11731.060028, 552.865541
Outstanding requests per worker:
70959 71472 87607 108344 53291 51529 52619 52095 
count  55523
count  55523
count  55523
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37887.8,      189439,     170459,      18980,     128595,      41864, 6557.440424, 9000.000000, 18000.000000, 18000.000000, 3385.262000, 3043.335915, 17848.558426, 578.445761
Outstanding requests per worker:
114764 115170 128653 183811 54269 51529 52619 52095 
count  6627
count  6627
count  6627
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35168.8,      175844,     158426,      17418,     121159,      37267, 10232.538555, 18000.000000, 19000.000000, 21000.000000, 4136.554895, 1854.421020, 21109.508514, 588.913587
Outstanding requests per worker:
147824 145537 166419 216105 108612 53368 52619 52095 
count  77
count  77
count  77
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31800.6,      159003,     143093,      15910,     111348,      31745, 11272.761577, 15000.000000, 15000.000000, 22000.000000, 2558.875454, 4596.346855, 26288.043976, 605.672073
Outstanding requests per worker:
193347 181664 210284 227149 170021 53382 52619 52095 
count  98
count  98
count  98
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37438.2,      187191,     168555,      18636,     132016,      36539, 17211.179210, 28000.000000, 28000.000000, 30000.000000, 5911.501799, 2641.266108, 30582.784653, 610.778452
Outstanding requests per worker:
268642 223281 276926 261225 169720 85454 52619 52095 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:56   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   08:56   0:00 /usr/lib/linux
memcache     11 71.5  0.0 139712 73600 pts/0    Sl+  08:56   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  08:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4936694864      instructions:u                                              

      48.143638367 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1747120640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575797047.795472,       0.0,      164317,     147867,      16450,      93539,      54328, 244.059135, 478.000000, 947.000000, 2117.900000, 375.535879,   0.000000, 3047.435999, 444.970501
Outstanding requests per worker:
8252 8256 30109 51591 51095 38388 38238 36366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38738.4,      193692,     174474,      19218,     122370,      52104, 1544.114366, 3124.800000, 3694.400000, 4434.600000, 965.603595, 109.967001, 5323.852062, 520.414830
Outstanding requests per worker:
35239 34986 58918 52054 51095 51059 53898 52782 
count  151416
count  151416
count  151416
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42380.8,      211904,     190533,      21371,     139602,      50931, 4561.420137, 10000.000000, 10000.000000, 11000.000000, 2662.923801, 1228.399038, 11389.168739, 554.089806
Outstanding requests per worker:
74543 74223 97895 88708 51095 51059 53898 52782 
count  58442
count  58442
count  58442
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36275.4,      181377,     163195,      18182,     123183,      40012, 6026.002367, 8000.000000, 10000.000000, 17000.000000, 2278.157226, 3239.531040, 18032.535553, 578.183921
Outstanding requests per worker:
118049 120445 144616 150213 51668 51059 53898 52782 
count  9823
count  9823
count  9823
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38462.0,      192310,     173151,      19159,     132584,      40567, 10472.343217, 18000.000000, 18000.000000, 20000.000000, 4257.672701, 1596.094012, 21219.001770, 591.313229
Outstanding requests per worker:
155690 158613 179265 157453 93700 51059 53898 52782 
count  7416
count  7416
count  7416
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33959.4,      169797,     152768,      17029,     119155,      33613, 10919.240920, 14000.000000, 15000.000000, 22000.000000, 2874.595627, 4344.462872, 22827.938080, 606.094994
Outstanding requests per worker:
208405 197010 217364 199573 158676 51059 53898 52782 
count  1207
count  1207
count  1207
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37644.2,      188221,     169711,      18510,     133149,      36562, 17600.916512, 28000.000000, 29000.000000, 30000.000000, 6123.817948, 3370.876074, 30912.071228, 612.133291
Outstanding requests per worker:
294591 223951 260961 216361 160560 80307 53898 52782 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:57   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   08:57   0:00 /usr/lib/linux
memcache      9 73.1  0.0 138688 75392 pts/0    Sl+  08:57   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4987956237      instructions:u                                              

      47.584900865 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2058482176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
num_worker_connections 64
Creating worker on tid 2780492288
starting receive base loop
Created 512 connections total
Creating worker on tid 2184573440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575797099.795524,       0.0,      164020,     147701,      16319,      93601,      54100, 255.411148, 567.900000, 898.000000, 1963.000000, 358.471384,   0.000000, 2831.401110, 444.701803
Outstanding requests per worker:
9012 9701 33206 50484 53164 39649 39494 37738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39196.6,      195983,     176368,      19615,     123497,      52871, 1649.463559, 3295.200000, 3870.100000, 4688.500000, 1022.794479,  91.011003, 5543.243885, 519.372358
Outstanding requests per worker:
38465 38970 68024 50484 53164 52686 52809 52080 
count  150151
count  150151
count  150151
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42502.8,      212514,     191351,      21163,     140306,      51045, 4767.113085, 10000.000000, 10000.000000, 11000.000000, 2689.769600, 1381.049037, 11728.092194, 555.565949
Outstanding requests per worker:
81040 81753 110615 86890 53164 52686 52809 52080 
count  43247
count  43247
count  43247
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33100.0,      165500,     148931,      16569,     112348,      36583, 6095.298585, 8000.000000, 9000.000000, 18000.000000, 2043.261226, 2590.755939, 18030.750275, 577.660071
Outstanding requests per worker:
129209 130215 143814 153666 53277 52686 52809 52080 
count  6779
count  6779
count  6779
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38545.8,      192729,     173422,      19307,     132878,      40544, 11071.183278, 19000.000000, 20000.000000, 21000.000000, 4513.882111, 2754.757881, 21447.692871, 591.300337
Outstanding requests per worker:
168245 166954 176227 170647 101892 52686 52809 52080 
count  3726
count  3726
count  3726
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35498.2,      177491,     159876,      17615,     124383,      35493, 11650.728791, 14000.000000, 15000.000000, 27000.000000, 3266.047196, 4606.771946, 26766.298294, 604.112256
Outstanding requests per worker:
219763 234893 201276 191306 158978 52841 52809 52080 
count  240
count  240
count  240
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34761.6,      173808,     156590,      17218,     123130,      33460, 17738.342395, 29000.000000, 29000.000000, 30000.000000, 5952.338011, 2256.603003, 30235.015869, 613.469225
Outstanding requests per worker:
284611 293682 216458 195742 172138 81525 52809 52080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:58   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   08:58   0:00 /usr/lib/linux
memcache     10 71.5  0.0 140736 78016 pts/0    Sl+  08:58   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4982209052      instructions:u                                              

      47.804035003 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2182083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 1588654592
starting receive base loop
num_worker_connections 64
Creating worker on tid 992735744
starting receive base loop
num_worker_connections 64
Creating worker on tid 396816896
starting receive base loop
num_worker_connections 64
Creating worker on tid 4095865344
starting receive base loop
num_worker_connections 64
Creating worker on tid 3499946496
starting receive base loop
num_worker_connections 64
Creating worker on tid 2904027648
starting receive base loop
Created 512 connections total
Creating worker on tid 2310730240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575797151.795576,       0.0,      166141,     149469,      16672,      95170,      54299, 275.978284, 649.900000, 959.400000, 1848.900000, 356.038354,   0.000000, 3206.809998, 446.671932
Outstanding requests per worker:
10370 11783 36623 49573 52661 42972 42808 39217 
count  196618
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39738.0,      198690,     178633,      20057,     125472,      53161, 1774.681776, 3654.500000, 4157.800000, 6000.000000, 1113.256678, 209.776998, 5821.519852, 521.630505
Outstanding requests per worker:
42671 43942 78504 49573 52661 53972 50198 51789 
count  143864
count  143864
count  143864
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41677.6,      208388,     187771,      20617,     137819,      49952, 5000.448893, 10000.000000, 11000.000000, 12000.000000, 2768.512015, 1542.129993, 12109.418869, 556.457291
Outstanding requests per worker:
88572 89928 115989 77932 52661 53972 50198 51789 
count  32061
count  32061
count  32061
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36255.4,      181277,     163188,      18089,     123224,      39964, 6570.140418, 9000.000000, 10000.000000, 18000.000000, 2098.581812, 2444.583893, 17640.647888, 579.694395
Outstanding requests per worker:
133901 132414 165619 140077 52943 53972 50198 51789 
count  7703
count  7703
count  7703
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37584.0,      187920,     169218,      18702,     130062,      39156, 11456.261254, 19000.000000, 19000.000000, 21000.000000, 4503.695284, 1893.291950, 21414.878845, 592.990019
Outstanding requests per worker:
180164 177592 226298 164704 95365 54180 50198 51789 
count  5203
count  5203
count  5203
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31674.4,      158372,     142721,      15651,     111190,      31531, 11729.940458, 15000.000000, 16000.000000, 24000.000000, 3403.365305, 3809.484959, 26964.956284, 604.518466
Outstanding requests per worker:
223289 251038 245426 202072 142296 54336 50198 51789 
count  367
count  367
count  367
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41191.8,      205959,     185389,      20570,     145356,      40033, 17648.827808, 29000.000000, 29000.000000, 31000.000000, 6215.461637, 3050.350904, 31259.180069, 611.974049
Outstanding requests per worker:
271863 324413 268310 227940 181101 94529 50198 51789 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:59   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   08:59   0:00 /usr/lib/linux
memcache      9 71.6  0.0 138688 73088 pts/0    Sl+  08:59   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5030398869      instructions:u                                              

      48.189509159 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2102915584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1505423872
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575797202.795627,       0.0,      165294,     148613,      16681,      94050,      54563, 294.684561, 718.600000, 1049.200000, 1789.700000, 359.220189,   0.000000, 2605.993986, 444.961538
Outstanding requests per worker:
10965 13465 37772 53346 51142 43224 43059 40000 
count  196948
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39906.8,      199534,     179714,      19820,     126275,      53439, 1841.631191, 3691.400000, 4189.400000, 6000.000000, 1134.416069, 218.450993, 7691.201210, 521.951039
Outstanding requests per worker:
44953 47410 83181 54269 51142 52671 53698 52866 
count  137201
count  137201
count  137201
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40872.8,      204364,     183769,      20595,     134707,      49062, 5201.314774, 11000.000000, 11000.000000, 11000.000000, 2826.567425, 1443.120003, 11979.348183, 556.368751
Outstanding requests per worker:
91977 94517 124354 81058 51142 52671 53698 52866 
count  25818
count  25818
count  25818
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33017.2,      165086,     148555,      16531,     111820,      36735, 6909.358360, 10000.000000, 12000.000000, 18000.000000, 2571.680631, 2205.380917, 17659.347534, 576.656726
Outstanding requests per worker:
143062 141272 165259 153046 51558 52671 53698 52866 
count  8392
count  8392
count  8392
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37863.2,      189316,     170557,      18759,     130471,      40086, 11111.601101, 19000.000000, 19000.000000, 21000.000000, 4559.148298, 2106.816053, 21817.474365, 589.772246
Outstanding requests per worker:
185644 178126 215917 155992 75826 52671 53698 52866 
count  5139
count  5139
count  5139
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37703.0,      188515,     169853,      18662,     132072,      37781, 12131.230806, 16000.000000, 17000.000000, 23000.000000, 3378.488131, 3535.645962, 26553.207397, 604.715478
Outstanding requests per worker:
251220 241202 234185 187872 129882 52722 53698 52866 
count  539
count  539
count  539
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35875.2,      179376,     161532,      17844,     126935,      34597, 18117.704691, 29000.000000, 30000.000000, 31000.000000, 6595.884940, 2518.364906, 31151.611328, 613.013644
Outstanding requests per worker:
302746 308198 236457 193293 151514 79239 53698 52866 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:00   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   09:00   0:00 /usr/lib/linux
memcache      9 71.6  0.0 139712 74944 pts/0    Sl+  09:00   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  09:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4963324544      instructions:u                                              

      48.192831228 seconds time elapsed

