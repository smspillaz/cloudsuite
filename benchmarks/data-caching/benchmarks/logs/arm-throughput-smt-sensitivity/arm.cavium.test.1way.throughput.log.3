+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2574578176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1975185920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
Created 512 connections total
Creating worker on tid 2694640128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801513.799938,       0.0,       77397,      69648,       7749,      41531,      28117,   0.699139,   0.217100,   0.376100,   2.000000,   6.935489,   0.000000, 192.699999, 405.594891
Outstanding requests per worker:
1 0 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112621,      12387,      75137,      37484,   0.132835,   0.216100,   0.365100,   0.464100,   0.082633,   0.065000,   1.353000, 480.017741
Outstanding requests per worker:
1 0 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112432,      12578,      78764,      33668,   0.132509,   0.216100,   0.365100,   0.465100,   0.082135,   0.066000,   0.891000, 519.268598
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.6,      125013,     112344,      12669,      81297,      31047,   0.133873,   0.220100,   0.368100,   0.476100,   0.084644,   0.068000,   1.025000, 544.220110
Outstanding requests per worker:
0 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112639,      12375,      83223,      29416,   0.133561,   0.218100,   0.366100,   0.470100,   0.083952,   0.067000,   1.055000, 560.337139
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112528,      12479,      84676,      27852,   0.133263,   0.218100,   0.366100,   0.466100,   0.082782,   0.066000,   0.994000, 575.530641
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112544,      12466,      85726,      26818,   0.132931,   0.217100,   0.365100,   0.460100,   0.081366,   0.067000,   0.768000, 586.413012
Outstanding requests per worker:
0 1 0 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:12   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:12   0:00 /usr/lib/linux
memcache     10 60.0  0.0 123328 46336 pts/0    Sl+  10:12   0:28 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3092445175      instructions:u                                              

      47.679436173 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2552230400
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801564.799989,       0.0,       91319,      82151,       9168,      49724,      32427,   0.641808,   0.363100,   0.477100,   3.100000,   5.618368,   0.000000, 124.545000, 415.783837
Outstanding requests per worker:
1 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135543,      14838,      91266,      44277,   0.168817,   0.325100,   0.375100,   0.462100,   0.097187,   0.064000,   0.929000, 489.862981
Outstanding requests per worker:
1 0 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135313,      15075,      96145,      39168,   0.172244,   0.328100,   0.382100,   0.473100,   0.099993,   0.061000,   0.908000, 529.788476
Outstanding requests per worker:
1 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135451,      14936,      99449,      36002,   0.173794,   0.331100,   0.386100,   0.471100,   0.101519,   0.066000,   1.189000, 554.912633
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135483,      14900,     101354,      34129,   0.175167,   0.335100,   0.387100,   0.467100,   0.099249,   0.062000,   0.886000, 572.612748
Outstanding requests per worker:
0 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135443,      14940,     103079,      32364,   0.176528,   0.333100,   0.386100,   0.483100,   0.106181,   0.065000,   1.273000, 585.501059
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135411,      14973,     104192,      31219,   0.177897,   0.337100,   0.389100,   0.482100,   0.104751,   0.066000,   1.141000, 595.127449
Outstanding requests per worker:
1 1 1 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:12   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:12   0:00 /usr/lib/linux
memcache      9 67.2  0.0 129472 54208 pts/0    Sl+  10:12   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3660120161      instructions:u                                              

      47.791117011 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1824846336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
num_worker_connections 64
Creating worker on tid 37089792
starting receive base loop
num_worker_connections 64
Creating worker on tid 3736138240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3140219392
starting receive base loop
num_worker_connections 64
Creating worker on tid 2544300544
starting receive base loop
Created 512 connections total
Creating worker on tid 1948381696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801615.800040,       0.0,      104571,      94007,      10564,      57518,      36489,  33.704575,  58.300000,  82.400000, 570.300000, 105.920892,   0.000000, 1706.490040, 422.032210
Outstanding requests per worker:
172 174 160 169 169 163 179 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35244.4,      176222,     158769,      17453,     108517,      50252,  21.151623,  39.900000,  42.200000,  62.000000,  16.482878,   0.114000, 722.813010, 500.666547
Outstanding requests per worker:
91 94 99 80 67 83 84 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35082.6,      175413,     157789,      17624,     113619,      44170,  20.108452,  40.000000,  42.400000,  45.200000,  12.474612,   0.112000,  47.781002, 541.787476
Outstanding requests per worker:
90 101 89 90 101 90 94 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35088.0,      175440,     157964,      17476,     117170,      40794,  20.699352,  41.700000,  43.900000,  46.200000,  12.915406,   0.103000,  49.217001, 564.845629
Outstanding requests per worker:
82 105 94 96 91 102 78 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35085.0,      175425,     157774,      17651,     119542,      38232,  21.660323,  44.000000,  46.900000,  49.300000,  13.610879,   0.110000,  53.495001, 583.680873
Outstanding requests per worker:
96 97 104 97 100 94 78 100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.2,      175446,     157920,      17526,     122009,      35911,  22.145380,  45.200000,  47.900000,  50.500000,  13.912543,   0.106000,  54.326002, 599.283663
Outstanding requests per worker:
101 104 96 97 100 96 83 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35088.8,      175444,     157866,      17578,     123196,      34670,  22.293975,  45.500000,  48.600000,  51.000000,  14.023297,   0.112000,  54.315001, 607.583983
Outstanding requests per worker:
108 93 98 88 111 109 85 98 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:13   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   10:13   0:00 /usr/lib/linux
memcache     11 69.2  0.0 133568 59136 pts/0    Sl+  10:13   0:33 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  10:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4228523028      instructions:u                                              

      47.839959988 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2058482176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
num_worker_connections 64
Creating worker on tid 2780492288
starting receive base loop
Created 512 connections total
Creating worker on tid 2184573440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801667.800092,       0.0,      113295,     102023,      11272,      62674,      39349,  38.189720,  54.900000,  79.400000, 824.000000, 134.393103,   0.000000, 1934.862971, 425.906815
Outstanding requests per worker:
204 210 188 211 132 173 204 8846 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38268.4,      191342,     172113,      19229,     118454,      53659, 230.910441, 234.800000, 1121.200000, 4156.500000, 687.872865,   0.182000, 6818.640232, 505.962176
Outstanding requests per worker:
620 724 823 471 685 706 764 14056 
count  186380
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38640.8,      193204,     173834,      19370,     126465,      47369, 599.654345, 569.300000, 3555.500000, 8000.000000, 1321.387672,   0.500000, 8908.162117, 549.227182
Outstanding requests per worker:
1904 1867 1866 1881 1855 1956 1913 12429 
count  188084
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38829.8,      194149,     174932,      19217,     130995,      43937, 740.931242, 789.400000, 2520.000000, 7000.000000, 1156.149275,   0.898000, 8261.650085, 570.970114
Outstanding requests per worker:
2792 2742 2762 2767 2739 2806 2750 12178 
count  189194
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38968.8,      194844,     175301,      19543,     133458,      41843, 863.643072, 998.800000, 2036.300000, 7000.000000, 1057.374186,   9.983000, 7837.370872, 587.482062
Outstanding requests per worker:
3626 3494 3592 3360 3489 3588 3491 12069 
count  190705
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39217.4,      196087,     176689,      19398,     136925,      39764, 974.579615, 1157.100000, 1876.200000, 7000.000000, 1019.122108,   2.685000, 8398.754120, 601.411944
Outstanding requests per worker:
4040 4105 3943 4098 3910 4227 4151 12172 
count  190322
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39088.4,      195442,     175866,      19576,     138104,      37762, 1080.553899, 1322.200000, 1845.100000, 7000.000000, 981.224268, 108.663000, 8352.515221, 612.550601
Outstanding requests per worker:
4839 4788 4663 4626 4620 4746 4607 12339 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:14   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   10:14   0:00 /usr/lib/linux
memcache      9 71.1  0.0 138688 78208 pts/0    Sl+  10:14   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4817527129      instructions:u                                              

      47.660243235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2212884992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
Created 512 connections total
Creating worker on tid 2342973952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801718.800143,       0.0,      122501,     110235,      12266,      68147,      42088,  41.503634,  74.000000,  98.900000, 638.800000, 126.260345,   0.000000, 2128.514051, 429.435823
Outstanding requests per worker:
348 338 305 341 256 293 5702 11299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38470.0,      192350,     173067,      19283,     120185,      52882, 283.312165, 340.500000, 1225.500000, 4417.200000, 731.057181,   0.304000, 6829.464912, 511.032490
Outstanding requests per worker:
1233 1255 1275 1310 1424 1444 6158 38439 
count  182765
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37347.8,      186739,     168003,      18736,     122144,      45859, 690.766634, 806.800000, 2472.800000, 7000.000000, 1101.177473,   0.504000, 9506.781578, 548.452057
Outstanding requests per worker:
3696 3753 3676 3665 3710 3879 7308 48896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37088.4,      185442,     166768,      18674,     124674,      42094, 957.743413, 1231.000000, 1452.800000, 4075.700000, 722.665979,  28.571000, 13244.071960, 571.126829
Outstanding requests per worker:
5491 5555 5662 5607 5512 5728 8816 49010 
count  178119
count  178119
count  178119
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43576.4,      217882,     196102,      21780,     149791,      46311, 3704.628045, 15000.000000, 17000.000000, 18000.000000, 5144.079913, 265.718013, 18761.650085, 587.783398
Outstanding requests per worker:
8606 9272 8786 8919 8978 8893 12274 74792 
count  173106
count  173106
count  173106
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39187.4,      195937,     176266,      19671,     137169,      39097, 2977.644408, 6000.000000, 9000.000000, 19000.000000, 3203.980143, 584.859014, 19786.727905, 604.732881
Outstanding requests per worker:
12438 13044 12720 12483 12596 12750 16125 78437 
count  168318
count  168318
count  168318
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39093.2,      195466,     175845,      19621,     138675,      37170, 3648.293777, 9000.000000, 11000.000000, 13000.000000, 2788.435118, 1043.447018, 20098.987579, 615.518354
Outstanding requests per worker:
16439 16664 16467 16338 16530 16555 20015 82135 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:15   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   10:15   0:00 /usr/lib/linux
memcache     11 70.3  0.0 138688 78912 pts/0    Sl+  10:15   0:33 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  10:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4875888396      instructions:u                                              

      48.010824906 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2479092224
starting receive base loop
num_worker_connections 64
Creating worker on tid 1881272832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1285353984
starting receive base loop
num_worker_connections 64
Creating worker on tid 689435136
starting receive base loop
num_worker_connections 64
Creating worker on tid 96137728
starting receive base loop
num_worker_connections 64
Creating worker on tid 3795186176
starting receive base loop
num_worker_connections 64
Creating worker on tid 3199267328
starting receive base loop
Created 512 connections total
Creating worker on tid 2603348480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801769.800194,       0.0,      123749,     111259,      12490,      68534,      42725,  43.655855,  65.200000,  93.700000, 784.000000, 135.695236,   0.000000, 2057.255983, 427.376464
Outstanding requests per worker:
337 333 294 326 343 924 13021 12499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38638.0,      193190,     173934,      19256,     119728,      54206, 316.388710, 381.800000, 1615.100000, 4423.100000, 767.048320,   0.365000, 6957.795143, 506.783303
Outstanding requests per worker:
1680 1804 1843 1733 1836 1640 30617 43752 
count  179482
count  179482
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37857.2,      189286,     170130,      19156,     123522,      46608, 964.411589, 924.600000, 6000.000000, 11000.000000, 1807.828271,   0.699000, 11936.729431, 547.376483
Outstanding requests per worker:
4303 4218 4333 4508 4440 4377 34216 52698 
count  179185
count  179185
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39521.2,      197606,     177799,      19807,     133044,      44755, 1858.545069, 4440.800000, 9000.000000, 12000.000000, 2396.869262, 125.042006, 13136.260986, 571.451201
Outstanding requests per worker:
8027 8336 8164 8432 8392 8010 42449 52698 
count  172883
count  172883
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37958.4,      189792,     170918,      18874,     130640,      40278, 2349.897196, 4335.500000, 8000.000000, 12000.000000, 2093.030120, 570.819974, 13806.362152, 589.917656
Outstanding requests per worker:
12062 12342 12212 12484 12757 12206 46740 52698 
count  163820
count  163820
count  163820
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40899.4,      204497,     183989,      20508,     142129,      41860, 5265.109903, 22000.000000, 25000.000000, 25000.000000, 6661.898966, 789.879024, 25898.651123, 600.151395
Outstanding requests per worker:
17275 17437 17308 17411 17674 17517 51821 55090 
count  150987
count  150987
count  150987
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40852.8,      204264,     183779,      20485,     144410,      39369, 6635.584937, 22000.000000, 23000.000000, 26000.000000, 6631.721565, 1656.569004, 27738.615036, 612.002133
Outstanding requests per worker:
24134 24713 24612 24395 25083 24733 59214 119708 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:16   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:16   0:00 /usr/lib/linux
memcache     10 70.3  0.0 137856 79104 pts/0    Sl+  10:16   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4897245264      instructions:u                                              

      47.441000617 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1734996480
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
Creating worker on tid 2461069824
num_worker_connections 64
starting receive base loop
Created 512 connections total
Creating worker on tid 1865150976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801820.800245,       0.0,      131420,     118334,      13086,      73885,      44449,  57.411893,  68.900000, 183.300000, 1015.200000, 171.802194,   0.000000, 2102.916956, 434.688771
Outstanding requests per worker:
378 336 365 320 339 8961 14644 13794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38757.2,      193786,     174291,      19495,     120889,      53402, 365.596262, 419.800000, 2080.200000, 4882.000000, 850.021537,   0.388000, 7087.080002, 511.443890
Outstanding requests per worker:
2197 2179 2381 2227 2087 13073 48827 48282 
count  183333
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37702.8,      188514,     169888,      18626,     123289,      46599, 848.705445, 1056.700000, 3371.100000, 6000.000000, 1107.233683,   0.916000, 8997.258186, 547.311411
Outstanding requests per worker:
5573 5685 5432 5581 5525 15764 53751 54103 
count  183340
count  183340
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38658.8,      193294,     174118,      19176,     130515,      43603, 1631.392965, 1849.800000, 6000.000000, 17000.000000, 2503.700055, 264.797986, 17053.817749, 573.584351
Outstanding requests per worker:
8737 8895 8441 8568 8496 18822 53859 54103 
count  162428
count  162428
count  162428
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42507.6,      212538,     191400,      21138,     146000,      45400, 4594.670260, 16000.000000, 17000.000000, 18000.000000, 5398.612519, 449.380010, 20522.754669, 588.596599
Outstanding requests per worker:
15491 15409 15075 15262 15615 25466 93069 54103 
count  154435
count  154435
count  154435
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37346.8,      186734,     168209,      18525,     130820,      37389, 3936.995941, 7000.000000, 9000.000000, 19000.000000, 3058.996310, 1204.764962, 20343.667984, 604.236135
Outstanding requests per worker:
23143 23552 22906 23031 23126 33243 108527 54103 
count  142718
count  142718
count  142718
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38259.4,      191297,     172208,      19089,     135640,      36568, 6110.373622, 12000.000000, 13000.000000, 31000.000000, 5447.611520, 2239.785910, 31855.382919, 614.413424
Outstanding requests per worker:
31410 31504 31137 31346 31403 41521 116763 54537 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:17   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:17   0:00 /usr/lib/linux
memcache      9 70.7  0.0 138688 79360 pts/0    Sl+  10:17   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4947877618      instructions:u                                              

      47.548491171 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1937699328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
Creating worker on tid 2662396416
num_worker_connections 64
starting receive base loop
Created 512 connections total
Creating worker on tid 2066477568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801872.800297,       0.0,      134504,     120945,      13559,      75094,      45851,  88.190900,  86.700000, 323.800000, 1719.800000, 279.030071,   0.000000, 2673.193932, 431.880822
Outstanding requests per worker:
487 426 483 405 2258 15946 16191 15038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38844.6,      194223,     174756,      19467,     120605,      54151, 433.338700, 739.700000, 2227.000000, 4832.600000, 867.387857,   0.492000, 6982.132912, 509.588855
Outstanding requests per worker:
2660 2916 2828 2814 3153 36443 53790 52637 
count  178068
count  178068
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39527.8,      197639,     177864,      19775,     129860,      48004, 1419.846491, 4944.700000, 8000.000000, 10000.000000, 2214.406148,  14.426000, 10920.954704, 551.848036
Outstanding requests per worker:
6692 6772 6844 6554 7236 45238 54918 54662 
count  173338
count  173338
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37723.8,      188619,     169794,      18825,     127122,      42672, 2043.636993, 4113.200000, 8000.000000, 11000.000000, 2069.699284, 405.045003, 11723.255157, 571.590274
Outstanding requests per worker:
12656 12962 12898 12824 13442 51521 54918 54662 
count  164354
count  164354
count  164354
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37677.8,      188389,     169531,      18858,     129645,      39886, 3140.245767, 7000.000000, 9000.000000, 21000.000000, 2775.704445, 798.736989, 21961.580276, 589.079372
Outstanding requests per worker:
19401 19497 19476 19426 19954 58097 55039 54662 
count  138960
count  138960
count  138960
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42276.6,      211383,     190348,      21035,     147531,      42817, 7608.503792, 21000.000000, 22000.000000, 23000.000000, 6972.572543, 1390.169978, 24090.721130, 601.514757
Outstanding requests per worker:
29879 30015 30078 29984 30593 68646 119577 54662 
count  84121
count  84121
count  84121
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36528.0,      182640,     164392,      18248,     129529,      34863, 6466.590770, 11000.000000, 14000.000000, 25000.000000, 3991.825358, 2900.826931, 26033.456802, 613.932302
Outstanding requests per worker:
41534 42011 41522 41791 42218 80444 162953 54662 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:17   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:17   0:00 /usr/lib/linux
memcache      9 70.9  0.0 139712 78528 pts/0    Sl+  10:17   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4922146829      instructions:u                                              

      48.064623306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1847194112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
num_worker_connections 64
Creating worker on tid 2568483328
starting receive base loop
Created 512 connections total
Creating worker on tid 1975185920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801923.800348,       0.0,      138770,     125034,      13736,      77782,      47252,  93.627229,  94.200000, 336.600000, 1810.400000, 298.746625,   0.000000, 3184.029102, 434.579306
Outstanding requests per worker:
535 628 550 602 8534 17571 17504 16261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39081.0,      195405,     176066,      19339,     122354,      53712, 517.388627, 1154.500000, 3025.900000, 4364.500000, 917.477215,   0.553000, 6511.495113, 513.037196
Outstanding requests per worker:
3621 3775 3642 3788 9438 47478 52770 52198 
count  182885
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37592.6,      187963,     169032,      18931,     123520,      45512, 1109.326515, 1310.500000, 3295.100000, 11000.000000, 1561.366488,  81.708997, 12098.801613, 551.790028
Outstanding requests per worker:
7564 7931 7986 7790 13533 48210 52770 52198 
count  175458
count  175458
count  175458
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43018.0,      215090,     193555,      21535,     145096,      48459, 3159.882170, 11000.000000, 12000.000000, 13000.000000, 3490.198148, 397.958010, 13576.224327, 573.082013
Outstanding requests per worker:
15406 15784 15883 15639 21209 77834 52770 52198 
count  158590
count  158590
count  158590
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37653.6,      188268,     169505,      18763,     129830,      39675, 3409.790743, 7000.000000, 8000.000000, 14000.000000, 2173.609087, 1029.479980, 14849.007607, 591.727412
Outstanding requests per worker:
24574 25000 25219 24855 30560 87211 52770 52198 
count  138903
count  138903
count  138903
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42142.8,      210714,     189444,      21270,     147471,      41973, 7792.166636, 23000.000000, 24000.000000, 25000.000000, 7158.674352, 1960.700989, 25651.441574, 605.346123
Outstanding requests per worker:
35743 36203 36405 36086 41734 98518 83969 52198 
count  42402
count  42402
count  42402
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36729.4,      183647,     165106,      18541,     130118,      34988, 8278.308469, 17000.000000, 24000.000000, 27000.000000, 5807.528386, 3135.077000, 27804.180145, 615.597404
Outstanding requests per worker:
50175 50961 50929 50578 56225 112786 141906 52198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:18   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   10:18   0:00 /usr/lib/linux
memcache      9 72.7  0.0 140736 78208 pts/0    Sl+  10:18   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4986269792      instructions:u                                              

      47.931576146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2235560448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1639641600
starting receive base loop
num_worker_connections 64
Creating worker on tid 1043722752
starting receive base loop
num_worker_connections 64
Creating worker on tid 447803904
starting receive base loop
num_worker_connections 64
Creating worker on tid 4146852352
starting receive base loop
num_worker_connections 64
Creating worker on tid 3550933504
starting receive base loop
num_worker_connections 64
Creating worker on tid 2955014656
starting receive base loop
Created 512 connections total
Creating worker on tid 2359095808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575801974.800399,       0.0,      142981,     128544,      14437,      80275,      48269,  96.067049, 127.600000, 269.400000, 1765.400000, 289.489802,   0.000000, 3155.838013, 437.765792
Outstanding requests per worker:
705 910 823 848 17275 19484 19414 17543 
count  192269
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39213.4,      196067,     176674,      19393,     122957,      53717, 665.245121, 1564.600000, 3456.500000, 6000.000000, 1096.867452,   0.653000, 6655.498028, 514.872086
Outstanding requests per worker:
5005 5185 4820 4972 23874 51431 52105 54666 
count  180256
count  180256
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38077.8,      190389,     171224,      19165,     125325,      45899, 1407.485745, 2876.600000, 6000.000000, 7000.000000, 1524.394679, 187.286004, 11229.644775, 553.373914
Outstanding requests per worker:
11312 10915 10933 11062 29985 52249 52105 54666 
count  166654
count  166654
count  166654
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43442.0,      217210,     195430,      21780,     146433,      48997, 4093.467480, 14000.000000, 14000.000000, 15000.000000, 4470.331458, 631.413996, 15846.401215, 574.191107
Outstanding requests per worker:
19459 19441 19359 19234 37992 63631 52105 54666 
count  154072
count  154072
count  154072
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36909.8,      184549,     166125,      18424,     127010,      39115, 4138.921650, 8000.000000, 14000.000000, 17000.000000, 3030.153722, 1256.646991, 17915.575027, 590.333478
Outstanding requests per worker:
32393 32247 32395 32138 51178 106945 52105 54666 
count  109272
count  109272
count  109272
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37275.4,      186377,     167850,      18527,     130247,      37603, 5706.834343, 9000.000000, 10000.000000, 25000.000000, 2977.124070, 2675.865889, 24475.570679, 601.213858
Outstanding requests per worker:
45768 45538 45912 45436 64607 133118 52549 54666 
count  9923
count  9923
count  9923
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42343.2,      211716,     190286,      21430,     149360,      40926, 11132.179915, 27000.000000, 27000.000000, 28000.000000, 7798.694295, 2011.590958, 29665.559769, 611.793327
Outstanding requests per worker:
62469 62544 62919 62264 81491 151130 100768 54666 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:19   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   10:19   0:00 /usr/lib/linux
memcache     11 72.8  0.0 139712 77056 pts/0    Sl+  10:19   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5049175147      instructions:u                                              

      47.933178886 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2033644032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802025.800450,       0.0,      143873,     129368,      14505,      80512,      48856, 106.131275, 165.700000, 263.700000, 1835.100000, 293.650442,   0.000000, 3167.319059, 434.065240
Outstanding requests per worker:
1273 1219 1170 1285 24815 20483 20407 18868 
count  185288
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37918.6,      189593,     170733,      18860,     118475,      52258, 694.227201, 834.200000, 3267.000000, 8000.000000, 1169.555976,   0.811000, 8207.649231, 513.054729
Outstanding requests per worker:
6108 6161 5992 6254 35819 52579 54153 52274 
count  180577
count  180577
count  180577
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40133.6,      200668,     180731,      19937,     131793,      48938, 1902.919518, 6000.000000, 7000.000000, 9000.000000, 1879.341127, 246.482998, 9217.414856, 551.971510
Outstanding requests per worker:
14834 15087 15024 14968 51341 52579 54153 52274 
count  164290
count  164290
count  164290
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37786.8,      188934,     170160,      18774,     127819,      42341, 3030.306883, 6000.000000, 8000.000000, 16000.000000, 2373.869948, 747.051001, 16708.366394, 575.156171
Outstanding requests per worker:
25029 25163 24814 25027 61440 52839 54153 52274 
count  138397
count  138397
count  138397
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42117.4,      210587,     189718,      20869,     145184,      44534, 6675.385601, 16000.000000, 17000.000000, 18000.000000, 5057.509264, 1642.289042, 19547.956467, 590.470678
Outstanding requests per worker:
40803 40852 40597 40753 77167 98745 54153 52274 
count  50439
count  50439
count  50439
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36261.0,      181305,     163304,      18001,     127066,      36238, 6372.995567, 10000.000000, 12000.000000, 19000.000000, 2606.953321, 3266.532898, 20705.995560, 605.114559
Outstanding requests per worker:
57789 57531 57571 57863 94235 163349 54153 52274 
count  3
count  3
count  3
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40521.4,      202607,     182339,      20268,     143547,      38792, 12102.033665, 28000.000000, 29000.000000, 30000.000000, 8060.151628, 4267.633915, 30546.419144, 614.443070
Outstanding requests per worker:
76786 76745 76469 76902 113313 171650 90563 52274 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:20   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:20   0:00 /usr/lib/linux
memcache      9 71.4  0.0 138688 74816 pts/0    Sl+  10:20   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5001691624      instructions:u                                              

      48.100294972 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1711731200
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
num_worker_connections 64
Creating worker on tid 4222022144
starting receive base loop
num_worker_connections 64
Creating worker on tid 3626103296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3030184448
starting receive base loop
num_worker_connections 64
Creating worker on tid 2434265600
starting receive base loop
Created 512 connections total
Creating worker on tid 1840968192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802077.800502,       0.0,      148501,     133587,      14914,      83791,      49796, 134.628787, 236.500000, 313.100000, 1854.500000, 297.760687,   0.000000, 3195.574045, 439.019583
Outstanding requests per worker:
2209 2052 2206 2683 28844 22112 22031 20001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36970.8,      184854,     166404,      18450,     115881,      50523, 677.081168, 943.000000, 1313.900000, 4609.000000, 812.318239,   1.056000, 8202.007294, 515.264759
Outstanding requests per worker:
8501 8349 8543 8659 41165 52200 51768 53504 
count  177367
count  177367
count  177367
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42108.8,      210544,     189592,      20952,     137949,      51643, 2367.150632, 7000.000000, 9000.000000, 10000.000000, 2273.744901, 341.077000, 10025.153160, 549.405471
Outstanding requests per worker:
19352 18960 19526 19417 65388 52200 51768 53504 
count  158150
count  158150
count  158150
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37413.4,      187067,     168258,      18809,     126712,      41546, 3435.689752, 6000.000000, 8000.000000, 15000.000000, 2154.426501, 1182.317019, 17113.435745, 576.085274
Outstanding requests per worker:
32498 31964 32756 32521 78611 52954 51768 53504 
count  125552
count  125552
count  125552
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42299.4,      211497,     190413,      21084,     145844,      44569, 7332.601274, 17000.000000, 18000.000000, 19000.000000, 5121.027608, 1628.299952, 20076.091766, 591.053725
Outstanding requests per worker:
50373 49682 50201 50279 96108 79419 51768 53504 
count  12496
count  12496
count  12496
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36470.8,      182354,     164285,      18069,     127768,      36517, 7525.134468, 12000.000000, 15000.000000, 27000.000000, 3715.422181, 3886.831045, 26910.472870, 604.344182
Outstanding requests per worker:
70232 69401 69986 70120 116049 107147 52232 53504 
count  7
count  7
count  7
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41716.8,      208584,     187625,      20959,     147495,      40130, 12492.577979, 29000.000000, 30000.000000, 31000.000000, 7615.715678, 2298.777103, 31520.051956, 614.011566
Outstanding requests per worker:
91727 90750 91239 91287 137405 140772 64140 53504 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:21   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   10:21   0:00 /usr/lib/linux
memcache      9 71.8  0.0 139712 73984 pts/0    Sl+  10:21   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5049910665      instructions:u                                              

      48.291471604 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2586505728
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
Created 512 connections total
Creating worker on tid 2713383424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802128.800553,       0.0,      147800,     133123,      14677,      83542,      49581, 146.654186, 257.300000, 346.400000, 1756.700000, 294.765689,   0.000000, 3127.151966, 437.677351
Outstanding requests per worker:
2746 2611 2660 5017 32820 22780 22695 21278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37675.2,      188376,     169427,      18949,     118327,      51100, 744.765450, 1096.700000, 1845.200000, 4080.000000, 686.926588,   1.284000, 6415.155888, 516.220496
Outstanding requests per worker:
10589 10422 10437 12555 47550 52166 52923 53058 
count  173039
count  173039
count  173039
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42546.8,      212734,     191466,      21268,     139790,      51676, 2744.606034, 9000.000000, 10000.000000, 10000.000000, 2776.090088, 405.295014, 11368.837357, 551.858492
Outstanding requests per worker:
21892 22216 21867 23891 78769 52166 52923 53058 
count  161867
count  161867
count  161867
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37796.8,      188984,     170040,      18944,     127958,      42082, 3684.629915, 7000.000000, 9000.000000, 15000.000000, 2170.259873, 1341.737032, 15243.687630, 576.284986
Outstanding requests per worker:
38150 38625 37988 40026 101767 53436 52923 53058 
count  107028
count  107028
count  107028
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42121.0,      210605,     189539,      21066,     145604,      43935, 7707.629435, 18000.000000, 19000.000000, 20000.000000, 5226.915995, 1642.169952, 21888.816833, 594.513409
Outstanding requests per worker:
57721 57918 57500 59365 121357 88890 53421 53058 
count  6528
count  6528
count  6528
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35039.8,      175199,     157482,      17717,     122696,      34786, 8056.714930, 13000.000000, 19000.000000, 22000.000000, 3625.914217, 3568.814993, 22521.419525, 605.871573
Outstanding requests per worker:
81048 81200 80844 82791 141657 154428 53421 53058 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39837.2,      199186,     179384,      19802,     141331,      38053, 12112.084513, 28000.000000, 31000.000000, 32000.000000, 6628.527720, 6639.400005, 31750.162125, 615.764405
Outstanding requests per worker:
105031 105127 104757 106770 168589 187600 55247 53058 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:22   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:22   0:00 /usr/lib/linux
memcache      9 71.5  0.0 140736 77120 pts/0    Sl+  10:22   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5082892165      instructions:u                                              

      48.044654663 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1644622336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2367156736
starting receive base loop
Created 512 connections total
Creating worker on tid 1773859328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802180.800605,       0.0,      148522,     133741,      14781,      83594,      50147, 158.656521, 285.600000, 390.500000, 1790.700000, 292.635208,   0.000000, 3056.567907, 437.297994
Outstanding requests per worker:
3060 3241 3179 12033 35819 24220 24126 22729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38350.8,      191754,     172628,      19126,     120441,      52187, 886.452293, 1427.600000, 2801.400000, 3888.600000, 811.311709,  17.354000, 6820.497990, 514.744109
Outstanding requests per worker:
12667 12428 12614 21306 52823 53135 52433 53051 
count  175731
count  175731
count  175731
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42509.8,      212549,     191624,      20925,     139872,      51752, 3174.536844, 10000.000000, 11000.000000, 12000.000000, 3194.540129, 554.902971, 11883.461952, 551.363874
Outstanding requests per worker:
25551 25375 25394 34153 75938 53764 52433 53051 
count  151820
count  151820
count  151820
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35422.2,      177111,     159413,      17698,     119909,      39504, 4064.397879, 7000.000000, 11000.000000, 13000.000000, 2355.020641, 1534.425020, 16605.333328, 575.530572
Outstanding requests per worker:
45846 45997 45699 54318 126257 54007 52433 53051 
count  72654
count  72654
count  72654
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43024.2,      215121,     193388,      21733,     147971,      45417, 7785.987253, 20000.000000, 20000.000000, 21000.000000, 5121.441905, 3186.969995, 21152.530670, 591.401126
Outstanding requests per worker:
67486 67427 67289 75961 151427 72489 52433 53051 
count  2268
count  2268
count  2268
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34679.0,      173395,     156190,      17205,     121567,      34623, 9415.792354, 20000.000000, 21000.000000, 24000.000000, 4675.197818, 2457.019091, 26841.581345, 604.665107
Outstanding requests per worker:
94340 94314 94197 102801 160857 144151 53381 53051 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33885.8,      169429,     152500,      16929,     119622,      32878, 10639.915530, 16000.000000, 16000.000000, 25000.000000, 3383.789143, 5926.198006, 32083.713531, 612.603934
Outstanding requests per worker:
121770 121587 120239 128814 180746 184957 53447 53051 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:23   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:23   0:00 /usr/lib/linux
memcache     10 71.5  0.0 138688 74304 pts/0    Sl+  10:23   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5012081812      instructions:u                                              

      47.962352892 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2437018112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802231.800656,       0.0,      154956,     139187,      15769,      87406,      51781, 194.042798, 352.700000, 493.400000, 1898.900000, 318.448205,   0.000000, 3241.532087, 439.570951
Outstanding requests per worker:
4205 4115 4342 15815 38597 25729 25633 23811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38648.4,      193242,     173849,      19393,     121448,      52401, 1027.450270, 1822.300000, 3016.300000, 4154.800000, 785.189305, 142.499000, 4924.059868, 517.691663
Outstanding requests per worker:
15550 15063 15343 27526 53406 50744 52496 52866 
count  175423
count  175423
count  175423
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42451.4,      212257,     190930,      21327,     139300,      51630, 3483.930482, 11000.000000, 12000.000000, 12000.000000, 3293.337206, 786.098003, 12513.046265, 551.336914
Outstanding requests per worker:
30459 30184 30268 42338 58653 50744 52496 52866 
count  151248
count  151248
count  151248
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36879.8,      184399,     165841,      18558,     124823,      41018, 4508.266049, 10000.000000, 12000.000000, 14000.000000, 2464.702447, 1762.166977, 14291.167259, 576.478838
Outstanding requests per worker:
53332 52968 52864 65089 123714 50744 52496 52866 
count  36030
count  36030
count  36030
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38253.2,      191266,     172078,      19188,     131686,      40392, 7768.076914, 20000.000000, 21000.000000, 21000.000000, 4933.698035, 3614.551067, 21788.593292, 590.272150
Outstanding requests per worker:
77743 77453 77401 89465 154196 54285 52496 52866 
count  5594
count  5594
count  5594
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37795.8,      188979,     170075,      18904,     131863,      38212, 10081.248509, 20000.000000, 21000.000000, 23000.000000, 4393.372363, 3066.724062, 24198.541641, 602.482146
Outstanding requests per worker:
106754 106531 106502 116886 154603 109444 53485 52866 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36043.2,      180216,     162162,      18054,     127657,      34505, 11148.804986, 15000.000000, 16000.000000, 26000.000000, 3327.832728, 5581.083775, 31168.966293, 614.699381
Outstanding requests per worker:
134570 132807 133278 148192 185283 158227 53909 52866 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:23   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   10:23   0:00 /usr/lib/linux
memcache      9 73.4  0.0 141760 76416 pts/0    Sl+  10:23   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5043741507      instructions:u                                              

      47.844515779 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2613572096
starting receive base loop
num_worker_connections 64
Creating worker on tid 2015490560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3923243520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
Created 512 connections total
Creating worker on tid 2729505280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802282.800707,       0.0,      155404,     139835,      15569,      87603,      52232, 202.588000, 368.700000, 524.400000, 1970.000000, 327.182642,   0.000000, 3167.882919, 439.141932
Outstanding requests per worker:
4512 4606 4652 22224 40774 27640 27538 25000 
count  194458
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39414.8,      197074,     177374,      19700,     123800,      53574, 1198.528347, 2556.200000, 3897.100000, 6000.000000, 1066.668531, 101.703003, 8253.502846, 516.199984
Outstanding requests per worker:
17215 17306 17423 37439 52659 51498 52072 53814 
count  175512
count  175512
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38617.8,      193089,     173884,      19205,     127310,      46574, 2793.360369, 4777.200000, 7000.000000, 13000.000000, 2168.765342, 869.745016, 13119.675636, 553.353028
Outstanding requests per worker:
33446 33363 33549 53569 53060 51498 52072 53814 
count  145526
count  145526
count  145526
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41840.6,      209203,     188415,      20788,     141211,      47204, 5685.971550, 13000.000000, 13000.000000, 15000.000000, 3498.291087, 1549.144030, 15239.486694, 572.664544
Outstanding requests per worker:
58729 58310 58459 78731 117940 51498 52072 53814 
count  19358
count  19358
count  19358
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35381.6,      176908,     159255,      17653,     121969,      37286, 6552.732829, 9000.000000, 10000.000000, 20000.000000, 2262.021427, 3671.391964, 22212.167740, 591.904914
Outstanding requests per worker:
85413 85172 85266 101362 168311 52368 52072 53814 
count  7627
count  7627
count  7627
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41769.2,      208846,     187848,      20998,     146189,      41659, 11527.206735, 22000.000000, 23000.000000, 25000.000000, 5675.216606, 2113.106966, 25667.818069, 603.598585
Outstanding requests per worker:
115895 117472 114448 137439 186103 82467 53787 53814 
count  1222
count  1222
count  1222
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33707.4,      168537,     151713,      16824,     119343,      32370, 11359.025032, 15000.000000, 16000.000000, 26000.000000, 2973.746070, 3562.482119, 27891.565323, 614.170249
Outstanding requests per worker:
146700 150606 149307 163001 207479 145679 53787 53814 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:24   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:24   0:00 /usr/lib/linux
memcache     10 71.7  0.0 139712 76416 pts/0    Sl+  10:24   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5062257378      instructions:u                                              

      47.919367319 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2353918464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1755116032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
Created 512 connections total
Creating worker on tid 2477191680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802334.800759,       0.0,      153574,     138319,      15255,      86548,      51771, 221.526613, 419.200000, 560.400000, 1925.700000, 325.300969,   0.000000, 3066.502094, 438.772367
Outstanding requests per worker:
5684 5688 5743 25925 41474 27914 27807 26318 
count  191554
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39308.8,      196544,     177017,      19527,     123312,      53705, 1365.315760, 3024.500000, 4344.500000, 6000.000000, 1132.081744, 154.854998, 6370.250225, 515.771152
Outstanding requests per worker:
21164 20945 21038 46610 53586 52601 52606 52583 
count  171865
count  171865
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37074.2,      185371,     167000,      18371,     121991,      45009, 2773.334348, 4419.900000, 6000.000000, 7000.000000, 1105.489568, 1096.892953, 7294.300079, 552.821910
Outstanding requests per worker:
40600 40288 40535 66157 53586 52601 52606 52583 
count  118424
count  118424
count  118424
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41428.6,      207143,     186344,      20799,     139600,      46744, 6553.134997, 13000.000000, 14000.000000, 15000.000000, 3742.287683, 2462.006092, 15713.323593, 572.647217
Outstanding requests per worker:
68754 68487 68763 94342 116204 53203 52606 52583 
count  5192
count  5192
count  5192
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35071.0,      175355,     157830,      17525,     120926,      36904, 7122.408642, 9000.000000, 11000.000000, 17000.000000, 2082.496025, 4178.213120, 21533.658981, 592.406063
Outstanding requests per worker:
98752 98470 98831 124475 154400 53243 52606 52583 
count  2670
count  2670
count  2670
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39612.8,      198064,     178320,      19744,     138581,      39739, 12388.441473, 23000.000000, 23000.000000, 25000.000000, 5627.380644, 2647.941113, 25523.090363, 603.787169
Outstanding requests per worker:
129227 129680 127773 154616 168768 85532 52606 52583 
count  169
count  169
count  169
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31826.4,      159132,     143152,      15980,     112691,      30461, 12185.487875, 16000.000000, 16000.000000, 27000.000000, 3448.073971, 4367.207050, 27693.470001, 614.078888
Outstanding requests per worker:
169069 165568 159464 167809 181330 141905 52606 52583 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:25   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:25   0:00 /usr/lib/linux
memcache      9 71.6  0.0 139712 75840 pts/0    Sl+  10:25   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4946496988      instructions:u                                              

      48.083171117 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1745351168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802385.800810,       0.0,      158791,     143028,      15763,      89766,      53262, 254.690974, 493.200000, 632.100000, 2002.400000, 339.784104,   0.000000, 3174.439907, 440.326384
Outstanding requests per worker:
7111 7256 7101 30194 44475 29880 29767 27780 
count  190708
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39762.8,      198814,     179080,      19734,     125631,      53449, 1548.961707, 3458.100000, 4804.700000, 6000.000000, 1220.313039, 201.285005, 6534.562111, 519.983912
Outstanding requests per worker:
25248 25406 25211 54798 52251 52446 52503 51837 
count  170366
count  170366
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37325.2,      186626,     167981,      18645,     123187,      44794, 3072.770014, 4719.400000, 6000.000000, 7000.000000, 1117.216416, 1378.190994, 7763.261795, 555.428691
Outstanding requests per worker:
48118 48154 47919 77663 52251 52446 52503 51837 
count  95972
count  95972
count  95972
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41560.6,      207803,     187038,      20765,     140257,      46781, 6947.794815, 14000.000000, 14000.000000, 16000.000000, 3779.431672, 2800.822020, 15806.523323, 574.545584
Outstanding requests per worker:
79101 78988 78920 106913 104774 53418 52503 51837 
count  6225
count  6225
count  6225
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35937.8,      179689,     161783,      17906,     124335,      37448, 7387.555744, 10000.000000, 11000.000000, 16000.000000, 1786.942564, 4444.148064, 18215.383530, 593.567179
Outstanding requests per worker:
112779 111190 112201 141971 172497 53418 52503 51837 
count  29
count  29
count  29
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36501.0,      182505,     164363,      18142,     127452,      36911, 12980.425719, 23000.000000, 23000.000000, 24000.000000, 5325.448670, 4158.948898, 25889.965057, 602.842933
Outstanding requests per worker:
145772 145709 143296 177379 172371 87316 52503 51837 
count  3139
count  3139
count  3139
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35634.8,      178174,     160366,      17808,     126272,      34094, 12956.380547, 16000.000000, 24000.000000, 28000.000000, 3949.612244, 4077.995777, 28973.371506, 615.223495
Outstanding requests per worker:
180008 191239 186054 208785 171816 166763 52726 51837 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:26   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:26   0:00 /usr/lib/linux
memcache      9 73.2  0.0 139712 77312 pts/0    Sl+  10:26   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5006919442      instructions:u                                              

      47.856075338 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2334061056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1738994176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
Created 512 connections total
Creating worker on tid 2461069824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802436.800861,       0.0,      163077,     146643,      16434,      92724,      53919, 283.136829, 554.300000, 681.500000, 2003.000000, 350.995605,   0.000000, 3193.142891, 444.428456
Outstanding requests per worker:
8305 8449 8475 33999 46554 30887 30772 28986 
count  187982
count  187982
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40024.6,      200123,     180112,      20011,     126833,      53279, 1728.948389, 4222.300000, 6000.000000, 7000.000000, 1354.909158, 164.555997, 7430.929184, 522.453457
Outstanding requests per worker:
28990 28700 28882 62912 52951 51873 51939 50488 
count  166710
count  166710
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37022.8,      185114,     166549,      18565,     122469,      44080, 3370.027804, 4992.300000, 7000.000000, 8000.000000, 1355.286158, 1421.522975, 12953.503609, 556.763007
Outstanding requests per worker:
55626 55324 55482 89406 53373 51873 51939 50488 
count  72949
count  72949
count  72949
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41527.4,      207637,     186880,      20757,     140563,      46317, 7229.270518, 14000.000000, 14000.000000, 16000.000000, 3602.312420, 2213.255882, 16315.551758, 575.988972
Outstanding requests per worker:
89748 89219 89328 116341 89485 52229 51939 50488 
count  5516
count  5516
count  5516
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33865.8,      169329,     152335,      16994,     116993,      35342, 8224.244672, 11000.000000, 13000.000000, 22000.000000, 2600.870391, 3675.992012, 22054.698944, 593.201661
Outstanding requests per worker:
124638 126370 123621 141023 161079 52654 51939 50488 
count  2300
count  2300
count  2300
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40372.8,      201864,     181561,      20303,     141377,      40184, 12957.068535, 23000.000000, 24000.000000, 25000.000000, 5251.479796, 1752.082944, 25618.034363, 605.877242
Outstanding requests per worker:
155583 158722 152735 174897 175565 87706 51939 50488 
count  5679
count  5679
count  5679
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32331.4,      161657,     145490,      16167,     114660,      30830, 13562.611029, 17000.000000, 25000.000000, 28000.000000, 4210.763469, 3488.492966, 31115.671158, 616.292061
Outstanding requests per worker:
212788 211844 195975 218578 175895 143238 52441 50488 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:27   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:27   0:00 /usr/lib/linux
memcache     10 71.8  0.0 138688 75520 pts/0    Sl+  10:27   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4986317228      instructions:u                                              

      48.044057588 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1695937024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802488.800913,       0.0,       36766,      33086,       3680,      18871,      14215,   0.710798,   0.143100,   0.194000,   6.900000,   6.931572,   0.000000, 141.571999, 378.039503
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12014.0,       60070,      53917,       6153,      33926,      19991,   0.113833,   0.146100,   0.170100,   0.623100,   0.088753,   0.068000,   1.080000, 439.992563
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54097,       5966,      35704,      18393,   0.117238,   0.144100,   0.206100,   0.722100,   0.105109,   0.071000,   1.176000, 475.740466
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54052,       6013,      36920,      17132,   0.117962,   0.144100,   0.220100,   0.730100,   0.106685,   0.070000,   1.117000, 499.782413
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      54097,       5965,      37707,      16390,   0.117474,   0.144100,   0.208100,   0.724100,   0.104695,   0.070000,   1.084000, 515.150415
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      53992,       6074,      38304,      15688,   0.118343,   0.144100,   0.216100,   0.734100,   0.107977,   0.067000,   1.135000, 528.059953
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54090,       5974,      38813,      15277,   0.117172,   0.144100,   0.195100,   0.720100,   0.103266,   0.071000,   0.986000, 537.365225
Outstanding requests per worker:
0 0 0 0 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:28   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:28   0:00 /usr/lib/linux
memcache      9 33.3  0.0 108992 32704 pts/0    Sl+  10:28   0:15 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        1504673901      instructions:u                                              

      47.870810138 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2067788288
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
num_worker_connections 64
Creating worker on tid 2788553216
starting receive base loop
Created 512 connections total
Creating worker on tid 2192634368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802539.800964,       0.0,      159329,     143222,      16107,      90498,      52724, 326.726750, 655.600000, 795.600000, 1992.000000, 362.715304,   0.000000, 3069.679976, 443.345066
Outstanding requests per worker:
10902 10968 10996 38594 48936 32519 32389 31250 
count  184544
count  184544
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40350.4,      201752,     181637,      20115,     127256,      54381, 1981.615764, 4708.500000, 6000.000000, 7000.000000, 1440.663862, 248.408005, 6980.780125, 519.284435
Outstanding requests per worker:
35798 35762 35739 73641 52125 51245 52963 50107 
count  165909
count  165909
count  165909
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36871.6,      184358,     165909,      18449,     121463,      44446, 3630.718833, 6000.000000, 7000.000000, 8000.000000, 1142.029456, 1753.389001, 8792.750359, 554.535342
Outstanding requests per worker:
68114 67860 68190 106266 52125 51245 52963 50107 
count  41680
count  41680
count  41680
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39369.8,      196849,     177164,      19685,     133151,      44013, 7681.994018, 14000.000000, 15000.000000, 16000.000000, 3569.003650, 2909.846067, 16473.154068, 575.200966
Outstanding requests per worker:
107431 107264 107648 136249 93038 51245 52963 50107 
count  9094
count  9094
count  9094
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34170.6,      170853,     153931,      16922,     117970,      35961, 8903.187126, 12000.000000, 14000.000000, 18000.000000, 2606.566785, 3593.070030, 21719.806671, 591.234527
Outstanding requests per worker:
145586 146901 137125 152819 154478 52470 52963 50107 
count  853
count  853
count  853
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38916.4,      194582,     175072,      19510,     135849,      39223, 13899.849659, 24000.000000, 24000.000000, 25000.000000, 5151.821671, 2016.969919, 26043.672562, 602.118226
Outstanding requests per worker:
189868 181125 180361 202940 155710 79571 52963 50107 
count  5619
count  5619
count  5619
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35013.0,      175065,     157574,      17491,     123826,      33748, 14303.359637, 18000.000000, 21000.000000, 28000.000000, 4142.360361, 2991.638899, 29196.187973, 615.141781
Outstanding requests per worker:
249143 248474 249040 240062 154976 137832 52963 50107 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:29   0:00 bash docker-en
memcache     12  0.0  0.0  62208  6272 pts/0    S+   10:29   0:00 /usr/lib/linux
memcache     13 71.4  0.0 139712 75008 pts/0    Sl+  10:29   0:34 memcached -t 1
memcache     27  0.0  0.0   6656  4352 pts/1    Rs+  10:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4925423945      instructions:u                                              

      48.003439265 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2503799296
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802591.801016,       0.0,      164253,     147752,      16501,      92977,      54775, 336.628886, 678.700000, 830.200000, 2056.700000, 373.934709,   0.000000, 3135.637999, 442.259374
Outstanding requests per worker:
11801 11743 12336 44818 51626 34610 34480 32787 
count  180617
count  180617
count  180617
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41482.6,      207413,     186611,      20802,     130722,      55889, 2137.355023, 6000.000000, 7000.000000, 7000.000000, 1650.628825, 441.686988, 7216.224194, 520.334107
Outstanding requests per worker:
37403 37474 38226 60935 51626 53874 51724 53254 
count  167703
count  167703
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36834.2,      184171,     165830,      18341,     121857,      43973, 3683.921193, 4833.400000, 7000.000000, 9000.000000, 1221.435299, 846.297026, 9130.687714, 557.416493
Outstanding requests per worker:
73630 73374 74082 123864 51626 53874 51724 53254 
count  33078
count  33078
count  33078
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39833.4,      199167,     179369,      19798,     135012,      44357, 7667.305482, 15000.000000, 15000.000000, 16000.000000, 3515.576765, 3960.479021, 16179.800034, 577.050934
Outstanding requests per worker:
115112 115141 114501 157156 84862 53874 51724 53254 
count  7330
count  7330
count  7330
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33997.0,      169985,     152948,      17037,     117253,      35695, 9304.250107, 13000.000000, 16000.000000, 19000.000000, 2967.747547, 3317.159891, 21430.583954, 591.548644
Outstanding requests per worker:
152828 146382 151503 174800 165700 54005 51724 53254 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38756.0,      193780,     174520,      19260,     135833,      38687, 14043.852284, 25000.000000, 25000.000000, 25000.000000, 5182.606756, 5527.690887, 26731.073380, 604.263133
Outstanding requests per worker:
200768 212773 195009 189383 181152 80031 52954 53254 
count  3529
count  3529
count  3529
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35015.8,      175079,     157483,      17596,     123650,      33833, 15288.652763, 20000.000000, 27000.000000, 29000.000000, 4487.534134, 2945.256948, 29501.867294, 612.271966
Outstanding requests per worker:
267299 267232 267649 193217 181836 131925 53440 53254 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:29   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:29   0:00 /usr/lib/linux
memcache      9 71.4  0.0 139712 75648 pts/0    Sl+  10:29   0:34 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  10:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4967873034      instructions:u                                              

      47.849358886 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1754264064
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
num_worker_connections 64
Creating worker on tid 2477191680
starting receive base loop
Created 512 connections total
Creating worker on tid 1881272832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802643.801068,       0.0,      166342,     149629,      16713,      94174,      55455, 251.140762, 485.900000, 987.000000, 2224.600000, 394.651647,   0.000000, 3059.897900, 441.133062
Outstanding requests per worker:
7793 8026 19604 52889 51679 36294 36155 33899 
count  187287
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37838.8,      189194,     170392,      18802,     119559,      50833, 1387.854529, 2361.500000, 3054.900000, 7000.000000, 928.646223, 219.469994, 7686.141014, 520.555437
Outstanding requests per worker:
30166 30314 41912 53053 51679 51586 50402 54496 
count  157179
count  157179
count  157179
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42273.6,      211368,     190221,      21147,     139152,      51069, 4189.560421, 9000.000000, 9000.000000, 10000.000000, 2403.360341, 1279.255033, 11448.893547, 552.508766
Outstanding requests per worker:
66340 66272 77789 109501 52083 51586 50402 54496 
count  64553
count  64553
count  64553
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41054.4,      205272,     184870,      20402,     139385,      45485, 7374.018603, 17000.000000, 17000.000000, 17000.000000, 4221.324017, 3285.646915, 17751.234055, 578.256158
Outstanding requests per worker:
108203 108035 117929 157933 62125 51586 50402 54496 
count  16555
count  16555
count  16555
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32147.8,      160739,     144799,      15940,     111481,      33318, 8838.946116, 13000.000000, 18000.000000, 20000.000000, 3513.998715, 1229.886055, 21902.875900, 595.709107
Outstanding requests per worker:
145714 149213 152061 157042 143094 52079 50402 54496 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38605.6,      193028,     173650,      19378,     135327,      38323, 11734.573893, 15000.000000, 26000.000000, 27000.000000, 4060.270458, 5316.613197, 27002.790451, 607.149640
Outstanding requests per worker:
188109 192297 202277 198816 170199 52457 50402 54496 
count  3906
count  3906
count  3906
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33510.4,      167552,     150855,      16697,     118934,      31921, 16814.152221, 27000.000000, 28000.000000, 30000.000000, 5936.915742, 2452.080011, 30379.928589, 616.207530
Outstanding requests per worker:
259919 239491 263717 209236 169795 101448 52808 54496 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:30   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   10:30   0:00 /usr/lib/linux
memcache     10 71.6  0.0 139712 73088 pts/0    Sl+  10:30   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4989526585      instructions:u                                              

      47.938721712 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2279076352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802695.801120,       0.0,      172643,     155403,      17240,      98007,      57396, 294.366732, 591.700000, 996.400000, 2198.400000, 395.156180,   0.000000, 2873.349905, 443.187609
Outstanding requests per worker:
10353 10356 20389 51425 52824 37740 37596 35090 
count  185917
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37734.4,      188672,     169694,      18978,     118885,      50809, 1571.484223, 2418.300000, 3104.800000, 7000.000000, 908.361246, 357.315004, 8110.833168, 519.965255
Outstanding requests per worker:
36330 35950 46650 52469 52824 52609 50237 53577 
count  157989
count  157989
count  157989
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42535.2,      212676,     191320,      21356,     139959,      51361, 4375.885061, 9000.000000, 9000.000000, 10000.000000, 2193.367639, 1015.825987, 10539.683342, 553.566820
Outstanding requests per worker:
75810 75807 86203 127824 52824 52609 50237 53577 
count  39715
count  39715
count  39715
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41447.0,      207235,     186548,      20687,     140662,      45886, 7674.607244, 17000.000000, 17000.000000, 17000.000000, 4119.314088, 3554.083109, 17591.995239, 578.575578
Outstanding requests per worker:
120195 118462 128619 167707 58855 52609 50237 53577 
count  10894
count  10894
count  10894
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32114.6,      160573,     144577,      15996,     111192,      33385, 9182.260566, 16000.000000, 18000.000000, 21000.000000, 3424.468731, 1923.717022, 22140.401840, 596.162073
Outstanding requests per worker:
143145 150046 164572 174126 97619 53051 50237 53577 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38694.0,      193470,     173878,      19592,     135345,      38533, 12874.263247, 26000.000000, 27000.000000, 27000.000000, 5064.866354, 5212.398052, 26761.333466, 605.245022
Outstanding requests per worker:
183364 211558 211829 215189 157503 55404 50237 53577 
count  3081
count  3081
count  3081
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35015.8,      175079,     157603,      17476,     124263,      33340, 16531.971314, 27000.000000, 29000.000000, 30000.000000, 5563.378368, 2536.465883, 31695.800781, 616.207731
Outstanding requests per worker:
232629 283558 257432 212944 162047 114319 52518 53577 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:31   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   10:31   0:00 /usr/lib/linux
memcache     11 70.4  0.0 139712 73536 pts/0    Sl+  10:31   0:34 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5034591831      instructions:u                                              

      48.369822719 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2361127424
starting receive base loop
num_worker_connections 64
Creating worker on tid 1763176960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
Created 512 connections total
Creating worker on tid 2485252608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802747.801172,       0.0,      168233,     151346,      16887,      95631,      55715, 251.215075, 494.900000, 1017.600000, 2147.300000, 390.346157,   0.000000, 3054.306030, 444.674679
Outstanding requests per worker:
8599 8700 29720 52218 52887 38934 38787 36366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38958.6,      194793,     175372,      19421,     123179,      52193, 1576.485768, 3137.600000, 3730.400000, 4494.800000, 986.979648, 159.437999, 6941.824913, 521.597051
Outstanding requests per worker:
35321 35481 58391 52633 52887 52011 51744 51503 
count  154458
count  154458
count  154458
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43173.2,      215866,     194084,      21782,     142333,      51751, 4579.599045, 10000.000000, 10000.000000, 11000.000000, 2674.541795, 1263.955951, 11594.308853, 555.460239
Outstanding requests per worker:
74832 75046 96328 87223 52887 52011 51744 51503 
count  52892
count  52892
count  52892
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37519.8,      187599,     168829,      18770,     127565,      41264, 6616.155096, 9000.000000, 18000.000000, 18000.000000, 3293.222455, 2605.811119, 18082.143784, 579.173477
Outstanding requests per worker:
119912 120267 143551 144333 53692 52011 51744 51503 
count  9136
count  9136
count  9136
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34678.4,      173392,     155861,      17531,     119559,      36302, 10416.479375, 18000.000000, 19000.000000, 21000.000000, 4148.236458, 2529.015064, 21265.462875, 592.426412
Outstanding requests per worker:
160437 153546 182574 151264 113348 52323 51744 51503 
count  1369
count  1369
count  1369
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34522.6,      172613,     155187,      17426,     120842,      34345, 11432.813669, 14000.000000, 16000.000000, 26000.000000, 3163.025735, 4683.085918, 26900.167465, 605.055017
Outstanding requests per worker:
188149 199598 209744 152854 163685 52569 51744 51503 
count  2218
count  2218
count  2218
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41219.8,      206099,     185548,      20551,     146263,      39285, 17063.093344, 28000.000000, 28000.000000, 30000.000000, 5904.033960, 2465.452909, 30949.024200, 615.836835
Outstanding requests per worker:
252773 283368 242845 185200 165330 85327 51744 51503 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:32   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:32   0:00 /usr/lib/linux
memcache      9 73.1  0.0 139712 75264 pts/0    Sl+  10:32   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5045823259      instructions:u                                              

      48.028748295 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2296574464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1704129024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
Created 512 connections total
Creating worker on tid 2426204672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802798.801223,       0.0,      163211,     146812,      16399,      93074,      53738, 262.586662, 567.800000, 954.900000, 2017.600000, 373.997082,   0.000000, 2923.350096, 446.374874
Outstanding requests per worker:
8829 9292 34507 51428 51139 39648 39494 37738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38873.0,      194365,     174949,      19416,     122622,      52327, 1665.240748, 3374.300000, 4011.300000, 4928.000000, 1080.801662, 118.041001, 6429.683208, 518.937393
Outstanding requests per worker:
38509 38686 69535 51732 51139 51513 51305 52812 
count  147466
count  147466
count  147466
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41592.2,      207961,     187256,      20705,     136669,      50587, 4749.635475, 10000.000000, 10000.000000, 11000.000000, 2697.303988, 1084.728003, 12007.880211, 552.669485
Outstanding requests per worker:
80838 81297 111671 81061 51139 51513 51305 52812 
count  46861
count  46861
count  46861
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35794.8,      178974,     161071,      17903,     121435,      39636, 6307.886933, 9000.000000, 12000.000000, 17000.000000, 2347.894739, 2478.935003, 18091.289520, 578.158129
Outstanding requests per worker:
123454 131168 157186 156770 52053 51513 51305 52812 
count  11154
count  11154
count  11154
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39134.4,      195672,     176098,      19574,     135058,      41040, 10738.100297, 19000.000000, 19000.000000, 21000.000000, 4429.536807, 1328.719020, 21307.273865, 591.546548
Outstanding requests per worker:
167375 170376 213018 163969 129233 51513 51305 52812 
count  4492
count  4492
count  4492
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32391.0,      161955,     145771,      16184,     113448,      32323, 11967.215157, 15000.000000, 17000.000000, 27000.000000, 3751.749303, 3882.276058, 26271.818161, 603.905441
Outstanding requests per worker:
224118 251492 219546 191677 164749 52257 51305 52812 
count  657
count  657
count  657
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37385.4,      186927,     168183,      18744,     132408,      35775, 17207.270041, 29000.000000, 29000.000000, 29000.000000, 5952.876135, 1800.431967, 30285.564423, 614.578263
Outstanding requests per worker:
285738 307075 219168 196882 166774 86774 51961 52812 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:33   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   10:33   0:00 /usr/lib/linux
memcache     10 72.9  0.0 139712 75904 pts/0    Sl+  10:33   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4968785496      instructions:u                                              

      47.167273729 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2438066688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802849.801274,       0.0,      165072,     148456,      16616,      93730,      54726, 267.028628, 588.200000, 795.900000, 1760.700000, 327.345020,   0.000000, 2584.199905, 443.290349
Outstanding requests per worker:
11742 12238 33242 51522 52289 42771 42613 39215 
count  197099
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40009.6,      200048,     179945,      20103,     125804,      54141, 1824.689937, 3405.600000, 3969.300000, 6000.000000, 1116.370021, 130.234003, 8110.938072, 517.831126
Outstanding requests per worker:
45139 45598 73382 53031 52289 51497 51065 49548 
count  145706
count  145706
count  145706
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41931.4,      209657,     188855,      20802,     138652,      50203, 4994.370747, 10000.000000, 10000.000000, 11000.000000, 2663.118396, 1159.904957, 11773.139000, 556.725562
Outstanding requests per worker:
91113 91548 113344 90726 52289 51497 51065 49548 
count  26208
count  26208
count  26208
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35085.2,      175426,     157819,      17607,     119309,      38510, 6440.191760, 9000.000000, 10000.000000, 14000.000000, 1810.541899, 2421.627998, 17941.465378, 580.029211
Outstanding requests per worker:
134074 140465 163007 151891 52350 51497 51065 49548 
count  6416
count  6416
count  6416
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37239.2,      186196,     167654,      18542,     128436,      39218, 11654.280882, 19000.000000, 20000.000000, 21000.000000, 4432.121443, 3220.561028, 21649.480820, 591.377754
Outstanding requests per worker:
189906 177128 218066 159867 116949 51497 51065 49548 
count  1730
count  1730
count  1730
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31547.6,      157738,     141905,      15833,     110183,      31722, 11825.973866, 14000.000000, 16000.000000, 23000.000000, 3083.745430, 3976.140976, 27163.541794, 603.910137
Outstanding requests per worker:
270861 260329 249013 190161 167911 51592 51065 49548 
count  1040
count  1040
count  1040
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40054.6,      200273,     180401,      19872,     141709,      38692, 17818.669656, 29000.000000, 29000.000000, 30000.000000, 6184.946453, 2804.255009, 30939.697266, 614.451588
Outstanding requests per worker:
332047 300001 248404 224005 198627 88728 51065 49548 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:34   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   10:34   0:00 /usr/lib/linux
memcache     10 71.7  0.0 137664 74496 pts/0    Sl+  10:34   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4959132910      instructions:u                                              

      47.790127930 seconds time elapsed

+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1993273856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575802901.801326,       0.0,      164906,     148464,      16442,      92967,      55497, 300.653705, 793.500000, 1135.200000, 1823.200000, 378.908318,   0.000000, 2657.763004, 439.449079
Outstanding requests per worker:
10334 13075 39173 52405 52785 43430 43268 40003 
count  194471
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39527.4,      197637,     178115,      19522,     124665,      53450, 1805.833894, 3818.000000, 4253.100000, 6000.000000, 1176.871816, 230.460003, 5975.796223, 519.709805
Outstanding requests per worker:
43385 46497 80276 52405 52785 51929 52682 51225 
count  143707
count  143707
count  143707
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40401.4,      202007,     182005,      20002,     133333,      48672, 5005.176528, 11000.000000, 11000.000000, 12000.000000, 2837.834630, 1847.676039, 12273.358345, 554.043510
Outstanding requests per worker:
90228 93260 121947 82862 52785 51929 52682 51225 
count  35852
count  35852
count  35852
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36186.4,      180932,     162820,      18112,     122829,      39991, 6625.585636, 10000.000000, 12000.000000, 17000.000000, 2253.087956, 2739.512920, 17044.754028, 578.358512
Outstanding requests per worker:
135531 142830 180401 146605 53079 51929 52682 51225 
count  5147
count  5147
count  5147
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38526.8,      192634,     173439,      19195,     132668,      40771, 11397.064490, 19000.000000, 20000.000000, 21000.000000, 4469.961193, 1649.721980, 21852.664948, 590.565063
Outstanding requests per worker:
187493 176309 227118 151575 87413 51929 52682 51225 
count  7991
count  7991
count  7991
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34295.0,      171475,     154444,      17031,     120302,      34142, 12155.603292, 16000.000000, 17000.000000, 24000.000000, 3745.989575, 3234.561920, 27028.055191, 605.486940
Outstanding requests per worker:
272742 276695 244867 192124 153405 52928 52682 51225 
count  477
count  477
count  477
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37248.0,      186240,     167670,      18570,     131830,      35840, 18005.420838, 30000.000000, 30000.000000, 30000.000000, 6279.210023, 2321.187019, 31035.560608, 614.470800
Outstanding requests per worker:
343244 309209 247271 211228 157972 75678 52682 51225 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:35   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   10:35   0:00 /usr/lib/linux
memcache      9 73.0  0.0 140736 77056 pts/0    Sl+  10:35   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4963081154      instructions:u                                              

      47.769487392 seconds time elapsed

