+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1741353472
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
num_worker_connections 64
Creating worker on tid 2461069824
starting receive base loop
Created 512 connections total
Creating worker on tid 1865150976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807211.805636,       0.0,       75865,      68290,       7575,      40725,      27565,   0.762533,   0.234100,   0.389100,   8.900000,   7.088792,   0.000000, 161.256000, 405.693103
Outstanding requests per worker:
0 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112476,      12538,      75482,      36994,   0.145505,   0.230100,   0.370100,   0.482100,   0.085660,   0.067000,   0.922000, 485.198202
Outstanding requests per worker:
1 0 0 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25003.2,      125016,     112497,      12519,      79176,      33321,   0.145387,   0.230100,   0.371100,   0.482100,   0.085214,   0.067000,   1.014000, 523.217117
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.2,      125006,     112394,      12612,      81185,      31209,   0.145066,   0.227100,   0.369000,   0.478100,   0.084123,   0.062000,   0.922000, 543.119989
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.2,      125011,     112838,      12173,      83280,      29558,   0.145855,   0.232100,   0.370100,   0.481100,   0.085498,   0.068000,   1.098000, 560.543549
Outstanding requests per worker:
1 0 0 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112735,      12275,      84872,      27863,   0.146557,   0.234100,   0.372100,   0.485100,   0.087065,   0.067000,   1.215000, 577.023356
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25003.0,      125015,     112380,      12635,      85806,      26574,   0.146084,   0.233100,   0.371100,   0.484100,   0.084904,   0.061000,   0.744000, 587.011132
Outstanding requests per worker:
0 0 0 0 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:46   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   11:46   0:00 /usr/lib/linux
memcache      9 61.0  0.0 122304 45056 pts/0    Sl+  11:46   0:28 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3075735983      instructions:u                                              

      47.590749381 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2308108800
starting receive base loop
num_worker_connections 64
Creating worker on tid 1714811392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
num_worker_connections 64
Creating worker on tid 4222022144
starting receive base loop
num_worker_connections 64
Creating worker on tid 3626103296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3030184448
starting receive base loop
Created 512 connections total
Creating worker on tid 2434265600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807262.805687,       0.0,       91546,      82321,       9225,      49745,      32576,   1.131086,   0.467100,   1.300000,  23.100000,   9.166237,   0.000000, 179.679006, 414.015172
Outstanding requests per worker:
1 0 1 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135337,      15048,      91505,      43832,   0.161896,   0.352100,   0.452100,   0.589100,   0.120489,   0.063000,   1.017000, 492.235856
Outstanding requests per worker:
1 0 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135277,      15113,      96207,      39070,   0.162462,   0.354100,   0.453100,   0.590100,   0.119872,   0.067000,   1.117000, 530.380597
Outstanding requests per worker:
0 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135262,      15128,      98829,      36433,   0.167093,   0.372100,   0.465100,   0.596100,   0.125859,   0.066000,   1.133000, 553.544063
Outstanding requests per worker:
0 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135198,      15196,     101641,      33557,   0.168678,   0.374100,   0.463100,   0.592100,   0.123567,   0.066000,   1.029000, 574.608271
Outstanding requests per worker:
1 1 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135371,      15019,     103231,      32140,   0.168215,   0.372100,   0.463100,   0.592100,   0.123441,   0.067000,   1.126000, 587.419181
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135349,      15039,     104342,      31007,   0.169020,   0.371100,   0.461100,   0.595100,   0.126914,   0.061000,   1.477000, 596.684076
Outstanding requests per worker:
1 0 1 1 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:47   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   11:47   0:00 /usr/lib/linux
memcache      8 67.6  0.0 129472 54144 pts/0    Sl+  11:47   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3725540254      instructions:u                                              

      47.731879505 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2652500480
starting receive base loop
num_worker_connections 64
Creating worker on tid 2058416640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
Created 512 connections total
Creating worker on tid 2780492288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807313.805738,       0.0,      105239,      94649,      10590,      57608,      37041,  29.369054,  63.400000,  85.100000, 183.500000,  66.459963,   0.000000, 1401.396990, 418.464569
Outstanding requests per worker:
158 170 177 151 159 148 143 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35204.8,      176024,     158610,      17414,     107992,      50618,  22.057959,  43.100000,  45.700000,  60.600000,  14.411289,   0.105000,  99.669002, 497.699805
Outstanding requests per worker:
84 97 96 84 95 86 95 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35079.8,      175399,     158048,      17351,     113714,      44334,  21.861886,  44.500000,  47.300000,  50.400000,  13.794492,   0.104000,  55.907998, 541.671334
Outstanding requests per worker:
106 98 90 96 97 91 101 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35077.4,      175387,     158103,      17284,     116806,      41297,  22.855691,  46.800000,  49.900000,  54.100000,  14.483094,   0.107000,  58.205001, 562.764641
Outstanding requests per worker:
113 108 111 102 96 116 106 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35075.8,      175379,     157827,      17552,     119682,      38145,  23.933677,  49.200000,  53.200000,  56.500000,  15.246647,   0.122000,  63.925996, 583.630843
Outstanding requests per worker:
96 123 149 110 111 120 90 119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35105.6,      175528,     158062,      17466,     121690,      36372,  24.592344,  50.800000,  55.500000,  58.300000,  15.746884,   0.099000,  62.742002, 595.150789
Outstanding requests per worker:
101 111 120 90 114 105 115 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35085.0,      175425,     157990,      17435,     123232,      34758,  24.843949,  51.300000,  56.000000,  59.700000,  15.905415,   0.135000,  63.663997, 607.069365
Outstanding requests per worker:
105 119 98 107 104 116 125 99 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:48   0:00 bash docker-en
memcache     11  0.0  0.0  62208  6272 pts/0    S+   11:48   0:00 /usr/lib/linux
memcache     12 69.1  0.0 133568 60224 pts/0    Sl+  11:48   0:33 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  11:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4231778546      instructions:u                                              

      47.499480264 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2605969920
starting receive base loop
num_worker_connections 64
Creating worker on tid 2007429632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
Created 512 connections total
Creating worker on tid 2729505280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807363.805788,       0.0,      110379,      99369,      11010,      60937,      38432,  37.700215,  52.800000,  78.100000, 840.700000, 138.107653,   0.000000, 1957.105041, 424.155552
Outstanding requests per worker:
182 180 208 197 194 167 216 9317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38253.8,      191269,     172221,      19048,     118248,      53973, 235.664815, 222.900000, 1224.400000, 4205.100000, 710.408470,   0.227000, 6989.518166, 503.768814
Outstanding requests per worker:
706 590 649 777 657 677 588 14775 
count  185757
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38613.0,      193065,     173634,      19431,     126038,      47596, 604.560476, 559.800000, 3616.000000, 8000.000000, 1379.508094,   0.452000, 9254.775047, 547.078700
Outstanding requests per worker:
1776 1927 1844 1783 1995 1814 1808 13420 
count  188122
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38934.8,      194674,     175234,      19440,     130664,      44570, 751.374951, 793.500000, 2800.900000, 8000.000000, 1248.451279,   0.865000, 9237.482071, 569.312725
Outstanding requests per worker:
2756 2751 2579 2621 2685 2830 2485 13006 
count  189685
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39127.0,      195635,     176077,      19558,     134301,      41776, 867.851773, 973.200000, 2391.200000, 8000.000000, 1148.198361,   1.471000, 8817.261696, 587.285375
Outstanding requests per worker:
3265 3512 3227 3352 3313 3225 3414 12794 
count  190311
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39120.8,      195604,     176165,      19439,     136580,      39585, 973.442624, 1130.500000, 2197.000000, 8000.000000, 1089.717059,   1.860000, 8906.226158, 601.043471
Outstanding requests per worker:
4019 4037 3995 3985 3979 3899 4053 12556 
count  191547
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39229.6,      196148,     176744,      19404,     138739,      38005, 1063.713682, 1303.800000, 2069.700000, 7000.000000, 1031.256957,  80.945998, 9018.355370, 611.754385
Outstanding requests per worker:
4697 4603 4365 4633 4521 4552 4473 12548 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:49   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   11:49   0:00 /usr/lib/linux
memcache     10 69.6  0.0 137664 79168 pts/0    Sl+  11:49   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4813868154      instructions:u                                              

      47.670912100 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2037445120
starting receive base loop
Creating worker on tid 1438315008
num_worker_connections 64
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807414.805839,       0.0,      121389,     109207,      12182,      67281,      41926,  39.691603,  67.900000,  90.600000, 657.100000, 127.437460,   0.000000, 2104.659081, 426.922496
Outstanding requests per worker:
275 289 301 279 283 284 6063 11299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38440.8,      192204,     172939,      19265,     119289,      53650, 289.631749, 343.200000, 1413.400000, 4414.000000, 752.958623,   0.285000, 6935.072899, 507.399025
Outstanding requests per worker:
1303 1398 1368 1458 1380 1375 6097 38502 
count  182735
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37307.8,      186539,     167848,      18691,     121762,      46086, 674.839891, 810.200000, 2260.700000, 7000.000000, 1067.726969,   0.649000, 9464.001656, 546.383514
Outstanding requests per worker:
3629 3874 3724 3578 3665 3705 7426 48608 
count  183260
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37191.6,      185958,     167516,      18442,     125401,      42115, 1104.225902, 1277.900000, 1675.700000, 13000.000000, 1580.983410, 163.307995, 15608.158112, 572.329628
Outstanding requests per worker:
5716 5750 5771 5859 5705 5673 9243 48933 
count  180756
count  180756
count  180756
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43888.4,      219442,     197564,      21878,     150217,      47347, 3665.382567, 15000.000000, 17000.000000, 18000.000000, 5101.644471, 271.982014, 19171.672821, 586.010974
Outstanding requests per worker:
8822 9089 9176 8859 8992 9020 12634 72394 
count  175223
count  175223
count  175223
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39270.4,      196352,     176755,      19597,     137298,      39457, 2909.307210, 6000.000000, 8000.000000, 19000.000000, 3112.642757, 690.796018, 19440.715790, 604.083183
Outstanding requests per worker:
12731 12818 13012 12431 12681 12675 16233 76072 
count  167116
count  167116
count  167116
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39008.4,      195042,     175480,      19562,     137663,      37817, 3610.284710, 9000.000000, 11000.000000, 13000.000000, 2679.105760, 844.694018, 19962.114334, 612.819529
Outstanding requests per worker:
16645 16839 16635 16274 16662 16714 20122 79741 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:50   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   11:50   0:00 /usr/lib/linux
memcache     11 70.4  0.0 138688 79296 pts/0    Sl+  11:50   0:33 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4864342998      instructions:u                                              

      47.500429447 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2452550144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1857090048
starting receive base loop
num_worker_connections 64
Creating worker on tid 1261171200
starting receive base loop
num_worker_connections 64
Creating worker on tid 665252352
starting receive base loop
num_worker_connections 64
Creating worker on tid 69333504
starting receive base loop
num_worker_connections 64
Creating worker on tid 3768381952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3172463104
starting receive base loop
Created 512 connections total
Creating worker on tid 2579165696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807465.805890,       0.0,      126314,     113597,      12717,      70237,      43360,  45.308585,  67.100000,  97.400000, 804.400000, 141.919429,   0.000000, 2111.576080, 428.973019
Outstanding requests per worker:
274 350 300 294 298 1442 13584 12501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38440.8,      192204,     172979,      19225,     119744,      53235, 330.577220, 381.100000, 1815.800000, 4625.300000, 798.430910,   0.385000, 7055.099010, 510.256326
Outstanding requests per worker:
1802 1733 1771 1805 1787 1817 32391 43753 
count  177415
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36853.2,      184266,     166019,      18247,     120565,      45454, 839.864830, 826.700000, 3488.900000, 11000.000000, 1600.080346,   0.914000, 11767.521858, 548.060668
Outstanding requests per worker:
4240 4393 4371 4331 4171 4179 35649 53014 
count  178685
count  178685
count  178685
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40397.2,      201986,     181803,      20183,     136050,      45753, 2020.056466, 7000.000000, 10000.000000, 12000.000000, 2665.554444, 107.827999, 12993.693352, 571.183429
Outstanding requests per worker:
8034 8201 8179 8466 8096 8033 45393 53041 
count  171026
count  171026
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37737.2,      188686,     169989,      18697,     130134,      39855, 2398.765274, 4788.900000, 8000.000000, 13000.000000, 2142.206635, 515.500009, 13610.474586, 590.884493
Outstanding requests per worker:
12408 12599 12397 12577 12347 12446 49725 53041 
count  163004
count  163004
count  163004
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40635.8,      203179,     182765,      20414,     141561,      41204, 5074.111769, 12000.000000, 25000.000000, 26000.000000, 6516.358019, 901.947975, 26399.642944, 601.706995
Outstanding requests per worker:
17112 17398 16948 17629 17292 17339 54306 54859 
count  143902
count  143902
count  143902
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39644.4,      198222,     178505,      19717,     140232,      38273, 7165.109352, 24000.000000, 24000.000000, 27000.000000, 7351.519220, 1496.230960, 28521.566391, 612.855528
Outstanding requests per worker:
24536 24643 24401 24843 24683 24863 61683 98310 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:51   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   11:51   0:00 /usr/lib/linux
memcache     11 70.5  0.0 138688 79744 pts/0    Sl+  11:51   0:33 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  11:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4850151774      instructions:u                                              

      47.891824449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2104029696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1505423872
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807516.805941,       0.0,      130288,     117293,      12995,      72647,      44646,  58.197816,  69.500000, 208.400000, 1025.800000, 172.224675,   0.000000, 2122.129917, 431.204991
Outstanding requests per worker:
358 286 317 321 389 9117 14713 13794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38794.4,      193972,     174539,      19433,     120716,      53823, 363.302461, 421.800000, 2119.400000, 4922.300000, 849.243735,   0.395000, 7121.440887, 509.677946
Outstanding requests per worker:
2142 2238 2146 2150 2215 13130 48916 48282 
count  183664
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37913.8,      189569,     170691,      18878,     124133,      46558, 868.172405, 1070.300000, 3509.000000, 7000.000000, 1214.348514,   1.062000, 10485.075951, 548.829546
Outstanding requests per worker:
5518 5397 5558 5313 5483 15594 54006 54424 
count  184218
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38425.2,      192126,     173002,      19124,     129540,      43462, 1512.518446, 1717.700000, 4419.400000, 17000.000000, 2159.491824, 299.795985, 16688.646317, 573.204772
Outstanding requests per worker:
8664 8388 8498 8468 8404 18651 54131 54424 
count  163187
count  163187
count  163187
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42506.4,      212532,     191261,      21271,     146181,      45080, 4602.349892, 16000.000000, 17000.000000, 18000.000000, 5483.699098, 437.130988, 19718.944550, 589.148331
Outstanding requests per worker:
15066 15158 15194 14996 14836 25296 87017 54703 
count  153221
count  153221
count  153221
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37335.6,      186678,     168174,      18504,     130612,      37562, 3957.691833, 7000.000000, 9000.000000, 19000.000000, 3124.576436, 1149.937987, 20187.614441, 603.912246
Outstanding requests per worker:
23198 22997 23024 23114 22983 33246 109173 54703 
count  142701
count  142701
count  142701
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38098.0,      190490,     171645,      18845,     134822,      36823, 5807.139013, 11000.000000, 12000.000000, 31000.000000, 4896.382105, 1988.515973, 31642.595291, 612.582225
Outstanding requests per worker:
31309 31238 31060 31099 31064 41394 117403 54939 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:52   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   11:52   0:00 /usr/lib/linux
memcache      9 70.6  0.0 138688 79680 pts/0    Sl+  11:52   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  11:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4941067079      instructions:u                                              

      47.680379129 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2484990464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1889333760
starting receive base loop
num_worker_connections 64
Creating worker on tid 1293414912
starting receive base loop
num_worker_connections 64
Creating worker on tid 700117504
starting receive base loop
num_worker_connections 64
Creating worker on tid 104198656
starting receive base loop
num_worker_connections 64
Creating worker on tid 3803247104
starting receive base loop
num_worker_connections 64
Creating worker on tid 3207328256
starting receive base loop
Created 512 connections total
Creating worker on tid 2611409408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807567.805992,       0.0,      132266,     118898,      13368,      74092,      44806,  86.650433,  85.000000, 316.600000, 1711.500000, 279.223230,   0.000000, 2789.506912, 433.773478
Outstanding requests per worker:
366 366 380 451 2851 15753 15816 15039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38735.6,      193678,     174329,      19349,     120555,      53774, 443.191368, 878.100000, 2319.800000, 4914.500000, 886.400180,   0.477000, 7040.276051, 509.280837
Outstanding requests per worker:
2860 2935 2682 2848 3255 37503 52716 51557 
count  176300
count  176300
count  176300
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39362.2,      196811,     177123,      19688,     128643,      48480, 1454.375194, 6000.000000, 9000.000000, 11000.000000, 2339.650053,   1.825000, 11055.087090, 548.779549
Outstanding requests per worker:
6594 6831 6404 6537 6928 47578 52716 51557 
count  172676
count  172676
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37762.8,      188814,     170154,      18660,     127401,      42753, 2126.905363, 4396.500000, 9000.000000, 12000.000000, 2352.868937, 347.999990, 14608.601570, 573.043437
Outstanding requests per worker:
12704 13331 12689 13110 13287 53811 53966 51557 
count  158766
count  158766
count  158766
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37369.6,      186848,     168119,      18729,     128363,      39756, 3140.714369, 7000.000000, 9000.000000, 13000.000000, 2598.089346, 845.323980, 20916.765213, 589.381688
Outstanding requests per worker:
19354 19950 19559 19639 20221 60645 54078 51557 
count  138763
count  138763
count  138763
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42076.4,      210382,     189368,      21014,     146787,      42581, 7548.964820, 21000.000000, 22000.000000, 23000.000000, 7037.842096, 1421.622992, 24499.521255, 601.415968
Outstanding requests per worker:
29551 30344 29602 29829 30420 70872 110289 51557 
count  84626
count  84626
count  84626
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36416.2,      182081,     163880,      18201,     129107,      34773, 6592.049290, 12000.000000, 15000.000000, 25000.000000, 4365.873032, 2745.152950, 28079.809189, 614.755998
Outstanding requests per worker:
41361 41913 41485 41850 41995 82924 158393 52660 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:52   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   11:52   0:00 /usr/lib/linux
memcache      9 70.7  0.0 138688 77824 pts/0    Sl+  11:52   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4892362236      instructions:u                                              

      47.860220581 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2628448768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2031612416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
Created 512 connections total
Creating worker on tid 2753688064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807619.806044,       0.0,      136004,     122404,      13600,      76320,      46084,  89.271140,  93.600000, 287.900000, 1724.000000, 282.951625,   0.000000, 3077.446938, 436.772859
Outstanding requests per worker:
567 512 482 616 10071 17329 17263 16261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38393.4,      191967,     172698,      19269,     119812,      52886, 512.440587, 907.300000, 2875.600000, 4400.100000, 885.203030,   0.557000, 5968.502998, 511.517638
Outstanding requests per worker:
3969 3827 3810 3762 11135 46670 51586 52042 
count  181640
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37612.2,      188061,     169344,      18717,     123429,      45915, 1199.295679, 1513.600000, 4058.100000, 11000.000000, 1705.175597,  12.074000, 11887.831688, 550.224307
Outstanding requests per worker:
8112 8323 8082 8075 15237 48532 51586 52042 
count  173230
count  173230
count  173230
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42527.0,      212635,     191373,      21262,     143181,      48192, 3227.305417, 11000.000000, 12000.000000, 14000.000000, 3669.413902, 417.522013, 16078.338623, 572.333516
Outstanding requests per worker:
15586 16029 15658 15721 23007 80112 53423 52042 
count  157919
count  157919
count  157919
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37575.4,      187877,     169103,      18774,     129546,      39557, 3593.999930, 7000.000000, 9000.000000, 15000.000000, 2592.820043, 917.791009, 20503.223419, 591.831901
Outstanding requests per worker:
25640 25966 25689 25588 32876 90695 53633 52042 
count  139777
count  139777
count  139777
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42116.0,      210580,     189525,      21055,     147334,      42191, 7703.980486, 24000.000000, 25000.000000, 26000.000000, 7097.546379, 1762.390971, 26290.529251, 605.184356
Outstanding requests per worker:
36451 36805 36453 36388 43859 101748 65221 52042 
count  38780
count  38780
count  38780
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36268.8,      181344,     163129,      18215,     128675,      34454, 8283.279442, 16000.000000, 24000.000000, 27000.000000, 5712.963786, 1784.512043, 28172.321320, 615.961822
Outstanding requests per worker:
51202 51380 51191 51010 58530 116462 134710 52042 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:53   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   11:53   0:00 /usr/lib/linux
memcache      8 72.6  0.0 139712 77184 pts/0    Sl+  11:53   0:34 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4958995194      instructions:u                                              

      47.931472654 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2347037184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1755116032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
Created 512 connections total
Creating worker on tid 2477191680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807670.806095,       0.0,      138226,     124439,      13787,      77786,      46653,  92.273173, 121.200000, 232.800000, 1704.300000, 277.608053,   0.000000, 3065.865993, 435.941939
Outstanding requests per worker:
771 807 831 783 17936 18609 18537 17545 
count  189350
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38777.4,      193887,     174421,      19466,     120923,      53498, 678.557578, 1669.000000, 3638.100000, 6000.000000, 1163.544800,   0.721000, 6917.224884, 510.853510
Outstanding requests per worker:
4939 5011 4910 4673 27071 53768 53166 52563 
count  177916
count  177916
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37580.8,      187904,     169317,      18587,     123109,      46208, 1397.719642, 2770.800000, 6000.000000, 7000.000000, 1347.936932, 158.726007, 7814.375877, 548.908060
Outstanding requests per worker:
11130 11381 11176 11042 33298 53768 53166 52563 
count  167669
count  167669
count  167669
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42459.4,      212297,     191149,      21148,     142559,      48590, 3997.038291, 15000.000000, 15000.000000, 16000.000000, 4576.421354, 548.367023, 16949.192047, 570.111714
Outstanding requests per worker:
19071 19099 19086 18782 41048 59339 53801 52563 
count  145601
count  145601
count  145601
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37194.2,      185971,     167521,      18450,     127941,      39580, 4692.522378, 13000.000000, 15000.000000, 17000.000000, 3655.455207, 1375.496984, 17890.285492, 590.694265
Outstanding requests per worker:
32435 32345 32643 32064 54454 128626 53801 52563 
count  104901
count  104901
count  104901
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36520.0,      182600,     164228,      18372,     127600,      36628, 5588.761562, 9000.000000, 10000.000000, 17000.000000, 2338.986592, 2828.541994, 26831.655502, 604.204204
Outstanding requests per worker:
45965 45921 46148 45597 67874 142115 53820 52563 
count  5108
count  5108
count  5108
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40568.4,      202842,     182551,      20291,     143243,      39308, 11230.198553, 27000.000000, 28000.000000, 29000.000000, 7974.455337, 4305.929184, 29437.475204, 613.707452
Outstanding requests per worker:
62540 62579 62901 62330 84522 158672 88556 52563 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:54   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   11:54   0:00 /usr/lib/linux
memcache     11 71.2  0.0 139712 76160 pts/0    Sl+  11:54   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4965777299      instructions:u                                              

      48.046366381 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2292969984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1696068096
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
Created 512 connections total
Creating worker on tid 2418143744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807721.806146,       0.0,      144971,     130427,      14544,      81540,      48887, 113.201657, 186.300000, 279.000000, 1831.000000, 296.668638,   0.000000, 3223.853111, 437.103729
Outstanding requests per worker:
1470 1394 1529 1492 24610 20671 20595 18868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36608.8,      183044,     164871,      18173,     114113,      50758, 591.631631, 802.500000, 1930.400000, 4527.600000, 776.377216,   0.689000, 7138.731003, 511.017680
Outstanding requests per worker:
6646 6668 6566 6662 35735 53118 52706 50201 
count  179695
count  179695
count  179695
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40827.4,      204137,     183704,      20433,     133726,      49978, 2061.094790, 6000.000000, 8000.000000, 9000.000000, 2003.506986, 188.609004, 9132.727623, 550.149795
Outstanding requests per worker:
15661 15609 15745 15720 52332 53118 52706 50201 
count  163225
count  163225
count  163225
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37307.4,      186537,     167800,      18737,     126009,      41791, 3068.738557, 6000.000000, 8000.000000, 16000.000000, 2211.747446, 794.351995, 17010.631561, 574.344905
Outstanding requests per worker:
26210 25818 26183 26009 62785 53323 52706 50201 
count  132604
count  132604
count  132604
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41321.2,      206606,     186141,      20465,     142018,      44123, 6806.489041, 17000.000000, 17000.000000, 18000.000000, 5061.689164, 1652.600050, 19137.317657, 588.125464
Outstanding requests per worker:
42048 41825 41979 41806 78763 101579 52706 50201 
count  42612
count  42612
count  42612
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36780.4,      183902,     165335,      18567,     128354,      36981, 6715.264985, 10000.000000, 13000.000000, 20000.000000, 3076.898706, 3258.932114, 25430.635452, 602.693416
Outstanding requests per worker:
59525 59096 59370 59335 96082 169616 52940 50201 
count  128
count  128
count  128
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40775.0,      203875,     183482,      20393,     144253,      39229, 12122.318188, 29000.000000, 29000.000000, 30000.000000, 8021.803451, 2672.243118, 31072.870255, 615.169216
Outstanding requests per worker:
78208 77832 78200 78275 115040 177608 69019 50201 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:55   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   11:55   0:00 /usr/lib/linux
memcache     10 71.4  0.0 139712 75264 pts/0    Sl+  11:55   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5005024608      instructions:u                                              

      47.835372183 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1826550272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1234366976
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807773.806198,       0.0,      148107,     133260,      14847,      83084,      50176, 140.499180, 234.700000, 328.800000, 1839.200000, 300.822804,   0.000000, 3220.660925, 435.731060
Outstanding requests per worker:
2073 2232 2263 2615 28760 22212 22129 20000 
count  184449
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37281.8,      186409,     167708,      18701,     116526,      51182, 704.656279, 955.200000, 1879.000000, 6000.000000, 858.978543,   1.455000, 8181.790352, 513.533761
Outstanding requests per worker:
8438 8670 8638 8888 41127 53286 48770 52407 
count  178892
count  178892
count  178892
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42059.2,      210296,     189346,      20950,     137950,      51396, 2356.947512, 7000.000000, 9000.000000, 10000.000000, 2253.083431, 264.880002, 10598.518372, 550.082151
Outstanding requests per worker:
19232 19328 19398 19588 64237 54010 48770 52407 
count  159519
count  159519
count  159519
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37270.8,      186354,     167901,      18453,     126127,      41774, 3333.867731, 6000.000000, 8000.000000, 10000.000000, 1819.313221, 1203.789949, 15357.147217, 576.522534
Outstanding requests per worker:
32121 32248 32504 32315 77099 54115 48770 52407 
count  121276
count  121276
count  121276
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41906.4,      209532,     188734,      20798,     144298,      44436, 7563.729352, 17000.000000, 18000.000000, 19000.000000, 5322.885044, 2463.758945, 19876.607895, 590.568583
Outstanding requests per worker:
49744 49768 50067 50159 95003 87235 48770 52407 
count  12003
count  12003
count  12003
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35324.0,      176620,     159047,      17573,     123768,      35279, 7231.953089, 12000.000000, 14000.000000, 20000.000000, 2953.854801, 3905.041933, 21440.311432, 604.369293
Outstanding requests per worker:
69784 69610 70063 70249 114970 159851 48770 52407 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41680.8,      208404,     187517,      20887,     147597,      39920, 12411.226383, 30000.000000, 31000.000000, 31000.000000, 7652.072693, 5649.839878, 31571.851730, 614.771359
Outstanding requests per worker:
90694 90613 91008 91294 135775 179849 54611 53419 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:56   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   11:56   0:00 /usr/lib/linux
memcache     10 71.5  0.0 139712 76480 pts/0    Sl+  11:56   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5053001873      instructions:u                                              

      47.972325425 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2023158272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
num_worker_connections 64
Creating worker on tid 2745627136
starting receive base loop
Created 512 connections total
Creating worker on tid 2149708288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807824.806249,       0.0,      150411,     135297,      15114,      84857,      50440, 164.798188, 297.500000, 398.700000, 1845.800000, 301.522768,   0.000000, 3223.408937, 436.749255
Outstanding requests per worker:
3095 3124 3112 5556 33562 23099 23013 21278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36917.2,      184586,     166166,      18420,     115746,      50420, 764.905048, 1159.100000, 1657.900000, 3309.600000, 540.886733,   3.968000, 4970.094204, 514.798623
Outstanding requests per worker:
11434 11176 11160 13777 47471 49509 52760 52459 
count  171609
count  171609
count  171609
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42108.6,      210543,     189642,      20901,     138408,      51234, 2799.074604, 9000.000000, 9000.000000, 10000.000000, 2650.916447, 458.860993, 11720.378876, 551.180830
Outstanding requests per worker:
23707 23594 23520 26112 79377 49509 52760 52459 
count  162972
count  162972
count  162972
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37868.8,      189344,     170327,      19017,     128071,      42256, 3738.143865, 6000.000000, 8000.000000, 12000.000000, 1826.653072, 1467.893958, 12614.504814, 575.035162
Outstanding requests per worker:
40303 39954 40022 42735 98950 49509 52760 52459 
count  91334
count  91334
count  91334
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40595.2,      202976,     182790,      20186,     139854,      42936, 7759.884766, 18000.000000, 19000.000000, 19000.000000, 5127.839551, 2900.218964, 22119.670868, 590.215909
Outstanding requests per worker:
60365 59786 60210 62637 118611 82875 53232 52459 
count  6049
count  6049
count  6049
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36244.0,      181220,     163209,      18011,     126932,      36277, 8554.383513, 15000.000000, 19000.000000, 23000.000000, 3984.833404, 3556.591034, 26316.524506, 602.710090
Outstanding requests per worker:
83967 83741 83686 86269 140141 132410 53517 52459 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34106.0,      170530,     153331,      17199,     120480,      32851, 10564.335869, 16000.000000, 17000.000000, 32000.000000, 3844.397209, 7016.454220, 31798.337936, 613.613862
Outstanding requests per worker:
108065 107852 107936 110436 166292 175322 53721 52459 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:57   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   11:57   0:00 /usr/lib/linux
memcache     11 71.6  0.0 139712 76160 pts/0    Sl+  11:57   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2276061696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807876.806301,       0.0,      153667,     138221,      15446,      86803,      51418, 168.890062, 297.800000, 427.800000, 1919.500000, 312.000687,   0.000000, 3234.147072, 439.373945
Outstanding requests per worker:
3401 3384 3409 11760 36842 25357 25263 22729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38216.8,      191084,     171810,      19274,     120383,      51427, 875.779564, 1364.100000, 2627.100000, 3696.600000, 698.346821,  61.990999, 6802.271843, 519.130330
Outstanding requests per worker:
12743 12580 12842 20977 51060 54065 51447 51183 
count  174848
count  174848
count  174848
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42436.4,      212182,     190952,      21230,     139392,      51560, 3205.588753, 10000.000000, 11000.000000, 12000.000000, 3221.953498, 579.209983, 11925.739288, 551.135804
Outstanding requests per worker:
25607 25646 25903 34258 76785 54065 51447 51183 
count  152212
count  152212
count  152212
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36899.8,      184499,     166042,      18457,     124739,      41303, 4175.761332, 7000.000000, 11000.000000, 13000.000000, 2355.786043, 1621.950984, 15034.187317, 575.794106
Outstanding requests per worker:
46156 46211 46276 54753 130912 54746 51447 51183 
count  69732
count  69732
count  69732
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41588.2,      207941,     187371,      20570,     143608,      43763, 7826.049505, 20000.000000, 21000.000000, 21000.000000, 5202.348368, 3110.583067, 21470.951080, 591.284841
Outstanding requests per worker:
67349 67824 67736 76292 152486 66824 51447 51183 
count  2484
count  2484
count  2484
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35361.2,      176806,     159034,      17772,     123802,      35232, 9492.427458, 20000.000000, 22000.000000, 23000.000000, 4557.868394, 3002.427101, 23980.194092, 604.992901
Outstanding requests per worker:
94166 94663 94821 103090 173401 136495 51447 51183 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33642.8,      168214,     151412,      16802,     119349,      32063, 10775.719946, 16000.000000, 17000.000000, 30000.000000, 3397.842046, 5924.069881, 29741.886139, 615.596776
Outstanding requests per worker:
121320 121825 121190 130352 198136 165567 51784 51183 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:58   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   11:58   0:00 /usr/lib/linux
memcache     10 71.8  0.0 139712 76096 pts/0    Sl+  11:58   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5038116650      instructions:u                                              

      48.080672231 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2121265664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807927.806352,       0.0,      149927,     134851,      15076,      84597,      50254, 172.960936, 310.200000, 456.100000, 1883.800000, 312.653519,   0.000000, 3150.641918, 439.629517
Outstanding requests per worker:
3734 3728 3619 17093 37521 25134 25034 23810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38965.0,      194825,     175298,      19527,     122206,      53092, 1022.508128, 2027.200000, 3320.000000, 4540.800000, 932.757847,  25.500000, 6950.864792, 515.981808
Outstanding requests per worker:
14315 14500 14549 28932 53454 53378 54003 51891 
count  177908
count  177908
count  177908
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41160.2,      205801,     185176,      20625,     135511,      49665, 3123.868437, 11000.000000, 12000.000000, 12000.000000, 3103.397616, 690.505981, 12611.089706, 555.137653
Outstanding requests per worker:
28395 28560 28395 42839 56070 53378 54003 51891 
count  146032
count  146032
count  146032
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38473.8,      192369,     173105,      19264,     130313,      42792, 4858.020394, 11000.000000, 12000.000000, 14000.000000, 2939.602781, 1923.143029, 14604.513168, 576.503128
Outstanding requests per worker:
51075 51523 51218 65779 143990 53819 54003 51891 
count  43916
count  43916
count  43916
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38537.8,      192689,     173640,      19049,     133364,      40276, 7070.424971, 9000.000000, 22000.000000, 22000.000000, 4171.427527, 3687.375069, 21837.390900, 594.761748
Outstanding requests per worker:
74519 75185 74739 89144 168657 54714 54003 51891 
count  2682
count  2682
count  2682
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37312.6,      186563,     167705,      18858,     130434,      37271, 10852.819961, 21000.000000, 22000.000000, 23000.000000, 5318.355982, 4210.009098, 24202.636719, 605.036022
Outstanding requests per worker:
103741 104492 103808 116891 177935 113499 54288 51891 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36210.8,      181054,     162790,      18264,     128091,      34699, 11219.603432, 16000.000000, 17000.000000, 26000.000000, 3514.948759, 5137.416840, 30647.014618, 615.160077
Outstanding requests per worker:
130162 134957 131789 144458 205523 182183 54562 51891 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:58   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   11:58   0:00 /usr/lib/linux
memcache     11 73.0  0.0 140736 77824 pts/0    Sl+  11:58   0:34 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5014690956      instructions:u                                              

      47.634310576 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2053960192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
num_worker_connections 64
Creating worker on tid 2780492288
starting receive base loop
Created 512 connections total
Creating worker on tid 2184573440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575807978.806403,       0.0,      151784,     136541,      15243,      85588,      50953, 181.288523, 328.800000, 521.200000, 1857.900000, 319.382503,   0.000000, 3154.849052, 438.322519
Outstanding requests per worker:
4063 3997 4092 22190 39524 26390 26286 24999 
count  195139
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39482.2,      197411,     177858,      19553,     123562,      54296, 1133.476137, 2552.400000, 3758.300000, 6000.000000, 1025.291675,  71.653999, 5818.709850, 514.908000
Outstanding requests per worker:
16405 16568 16339 37644 52972 53500 52135 53833 
count  174444
count  174444
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38708.8,      193544,     174095,      19449,     127296,      46799, 2759.657120, 4976.400000, 7000.000000, 13000.000000, 2179.545534, 612.837970, 13084.085464, 553.284965
Outstanding requests per worker:
32635 32703 32631 53699 53640 53500 52135 53833 
count  142551
count  142551
count  142551
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41004.6,      205023,     184497,      20526,     138352,      46145, 5576.289936, 12000.000000, 13000.000000, 15000.000000, 3448.018169, 1094.284058, 15276.933670, 574.671984
Outstanding requests per worker:
57654 57690 57355 78971 111945 53500 52135 53833 
count  27556
count  27556
count  27556
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37670.6,      188353,     169617,      18736,     130272,      39345, 6735.510915, 9000.000000, 11000.000000, 22000.000000, 2827.596229, 4049.870014, 21972.431183, 592.313707
Outstanding requests per worker:
83903 84063 83752 105476 164266 53692 52135 53833 
count  6574
count  6574
count  6574
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40224.2,      201121,     181193,      19928,     140795,      40398, 11467.138179, 22000.000000, 22000.000000, 24000.000000, 5563.607810, 2469.866991, 24869.876862, 603.739615
Outstanding requests per worker:
113260 116169 115763 137088 170439 133084 52135 53833 
count  1824
count  1824
count  1824
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35030.6,      175153,     157545,      17608,     124098,      33447, 11830.915178, 16000.000000, 17000.000000, 30000.000000, 3779.556142, 4628.802776, 29810.995102, 615.951131
Outstanding requests per worker:
145554 147549 144615 170546 176735 176426 53028 53833 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:59   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   11:59   0:00 /usr/lib/linux
memcache     10 73.0  0.0 140736 75264 pts/0    Sl+  11:59   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5058032553      instructions:u                                              

      48.152322830 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1683157504
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
num_worker_connections 64
Creating worker on tid 2402021888
starting receive base loop
Created 512 connections total
Creating worker on tid 1806103040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808029.806454,       0.0,      154186,     138993,      15193,      87324,      51669, 220.451157, 418.100000, 542.900000, 1893.600000, 322.125165,   0.000000, 3068.249941, 440.673847
Outstanding requests per worker:
5549 5617 5766 26037 41476 27782 27675 26318 
count  192303
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39451.6,      197258,     177683,      19575,     123658,      54025, 1356.341437, 2956.300000, 4357.200000, 6000.000000, 1134.735360, 145.778000, 7697.831154, 514.820185
Outstanding requests per worker:
21023 20658 20887 46398 53244 52938 53666 52334 
count  173497
count  173497
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38146.2,      190731,     171493,      19238,     125003,      46490, 2967.651636, 4782.600000, 7000.000000, 13000.000000, 1848.264577, 1121.927977, 13145.475388, 552.030864
Outstanding requests per worker:
40369 39471 40287 65830 53500 52938 53666 52334 
count  124424
count  124424
count  124424
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41416.8,      207084,     186424,      20660,     139914,      46510, 6297.647462, 13000.000000, 14000.000000, 15000.000000, 3593.847031, 2331.321001, 15567.701340, 574.521601
Outstanding requests per worker:
68156 67346 68215 93383 115157 52938 53666 52334 
count  2798
count  2798
count  2798
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35992.6,      179963,     162006,      17957,     124293,      37713, 7063.320935, 9000.000000, 11000.000000, 22000.000000, 2319.202775, 4139.698029, 21191.083908, 592.345561
Outstanding requests per worker:
98141 97370 98064 120969 154721 53186 53666 52334 
count  2265
count  2265
count  2265
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39153.4,      195767,     176285,      19482,     136880,      39405, 12129.484047, 23000.000000, 23000.000000, 24000.000000, 5538.906793, 2466.453075, 25505.239487, 603.966044
Outstanding requests per worker:
127233 128909 125483 151717 160714 84253 54076 52334 
count  6315
count  6315
count  6315
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33550.2,      167751,     151110,      16641,     118878,      32232, 12341.575412, 16000.000000, 24000.000000, 28000.000000, 4096.756521, 4051.837921, 29167.711258, 614.284515
Outstanding requests per worker:
165782 160244 159744 195459 171622 155327 54524 52334 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:00   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   12:00   0:00 /usr/lib/linux
memcache      9 71.6  0.0 140736 78528 pts/0    Sl+  12:00   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  12:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5015199438      instructions:u                                              

      47.882900744 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2393240064
starting receive base loop
num_worker_connections 64
Creating worker on tid 1798042112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
Created 512 connections total
Creating worker on tid 2520117760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808081.806506,       0.0,      157562,     141824,      15738,      89110,      52714, 247.396522, 482.600000, 626.100000, 1953.800000, 333.853663,   0.000000, 3148.475885, 441.840069
Outstanding requests per worker:
6897 6865 7100 29629 43918 29602 29489 27780 
count  191686
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39977.6,      199888,     179933,      19955,     125657,      54276, 1525.515242, 3518.900000, 4770.400000, 6000.000000, 1232.433777, 190.063998, 6494.393826, 516.436268
Outstanding requests per worker:
24601 24544 24651 54604 51178 52299 52488 51070 
count  171071
count  171071
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37434.4,      187172,     168502,      18670,     123126,      45376, 3060.871184, 4740.600000, 6000.000000, 7000.000000, 1198.840903, 1389.304996, 9809.537888, 553.265659
Outstanding requests per worker:
47457 47436 47717 77433 51936 52299 52488 51070 
count  101539
count  101539
count  101539
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42072.8,      210364,     189269,      21095,     142187,      47082, 6726.321844, 14000.000000, 14000.000000, 15000.000000, 3636.571810, 1457.720995, 16003.711700, 575.438587
Outstanding requests per worker:
78624 78434 78574 106281 114588 53454 52488 51070 
count  4527
count  4527
count  4527
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36254.2,      181271,     163205,      18066,     125508,      37697, 7426.109687, 10000.000000, 11000.000000, 17000.000000, 1979.381262, 4141.585827, 21121.234894, 595.045470
Outstanding requests per worker:
112136 112031 112001 141206 166967 53534 52488 51070 
count  3267
count  3267
count  3267
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37875.8,      189379,     170662,      18717,     132817,      37845, 12918.762054, 23000.000000, 23000.000000, 25000.000000, 5534.827334, 2151.228905, 25222.185135, 604.880120
Outstanding requests per worker:
139940 143909 144430 171870 166010 90119 54228 51070 
count  3914
count  3914
count  3914
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36035.4,      180177,     162078,      18099,     127633,      34445, 12750.517645, 16000.000000, 17000.000000, 27000.000000, 3455.049592, 4107.143879, 28036.510468, 614.874406
Outstanding requests per worker:
167966 182253 181957 194429 175625 151698 54228 51070 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:01   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   12:01   0:00 /usr/lib/linux
memcache      9 73.1  0.0 140736 77376 pts/0    Sl+  12:01   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5027495786      instructions:u                                              

      47.917807461 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1917972992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808133.806558,       0.0,      159570,     143528,      16042,      90505,      53023, 281.698268, 554.100000, 676.800000, 2000.000000, 350.104734,   0.000000, 3188.819885, 442.603060
Outstanding requests per worker:
8300 8229 8644 33779 46261 31323 31204 28986 
count  187509
count  187509
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39797.4,      198987,     179215,      19772,     125695,      53520, 1719.334693, 4016.000000, 6000.000000, 6000.000000, 1314.006669, 235.884994, 6723.954201, 519.313913
Outstanding requests per worker:
28930 29052 29355 62501 53263 51904 51217 54211 
count  165473
count  165473
count  165473
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36956.6,      184783,     166403,      18380,     122022,      44381, 3384.708236, 6000.000000, 7000.000000, 8000.000000, 1364.513081, 1405.285001, 12590.051651, 555.882791
Outstanding requests per worker:
55630 55674 55891 89052 53365 51904 51217 54211 
count  76651
count  76651
count  76651
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41951.0,      209755,     188517,      21238,     141435,      47082, 7232.845116, 14000.000000, 15000.000000, 16000.000000, 3737.549206, 1669.023991, 16332.214355, 574.967138
Outstanding requests per worker:
88871 89179 89341 121551 89403 51904 51217 54211 
count  8145
count  8145
count  8145
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33414.6,      167073,     150521,      16552,     115607,      34914, 7847.148462, 11000.000000, 12000.000000, 17000.000000, 2188.131500, 3093.211889, 18450.357437, 593.459159
Outstanding requests per worker:
123852 121105 124712 157186 161899 52175 51217 54211 
count  2
count  2
count  2
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39892.6,      199463,     179607,      19856,     139513,      40094, 13017.184272, 23000.000000, 24000.000000, 24000.000000, 5149.568207, 3194.704056, 25315.193176, 603.577400
Outstanding requests per worker:
159943 152052 160418 192984 177679 86247 51217 54211 
count  3800
count  3800
count  3800
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31382.6,      156913,     141309,      15604,     111243,      30066, 13634.513118, 17000.000000, 25000.000000, 28000.000000, 4395.076319, 4151.861191, 28833.629608, 614.719494
Outstanding requests per worker:
211935 195710 210049 231688 177394 160149 51217 54211 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:02   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   12:02   0:00 /usr/lib/linux
memcache     11 71.6  0.0 139712 76864 pts/0    Sl+  12:02   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4973167837      instructions:u                                              

      48.294313848 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2046095872
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808184.806609,       0.0,       37910,      34084,       3826,      19552,      14532,   0.714759,   0.129000,   0.171100,   2.600000,   7.542016,   0.000000, 203.007996, 381.091920
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.6,       60068,      53886,       6182,      34117,      19769,   0.107577,   0.138100,   0.167100,   0.432100,   0.060135,   0.067000,   1.405000, 444.519950
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      54027,       6035,      35858,      18169,   0.108625,   0.127100,   0.193100,   0.478100,   0.068571,   0.067000,   0.788000, 477.907454
Outstanding requests per worker:
1 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54033,       6030,      37052,      16981,   0.108908,   0.126100,   0.194000,   0.482100,   0.069673,   0.067000,   0.858000, 503.279366
Outstanding requests per worker:
1 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      54052,       6014,      37737,      16315,   0.108377,   0.126100,   0.189100,   0.478100,   0.067931,   0.066000,   0.819000, 516.020887
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.4,       60067,      54048,       6019,      38361,      15687,   0.109071,   0.127100,   0.196000,   0.480100,   0.069837,   0.067000,   0.998000, 528.543406
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53995,       6069,      39078,      14917,   0.108392,   0.127100,   0.191100,   0.476100,   0.067365,   0.067000,   0.728000, 543.573646
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:03   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   12:03   0:00 /usr/lib/linux
memcache     11 32.7  0.0 107968 29888 pts/0    Sl+  12:03   0:15 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        1517458952      instructions:u                                              

      47.790089239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2631725568
starting receive base loop
num_worker_connections 64
Creating worker on tid 2039673344
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808236.806661,       0.0,      161112,     145156,      15956,      91237,      53919, 324.937470, 647.300000, 799.200000, 1996.800000, 364.092296,   0.000000, 3085.306883, 440.897379
Outstanding requests per worker:
10697 10641 10940 38808 49253 32836 32708 31253 
count  185797
count  185797
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40789.8,      203949,     183535,      20414,     127949,      55586, 1963.852171, 4805.000000, 6000.000000, 7000.000000, 1459.896146, 305.592000, 8016.979218, 516.415975
Outstanding requests per worker:
35333 34924 35268 74185 54392 51189 51986 48831 
count  167178
count  167178
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37121.2,      185606,     167106,      18500,     122438,      44668, 3624.028083, 4989.900000, 6000.000000, 9000.000000, 1316.693406, 1331.562042, 12627.248764, 555.316960
Outstanding requests per worker:
67422 66889 67397 106313 54579 51189 51986 48831 
count  43461
count  43461
count  43461
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40708.2,      203541,     183188,      20353,     137700,      45488, 7689.732688, 14000.000000, 15000.000000, 16000.000000, 3520.210596, 2098.637104, 16743.927002, 575.253314
Outstanding requests per worker:
105832 105775 105854 128798 82778 51189 51986 48831 
count  10226
count  10226
count  10226
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33755.6,      168778,     152228,      16550,     116756,      35472, 8959.995760, 13000.000000, 16000.000000, 20000.000000, 2903.436180, 3483.028889, 19376.571655, 590.344956
Outstanding requests per worker:
139241 146521 140111 133924 141973 52105 51986 48831 
count  1000
count  1000
count  1000
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38774.2,      193871,     174613,      19258,     135602,      39011, 13629.387226, 24000.000000, 24000.000000, 25000.000000, 5250.692337, 1669.244051, 26027.906418, 603.168103
Outstanding requests per worker:
180342 176474 182119 189132 146413 82552 51986 48831 
count  5862
count  5862
count  5862
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35918.2,      179591,     161551,      18040,     126803,      34748, 14184.417851, 18000.000000, 21000.000000, 28000.000000, 4105.560361, 3421.752930, 29082.027435, 612.813576
Outstanding requests per worker:
227464 246183 244645 219640 148564 143255 51986 48831 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache      9 73.0  0.0 138688 74688 pts/0    Sl+  12:04   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4967579764      instructions:u                                              

      47.901266412 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2318856704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1722872320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
Created 512 connections total
Creating worker on tid 2444947968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808288.806713,       0.0,      167050,     150533,      16517,      94857,      55676, 347.046240, 707.900000, 879.300000, 2139.800000, 391.551467,   0.000000, 3220.665932, 441.531717
Outstanding requests per worker:
12098 12259 12918 46290 50160 35925 35793 32789 
count  177553
count  177553
count  177553
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41260.6,      206303,     185670,      20633,     130079,      55591, 2208.677848, 6000.000000, 7000.000000, 7000.000000, 1716.293826, 376.226008, 7393.803120, 519.718145
Outstanding requests per worker:
37835 37820 38719 61275 54241 53140 52474 52657 
count  162221
count  162221
count  162221
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36644.8,      183224,     164927,      18297,     120962,      43965, 3828.767822, 6000.000000, 8000.000000, 9000.000000, 1442.826859, 939.634025, 12677.101135, 554.947989
Outstanding requests per worker:
74362 74189 75261 125784 54357 53140 52474 52657 
count  28655
count  28655
count  28655
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40401.4,      202007,     181826,      20181,     136617,      45209, 7759.352729, 15000.000000, 15000.000000, 16000.000000, 3607.284094, 1991.142988, 17203.092575, 574.561394
Outstanding requests per worker:
116057 115828 116494 166317 83667 53140 52474 52657 
count  8657
count  8657
count  8657
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34970.4,      174852,     157486,      17366,     120967,      36519, 9098.929795, 12000.000000, 14000.000000, 18000.000000, 2551.335942, 2900.816917, 19783.533096, 592.943208
Outstanding requests per worker:
153631 157284 153857 198629 167216 53140 52474 52657 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36828.4,      184142,     165796,      18346,     129144,      36652, 14500.837413, 25000.000000, 25000.000000, 26000.000000, 5351.821965, 7971.564770, 26628.574371, 606.225042
Outstanding requests per worker:
212524 198923 194476 206891 168781 65360 52474 52657 
count  3687
count  3687
count  3687
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33707.6,      168538,     151568,      16970,     119358,      32210, 15451.322557, 20000.000000, 26000.000000, 28000.000000, 4334.184720, 3760.345936, 31910.043716, 615.454397
Outstanding requests per worker:
267552 253277 268076 244403 167999 133936 52739 52657 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache     10 71.7  0.0 138688 75200 pts/0    Sl+  12:04   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4962064590      instructions:u                                              

      48.278204898 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2582966784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
Created 512 connections total
Creating worker on tid 2713383424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808339.806764,       0.0,      165911,     149267,      16644,      94425,      54842, 343.575059, 710.500000, 851.900000, 1975.300000, 374.478972,   0.000000, 3029.135942, 444.735983
Outstanding requests per worker:
12962 12707 13748 46876 52585 35615 35476 33901 
count  174778
count  174778
count  174778
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41319.8,      206599,     186149,      20450,     130087,      56062, 2263.459293, 7000.000000, 7000.000000, 7000.000000, 1763.509365, 498.661995, 7564.240932, 519.066758
Outstanding requests per worker:
40287 40148 41337 53201 52585 52879 53145 51791 
count  160792
count  160792
count  160792
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35767.6,      178838,     160977,      17861,     118039,      42938, 3811.441978, 6000.000000, 8000.000000, 10000.000000, 1461.114778, 687.825978, 13089.843750, 556.243675
Outstanding requests per worker:
79035 78939 80141 102703 53590 52879 53145 51791 
count  25509
count  25509
count  25509
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42110.0,      210550,     189522,      21028,     142653,      46869, 7711.756527, 15000.000000, 15000.000000, 16000.000000, 3621.275759, 1162.749052, 16588.594437, 577.206551
Outstanding requests per worker:
123253 123067 124480 142993 92670 52879 53145 51791 
count  12795
count  12795
count  12795
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33671.0,      168355,     151527,      16828,     116615,      34912, 8998.911202, 12000.000000, 13000.000000, 19000.000000, 2655.560355, 2288.186073, 19788.980484, 594.886924
Outstanding requests per worker:
159961 170152 151319 168811 165461 52879 53145 51791 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40228.0,      201140,     180894,      20246,     140700,      40194, 14173.045854, 25000.000000, 25000.000000, 26000.000000, 5240.342243, 6975.214005, 26440.788269, 604.722965
Outstanding requests per worker:
188482 219215 194063 198445 178319 77368 53145 51791 
count  5413
count  5413
count  5413
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29955.4,      149777,     134661,      15116,     105974,      28687, 15477.166255, 20000.000000, 26000.000000, 28000.000000, 4424.417385, 3328.810930, 29075.185776, 615.482203
Outstanding requests per worker:
268856 282897 279652 232149 178368 132304 53145 51791 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:05   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   12:05   0:00 /usr/lib/linux
memcache     11 71.6  0.0 138688 75584 pts/0    Sl+  12:05   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4958354669      instructions:u                                              

      47.647536292 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2001072640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
num_worker_connections 64
Creating worker on tid 2721444352
starting receive base loop
Created 512 connections total
Creating worker on tid 2125525504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808391.806816,       0.0,      168495,     151776,      16719,      95821,      55955, 321.018885, 652.200000, 882.600000, 2109.600000, 385.836817,   0.000000, 3028.670073, 444.774002
Outstanding requests per worker:
12014 11823 17412 52741 47457 37568 37426 35089 
count  183805
count  183805
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38964.6,      194823,     175318,      19505,     123275,      52043, 1845.462232, 2498.700000, 7000.000000, 8000.000000, 1466.253047, 396.914989, 8104.955673, 521.406969
Outstanding requests per worker:
38531 38117 43993 53139 47457 52656 51945 54480 
count  160999
count  160999
count  160999
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41751.2,      208756,     188019,      20737,     137751,      50268, 4301.469233, 8000.000000, 9000.000000, 12000.000000, 2054.175820, 1045.318961, 11861.042023, 554.442338
Outstanding requests per worker:
79685 79360 85184 100880 50506 52656 51945 54480 
count  32581
count  32581
count  32581
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39935.4,      199677,     179645,      20032,     135424,      44221, 7567.431587, 16000.000000, 16000.000000, 17000.000000, 3810.135927, 1047.912002, 17427.085876, 577.630154
Outstanding requests per worker:
120649 120855 124971 146738 76986 52656 51945 54480 
count  11219
count  11219
count  11219
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35629.8,      178149,     160457,      17692,     123449,      37008, 8834.199243, 11000.000000, 13000.000000, 19000.000000, 2681.846569, 1805.351973, 20402.362823, 593.818531
Outstanding requests per worker:
156665 164377 159011 148518 132033 52656 51945 54480 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38365.0,      191825,     172737,      19088,     134579,      38158, 13863.442730, 26000.000000, 26000.000000, 26000.000000, 5306.538596, 6004.834175, 26655.767441, 606.296404
Outstanding requests per worker:
207882 229570 215476 182219 156733 58732 51945 54480 
count  8100
count  8100
count  8100
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32878.6,      164393,     147730,      16663,     116441,      31289, 15509.180134, 25000.000000, 27000.000000, 30000.000000, 5125.865010, 2217.644930, 31786.493301, 614.876863
Outstanding requests per worker:
280330 293406 282908 212302 155369 120206 52202 54480 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:06   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   12:06   0:00 /usr/lib/linux
memcache      9 71.6  0.0 140736 74496 pts/0    Sl+  12:06   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5036163007      instructions:u                                              

      48.032307908 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1728705024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
num_worker_connections 64
Creating worker on tid 2453008896
starting receive base loop
Created 512 connections total
Creating worker on tid 1857090048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808443.806868,       0.0,      168597,     151830,      16767,      95250,      56580, 250.726363, 490.700000, 983.700000, 2157.800000, 387.340707,   0.000000, 3185.868025, 440.142969
Outstanding requests per worker:
8418 8310 30178 51656 52041 39481 39333 36364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38842.6,      194213,     175019,      19194,     122317,      52702, 1569.904311, 3138.000000, 3737.000000, 4512.800000, 1004.167133, 130.794004, 7533.895016, 519.033939
Outstanding requests per worker:
35302 35132 58817 51810 52041 52757 52970 52656 
count  148431
count  148431
count  148431
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41662.2,      208311,     187468,      20843,     137315,      50153, 4629.925182, 10000.000000, 10000.000000, 11000.000000, 2729.900022, 1622.473001, 11164.457321, 555.767608
Outstanding requests per worker:
74186 74212 97739 90184 52041 52757 52970 52656 
count  55747
count  55747
count  55747
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33591.4,      167957,     151171,      16786,     113838,      37333, 6116.892581, 8000.000000, 12000.000000, 18000.000000, 2725.000772, 3323.210001, 18159.135818, 577.645527
Outstanding requests per worker:
116760 116271 135115 144865 52329 52757 52970 52656 
count  14072
count  14072
count  14072
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40537.6,      202688,     182340,      20348,     139950,      42390, 10227.190192, 18000.000000, 18000.000000, 21000.000000, 4294.714476, 1272.755027, 21026.502609, 592.450877
Outstanding requests per worker:
152010 156888 177272 150595 102759 52757 52970 52656 
count  1112
count  1112
count  1112
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34850.0,      174250,     157145,      17105,     122717,      34428, 11640.111369, 14000.000000, 16000.000000, 27000.000000, 3382.813738, 4549.936771, 26141.462326, 607.044258
Outstanding requests per worker:
182647 199491 214652 199442 148073 53094 52970 52656 
count  2654
count  2654
count  2654
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38753.6,      193768,     174466,      19302,     137237,      37229, 16898.266268, 28000.000000, 28000.000000, 31000.000000, 6309.485909, 2304.981947, 31083.875656, 614.397951
Outstanding requests per worker:
240306 272786 228476 217834 147966 87027 52970 52656 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:07   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   12:07   0:00 /usr/lib/linux
memcache      9 71.6  0.0 138688 74880 pts/0    Sl+  12:07   0:34 memcached -t 1
memcache     17  1.0  0.0   6656  4416 pts/1    Rs+  12:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5028738434      instructions:u                                              

      48.054630130 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1730146816
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
num_worker_connections 64
Creating worker on tid 2453008896
starting receive base loop
Created 512 connections total
Creating worker on tid 1857090048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808495.806920,       0.0,      163476,     147098,      16378,      92173,      54925, 257.625843, 562.300000, 881.900000, 1965.900000, 362.281109,   0.000000, 3226.797104, 439.579049
Outstanding requests per worker:
9009 9655 33875 52847 53399 40025 39872 37738 
count  194749
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39716.6,      198583,     179069,      19514,     125077,      53992, 1723.511300, 3466.800000, 4093.400000, 8000.000000, 1239.134529,  81.678003, 8064.042091, 517.021037
Outstanding requests per worker:
38317 38900 69843 53516 53399 50308 53836 53922 
count  144872
count  144872
count  144872
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40926.8,      204634,     183929,      20705,     134596,      49333, 4809.910849, 10000.000000, 11000.000000, 11000.000000, 2763.987111, 1565.528035, 11329.396248, 554.520652
Outstanding requests per worker:
79723 80400 111389 78622 53399 50308 53836 53922 
count  48078
count  48078
count  48078
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35620.4,      178102,     160373,      17729,     120913,      39460, 6109.678901, 9000.000000, 11000.000000, 13000.000000, 1843.924447, 2200.826883, 13277.746201, 577.725640
Outstanding requests per worker:
127465 130003 151261 155572 53399 50308 53836 53922 
count  3825
count  3825
count  3825
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37580.6,      187903,     169236,      18667,     129361,      39875, 11582.673392, 19000.000000, 20000.000000, 21000.000000, 4636.327876, 3682.559013, 21489.213943, 589.621659
Outstanding requests per worker:
160726 175681 198063 155161 102813 52956 53836 53922 
count  1496
count  1496
count  1496
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33415.0,      167075,     150349,      16726,     116996,      33353, 11651.034506, 15000.000000, 16000.000000, 24000.000000, 3194.120816, 4500.474930, 24665.037155, 604.612003
Outstanding requests per worker:
218826 227138 234153 173457 156470 53226 53836 53922 
count  716
count  716
count  716
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36672.4,      183362,     164901,      18461,     129537,      35364, 17613.669700, 29000.000000, 29000.000000, 30000.000000, 6211.330708, 2471.005917, 31192.955017, 612.245171
Outstanding requests per worker:
305296 282359 234774 193337 167368 86910 54337 53922 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:08   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   12:08   0:00 /usr/lib/linux
memcache      9 71.5  0.0 138688 74944 pts/0    Sl+  12:08   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4973665400      instructions:u                                              

      48.310585619 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1977872896
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2694640128
starting receive base loop
Created 512 connections total
Creating worker on tid 2098721280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808547.806972,       0.0,      169320,     152274,      17046,      96286,      55988, 268.145629, 608.500000, 848.100000, 1758.400000, 332.360673,   0.000000, 2633.452892, 444.877313
Outstanding requests per worker:
10871 11860 33757 51838 50908 41791 41632 39218 
count  199069
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40502.8,      202514,     182315,      20199,     127931,      54384, 1806.331835, 3472.300000, 3960.700000, 7000.000000, 1152.829280, 109.862000, 7925.065994, 521.636283
Outstanding requests per worker:
43698 44787 74803 52760 50908 52013 50463 53061 
count  149341
count  149341
count  149341
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42828.0,      214140,     192569,      21571,     141584,      50985, 4908.158937, 10000.000000, 10000.000000, 12000.000000, 2615.501710, 1043.723941, 11843.263626, 558.318597
Outstanding requests per worker:
89535 90702 120907 99660 52215 52013 50463 53061 
count  29253
count  29253
count  29253
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35199.4,      175997,     158424,      17573,     119865,      38559, 6602.233601, 9000.000000, 10000.000000, 15000.000000, 2039.714818, 2381.794930, 18053.941727, 580.139676
Outstanding requests per worker:
142940 134972 155742 167543 52674 52013 50463 53061 
count  9413
count  9413
count  9413
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40848.8,      204244,     183698,      20546,     140840,      42858, 11275.963938, 19000.000000, 19000.000000, 21000.000000, 4389.847236, 1182.883978, 21495.153427, 592.151624
Outstanding requests per worker:
185495 167518 186953 169538 89916 52717 50463 53061 
count  5484
count  5484
count  5484
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30110.4,      150552,     135646,      14906,     105553,      30093, 11563.118228, 15000.000000, 15000.000000, 22000.000000, 3074.138241, 3490.690947, 23506.753922, 605.034398
Outstanding requests per worker:
247846 238634 210256 182309 171090 52852 50463 53061 
count  277
count  277
count  277
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42533.6,      212668,     191380,      21288,     150373,      41007, 17942.096643, 28000.000000, 29000.000000, 30000.000000, 5741.273648, 2498.955965, 31067.174911, 613.479287
Outstanding requests per worker:
306946 296540 220606 197783 183844 87237 52069 53061 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:09   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   12:09   0:00 /usr/lib/linux
memcache     10 73.3  0.0 139712 76800 pts/0    Sl+  12:09   0:34 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  12:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5052823572      instructions:u                                              

      47.814300335 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2514809344
starting receive base loop
num_worker_connections 64
Creating worker on tid 1916137984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
Created 512 connections total
Creating worker on tid 2635592192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808598.807023,       0.0,      162721,     146332,      16389,      92279,      54053, 296.371382, 739.300000, 1031.000000, 1754.900000, 359.952676,   0.000000, 2620.634079, 442.475146
Outstanding requests per worker:
10746 13337 38381 51426 51455 43227 43063 40001 
count  195452
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39913.0,      199565,     179672,      19893,     126044,      53628, 1861.358151, 3822.100000, 4300.100000, 6000.000000, 1187.779269, 186.441004, 6080.330849, 520.659045
Outstanding requests per worker:
44836 47548 83617 52249 51455 52925 52271 51946 
count  137524
count  137524
count  137524
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40535.8,      202679,     182343,      20336,     133660,      48683, 5119.556146, 11000.000000, 11000.000000, 11000.000000, 2746.647768, 1224.233031, 12174.569130, 554.381956
Outstanding requests per worker:
92412 94890 126666 78732 51799 52925 52271 51946 
count  31866
count  31866
count  31866
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34922.0,      174610,     157270,      17340,     118463,      38807, 6695.227730, 10000.000000, 11000.000000, 14000.000000, 2173.037814, 2430.799961, 17869.403839, 577.380079
Outstanding requests per worker:
136658 140742 153349 151054 52151 52925 52271 51946 
count  7300
count  7300
count  7300
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38895.0,      194475,     174979,      19496,     134081,      40898, 11491.362824, 19000.000000, 20000.000000, 21000.000000, 4475.128875, 2136.095047, 21773.025513, 591.280171
Outstanding requests per worker:
171255 182139 207053 165261 95526 52925 52271 51946 
count  6455
count  6455
count  6455
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32837.6,      164188,     147882,      16306,     114818,      33064, 12463.536156, 16000.000000, 17000.000000, 23000.000000, 3320.307395, 3289.539099, 25194.913864, 603.613388
Outstanding requests per worker:
228149 260205 215381 192657 145579 53098 52271 51946 
count  99
count  99
count  99
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37406.8,      187034,     168386,      18648,     132391,      35995, 17698.571125, 29000.000000, 30000.000000, 30000.000000, 6429.089840, 2541.079998, 31253.559113, 612.497494
Outstanding requests per worker:
281998 317813 215643 205269 173669 85024 52271 51946 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:10   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   12:10   0:00 /usr/lib/linux
memcache     11 71.4  0.0 139712 75648 pts/0    Sl+  12:10   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4940910403      instructions:u                                              

      47.940569356 seconds time elapsed

