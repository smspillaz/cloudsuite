+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
caching_network
+ docker network create caching_network
7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2639262208
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790118.788543,       0.0,       75683,      68073,       7610,      40794,      27279,   0.799879,   0.239100,   0.388000,  15.300000,   7.218545,   0.000000, 182.301000, 407.926314
Outstanding requests per worker:
0 1 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112512,      12496,      74559,      37953,   0.148597,   0.230100,   0.371100,   0.482100,   0.083784,   0.068000,   1.022000, 477.882519
Outstanding requests per worker:
0 1 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112456,      12551,      78852,      33604,   0.148227,   0.227100,   0.370100,   0.476100,   0.082627,   0.067000,   0.906000, 519.102565
Outstanding requests per worker:
0 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112450,      12557,      81498,      30952,   0.149279,   0.234100,   0.371100,   0.485100,   0.084375,   0.068000,   0.943000, 545.713144
Outstanding requests per worker:
1 0 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112615,      12393,      83547,      29068,   0.149602,   0.234100,   0.372100,   0.484100,   0.085130,   0.068000,   1.096000, 564.596501
Outstanding requests per worker:
1 0 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.2,      125006,     112567,      12439,      84413,      28154,   0.149624,   0.235100,   0.371100,   0.487100,   0.085208,   0.067000,   1.158000, 573.896790
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112481,      12526,      85596,      26885,   0.149334,   0.234100,   0.371100,   0.481100,   0.083303,   0.069000,   0.714000, 586.549488
Outstanding requests per worker:
0 0 1 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:02   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   07:02   0:00 /usr/lib/linux
memcache      8 60.3  0.0 123328 47360 pts/0    Sl+  07:02   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  07:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3055843540      instructions:u                                              

      47.630631231 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2438525440
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790169.788594,       0.0,       91992,      82772,       9220,      50189,      32583,   1.363023,   0.587100,   3.000000,  29.700000,  10.281691,   0.000000, 219.058007, 416.392609
Outstanding requests per worker:
1 2 1 2 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135380,      15008,      91724,      43656,   0.179806,   0.374100,   0.478100,   0.612100,   0.124738,   0.067000,   1.105000, 493.240183
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135430,      14960,      96478,      38952,   0.179651,   0.373100,   0.476100,   0.599100,   0.122179,   0.067000,   0.899000, 532.395267
Outstanding requests per worker:
0 0 1 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135282,      15106,      98969,      36313,   0.183749,   0.390100,   0.491100,   0.625100,   0.130429,   0.066000,   1.384000, 554.005463
Outstanding requests per worker:
1 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135490,      14904,     101356,      34134,   0.181495,   0.377100,   0.478100,   0.607100,   0.123643,   0.068000,   0.863000, 572.141649
Outstanding requests per worker:
0 1 1 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135545,      14838,     103098,      32447,   0.182120,   0.379100,   0.480100,   0.605100,   0.124037,   0.067000,   1.195000, 584.961961
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135345,      15042,     104383,      30962,   0.183589,   0.388000,   0.486100,   0.608000,   0.125595,   0.066000,   1.120000, 597.796734
Outstanding requests per worker:
1 0 1 1 1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:02   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:02   0:00 /usr/lib/linux
memcache      9 68.3  0.0 129472 53056 pts/0    Sl+  07:02   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3646936002      instructions:u                                              

      47.800215410 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2270884352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1671885312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
Created 512 connections total
Creating worker on tid 2393960960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790220.788645,       0.0,      105004,      94503,      10501,      57837,      36666,  22.398694,  54.400000,  70.800000, 101.100000,  34.763785,   0.000000, 878.880024, 422.534248
Outstanding requests per worker:
111 135 144 103 108 122 126 107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35150.0,      175750,     158448,      17302,     108269,      50179,  19.664265,  38.200000,  40.000000,  51.000000,  12.376709,   0.107000,  66.633999, 500.698589
Outstanding requests per worker:
70 81 100 82 61 97 89 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35078.2,      175391,     157912,      17479,     113766,      44146,  19.632125,  39.000000,  41.000000,  43.200000,  12.108101,   0.111000,  46.934001, 541.400508
Outstanding requests per worker:
92 92 94 104 71 90 87 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35096.0,      175480,     157916,      17564,     117482,      40434,  20.126490,  40.400000,  42.400000,  44.400000,  12.471524,   0.100000,  47.600999, 567.457395
Outstanding requests per worker:
102 78 89 85 90 79 87 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35082.6,      175413,     157855,      17558,     119286,      38569,  20.763046,  41.800000,  44.200000,  46.400000,  12.940740,   0.104000,  49.403001, 580.636901
Outstanding requests per worker:
91 90 99 86 97 100 81 100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35093.2,      175466,     158078,      17388,     121403,      36675,  21.053402,  42.600000,  45.000000,  47.400000,  13.155400,   0.122000,  51.033001, 594.306089
Outstanding requests per worker:
100 90 89 92 86 90 97 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35088.2,      175441,     157828,      17613,     122901,      34927,  21.261626,  43.000000,  45.600000,  47.700000,  13.290838,   0.102000,  51.212002, 605.313563
Outstanding requests per worker:
90 99 80 85 93 97 103 104 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:03   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:03   0:00 /usr/lib/linux
memcache      9 70.6  0.0 133568 57024 pts/0    Sl+  07:03   0:33 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4232550721      instructions:u                                              

      47.420406371 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2562519552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
Created 512 connections total
Creating worker on tid 2686579200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790271.788696,       0.0,      111152,      99894,      11258,      61549,      38345,  39.389200,  55.100000,  85.200000, 843.100000, 138.635190,   0.000000, 1972.767949, 425.961519
Outstanding requests per worker:
191 177 191 224 197 199 242 9448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38143.0,      190715,     171693,      19022,     117784,      53909, 232.467309, 221.300000, 1211.800000, 4089.800000, 701.722940,   0.217000, 6851.704121, 504.332291
Outstanding requests per worker:
716 649 652 717 570 563 603 15706 
count  185074
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38557.6,      192788,     173731,      19057,     125829,      47902, 623.496487, 577.100000, 3724.800000, 8000.000000, 1424.857411,   0.465000, 9469.652176, 545.626589
Outstanding requests per worker:
1836 1977 1888 1970 1739 1999 1704 14299 
count  186133
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38757.8,      193789,     174516,      19273,     130180,      44336, 795.329379, 835.500000, 3109.300000, 8000.000000, 1324.130431,   0.746000, 9398.156166, 570.032158
Outstanding requests per worker:
2849 2939 2894 2925 2696 2830 2703 13803 
count  187923
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38992.8,      194964,     175377,      19587,     133492,      41885, 917.772516, 1028.100000, 2674.400000, 8000.000000, 1205.352125,   1.443000, 8695.869446, 586.510141
Outstanding requests per worker:
3513 3605 3515 3590 3740 3558 3512 13662 
count  189537
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39098.4,      195492,     176055,      19437,     136649,      39406, 1030.298776, 1221.300000, 2587.000000, 8000.000000, 1130.393826,  58.136001, 8418.478012, 602.115072
Outstanding requests per worker:
4041 4261 4089 4145 4381 4226 4112 13969 
count  189877
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39139.6,      195698,     176205,      19493,     138320,      37885, 1147.555339, 1414.300000, 2570.600000, 8000.000000, 1097.076841, 116.288997, 8257.326126, 612.831180
Outstanding requests per worker:
4628 4920 4710 4822 5005 4882 4845 13740 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:04   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   07:04   0:00 /usr/lib/linux
memcache     10 71.2  0.0 138688 77888 pts/0    Sl+  07:04   0:33 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  07:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4801230979      instructions:u                                              

      47.831092252 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1800401408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790322.788747,       0.0,      117439,     105675,      11764,      65173,      40502,  39.506698,  73.400000,  96.900000, 559.900000, 114.382068,   0.000000, 1953.055978, 428.991710
Outstanding requests per worker:
319 315 318 291 286 291 6071 11299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38143.4,      190717,     171611,      19106,     118068,      53543, 285.661703, 346.100000, 1117.400000, 4448.700000, 734.164420,   0.416000, 6957.797050, 505.446603
Outstanding requests per worker:
1367 1354 1417 1447 1470 1442 6983 38997 
count  182268
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37296.4,      186482,     167690,      18792,     121070,      46620, 685.195566, 806.400000, 2607.200000, 7000.000000, 1095.258024,   0.771000, 9456.324577, 543.160236
Outstanding requests per worker:
3674 3565 3652 3513 3613 3776 8402 50196 
count  182497
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37205.6,      186028,     167162,      18866,     124681,      42481, 1168.630342, 1299.700000, 2305.900000, 15000.000000, 1819.781461,  70.235997, 16887.851715, 569.691491
Outstanding requests per worker:
5702 5633 5826 5718 5781 5852 10106 50353 
count  178723
count  178723
count  178723
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43367.8,      216839,     195153,      21686,     148172,      46981, 3677.597317, 15000.000000, 17000.000000, 19000.000000, 5236.247608, 228.986993, 19744.884491, 586.104472
Outstanding requests per worker:
8867 8677 9015 8789 9069 8816 13340 76600 
count  172896
count  172896
count  172896
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38866.2,      194331,     174951,      19380,     135849,      39102, 3020.063304, 6000.000000, 9000.000000, 19000.000000, 3399.103563, 443.147987, 20515.142441, 602.339272
Outstanding requests per worker:
12754 12592 12883 12649 13045 12901 17503 80529 
count  165707
count  165707
count  165707
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38715.2,      193576,     174168,      19408,     136712,      37456, 3718.822323, 9000.000000, 11000.000000, 14000.000000, 2863.115976, 599.847019, 20978.286743, 611.882246
Outstanding requests per worker:
16720 16638 16977 16634 17152 17121 21426 84631 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:05   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   07:05   0:00 /usr/lib/linux
memcache     11 71.7  0.0 138688 80128 pts/0    Sl+  07:05   0:33 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4815260107      instructions:u                                              

      47.360514267 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1617949184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790373.788798,       0.0,      131739,     118563,      13176,      73319,      45244,  48.907138,  63.800000, 122.200000, 898.100000, 157.162156,   0.000000, 2189.070940, 430.370014
Outstanding requests per worker:
317 310 273 282 306 1579 14145 12501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38704.4,      193522,     174115,      19407,     120681,      53434, 329.824174, 378.300000, 1903.800000, 4746.800000, 828.704832,   0.252000, 7182.898045, 509.664320
Outstanding requests per worker:
1689 1635 1713 1660 1689 1662 32410 43753 
count  176828
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36509.2,      182546,     164292,      18254,     119492,      44800, 739.958970, 756.400000, 1000.800000, 10000.000000, 1450.123397,   0.842000, 11727.890015, 549.210144
Outstanding requests per worker:
4159 4097 4032 3942 3888 4125 34904 51101 
count  180592
count  180592
count  180592
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41018.6,      205093,     184600,      20493,     138132,      46468, 2022.225100, 7000.000000, 10000.000000, 12000.000000, 2710.348401,  52.044000, 13038.457870, 572.026636
Outstanding requests per worker:
8044 7911 7952 7870 7532 8011 45053 51101 
count  170323
count  170323
count  170323
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38254.8,      191274,     172306,      18968,     132012,      40294, 2634.432035, 6000.000000, 9000.000000, 19000.000000, 3058.963358, 538.981974, 21376.985550, 591.029657
Outstanding requests per worker:
12346 12298 12438 12061 12149 12225 49388 52318 
count  162185
count  162185
count  162185
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40571.8,      202859,     182591,      20268,     141787,      40804, 5045.848871, 12000.000000, 25000.000000, 26000.000000, 6462.476730, 881.182015, 26457.746506, 602.947747
Outstanding requests per worker:
17237 17164 17451 16934 16755 17193 54256 53632 
count  146404
count  146404
count  146404
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39835.4,      199177,     179205,      19972,     140910,      38295, 6625.543534, 22000.000000, 23000.000000, 26000.000000, 6651.840393, 1261.409044, 28003.866196, 614.717167
Outstanding requests per worker:
24695 24521 24797 24283 24300 24531 61632 122041 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:06   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   07:06   0:00 /usr/lib/linux
memcache     11 69.4  0.0 138688 79744 pts/0    Sl+  07:06   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4910470902      instructions:u                                              

      48.321574929 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2476929536
starting receive base loop
num_worker_connections 64
Creating worker on tid 1881272832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1285353984
starting receive base loop
num_worker_connections 64
Creating worker on tid 689435136
starting receive base loop
num_worker_connections 64
Creating worker on tid 96137728
starting receive base loop
num_worker_connections 64
Creating worker on tid 3795186176
starting receive base loop
num_worker_connections 64
Creating worker on tid 3199267328
starting receive base loop
Created 512 connections total
Creating worker on tid 2603348480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790424.788849,       0.0,      130182,     117118,      13064,      72788,      44330,  55.174460,  71.000000, 140.700000, 952.900000, 159.839402,   0.000000, 2102.761984, 432.404583
Outstanding requests per worker:
325 392 331 392 364 8996 14712 13794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38546.8,      192734,     173524,      19210,     120174,      53350, 372.391981, 443.000000, 2060.000000, 4767.500000, 839.047922,   0.233000, 7051.240921, 509.576301
Outstanding requests per worker:
2339 2297 2353 2343 2313 13534 48993 48279 
count  182607
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37748.6,      188743,     170029,      18714,     123672,      46357, 930.248037, 1142.300000, 3985.400000, 8000.000000, 1356.543875,   3.539000, 10463.698387, 547.493175
Outstanding requests per worker:
5856 5852 5807 5880 5648 16421 53778 52090 
count  182025
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37551.2,      187756,     168966,      18790,     126680,      42286, 1380.380203, 1724.200000, 3764.100000, 7000.000000, 1238.373042, 308.930993, 16190.141678, 572.002125
Outstanding requests per worker:
8974 9356 8879 9215 9079 19686 53849 52090 
count  161287
count  161287
count  161287
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41725.4,      208627,     187737,      20890,     143048,      44689, 4673.592990, 16000.000000, 17000.000000, 18000.000000, 5555.006172, 495.694011, 21193.567276, 586.706020
Outstanding requests per worker:
15583 15990 15683 15637 15804 26284 87551 53227 
count  150290
count  150290
count  150290
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37800.8,      189004,     169930,      19074,     132228,      37702, 4505.959394, 8000.000000, 16000.000000, 20000.000000, 3987.049106, 1185.482025, 25048.015594, 603.596487
Outstanding requests per worker:
24077 24375 23957 23962 24066 34542 112637 54340 
count  139710
count  139710
count  139710
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37387.8,      186939,     168392,      18547,     132427,      35965, 5437.275552, 10000.000000, 12000.000000, 30000.000000, 3500.226301, 2261.006117, 31090.513229, 615.424456
Outstanding requests per worker:
32093 32452 31860 32128 32343 42607 120494 54366 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:07   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:07   0:00 /usr/lib/linux
memcache      9 70.6  0.0 139712 79040 pts/0    Sl+  07:07   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4920317693      instructions:u                                              

      47.874000531 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2323902976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790476.788901,       0.0,      133977,     120390,      13587,      74659,      45731,  89.245395,  86.400000, 366.800000, 1721.700000, 283.054172,   0.000000, 2702.908039, 431.719478
Outstanding requests per worker:
431 422 462 451 2577 15889 16114 15038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38767.8,      193839,     174375,      19464,     120398,      53977, 447.316051, 925.700000, 2241.900000, 4802.500000, 883.338550,   0.441000, 7080.216885, 509.579332
Outstanding requests per worker:
2770 2956 2872 2900 3478 36996 53711 52634 
count  177150
count  177150
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39298.2,      196491,     176967,      19524,     129329,      47638, 1434.774224, 4927.300000, 8000.000000, 11000.000000, 2266.654273,  36.685999, 10896.519661, 552.294473
Outstanding requests per worker:
6878 6851 6684 6735 7262 46655 54131 52882 
count  172563
count  172563
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37694.2,      188471,     169620,      18851,     127130,      42490, 2063.848704, 4194.700000, 9000.000000, 11000.000000, 2123.239175, 346.547991, 11825.282097, 573.100301
Outstanding requests per worker:
12709 13130 12924 12888 13340 53192 54131 52882 
count  162636
count  162636
count  162636
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37252.8,      186264,     167705,      18559,     128241,      39464, 2968.042525, 7000.000000, 9000.000000, 11000.000000, 2014.704344, 821.866989, 12286.311150, 590.959304
Outstanding requests per worker:
19575 19452 19397 19440 20051 59591 54131 52882 
count  136752
count  136752
count  136752
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41505.6,      207528,     186883,      20645,     144914,      41969, 7707.619035, 21000.000000, 22000.000000, 23000.000000, 7194.685544, 1488.306999, 24673.919678, 602.040640
Outstanding requests per worker:
30100 29858 29811 29763 30441 69914 88525 54084 
count  81679
count  81679
count  81679
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36589.8,      182949,     164479,      18470,     129388,      35091, 6790.762958, 12000.000000, 21000.000000, 25000.000000, 4542.147620, 2618.556023, 29827.154160, 614.838241
Outstanding requests per worker:
41920 41838 41685 41772 42500 81835 160834 54374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:08   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   07:08   0:00 /usr/lib/linux
memcache     10 70.9  0.0 138688 76416 pts/0    Sl+  07:08   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4873505710      instructions:u                                              

      47.810722641 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2164978176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1572532736
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790527.788952,       0.0,      138740,     124832,      13908,      78024,      46808,  89.870145,  96.600000, 271.800000, 1743.800000, 284.934334,   0.000000, 3153.029919, 436.243904
Outstanding requests per worker:
606 530 554 574 8778 17572 17508 16260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38890.0,      194450,     175045,      19405,     121274,      53771, 530.170613, 1015.200000, 3053.500000, 4359.300000, 914.555724,   0.690000, 6393.650055, 509.988083
Outstanding requests per worker:
3865 3804 4053 3840 9683 47867 53314 51627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36769.6,      183848,     165543,      18305,     120464,      45079, 929.270926, 1206.500000, 2346.500000, 4210.500000, 720.030342,  60.690001, 7770.528793, 548.846638
Outstanding requests per worker:
7834 8043 8194 8053 13613 48385 53314 51627 
count  172251
count  172251
count  172251
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43183.2,      215916,     194641,      21275,     145637,      49004, 3385.611673, 11000.000000, 12000.000000, 13000.000000, 3733.899083, 454.172999, 13975.685120, 571.609702
Outstanding requests per worker:
15698 16042 16078 15875 21579 80929 53314 51627 
count  157958
count  157958
count  157958
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37532.4,      187662,     168784,      18878,     129283,      39501, 3526.549112, 7000.000000, 8000.000000, 15000.000000, 2502.435437, 1278.267026, 20270.252228, 591.938880
Outstanding requests per worker:
25328 25617 25701 25279 31092 90501 53697 51627 
count  138074
count  138074
count  138074
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43425.4,      217127,     195553,      21574,     152038,      43515, 8153.872167, 23000.000000, 24000.000000, 25000.000000, 7227.003632, 1688.624024, 25793.523788, 603.751776
Outstanding requests per worker:
36685 36977 37165 36660 42637 101850 88405 51627 
count  39411
count  39411
count  39411
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36345.0,      181725,     163518,      18207,     128553,      34965, 7718.812598, 14000.000000, 23000.000000, 27000.000000, 5116.270702, 1987.174034, 27930.910110, 613.353845
Outstanding requests per worker:
51340 51593 51822 51476 57324 116530 145349 51627 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:08   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:08   0:00 /usr/lib/linux
memcache      9 72.6  0.0 139712 78272 pts/0    Sl+  07:08   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5026618966      instructions:u                                              

      47.684021783 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2145513984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1553789440
starting receive base loop
num_worker_connections 64
Creating worker on tid 957870592
starting receive base loop
num_worker_connections 64
Creating worker on tid 364573184
starting receive base loop
num_worker_connections 64
Creating worker on tid 4063621632
starting receive base loop
num_worker_connections 64
Creating worker on tid 3467702784
starting receive base loop
num_worker_connections 64
Creating worker on tid 2871783936
starting receive base loop
Created 512 connections total
Creating worker on tid 2275865088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790578.789003,       0.0,      137569,     123823,      13746,      76931,      46892,  91.926114, 108.900000, 287.400000, 1702.000000, 280.061941,   0.000000, 3045.134068, 433.009296
Outstanding requests per worker:
619 528 683 768 17421 18255 18184 17544 
count  192676
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39245.6,      196228,     176678,      19550,     122520,      54158, 638.813298, 1742.400000, 3516.200000, 6000.000000, 1104.689050,   0.593000, 6837.852001, 512.851781
Outstanding requests per worker:
4683 4787 4678 4599 24472 52603 53101 52731 
count  180543
count  180543
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38278.6,      191393,     172138,      19255,     125918,      46220, 1406.188197, 3195.000000, 6000.000000, 8000.000000, 1619.259388, 151.263997, 11837.012291, 552.312052
Outstanding requests per worker:
10732 10634 10653 10591 30260 53112 53101 52731 
count  168536
count  168536
count  168536
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43786.6,      218933,     197124,      21809,     147915,      49209, 4039.268115, 14000.000000, 15000.000000, 15000.000000, 4458.881119, 560.797989, 16570.213318, 573.772458
Outstanding requests per worker:
18925 18883 18650 18830 38431 74105 54241 52731 
count  149350
count  149350
count  149350
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37294.0,      186470,     167964,      18506,     128842,      39122, 4345.776861, 8000.000000, 15000.000000, 18000.000000, 3478.087524, 1194.661975, 21368.667603, 591.977995
Outstanding requests per worker:
32129 31961 31755 31832 51410 113006 55068 52731 
count  113677
count  113677
count  113677
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37041.8,      185209,     166705,      18504,     129844,      36861, 5554.759047, 9000.000000, 10000.000000, 13000.000000, 2419.199406, 2634.366989, 25990.503311, 605.386623
Outstanding requests per worker:
45198 45198 44856 44964 64577 133856 55089 52731 
count  8862
count  8862
count  8862
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41628.0,      208140,     187523,      20617,     147336,      40187, 11303.452238, 27000.000000, 27000.000000, 29000.000000, 7980.109772, 2804.687023, 29846.004486, 614.259094
Outstanding requests per worker:
61999 61973 61502 61853 81352 150653 86446 54047 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:09   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   07:09   0:00 /usr/lib/linux
memcache     10 72.5  0.0 139712 77376 pts/0    Sl+  07:09   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5004929399      instructions:u                                              

      47.700415147 seconds time elapsed

+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2342449664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1747055104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
Created 512 connections total
Creating worker on tid 2469130752
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790629.789054,       0.0,      142353,     128215,      14138,      80023,      48192, 108.503128, 179.800000, 275.700000, 1794.700000, 283.337806,   0.000000, 3103.635073, 435.070982
Outstanding requests per worker:
1343 1381 1266 1281 23944 20107 20030 18870 
count  185911
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37978.6,      189893,     171184,      18709,     118517,      52667, 700.178451, 917.400000, 3128.700000, 7000.000000, 1132.395345,   0.885000, 8059.969902, 509.464267
Outstanding requests per worker:
6418 6268 6254 6385 35163 53855 54292 53248 
count  181297
count  181297
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40212.6,      201063,     180872,      20191,     131410,      49462, 1928.198317, 4934.500000, 7000.000000, 9000.000000, 1896.488559, 185.883000, 11602.820396, 548.299991
Outstanding requests per worker:
15262 15132 15112 15233 49844 54130 54292 53248 
count  164813
count  164813
count  164813
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39034.0,      195170,     175779,      19391,     131893,      43886, 3430.173792, 7000.000000, 10000.000000, 17000.000000, 3259.547350, 997.407019, 16997.682571, 574.301242
Outstanding requests per worker:
25221 25112 25147 25278 59570 54538 54292 53248 
count  135587
count  135587
count  135587
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40474.2,      202371,     182356,      20015,     139218,      43138, 6488.969316, 16000.000000, 16000.000000, 18000.000000, 4828.180121, 1984.485030, 18823.827744, 588.222351
Outstanding requests per worker:
41195 41060 40905 40978 75683 106554 54292 53248 
count  43977
count  43977
count  43977
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35975.6,      179878,     161935,      17943,     126084,      35851, 6514.956514, 10000.000000, 12000.000000, 20000.000000, 2858.434976, 3532.125950, 26011.060715, 604.721073
Outstanding requests per worker:
58482 57946 58046 58108 92884 167067 54595 53248 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39413.6,      197068,     177455,      19613,     139856,      37599, 11851.802718, 28000.000000, 29000.000000, 30000.000000, 7994.572103, 5085.647106, 31105.606079, 616.302133
Outstanding requests per worker:
77424 76911 77092 76948 111975 170924 74200 53248 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:10   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:10   0:00 /usr/lib/linux
memcache      9 71.2  0.0 139712 77568 pts/0    Sl+  07:10   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4977552973      instructions:u                                              

      47.954329698 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2325213696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790681.789106,       0.0,      146163,     131472,      14691,      82692,      48780, 132.240495, 228.400000, 319.700000, 1747.900000, 287.009725,   0.000000, 3109.373093, 440.137527
Outstanding requests per worker:
2099 2217 2109 2745 29026 21713 21633 20002 
count  181509
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36812.6,      184063,     165709,      18354,     115552,      50157, 717.896129, 955.600000, 1649.100000, 7000.000000, 918.836872,   1.476000, 7577.024937, 515.282996
Outstanding requests per worker:
8768 8943 8711 9104 41170 51285 53577 52231 
count  177187
count  177187
count  177187
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41917.6,      209588,     188814,      20774,     137677,      51137, 2353.692414, 7000.000000, 9000.000000, 10000.000000, 2271.800330, 416.761011, 10171.773911, 551.164617
Outstanding requests per worker:
19376 19505 19283 19549 66883 51285 53577 52231 
count  157789
count  157789
count  157789
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37373.4,      186867,     168106,      18761,     126198,      41908, 3453.392867, 7000.000000, 8000.000000, 17000.000000, 2217.514245, 1178.081036, 16535.928726, 574.938592
Outstanding requests per worker:
32424 32691 32477 32562 80125 51623 53577 52231 
count  125422
count  125422
count  125422
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41706.2,      208531,     187592,      20939,     143555,      44037, 7307.133067, 17000.000000, 18000.000000, 19000.000000, 5127.112639, 1766.245961, 19776.609421, 591.191032
Outstanding requests per worker:
50416 50060 50160 50330 97825 89306 53577 52231 
count  14973
count  14973
count  14973
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35788.4,      178942,     161154,      17788,     125474,      35680, 7503.445569, 12000.000000, 15000.000000, 26000.000000, 3768.296684, 3416.882992, 25879.957199, 604.785348
Outstanding requests per worker:
70455 70450 70389 70571 118178 156036 54266 52231 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42001.8,      210009,     189210,      20799,     148915,      40295, 12454.184554, 29000.000000, 30000.000000, 31000.000000, 7610.821797, 6000.565052, 31439.380646, 615.603567
Outstanding requests per worker:
91750 91672 91671 91744 139438 175613 67129 52231 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:11   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:11   0:00 /usr/lib/linux
memcache      9 71.6  0.0 139712 77568 pts/0    Sl+  07:11   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5029721208      instructions:u                                              

      48.019287515 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1994584576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790733.789158,       0.0,      147898,     133085,      14813,      83307,      49778, 162.619570, 297.400000, 395.400000, 1812.600000, 285.961321,   0.000000, 3073.389053, 436.851185
Outstanding requests per worker:
3013 3092 3143 5031 32339 22782 22694 21278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37104.0,      185520,     166755,      18765,     116462,      50293, 759.116608, 1159.900000, 1549.900000, 3353.100000, 533.557461,  39.188001, 4947.756767, 515.650487
Outstanding requests per worker:
11193 11159 11442 13138 46939 54233 52838 52089 
count  172810
count  172810
count  172810
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42824.4,      214122,     192819,      21303,     140346,      52473, 2863.156717, 9000.000000, 10000.000000, 10000.000000, 2718.134061, 538.161993, 11066.610336, 550.763913
Outstanding requests per worker:
23389 23686 23633 25251 80844 55147 52838 52089 
count  161757
count  161757
count  161757
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36816.6,      184083,     165669,      18414,     124525,      41144, 3603.130330, 6000.000000, 7000.000000, 11000.000000, 1621.103734, 1540.820003, 12344.097137, 575.573378
Outstanding requests per worker:
39716 40051 40095 41677 99438 55147 52838 52089 
count  94080
count  94080
count  94080
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41605.2,      208026,     187177,      20849,     143243,      43934, 7896.406038, 18000.000000, 19000.000000, 19000.000000, 5206.109884, 2927.123070, 21373.870850, 589.117098
Outstanding requests per worker:
59794 59933 60019 61766 119049 87587 53665 52089 
count  4970
count  4970
count  4970
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35375.6,      176878,     158998,      17880,     123527,      35471, 8563.720734, 14000.000000, 19000.000000, 22000.000000, 3941.218629, 3495.834112, 25969.686508, 603.362935
Outstanding requests per worker:
83455 83558 83715 85531 143172 131052 54388 52089 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38066.2,      190331,     171236,      19095,     134695,      36541, 11758.938688, 18000.000000, 31000.000000, 32000.000000, 6171.289542, 6747.358799, 31965.070724, 614.207801
Outstanding requests per worker:
107303 107560 107430 108771 166948 158669 55595 52089 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:12   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   07:12   0:00 /usr/lib/linux
memcache      8 73.2  0.0 139712 74432 pts/0    Sl+  07:12   0:34 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  07:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5004200933      instructions:u                                              

      47.967964607 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1815081472
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
num_worker_connections 64
Creating worker on tid 2536239616
starting receive base loop
Created 512 connections total
Creating worker on tid 1940320768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790785.789210,       0.0,      150020,     135113,      14907,      84445,      50668, 164.698739, 292.400000, 396.600000, 1872.400000, 303.930295,   0.000000, 3087.959051, 437.348893
Outstanding requests per worker:
3232 3387 3190 12161 36160 24675 24583 22729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38219.4,      191097,     171879,      19218,     119601,      52278, 889.041357, 1531.000000, 2733.700000, 3826.500000, 741.502432,  42.098001, 5854.383945, 514.844472
Outstanding requests per worker:
12734 12868 12880 21526 54089 53508 52056 54866 
count  176461
count  176461
count  176461
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42447.8,      212239,     190968,      21271,     139795,      51173, 3204.967280, 11000.000000, 11000.000000, 12000.000000, 3272.455329, 561.511993, 12041.971207, 552.845309
Outstanding requests per worker:
25316 25457 25376 34407 72936 53508 52056 54866 
count  148622
count  148622
count  148622
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36420.2,      182101,     163939,      18162,     123312,      40627, 4253.300427, 9000.000000, 12000.000000, 13000.000000, 2537.232175, 1534.005046, 13743.824959, 575.462727
Outstanding requests per worker:
45744 46140 45832 54635 132715 53508 52056 54866 
count  69923
count  69923
count  69923
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42518.8,      212594,     191457,      21137,     146780,      44677, 8091.260480, 20000.000000, 20000.000000, 21000.000000, 5384.108138, 3398.428917, 21370.521545, 592.781648
Outstanding requests per worker:
67337 67860 67416 76844 154460 63886 52056 54866 
count  10339
count  10339
count  10339
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34409.2,      172046,     154984,      17062,     120521,      34463, 8806.461274, 13000.000000, 21000.000000, 23000.000000, 4166.568340, 1981.066942, 27153.560638, 604.927580
Outstanding requests per worker:
94318 94618 94194 103808 172095 136069 52399 54866 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35079.4,      175397,     157879,      17518,     124612,      33267, 10625.084718, 16000.000000, 17000.000000, 25000.000000, 3020.602123, 5635.628223, 31170.431137, 616.578677
Outstanding requests per worker:
121262 120803 119335 130914 173076 166685 52487 54866 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:13   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   07:13   0:00 /usr/lib/linux
memcache     10 71.7  0.0 139712 77184 pts/0    Sl+  07:13   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5034825215      instructions:u                                              

      47.939679909 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1914302976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790836.789261,       0.0,      154014,     138468,      15546,      86583,      51885, 177.945511, 325.700000, 470.300000, 1867.800000, 316.446630,   0.000000, 3215.039968, 437.534564
Outstanding requests per worker:
3953 3696 3985 17107 38358 26325 26229 23811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38792.8,      193964,     174440,      19524,     121842,      52598, 1015.417088, 1904.700000, 3234.000000, 4455.100000, 852.406081,  76.907001, 5264.173985, 516.839653
Outstanding requests per worker:
14659 14592 14801 28854 50300 53022 50946 54228 
count  174247
count  174247
count  174247
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42139.0,      210695,     189821,      20874,     138662,      51159, 3406.881286, 11000.000000, 12000.000000, 12000.000000, 3283.081205, 758.647025, 12580.091476, 552.095695
Outstanding requests per worker:
29367 29417 29766 43487 56536 53022 50946 54228 
count  153932
count  153932
count  153932
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37661.0,      188305,     169459,      18846,     127968,      41491, 4495.715832, 9000.000000, 12000.000000, 14000.000000, 2573.760470, 1220.687985, 14571.816444, 578.589417
Outstanding requests per worker:
52127 52119 52502 66191 125991 53817 50946 54228 
count  38978
count  38978
count  38978
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39858.0,      199290,     179606,      19684,     137442,      42164, 7609.491526, 21000.000000, 21000.000000, 22000.000000, 4733.124827, 3598.887920, 21967.973709, 590.391290
Outstanding requests per worker:
76063 76033 76430 90393 164812 56561 50946 54228 
count  4049
count  4049
count  4049
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33936.0,      169680,     152794,      16886,     118653,      34141, 10308.174774, 21000.000000, 22000.000000, 24000.000000, 5070.243466, 3843.384981, 27083.940506, 604.037907
Outstanding requests per worker:
105419 105444 105998 115837 172974 128538 52762 54228 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37023.2,      185116,     166496,      18620,     131070,      35426, 11179.539576, 15000.000000, 16000.000000, 25000.000000, 3047.483640, 5713.934898, 28496.549606, 615.015832
Outstanding requests per worker:
135901 135885 136219 145900 223771 177997 52802 54228 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:14   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   07:14   0:00 /usr/lib/linux
memcache     10 71.7  0.0 139712 76032 pts/0    Sl+  07:14   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  07:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5031371318      instructions:u                                              

      48.115903170 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1626141184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1033040384
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2946953728
starting receive base loop
num_worker_connections 64
Creating worker on tid 2351034880
starting receive base loop
Created 512 connections total
Creating worker on tid 1755116032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790888.789313,       0.0,      153315,     137806,      15509,      86182,      51624, 191.400254, 353.100000, 504.000000, 1897.900000, 321.017076,   0.000000, 3149.640083, 437.153615
Outstanding requests per worker:
4429 4519 4273 22622 39902 26641 26540 25001 
count  192109
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39059.2,      195296,     175772,      19524,     122811,      52961, 1202.323610, 2520.900000, 3965.800000, 6000.000000, 1073.688765, 144.099995, 6639.998913, 517.756622
Outstanding requests per worker:
17457 17163 17446 38993 52753 52939 54055 54225 
count  172314
count  172314
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38092.6,      190463,     171415,      19048,     125536,      45879, 2768.953324, 4886.000000, 7000.000000, 13000.000000, 1973.000864, 903.060973, 13170.389175, 554.850807
Outstanding requests per worker:
33732 33568 34137 55688 53174 52939 54055 54225 
count  142134
count  142134
count  142134
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41855.8,      209279,     188064,      21215,     141543,      46521, 5770.873375, 13000.000000, 13000.000000, 15000.000000, 3515.516756, 1258.082986, 15639.183044, 576.743890
Outstanding requests per worker:
59015 59012 59372 80784 113499 53412 54055 54225 
count  19231
count  19231
count  19231
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36774.4,      183872,     165481,      18391,     126915,      38566, 6771.783619, 9000.000000, 10000.000000, 22000.000000, 2662.421608, 3851.036072, 22102.521896, 592.991359
Outstanding requests per worker:
85541 85828 85948 107310 159494 53532 54055 54225 
count  3524
count  3524
count  3524
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39660.6,      198303,     178598,      19705,     139279,      39319, 11722.752180, 22000.000000, 23000.000000, 24000.000000, 5570.861336, 3487.188101, 25916.854858, 604.978029
Outstanding requests per worker:
117508 117953 117993 139332 174102 109317 54320 54225 
count  1901
count  1901
count  1901
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31322.8,      156614,     140960,      15654,     110939,      30021, 11771.476498, 16000.000000, 17000.000000, 26000.000000, 3461.817625, 4807.197094, 30584.394455, 614.315643
Outstanding requests per worker:
146445 151615 144142 172540 175267 161091 54334 54225 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:14   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   07:14   0:00 /usr/lib/linux
memcache     10 73.2  0.0 137664 72384 pts/0    Sl+  07:14   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4992407398      instructions:u                                              

      47.598745901 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2439901696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790939.789364,       0.0,      155924,     140257,      15667,      88370,      51887, 225.287205, 424.700000, 532.800000, 1922.900000, 325.535743,   0.000000, 3163.547039, 441.949265
Outstanding requests per worker:
5745 5806 5704 25663 42130 28306 28198 26317 
count  193975
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39649.6,      198248,     178749,      19499,     125035,      53714, 1350.670133, 2841.200000, 4172.000000, 6000.000000, 1090.639253, 180.397004, 7819.882870, 517.652328
Outstanding requests per worker:
20869 21210 21237 44597 51775 51808 50946 51911 
count  171891
count  171891
count  171891
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38199.0,      190995,     171987,      19008,     125776,      46211, 3038.869156, 6000.000000, 7000.000000, 13000.000000, 1968.315189, 1015.326977, 12760.278702, 553.678761
Outstanding requests per worker:
40705 40629 40641 64186 52622 51808 50946 51911 
count  124570
count  124570
count  124570
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41112.6,      205563,     185149,      20414,     138889,      46260, 6163.459502, 13000.000000, 13000.000000, 15000.000000, 3461.701485, 1921.241045, 15492.585182, 573.880237
Outstanding requests per worker:
68520 68461 68455 91583 103427 51808 50946 51911 
count  5349
count  5349
count  5349
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36851.0,      184255,     165795,      18460,     127334,      38461, 7080.604559, 9000.000000, 11000.000000, 20000.000000, 2272.312798, 4257.010937, 20918.781281, 593.721083
Outstanding requests per worker:
98519 98474 98452 121843 152139 52251 50946 51911 
count  8308
count  8308
count  8308
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40193.0,      200965,     181044,      19921,     140516,      40528, 11955.594586, 22000.000000, 23000.000000, 25000.000000, 5516.119638, 1481.482983, 24992.624283, 602.629659
Outstanding requests per worker:
133071 128751 134006 153050 178313 107060 53051 51911 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33487.2,      167436,     150579,      16857,     118521,      32058, 12303.882818, 16000.000000, 16000.000000, 27000.000000, 3438.630542, 5018.527031, 27445.451736, 613.694772
Outstanding requests per worker:
159260 159770 171333 190566 191658 161904 53873 51911 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:15   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:15   0:00 /usr/lib/linux
memcache      9 71.6  0.0 137664 73600 pts/0    Sl+  07:15   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5035546705      instructions:u                                              

      48.364204189 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1592586752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
num_worker_connections 64
Creating worker on tid 2318791168
starting receive base loop
Created 512 connections total
Creating worker on tid 1722872320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575790991.789416,       0.0,      158999,     143049,      15950,      90436,      52613, 238.376841, 466.700000, 592.600000, 1967.100000, 329.575275,   0.000000, 3055.691957, 443.915050
Outstanding requests per worker:
6861 6753 6672 30217 43644 29602 29490 27780 
count  190533
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39899.0,      199495,     179580,      19915,     125466,      54114, 1523.005947, 3570.700000, 4845.500000, 6000.000000, 1268.302866, 152.632996, 6580.135822, 517.985171
Outstanding requests per worker:
24402 24369 24393 55658 51766 52646 52756 50972 
count  168603
count  168603
count  168603
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37470.2,      187351,     168606,      18745,     123541,      45065, 3157.686416, 6000.000000, 7000.000000, 12000.000000, 1582.012319, 1328.493953, 12796.690941, 554.568218
Outstanding requests per worker:
47771 47708 47584 79124 52236 52646 52756 50972 
count  101386
count  101386
count  101386
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41906.4,      209532,     188632,      20900,     141464,      47168, 6634.944009, 14000.000000, 14000.000000, 15000.000000, 3586.881618, 1367.089033, 15902.627945, 573.740770
Outstanding requests per worker:
78577 78534 78408 109852 98484 52646 52756 50972 
count  8435
count  8435
count  8435
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35878.0,      179390,     161321,      18069,     123481,      37840, 7547.521506, 10000.000000, 12000.000000, 20000.000000, 2407.663148, 3657.635927, 19857.303619, 591.950428
Outstanding requests per worker:
112339 112231 112078 143534 141053 53184 52756 50972 
count  1186
count  1186
count  1186
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37355.8,      186779,     168140,      18639,     130831,      37309, 12603.590195, 23000.000000, 23000.000000, 24000.000000, 5441.181866, 1801.767945, 24981.010437, 603.781741
Outstanding requests per worker:
137346 141455 143794 180055 153400 76668 52756 50972 
count  6011
count  6011
count  6011
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35342.6,      176713,     159192,      17521,     125055,      34137, 12916.885564, 16000.000000, 25000.000000, 30000.000000, 4369.649690, 3719.715118, 29773.065567, 613.737977
Outstanding requests per worker:
165222 182021 171061 210071 152470 133224 53416 50972 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:16   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   07:16   0:00 /usr/lib/linux
memcache      8 71.8  0.0 140736 77696 pts/0    Sl+  07:16   0:34 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  07:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5034005081      instructions:u                                              

      48.028595992 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1674375680
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
num_worker_connections 64
Creating worker on tid 2393960960
starting receive base loop
Created 512 connections total
Creating worker on tid 1798042112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791043.789468,       0.0,      160461,     144503,      15958,      91102,      53401, 283.766758, 558.800000, 706.800000, 2018.500000, 351.906332,   0.000000, 3103.708982, 442.551269
Outstanding requests per worker:
8301 8309 8358 32729 46404 31180 31062 28987 
count  190647
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40057.0,      200285,     180299,      19986,     126800,      53499, 1680.583335, 3876.800000, 4968.200000, 6000.000000, 1270.662453, 213.152006, 6693.304062, 520.091820
Outstanding requests per worker:
28642 28682 28939 61046 52445 52755 50646 52653 
count  167594
count  167594
count  167594
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37541.8,      187709,     168991,      18718,     123863,      45128, 3425.769909, 6000.000000, 7000.000000, 13000.000000, 1572.739592, 1488.927960, 12954.339027, 554.791888
Outstanding requests per worker:
55059 55271 54876 87396 52800 52755 50646 52653 
count  80178
count  80178
count  80178
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42125.2,      210626,     189494,      21132,     142343,      47151, 6972.855965, 14000.000000, 14000.000000, 16000.000000, 3511.420177, 1325.350046, 15974.643707, 575.020993
Outstanding requests per worker:
89126 89318 88854 117499 120631 53793 50646 52653 
count  3612
count  3612
count  3612
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33912.0,      169560,     152725,      16835,     117614,      35111, 7933.633940, 10000.000000, 12000.000000, 21000.000000, 2293.365962, 4161.495209, 21246.511459, 595.467265
Outstanding requests per worker:
125032 125564 124691 151385 182654 53912 50646 52653 
count  1499
count  1499
count  1499
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39806.2,      199031,     178996,      20035,     139248,      39748, 13308.998653, 23000.000000, 24000.000000, 25000.000000, 5176.259591, 2421.658993, 25885.650635, 603.752950
Outstanding requests per worker:
155958 151517 149280 200349 181471 101008 50646 52653 
count  5169
count  5169
count  5169
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33489.2,      167446,     150727,      16719,     118700,      32027, 13539.471046, 17000.000000, 19000.000000, 28000.000000, 4091.852694, 4338.294029, 28639.665604, 614.976686
Outstanding requests per worker:
212126 197260 197880 227278 180085 146645 51935 52653 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:17   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   07:17   0:00 /usr/lib/linux
memcache      9 73.2  0.0 139712 73408 pts/0    Sl+  07:17   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5013052112      instructions:u                                              

      47.910997045 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1772810752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
num_worker_connections 64
Creating worker on tid 2493313536
starting receive base loop
Created 512 connections total
Creating worker on tid 1897394688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791094.789519,       0.0,       37395,      33612,       3783,      19134,      14478,   0.646301,   0.146100,   0.192100,   1.100000,   6.446231,   0.000000, 156.880006, 376.126740
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      54015,       6051,      33896,      20119,   0.118917,   0.147100,   0.188100,   0.463100,   0.065117,   0.071000,   0.974000, 441.037064
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54152,       5912,      36207,      17945,   0.118647,   0.145100,   0.227100,   0.507100,   0.073931,   0.071000,   0.911000, 483.294153
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54123,       5942,      36894,      17229,   0.118567,   0.145100,   0.216100,   0.515100,   0.073918,   0.070000,   0.756000, 498.534800
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54156,       5907,      37839,      16317,   0.119301,   0.145100,   0.235100,   0.516000,   0.075392,   0.070000,   0.856000, 517.733455
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53995,       6069,      38339,      15656,   0.118979,   0.145100,   0.217100,   0.516000,   0.074351,   0.071000,   0.985000, 529.822780
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54007,       6058,      38985,      15022,   0.118712,   0.145100,   0.218100,   0.510100,   0.073376,   0.070000,   0.750000, 540.825541
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:18   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:18   0:00 /usr/lib/linux
memcache      9 31.0  0.0 107968 29504 pts/0    Sl+  07:18   0:14 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        1488309411      instructions:u                                              

      47.411119889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2363027968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1771237888
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
Created 512 connections total
Creating worker on tid 2493313536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791145.789570,       0.0,      162013,     146186,      15827,      91727,      54459, 336.897189, 682.200000, 809.900000, 2068.900000, 373.128222,   0.000000, 3096.101046, 438.965325
Outstanding requests per worker:
11552 11301 11295 39224 49874 33458 33333 31254 
count  184445
count  184445
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40310.4,      201552,     181414,      20138,     126944,      54470, 2001.221703, 4760.300000, 6000.000000, 7000.000000, 1420.656605, 270.422995, 7132.248878, 517.655545
Outstanding requests per worker:
36506 36556 36128 74460 53100 53243 53055 53451 
count  164909
count  164909
count  164909
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36827.0,      184135,     165629,      18506,     121590,      44039, 3734.427942, 6000.000000, 7000.000000, 9000.000000, 1344.191087, 1907.678962, 12365.098953, 555.201662
Outstanding requests per worker:
68963 69306 68854 107429 53328 53243 53055 53451 
count  42670
count  42670
count  42670
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40832.0,      204160,     183732,      20428,     138029,      45703, 7579.799813, 14000.000000, 15000.000000, 16000.000000, 3499.365961, 1339.014053, 16902.189255, 575.588999
Outstanding requests per worker:
108156 108145 108056 141355 83553 53243 53055 53451 
count  9814
count  9814
count  9814
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34428.8,      172144,     155141,      17003,     119029,      36112, 8762.760895, 12000.000000, 14000.000000, 18000.000000, 2536.630998, 3032.083035, 19284.730911, 592.873573
Outstanding requests per worker:
145918 142751 142196 152879 158205 53342 53055 53451 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37958.8,      189794,     170810,      18984,     132843,      37967, 14236.950989, 24000.000000, 24000.000000, 25000.000000, 5232.075911, 6684.768200, 26223.857880, 604.042515
Outstanding requests per worker:
183529 189035 177517 187079 163725 79672 53089 53451 
count  1760
count  1760
count  1760
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33164.8,      165824,     149169,      16655,     117271,      31898, 14826.371238, 19000.000000, 26000.000000, 28000.000000, 4223.712603, 4350.450993, 28804.468155, 614.046323
Outstanding requests per worker:
249298 249137 225452 233011 178297 129020 53841 53451 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:19   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   07:19   0:00 /usr/lib/linux
memcache     10 71.6  0.0 138688 73088 pts/0    Sl+  07:19   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  07:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4923575996      instructions:u                                              

      48.043063430 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2156196352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791197.789622,       0.0,      166865,     150011,      16854,      94315,      55696, 339.516675, 687.100000, 867.700000, 2065.500000, 377.934127,   0.000000, 3145.899057, 441.200445
Outstanding requests per worker:
12011 11998 12370 45312 52047 35431 35296 32789 
count  175423
count  175423
count  175423
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40604.2,      203021,     182661,      20360,     127906,      54755, 2157.824446, 6000.000000, 7000.000000, 7000.000000, 1712.442819, 409.395993, 7344.055176, 518.641609
Outstanding requests per worker:
37578 37601 37927 50240 52047 50310 52193 51993 
count  170093
count  170093
count  170093
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37812.4,      189062,     170156,      18906,     124965,      45191, 3675.080932, 6000.000000, 7000.000000, 9000.000000, 1311.531445, 625.644982, 9660.738945, 555.669803
Outstanding requests per worker:
73740 73812 73954 123925 52047 50310 52193 51993 
count  36617
count  36617
count  36617
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42041.4,      210207,     189028,      21179,     142522,      46506, 7720.258504, 15000.000000, 15000.000000, 16000.000000, 3677.810324, 1817.268968, 16594.146729, 578.040936
Outstanding requests per worker:
115709 115695 116003 165804 81254 50310 52193 51993 
count  10771
count  10771
count  10771
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32565.2,      162826,     146473,      16353,     112718,      33755, 8707.274568, 12000.000000, 13000.000000, 18000.000000, 2490.946228, 3121.066093, 19604.946136, 595.009456
Outstanding requests per worker:
149041 153371 150490 200512 136594 50310 52193 51993 
count  1523
count  1523
count  1523
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41706.2,      208531,     187837,      20694,     146211,      41626, 13927.047140, 24000.000000, 24000.000000, 25000.000000, 5194.868014, 2345.591068, 26239.740372, 604.260279
Outstanding requests per worker:
188602 213822 197615 240232 142134 85335 52193 51993 
count  7065
count  7065
count  7065
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32019.2,      160096,     144005,      16091,     113380,      30625, 14814.234642, 20000.000000, 26000.000000, 29000.000000, 4706.962901, 3057.713032, 30504.692078, 615.111427
Outstanding requests per worker:
236978 267966 268469 247749 147493 140636 52679 51993 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:20   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   07:20   0:00 /usr/lib/linux
memcache      8 71.6  0.0 141760 76096 pts/0    Sl+  07:20   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4995121476      instructions:u                                              

      47.800533316 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2459759104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1865150976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
Created 512 connections total
Creating worker on tid 2587226624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791249.789674,       0.0,      169378,     152717,      16661,      96421,      56296, 329.702333, 672.400000, 865.300000, 2063.100000, 382.438331,   0.000000, 3111.115932, 442.954170
Outstanding requests per worker:
12000 12048 13961 49261 51762 36636 36497 33902 
count  176169
count  176169
count  176169
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40974.8,      204874,     184373,      20501,     128897,      55476, 2184.173242, 7000.000000, 7000.000000, 8000.000000, 1829.405289, 411.145002, 7751.379967, 519.585910
Outstanding requests per worker:
38105 37925 40202 52980 51762 53373 53145 53216 
count  166042
count  166042
count  166042
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38483.4,      192417,     173399,      19018,     127267,      46132, 3832.887528, 6000.000000, 8000.000000, 10000.000000, 1503.582094, 723.158002, 11173.904419, 556.570159
Outstanding requests per worker:
76381 76615 78748 103981 53077 53373 53145 53216 
count  29730
count  29730
count  29730
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39553.6,      197768,     178183,      19585,     134224,      43959, 7907.252343, 16000.000000, 16000.000000, 16000.000000, 3835.219645, 2788.732052, 16830.022812, 577.851080
Outstanding requests per worker:
120472 120745 119656 147965 82559 53373 53145 53216 
count  9233
count  9233
count  9233
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34890.8,      174454,     156972,      17482,     120406,      36566, 9187.092246, 12000.000000, 16000.000000, 19000.000000, 2613.467462, 3187.978983, 20116.125107, 592.586914
Outstanding requests per worker:
158630 159227 150310 164039 131469 53493 53145 53216 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38175.8,      190879,     171833,      19046,     133549,      38284, 13740.970356, 25000.000000, 25000.000000, 26000.000000, 5432.607240, 6486.550808, 26412.054062, 603.193467
Outstanding requests per worker:
223567 220545 188131 202230 186174 78253 53145 53216 
count  1246
count  1246
count  1246
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30021.2,      150106,     135089,      15017,     106391,      28698, 15635.773129, 26000.000000, 27000.000000, 29000.000000, 4727.180694, 4699.706078, 29914.262772, 615.064668
Outstanding requests per worker:
280794 281464 251030 242605 197813 116839 53145 53216 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:20   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   07:20   0:00 /usr/lib/linux
memcache     10 73.2  0.0 138688 75136 pts/0    Sl+  07:20   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4955559624      instructions:u                                              

      47.765237129 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1889530368
starting receive base loop
num_worker_connections 64
Creating worker on tid 1293414912
starting receive base loop
num_worker_connections 64
Creating worker on tid 700117504
starting receive base loop
num_worker_connections 64
Creating worker on tid 104198656
starting receive base loop
num_worker_connections 64
Creating worker on tid 3803247104
starting receive base loop
num_worker_connections 64
Creating worker on tid 3207328256
starting receive base loop
num_worker_connections 64
Creating worker on tid 2611409408
starting receive base loop
Created 512 connections total
Creating worker on tid 2015490560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791300.789725,       0.0,      169868,     152792,      17076,      96558,      56234, 239.770778, 472.800000, 998.700000, 2173.500000, 393.790313,   0.000000, 3184.643984, 444.489437
Outstanding requests per worker:
7596 7744 24939 50017 50194 37744 37600 35091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38627.8,      193139,     173864,      19275,     122148,      51716, 1411.179640, 2719.800000, 3362.900000, 3933.800000, 840.387535,  97.204998, 4638.662815, 522.325950
Outstanding requests per worker:
31577 31281 50275 50017 50194 52329 52004 50011 
count  154604
count  154604
count  154604
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42473.6,      212368,     191227,      21141,     139923,      51304, 4408.628885, 9000.000000, 9000.000000, 11000.000000, 2596.042946, 1297.332048, 11952.419281, 555.265642
Outstanding requests per worker:
68946 68868 86894 114153 51937 52329 52004 50011 
count  57423
count  57423
count  57423
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39308.2,      196541,     176856,      19685,     133308,      43548, 6947.306892, 17000.000000, 17000.000000, 18000.000000, 3745.329814, 3379.214048, 17757.114410, 578.760155
Outstanding requests per worker:
112814 112702 131639 145447 54003 52329 52004 50011 
count  13266
count  13266
count  13266
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36004.8,      180024,     162104,      17920,     124781,      37323, 9434.449100, 17000.000000, 18000.000000, 20000.000000, 3640.569870, 1293.612003, 21201.675415, 594.905647
Outstanding requests per worker:
143059 148390 167414 167625 111946 52738 52004 50011 
count  2431
count  2431
count  2431
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35281.2,      176406,     158925,      17481,     123730,      35195, 11061.525962, 14000.000000, 15000.000000, 27000.000000, 3055.411857, 4572.183132, 27104.406357, 606.246550
Outstanding requests per worker:
189255 204123 210087 205572 173761 52782 52004 50011 
count  1476
count  1476
count  1476
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33718.0,      168590,     151663,      16927,     119342,      32321, 17714.017841, 28000.000000, 29000.000000, 30000.000000, 6241.259328, 3565.854073, 30641.534805, 613.741532
Outstanding requests per worker:
273930 248948 259676 219044 175626 88722 52295 50011 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:21   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:21   0:00 /usr/lib/linux
memcache      9 71.7  0.0 139712 74048 pts/0    Sl+  07:21   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5015257622      instructions:u                                              

      47.878703080 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2051273216
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791352.789777,       0.0,      168759,     151774,      16985,      96028,      55746, 251.596668, 500.500000, 857.500000, 2058.900000, 370.432714,   0.000000, 3014.659882, 445.026843
Outstanding requests per worker:
9378 9195 25435 50848 53616 38754 38605 36366 
count  193183
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39245.0,      196225,     176883,      19342,     124181,      52702, 1609.612167, 2927.400000, 3560.600000, 8000.000000, 1110.497610, 183.691993, 7653.460979, 520.175336
Outstanding requests per worker:
36684 36584 53691 51395 53616 53825 51981 51897 
count  162012
count  162012
count  162012
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43549.6,      217748,     195746,      22002,     143740,      52006, 4431.518543, 9000.000000, 10000.000000, 11000.000000, 2534.589890, 1094.112039, 12977.173805, 556.089775
Outstanding requests per worker:
76538 76321 93632 97460 53675 53825 51981 51897 
count  52714
count  52714
count  52714
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37862.0,      189310,     170354,      18956,     128415,      41939, 7129.813143, 17000.000000, 17000.000000, 18000.000000, 3959.000780, 2729.250908, 17702.777863, 577.632994
Outstanding requests per worker:
119065 121483 133913 169906 56741 53825 51981 51897 
count  12207
count  12207
count  12207
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35525.2,      177626,     160002,      17624,     122893,      37109, 9706.663994, 17000.000000, 18000.000000, 20000.000000, 3614.323782, 2648.823023, 20615.436554, 594.090686
Outstanding requests per worker:
154621 152504 169676 181515 131656 53825 51981 51897 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35304.4,      176522,     158839,      17683,     123884,      34955, 11416.373852, 14000.000000, 15000.000000, 25000.000000, 2880.141515, 6450.520992, 26223.154068, 606.320979
Outstanding requests per worker:
209209 196440 226075 216539 170505 53979 51981 51897 
count  3768
count  3768
count  3768
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33691.6,      168458,     151626,      16832,     119338,      32288, 17636.113262, 28000.000000, 28000.000000, 30000.000000, 6274.843448, 2284.113884, 30308.593750, 615.135379
Outstanding requests per worker:
276290 272616 274627 216093 193328 107461 51981 51897 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:22   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   07:22   0:00 /usr/lib/linux
memcache     10 71.6  0.0 140736 75008 pts/0    Sl+  07:22   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5047937364      instructions:u                                              

      47.775981660 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2168451584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1572532736
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791403.789828,       0.0,      167094,     150565,      16529,      95076,      55489, 254.014849, 528.900000, 780.200000, 1903.100000, 344.320514,   0.000000, 2775.752068, 443.179590
Outstanding requests per worker:
10528 10689 30402 54136 50948 40402 40249 37737 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38475.8,      192379,     173199,      19180,     120948,      52251, 1636.269452, 3046.600000, 3600.100000, 4428.400000, 914.058286, 166.880995, 5278.583050, 516.427139
Outstanding requests per worker:
40328 40613 63002 54136 50948 50330 52510 53758 
count  152751
count  152751
count  152751
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43399.6,      216998,     195479,      21519,     143147,      52332, 4831.650342, 10000.000000, 10000.000000, 11000.000000, 2666.032300, 1478.420019, 11654.095650, 553.352335
Outstanding requests per worker:
83449 83383 104771 91887 50948 50330 52510 53758 
count  37955
count  37955
count  37955
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36845.4,      184227,     165756,      18471,     124760,      40996, 6726.008458, 9000.000000, 18000.000000, 18000.000000, 3055.821700, 2827.142954, 18087.348938, 576.966662
Outstanding requests per worker:
127774 129768 147756 155323 51470 50330 52510 53758 
count  8825
count  8825
count  8825
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37117.6,      185588,     167093,      18495,     128109,      38984, 10817.673326, 18000.000000, 19000.000000, 21000.000000, 4108.647592, 2615.212917, 21348.434448, 591.364845
Outstanding requests per worker:
158696 169543 184094 156015 96449 52614 52510 53758 
count  41
count  41
count  41
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31690.4,      158452,     142549,      15903,     110854,      31695, 11554.048034, 14000.000000, 15000.000000, 22000.000000, 2734.789221, 4928.092003, 22991.857529, 604.339785
Outstanding requests per worker:
201586 221347 211998 183675 148408 52614 52510 53758 
count  177
count  177
count  177
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35905.0,      179525,     161665,      17860,     127026,      34639, 17709.991339, 28000.000000, 29000.000000, 30000.000000, 6091.644854, 3850.322962, 31576.440811, 612.033007
Outstanding requests per worker:
267397 295227 223577 194739 163303 83168 53110 53758 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:23   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   07:23   0:00 /usr/lib/linux
memcache      8 71.7  0.0 139712 73536 pts/0    Sl+  07:23   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5000859888      instructions:u                                              

      47.946074392 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2645750272
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791454.789879,       0.0,      166580,     149954,      16626,      94880,      55074, 271.764945, 620.400000, 903.600000, 1807.400000, 345.196632,   0.000000, 2688.246012, 444.079051
Outstanding requests per worker:
10443 11652 35260 51779 51628 42188 42029 39218 
count  197741
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40024.6,      200123,     180169,      19954,     125970,      54199, 1777.683022, 3441.600000, 3918.200000, 6000.000000, 1081.782956, 152.715996, 6327.019215, 518.730914
Outstanding requests per worker:
43218 44282 75657 52678 51628 53147 50665 51723 
count  143121
count  143121
count  143121
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41056.2,      205281,     184931,      20350,     135453,      49478, 5039.906474, 10000.000000, 10000.000000, 12000.000000, 2789.527638, 1805.390954, 11892.661095, 554.754919
Outstanding requests per worker:
88347 89654 114025 84590 51628 53147 50665 51723 
count  34293
count  34293
count  34293
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34701.2,      173506,     156172,      17334,     117447,      38725, 6279.827589, 9000.000000, 10000.000000, 13000.000000, 1605.601653, 2819.344997, 13360.447884, 576.808333
Outstanding requests per worker:
132044 131587 151287 166972 51628 53147 50665 51723 
count  5951
count  5951
count  5951
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37792.8,      188964,     170243,      18721,     130491,      39752, 11645.217575, 19000.000000, 20000.000000, 21000.000000, 4500.748330, 3743.879080, 21694.831848, 592.210481
Outstanding requests per worker:
174760 162050 198120 174054 100888 53830 50665 51723 
count  316
count  316
count  316
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31689.0,      158445,     142500,      15945,     110706,      31794, 11877.840945, 15000.000000, 16000.000000, 27000.000000, 3251.568934, 4237.895012, 26655.933380, 603.542344
Outstanding requests per worker:
238633 269001 203896 208443 148399 53957 50665 51723 
count  722
count  722
count  722
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40141.6,      200708,     180993,      19715,     142089,      38904, 17623.922415, 29000.000000, 29000.000000, 31000.000000, 6300.602991, 2267.169952, 31832.128525, 612.866072
Outstanding requests per worker:
299441 316940 204297 226509 162843 90864 52032 51723 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:24   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:24   0:00 /usr/lib/linux
memcache      9 71.5  0.0 138688 75776 pts/0    Sl+  07:24   0:34 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  07:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4997676934      instructions:u                                              

      47.960227915 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2491281920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1897394688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
Created 512 connections total
Creating worker on tid 2619470336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575791506.789931,       0.0,      166395,     149951,      16444,      94491,      55460, 299.213405, 790.500000, 1117.100000, 1753.600000, 371.830006,   0.000000, 2615.572929, 441.868364
Outstanding requests per worker:
10308 13062 38655 52740 51372 42229 42067 40004 
count  196916
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40331.2,      201656,     181500,      20156,     127184,      54316, 1857.946490, 3877.400000, 4324.200000, 6000.000000, 1269.343669, 278.737992, 7300.866127, 518.572287
Outstanding requests per worker:
44002 46935 77830 53455 51372 51685 53391 52910 
count  142236
count  142236
count  142236
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40060.8,      200304,     180322,      19982,     131881,      48441, 4929.328820, 10000.000000, 11000.000000, 11000.000000, 2682.265466, 1156.002998, 11477.391243, 553.739693
Outstanding requests per worker:
90737 93557 122312 89343 51372 51685 53391 52910 
count  35644
count  35644
count  35644
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35948.0,      179740,     161735,      18005,     121791,      39944, 6741.581096, 10000.000000, 12000.000000, 15000.000000, 2346.918101, 2315.077066, 17393.939972, 576.519269
Outstanding requests per worker:
136329 147331 165132 163346 52289 51685 53391 52910 
count  6650
count  6650
count  6650
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38744.8,      193724,     174421,      19303,     133382,      41039, 11483.330333, 19000.000000, 20000.000000, 22000.000000, 4554.075486, 1548.977017, 22110.834122, 589.792152
Outstanding requests per worker:
179753 193548 222651 174451 87094 51845 53391 52910 
count  7150
count  7150
count  7150
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33050.6,      165253,     148886,      16367,     115822,      33064, 12023.953779, 15000.000000, 17000.000000, 26000.000000, 3660.096088, 3093.219995, 25742.977142, 603.645662
Outstanding requests per worker:
274074 270909 228029 193104 130462 52770 53391 52910 
count  1306
count  1306
count  1306
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36646.8,      183234,     164969,      18265,     129424,      35545, 17744.097663, 29000.000000, 29000.000000, 30000.000000, 6299.992843, 1768.610001, 31195.936203, 612.208960
Outstanding requests per worker:
337907 317154 226974 205611 177379 84845 53391 52910 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:25   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   07:25   0:00 /usr/lib/linux
memcache      9 71.6  0.0 139712 76672 pts/0    Sl+  07:25   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4994339148      instructions:u                                              

      47.808544274 seconds time elapsed

