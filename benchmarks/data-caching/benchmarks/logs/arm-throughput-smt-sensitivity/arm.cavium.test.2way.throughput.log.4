+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2350838272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1755116032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
Created 512 connections total
Creating worker on tid 2477191680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808650.807075,       0.0,       77127,      69405,       7722,      41715,      27690,   1.858388,   0.119100,   0.129000,  85.100000,  14.414396,   0.000000, 206.315994, 410.319660
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.2,      125011,     112574,      12437,      74669,      37905,   0.092012,   0.107100,   0.124100,   0.230100,   0.026351,   0.066000,   0.588000, 479.405396
Outstanding requests per worker:
0 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.2,      125011,     112542,      12469,      78975,      33567,   0.092142,   0.106100,   0.123100,   0.233100,   0.027917,   0.066000,   1.500000, 519.970811
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112565,      12449,      81485,      31080,   0.092336,   0.106100,   0.124100,   0.237100,   0.028781,   0.065000,   0.898000, 544.071985
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112437,      12570,      82984,      29453,   0.092361,   0.107100,   0.124100,   0.234100,   0.028209,   0.065000,   0.861000, 561.272419
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112630,      12379,      84453,      28177,   0.092340,   0.107100,   0.124100,   0.236100,   0.028517,   0.067000,   1.020000, 573.131892
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.4,      125012,     112484,      12528,      85557,      26927,   0.092432,   0.107100,   0.124100,   0.238100,   0.028409,   0.067000,   1.497000, 585.260544
Outstanding requests per worker:
1 0 1 0 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:10   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:10   0:00 /usr/lib/linux
memcache      7 69.0  0.0 196032 47232 pts/0    Sl+  12:10   0:32 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3219845675      instructions:u                                              

      47.571028695 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2125263360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808701.807126,       0.0,       92778,      83530,       9248,      50832,      32698,   0.464635,   0.129000,   0.149100,   0.505100,   4.807869,   0.000000, 127.241001, 417.199976
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135382,      15012,      91319,      44063,   0.102806,   0.137100,   0.148100,   0.230100,   0.031085,   0.065000,   0.748000, 490.896648
Outstanding requests per worker:
0 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135483,      14903,      96208,      39275,   0.103013,   0.139100,   0.148100,   0.236100,   0.032825,   0.066000,   1.011000, 530.308474
Outstanding requests per worker:
0 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135339,      15050,      99241,      36098,   0.103066,   0.139100,   0.148100,   0.235100,   0.031951,   0.067000,   0.871000, 556.119293
Outstanding requests per worker:
0 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135514,      14879,     101521,      33993,   0.103206,   0.140100,   0.148100,   0.236100,   0.032127,   0.063000,   1.122000, 572.869549
Outstanding requests per worker:
0 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.0,      150395,     135281,      15114,     103039,      32242,   0.103177,   0.140100,   0.148100,   0.234100,   0.032263,   0.068000,   0.973000, 587.780442
Outstanding requests per worker:
0 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135355,      15029,     104487,      30868,   0.103035,   0.139100,   0.148100,   0.230100,   0.031584,   0.066000,   1.120000, 596.888006
Outstanding requests per worker:
0 1 1 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:11   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:11   0:00 /usr/lib/linux
memcache      7 78.7  0.0 203200 51456 pts/0    Sl+  12:11   0:37 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3812891610      instructions:u                                              

      47.760797210 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1941565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
num_worker_connections 64
Creating worker on tid 2662396416
starting receive base loop
Created 512 connections total
Creating worker on tid 2066477568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808752.807177,       0.0,      107417,      96533,      10884,      58909,      37624,   0.817241,   0.125100,   0.147100,   8.400000,   9.214901,   0.000000, 244.485006, 421.851170
Outstanding requests per worker:
0 1 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.0,      175460,     157913,      17547,     107892,      50021,   0.099269,   0.126100,   0.145100,   0.204100,   0.028261,   0.062000,   1.007000, 501.108503
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.4,      175447,     157795,      17652,     113371,      44424,   0.099695,   0.126100,   0.146100,   0.213100,   0.029759,   0.060000,   1.194000, 539.534852
Outstanding requests per worker:
1 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.8,      175449,     157974,      17475,     117190,      40784,   0.099420,   0.126100,   0.145100,   0.207100,   0.027812,   0.065000,   0.764000, 565.444162
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.2,      175456,     157977,      17479,     119493,      38484,   0.099640,   0.126100,   0.146100,   0.206100,   0.029830,   0.068000,   1.654000, 581.632522
Outstanding requests per worker:
1 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.6,      175458,     157958,      17500,     121577,      36381,   0.099586,   0.126100,   0.146100,   0.207100,   0.029071,   0.067000,   1.067000, 596.815014
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35088.8,      175444,     157940,      17504,     123182,      34758,   0.099719,   0.126100,   0.146100,   0.209100,   0.028419,   0.067000,   1.124000, 607.467931
Outstanding requests per worker:
1 0 0 1 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:12   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:12   0:00 /usr/lib/linux
memcache      7 88.6  0.0 206272 57152 pts/0    Sl+  12:12   0:42 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        4483010748      instructions:u                                              

      47.630879010 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2545218048
starting receive base loop
num_worker_connections 64
Creating worker on tid 1948381696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
Created 512 connections total
Creating worker on tid 2670457344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808804.807229,       0.0,      124075,     111512,      12563,      68909,      42603,   2.187159,   0.143100,   0.169100,  95.400000,  17.825706,   0.000000, 267.773002, 430.812648
Outstanding requests per worker:
0 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.8,      200024,     180165,      19859,     124879,      55286,   0.104132,   0.142100,   0.149100,   0.232100,   0.029319,   0.060000,   0.863000, 510.841551
Outstanding requests per worker:
0 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40001.6,      200008,     180166,      19842,     131276,      48890,   0.104554,   0.143100,   0.150100,   0.230100,   0.030446,   0.063000,   1.086000, 550.553223
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.8,      200014,     179975,      20039,     135092,      44883,   0.104827,   0.144100,   0.150100,   0.236100,   0.031499,   0.065000,   0.937000, 574.106298
Outstanding requests per worker:
1 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.2,      200016,     180077,      19939,     137787,      42290,   0.104618,   0.143100,   0.150100,   0.231100,   0.030560,   0.062000,   1.045000, 590.031109
Outstanding requests per worker:
1 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.4,      200022,     180202,      19820,     140170,      40032,   0.104723,   0.144100,   0.150100,   0.232100,   0.030308,   0.061000,   1.107000, 605.005760
Outstanding requests per worker:
0 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.0,      200010,     180022,      19988,     141749,      38273,   0.105242,   0.144100,   0.150100,   0.239100,   0.032699,   0.060000,   1.244000, 614.936452
Outstanding requests per worker:
1 0 1 1 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:13   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:13   0:00 /usr/lib/linux
memcache      7  101  0.0 212416 63808 pts/0    Sl+  12:13   0:47 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5069317703      instructions:u                                              

      47.451036856 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2664231424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2066477568
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
Created 512 connections total
Creating worker on tid 2788553216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808855.807280,       0.0,      142498,     128156,      14342,      80174,      47982,   0.719013,   0.129000,   0.153100,  15.500000,   6.647681,   0.000000, 153.174996, 437.443015
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45202.6,      226013,     203471,      22542,     142339,      61132,   0.104392,   0.134100,   0.149100,   0.227100,   0.029843,   0.060000,   1.180000, 519.625765
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45203.8,      226019,     203536,      22483,     150011,      53525,   0.104815,   0.139100,   0.149100,   0.227100,   0.030419,   0.059000,   1.057000, 558.900588
Outstanding requests per worker:
0 1 0 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.4,      226002,     203527,      22475,     154258,      49269,   0.105088,   0.140100,   0.150100,   0.227100,   0.031067,   0.060000,   1.034000, 582.911923
Outstanding requests per worker:
1 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.4,      226007,     203349,      22658,     157084,      46265,   0.105464,   0.141100,   0.150100,   0.230100,   0.033397,   0.061000,   1.210000, 598.885301
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45202.0,      226010,     203442,      22568,     159819,      43623,   0.105909,   0.142100,   0.151100,   0.229100,   0.033018,   0.061000,   1.121000, 612.739842
Outstanding requests per worker:
1 1 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45203.0,      226015,     203574,      22441,     161673,      41901,   0.105453,   0.142100,   0.151100,   0.228100,   0.029872,   0.063000,   0.778000, 622.327753
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:14   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:14   0:00 /usr/lib/linux
memcache      8  112  0.0 217536 66752 pts/0    Sl+  12:14   0:53 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5771547450      instructions:u                                              

      47.580969842 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2270032384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1671885312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
Created 512 connections total
Creating worker on tid 2393960960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808906.807331,       0.0,      152571,     137222,      15349,      86177,      51045,   0.551854,   0.178100,   0.209100,   2.800000,   5.700960,   0.000000, 159.270003, 439.621613
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.1,      250021,     224795,      25226,     158271,      66524,   0.118006,   0.186100,   0.206100,   0.236100,   0.042520,   0.060000,   1.016000, 522.624640
Outstanding requests per worker:
0 0 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.3,      250017,     225005,      25012,     166758,      58247,   0.119693,   0.194000,   0.209100,   0.244100,   0.045541,   0.060000,   1.231000, 564.844083
Outstanding requests per worker:
1 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.3,      250012,     225085,      24927,     171692,      53393,   0.120293,   0.194000,   0.209100,   0.244100,   0.050494,   0.060000,   1.756000, 587.839683
Outstanding requests per worker:
0 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.1,      250016,     225228,      24788,     175053,      50175,   0.119216,   0.193100,   0.208100,   0.235100,   0.041477,   0.061000,   0.651000, 604.065329
Outstanding requests per worker:
1 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.7,      250019,     225253,      24766,     177967,      47286,   0.120480,   0.196000,   0.211100,   0.241100,   0.043771,   0.060000,   1.203000, 619.051165
Outstanding requests per worker:
0 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50005.3,      250027,     224710,      25317,     179637,      45073,   0.120769,   0.196000,   0.211100,   0.246100,   0.047135,   0.059000,   1.329000, 628.120542
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:15   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   12:15   0:00 /usr/lib/linux
memcache      8  117  0.0 222656 73984 pts/0    Sl+  12:15   0:56 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6303450863      instructions:u                                              

      47.539829606 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1720578560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
num_worker_connections 64
Creating worker on tid 2444947968
starting receive base loop
Created 512 connections total
Creating worker on tid 1849029120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575808957.807382,       0.0,      171638,     154517,      17121,      98088,      56429,   0.625151,   0.209100,   0.256100,   4.800000,   5.746822,   0.000000, 156.994998, 446.225749
Outstanding requests per worker:
2 0 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.5,      275878,     248324,      27554,     176259,      72065,   0.145312,   0.211100,   0.237100,   0.342100,   0.059339,   0.061000,   1.078000, 529.439567
Outstanding requests per worker:
0 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.9,      275880,     248417,      27463,     185264,      63153,   0.147616,   0.213100,   0.245100,   0.347100,   0.061440,   0.061000,   1.260000, 569.233197
Outstanding requests per worker:
2 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55174.5,      275873,     248203,      27670,     190786,      57417,   0.148555,   0.214100,   0.247100,   0.349100,   0.064252,   0.059000,   1.137000, 593.805184
Outstanding requests per worker:
2 1 2 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55176.7,      275884,     248301,      27583,     194734,      53567,   0.148335,   0.214100,   0.248100,   0.347100,   0.061195,   0.060000,   1.087000, 609.955542
Outstanding requests per worker:
1 1 0 1 1 0 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.3,      275877,     248199,      27678,     197666,      50533,   0.149187,   0.214100,   0.250100,   0.353100,   0.065658,   0.061000,   1.221000, 624.206359
Outstanding requests per worker:
0 1 1 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.7,      275879,     248395,      27484,     199799,      48596,   0.149168,   0.215100,   0.251100,   0.353100,   0.063498,   0.060000,   1.294000, 634.530606
Outstanding requests per worker:
0 0 1 0 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      8  126  0.0 227776 76096 pts/0    Sl+  12:16   1:00 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6889992028      instructions:u                                              

      47.550487227 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2156458496
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809008.807433,       0.0,      182248,     163752,      18496,     104104,      59648,   0.632844,   0.334100,   0.577100,   6.500000,   4.835012,   0.000000, 118.175000, 448.008617
Outstanding requests per worker:
2 0 1 1 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.9,      300790,     270525,      30265,     192966,      77559,   0.191934,   0.320100,   0.358100,   0.501000,   0.094809,   0.059000,   1.132000, 532.967837
Outstanding requests per worker:
0 1 1 1 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.1,      300771,     271141,      29630,     203742,      67399,   0.195683,   0.323000,   0.369000,   0.558100,   0.098318,   0.061000,   1.250000, 575.644351
Outstanding requests per worker:
1 0 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270764,      30010,     208683,      62081,   0.202871,   0.332100,   0.425100,   0.589100,   0.107324,   0.059000,   1.695000, 598.302274
Outstanding requests per worker:
1 2 0 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.7,      300784,     270651,      30133,     213420,      57231,   0.201260,   0.329100,   0.386100,   0.575100,   0.101603,   0.061000,   1.114000, 617.052876
Outstanding requests per worker:
0 2 1 1 2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.9,      300790,     270645,      30145,     216287,      54358,   0.204112,   0.332100,   0.424100,   0.590100,   0.109977,   0.058000,   1.681000, 628.770345
Outstanding requests per worker:
0 1 2 2 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270601,      30169,     219124,      51477,   0.202367,   0.331100,   0.394100,   0.573100,   0.102208,   0.056000,   1.047000, 640.480623
Outstanding requests per worker:
1 1 2 1 1 1 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      8  132  0.0 230848 79616 pts/0    Sl+  12:16   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7381544256      instructions:u                                              

      47.450293239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2351493632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1755116032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
Created 512 connections total
Creating worker on tid 2477191680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809059.807484,       0.0,      197659,     177889,      19770,     113377,      64512,   4.097387,  10.000000,  13.400000,  41.400000,   9.932585,   0.000000, 181.866005, 449.743520
Outstanding requests per worker:
9 10 10 11 14 13 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65037.9,      325190,     292790,      32400,     209954,      82836,   1.638715,   4.300000,   5.100000,   7.000000,   1.742229,   0.062000,  11.863000, 537.456778
Outstanding requests per worker:
15 17 18 16 15 15 16 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65033.5,      325168,     292413,      32755,     220710,      71703,   2.108142,   5.700000,   6.800000,   8.400000,   2.192727,   0.061000,  10.889000, 578.868467
Outstanding requests per worker:
27 23 26 19 24 23 26 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65035.1,      325176,     292559,      32617,     226921,      65638,   2.745269,   7.600000,   8.900000,  11.400000,   3.051048,   0.060000,  15.858000, 601.942822
Outstanding requests per worker:
31 31 28 27 33 33 25 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.9,      325235,     292593,      32642,     231535,      61058,   3.002137,   8.000000,   9.300000,  11.800000,   3.086891,   0.065000,  15.030000, 619.475445
Outstanding requests per worker:
22 33 29 34 26 29 27 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65052.1,      325261,     293008,      32253,     235448,      57560,   3.396275,   7.700000,   9.100000,  11.000000,   2.876803,   0.063000,  13.628000, 633.712752
Outstanding requests per worker:
21 27 21 18 24 27 27 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65038.1,      325191,     292583,      32608,     238237,      54346,   3.728520,   8.300000,   9.400000,  11.800000,   3.064903,   0.065000,  16.764000, 644.743252
Outstanding requests per worker:
30 26 28 29 29 22 35 25 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:17   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:17   0:00 /usr/lib/linux
memcache      7  138  0.0 235968 84608 pts/0    Sl+  12:17   1:06 memcached -t 2
memcache     16  1.0  0.0   6656  4416 pts/1    Rs+  12:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7803929386      instructions:u                                              

      47.400876242 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2128409088
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809110.807535,       0.0,      210373,     189426,      20947,     121442,      67984,  10.854934,  25.300000,  33.000000,  61.900000,  16.673854,   0.000000, 385.747999, 454.986971
Outstanding requests per worker:
108 109 102 102 107 110 106 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70166.1,      350831,     315564,      35267,     227132,      88432,  12.457912,  24.400000,  28.100000,  32.600000,   7.997693,   0.136000,  39.055999, 541.194357
Outstanding requests per worker:
112 116 130 115 110 98 115 113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70180.9,      350905,     315946,      34959,     239807,      76139,  12.999071,  25.500000,  29.600000,  34.900000,   8.421428,   0.139000,  40.553998, 584.204693
Outstanding requests per worker:
92 120 116 120 120 109 114 121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70160.7,      350804,     316077,      34727,     246601,      69476,  13.307969,  26.500000,  30.000000,  34.700000,   8.587220,   0.149000,  48.159000, 606.322080
Outstanding requests per worker:
119 140 115 126 126 133 140 121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70184.7,      350924,     315771,      35153,     251446,      64325,  13.754511,  27.100000,  31.200000,  37.900000,   9.002386,   0.145000,  45.196999, 624.641414
Outstanding requests per worker:
127 105 113 147 136 113 139 138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70187.5,      350938,     315728,      35210,     255379,      60349,  14.106448,  27.600000,  32.100000,  39.700000,   9.253408,   0.138000,  48.097000, 638.183740
Outstanding requests per worker:
110 144 112 123 113 123 126 125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70173.9,      350870,     315498,      35372,     258267,      57231,  14.401207,  27.800000,  32.900000,  41.600000,   9.555406,   0.140000,  51.557001, 648.905793
Outstanding requests per worker:
135 122 125 114 138 124 135 119 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:18   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:18   0:00 /usr/lib/linux
memcache      7  141  0.0 241088 91712 pts/0    Sl+  12:18   1:06 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        8628769067      instructions:u                                              

      47.120121511 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1973481984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2694640128
starting receive base loop
Created 512 connections total
Creating worker on tid 2098721280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809161.807586,       0.0,      226598,     203767,      22831,     131527,      72240,  20.496463,  49.100000,  60.800000, 114.300000,  32.686738,   0.000000, 682.684004, 458.874356
Outstanding requests per worker:
193 211 190 171 201 203 190 216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75475.7,      377379,     339319,      38060,     246267,      93052,  20.834062,  38.100000,  50.000000,  61.300000,  13.812269,   0.140000,  88.150002, 546.862713
Outstanding requests per worker:
189 193 196 216 225 154 217 186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75455.9,      377280,     339602,      37678,     259307,      80295,  21.794732,  39.900000,  51.800000,  64.700000,  14.465853,   0.157000,  89.956000, 589.374792
Outstanding requests per worker:
218 202 213 195 221 191 203 242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75463.5,      377318,     339899,      37419,     266789,      73110,  22.213982,  40.400000,  53.200000,  65.400000,  14.736972,   0.166000, 110.996000, 612.425120
Outstanding requests per worker:
183 206 254 228 225 214 238 197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75471.5,      377358,     339223,      38135,     271692,      67531,  23.196942,  41.700000,  54.900000,  70.200000,  15.424672,   0.150000, 122.510999, 629.689591
Outstanding requests per worker:
236 216 212 227 253 203 220 204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75389.7,      376949,     339010,      37939,     275686,      63324,  27.169271,  53.500000,  60.900000,  96.800000,  19.768400,   0.187000, 184.395999, 643.145040
Outstanding requests per worker:
329 247 267 294 268 280 253 265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75454.5,      377273,     339528,      37745,     279399,      60129,  30.275336,  59.000000,  65.800000, 114.200000,  22.859958,   0.187000, 196.617007, 654.441104
Outstanding requests per worker:
294 260 327 206 308 331 301 287 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:19   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:19   0:00 /usr/lib/linux
memcache      7  141  0.0 244160 96768 pts/0    Sl+  12:19   1:06 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9335265503      instructions:u                                              

      47.650350702 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1771762176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
num_worker_connections 64
Creating worker on tid 2493313536
starting receive base loop
Created 512 connections total
Creating worker on tid 1897394688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809212.807637,       0.0,      245269,     220651,      24618,     143239,      77412,  42.097937,  84.900000, 139.900000, 506.900000,  95.349273,   0.000000, 1441.050053, 462.460605
Outstanding requests per worker:
706 712 711 803 675 854 747 1790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78414.5,      392073,     352971,      39102,     257434,      95537, 131.345210, 226.400000, 275.000000, 421.000000,  92.849654,   0.452000, 1210.525036, 550.705596
Outstanding requests per worker:
1851 1976 1811 2045 1879 1826 1785 1801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78560.9,      392805,     353610,      39195,     270221,      83389, 233.103654, 364.600000, 414.700000, 515.000000,  98.698528,   0.625000, 782.943010, 589.762088
Outstanding requests per worker:
2618 2741 2726 2861 2917 2860 2672 2823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78856.9,      394285,     355028,      39257,     279787,      75241, 314.124585, 475.900000, 535.400000, 649.900000, 121.381282,   0.835000, 898.068011, 616.061282
Outstanding requests per worker:
3404 3562 3470 3558 3574 3467 3518 3410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78991.5,      394958,     355650,      39308,     285584,      70066, 380.161506, 575.800000, 647.100000, 803.300000, 148.784871,   1.437000, 1313.266993, 632.179753
Outstanding requests per worker:
4167 4180 4189 4082 4003 4160 4255 4002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79151.7,      395759,     356089,      39670,     290184,      65905, 437.170466, 676.200000, 757.600000, 926.400000, 173.718726,   1.744000, 1350.736022, 645.741208
Outstanding requests per worker:
4459 4928 4681 4630 4526 4575 4831 4689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79150.9,      395755,     356128,      39627,     293726,      62402, 493.182343, 773.400000, 884.100000, 1122.400000, 204.855181,   3.041000, 1634.778023, 656.408623
Outstanding requests per worker:
4941 5234 5233 5365 5113 5172 5305 5236 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:20   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:20   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 109376 pts/0   Sl+  12:20   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10040117961      instructions:u                                              

      47.701556433 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2211443200
starting receive base loop
num_worker_connections 64
Creating worker on tid 1612837376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
Created 512 connections total
Creating worker on tid 2334913024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809263.807688,       0.0,      241886,     217659,      24227,     141421,      76238,  56.451348, 124.600000, 174.200000, 882.800000, 147.045464,   0.000000, 1967.663050, 463.564162
Outstanding requests per worker:
1107 1154 1065 1197 1159 1105 1238 9381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79677.9,      398390,     358419,      39971,     261854,      96565, 377.348108, 555.900000, 1072.600000, 2155.200000, 363.662107,   0.769000, 3206.943035, 551.557828
Outstanding requests per worker:
4632 4846 4904 4881 4833 4909 4781 10805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80677.7,      403389,     363258,      40131,     278546,      84712, 654.333526, 915.400000, 1181.900000, 2430.100000, 360.195537,  64.327002, 3423.902988, 592.064475
Outstanding requests per worker:
7550 7477 7677 7574 7640 7782 7773 13306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80517.7,      402589,     362250,      40339,     286313,      75937, 915.110640, 1279.200000, 1567.300000, 2776.400000, 405.996962, 202.140003, 3924.925089, 618.287423
Outstanding requests per worker:
10329 10322 10367 10639 10601 10479 10572 16475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80324.5,      401623,     361735,      39888,     291580,      70155, 1191.837273, 1653.900000, 1957.300000, 3132.700000, 460.518278, 292.394996, 4344.479084, 634.590675
Outstanding requests per worker:
13287 13323 13374 13635 13504 13629 13686 19292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80114.7,      400574,     360406,      40168,     293976,      66430, 1477.380770, 2039.400000, 2322.700000, 3406.100000, 509.062730, 318.590999, 4481.404781, 646.244089
Outstanding requests per worker:
16196 16493 16817 16728 16723 16456 16951 22362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79931.9,      399660,     359677,      39983,     296700,      62977, 1776.923254, 2412.200000, 2665.300000, 3693.000000, 554.619048, 319.211990, 5003.878117, 656.031295
Outstanding requests per worker:
19734 19625 20101 19750 19996 19588 20365 25487 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:21   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:21   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 116608 pts/0   Sl+  12:21   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10122217755      instructions:u                                              

      47.609843256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2620649984
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809314.807739,       0.0,      253240,     227994,      25246,     148028,      79966,  67.488083, 161.000000, 207.200000, 864.600000, 152.850380,   0.000000, 1974.956989, 463.832184
Outstanding requests per worker:
1633 1764 1769 1796 1892 1893 1906 15725 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80605.7,      403029,     362563,      40466,     264603,      97960, 593.623190, 933.100000, 1986.900000, 3132.100000, 569.766176,   1.224000, 4271.842957, 551.902232
Outstanding requests per worker:
8123 8194 8113 7905 7974 8183 8022 23424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81142.1,      405711,     365165,      40546,     280465,      84700, 1141.003748, 1626.100000, 2580.100000, 3735.700000, 612.326845, 293.334991, 4870.467186, 593.378697
Outstanding requests per worker:
14140 13879 14511 14178 14190 14339 14025 29543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80582.7,      402914,     362930,      39984,     286467,      76463, 1696.061873, 2269.300000, 3083.900000, 4446.400000, 654.245505, 516.012013, 5564.252853, 616.804348
Outstanding requests per worker:
20678 20231 20973 20477 20652 20783 20539 36140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80375.1,      401876,     361608,      40268,     290627,      70981, 2270.046623, 2947.000000, 3716.300000, 4976.000000, 692.867365, 939.657986, 6440.067768, 633.641916
Outstanding requests per worker:
27186 26797 27429 27330 27123 27537 26978 42799 
count  388240
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79974.3,      399872,     359461,      40411,     293620,      65841, 2863.142713, 3642.700000, 4269.900000, 6000.000000, 727.369828, 1305.073023, 7273.167133, 647.065426
Outstanding requests per worker:
34040 33647 34087 34335 34127 34282 33900 49476 
count  380103
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79899.3,      399497,     359536,      39961,     297031,      62505, 3462.206118, 4286.600000, 4958.100000, 7000.000000, 755.023109, 1873.942018, 7881.909847, 657.675059
Outstanding requests per worker:
40690 40655 41022 41264 41105 41113 40708 56433 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:22   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:22   0:00 /usr/lib/linux
memcache      7  140  0.0 248256 115904 pts/0   Sl+  12:22   1:07 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10163329637      instructions:u                                              

      47.851206007 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1750856192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
num_worker_connections 64
Creating worker on tid 2477191680
starting receive base loop
Created 512 connections total
Creating worker on tid 1881272832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809366.807791,       0.0,      256913,     231023,      25890,     150825,      80198,  74.192268, 171.600000, 221.800000, 955.700000, 160.876829,   0.000000, 1984.483957, 466.670587
Outstanding requests per worker:
1897 2001 2090 1938 1938 2058 3211 21135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80826.7,      404134,     363821,      40313,     266147,      97674, 736.108025, 1424.100000, 2596.100000, 3917.600000, 738.701961,   0.941000, 4687.313080, 553.730249
Outstanding requests per worker:
10287 10197 10364 10184 10309 10420 11219 35392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81238.5,      406193,     365795,      40398,     280727,      85068, 1496.368810, 2437.200000, 3620.500000, 4709.200000, 827.275870, 401.881009, 5600.001812, 592.254604
Outstanding requests per worker:
18948 19036 19483 18799 18915 19058 19801 44382 
count  391657
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80704.9,      403525,     363452,      40073,     286412,      77040, 2247.959180, 3211.700000, 4394.900000, 6000.000000, 855.902349, 887.863994, 6150.627136, 616.006397
Outstanding requests per worker:
27985 28301 28269 27948 28031 27921 29095 53609 
count  379733
count  379733
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80476.3,      402382,     362437,      39945,     291748,      70689, 3018.111767, 3980.300000, 6000.000000, 7000.000000, 870.681352, 1462.921023, 7120.563030, 634.387985
Outstanding requests per worker:
37337 37611 37584 37204 37164 37208 38160 62750 
count  364454
count  364454
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80189.7,      400949,     360938,      40011,     294554,      66384, 3798.604532, 4791.000000, 6000.000000, 8000.000000, 897.097040, 2119.338989, 7974.750996, 646.432839
Outstanding requests per worker:
46768 47139 46883 46559 46719 46483 47682 72077 
count  322817
count  322817
count  322817
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80166.9,      400835,     360607,      40228,     297729,      62878, 4590.988616, 6000.000000, 7000.000000, 8000.000000, 927.716533, 2803.574085, 8667.157173, 657.222114
Outstanding requests per worker:
56154 56488 56182 56010 56359 55970 57074 81493 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:22   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:22   0:00 /usr/lib/linux
memcache      7  143  0.0 249280 112448 pts/0   Sl+  12:22   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10208175029      instructions:u                                              

      47.831036668 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2195649024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809417.807842,       0.0,      260060,     233991,      26069,     152495,      81496,  87.664533, 217.000000, 279.900000, 1010.900000, 172.171668,   0.000000, 1976.848960, 465.243672
Outstanding requests per worker:
2736 2698 2659 2647 2626 2746 7096 23904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80226.9,      401135,     360717,      40418,     264494,      96223, 913.546781, 1813.600000, 3064.400000, 4656.700000, 886.564588,   1.096000, 5555.058002, 554.770549
Outstanding requests per worker:
13704 13825 13872 13681 13506 13418 17584 46419 
count  392231
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80648.9,      403245,     363148,      40097,     278664,      84484, 1923.836498, 3240.200000, 4387.200000, 6000.000000, 981.978412, 572.906017, 6527.091026, 592.274260
Outstanding requests per worker:
25684 25872 26014 25564 25682 25637 29765 58595 
count  374002
count  374002
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80205.5,      401028,     360841,      40187,     284856,      75985, 2919.416850, 4258.000000, 6000.000000, 7000.000000, 1024.115793, 1138.353944, 7772.385120, 616.870649
Outstanding requests per worker:
38077 38306 38300 38100 37754 38096 42064 71152 
count  354009
count  354009
count  354009
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79815.3,      399077,     359212,      39865,     288822,      70390, 3918.629356, 6000.000000, 7000.000000, 8000.000000, 1045.661999, 1798.756957, 8697.170258, 633.479647
Outstanding requests per worker:
50669 51001 51009 50448 50528 50545 54858 83786 
count  265410
count  265410
count  265410
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79651.1,      398256,     358504,      39752,     292845,      65659, 4932.763980, 7000.000000, 8000.000000, 9000.000000, 1062.879335, 2766.148090, 9667.251587, 646.900643
Outstanding requests per worker:
63228 63810 63875 63120 63616 63316 67442 96218 
count  51667
count  51667
count  51667
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79423.7,      397119,     357389,      39730,     295240,      62149, 5952.256110, 8000.000000, 9000.000000, 10000.000000, 1084.129650, 3613.894939, 10813.021660, 657.416417
Outstanding requests per worker:
75970 76485 76548 76044 76360 76292 80548 109319 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:23   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:23   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 111680 pts/0   Sl+  12:23   1:07 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10152951608      instructions:u                                              

      48.201243203 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1655763456
starting receive base loop
num_worker_connections 64
Creating worker on tid 1059844608
starting receive base loop
num_worker_connections 64
Creating worker on tid 463925760
starting receive base loop
num_worker_connections 64
Creating worker on tid 4162974208
starting receive base loop
num_worker_connections 64
Creating worker on tid 3567055360
starting receive base loop
num_worker_connections 64
Creating worker on tid 2971136512
starting receive base loop
num_worker_connections 64
Creating worker on tid 2377839104
starting receive base loop
Created 512 connections total
Creating worker on tid 1781920256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809469.807894,       0.0,      267455,     240466,      26989,     157364,      83102,  84.266836, 191.200000, 249.700000, 1046.700000, 176.631784,   0.000000, 2094.383001, 468.550577
Outstanding requests per worker:
2623 2606 2487 2656 2633 2602 14884 26318 
count  392726
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80653.7,      403269,     363087,      40182,     266065,      97022, 1010.055851, 2275.400000, 4139.100000, 6000.000000, 1133.065680,   2.326000, 6232.585907, 555.168312
Outstanding requests per worker:
14988 15249 14827 15179 14832 14831 27202 62824 
count  379900
count  379900
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80639.9,      403200,     362945,      40255,     278648,      84297, 2232.502284, 4159.600000, 6000.000000, 7000.000000, 1203.237080, 605.845988, 7296.810150, 593.076474
Outstanding requests per worker:
30339 30422 30442 30412 30296 30440 42550 78200 
count  347778
count  347778
count  347778
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80289.1,      401446,     361636,      39810,     285420,      76216, 3460.161384, 6000.000000, 7000.000000, 8000.000000, 1298.459882, 1700.533986, 8739.286423, 617.717459
Outstanding requests per worker:
46003 46243 46038 46118 45790 46190 58137 93515 
count  316239
count  316239
count  316239
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80020.5,      400103,     360267,      39836,     289938,      70329, 4658.597416, 7000.000000, 8000.000000, 10000.000000, 1331.665597, 2675.312042, 9974.740028, 633.462854
Outstanding requests per worker:
61854 61946 61817 61746 61817 61938 73927 109285 
count  91712
count  91712
count  91712
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79837.5,      399188,     359420,      39768,     293424,      65996, 5862.904287, 9000.000000, 10000.000000, 11000.000000, 1347.498157, 3707.539082, 11386.831284, 646.827992
Outstanding requests per worker:
78017 77457 77777 77716 77788 77841 89656 125300 
count  310
count  310
count  310
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79517.1,      397586,     357902,      39684,     295272,      62630, 7080.751434, 10000.000000, 11000.000000, 12000.000000, 1365.278538, 4740.701199, 12698.882103, 656.403096
Outstanding requests per worker:
94174 93676 93689 93711 93887 94225 105767 141202 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:24   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:24   0:00 /usr/lib/linux
memcache      8  144  0.0 248256 113280 pts/0   Sl+  12:24   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10156847228      instructions:u                                              

      47.779591342 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2490954240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1897394688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
Created 512 connections total
Creating worker on tid 2619470336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809520.807945,       0.0,      277227,     249291,      27936,     163535,      85756,  96.165354, 219.800000, 277.300000, 1095.300000, 182.571668,   0.000000, 2089.215994, 469.688962
Outstanding requests per worker:
3581 3303 3229 3417 3188 3369 19720 27780 
count  386316
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79746.5,      398733,     359101,      39632,     263257,      95844, 1043.496950, 1978.100000, 3053.800000, 7000.000000, 1116.956696,  26.237000, 6666.964054, 555.524173
Outstanding requests per worker:
17693 17699 17444 17467 17641 17695 35650 51747 
count  375673
count  375673
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   82373.7,      411869,     370542,      41327,     284870,      85672, 2577.934179, 4728.600000, 6000.000000, 7000.000000, 1329.061510, 840.305984, 8334.141731, 594.198998
Outstanding requests per worker:
37104 37053 36948 36963 36900 37198 54899 91148 
count  337463
count  337463
count  337463
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79496.3,      397482,     357716,      39766,     283139,      74577, 3872.347645, 6000.000000, 7000.000000, 8000.000000, 1169.442895, 2040.817022, 8743.947029, 620.106492
Outstanding requests per worker:
56624 56437 56408 56266 56437 56837 74190 109901 
count  202121
count  202121
count  202121
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79793.9,      398970,     359008,      39962,     289613,      69395, 5447.295445, 9000.000000, 9000.000000, 10000.000000, 1460.571995, 3256.438971, 11345.243454, 636.031977
Outstanding requests per worker:
76489 76169 76305 76148 76210 76793 94303 130596 
count  1193
count  1193
count  1193
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79358.3,      396792,     356909,      39883,     291293,      65616, 6851.447020, 10000.000000, 11000.000000, 12000.000000, 1458.548674, 4712.825775, 12975.435257, 647.185644
Outstanding requests per worker:
96531 95951 96114 95949 96151 96471 114184 150516 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78490.1,      392451,     353138,      39313,     292509,      60629, 8292.994971, 11000.000000, 12000.000000, 13000.000000, 1454.750308, 5802.365780, 14228.835106, 659.232068
Outstanding requests per worker:
116796 116547 116587 116382 116462 116726 134520 170993 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:25   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:25   0:00 /usr/lib/linux
memcache      7  142  0.0 250304 115840 pts/0   Sl+  12:25   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10185246395      instructions:u                                              

      47.990369967 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2471948800
starting receive base loop
num_worker_connections 64
Creating worker on tid 1873211904
starting receive base loop
num_worker_connections 64
Creating worker on tid 1277293056
starting receive base loop
num_worker_connections 64
Creating worker on tid 681374208
starting receive base loop
num_worker_connections 64
Creating worker on tid 85455360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3787125248
starting receive base loop
num_worker_connections 64
Creating worker on tid 3191206400
starting receive base loop
Created 512 connections total
Creating worker on tid 2595287552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809572.807997,       0.0,      277981,     250103,      27878,     163793,      86310,  94.423352, 200.900000, 303.000000, 1132.000000, 195.111778,   0.000000, 2106.484890, 469.055377
Outstanding requests per worker:
2969 2939 3010 2906 2910 6607 29064 28986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78215.3,      391077,     352240,      38837,     258654,      93586, 990.783959, 2208.000000, 3309.800000, 4378.100000, 919.121783,  38.524002, 6026.248932, 556.142471
Outstanding requests per worker:
18354 18575 18462 18360 18397 21930 53121 50462 
count  347720
count  347720
count  347720
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81819.3,      409097,     367802,      41295,     282731,      85071, 2988.730566, 7000.000000, 8000.000000, 9000.000000, 1862.013471, 772.428989, 9577.822685, 594.708900
Outstanding requests per worker:
40888 41151 40935 40583 40792 44305 75687 104592 
count  317446
count  317446
count  317446
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79416.7,      397084,     357362,      39722,     282542,      74820, 4224.170381, 7000.000000, 7000.000000, 8000.000000, 1221.784401, 1850.759983, 9951.065063, 617.461137
Outstanding requests per worker:
63842 63999 63669 63601 63848 67381 98485 136645 
count  107269
count  107269
count  107269
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78571.5,      392858,     353495,      39363,     284525,      68970, 5997.353534, 9000.000000, 10000.000000, 11000.000000, 1508.361023, 3575.086117, 11181.158066, 634.298711
Outstanding requests per worker:
86941 87317 87372 86814 87330 90735 121836 160075 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78282.7,      391414,     352571,      38843,     287621,      64950, 7752.535840, 11000.000000, 12000.000000, 13000.000000, 1798.079644, 5014.939785, 14271.916389, 647.039291
Outstanding requests per worker:
110479 110965 110775 110349 110911 114466 145496 183327 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77255.5,      386278,     347805,      38473,     287191,      60614, 9418.290599, 13000.000000, 14000.000000, 15000.000000, 1858.361532, 6661.980152, 16004.619598, 658.178911
Outstanding requests per worker:
134584 135125 134962 134489 135075 138651 169518 207661 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:26   0:00 /usr/lib/linux
memcache      7  145  0.0 248256 113728 pts/0   Sl+  12:26   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10068443705      instructions:u                                              

      47.580911191 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2038821376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
num_worker_connections 64
Creating worker on tid 2761748992
starting receive base loop
Created 512 connections total
Creating worker on tid 2165830144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809623.808048,       0.0,       36363,      32723,       3640,      18649,      14074,   1.853414,   0.120100,   0.129000,  87.600000,  14.365028,   0.000000, 195.225999, 377.691257
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54071,       5993,      33936,      20135,   0.092022,   0.118100,   0.125100,   0.241100,   0.029583,   0.061000,   0.725000, 441.383625
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54083,       5981,      36081,      18002,   0.092476,   0.108100,   0.124100,   0.283100,   0.034946,   0.062000,   0.743000, 480.516632
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53972,       6092,      37023,      16949,   0.092378,   0.108100,   0.124100,   0.281000,   0.034536,   0.065000,   0.655000, 503.013581
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54011,       6053,      37725,      16286,   0.093019,   0.109100,   0.124100,   0.299100,   0.036606,   0.067000,   0.848000, 515.918202
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      54029,       6033,      38345,      15684,   0.092463,   0.112100,   0.124100,   0.280100,   0.034417,   0.069000,   0.706000, 531.453886
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54148,       5916,      39045,      15103,   0.092748,   0.108100,   0.124100,   0.290100,   0.036012,   0.067000,   0.869000, 541.211882
Outstanding requests per worker:
1 0 1 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:27   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:27   0:00 /usr/lib/linux
memcache      7 34.4  0.0 181696 31104 pts/0    Sl+  12:27   0:16 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        1531725050      instructions:u                                              

      47.710302271 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1896804864
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809674.808099,       0.0,      285892,     257295,      28597,     169332,      87963, 123.243418, 265.600000, 516.300000, 1149.500000, 214.640486,   0.000000, 2098.934889, 472.378647
Outstanding requests per worker:
3825 3794 3768 3828 4829 14428 32981 31250 
count  394017
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79762.5,      398813,     359142,      39671,     263834,      95308, 1198.727821, 2735.200000, 4246.000000, 6000.000000, 1131.683285,  42.831998, 6006.227970, 556.004692
Outstanding requests per worker:
22333 22791 22329 22421 23328 33296 69970 52887 
count  334089
count  334089
count  334089
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80695.9,      403480,     363012,      40468,     279050,      83962, 3363.024929, 8000.000000, 9000.000000, 10000.000000, 1998.242236, 950.571001, 10167.510033, 594.035013
Outstanding requests per worker:
50154 50594 50225 50340 51222 60857 97616 96801 
count  266922
count  266922
count  266922
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77456.1,      387281,     348199,      39082,     275202,      72997, 4844.782105, 7000.000000, 8000.000000, 10000.000000, 1368.956592, 2670.351982, 11699.107170, 617.791585
Outstanding requests per worker:
79474 79937 79275 79730 80733 90419 126634 156213 
count  8367
count  8367
count  8367
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78707.5,      393538,     354383,      39155,     285811,      68572, 6943.855123, 10000.000000, 11000.000000, 11000.000000, 1553.800411, 4388.310909, 11805.989265, 634.812824
Outstanding requests per worker:
108886 109150 108412 108914 109920 119401 154943 155038 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74085.5,      370428,     333423,      37005,     272525,      60898, 8735.397394, 12000.000000, 12000.000000, 13000.000000, 1457.918743, 6170.411110, 13628.620148, 647.427337
Outstanding requests per worker:
139216 139623 138980 139394 140523 150026 186230 214096 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76511.1,      382556,     344394,      38162,     283745,      60649, 10972.992515, 15000.000000, 16000.000000, 17000.000000, 1893.339985, 8026.475906, 16627.334595, 654.781463
Outstanding requests per worker:
169459 169949 169271 169711 170913 180226 199943 222369 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:28   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 113344 pts/0   Sl+  12:28   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10047361783      instructions:u                                              

      47.651378400 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1619128832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809725.808150,       0.0,      287128,     258462,      28666,     169234,      89228, 149.126628, 323.800000, 657.500000, 1176.700000, 237.060594,   0.000000, 2091.717005, 469.531003
Outstanding requests per worker:
4663 4565 4584 4522 7289 19973 34789 32788 
count  392517
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80635.7,      403179,     362955,      40224,     265916,      97039, 1341.236907, 2931.600000, 4737.300000, 6000.000000, 1217.915286, 100.616001, 6141.726971, 555.008742
Outstanding requests per worker:
25794 25693 25674 25845 28286 40951 78774 52701 
count  332883
count  332883
count  332883
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80626.1,      403131,     362926,      40205,     278558,      84368, 3578.500727, 8000.000000, 9000.000000, 10000.000000, 2016.421258, 1161.767960, 10292.239189, 592.922965
Outstanding requests per worker:
57156 57274 56871 57133 59737 72412 110358 92519 
count  209062
count  209062
count  209062
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77485.1,      387426,     348655,      38771,     275396,      73259, 5172.669606, 8000.000000, 9000.000000, 11000.000000, 1389.019191, 2783.960104, 11827.943802, 617.796346
Outstanding requests per worker:
90289 90547 90143 90226 93116 105750 143540 152672 
count  251
count  251
count  251
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76643.5,      383218,     344498,      38720,     276705,      67793, 7364.140253, 10000.000000, 11000.000000, 12000.000000, 1433.461781, 4871.047020, 12299.047470, 633.181003
Outstanding requests per worker:
122868 122702 123647 123106 126394 137927 176752 156486 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76298.3,      381492,     343286,      38206,     280260,      63026, 9529.393185, 12000.000000, 13000.000000, 14000.000000, 1527.549517, 6564.554214, 14424.527168, 647.089969
Outstanding requests per worker:
156492 159011 158065 158176 159966 173649 210330 198434 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73570.3,      367852,     331344,      36508,     273131,      58213, 11734.166094, 15000.000000, 16000.000000, 17000.000000, 1713.054749, 8760.298729, 17306.823730, 655.873591
Outstanding requests per worker:
193539 193809 193459 192832 193110 208921 223402 226959 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:28   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 112832 pts/0   Sl+  12:28   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9990492341      instructions:u                                              

      47.785302779 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2462839296
starting receive base loop
num_worker_connections 64
Creating worker on tid 1865150976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
Created 512 connections total
Creating worker on tid 2587226624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809777.808202,       0.0,      296229,     266855,      29374,     175516,      91339, 164.802250, 375.600000, 730.400000, 1247.600000, 254.574204,   0.000000, 2071.353912, 472.335868
Outstanding requests per worker:
5285 5228 5239 5129 9136 22664 35798 33899 
count  388667
count  388667
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81956.9,      409785,     369221,      40564,     271870,      97351, 1419.362150, 2994.800000, 6000.000000, 6000.000000, 1269.616784, 137.462005, 6184.539795, 558.807430
Outstanding requests per worker:
27732 27816 27687 27439 31654 45739 69846 51425 
count  333187
count  333187
count  333187
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81027.5,      405138,     364818,      40320,     280848,      83970, 3727.816908, 9000.000000, 9000.000000, 10000.000000, 2054.460302, 1177.492023, 10391.352654, 595.313537
Outstanding requests per worker:
61550 61702 61602 61442 65334 79489 117475 83517 
count  187205
count  187205
count  187205
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77923.1,      389616,     350855,      38761,     277713,      73142, 5277.933958, 8000.000000, 9000.000000, 10000.000000, 1329.982153, 2517.395020, 11726.553917, 619.633168
Outstanding requests per worker:
97155 97368 97366 97083 101126 115248 153486 177074 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76328.1,      381641,     343301,      38340,     276564,      66737, 7576.909658, 10000.000000, 11000.000000, 12000.000000, 1342.894043, 5104.061127, 12161.224365, 634.921955
Outstanding requests per worker:
130658 134107 133956 134017 135153 151957 190115 211548 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74842.3,      374212,     336773,      37439,     274700,      62073, 9861.375751, 13000.000000, 13000.000000, 14000.000000, 1424.561595, 7158.411026, 14866.794586, 645.921365
Outstanding requests per worker:
170155 171532 171652 169419 173848 189584 227649 239063 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76354.5,      381773,     343657,      38116,     283891,      59766, 12227.224192, 15000.000000, 16000.000000, 17000.000000, 1613.249337, 9182.146072, 17642.385483, 657.750245
Outstanding requests per worker:
206821 208675 208666 209042 213134 227163 252977 257575 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:29   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:29   0:00 /usr/lib/linux
memcache      7  145  0.0 248256 114368 pts/0   Sl+  12:29   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10093785896      instructions:u                                              

      47.921237860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2378691072
starting receive base loop
num_worker_connections 64
Creating worker on tid 1781920256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
Created 512 connections total
Creating worker on tid 2501374464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809828.808253,       0.0,      292742,     263525,      29217,     173082,      90443, 185.216759, 425.000000, 912.500000, 1432.100000, 296.481298,   0.000000, 2095.292091, 471.583964
Outstanding requests per worker:
5638 5463 5591 5583 12480 27683 37053 35088 
count  380190
count  380190
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81596.3,      407982,     367423,      40559,     270303,      97120, 1513.841325, 3117.500000, 6000.000000, 6000.000000, 1312.431752, 132.343993, 6428.434849, 558.359286
Outstanding requests per worker:
30357 30339 30198 30245 37100 54305 65082 54690 
count  320972
count  320972
count  320972
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78876.5,      394383,     355042,      39341,     273346,      81696, 3849.436720, 8000.000000, 9000.000000, 10000.000000, 1984.525059, 1334.239006, 10930.401802, 595.623118
Outstanding requests per worker:
67204 67233 67311 67024 73907 91067 129326 93296 
count  142167
count  142167
count  142167
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78390.9,      391955,     352771,      39184,     278565,      74206, 5678.885255, 8000.000000, 9000.000000, 11000.000000, 1493.809754, 2786.250114, 12963.866234, 617.882697
Outstanding requests per worker:
106613 106274 106492 106345 113307 128685 168952 155321 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71544.3,      357722,     321963,      35759,     258733,      63230, 7920.613892, 10000.000000, 11000.000000, 12000.000000, 1190.089906, 5337.068081, 11941.795349, 633.528846
Outstanding requests per worker:
143040 145717 145357 144254 151429 166894 200493 156091 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76230.7,      381154,     342823,      38331,     279726,      63097, 10438.566209, 13000.000000, 14000.000000, 15000.000000, 1433.056723, 7655.382156, 15728.321075, 646.265020
Outstanding requests per worker:
186965 186482 187358 187723 194511 210607 242046 194303 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74975.7,      374879,     337054,      37825,     277543,      59511, 12917.470280, 16000.000000, 17000.000000, 18000.000000, 1617.155543, 9932.087898, 18692.859650, 654.586660
Outstanding requests per worker:
229083 225548 228350 228669 235522 253217 257553 209476 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:30   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:30   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 111488 pts/0   Sl+  12:30   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9975414010      instructions:u                                              

      48.350558738 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1623585280
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809880.808305,       0.0,      296307,     266929,      29378,     176027,      90902, 206.164865, 469.200000, 1049.400000, 1599.100000, 327.646618,   0.000000, 2098.346949, 474.279183
Outstanding requests per worker:
6348 6349 6169 6243 16372 31066 38406 36367 
count  381769
count  381769
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   82097.7,      410489,     369603,      40886,     271576,      98027, 1613.428209, 3195.500000, 6000.000000, 6000.000000, 1348.937217, 143.969998, 6633.590221, 556.877401
Outstanding requests per worker:
33004 33376 33031 33100 43436 60723 63603 53479 
count  310133
count  310133
count  310133
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79184.9,      395925,     356564,      39361,     274139,      82425, 4068.641431, 8000.000000, 10000.000000, 10000.000000, 2043.372115, 1446.802974, 10430.326462, 594.132142
Outstanding requests per worker:
72718 73199 72758 73136 83485 100579 122350 87230 
count  112271
count  112271
count  112271
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75534.7,      377674,     339889,      37785,     268972,      70917, 5845.049448, 8000.000000, 9000.000000, 12000.000000, 1534.168682, 2414.800882, 12800.258636, 619.262006
Outstanding requests per worker:
115256 114486 114123 115475 125316 134823 156926 146290 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74770.5,      373853,     336418,      37435,     270854,      65564, 8332.126701, 11000.000000, 11000.000000, 12000.000000, 1302.407337, 5630.195141, 12955.959320, 634.570062
Outstanding requests per worker:
154122 153837 153474 151902 160420 175982 188798 148568 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75017.3,      375087,     337223,      37864,     275003,      62220, 10735.036749, 13000.000000, 14000.000000, 15000.000000, 1309.400028, 8032.826424, 15225.107193, 646.082491
Outstanding requests per worker:
203240 196543 203590 198408 210958 231532 248741 185597 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68804.7,      344024,     309357,      34667,     255057,      54300, 13274.916647, 16000.000000, 17000.000000, 18000.000000, 1427.424630, 10305.409431, 18241.027832, 656.470605
Outstanding requests per worker:
248524 240932 241234 241418 259715 276970 250748 223189 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:31   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:31   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 112960 pts/0   Sl+  12:31   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9929369479      instructions:u                                              

      47.880444835 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2424238592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809932.808357,       0.0,      301364,     271152,      30212,     179436,      91716, 228.357334, 526.500000, 1148.200000, 1766.600000, 363.046852,   0.000000, 2160.252094, 476.728717
Outstanding requests per worker:
7374 7253 7382 7279 21553 35055 40421 37737 
count  384745
count  384745
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81259.9,      406300,     365622,      40678,     269384,      96238, 1713.621628, 3263.800000, 6000.000000, 7000.000000, 1331.186981, 184.863999, 6745.986938, 560.115967
Outstanding requests per worker:
37139 37109 36888 37184 51444 69269 55365 51291 
count  297718
count  297718
count  297718
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78072.3,      390362,     351679,      38683,     270656,      81023, 4289.766385, 9000.000000, 10000.000000, 10000.000000, 2141.094187, 1540.204048, 10920.785904, 595.514270
Outstanding requests per worker:
80023 79971 80128 80279 94440 112045 120588 80873 
count  92362
count  92362
count  92362
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77701.3,      388507,     349622,      38885,     276366,      73256, 6052.174230, 8000.000000, 9000.000000, 12000.000000, 1514.687534, 2819.356918, 12904.435158, 618.209483
Outstanding requests per worker:
121356 121693 123810 126333 134212 156652 147631 139429 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70780.9,      353905,     318477,      35428,     256256,      62221, 8582.551561, 11000.000000, 11000.000000, 12000.000000, 1210.299343, 5482.829094, 12424.411774, 633.391181
Outstanding requests per worker:
164704 162225 163064 166206 172325 183043 193748 187350 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75040.3,      375202,     337592,      37610,     275385,      62207, 11152.648182, 13000.000000, 14000.000000, 15000.000000, 1265.277540, 8084.515572, 15943.670273, 646.826702
Outstanding requests per worker:
223403 222982 218589 219529 234462 240567 247056 254147 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68478.3,      342392,     308151,      34241,     254050,      54101, 13587.570372, 16000.000000, 16000.000000, 17000.000000, 1084.620371, 10883.901596, 17090.063095, 655.955330
Outstanding requests per worker:
269907 269238 270032 269856 271987 297411 260105 268004 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   12:32   0:00 /usr/lib/linux
memcache      7  139  0.0 248256 110592 pts/0   Sl+  12:32   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9899531040      instructions:u                                              

      48.250612709 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2189947392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575809983.808408,       0.0,      298449,     268682,      29767,     177232,      91450, 246.420759, 531.700000, 1210.900000, 1883.900000, 381.802335,   0.000000, 2321.219921, 474.790574
Outstanding requests per worker:
8201 7936 8102 8318 25958 37267 41025 39219 
count  387610
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81433.5,      407168,     366271,      40897,     269890,      96381, 1776.116614, 3299.700000, 4646.700000, 7000.000000, 1315.895872, 199.109003, 6914.502144, 559.795070
Outstanding requests per worker:
40685 40404 40226 40614 58640 74173 57797 53651 
count  290222
count  290222
count  290222
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79128.3,      395642,     356383,      39259,     274577,      81806, 4470.838159, 8000.000000, 10000.000000, 10000.000000, 2067.694174, 1613.103032, 10903.158188, 596.862449
Outstanding requests per worker:
87814 87232 86988 87708 105700 122688 137188 86445 
count  58081
count  58081
count  58081
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74876.9,      374385,     336985,      37400,     266420,      70565, 6432.149352, 9000.000000, 10000.000000, 12000.000000, 1574.084536, 2642.477989, 13032.006264, 618.644400
Outstanding requests per worker:
132891 131925 132794 135365 150844 156082 182055 140448 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68419.7,      342099,     307698,      34401,     247332,      60366, 8894.825749, 11000.000000, 12000.000000, 12000.000000, 1232.558642, 5649.164200, 12382.231712, 633.256888
Outstanding requests per worker:
171907 178886 171735 175669 197210 190189 202251 164252 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80171.9,      400860,     361123,      39737,     294454,      66669, 11631.942027, 14000.000000, 15000.000000, 16000.000000, 1358.498887, 8486.978531, 16051.263809, 645.947259
Outstanding requests per worker:
225491 238796 216190 232337 259388 190065 230743 208973 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70203.1,      351016,     315657,      35359,     259803,      55854, 14234.538694, 17000.000000, 18000.000000, 19000.000000, 1368.236762, 11361.318588, 18744.716644, 654.744029
Outstanding requests per worker:
294387 293400 286657 276719 312282 221103 231723 228670 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:33   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   12:33   0:00 /usr/lib/linux
memcache      7  141  0.0 247232 109760 pts/0   Sl+  12:33   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9884782806      instructions:u                                              

      47.840960455 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2619273728
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575810035.808460,       0.0,      304792,     274188,      30604,     180910,      93278, 254.994098, 561.400000, 1285.500000, 2000.900000, 407.472177,   0.000000, 2496.714115, 474.544229
Outstanding requests per worker:
8551 8934 8472 8684 30092 40562 43243 40003 
count  386902
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79899.3,      399497,     359666,      39831,     264669,      94997, 1814.306849, 3441.900000, 4063.300000, 7000.000000, 1268.089152, 215.913996, 7034.667969, 558.859625
Outstanding requests per worker:
43063 42676 42624 43186 64480 82192 53140 52630 
count  282264
count  282264
count  282264
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79110.1,      395551,     356004,      39547,     273940,      82064, 4614.672064, 9000.000000, 10000.000000, 11000.000000, 2141.136811, 1751.320004, 11152.301788, 595.267893
Outstanding requests per worker:
91925 91583 91475 91892 113344 112706 122708 91387 
count  52545
count  52545
count  52545
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73242.9,      366215,     329791,      36424,     260596,      69195, 6566.880729, 9000.000000, 10000.000000, 12000.000000, 1646.183526, 2687.861919, 13908.159256, 617.522246
Outstanding requests per worker:
136679 131071 135184 140719 155202 157217 214709 161693 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69642.1,      348211,     313184,      35027,     251392,      61792, 9067.729976, 11000.000000, 12000.000000, 12000.000000, 1180.561759, 5596.231937, 12748.018265, 632.203091
Outstanding requests per worker:
181908 174537 172834 180969 220025 224077 236238 183577 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76792.3,      383962,     345488,      38474,     281594,      63894, 11837.072467, 14000.000000, 14000.000000, 15000.000000, 1203.793169, 8711.484909, 15437.820435, 645.191460
Outstanding requests per worker:
254205 221085 240722 254021 275478 234150 278585 209245 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70409.1,      352046,     316410,      35636,     260490,      55920, 14556.422466, 17000.000000, 17000.000000, 18000.000000, 1270.388221, 11628.623962, 18456.769943, 654.920701
Outstanding requests per worker:
309921 304569 309551 309665 331256 265929 288759 223359 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:34   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   12:34   0:00 /usr/lib/linux
memcache      8  141  0.0 246208 110272 pts/0   Sl+  12:34   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9765824369      instructions:u                                              

      47.660348768 seconds time elapsed

