+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2505110016
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575812909.811334,       0.0,       76358,      68583,       7775,      41196,      27387,   0.590674,   0.213100,   0.375100,   1.200000,   5.847089,   0.000000, 127.102003, 408.437718
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112567,      12442,      74988,      37579,   0.118331,   0.214100,   0.364100,   0.464100,   0.085280,   0.058000,   0.825000, 481.948386
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112536,      12474,      78832,      33704,   0.117800,   0.213100,   0.363100,   0.456100,   0.084288,   0.061000,   0.945000, 520.322981
Outstanding requests per worker:
0 1 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.4,      125012,     112605,      12407,      81625,      30980,   0.118639,   0.215100,   0.365100,   0.464100,   0.086090,   0.059000,   1.030000, 546.128715
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25003.0,      125015,     112655,      12360,      83549,      29106,   0.118338,   0.215100,   0.364100,   0.459100,   0.085144,   0.060000,   1.002000, 563.202468
Outstanding requests per worker:
0 0 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112512,      12495,      84485,      28027,   0.119012,   0.217100,   0.365100,   0.466100,   0.086331,   0.067000,   1.212000, 574.856380
Outstanding requests per worker:
0 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112540,      12470,      85703,      26837,   0.117963,   0.213100,   0.362100,   0.454100,   0.083355,   0.067000,   0.718000, 585.091372
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:21   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:21   0:00 /usr/lib/linux
memcache     10 62.2  0.0 123328 44800 pts/0    Sl+  13:21   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3178565096      instructions:u                                              

      47.599703162 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2381574656
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575812960.811385,       0.0,       90813,      81717,       9096,      49368,      32349,   0.854153,   0.432100,   2.900000,   5.700000,   6.205161,   0.000000, 171.500996, 413.759463
Outstanding requests per worker:
0 1 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.2,      150396,     135211,      15185,      90972,      44239,   0.168956,   0.327000,   0.375100,   0.460100,   0.095489,   0.066000,   0.881000, 490.832107
Outstanding requests per worker:
1 1 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135421,      14965,      96512,      38909,   0.169019,   0.327000,   0.374100,   0.460100,   0.095570,   0.063000,   1.312000, 533.139077
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135399,      14990,      99600,      35799,   0.172535,   0.328100,   0.379100,   0.466100,   0.098354,   0.068000,   1.220000, 558.063560
Outstanding requests per worker:
0 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135247,      15144,     101426,      33821,   0.172686,   0.328100,   0.378100,   0.467100,   0.098509,   0.067000,   1.100000, 574.273145
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135419,      14975,     103208,      32211,   0.174356,   0.329100,   0.379100,   0.467100,   0.100717,   0.064000,   1.238000, 587.177560
Outstanding requests per worker:
0 1 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135352,      15033,     104302,      31050,   0.176707,   0.332100,   0.387100,   0.477100,   0.105802,   0.068000,   1.480000, 597.181527
Outstanding requests per worker:
0 1 0 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:22   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   13:22   0:00 /usr/lib/linux
memcache      9 67.2  0.0 129472 53952 pts/0    Sl+  13:22   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3647730698      instructions:u                                              

      47.461301417 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2384589312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
Creating worker on tid 3105354240
num_worker_connections 64
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813012.811437,       0.0,      105086,      94531,      10555,      57709,      36822,  34.736133,  55.300000,  80.500000, 656.800000, 121.083980,   0.000000, 1953.348994, 421.461997
Outstanding requests per worker:
161 168 170 184 162 189 180 988 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35381.4,      176907,     159244,      17663,     109034,      50210,  28.502471,  44.600000,  52.200000, 104.000000,  77.868568,   0.098000, 2163.201094, 501.441963
Outstanding requests per worker:
84 97 91 92 96 98 92 101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.6,      175458,     158032,      17426,     113907,      44125,  21.504238,  43.700000,  46.200000,  48.500000,  13.472194,   0.121000,  53.413000, 541.827908
Outstanding requests per worker:
97 90 98 92 96 82 103 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35083.8,      175419,     157829,      17590,     117357,      40472,  22.164129,  45.300000,  48.200000,  50.700000,  13.951381,   0.098000,  54.336999, 565.798142
Outstanding requests per worker:
92 81 104 104 94 105 94 108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.4,      175447,     158093,      17354,     119697,      38396,  22.604820,  46.300000,  49.500000,  52.100000,  14.264747,   0.105000,  54.830000, 581.190995
Outstanding requests per worker:
101 105 94 96 98 96 104 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35079.6,      175398,     157873,      17525,     121798,      36075,  23.894334,  49.000000,  53.100000,  57.400000,  15.229874,   0.122000,  61.957002, 596.739766
Outstanding requests per worker:
111 110 113 101 95 114 101 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.6,      175453,     157964,      17489,     123176,      34788,  24.313262,  50.100000,  54.400000,  57.400000,  15.493576,   0.123000,  63.423000, 606.457098
Outstanding requests per worker:
95 103 116 112 119 100 107 99 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:23   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   13:23   0:00 /usr/lib/linux
memcache      9 70.7  0.0 132544 58368 pts/0    Sl+  13:23   0:33 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  13:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4246566216      instructions:u                                              

      47.539915536 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2540106240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1948381696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
Created 512 connections total
Creating worker on tid 2670457344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813063.811488,       0.0,      109858,      98956,      10902,      60265,      38691,  38.102443,  54.000000,  80.200000, 845.400000, 137.931292,   0.000000, 1907.528043, 420.679039
Outstanding requests per worker:
193 201 172 176 209 198 342 9796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37828.4,      189142,     170445,      18697,     116681,      53764, 237.480701, 235.300000, 1251.400000, 4237.900000, 712.778911,   0.278000, 6939.544201, 502.444431
Outstanding requests per worker:
731 757 746 696 669 732 668 17172 
count  182885
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38146.8,      190734,     171763,      18971,     123777,      47986, 663.014919, 610.700000, 4188.700000, 9000.000000, 1513.547444,   0.539000, 10248.350143, 543.221020
Outstanding requests per worker:
1940 2095 2088 2000 1943 2071 2033 17291 
count  184187
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38488.4,      192442,     173201,      19241,     129506,      43695, 912.578057, 898.400000, 4468.600000, 9000.000000, 1529.190716,   1.505000, 10726.272583, 570.899192
Outstanding requests per worker:
3104 3230 3011 3168 3138 3273 3154 16959 
count  186192
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38821.6,      194108,     174773,      19335,     133339,      41434, 1063.229306, 1126.600000, 3894.700000, 9000.000000, 1427.694912,  75.046003, 10833.108902, 587.797978
Outstanding requests per worker:
4122 3991 3878 4078 3966 4029 3806 17078 
count  186392
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38864.4,      194322,     175039,      19283,     135585,      39454, 1208.181376, 1359.600000, 3731.600000, 9000.000000, 1391.506830,  69.946997, 10631.180763, 600.989465
Outstanding requests per worker:
4900 4617 4736 4814 4863 4692 4769 17258 
count  186794
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38889.0,      194445,     175062,      19383,     137636,      37426, 1341.594369, 1575.300000, 3508.000000, 9000.000000, 1357.287013, 152.504995, 10461.377144, 613.378295
Outstanding requests per worker:
5471 5451 5550 5614 5454 5554 5426 17712 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:24   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   13:24   0:00 /usr/lib/linux
memcache      9 71.2  0.0 135616 76160 pts/0    Sl+  13:24   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4767068917      instructions:u                                              

      47.581591804 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2506158592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813114.811539,       0.0,      120402,     108428,      11974,      66706,      41722,  39.696198,  69.800000,  90.100000, 672.000000, 126.390505,   0.000000, 2117.651939, 426.292120
Outstanding requests per worker:
306 307 290 293 323 273 5911 11299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38584.2,      192921,     173839,      19082,     119665,      54174, 281.159169, 332.600000, 1400.700000, 4441.700000, 747.064036,   0.286000, 6898.165226, 506.448783
Outstanding requests per worker:
1288 1194 1316 1242 1268 1203 6096 38481 
count  183563
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37580.0,      187900,     169395,      18505,     122756,      46639, 680.992992, 792.200000, 2782.900000, 7000.000000, 1155.083285,   0.753000, 9772.489548, 546.367130
Outstanding requests per worker:
3485 3670 3372 3648 3481 3574 7203 49249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37039.8,      185199,     166450,      18749,     124879,      41571, 905.825952, 1168.200000, 1325.000000, 4039.800000, 561.780840,  84.016003, 12576.293945, 572.833421
Outstanding requests per worker:
5571 5340 5485 5542 5160 5319 8639 49286 
count  178308
count  178308
count  178308
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43403.8,      217019,     195353,      21666,     148871,      46482, 3652.236742, 15000.000000, 17000.000000, 18000.000000, 5210.276663, 203.093007, 19456.893921, 587.092039
Outstanding requests per worker:
8735 8568 8676 8767 8427 8572 11913 76359 
count  172910
count  172910
count  172910
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39271.2,      196356,     176785,      19571,     137271,      39514, 2964.671183, 6000.000000, 12000.000000, 19000.000000, 3335.640799, 485.680997, 19582.120895, 603.577458
Outstanding requests per worker:
12611 12203 12320 12394 12400 12178 15669 79901 
count  168698
count  168698
count  168698
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39222.0,      196110,     176531,      19579,     138842,      37689, 3594.154246, 10000.000000, 11000.000000, 13000.000000, 2860.963686, 998.874009, 19851.486206, 614.430610
Outstanding requests per worker:
16400 15845 16010 16187 16143 15886 19386 83725 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:25   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:25   0:00 /usr/lib/linux
memcache     10 70.1  0.0 137664 77568 pts/0    Sl+  13:25   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4856651999      instructions:u                                              

      47.852405877 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2555310592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813165.811590,       0.0,      122520,     110551,      11969,      68353,      42198,  41.188661,  66.900000,  87.500000, 685.200000, 124.606462,   0.000000, 2013.566017, 429.484129
Outstanding requests per worker:
353 325 274 308 235 890 12897 12500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38573.6,      192868,     173350,      19518,     119401,      53949, 325.248039, 378.800000, 1540.500000, 4603.200000, 780.478911,   0.361000, 7050.951004, 507.521333
Outstanding requests per worker:
1865 1784 1780 1831 1990 1873 30057 43752 
count  179434
count  179434
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38130.4,      190652,     171848,      18804,     124772,      47076, 1027.388744, 950.700000, 6000.000000, 11000.000000, 1936.501293,   0.780000, 11827.158928, 548.447523
Outstanding requests per worker:
4304 4423 4661 4320 4441 4201 34695 53167 
count  178873
count  178873
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39162.0,      195810,     176252,      19558,     131767,      44485, 1800.724641, 4054.800000, 9000.000000, 12000.000000, 2296.730556, 119.129002, 12866.468430, 571.687612
Outstanding requests per worker:
8501 8347 8239 8347 8317 8191 42447 54356 
count  172067
count  172067
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37874.8,      189374,     170425,      18949,     130078,      40347, 2366.184307, 4639.800000, 8000.000000, 12000.000000, 2051.012493, 494.857997, 13767.233849, 589.082265
Outstanding requests per worker:
12677 12170 12426 12493 12651 12548 46819 54356 
count  164323
count  164323
count  164323
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40999.6,      204998,     184659,      20339,     143435,      41224, 5271.083467, 24000.000000, 25000.000000, 26000.000000, 6761.198534, 819.514990, 26278.863907, 603.872294
Outstanding requests per worker:
17472 17363 17501 17309 17669 17314 51792 55765 
count  144826
count  144826
count  144826
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39961.4,      199807,     179991,      19816,     141436,      38555, 6963.961739, 23000.000000, 24000.000000, 26000.000000, 7061.087777, 1107.880950, 27898.143768, 613.454912
Outstanding requests per worker:
24737 24678 24632 24482 24871 24646 58966 96751 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:26   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:26   0:00 /usr/lib/linux
memcache      9 70.3  0.0 137664 78976 pts/0    Sl+  13:26   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4863616218      instructions:u                                              

      47.539819160 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2603348480
starting receive base loop
num_worker_connections 64
Creating worker on tid 2007429632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
Created 512 connections total
Creating worker on tid 2729505280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813217.811642,       0.0,      130322,     117245,      13077,      72619,      44626,  63.396386,  69.700000, 292.700000, 1106.800000, 188.926943,   0.000000, 2098.054886, 430.751230
Outstanding requests per worker:
319 310 325 292 318 9198 14782 13794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39004.4,      195022,     175557,      19465,     121890,      53667, 353.444643, 413.000000, 2028.400000, 4852.900000, 850.300277,   0.399000, 7071.525097, 512.386581
Outstanding requests per worker:
1979 1952 2055 2049 1990 12943 48964 48282 
count  184344
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37756.8,      188784,     169992,      18792,     123714,      46278, 776.972240, 959.800000, 3123.900000, 6000.000000, 1013.761585,   0.971000, 7386.783123, 548.056461
Outstanding requests per worker:
5245 5108 5398 5073 5146 15378 51489 53311 
count  183898
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38399.8,      191999,     172750,      19249,     129403,      43347, 1429.382552, 1542.800000, 4447.000000, 15000.000000, 1978.602163, 271.281004, 16964.736938, 573.587137
Outstanding requests per worker:
8203 8312 8121 8267 8178 18377 52008 53311 
count  168454
count  168454
count  168454
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43691.6,      218458,     196846,      21612,     150199,      46647, 4583.481917, 16000.000000, 17000.000000, 18000.000000, 5476.745732, 495.388001, 21197.521210, 588.536983
Outstanding requests per worker:
14985 14833 14727 14716 14767 24999 98365 54123 
count  155709
count  155709
count  155709
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37524.4,      187622,     168774,      18848,     131145,      37629, 3845.804137, 7000.000000, 9000.000000, 19000.000000, 3043.586334, 1164.960027, 23420.955658, 604.708705
Outstanding requests per worker:
22765 22418 22440 22825 22685 32331 106201 54434 
count  148411
count  148411
count  148411
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39862.0,      199310,     179315,      19995,     141173,      38142, 6647.998764, 12000.000000, 31000.000000, 32000.000000, 6724.249292, 2134.473085, 31825.300217, 616.122801
Outstanding requests per worker:
30539 30425 30271 30391 30485 40500 114068 55416 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:27   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   13:27   0:00 /usr/lib/linux
memcache     10 70.7  0.0 138688 79744 pts/0    Sl+  13:27   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4975026928      instructions:u                                              

      47.990127612 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2649682432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813268.811693,       0.0,      133166,     119724,      13442,      74001,      45723,  87.807992,  84.700000, 350.800000, 1677.800000, 276.264135,   0.000000, 2604.742050, 430.042088
Outstanding requests per worker:
416 517 497 454 1849 15524 15888 15038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39013.8,      195069,     175611,      19458,     121369,      54242, 430.185263, 782.900000, 2250.100000, 4837.600000, 879.215351,   0.584000, 7115.657806, 508.680202
Outstanding requests per worker:
2765 2751 2748 2735 3134 35651 53488 52638 
count  177577
count  177577
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39401.2,      197006,     177397,      19609,     128602,      48795, 1403.376113, 4919.700000, 8000.000000, 10000.000000, 2218.014911,   1.548000, 12080.639839, 546.779466
Outstanding requests per worker:
6740 6642 6817 6689 7047 44431 53820 53517 
count  174164
count  174164
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37812.6,      189063,     170281,      18782,     127457,      42824, 2024.553753, 4004.400000, 8000.000000, 11000.000000, 2038.832695, 320.205986, 14326.843262, 572.791104
Outstanding requests per worker:
12738 12848 12747 12895 13213 50675 54058 53517 
count  164833
count  164833
count  164833
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38247.0,      191235,     172109,      19126,     131783,      40326, 3311.668890, 7000.000000, 10000.000000, 22000.000000, 3325.628043, 816.139996, 22104.270935, 590.102795
Outstanding requests per worker:
19135 19531 19279 19229 19541 57076 54235 53517 
count  136159
count  136159
count  136159
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41458.2,      207291,     186459,      20832,     144438,      42021, 7523.671572, 21000.000000, 22000.000000, 23000.000000, 6913.407808, 1428.850055, 26591.138840, 601.175937
Outstanding requests per worker:
29818 30216 29861 30144 30414 67724 106700 54323 
count  82570
count  82570
count  82570
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34909.4,      174547,     156851,      17696,     123475,      33376, 6264.070697, 10000.000000, 14000.000000, 24000.000000, 3689.225303, 2797.318935, 25399.641037, 615.476044
Outstanding requests per worker:
41693 42108 41596 41998 42120 79461 153629 54323 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:27   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   13:27   0:00 /usr/lib/linux
memcache      8 70.9  0.0 138688 77952 pts/0    Sl+  13:27   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  13:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4904882512      instructions:u                                              

      47.530917922 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2030825984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813319.811744,       0.0,      138026,     124163,      13863,      77150,      47013,  94.253599,  99.700000, 315.900000, 1804.300000, 296.156532,   0.000000, 3196.249962, 433.298793
Outstanding requests per worker:
717 657 622 627 9752 17653 17588 16261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38500.2,      192501,     173167,      19334,     119774,      53393, 543.626199, 1152.500000, 3214.300000, 4516.200000, 946.748136,   0.541000, 6434.392929, 510.098772
Outstanding requests per worker:
3869 4078 3869 3809 11485 49461 51191 54202 
count  181063
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36875.6,      184378,     166033,      18345,     120942,      45091, 1086.108233, 1375.000000, 3439.400000, 9000.000000, 1254.790831, 164.692998, 10490.233421, 549.112146
Outstanding requests per worker:
8234 8479 8261 8343 15845 50025 51191 54202 
count  169168
count  169168
count  169168
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42570.6,      212853,     191684,      21169,     143437,      48247, 3406.966329, 11000.000000, 13000.000000, 14000.000000, 3813.774021, 413.354993, 14418.703079, 572.093492
Outstanding requests per worker:
15992 15901 15731 16044 23580 84847 51191 54202 
count  154408
count  154408
count  154408
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37369.6,      186848,     168104,      18744,     128579,      39525, 3795.357256, 7000.000000, 11000.000000, 21000.000000, 3141.817097, 1120.435953, 21111.097336, 589.962470
Outstanding requests per worker:
25876 26010 25421 26069 33684 94796 52530 54202 
count  135743
count  135743
count  135743
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41850.8,      209254,     188511,      20743,     146214,      42297, 7887.992509, 24000.000000, 25000.000000, 25000.000000, 7087.089616, 2041.155100, 26733.682632, 602.669409
Outstanding requests per worker:
37299 37201 36972 36998 44796 106149 64289 54698 
count  37308
count  37308
count  37308
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36378.6,      181893,     163604,      18289,     128850,      34754, 8149.761017, 15000.000000, 24000.000000, 27000.000000, 5518.364162, 1847.794056, 28028.751373, 613.819870
Outstanding requests per worker:
52136 52132 51691 51961 59485 120722 113110 54698 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:28   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   13:28   0:00 /usr/lib/linux
memcache     11 71.3  0.0 138688 75904 pts/0    Sl+  13:28   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4930016454      instructions:u                                              

      48.080958911 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1848898048
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
num_worker_connections 64
Creating worker on tid 2568483328
starting receive base loop
Created 512 connections total
Creating worker on tid 1975185920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813371.811796,       0.0,      141264,     127121,      14143,      79425,      47696,  99.388541, 138.300000, 261.300000, 1763.500000, 293.417879,   0.000000, 3181.124926, 436.651033
Outstanding requests per worker:
940 870 960 834 17246 19221 19150 17544 
count  191369
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39155.2,      195776,     176342,      19434,     122249,      54093, 688.126551, 1704.700000, 3680.400000, 6000.000000, 1132.994231,   0.560000, 6791.830063, 511.527537
Outstanding requests per worker:
5179 5242 5184 5145 24179 55171 54194 51893 
count  178633
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37472.8,      187364,     168791,      18573,     122493,      46298, 1379.355915, 2757.700000, 4802.200000, 7000.000000, 1283.368607, 218.205005, 7465.256214, 548.566890
Outstanding requests per worker:
11475 11465 11556 11586 30809 55171 54194 51893 
count  166691
count  166691
count  166691
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42231.0,      211155,     190327,      20828,     142605,      47722, 3967.398761, 14000.000000, 15000.000000, 16000.000000, 4441.155488, 675.889015, 15837.835312, 572.484676
Outstanding requests per worker:
19575 19843 19968 19800 38906 73119 54194 51893 
count  141776
count  141776
count  141776
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37205.0,      186025,     167588,      18437,     128097,      39491, 4809.237601, 13000.000000, 15000.000000, 17000.000000, 3731.716299, 1437.459946, 21081.556320, 590.138154
Outstanding requests per worker:
32778 33196 33215 33244 52032 128470 54347 51893 
count  102044
count  102044
count  102044
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37090.2,      185451,     166984,      18467,     129909,      37075, 5981.973378, 10000.000000, 11000.000000, 27000.000000, 3407.561710, 2744.184017, 27122.867584, 605.122161
Outstanding requests per worker:
46543 46456 46729 46849 65552 141833 54426 51893 
count  6351
count  6351
count  6351
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41648.8,      208244,     187255,      20989,     147272,      39983, 11343.524758, 27000.000000, 27000.000000, 29000.000000, 7807.529165, 2662.067890, 29537.441254, 613.820662
Outstanding requests per worker:
63435 63273 64032 63692 82373 158670 113090 51893 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:29   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:29   0:00 /usr/lib/linux
memcache     10 72.9  0.0 138688 76160 pts/0    Sl+  13:29   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4970052545      instructions:u                                              

      47.703052492 seconds time elapsed

+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1705964032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813422.811847,       0.0,      143332,     129000,      14332,      80797,      48203, 110.429653, 184.900000, 268.500000, 1746.100000, 284.562448,   0.000000, 3100.358009, 438.420628
Outstanding requests per worker:
1353 1341 1417 1452 24656 20294 20218 18868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36838.4,      184192,     165588,      18604,     115400,      50188, 607.659930, 776.700000, 2210.700000, 4957.300000, 877.408892,   0.882000, 7553.205013, 514.852187
Outstanding requests per worker:
6513 6371 6332 6428 35357 53944 52374 53639 
count  180944
count  180944
count  180944
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40799.6,      203998,     183686,      20312,     133887,      49799, 2008.159492, 6000.000000, 8000.000000, 9000.000000, 1971.833335, 184.894994, 9300.166130, 549.509957
Outstanding requests per worker:
15620 15298 15333 15312 52215 53944 52374 53639 
count  164331
count  164331
count  164331
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37706.6,      188533,     169835,      18698,     127392,      42443, 3152.726190, 6000.000000, 8000.000000, 17000.000000, 2548.778666, 1004.523993, 17120.521545, 573.555480
Outstanding requests per worker:
25706 25604 25789 25371 62561 54018 52374 53639 
count  131965
count  131965
count  131965
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41088.0,      205440,     184843,      20597,     141455,      43388, 6826.407204, 16000.000000, 17000.000000, 18000.000000, 5093.448828, 1805.637002, 19380.994797, 590.913045
Outstanding requests per worker:
41831 41564 41460 41536 78736 101841 52374 53639 
count  42596
count  42596
count  42596
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36346.8,      181734,     163608,      18126,     127289,      36319, 6596.667504, 10000.000000, 12000.000000, 20000.000000, 2759.233746, 3368.716955, 20830.028534, 605.057558
Outstanding requests per worker:
58955 58943 58681 58628 95707 170951 52374 53639 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39109.4,      195547,     175834,      19713,     138425,      37409, 11938.072823, 29000.000000, 29000.000000, 30000.000000, 7809.082356, 5150.936127, 30830.123901, 615.567911
Outstanding requests per worker:
78057 78161 77849 78027 115216 175238 77291 53639 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:30   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:30   0:00 /usr/lib/linux
memcache      9 71.3  0.0 140736 75840 pts/0    Sl+  13:30   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4962958357      instructions:u                                              

      47.878121289 seconds time elapsed

+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2382688768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813474.811899,       0.0,      147414,     132674,      14740,      82913,      49761, 138.647911, 238.800000, 338.600000, 1824.200000, 296.363054,   0.000000, 3181.934118, 437.550703
Outstanding requests per worker:
2258 2407 2157 2690 28726 22114 22032 20002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36764.0,      183820,     165372,      18448,     115025,      50347, 666.087094, 958.300000, 1347.600000, 4090.700000, 671.711587,   1.778000, 7393.651962, 514.010848
Outstanding requests per worker:
8891 8625 8534 9232 41459 53139 51482 53992 
count  176247
count  176247
count  176247
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42294.0,      211470,     190513,      20957,     138889,      51624, 2393.989926, 8000.000000, 9000.000000, 10000.000000, 2366.860102, 337.525010, 9974.053383, 550.390057
Outstanding requests per worker:
19129 18880 19034 19367 66589 53139 51482 53992 
count  159289
count  159289
count  159289
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37129.0,      185645,     167063,      18582,     125766,      41297, 3306.956727, 6000.000000, 8000.000000, 11000.000000, 1840.450408, 1159.569979, 14339.549065, 577.707895
Outstanding requests per worker:
32359 31928 31897 32830 79764 53678 51482 53992 
count  122576
count  122576
count  122576
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42273.8,      211369,     190461,      20908,     145691,      44770, 7507.054339, 17000.000000, 18000.000000, 19000.000000, 5219.586232, 2036.598921, 20014.085770, 590.484524
Outstanding requests per worker:
50114 50160 49849 50644 97763 83741 51482 53992 
count  11602
count  11602
count  11602
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36091.8,      180459,     162319,      18140,     126583,      35736, 7317.535927, 12000.000000, 14000.000000, 21000.000000, 2970.717675, 3493.171930, 22111.335754, 605.833686
Outstanding requests per worker:
70062 70151 69971 70431 117652 147875 51482 53992 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40629.0,      203145,     182995,      20150,     144312,      38683, 12434.899392, 30000.000000, 30000.000000, 31000.000000, 7608.036433, 6205.289841, 31525.035858, 615.942370
Outstanding requests per worker:
91603 91439 91565 92038 139481 178590 57327 53992 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:31   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:31   0:00 /usr/lib/linux
memcache      9 71.7  0.0 139712 77120 pts/0    Sl+  13:31   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5001917313      instructions:u                                              

      47.935124754 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2172580352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1580593664
starting receive base loop
num_worker_connections 64
Creating worker on tid 984674816
starting receive base loop
num_worker_connections 64
Creating worker on tid 388755968
starting receive base loop
num_worker_connections 64
Creating worker on tid 4087804416
starting receive base loop
num_worker_connections 64
Creating worker on tid 3491885568
starting receive base loop
num_worker_connections 64
Creating worker on tid 2895966720
starting receive base loop
Created 512 connections total
Creating worker on tid 2300047872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813525.811950,       0.0,      146637,     131894,      14743,      82415,      49479, 147.037420, 254.700000, 344.100000, 1846.500000, 297.372470,   0.000000, 3176.040888, 437.190229
Outstanding requests per worker:
2556 2734 2654 6128 33311 22674 22587 21278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37459.0,      187295,     168342,      18953,     117421,      50921, 742.984162, 1101.000000, 2052.900000, 3751.900000, 667.926749,   1.557000, 7258.306980, 515.955400
Outstanding requests per worker:
10150 10530 10234 13543 49496 52424 52425 52733 
count  170984
count  170984
count  170984
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41669.2,      208346,     187733,      20613,     137286,      50447, 2731.419881, 9000.000000, 10000.000000, 11000.000000, 2847.895652, 469.130993, 11266.107559, 552.520154
Outstanding requests per worker:
21456 21455 21100 24773 78504 52424 52425 52733 
count  163079
count  163079
count  163079
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38087.4,      190437,     171411,      19026,     128968,      42443, 3637.883322, 6000.000000, 9000.000000, 12000.000000, 2002.764896, 1331.913948, 12870.820999, 575.653114
Outstanding requests per worker:
37785 37752 37489 40885 105371 52424 52425 52733 
count  108327
count  108327
count  108327
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42569.8,      212849,     191396,      21453,     146840,      44556, 7907.163983, 19000.000000, 19000.000000, 20000.000000, 5469.478150, 1650.771976, 21836.620331, 593.130154
Outstanding requests per worker:
57586 57178 57012 60459 125034 75200 53286 52733 
count  10170
count  10170
count  10170
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34404.2,      172021,     154715,      17306,     120502,      34213, 7813.535884, 13000.000000, 19000.000000, 22000.000000, 3650.243123, 2372.045040, 23451.295853, 605.514811
Outstanding requests per worker:
80841 80347 80191 83887 141912 114405 53286 52733 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36670.4,      183352,     164973,      18379,     129750,      35223, 10373.498348, 16000.000000, 17000.000000, 31000.000000, 3645.431880, 6102.707863, 30748.752594, 614.677462
Outstanding requests per worker:
104577 104069 103929 106434 166991 163341 53440 52733 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:32   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:32   0:00 /usr/lib/linux
memcache      9 71.6  0.0 140736 76224 pts/0    Sl+  13:32   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5018105073      instructions:u                                              

      48.175487926 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2396910080
starting receive base loop
num_worker_connections 64
Creating worker on tid 1798042112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
Created 512 connections total
Creating worker on tid 2520117760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813577.812002,       0.0,      152075,     136800,      15275,      86239,      50561, 172.717115, 299.900000, 428.800000, 1934.200000, 316.853741,   0.000000, 3244.714022, 442.183319
Outstanding requests per worker:
3436 3498 3280 12344 37069 25243 25151 22729 
count  190710
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38556.0,      192780,     173460,      19320,     121041,      52419, 960.814133, 1593.700000, 2847.500000, 8000.000000, 999.116879,   3.817000, 8208.851814, 517.133483
Outstanding requests per worker:
12946 12751 12560 21633 52599 53635 51687 51047 
count  176686
count  176686
count  176686
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42687.0,      213435,     192254,      21181,     140635,      51619, 3232.838869, 11000.000000, 11000.000000, 12000.000000, 3238.598026, 637.106001, 12128.503799, 553.430009
Outstanding requests per worker:
25723 25872 25687 34725 86091 53635 51687 51047 
count  152866
count  152866
count  152866
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36530.6,      182653,     164295,      18358,     123543,      40752, 4123.200429, 7000.000000, 11000.000000, 13000.000000, 2344.484639, 1444.664955, 13916.123390, 577.090392
Outstanding requests per worker:
46258 46264 45961 54874 129779 53635 51687 51047 
count  69380
count  69380
count  69380
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41983.2,      209916,     188906,      21010,     144727,      44179, 7977.296529, 20000.000000, 21000.000000, 21000.000000, 5324.509911, 3147.197962, 21455.762863, 592.327957
Outstanding requests per worker:
67982 68053 67441 76559 151365 69818 51687 51047 
count  4907
count  4907
count  4907
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35482.4,      177412,     159745,      17667,     124144,      35601, 9351.030527, 19000.000000, 21000.000000, 23000.000000, 4436.771034, 2973.663092, 25144.744873, 604.214698
Outstanding requests per worker:
94881 94886 94343 102115 178194 125863 52376 51047 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33764.0,      168820,     152219,      16601,     119988,      32231, 10844.163731, 17000.000000, 18000.000000, 28000.000000, 3513.813811, 6727.444172, 29404.525757, 615.900742
Outstanding requests per worker:
119681 120897 120902 130054 188399 152858 53127 51047 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:33   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   13:33   0:00 /usr/lib/linux
memcache     11 71.9  0.0 139712 74112 pts/0    Sl+  13:33   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  13:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5000580534      instructions:u                                              

      48.043608014 seconds time elapsed

+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1707471360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813628.812053,       0.0,      152613,     137347,      15266,      86274,      51073, 180.471877, 322.000000, 435.900000, 1888.300000, 315.974056,   0.000000, 3124.603033, 438.799843
Outstanding requests per worker:
3872 3865 3883 17330 38357 26087 25989 23811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38836.0,      194180,     174878,      19302,     122216,      52662, 1050.558753, 2126.600000, 3367.800000, 4666.600000, 956.611840,  65.168999, 6951.675892, 517.570180
Outstanding requests per worker:
14788 14805 14882 29511 53532 53261 52098 51921 
count  176625
count  176625
count  176625
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41378.6,      206893,     186366,      20527,     136236,      50130, 3279.282094, 12000.000000, 12000.000000, 13000.000000, 3234.026728, 807.443023, 12565.973282, 552.472436
Outstanding requests per worker:
28762 29043 29233 43850 56782 53261 52098 51921 
count  141677
count  141677
count  141677
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37232.8,      186164,     167448,      18716,     126280,      41168, 4857.181823, 11000.000000, 12000.000000, 14000.000000, 2889.168444, 1708.989024, 14928.792000, 577.666063
Outstanding requests per worker:
51881 51825 52365 66966 141431 53261 52098 51921 
count  38096
count  38096
count  38096
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37378.6,      186893,     168324,      18569,     128707,      39617, 7251.071392, 10000.000000, 21000.000000, 22000.000000, 4308.513024, 3623.326063, 21958.147049, 590.827131
Outstanding requests per worker:
76215 76340 76637 91187 170201 54124 52098 51921 
count  5852
count  5852
count  5852
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36942.2,      184711,     166166,      18545,     128862,      37304, 10660.298641, 21000.000000, 22000.000000, 24000.000000, 5219.495155, 3578.211069, 26923.662186, 602.678310
Outstanding requests per worker:
105392 105707 106015 117444 172514 120823 52376 51921 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35870.2,      179351,     161259,      18092,     126846,      34413, 11455.077554, 16000.000000, 16000.000000, 27000.000000, 3407.661386, 5093.431950, 29755.174637, 615.411797
Outstanding requests per worker:
131166 134835 136299 150588 196881 167170 52786 51921 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:33   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:33   0:00 /usr/lib/linux
memcache     10 73.1  0.0 139712 77120 pts/0    Sl+  13:33   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5012054649      instructions:u                                              

      48.087430829 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2643718656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813679.812104,       0.0,      152951,     137644,      15307,      86230,      51414, 200.389066, 380.500000, 543.200000, 1881.500000, 314.328460,   0.000000, 3099.554062, 439.083316
Outstanding requests per worker:
4662 4805 4659 21254 39775 26891 26790 25000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39374.6,      196873,     177386,      19487,     123879,      53507, 1165.447951, 2361.400000, 3600.300000, 4919.600000, 959.952415,  92.904001, 7585.968971, 517.416927
Outstanding requests per worker:
17304 17721 17460 36060 53208 52654 51228 51304 
count  174258
count  174258
count  174258
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39710.0,      198550,     178939,      19611,     130807,      48132, 3125.758584, 6000.000000, 12000.000000, 13000.000000, 2723.808068, 938.907981, 13054.723740, 553.428073
Outstanding requests per worker:
33858 34399 34209 52753 54053 52654 51228 51304 
count  142515
count  142515
count  142515
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39561.8,      197809,     178142,      19667,     133687,      44455, 5384.922786, 12000.000000, 13000.000000, 14000.000000, 3122.573054, 1521.126986, 14800.667763, 574.241291
Outstanding requests per worker:
59163 59493 59395 78186 110497 52654 51228 51304 
count  17491
count  17491
count  17491
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36938.8,      184694,     166296,      18398,     127482,      38814, 6671.984137, 9000.000000, 10000.000000, 20000.000000, 2357.296300, 4007.646084, 21944.412231, 592.062058
Outstanding requests per worker:
85764 86081 85940 104717 163179 53023 51228 51304 
count  6518
count  6518
count  6518
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41485.0,      207425,     186677,      20748,     144958,      41719, 11518.497431, 22000.000000, 22000.000000, 24000.000000, 5514.283230, 1825.554967, 24644.010544, 603.018760
Outstanding requests per worker:
117717 118028 117938 136397 169010 124921 51228 51304 
count  1211
count  1211
count  1211
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33209.6,      166048,     149614,      16434,     117901,      31713, 11992.948855, 16000.000000, 17000.000000, 32000.000000, 4175.271163, 4750.943184, 32057.941437, 616.408538
Outstanding requests per worker:
145396 143154 147222 170360 179866 177899 51796 51304 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:34   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:34   0:00 /usr/lib/linux
memcache     10 71.6  0.0 139712 75968 pts/0    Sl+  13:34   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5028037549      instructions:u                                              

      47.869003954 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2179789312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1580593664
starting receive base loop
num_worker_connections 64
Creating worker on tid 984674816
starting receive base loop
num_worker_connections 64
Creating worker on tid 388755968
starting receive base loop
num_worker_connections 64
Creating worker on tid 4087804416
starting receive base loop
num_worker_connections 64
Creating worker on tid 3491885568
starting receive base loop
num_worker_connections 64
Creating worker on tid 2895966720
starting receive base loop
Created 512 connections total
Creating worker on tid 2300047872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813730.812155,       0.0,      158465,     142650,      15815,      89693,      52957, 230.134165, 438.700000, 561.400000, 1969.600000, 331.542293,   0.000000, 3189.975977, 440.631132
Outstanding requests per worker:
5882 5991 5856 24719 42394 28701 28594 26316 
count  194113
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39519.4,      197597,     178135,      19462,     124577,      53558, 1352.305162, 2762.600000, 3995.200000, 6000.000000, 1044.554744, 152.447000, 5994.936943, 518.873467
Outstanding requests per worker:
21533 21466 21524 43506 52379 53481 52469 54484 
count  173727
count  173727
count  173727
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38711.0,      193555,     174501,      19054,     127765,      46736, 3093.884772, 6000.000000, 7000.000000, 13000.000000, 2104.652072, 1087.208986, 13218.190193, 554.199953
Outstanding requests per worker:
40555 40785 40597 62441 52611 53481 52469 54484 
count  125525
count  125525
count  125525
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41442.2,      207211,     186456,      20755,     140332,      46124, 6177.446600, 13000.000000, 13000.000000, 15000.000000, 3425.231653, 1788.310051, 15491.765022, 576.677586
Outstanding requests per worker:
68908 69053 68836 90802 100451 54058 52469 54484 
count  3132
count  3132
count  3132
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36494.6,      182473,     164121,      18352,     125849,      38272, 7103.406763, 9000.000000, 10000.000000, 21000.000000, 2307.953068, 4102.046013, 21954.902649, 591.512713
Outstanding requests per worker:
98550 98649 98473 119534 149332 54173 52469 54484 
count  3146
count  3146
count  3146
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40866.6,      204333,     183749,      20584,     142899,      40850, 12119.722697, 22000.000000, 23000.000000, 24000.000000, 5261.929926, 2486.466885, 24797.431946, 603.503796
Outstanding requests per worker:
130006 129926 133020 155327 166800 112792 52469 54484 
count  3286
count  3286
count  3286
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34368.4,      171842,     154643,      17199,     121707,      32936, 12215.713207, 16000.000000, 17000.000000, 27000.000000, 3473.462332, 4404.808998, 27904.529572, 614.816817
Outstanding requests per worker:
163228 167218 162319 189970 169808 169090 52469 54484 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:35   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:35   0:00 /usr/lib/linux
memcache     10 71.8  0.0 139712 76672 pts/0    Sl+  13:35   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5047712264      instructions:u                                              

      48.009010346 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2441277952
starting receive base loop
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
Created 512 connections total
Creating worker on tid 2568483328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813782.812207,       0.0,      160189,     144150,      16039,      90610,      53540, 239.811079, 470.100000, 612.200000, 1976.900000, 334.889809,   0.000000, 3088.692904, 440.858446
Outstanding requests per worker:
6690 6802 6685 30600 44057 30019 29906 27777 
count  189322
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39836.0,      199180,     179459,      19721,     125442,      54017, 1535.600308, 3719.600000, 4987.700000, 6000.000000, 1300.377457, 200.286999, 6774.022102, 517.830240
Outstanding requests per worker:
24119 24462 24320 56490 53579 53183 53021 53077 
count  170083
count  170083
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37066.0,      185330,     166924,      18406,     122538,      44386, 3035.106668, 4630.300000, 6000.000000, 7000.000000, 1161.800514, 1317.078948, 9741.164207, 555.151470
Outstanding requests per worker:
47560 47500 47699 79550 53772 53183 53021 53077 
count  97505
count  97505
count  97505
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41841.2,      209206,     188604,      20602,     141226,      47378, 6966.239086, 14000.000000, 14000.000000, 15000.000000, 3827.316693, 2421.806097, 16075.134277, 573.018133
Outstanding requests per worker:
78175 78205 78036 110393 80374 53183 53021 53077 
count  6679
count  6679
count  6679
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36270.8,      181354,     163193,      18161,     125249,      37944, 7426.112573, 10000.000000, 12000.000000, 17000.000000, 2202.220156, 3285.330057, 21501.447678, 591.772135
Outstanding requests per worker:
111552 109650 111018 143880 149510 53287 53021 53077 
count  1067
count  1067
count  1067
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38521.2,      192606,     173635,      18971,     135177,      38458, 12904.517379, 23000.000000, 24000.000000, 25000.000000, 5659.171560, 2613.081932, 25546.091080, 604.521796
Outstanding requests per worker:
140945 139914 143662 182264 183890 87416 53021 53077 
count  4651
count  4651
count  4651
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33670.8,      168354,     151493,      16861,     119013,      32480, 12711.051981, 16000.000000, 18000.000000, 28000.000000, 4086.538142, 3566.772938, 32125.339508, 612.683768
Outstanding requests per worker:
186424 176209 181140 214447 208555 129462 53415 53077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:36   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   13:36   0:00 /usr/lib/linux
memcache     10 73.4  0.0 139712 77376 pts/0    Sl+  13:36   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4983510172      instructions:u                                              

      47.836183202 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1776546304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
num_worker_connections 64
Creating worker on tid 2493313536
starting receive base loop
Created 512 connections total
Creating worker on tid 1897394688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813833.812258,       0.0,      159464,     143563,      15901,      90092,      53471, 262.894711, 513.900000, 656.700000, 1960.100000, 339.439722,   0.000000, 3130.803108, 439.227329
Outstanding requests per worker:
7728 7759 7980 34386 45686 30744 30626 28988 
count  187641
count  187641
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40146.6,      200733,     180671,      20062,     126193,      54478, 1681.290994, 4221.000000, 6000.000000, 7000.000000, 1388.292008, 199.458003, 6868.496895, 516.375096
Outstanding requests per worker:
27234 27671 27729 64363 53220 51339 53935 52657 
count  167008
count  167008
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37085.4,      185427,     167001,      18426,     122316,      44685, 3285.168137, 4989.900000, 7000.000000, 8000.000000, 1361.109969, 1405.416965, 12713.293076, 554.071862
Outstanding requests per worker:
53715 54144 54259 90945 53566 51339 53935 52657 
count  81766
count  81766
count  81766
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40564.2,      202821,     182457,      20364,     137246,      45211, 7029.496142, 14000.000000, 14000.000000, 16000.000000, 3722.682368, 1416.342020, 16599.086761, 574.757236
Outstanding requests per worker:
87145 87492 87480 113659 99261 51339 53935 52657 
count  6188
count  6188
count  6188
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37892.2,      189461,     170517,      18944,     131039,      39478, 8322.374835, 12000.000000, 15000.000000, 22000.000000, 2973.792647, 3234.364033, 22034.549713, 592.027880
Outstanding requests per worker:
124434 119588 123723 161279 151585 52129 53935 52657 
count  1861
count  1861
count  1861
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37539.8,      187699,     168719,      18980,     131107,      37612, 12923.938368, 23000.000000, 24000.000000, 24000.000000, 5197.039394, 1975.695014, 25418.979645, 604.357014
Outstanding requests per worker:
154886 158810 160296 202420 182433 81595 53935 52657 
count  6636
count  6636
count  6636
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33443.2,      167216,     150576,      16640,     118638,      31938, 13513.166069, 17000.000000, 25000.000000, 28000.000000, 4254.398988, 3314.872026, 28476.022720, 615.003520
Outstanding requests per worker:
199237 206501 198418 240568 181415 118502 53935 52657 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:37   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   13:37   0:00 /usr/lib/linux
memcache     11 71.6  0.0 139712 73472 pts/0    Sl+  13:37   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  13:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4991958951      instructions:u                                              

      48.294515449 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2481582592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1889333760
starting receive base loop
num_worker_connections 64
Creating worker on tid 1293414912
starting receive base loop
num_worker_connections 64
Creating worker on tid 700117504
starting receive base loop
num_worker_connections 64
Creating worker on tid 104198656
starting receive base loop
num_worker_connections 64
Creating worker on tid 3803247104
starting receive base loop
num_worker_connections 64
Creating worker on tid 3207328256
starting receive base loop
Created 512 connections total
Creating worker on tid 2611409408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813885.812310,       0.0,       36745,      33004,       3741,      18877,      14127,   0.705994,   0.103100,   0.166100,   1.600000,   7.268554,   0.000000, 161.670998, 380.000121
Outstanding requests per worker:
0 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      53978,       6084,      34136,      19842,   0.096340,   0.104100,   0.149100,   0.397100,   0.054106,   0.066000,   0.737000, 444.644540
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54017,       6046,      35805,      18212,   0.098861,   0.104100,   0.194000,   0.449100,   0.064157,   0.066000,   0.897000, 479.396782
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      53974,       6089,      36828,      17146,   0.099134,   0.104100,   0.194000,   0.452100,   0.065390,   0.064000,   0.964000, 499.141716
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      53945,       6117,      37837,      16108,   0.098930,   0.103100,   0.193100,   0.450100,   0.064611,   0.065000,   0.717000, 520.107091
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53971,       6093,      38559,      15412,   0.098919,   0.104100,   0.192100,   0.449100,   0.064237,   0.067000,   0.933000, 533.491264
Outstanding requests per worker:
0 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54060,       6003,      38845,      15215,   0.098754,   0.104100,   0.192100,   0.447100,   0.063507,   0.065000,   0.644000, 541.886349
Outstanding requests per worker:
0 0 0 0 1 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:38   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6208 pts/0    S+   13:38   0:00 /usr/lib/linux
memcache     10 35.0  0.0 110016 32064 pts/0    Sl+  13:38   0:16 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  13:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        1533689287      instructions:u                                              

      47.531015347 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2033644032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813936.812361,       0.0,      163056,     146939,      16117,      92452,      54487, 317.324438, 642.400000, 774.700000, 2011.500000, 362.340284,   0.000000, 3128.236055, 442.282947
Outstanding requests per worker:
10694 10565 10935 39473 49096 32992 32864 31253 
count  184637
count  184637
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40688.2,      203441,     183174,      20267,     128098,      55076, 1969.732228, 4865.000000, 6000.000000, 7000.000000, 1479.172994, 330.253005, 7146.433830, 517.857649
Outstanding requests per worker:
35082 34691 34978 71008 53030 51764 53225 53612 
count  167186
count  167186
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36842.2,      184211,     165817,      18394,     121357,      44460, 3574.286468, 4884.200000, 6000.000000, 8000.000000, 1115.678459, 1399.423003, 8868.779182, 552.304728
Outstanding requests per worker:
67040 67098 66868 108116 53071 51764 53225 53612 
count  45312
count  45312
count  45312
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40408.0,      202040,     181675,      20365,     136175,      45500, 7686.358223, 15000.000000, 15000.000000, 15000.000000, 3620.390455, 2750.010014, 16825.384140, 573.933645
Outstanding requests per worker:
105361 105357 105394 143598 85712 51764 53225 53612 
count  9647
count  9647
count  9647
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33454.4,      167272,     150497,      16775,     115375,      35122, 8841.145189, 12000.000000, 15000.000000, 18000.000000, 2620.832353, 3463.244915, 18929.517746, 590.420440
Outstanding requests per worker:
145387 145444 139062 163148 143461 51764 53225 53612 
count  254
count  254
count  254
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38418.8,      192094,     172985,      19109,     134125,      38860, 13908.186389, 24000.000000, 24000.000000, 25000.000000, 5480.652539, 2378.479004, 27084.976196, 603.199144
Outstanding requests per worker:
173904 191979 194340 202144 178548 81533 53825 53612 
count  5052
count  5052
count  5052
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35189.4,      175947,     158301,      17646,     124688,      33613, 14265.575970, 19000.000000, 25000.000000, 28000.000000, 4246.964357, 3455.446005, 29379.804611, 614.331084
Outstanding requests per worker:
221785 246669 246519 258154 207252 133045 53825 53612 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:39   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6208 pts/0    S+   13:39   0:00 /usr/lib/linux
memcache      9 73.1  0.0 139712 76608 pts/0    Sl+  13:39   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4945743983      instructions:u                                              

      47.645389434 seconds time elapsed

dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1927672320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
num_worker_connections 64
Creating worker on tid 2646274560
starting receive base loop
Created 512 connections total
Creating worker on tid 2050355712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575813988.812413,       0.0,      167897,     151196,      16701,      95739,      55457, 347.403082, 701.800000, 863.500000, 2122.300000, 385.866855,   0.000000, 3172.519922, 444.776244
Outstanding requests per worker:
12216 12048 12977 46053 50337 36087 35950 32789 
count  179672
count  179672
count  179672
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41462.6,      207313,     186590,      20723,     130813,      55777, 2196.570553, 6000.000000, 7000.000000, 7000.000000, 1680.576485, 409.341007, 7872.202873, 520.240795
Outstanding requests per worker:
38403 37964 39163 62610 53428 52646 51567 52169 
count  164516
count  164516
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36551.8,      182759,     164506,      18253,     120913,      43593, 3775.322509, 4997.300000, 7000.000000, 9000.000000, 1304.789355, 936.380982, 10982.628822, 556.634615
Outstanding requests per worker:
74949 74435 75556 125044 53609 52646 51567 52169 
count  27754
count  27754
count  27754
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39618.2,      198091,     178392,      19699,     133946,      44446, 7859.908274, 15000.000000, 15000.000000, 16000.000000, 3635.204601, 2261.795998, 17007.356644, 575.067296
Outstanding requests per worker:
114308 116029 114759 148343 80492 52646 51567 52169 
count  9735
count  9735
count  9735
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33875.2,      169376,     152462,      16914,     116929,      35533, 9195.362103, 13000.000000, 15000.000000, 19000.000000, 2685.398717, 3163.053036, 19836.982727, 592.977116
Outstanding requests per worker:
149905 150325 151904 151823 150128 53315 51567 52169 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40052.4,      200262,     180420,      19842,     140376,      40044, 13743.684531, 25000.000000, 25000.000000, 25000.000000, 5182.676407, 7382.731915, 26065.376282, 604.583012
Outstanding requests per worker:
206542 191078 204646 170626 156776 65423 51567 52169 
count  3671
count  3671
count  3671
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31225.8,      156129,     140733,      15396,     110775,      29958, 15826.476577, 25000.000000, 27000.000000, 29000.000000, 4884.937850, 2428.793907, 29825.532913, 615.488379
Outstanding requests per worker:
266828 267836 258182 189282 156501 125592 51567 52169 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:39   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6208 pts/0    S+   13:39   0:00 /usr/lib/linux
memcache     11 73.2  0.0 138688 74496 pts/0    Sl+  13:39   0:34 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  13:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4962500092      instructions:u                                              

      47.822351958 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1914827264
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814039.812464,       0.0,      166666,     150060,      16606,      94466,      55594, 346.174000, 714.900000, 868.100000, 2021.200000, 379.962857,   0.000000, 3092.130899, 441.819965
Outstanding requests per worker:
12923 12830 13810 47042 50761 35615 35478 33901 
count  177487
count  177487
count  177487
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41723.4,      208617,     187750,      20867,     131383,      56367, 2255.831158, 6000.000000, 7000.000000, 7000.000000, 1724.034323, 473.793000, 7396.269798, 519.427057
Outstanding requests per worker:
40461 40073 41258 53609 50761 53861 52243 53813 
count  163797
count  163797
count  163797
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37019.4,      185097,     166298,      18799,     122116,      44182, 3907.728426, 6000.000000, 8000.000000, 12000.000000, 1563.497928, 821.694016, 12115.566254, 557.102250
Outstanding requests per worker:
79846 79268 80300 126326 51545 53861 52243 53813 
count  24842
count  24842
count  24842
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40609.8,      203049,     182505,      20544,     137430,      45075, 7687.369738, 15000.000000, 15000.000000, 16000.000000, 3529.184617, 1287.248015, 17074.407578, 577.472442
Outstanding requests per worker:
123586 118541 118918 178459 80550 53861 52243 53813 
count  11727
count  11727
count  11727
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34607.6,      173038,     155467,      17571,     119395,      36072, 9152.608953, 12000.000000, 14000.000000, 19000.000000, 2738.104274, 2628.496885, 20785.306931, 593.785305
Outstanding requests per worker:
149691 153819 164067 223996 149940 54278 52243 53813 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37360.0,      186800,     168218,      18582,     130921,      37297, 14159.908574, 25000.000000, 25000.000000, 25000.000000, 5122.375037, 7428.915024, 26576.330185, 604.060576
Outstanding requests per worker:
187232 192149 228066 240510 151570 82896 53797 53813 
count  4323
count  4323
count  4323
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32995.4,      164977,     148234,      16743,     116715,      31519, 15624.451615, 21000.000000, 27000.000000, 29000.000000, 4731.410714, 2591.041088, 29644.256592, 615.529184
Outstanding requests per worker:
236225 259333 278689 253650 156645 126740 53797 53813 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:40   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:40   0:00 /usr/lib/linux
memcache      9 71.5  0.0 140736 75968 pts/0    Sl+  13:40   0:34 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  13:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4975005083      instructions:u                                              

      47.861801650 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1768747520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
num_worker_connections 64
Creating worker on tid 2485252608
starting receive base loop
Created 512 connections total
Creating worker on tid 1889333760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814091.812516,       0.0,      165332,     148862,      16470,      93777,      55085, 236.395380, 456.700000, 917.000000, 2092.600000, 380.217471,   0.000000, 3088.588953, 442.914700
Outstanding requests per worker:
7796 7632 23843 53187 50817 36868 36725 35091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38355.8,      191779,     172555,      19224,     120830,      51725, 1397.644192, 2630.100000, 3268.800000, 4087.400000, 826.033077, 112.030998, 5481.310844, 518.482779
Outstanding requests per worker:
32150 31904 48375 53427 50817 52147 53160 52721 
count  156481
count  156481
count  156481
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43146.2,      215731,     194000,      21731,     141976,      52024, 4383.107037, 9000.000000, 9000.000000, 11000.000000, 2546.613257, 1401.424050, 11422.206879, 554.511830
Outstanding requests per worker:
69841 69399 85890 108413 51721 52147 53160 52721 
count  61491
count  61491
count  61491
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40007.8,      200039,     179699,      20340,     135272,      44427, 7093.974230, 17000.000000, 17000.000000, 18000.000000, 3914.702121, 3422.538042, 17730.972290, 576.297575
Outstanding requests per worker:
113603 113313 129737 152954 55279 52147 53160 52721 
count  11010
count  11010
count  11010
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33664.0,      168320,     151632,      16688,     116446,      35186, 9670.953986, 17000.000000, 18000.000000, 20000.000000, 3517.573070, 2344.847918, 20486.097336, 593.678399
Outstanding requests per worker:
155459 141856 171705 152407 125438 52147 53160 52721 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35926.4,      179632,     161787,      17845,     126149,      35638, 11346.048152, 15000.000000, 15000.000000, 23000.000000, 2828.815715, 6133.417130, 26460.201263, 605.779272
Outstanding requests per worker:
188676 174798 220690 164320 158784 52414 53160 52721 
count  3182
count  3182
count  3182
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34931.4,      174657,     157095,      17562,     123501,      33594, 17387.363650, 27000.000000, 28000.000000, 30000.000000, 6288.553534, 2662.285089, 30648.370743, 612.884312
Outstanding requests per worker:
218265 277673 267355 174103 170195 101719 53646 52721 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:41   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:41   0:00 /usr/lib/linux
memcache     10 71.5  0.0 140736 77952 pts/0    Sl+  13:41   0:34 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5042536259      instructions:u                                              

      48.046653245 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2516840960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1924198912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
Created 512 connections total
Creating worker on tid 2646274560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814143.812568,       0.0,      167786,     151025,      16761,      95453,      55572, 272.693425, 553.700000, 944.800000, 2137.100000, 383.580544,   0.000000, 3080.312967, 444.125562
Outstanding requests per worker:
10370 10248 24561 51757 50440 38934 38787 36366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38199.8,      190999,     171841,      19158,     120631,      51210, 1568.305344, 2632.000000, 3300.100000, 4066.100000, 786.806998, 251.405001, 4653.826237, 520.538859
Outstanding requests per worker:
38072 38397 53139 52813 50440 51807 53585 53179 
count  148810
count  148810
count  148810
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   42147.4,      210737,     189509,      21228,     138834,      50675, 4750.902521, 9000.000000, 10000.000000, 13000.000000, 2617.428522, 1723.613977, 13102.376938, 553.938821
Outstanding requests per worker:
78972 79766 94212 100827 52011 51807 53585 53179 
count  36051
count  36051
count  36051
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37706.0,      188530,     169773,      18757,     127892,      41881, 7558.780635, 17000.000000, 17000.000000, 17000.000000, 4066.288096, 3511.814117, 17707.569122, 578.325564
Outstanding requests per worker:
126740 125299 133294 163775 58468 51807 53585 53179 
count  12616
count  12616
count  12616
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34107.2,      170536,     153504,      17032,     117934,      35570, 9357.148498, 13000.000000, 18000.000000, 20000.000000, 3330.249813, 1506.343961, 21209.945679, 593.654784
Outstanding requests per worker:
156863 152967 175197 162617 109708 52916 53585 53179 
count  261
count  261
count  261
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38367.4,      191837,     172682,      19155,     134266,      38416, 11480.947947, 14000.000000, 15000.000000, 21000.000000, 2597.494080, 4593.632221, 27110.275269, 604.492744
Outstanding requests per worker:
211156 191149 239380 210858 155694 52921 53585 53179 
count  1609
count  1609
count  1609
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36534.6,      182673,     164326,      18347,     129137,      35189, 18009.935419, 28000.000000, 29000.000000, 30000.000000, 5878.870490, 4610.394001, 30755.687714, 613.754537
Outstanding requests per worker:
302128 252920 286539 222648 164407 93145 53625 53179 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:42   0:00 bash docker-en
memcache      9  0.0  0.0  62208  6272 pts/0    S+   13:42   0:00 /usr/lib/linux
memcache     10 73.1  0.0 139712 77312 pts/0    Sl+  13:42   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4982478707      instructions:u                                              

      47.644973421 seconds time elapsed

Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1918956032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814194.812619,       0.0,      164325,     147977,      16348,      92984,      54993, 250.919843, 561.100000, 878.900000, 1856.900000, 346.065832,   0.000000, 2745.383978, 441.301763
Outstanding requests per worker:
8568 9530 33209 50316 51144 40029 39877 37741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39953.8,      199769,     179863,      19906,     125875,      53988, 1611.637351, 3288.000000, 3819.300000, 4650.600000, 1027.838383, 135.204002, 5459.528923, 517.977672
Outstanding requests per worker:
37061 37518 66915 50316 51144 53502 52965 52374 
count  155242
count  155242
count  155242
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43824.0,      219120,     197082,      22038,     144428,      52654, 4715.833535, 10000.000000, 10000.000000, 12000.000000, 2775.424257, 1149.369955, 13117.867470, 554.262540
Outstanding requests per worker:
78907 79357 109508 91989 52223 53502 52965 52374 
count  46734
count  46734
count  46734
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.0,      173150,     155871,      17279,     117757,      38114, 6257.433070, 9000.000000, 10000.000000, 18000.000000, 2397.406461, 2504.658937, 18085.802078, 579.796819
Outstanding requests per worker:
125677 127137 151840 161641 52648 53502 52965 52374 
count  12719
count  12719
count  12719
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40344.0,      201720,     181550,      20170,     139169,      42381, 10591.162451, 18000.000000, 19000.000000, 21000.000000, 4342.375169, 1282.058001, 21344.354630, 592.788306
Outstanding requests per worker:
159569 172250 191372 166591 126560 53502 52965 52374 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32177.8,      160889,     144889,      16000,     112886,      32003, 11392.821130, 14000.000000, 15000.000000, 23000.000000, 2649.764998, 5455.408096, 23235.948563, 605.816991
Outstanding requests per worker:
204275 248662 221153 196744 171581 53502 52965 52374 
count  28
count  28
count  28
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35108.4,      175542,     158055,      17487,     124211,      33844, 17695.018567, 29000.000000, 29000.000000, 30000.000000, 6177.183282, 4285.641193, 31226.972580, 614.404233
Outstanding requests per worker:
253927 313074 250437 206946 183180 85846 52965 52374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:43   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:43   0:00 /usr/lib/linux
memcache      9 71.5  0.0 140736 74496 pts/0    Sl+  13:43   0:34 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  13:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        5029922866      instructions:u                                              

      47.435396862 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2097541632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1505423872
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814246.812671,       0.0,      163184,     146840,      16344,      92474,      54366, 267.343290, 607.700000, 930.600000, 1803.500000, 341.081944,   0.000000, 2588.743925, 441.803351
Outstanding requests per worker:
9865 11489 35276 50560 52209 41596 41437 39217 
count  194071
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   39311.8,      196559,     177042,      19517,     123663,      53379, 1727.560205, 3440.500000, 3999.400000, 6000.000000, 1090.644443, 163.258001, 5985.576153, 517.555936
Outstanding requests per worker:
42652 43870 73238 52196 52209 52291 51964 51453 
count  153883
count  153883
count  153883
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   43850.6,      219253,     197302,      21951,     144763,      52539, 4884.116920, 10000.000000, 10000.000000, 12000.000000, 2702.551039, 1109.948039, 11969.788551, 554.655432
Outstanding requests per worker:
87690 89244 120799 83756 52427 52291 51964 51453 
count  33795
count  33795
count  33795
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33238.0,      166190,     149356,      16834,     112298,      37058, 6531.874158, 9000.000000, 11000.000000, 16000.000000, 2312.495431, 2280.729055, 17885.147095, 576.542509
Outstanding requests per worker:
137351 133892 174556 149830 53093 52291 51964 51453 
count  9240
count  9240
count  9240
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40142.6,      200713,     180607,      20106,     138230,      42377, 10998.113088, 19000.000000, 19000.000000, 21000.000000, 4499.047178, 1588.675022, 21449.514389, 591.378557
Outstanding requests per worker:
179720 188588 211169 171099 97326 52291 51964 51453 
count  5932
count  5932
count  5932
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33035.6,      165178,     148837,      16341,     115947,      32890, 11863.499832, 16000.000000, 17000.000000, 23000.000000, 3209.634931, 3560.933113, 24014.238358, 606.498162
Outstanding requests per worker:
247211 269630 225629 200912 148071 52291 51964 51453 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36784.2,      183921,     165705,      18216,     130302,      35403, 17603.722921, 29000.000000, 29000.000000, 30000.000000, 6123.785707, 7334.109783, 30555.809021, 613.771811
Outstanding requests per worker:
316641 328598 225244 212444 147811 81205 51964 51453 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:44   0:00 bash docker-en
memcache      8  0.0  0.0  62208  6272 pts/0    S+   13:44   0:00 /usr/lib/linux
memcache      9 73.0  0.0 139712 73792 pts/0    Sl+  13:44   0:34 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4989375027      instructions:u                                              

      47.736451568 seconds time elapsed

Error response from daemon: error while removing network: network caching_network id 7ede47cd2ef83bcff699f071dd3fb1770a0762e1f015c831dab48c30407dad46 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1795944960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575814297.812722,       0.0,      166591,     149922,      16669,      94304,      55618, 291.711741, 680.800000, 978.900000, 1752.200000, 349.225444,   0.000000, 2605.021954, 442.423327
Outstanding requests per worker:
11668 13398 37151 53050 53958 43431 43269 40004 
count  197779
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40054.2,      200271,     180316,      19955,     126159,      54157, 1865.727263, 3639.100000, 4140.900000, 6000.000000, 1100.284809, 182.428002, 5738.331795, 518.767503
Outstanding requests per worker:
46042 47710 82486 53050 53958 52321 51076 53311 
count  139701
count  139701
count  139701
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   41788.4,      208942,     187939,      21003,     137771,      50168, 5203.495424, 11000.000000, 11000.000000, 12000.000000, 2764.535828, 1283.278942, 12248.175621, 555.325212
Outstanding requests per worker:
93724 95350 127139 83449 53958 52321 51076 53311 
count  28866
count  28866
count  28866
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34004.6,      170023,     153133,      16890,     115203,      37930, 6599.677525, 9000.000000, 11000.000000, 17000.000000, 2179.582457, 2361.792088, 18208.522797, 576.882259
Outstanding requests per worker:
145258 149254 178347 162582 54124 52321 51076 53311 
count  6271
count  6271
count  6271
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   38196.8,      190984,     171850,      19134,     131434,      40416, 11611.307682, 19000.000000, 20000.000000, 21000.000000, 4334.878465, 2027.609110, 21634.742737, 590.168542
Outstanding requests per worker:
191826 204438 230217 175631 113718 52321 51076 53311 
count  4065
count  4065
count  4065
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33224.8,      166124,     149612,      16512,     116233,      33379, 12189.183219, 15000.000000, 17000.000000, 25000.000000, 3457.085552, 4208.090782, 26944.250107, 603.473973
Outstanding requests per worker:
275287 281143 238015 193693 163663 52730 51076 53311 
count  50
count  50
count  50
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37060.8,      185304,     166783,      18521,     130926,      35857, 18002.556307, 30000.000000, 30000.000000, 30000.000000, 6197.478721, 1803.225994, 31093.172073, 612.764604
Outstanding requests per worker:
325043 331446 258195 221621 174692 79142 51076 53311 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:45   0:00 bash docker-en
memcache     10  0.0  0.0  62208  6272 pts/0    S+   13:45   0:00 /usr/lib/linux
memcache     11 71.7  0.0 139712 73664 pts/0    Sl+  13:45   0:34 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  13:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        4979116503      instructions:u                                              

      47.567078912 seconds time elapsed

