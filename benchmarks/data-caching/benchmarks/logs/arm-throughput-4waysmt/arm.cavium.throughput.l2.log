+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1693053440
starting receive base loop
num_worker_connections 85
Creating worker on tid 922808832
starting receive base loop
num_worker_connections 85
Creating worker on tid 160428544
starting receive base loop
num_worker_connections 85
Creating worker on tid 3693015552
starting receive base loop
num_worker_connections 85
Creating worker on tid 2928013824
starting receive base loop
Created 512 connections total
Creating worker on tid 2165633536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321315.319740,       0.0,      341748,     307600,      34148,     204401,     103199,   9.809358,  20.700000,  27.100000,  43.300000,   9.108820,   0.000000, 119.299002, 480.388150
Outstanding requests per worker:
196 205 228 192 206 223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.4,      750033,     675247,      74786,     509991,     165256,   8.385979,  15.500000,  18.000000,  22.100000,   4.825910,   0.263000,  30.297000, 579.200125
Outstanding requests per worker:
220 215 219 209 203 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150015.2,      750077,     675046,      75031,     538366,     136680,   8.639076,  15.900000,  18.600000,  23.000000,   4.996351,   0.316000,  33.201002, 626.018716
Outstanding requests per worker:
212 208 215 225 233 214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150002.2,      750012,     675440,      74572,     553981,     121459,   8.794693,  16.300000,  19.000000,  23.300000,   5.092690,   0.295000,  32.972999, 650.659172
Outstanding requests per worker:
230 250 188 200 227 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150012.4,      750063,     674564,      75499,     563180,     111384,   8.935492,  16.400000,  19.400000,  23.700000,   5.167980,   0.228000,  32.882001, 668.273249
Outstanding requests per worker:
223 231 232 206 208 232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150009.8,      750050,     674894,      75156,     571354,     103540,   9.006879,  16.600000,  19.600000,  23.700000,   5.195268,   0.294000,  36.697000, 680.451207
Outstanding requests per worker:
220 217 236 229 219 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150013.0,      750066,     674755,      75311,     577275,      97480,   9.098515,  16.700000,  19.800000,  24.500000,   5.280929,   0.277000,  33.512998, 689.984107
Outstanding requests per worker:
216 223 244 234 264 198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  20:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:48   0:00 /usr/lib/linux
memcache      7  350  0.0 443072 144768 pts/0   Sl+  20:48   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18397921293      instructions:u                                              
        4927468840      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         545497760      armv8_pmuv3_0/l2d_cache_refill/:u                                   
             94539      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.121178240 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2050159104
starting receive base loop
num_worker_connections 85
Creating worker on tid 1277096448
starting receive base loop
num_worker_connections 85
Creating worker on tid 512094720
starting receive base loop
num_worker_connections 85
Creating worker on tid 4044681728
starting receive base loop
num_worker_connections 85
Creating worker on tid 3282301440
starting receive base loop
Created 512 connections total
Creating worker on tid 2517299712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321357.319782,       0.0,      351378,     316368,      35010,     211470,     104898,  11.346107,  24.200000,  32.000000,  57.100000,  11.159680,   0.000000, 150.407001, 483.580918
Outstanding requests per worker:
238 241 234 225 211 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.4,      769248,     692272,      76976,     523472,     168800,   9.151120,  16.700000,  19.700000,  24.100000,   5.202974,   0.334000,  33.877000, 580.866706
Outstanding requests per worker:
262 224 219 258 246 207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153847.0,      769236,     692215,      77021,     552891,     139324,   9.404524,  17.100000,  20.300000,  24.900000,   5.362227,   0.248000,  35.827000, 627.380791
Outstanding requests per worker:
251 239 247 239 257 222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.0,      769271,     692195,      77076,     568667,     123528,   9.603535,  17.400000,  20.700000,  25.900000,   5.493847,   0.377000,  45.306999, 652.192436
Outstanding requests per worker:
243 237 233 243 258 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.8,      769230,     691977,      77253,     579233,     112744,   9.777628,  17.700000,  21.200000,  26.300000,   5.598632,   0.371000,  37.296001, 669.832911
Outstanding requests per worker:
243 245 247 271 261 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.8,      769280,     692240,      77040,     587315,     104925,   9.850393,  17.800000,  21.400000,  26.500000,   5.638496,   0.262000,  42.656001, 681.565555
Outstanding requests per worker:
262 232 259 215 285 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.4,      769218,     691899,      77319,     593146,      98753,   9.932425,  18.000000,  21.600000,  26.500000,   5.681605,   0.347000,  41.646000, 691.925105
Outstanding requests per worker:
238 282 246 247 267 275 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:49   0:00 /usr/lib/linux
memcache      7  350  0.0 446144 149312 pts/0   Sl+  20:49   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18858533560      instructions:u                                              
        4856592282      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         521120073      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            103088      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.301399026 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1536356864
starting receive base loop
num_worker_connections 85
Creating worker on tid 764408320
starting receive base loop
num_worker_connections 85
Creating worker on tid 2028032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3531993600
starting receive base loop
num_worker_connections 85
Creating worker on tid 2769613312
starting receive base loop
Created 512 connections total
Creating worker on tid 2007233024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321398.319823,       0.0,      364305,     327918,      36387,     219553,     108365,  14.907972,  32.300000,  45.300000,  81.400000,  16.753083,   0.000000, 294.454992, 485.327933
Outstanding requests per worker:
299 262 279 273 280 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.4,      789478,     710765,      78713,     538680,     172085,  10.798225,  19.300000,  23.400000,  29.200000,   6.160640,   0.260000,  59.482001, 582.692588
Outstanding requests per worker:
283 291 275 282 281 314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157905.8,      789530,     710819,      78711,     568314,     142505,  11.067121,  19.400000,  24.200000,  29.800000,   6.277830,   0.376000,  43.830000, 628.672987
Outstanding requests per worker:
301 281 343 275 292 269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157905.2,      789527,     710774,      78753,     584246,     126528,  11.479718,  20.200000,  24.800000,  31.600000,   6.579842,   0.416000,  62.995002, 653.498195
Outstanding requests per worker:
307 302 295 297 305 305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157889.4,      789448,     710160,      79288,     594884,     115276,  11.677394,  20.400000,  25.300000,  32.400000,   6.688424,   0.360000,  56.155998, 670.319442
Outstanding requests per worker:
310 306 295 337 322 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157917.6,      789589,     710892,      78697,     603525,     107367,  11.750276,  20.700000,  25.400000,  32.400000,   6.750478,   0.317000,  70.998996, 682.442492
Outstanding requests per worker:
297 333 289 307 309 305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.0,      789536,     710396,      79140,     609912,     100484,  11.916780,  20.800000,  25.700000,  33.100000,   6.827219,   0.351000,  61.492998, 693.577130
Outstanding requests per worker:
295 340 288 322 333 291 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:50   0:00 /usr/lib/linux
memcache      7  350  0.0 449216 145152 pts/0   Sl+  20:50   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19436164180      instructions:u                                              
        4861182860      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         539077907      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            134254      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.240455194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2387079680
starting receive base loop
num_worker_connections 85
Creating worker on tid 1612640768
starting receive base loop
num_worker_connections 85
Creating worker on tid 847639040
starting receive base loop
num_worker_connections 85
Creating worker on tid 85258752
starting receive base loop
num_worker_connections 85
Creating worker on tid 3617845760
starting receive base loop
Created 512 connections total
Creating worker on tid 2852844032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321439.319864,       0.0,      368125,     330998,      37127,     221807,     109191,  13.533684,  28.200000,  37.700000,  71.700000,  14.704172,   0.000000, 274.327010, 486.615460
Outstanding requests per worker:
260 287 287 256 275 274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.6,      789494,     710711,      78783,     539013,     171698,  10.755385,  19.300000,  23.200000,  29.500000,   6.200435,   0.335000,  60.616001, 582.656730
Outstanding requests per worker:
315 286 252 275 285 290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     711204,      78293,     569288,     141916,  11.119420,  19.900000,  24.000000,  30.800000,   6.418343,   0.318000,  58.210999, 629.413978
Outstanding requests per worker:
297 293 297 295 270 326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.6,      789504,     710724,      78780,     584438,     126286,  11.432565,  20.300000,  24.600000,  31.800000,   6.601482,   0.315000,  60.743999, 653.905388
Outstanding requests per worker:
297 306 313 280 295 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157886.6,      789434,     710536,      78898,     595525,     115011,  11.647387,  20.700000,  25.000000,  32.500000,   6.735114,   0.429000,  63.405000, 671.068476
Outstanding requests per worker:
328 331 317 317 310 296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157916.6,      789584,     710903,      78681,     603435,     107468,  11.712804,  20.700000,  25.300000,  32.300000,   6.748949,   0.459000,  63.064002, 682.982092
Outstanding requests per worker:
281 335 311 323 325 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.4,      789523,     710392,      79131,     609481,     100911,  11.938022,  21.300000,  25.600000,  33.900000,   6.984682,   0.430000,  69.821000, 693.512846
Outstanding requests per worker:
314 331 290 324 321 333 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:50   0:00 /usr/lib/linux
memcache      8  351  0.0 448192 148608 pts/0   Sl+  20:50   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19383067595      instructions:u                                              
        4790631922      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         513693674      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            126990      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.320396419 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2440032768
starting receive base loop
num_worker_connections 85
Creating worker on tid 1663627776
starting receive base loop
num_worker_connections 85
Creating worker on tid 898626048
starting receive base loop
num_worker_connections 85
Creating worker on tid 136245760
starting receive base loop
num_worker_connections 85
Creating worker on tid 3666211328
starting receive base loop
Created 512 connections total
Creating worker on tid 2903831040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321480.319905,       0.0,      370936,     333572,      37364,     223081,     110491,  21.152689,  50.200000,  69.600000, 101.500000,  23.289468,   0.000000, 340.974003, 484.715021
Outstanding requests per worker:
341 298 374 351 316 396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162160.0,      810801,     729954,      80847,     555242,     174712,  12.905916,  22.200000,  27.600000,  36.100000,   7.370357,   0.482000,  69.659002, 585.445632
Outstanding requests per worker:
340 347 343 366 329 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162165.8,      810830,     730376,      80454,     585474,     144902,  13.380670,  23.000000,  28.600000,  37.800000,   7.674266,   0.383000,  71.332000, 630.375596
Outstanding requests per worker:
382 371 342 366 395 353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162165.0,      810826,     729786,      81040,     600779,     129007,  13.845629,  23.800000,  29.600000,  39.400000,   7.977730,   0.412000,  77.023998, 655.045911
Outstanding requests per worker:
350 374 398 341 408 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.2,      810882,     729901,      80981,     612472,     117429,  14.138935,  24.000000,  30.300000,  40.100000,   8.122816,   0.337000,  78.869998, 672.409402
Outstanding requests per worker:
398 365 367 353 390 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.8,      810850,     729728,      81122,     620672,     109056,  14.374004,  24.200000,  30.800000,  40.800000,   8.224251,   0.378000,  77.062003, 684.336131
Outstanding requests per worker:
394 389 379 387 391 360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162167.6,      810839,     729711,      81128,     627321,     102390,  14.590380,  24.500000,  31.200000,  41.200000,   8.353270,   0.611000,  83.012000, 695.159096
Outstanding requests per worker:
405 378 407 381 398 407 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:51   0:00 /usr/lib/linux
memcache      7  360  0.0 514176 153472 pts/0   Sl+  20:51   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20023401166      instructions:u                                              
        4802372198      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         527310465      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            190366      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.891608818 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1469510144
starting receive base loop
num_worker_connections 85
Creating worker on tid 697299456
starting receive base loop
num_worker_connections 85
Creating worker on tid 4229886464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3464884736
starting receive base loop
num_worker_connections 85
Creating worker on tid 2702504448
starting receive base loop
Created 512 connections total
Creating worker on tid 1940124160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321520.319945,       0.0,      374325,     336867,      37458,     225268,     111599,  18.778160,  41.400000,  60.200000,  91.100000,  19.804213,   0.000000, 264.782012, 484.310054
Outstanding requests per worker:
347 333 325 337 340 344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.4,      810788,     729674,      81114,     553993,     175681,  12.908066,  22.200000,  27.800000,  35.700000,   7.339435,   0.495000,  70.393004, 583.792513
Outstanding requests per worker:
395 348 377 321 349 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.0,      810831,     729890,      80941,     584262,     145628,  13.450856,  22.900000,  28.800000,  37.900000,   7.682185,   0.489000,  73.209003, 629.730742
Outstanding requests per worker:
370 379 345 353 370 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.0,      810791,     730105,      80686,     601372,     128733,  13.895562,  23.600000,  29.800000,  39.100000,   7.959085,   0.506000,  76.385997, 655.009938
Outstanding requests per worker:
383 394 357 365 375 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162165.8,      810830,     729401,      81429,     611941,     117460,  14.249096,  24.000000,  30.700000,  40.100000,   8.144548,   0.444000,  79.038002, 672.208712
Outstanding requests per worker:
413 367 372 402 400 389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162183.2,      810917,     730002,      80915,     620758,     109244,  14.362183,  24.600000,  30.600000,  41.000000,   8.287439,   0.474000,  82.861997, 683.819895
Outstanding requests per worker:
411 393 384 378 394 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.0,      810846,     729777,      81069,     627466,     102311,  14.502457,  24.200000,  31.000000,  40.900000,   8.260526,   0.499000,  79.355001, 695.048631
Outstanding requests per worker:
379 412 377 371 407 405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:52   0:00 /usr/lib/linux
memcache      7  370  0.0 514176 150272 pts/0   Sl+  20:52   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20016282048      instructions:u                                              
        4716680702      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         521768118      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            177850      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.941190306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2175595008
starting receive base loop
num_worker_connections 85
Creating worker on tid 1403253248
starting receive base loop
num_worker_connections 85
Creating worker on tid 638251520
starting receive base loop
num_worker_connections 85
Creating worker on tid 4170838528
starting receive base loop
num_worker_connections 85
Creating worker on tid 3405836800
starting receive base loop
Created 512 connections total
Creating worker on tid 2643456512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321561.319986,       0.0,      375289,     337606,      37683,     226102,     111504,  19.104399,  41.900000,  61.500000,  95.800000,  21.036558,   0.000000, 288.659006, 485.617936
Outstanding requests per worker:
355 369 322 324 309 343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162130.8,      810655,     730195,      80460,     554973,     175222,  13.143255,  22.800000,  28.000000,  37.300000,   7.584732,   0.524000,  78.354001, 585.025794
Outstanding requests per worker:
348 365 352 371 392 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.8,      810825,     729858,      80967,     585008,     144850,  13.693034,  23.000000,  29.400000,  38.400000,   7.781017,   0.275000,  70.183001, 630.388554
Outstanding requests per worker:
402 413 354 369 383 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.0,      810791,     729762,      81029,     601073,     128689,  14.044969,  23.500000,  30.100000,  39.500000,   7.997953,   0.419000,  75.985998, 655.076069
Outstanding requests per worker:
396 374 406 375 399 387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729882,      80984,     613548,     116334,  14.431174,  24.300000,  30.800000,  41.100000,   8.263769,   0.500000,  78.833997, 673.528917
Outstanding requests per worker:
359 363 443 377 406 398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.8,      810870,     729853,      81017,     620588,     109265,  14.644228,  24.300000,  31.300000,  41.700000,   8.368582,   0.562000,  76.508999, 684.336714
Outstanding requests per worker:
373 332 370 404 423 423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.0,      810761,     729491,      81270,     627195,     102296,  14.777781,  24.800000,  31.500000,  42.300000,   8.468705,   0.506000,  81.849001, 694.923227
Outstanding requests per worker:
407 395 409 431 386 405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:52   0:00 /usr/lib/linux
memcache      7  341  0.0 514176 158720 pts/0   Sl+  20:52   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20085349783      instructions:u                                              
        4780514789      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         536320746      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            189805      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.379524298 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2438459904
starting receive base loop
num_worker_connections 85
Creating worker on tid 1663627776
starting receive base loop
num_worker_connections 85
Creating worker on tid 898626048
starting receive base loop
num_worker_connections 85
Creating worker on tid 136245760
starting receive base loop
num_worker_connections 85
Creating worker on tid 3666211328
starting receive base loop
Created 512 connections total
Creating worker on tid 2903831040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321602.320027,       0.0,      391900,     352489,      39411,     237528,     114961,  34.575854,  77.300000,  90.800000, 134.300000,  33.526455,   0.000000, 382.721007, 489.749734
Outstanding requests per worker:
874 932 915 940 914 957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166416.6,      832084,     749158,      82926,     570620,     178538,  36.375264,  94.300000, 118.000000, 152.200000,  36.250640,   0.745000, 257.153988, 587.104509
Outstanding requests per worker:
1116 1106 1184 1166 1099 1184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166502.4,      832513,     749854,      82659,     602184,     147670,  43.691439, 124.900000, 147.400000, 192.000000,  47.482931,   0.842000, 351.698995, 632.094382
Outstanding requests per worker:
1280 1252 1286 1415 1259 1279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166451.4,      832258,     748776,      83482,     618266,     130510,  50.938808, 151.500000, 180.800000, 229.800000,  59.075430,   0.645000, 397.073001, 656.643642
Outstanding requests per worker:
1525 1421 1683 1331 1471 1522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166453.0,      832266,     749333,      82933,     629569,     119764,  57.404241, 177.000000, 209.200000, 265.000000,  69.521266,   0.736000, 427.437991, 672.843901
Outstanding requests per worker:
1612 1623 1742 1672 1599 1829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166718.2,      833592,     750121,      83471,     639145,     110976,  60.390193, 188.200000, 218.500000, 271.500000,  72.884230,   0.901000, 402.354985, 686.501343
Outstanding requests per worker:
1643 1591 1817 1631 1609 1576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165864.6,      829324,     746553,      82771,     642474,     104079,  66.337356, 195.900000, 227.600000, 288.000000,  75.703025,   0.959000, 432.998002, 695.408510
Outstanding requests per worker:
1991 2286 2496 2310 2402 2483 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:53   0:00 /usr/lib/linux
memcache      7  361  0.0 518272 159936 pts/0   Sl+  20:53   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20728892818      instructions:u                                              
        5039373739      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         553874498      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2055087      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.111574004 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1537405440
starting receive base loop
num_worker_connections 85
Creating worker on tid 764408320
starting receive base loop
num_worker_connections 85
Creating worker on tid 2028032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3531993600
starting receive base loop
num_worker_connections 85
Creating worker on tid 2769613312
starting receive base loop
Created 512 connections total
Creating worker on tid 2007233024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321643.320068,       0.0,      385701,     347039,      38662,     233226,     113813,  35.277794,  70.700000,  90.500000, 334.400000,  58.509725,   0.000000, 832.973003, 487.983480
Outstanding requests per worker:
483 454 483 576 567 791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166768.8,      833845,     750459,      83386,     571453,     179006,  16.692799,  26.700000,  35.400000,  47.500000,   9.751143,   0.473000, 233.156994, 586.037577
Outstanding requests per worker:
484 507 528 455 488 426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166669.4,      833348,     750393,      82955,     602724,     147669,  17.210006,  27.500000,  36.500000,  48.800000,   9.626530,   0.606000,  83.832003, 632.484304
Outstanding requests per worker:
465 467 519 492 500 473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166655.0,      833276,     750276,      83000,     619836,     130440,  17.820891,  28.600000,  37.900000,  50.900000,  10.062912,   0.686000,  93.053997, 657.429049
Outstanding requests per worker:
553 457 468 515 531 512 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166665.2,      833327,     750226,      83101,     630652,     119574,  18.168596,  29.200000,  38.800000,  52.100000,  10.258940,   0.716000,  92.941999, 673.691030
Outstanding requests per worker:
512 491 502 490 548 553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166682.6,      833414,     749747,      83667,     639007,     110740,  18.406450,  29.500000,  39.500000,  52.700000,  10.407544,   0.818000,  97.240999, 685.951380
Outstanding requests per worker:
502 495 483 540 513 526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166423.0,      832116,     748879,      83237,     644802,     104077,  21.279012,  38.800000,  50.900000,  72.900000,  14.095758,   0.748000, 139.809996, 696.129491
Outstanding requests per worker:
681 645 748 758 716 771 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:54   0:00 /usr/lib/linux
memcache      7  360  0.0 518272 158848 pts/0   Sl+  20:54   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20659856014      instructions:u                                              
        4759614830      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         523153895      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            327589      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.091424813 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1429074432
starting receive base loop
num_worker_connections 85
Creating worker on tid 656994816
starting receive base loop
num_worker_connections 85
Creating worker on tid 4186960384
starting receive base loop
num_worker_connections 85
Creating worker on tid 3424580096
starting receive base loop
num_worker_connections 85
Creating worker on tid 2659578368
starting receive base loop
Created 512 connections total
Creating worker on tid 1897198080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321684.320109,       0.0,      382373,     344079,      38294,     231094,     112985,  58.767453, 110.800000, 129.400000, 189.500000,  43.740683,   0.000000, 400.849015, 487.981972
Outstanding requests per worker:
2154 2059 2193 2199 2153 2279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170844.6,      854224,     768736,      85488,     583910,     184826,  85.818070, 155.400000, 184.200000, 232.200000,  50.910514,   1.199000, 356.606007, 584.339902
Outstanding requests per worker:
2440 2526 2651 2840 2718 2891 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170891.4,      854458,     769312,      85146,     617667,     151645, 102.526836, 200.000000, 232.000000, 289.100000,  69.295101,   1.107000, 438.728988, 632.058867
Outstanding requests per worker:
2902 2939 3398 3287 3072 3208 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170767.8,      853840,     768469,      85371,     635153,     133316, 119.945823, 232.900000, 271.700000, 345.500000,  80.253696,   1.212000, 545.610011, 658.410299
Outstanding requests per worker:
3343 3351 3783 3956 3932 3813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170507.2,      852537,     767752,      84785,     646474,     121278, 144.456936, 257.500000, 304.600000, 405.900000,  80.934503,   2.405000, 798.126996, 675.121143
Outstanding requests per worker:
4149 4125 4687 4662 4662 4582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170911.2,      854557,     768997,      85560,     655837,     113160, 165.740837, 295.400000, 364.900000, 519.600000,  95.742926,   2.132000, 839.873016, 687.462262
Outstanding requests per worker:
4356 4622 5207 5192 5079 5101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170659.6,      853299,     767903,      85396,     662238,     105665, 183.433853, 309.300000, 394.200000, 615.900000, 105.857348,   1.455000, 894.127011, 697.628366
Outstanding requests per worker:
4896 5207 6009 5900 5798 5647 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:55   0:00 /usr/lib/linux
memcache      8  350  0.0 520320 168384 pts/0   Sl+  20:55   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21551480047      instructions:u                                              
        4745997137      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         578305261      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4572052      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.320360655 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1883501056
starting receive base loop
num_worker_connections 85
Creating worker on tid 1108013568
starting receive base loop
num_worker_connections 85
Creating worker on tid 345633280
starting receive base loop
num_worker_connections 85
Creating worker on tid 3875598848
starting receive base loop
num_worker_connections 85
Creating worker on tid 3113218560
starting receive base loop
Created 512 connections total
Creating worker on tid 2350838272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321726.320151,       0.0,      393658,     354133,      39525,     238637,     115496,  51.154463,  94.800000, 112.900000, 174.400000,  40.313533,   0.000000, 415.120006, 489.214250
Outstanding requests per worker:
1817 1853 1858 1769 1795 2040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170437.0,      852186,     767219,      84967,     584641,     182578,  79.614760, 134.300000, 157.800000, 203.500000,  40.645494,   1.264000, 384.445995, 587.580723
Outstanding requests per worker:
2453 2609 2663 2868 2822 2758 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170473.0,      852366,     767643,      84723,     617131,     150512, 110.422999, 181.700000, 208.500000, 265.700000,  50.846077,   1.138000, 397.872001, 633.298531
Outstanding requests per worker:
3432 3338 3502 3555 3659 3549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170896.6,      854484,     769488,      84996,     636255,     133233, 131.770395, 217.200000, 256.400000, 325.300000,  61.338380,   1.839000, 502.897978, 658.284572
Outstanding requests per worker:
3719 3740 4044 3910 4183 4223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170945.6,      854729,     769201,      85528,     648070,     121131, 144.900354, 242.200000, 284.800000, 385.000000,  70.658725,   2.457000, 615.540028, 675.394596
Outstanding requests per worker:
4032 4169 4511 4409 4661 4509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171174.6,      855874,     770154,      85720,     657165,     112989, 157.306900, 268.300000, 323.400000, 446.700000,  82.482938,   2.673000, 753.014028, 687.594194
Outstanding requests per worker:
4315 4329 4861 4601 4728 4801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170713.2,      853567,     768143,      85424,     662210,     105933, 172.808951, 296.100000, 364.400000, 501.300000,  92.910762,   2.710000, 879.835010, 697.059792
Outstanding requests per worker:
4807 4585 5408 5278 5584 5638 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:55   0:00 /usr/lib/linux
memcache      7  351  0.0 521344 163456 pts/0   Sl+  20:55   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21661785125      instructions:u                                              
        4930270011      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         602306192      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5065941      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.410477900 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1913188864
starting receive base loop
num_worker_connections 85
Creating worker on tid 1142878720
starting receive base loop
num_worker_connections 85
Creating worker on tid 377876992
starting receive base loop
num_worker_connections 85
Creating worker on tid 3910464000
starting receive base loop
num_worker_connections 85
Creating worker on tid 3148083712
starting receive base loop
Created 512 connections total
Creating worker on tid 2383081984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321766.320191,       0.0,      387268,     348323,      38945,     234406,     113917,  79.024605, 139.500000, 166.800000, 353.400000,  66.917180,   0.000000, 712.871015, 489.340882
Outstanding requests per worker:
3245 3396 3598 3432 3485 4450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173858.6,      869294,     782406,      86888,     597190,     185216, 162.692988, 250.200000, 298.800000, 438.900000,  73.240294,   3.287000, 737.362981, 588.487607
Outstanding requests per worker:
5117 5360 5927 5928 5811 6591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174514.6,      872574,     785357,      87217,     631915,     153442, 224.523188, 374.900000, 450.100000, 588.800000, 108.946155,   7.701000, 946.327984, 634.345307
Outstanding requests per worker:
6243 6771 8079 7770 7560 8149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174483.8,      872420,     785488,      86932,     650573,     134915, 278.861397, 504.000000, 613.800000, 827.100000, 157.120789,  25.593000, 1341.655970, 660.146054
Outstanding requests per worker:
7693 8141 9870 9409 9466 9972 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174250.2,      871252,     783939,      87313,     660725,     123214, 338.080779, 630.300000, 792.100000, 1054.400000, 204.721283,  32.862999, 1633.196950, 676.271873
Outstanding requests per worker:
8917 9334 12166 11476 11859 11954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174227.2,      871137,     783700,      87437,     669105,     114595, 400.845156, 802.500000, 972.400000, 1250.300000, 257.148920,  25.215000, 1863.330007, 688.746751
Outstanding requests per worker:
10246 11014 14419 13423 13897 14002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173391.6,      866959,     780451,      86508,     673523,     106928, 475.549407, 988.300000, 1172.600000, 1445.400000, 314.036299,  32.903999, 1866.858959, 698.137499
Outstanding requests per worker:
11954 13292 17249 16481 16825 16647 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:56   0:00 /usr/lib/linux
memcache      7  360  0.0 523392 179264 pts/0   Sl+  20:56   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21871586594      instructions:u                                              
        4704944837      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         567889667      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3278899      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.080031761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1715925504
starting receive base loop
num_worker_connections 85
Creating worker on tid 941552128
starting receive base loop
num_worker_connections 85
Creating worker on tid 176550400
starting receive base loop
num_worker_connections 85
Creating worker on tid 3709137408
starting receive base loop
num_worker_connections 85
Creating worker on tid 2946757120
starting receive base loop
Created 512 connections total
Creating worker on tid 2181755392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321807.320232,       0.0,      385575,     347263,      38312,     233486,     113777,  76.936947, 136.800000, 159.200000, 240.900000,  54.891447,   0.000000, 581.664026, 488.742719
Outstanding requests per worker:
3095 3368 3289 3331 3322 3745 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174172.6,      870864,     784012,      86852,     597168,     186844, 151.794030, 227.600000, 259.400000, 338.700000,  58.539154,   2.298000, 515.974998, 586.844236
Outstanding requests per worker:
5012 5222 5191 5357 5480 5472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174783.2,      873917,     786460,      87457,     632525,     153935, 204.218463, 311.900000, 369.600000, 483.900000,  83.067599,   7.466000, 737.623990, 633.654366
Outstanding requests per worker:
6163 6235 6816 6730 7186 7151 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174891.0,      874456,     786825,      87631,     651856,     134969, 249.997221, 399.100000, 494.300000, 677.500000, 117.055030,  29.530000, 996.670008, 660.289626
Outstanding requests per worker:
7048 7416 8433 8302 8558 8489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174788.4,      873943,     786720,      87223,     663791,     122929, 297.035913, 497.800000, 652.200000, 848.200000, 155.746379,  16.747000, 1104.311943, 676.896540
Outstanding requests per worker:
8172 8158 10056 9990 10399 9959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174900.8,      874505,     786991,      87514,     672336,     114655, 342.114521, 633.700000, 791.200000, 1016.900000, 200.540179,  28.214000, 1521.653056, 688.756336
Outstanding requests per worker:
8855 8970 11762 11532 11791 11779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173773.2,      868867,     782192,      86675,     674638,     107554, 404.686834, 771.000000, 958.300000, 1223.700000, 244.657535,  31.397998, 1607.072949, 697.343154
Outstanding requests per worker:
10570 10419 14154 14135 14422 14533 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:57   0:00 /usr/lib/linux
memcache      7  370  0.0 522368 169536 pts/0   Sl+  20:57   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21986696750      instructions:u                                              
        4627449295      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         578681080      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4698132      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.961715311 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2088563200
starting receive base loop
num_worker_connections 85
Creating worker on tid 1317401088
starting receive base loop
num_worker_connections 85
Creating worker on tid 555020800
starting receive base loop
num_worker_connections 85
Creating worker on tid 4087607808
starting receive base loop
num_worker_connections 85
Creating worker on tid 3322606080
starting receive base loop
Created 512 connections total
Creating worker on tid 2560225792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321847.320272,       0.0,      383471,     345168,      38303,     232051,     113117,  78.402920, 135.000000, 172.200000, 476.000000,  83.561331,   0.000000, 931.787014, 488.633248
Outstanding requests per worker:
3173 3074 3197 3144 3256 5192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174336.0,      871681,     784829,      86852,     598491,     186338, 155.636543, 228.400000, 260.400000, 436.900000,  76.965084,   2.713000, 938.811004, 587.691231
Outstanding requests per worker:
4919 4997 5270 5113 5305 6206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175239.8,      876200,     789007,      87193,     635032,     153975, 199.466898, 300.200000, 351.800000, 520.700000,  88.357816,   3.304000, 933.547974, 634.308751
Outstanding requests per worker:
5767 5756 6531 6534 6333 7089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175246.2,      876232,     788550,      87682,     653133,     135417, 232.768409, 357.600000, 437.400000, 607.400000, 106.633297,   5.704000, 1047.932982, 660.150065
Outstanding requests per worker:
6596 6458 7740 7664 7527 8209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175183.2,      875917,     788281,      87636,     664379,     123902, 266.659034, 422.200000, 514.600000, 729.200000, 126.459581,  13.314000, 1238.463044, 675.891558
Outstanding requests per worker:
7391 7398 8938 8605 8833 9554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175082.4,      875413,     787639,      87774,     672769,     114870, 305.966528, 515.600000, 656.700000, 908.000000, 166.477769,  30.514000, 1536.846042, 688.959885
Outstanding requests per worker:
8231 8014 10062 10031 10395 11016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174476.6,      872384,     786089,      86295,     678638,     107451, 357.932502, 616.900000, 797.400000, 1070.800000, 199.990133,  27.352000, 1618.935943, 698.163385
Outstanding requests per worker:
9734 9288 12014 11755 12365 12610 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:57   0:00 /usr/lib/linux
memcache      7  360  0.0 523392 171968 pts/0   Sl+  20:57   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21991155132      instructions:u                                              
        4703205374      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         573994204      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4398794      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.970377352 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1674899968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
num_worker_connections 64
Creating worker on tid 2393960960
starting receive base loop
Created 512 connections total
Creating worker on tid 1798042112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321888.320313,       0.0,      360871,     324632,      36239,     216358,     108274,  10.752004,  23.000000,  29.600000,  54.500000,  12.093985,   0.000000, 189.926997, 482.381339
Outstanding requests per worker:
180 179 160 190 169 182 179 189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.8,      754675,     679399,      75276,     513694,     165705,   9.649321,  18.000000,  22.000000,  27.600000,   6.120226,   0.156000,  40.727001, 581.248723
Outstanding requests per worker:
181 190 192 163 215 196 183 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150940.2,      754702,     679511,      75191,     542900,     136611,  10.284025,  19.500000,  23.100000,  30.700000,   6.665791,   0.187000,  71.041003, 628.145418
Outstanding requests per worker:
213 194 195 209 208 194 186 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150954.6,      754774,     679465,      75309,     558327,     121138,  10.583380,  19.700000,  24.000000,  31.400000,   6.810067,   0.199000,  65.628998, 652.761483
Outstanding requests per worker:
187 226 196 174 196 194 207 192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150939.8,      754700,     678962,      75738,     568071,     110891,  10.855121,  20.200000,  24.500000,  32.600000,   7.013510,   0.198000,  67.780003, 669.924526
Outstanding requests per worker:
190 223 185 232 217 174 225 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150935.4,      754678,     679063,      75615,     575606,     103457,  11.139232,  21.000000,  24.800000,  34.200000,   7.268096,   0.195000,  66.272996, 681.724102
Outstanding requests per worker:
192 226 212 195 224 210 213 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150946.2,      754732,     679525,      75207,     581898,      97627,  11.208890,  20.900000,  25.200000,  34.000000,   7.271251,   0.180000,  72.798997, 691.678353
Outstanding requests per worker:
237 250 196 217 179 211 230 221 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:58   0:00 /usr/lib/linux
memcache      7  361  0.0 444096 145984 pts/0   Sl+  20:58   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18549224628      instructions:u                                              
        4902772027      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         536837426      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            109170      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.970071690 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2067526144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
num_worker_connections 64
Creating worker on tid 2788553216
starting receive base loop
Created 512 connections total
Creating worker on tid 2192634368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321930.320355,       0.0,      371113,     333807,      37306,     223389,     110418,  13.359275,  28.500000,  37.500000,  75.500000,  15.518175,   0.000000, 249.825001, 485.089210
Outstanding requests per worker:
225 216 203 218 213 193 199 207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153836.6,      769184,     692696,      76488,     524483,     168213,  11.200791,  20.500000,  25.500000,  33.100000,   7.155855,   0.176000,  63.458003, 581.480729
Outstanding requests per worker:
196 261 233 202 190 255 216 227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.4,      769213,     692503,      76710,     553687,     138816,  11.931158,  21.900000,  26.800000,  36.500000,   7.732740,   0.236000,  73.347002, 628.218481
Outstanding requests per worker:
228 213 231 228 245 229 214 248 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.4,      769218,     692753,      76465,     569313,     123440,  12.470564,  22.900000,  27.800000,  38.400000,   8.084526,   0.230000,  73.862001, 652.650493
Outstanding requests per worker:
256 217 220 235 243 264 265 243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.0,      769271,     692187,      77084,     578740,     113447,  12.911681,  23.500000,  28.700000,  39.600000,   8.369228,   0.227000,  79.796001, 668.736109
Outstanding requests per worker:
241 283 261 246 215 218 231 253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153813.8,      769070,     692122,      76948,     586970,     105152,  13.230494,  23.600000,  29.500000,  40.400000,   8.522435,   0.193000,  74.920997, 681.636629
Outstanding requests per worker:
289 235 245 303 288 267 256 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153882.8,      769415,     692579,      76836,     593378,      99201,  13.377753,  24.000000,  29.600000,  41.300000,   8.635689,   0.231000,  81.667997, 691.353285
Outstanding requests per worker:
270 231 238 253 307 228 261 269 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:59   0:00 /usr/lib/linux
memcache      7  342  0.0 447168 146432 pts/0   Sl+  20:59   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18946820585      instructions:u                                              
        4805183767      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         525044245      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            140143      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.250850839 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2042229248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
num_worker_connections 64
Creating worker on tid 2761748992
starting receive base loop
Created 512 connections total
Creating worker on tid 2165830144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321971.320396,       0.0,      373383,     336054,      37329,     225285,     110769,  20.030992,  45.100000,  64.400000,  94.800000,  21.505449,   0.000000, 258.359998, 486.652401
Outstanding requests per worker:
300 316 279 286 328 304 319 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.2,      784337,     706298,      78039,     535568,     170730,  14.714196,  26.000000,  32.600000,  45.400000,   9.550770,   0.226000,  94.385996, 583.309126
Outstanding requests per worker:
310 296 331 301 317 321 328 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156889.6,      784449,     706060,      78389,     565276,     140784,  15.417893,  26.400000,  34.400000,  46.900000,   9.824902,   0.295000,  87.131999, 629.161372
Outstanding requests per worker:
319 324 269 284 308 267 360 315 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156839.8,      784200,     706413,      77787,     580924,     125489,  15.980679,  27.600000,  35.600000,  48.800000,  10.256680,   0.218000, 112.980999, 653.703823
Outstanding requests per worker:
354 322 367 336 302 337 325 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156884.2,      784422,     706145,      78277,     592023,     114122,  16.474105,  28.600000,  36.600000,  50.600000,  10.624455,   0.275000, 102.375001, 671.188692
Outstanding requests per worker:
361 360 297 357 291 330 325 285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156839.0,      784196,     705989,      78207,     599141,     106848,  16.937663,  29.500000,  38.000000,  53.000000,  11.023787,   0.231000, 107.251003, 683.026162
Outstanding requests per worker:
356 370 338 328 342 350 370 339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156825.6,      784129,     705773,      78356,     605680,     100093,  18.176288,  33.100000,  42.400000,  64.400000,  12.725642,   0.280000, 128.904000, 693.146574
Outstanding requests per worker:
404 373 354 387 399 392 380 364 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:59   0:00 /usr/lib/linux
memcache      7  371  0.0 447168 151168 pts/0   Sl+  20:59   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19334391203      instructions:u                                              
        4763855347      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         512025870      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            235205      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.941409709 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2018570752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3929403904
starting receive base loop
num_worker_connections 64
Creating worker on tid 3333485056
starting receive base loop
num_worker_connections 64
Creating worker on tid 2737566208
starting receive base loop
Created 512 connections total
Creating worker on tid 2141647360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322012.320437,       0.0,      380765,     342634,      38131,     229589,     113045,  16.088206,  34.600000,  46.200000,  84.300000,  18.059497,   0.000000, 304.760009, 485.837471
Outstanding requests per worker:
274 258 226 274 253 215 236 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156841.6,      784209,     705851,      78358,     535088,     170763,  13.647299,  24.300000,  30.300000,  41.500000,   8.753834,   0.229000,  81.321999, 583.007849
Outstanding requests per worker:
260 300 278 261 270 320 265 253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156850.2,      784252,     706440,      77812,     565918,     140522,  14.714714,  26.000000,  32.700000,  45.000000,   9.478079,   0.187000,  88.494003, 630.004216
Outstanding requests per worker:
290 287 273 296 291 318 282 290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.8,      784350,     706093,      78257,     580875,     125218,  15.099479,  26.700000,  33.500000,  46.500000,   9.736001,   0.234000,  90.902999, 653.673993
Outstanding requests per worker:
282 308 289 283 293 301 301 297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156857.6,      784289,     705980,      78309,     591649,     114331,  15.725910,  27.300000,  35.100000,  48.300000,  10.118938,   0.278000,  96.888997, 670.908557
Outstanding requests per worker:
330 287 298 314 276 321 331 307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.6,      784349,     706394,      77955,     599852,     106542,  15.948302,  27.600000,  35.400000,  48.900000,  10.204519,   0.189000,  92.348002, 683.432654
Outstanding requests per worker:
340 321 309 306 306 321 313 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156874.0,      784371,     705310,      79061,     605349,      99961,  16.227154,  28.400000,  36.000000,  50.400000,  10.478756,   0.274000,  99.776000, 693.388402
Outstanding requests per worker:
296 320 337 287 319 290 343 328 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:00   0:00 /usr/lib/linux
memcache      7  362  0.0 448192 148160 pts/0   Sl+  21:00   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19394967651      instructions:u                                              
        4707224824      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         528985311      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            195075      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.069623085 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1855255040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1261171200
starting receive base loop
num_worker_connections 64
Creating worker on tid 665252352
starting receive base loop
num_worker_connections 64
Creating worker on tid 69333504
starting receive base loop
num_worker_connections 64
Creating worker on tid 3768381952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3172463104
starting receive base loop
num_worker_connections 64
Creating worker on tid 2579165696
starting receive base loop
Created 512 connections total
Creating worker on tid 1983246848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322055.320480,       0.0,      479167,     431429,      47738,     294043,     137386,  14.343177,  34.100000,  46.800000,  86.600000,  19.722187,   0.000000, 334.017992, 498.952815
Outstanding requests per worker:
343 358 339 354 353 329 360 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160049.8,      800250,     720003,      80247,     553902,     166101,  16.297778,  28.300000,  36.700000,  50.900000,  10.666029,   0.185000, 120.261997, 594.660044
Outstanding requests per worker:
303 351 313 319 352 359 335 305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159958.0,      799791,     719880,      79911,     579183,     140697,  16.993324,  29.600000,  38.000000,  53.300000,  11.056320,   0.328000, 100.570999, 634.063429
Outstanding requests per worker:
357 375 389 357 382 318 406 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159765.6,      798829,     719398,      79431,     593898,     125500,  19.237999,  35.500000,  47.200000,  74.400000,  14.344050,   0.327000, 155.188993, 656.795767
Outstanding requests per worker:
538 611 477 521 513 531 496 472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159494.4,      797473,     718367,      79106,     603693,     114674,  35.170348,  94.400000, 120.700000, 162.100000,  37.855099,   0.288000, 296.575010, 673.676230
Outstanding requests per worker:
848 832 848 870 812 838 785 912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159817.0,      799086,     718897,      80189,     612347,     106550,  44.615048, 134.800000, 159.200000, 207.400000,  52.680654,   0.375000, 343.681008, 685.451002
Outstanding requests per worker:
958 983 1041 971 928 1020 931 911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158788.4,      793943,     714632,      79311,     614396,     100236,  50.278372, 151.300000, 178.400000, 227.100000,  59.481140,   0.327000, 351.469010, 694.558916
Outstanding requests per worker:
1743 1777 1814 1779 1690 1751 1693 1644 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:01   0:00 /usr/lib/linux
memcache      7  351  0.0 515200 155712 pts/0   Sl+  21:01   2:13 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20294154737      instructions:u                                              
        4781733157      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         533366261      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1097747      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.350068183 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2374234624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1781920256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
Created 512 connections total
Creating worker on tid 2501374464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322095.320520,       0.0,      386871,     347916,      38955,     234136,     113780,  25.093511,  63.500000,  79.300000, 109.300000,  26.331288,   0.000000, 329.674006, 488.181854
Outstanding requests per worker:
535 528 490 510 488 551 553 497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159735.2,      798677,     719228,      79449,     546524,     172704,  29.955720,  79.100000,  95.800000, 132.400000,  30.252976,   0.286000, 257.986009, 584.865123
Outstanding requests per worker:
735 731 708 691 669 724 619 675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159823.8,      799120,     719459,      79661,     576261,     143198,  38.517007, 109.600000, 136.200000, 179.600000,  43.342819,   0.338000, 280.164987, 630.218723
Outstanding requests per worker:
819 838 742 819 971 847 751 741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159888.8,      799445,     719685,      79760,     592035,     127650,  43.042852, 128.800000, 152.400000, 198.800000,  50.104370,   0.376000, 338.627011, 654.093355
Outstanding requests per worker:
927 921 896 928 871 817 857 912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159763.4,      798818,     718940,      79878,     602709,     116231,  48.553486, 150.200000, 178.700000, 231.200000,  59.467567,   0.288000, 373.737007, 671.667839
Outstanding requests per worker:
996 1035 1032 1088 975 1068 945 1228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160018.2,      800092,     719644,      80448,     611382,     108262,  52.255760, 159.400000, 192.400000, 248.500000,  63.849255,   0.376000, 414.386004, 684.070728
Outstanding requests per worker:
989 1124 981 1079 997 1053 1142 987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159744.4,      798723,     718865,      79858,     618492,     100373,  56.928147, 180.200000, 216.800000, 275.500000,  72.404642,   0.343000, 454.174012, 694.382867
Outstanding requests per worker:
1238 1161 1190 1208 1220 1251 1265 1190 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:01   0:00 /usr/lib/linux
memcache      7  362  0.0 449216 158976 pts/0   Sl+  21:01   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19934732156      instructions:u                                              
        4699408606      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         524692055      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1447890      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.090080364 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1991504384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322136.320561,       0.0,      384281,     345779,      38502,     231656,     114123,  43.972182,  93.900000, 110.100000, 154.500000,  39.026068,   0.000000, 380.905986, 485.634133
Outstanding requests per worker:
1157 1246 1232 1186 1249 1326 1201 1241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162587.2,      812937,     731772,      81165,     557651,     174121,  71.184797, 150.700000, 178.400000, 228.500000,  55.846220,   0.274000, 344.249010, 587.138171
Outstanding requests per worker:
1650 1709 1709 1677 1589 1566 1772 1641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162762.2,      813812,     732890,      80922,     587621,     145269,  89.031142, 215.400000, 253.600000, 319.400000,  83.460183,   0.356000, 496.003985, 631.632508
Outstanding requests per worker:
2090 2010 2014 2038 1814 2042 1910 2015 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162570.0,      812851,     731866,      80985,     603043,     128823, 109.554885, 269.800000, 319.700000, 422.300000, 107.878241,   0.430000, 697.209001, 655.661628
Outstanding requests per worker:
2601 2399 2164 2395 2455 2612 2325 2521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161513.4,      807568,     726899,      80669,     610234,     116665, 143.130812, 324.700000, 380.900000, 518.100000, 121.525654,   0.520000, 800.593972, 672.591767
Outstanding requests per worker:
3439 3568 3427 3638 3427 3681 3681 3442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161908.2,      809542,     728616,      80926,     619668,     108948, 196.817868, 398.000000, 487.600000, 685.100000, 136.798277,   0.338000, 1008.108974, 685.059096
Outstanding requests per worker:
4155 4445 4336 4533 3930 4831 4788 4150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161677.6,      808389,     727945,      80444,     625982,     101963, 230.047701, 481.000000, 575.800000, 779.700000, 158.186560,   1.609000, 1118.355036, 694.440474
Outstanding requests per worker:
5305 5664 5186 5495 5126 5506 5955 4969 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:02   0:00 /usr/lib/linux
memcache      8  361  0.0 515200 163584 pts/0   Sl+  21:02   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20468342691      instructions:u                                              
        4834410917      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         541001491      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3831857      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.981505136 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2195911168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322178.320603,       0.0,      488183,     439310,      48873,     299743,     139567,  31.703098,  81.400000,  93.000000, 128.700000,  34.040422,   0.000000, 310.966998, 500.623403
Outstanding requests per worker:
1512 1453 1375 1343 1393 1456 1384 1434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164100.2,      820502,     738283,      82219,     567421,     170862, 112.809989, 178.400000, 202.700000, 253.300000,  49.150388,   0.707000, 412.151992, 594.227960
Outstanding requests per worker:
2895 2927 3228 2994 2952 3041 3169 3018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165098.6,      825494,     743125,      82369,     599268,     143857, 169.560849, 261.400000, 301.200000, 378.700000,  69.188606,   1.074000, 699.930012, 636.187644
Outstanding requests per worker:
3940 3796 3961 3952 4126 3967 4296 4069 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165635.2,      828177,     745041,      83136,     616288,     128753, 207.647305, 324.100000, 387.000000, 521.300000,  90.565858,   2.673000, 807.376027, 659.053765
Outstanding requests per worker:
4520 4515 4628 4661 4765 4414 5021 4784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165684.8,      828425,     745559,      82866,     627379,     118180, 237.145847, 386.000000, 463.100000, 633.100000, 110.858445,   1.601000, 918.399990, 674.605861
Outstanding requests per worker:
5210 5139 5495 5349 5221 4858 5560 5428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165506.8,      827535,     744703,      82832,     635660,     109043, 268.702024, 439.000000, 548.000000, 768.300000, 131.922634,  17.076001, 1083.397031, 687.231680
Outstanding requests per worker:
5778 5819 6158 5930 6043 5859 6441 6071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165175.8,      825880,     743374,      82506,     640284,     103090, 304.913294, 524.200000, 650.600000, 852.600000, 155.826427,  14.709000, 1199.841022, 696.715082
Outstanding requests per worker:
6494 6967 6942 7009 6945 6750 7438 7053 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:03   0:00 /usr/lib/linux
memcache      7  360  0.0 519296 166272 pts/0   Sl+  21:03   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21278908916      instructions:u                                              
        4798325758      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         576599117      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5442793      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.980171002 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1610936832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
num_worker_connections 64
Creating worker on tid 2334913024
starting receive base loop
Created 512 connections total
Creating worker on tid 1738994176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322220.320645,       0.0,      382153,     344089,      38064,     231209,     112880,  61.229795, 121.700000, 140.800000, 203.100000,  49.187945,   0.000000, 422.468990, 488.224823
Outstanding requests per worker:
2100 2128 2061 2042 2085 2282 2031 2244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164068.6,      820344,     738608,      81736,     562708,     175900, 145.692478, 222.400000, 259.500000, 338.800000,  59.998065,   0.456000, 517.911971, 586.164467
Outstanding requests per worker:
3915 3702 3843 3686 3781 3734 3677 3720 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164677.4,      823388,     740814,      82574,     594183,     146631, 209.934410, 328.000000, 381.500000, 481.500000,  87.269267,   1.856000, 801.079988, 631.324589
Outstanding requests per worker:
5105 4940 5173 5104 4963 4891 4840 5035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164936.0,      824681,     742228,      82453,     612347,     129881, 265.507884, 433.400000, 508.900000, 663.000000, 118.748222,  16.123001, 929.736018, 656.653325
Outstanding requests per worker:
5857 5941 6257 6301 6130 5981 6210 6099 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165043.6,      825219,     742533,      82686,     624560,     117973, 317.439367, 539.900000, 632.200000, 843.700000, 154.389454,   5.019000, 1290.776014, 673.169716
Outstanding requests per worker:
6818 6969 7294 7417 7223 6915 7116 7219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164888.2,      824442,     741619,      82823,     631765,     109854, 366.627928, 666.200000, 807.000000, 992.900000, 199.387486,  36.848001, 1513.321996, 686.119516
Outstanding requests per worker:
7802 8039 8219 8636 8132 8289 8145 8700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164436.8,      822185,     739800,      82385,     636957,     102843, 421.213439, 826.100000, 955.200000, 1161.700000, 243.731004,  43.269001, 1654.247999, 695.606340
Outstanding requests per worker:
9385 9253 9730 10067 9756 9695 9455 9822 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:03   0:00 /usr/lib/linux
memcache      7  351  0.0 518272 160384 pts/0   Sl+  21:03   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20726030101      instructions:u                                              
        4691448157      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         558860070      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4288535      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.370482092 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1999958528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
num_worker_connections 64
Creating worker on tid 2721444352
starting receive base loop
Created 512 connections total
Creating worker on tid 2125525504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322261.320686,       0.0,      383450,     344995,      38455,     231680,     113315,  77.197357, 149.600000, 178.800000, 305.800000,  65.795461,   0.000000, 608.546972, 487.715747
Outstanding requests per worker:
2706 2784 2688 2827 2978 2796 2756 3526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165289.8,      826450,     743923,      82527,     565347,     178576, 213.496983, 321.100000, 361.700000, 454.900000,  81.797927,   4.060000, 746.089995, 584.722055
Outstanding requests per worker:
5841 6100 5886 5702 5798 6209 5982 6206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165933.8,      829670,     747103,      82567,     598825,     148278, 340.498653, 509.800000, 575.600000, 731.600000, 124.862567,  52.654002, 971.148014, 631.213248
Outstanding requests per worker:
8570 8778 8570 8518 8477 8980 8575 8727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165963.6,      829819,     747077,      82742,     615681,     131396, 464.220601, 716.300000, 809.100000, 960.200000, 181.319864,  63.836999, 1204.342008, 655.685398
Outstanding requests per worker:
10921 11109 11080 11431 11315 11856 11286 11498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165187.2,      825937,     743574,      82363,     624649,     118925, 605.018494, 937.000000, 1045.700000, 1228.000000, 236.909426,  98.991998, 1681.817055, 672.958444
Outstanding requests per worker:
14216 13948 14156 14463 14692 14975 14523 14718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165012.2,      825062,     742457,      82605,     632318,     110139, 751.497424, 1149.700000, 1288.300000, 1478.300000, 290.024962, 101.535000, 1848.821998, 685.543587
Outstanding requests per worker:
17548 17056 17665 17677 18008 17895 17889 18013 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163878.2,      819392,     737363,      82029,     634982,     102381, 914.927540, 1377.100000, 1523.900000, 1808.100000, 339.083474,  87.245002, 2207.062960, 695.470416
Outstanding requests per worker:
21548 20819 21622 21843 22110 21819 21738 21998 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:04   0:00 /usr/lib/linux
memcache      7  342  0.0 517248 166784 pts/0   Sl+  21:04   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20779527074      instructions:u                                              
        4595816739      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         543080018      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2481546      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.330632322 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1906635264
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
num_worker_connections 64
Creating worker on tid 2627531264
starting receive base loop
Created 512 connections total
Creating worker on tid 2031612416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322302.320727,       0.0,      383271,     344966,      38305,     230863,     114103,  81.525973, 154.000000, 183.000000, 338.800000,  74.903893,   0.000000, 790.516973, 485.358053
Outstanding requests per worker:
3034 3055 2987 3009 2934 2842 2839 4284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164655.4,      823278,     741079,      82199,     563562,     177517, 232.611281, 347.300000, 399.800000, 571.200000,  96.222637,   3.453000, 962.772012, 584.992203
Outstanding requests per worker:
6332 6616 6415 6456 6676 6500 6656 7201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165528.0,      827641,     744982,      82659,     597208,     147774, 379.341097, 567.200000, 658.500000, 835.000000, 143.042802,  24.037000, 1207.793951, 630.988663
Outstanding requests per worker:
9694 9164 9214 9543 10002 9477 9425 9865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165171.0,      825856,     743353,      82503,     613088,     130265, 517.085673, 811.500000, 918.900000, 1123.900000, 207.753043,  33.126999, 1477.556944, 655.863104
Outstanding requests per worker:
12875 12502 12183 12785 12862 12546 12431 13456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164446.4,      822233,     740142,      82091,     621272,     118870, 678.549754, 1052.000000, 1180.300000, 1432.300000, 269.370617,  74.945003, 1757.727027, 672.578902
Outstanding requests per worker:
16518 16341 15745 16304 16646 16009 16241 16750 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164376.8,      821885,     739240,      82645,     629531,     109709, 848.822204, 1274.200000, 1419.100000, 1742.000000, 317.106083, 129.234999, 2123.089075, 685.770554
Outstanding requests per worker:
20300 20128 19552 19864 20215 19578 19964 20217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163374.0,      816871,     734776,      82095,     632356,     102420, 1025.751183, 1535.900000, 1706.000000, 2026.900000, 371.125728, 168.061003, 2526.351929, 695.440480
Outstanding requests per worker:
24206 24535 23858 24316 25018 23771 24103 24308 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:05   0:00 /usr/lib/linux
memcache      7  362  0.0 517248 170688 pts/0   Sl+  21:05   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20687051434      instructions:u                                              
        4753495230      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         536680267      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2735569      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.960719746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2226188800
starting receive base loop
num_worker_connections 64
Creating worker on tid 1628959232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1035661824
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2946953728
starting receive base loop
Created 512 connections total
Creating worker on tid 2351034880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322343.320768,       0.0,      391676,     352733,      38943,     237800,     114933,  87.178680, 168.800000, 205.400000, 368.200000,  75.906956,   0.000000, 633.944988, 490.744013
Outstanding requests per worker:
3304 3152 3435 3359 3290 3112 3369 4626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167223.0,      836116,     753128,      82988,     573225,     179903, 257.734480, 383.700000, 432.100000, 534.600000,  95.367790,  12.579000, 902.320981, 586.401188
Outstanding requests per worker:
7784 7327 7605 7576 7536 7384 7653 8278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167137.2,      835687,     752404,      83283,     604137,     148267, 443.560199, 646.600000, 712.900000, 843.100000, 148.927285,  88.010997, 1283.249021, 632.133516
Outstanding requests per worker:
12184 11377 11894 11971 11680 11560 11998 12412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166644.8,      833225,     749718,      83507,     619052,     130666, 648.556049, 917.600000, 1005.800000, 1196.300000, 205.424510, 126.053005, 1544.049978, 657.628895
Outstanding requests per worker:
16636 15847 16588 16389 16325 16119 16304 17260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165993.6,      829969,     746799,      83170,     628203,     118596, 865.171300, 1206.100000, 1305.400000, 1541.300000, 261.201207, 114.481002, 1983.680964, 674.127923
Outstanding requests per worker:
21424 20699 21642 21426 21122 21350 21622 21843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166019.8,      830100,     747046,      83054,     636624,     110422, 1093.586364, 1494.000000, 1635.600000, 1890.000000, 314.638466, 200.212002, 2386.827946, 686.144863
Outstanding requests per worker:
26303 25620 26430 26424 26111 26219 26669 26898 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165005.2,      825027,     742475,      82552,     638636,     103839, 1329.226838, 1818.200000, 1957.200000, 2243.500000, 356.470746, 295.619994, 2946.463108, 695.271073
Outstanding requests per worker:
31629 31234 32376 31917 31490 31928 32122 32616 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:06   0:00 /usr/lib/linux
memcache      7  362  0.0 519296 168512 pts/0   Sl+  21:06   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20937384223      instructions:u                                              
        4607552717      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         562466843      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2062533      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.040370356 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2548036096
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322386.320811,       0.0,      512812,     461582,      51230,     316442,     145140,  66.856059, 163.600000, 197.500000, 296.100000,  75.194138,   0.000000, 622.381985, 503.118856
Outstanding requests per worker:
3862 3572 3696 3624 3692 3867 3960 4855 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168325.8,      841630,     757939,      83691,     583445,     174494, 310.333724, 473.100000, 535.300000, 679.200000, 121.445290,  12.925000, 1071.717024, 595.647334
Outstanding requests per worker:
9748 9897 9515 9735 9630 9622 9796 10508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168021.2,      840107,     756490,      83617,     609884,     146606, 573.435367, 840.000000, 933.100000, 1105.800000, 194.730322, 112.980001, 1527.814984, 635.856873
Outstanding requests per worker:
16117 15755 15713 16085 15858 15618 15637 16511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167041.2,      835207,     751206,      84001,     621514,     129692, 861.006058, 1237.800000, 1362.900000, 1569.000000, 270.865284, 177.965999, 1952.787042, 659.267824
Outstanding requests per worker:
22736 22542 22411 22448 22595 22325 22617 23404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166298.8,      831495,     748837,      82658,     631050,     117787, 1175.202766, 1650.100000, 1792.200000, 2027.600000, 332.114649, 302.742004, 2551.337957, 675.892910
Outstanding requests per worker:
29940 29491 29428 29700 30149 29767 29666 30389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165789.4,      828948,     745760,      83188,     636476,     109284, 1503.956241, 2064.800000, 2243.500000, 2526.100000, 394.468684, 567.067027, 2926.011086, 687.772943
Outstanding requests per worker:
37254 37309 36992 37241 37443 37302 37053 37950 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164690.2,      823452,     740996,      82456,     638936,     102060, 1852.326106, 2517.900000, 2710.800000, 3003.300000, 454.765108, 843.518019, 3390.543938, 697.335801
Outstanding requests per worker:
45483 45245 44933 45668 45513 45751 45309 46178 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:06   0:00 /usr/lib/linux
memcache      7  353  0.0 521344 169792 pts/0   Sl+  21:06   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21436505472      instructions:u                                              
        4699148970      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         560938047      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1797299      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.540228717 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1970598400
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322429.320854,       0.0,      510898,     459395,      51503,     315182,     144213,  68.667447, 168.000000, 202.500000, 295.100000,  74.728773,   0.000000, 548.493028, 503.226676
Outstanding requests per worker:
3914 3670 3912 3841 3912 3885 3726 4800 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168451.0,      842256,     758517,      83739,     584826,     173691, 311.695176, 475.000000, 532.900000, 645.700000, 117.838468,  37.216000, 901.417971, 596.441519
Outstanding requests per worker:
9488 9624 9812 9957 9770 9753 9720 10223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167894.2,      839472,     755703,      83769,     610115,     145588, 574.430839, 824.900000, 922.500000, 1080.500000, 186.161028, 104.406998, 1337.741971, 636.981428
Outstanding requests per worker:
15806 15872 15523 16134 16057 16271 15834 16348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167370.6,      836854,     753147,      83707,     623528,     129619, 862.033473, 1185.400000, 1290.600000, 1475.300000, 244.639455, 183.706000, 1937.034965, 659.765488
Outstanding requests per worker:
22247 22420 22269 22513 22519 22491 22477 23045 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166548.4,      832743,     749651,      83092,     631622,     118029, 1163.572862, 1551.900000, 1684.100000, 1937.900000, 295.656847, 289.521009, 2321.990967, 676.166847
Outstanding requests per worker:
29623 29598 29440 29453 29614 29326 29467 29727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165839.6,      829199,     746036,      83163,     636966,     109070, 1492.894750, 1941.700000, 2120.200000, 2431.300000, 347.402221, 526.109993, 2741.826057, 687.775717
Outstanding requests per worker:
37241 37183 36675 36920 37044 36801 36938 37192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164183.2,      820917,     739060,      81857,     637140,     101920, 1849.722778, 2377.900000, 2600.000000, 2888.500000, 395.728267, 719.582975, 3324.506044, 697.399503
Outstanding requests per worker:
46068 45574 45076 45758 45363 45448 45236 45535 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:07   0:00 /usr/lib/linux
memcache      7  353  0.0 521344 169216 pts/0   Sl+  21:07   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21464912252      instructions:u                                              
        4806978968      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         558759483      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1362172      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.381235729 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1735520768
starting receive base loop
num_worker_connections 171
Creating worker on tid 280556032
starting receive base loop
num_worker_connections 171
Creating worker on tid 3115250176
starting receive base loop
num_worker_connections 170
Creating worker on tid 1657598464
starting receive base loop
num_worker_connections 170
Creating worker on tid 205386240
starting receive base loop
Created 1024 connections total
Creating worker on tid 3048141312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322470.320895,       0.0,      321447,     289255,      32192,     191845,      97410,  29.431074,  65.200000,  84.100000, 148.900000,  30.515597,   0.000000, 418.626010, 478.583330
Outstanding requests per worker:
344 359 361 354 333 344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149997.9,      749990,     675234,      74756,     509744,     165490,  14.104752,  26.100000,  29.200000,  36.200000,   7.992654,   0.527000,  46.725001, 579.392966
Outstanding requests per worker:
384 330 374 377 349 349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.0,      750026,     675128,      74898,     537933,     137195,  14.420281,  26.700000,  30.200000,  36.700000,   8.150280,   0.523000,  47.292002, 625.685042
Outstanding requests per worker:
355 382 369 377 371 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150009.4,      750048,     675222,      74826,     553637,     121585,  14.737447,  27.400000,  30.900000,  38.000000,   8.390517,   0.526000,  49.964000, 650.853901
Outstanding requests per worker:
361 414 370 377 352 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150001.4,      750008,     674575,      75433,     563121,     111454,  14.961789,  27.600000,  31.000000,  40.200000,   8.580501,   0.514000,  52.143000, 667.484074
Outstanding requests per worker:
381 392 399 360 384 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.0,      750026,     674687,      75339,     570974,     103713,  15.151991,  27.900000,  31.800000,  40.400000,   8.704540,   0.560000,  54.072000, 679.605942
Outstanding requests per worker:
385 417 354 389 399 383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150028.4,      750143,     674951,      75192,     576764,      98187,  15.254789,  28.400000,  32.200000,  39.800000,   8.728526,   0.489000,  52.733000, 688.851438
Outstanding requests per worker:
341 385 393 379 378 388 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:08   0:00 /usr/lib/linux
memcache      7  357  0.0 441024 149248 pts/0   Sl+  21:08   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18295494487      instructions:u                                              
        4965583298      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         540191297      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            140188      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      35.971130161 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 885715456
starting receive base loop
num_worker_connections 171
Creating worker on tid 3719229952
starting receive base loop
num_worker_connections 171
Creating worker on tid 2261578240
starting receive base loop
num_worker_connections 170
Creating worker on tid 801305088
starting receive base loop
num_worker_connections 170
Creating worker on tid 3644060160
starting receive base loop
Created 1024 connections total
Creating worker on tid 2194469376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322511.320936,       0.0,      335179,     301591,      33588,     200997,     100594,  38.809750,  81.700000, 114.800000, 179.700000,  46.407204,   0.000000, 1018.082023, 482.110706
Outstanding requests per worker:
429 417 428 440 418 416 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.2,      769217,     692112,      77105,     522356,     169756,  16.857285,  31.000000,  35.800000,  45.400000,   9.649630,   0.655000,  58.060002, 579.269953
Outstanding requests per worker:
433 463 422 484 426 415 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.4,      769288,     692467,      76821,     551722,     140745,  17.323039,  32.100000,  37.200000,  45.200000,   9.856939,   0.606000,  55.337999, 625.641511
Outstanding requests per worker:
468 427 435 440 458 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153830.8,      769155,     692164,      76991,     568187,     123977,  17.749301,  32.800000,  38.500000,  46.700000,  10.151353,   0.686000,  58.061998, 651.898521
Outstanding requests per worker:
486 430 479 431 454 519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.6,      769249,     692204,      77045,     578836,     113368,  18.053765,  33.500000,  39.100000,  47.400000,  10.331398,   0.669000,  59.852999, 669.456935
Outstanding requests per worker:
475 495 504 454 460 452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153859.2,      769297,     691842,      77455,     586636,     105206,  18.289385,  33.700000,  39.600000,  48.600000,  10.475411,   0.583000,  59.432998, 681.731851
Outstanding requests per worker:
449 484 469 501 459 488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.6,      769289,     692478,      76811,     593356,      99122,  18.402322,  34.000000,  39.900000,  49.000000,  10.548892,   0.606000,  63.975997, 691.642084
Outstanding requests per worker:
468 480 498 455 470 506 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:08   0:00 /usr/lib/linux
memcache      7  339  0.0 446144 158208 pts/0   Sl+  21:08   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18755320448      instructions:u                                              
        4927572199      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         528308449      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            170624      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.591157403 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1431826944
starting receive base loop
num_worker_connections 171
Creating worker on tid 4266783232
starting receive base loop
num_worker_connections 171
Creating worker on tid 2806510080
starting receive base loop
num_worker_connections 170
Creating worker on tid 1346236928
starting receive base loop
num_worker_connections 170
Creating worker on tid 4188992000
starting receive base loop
Created 1024 connections total
Creating worker on tid 2739401216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322552.320977,       0.0,      341532,     307353,      34179,     205000,     102353,  58.348551, 125.000000, 159.000000, 252.000000,  78.591921,   0.000000, 1451.730013, 481.856419
Outstanding requests per worker:
681 715 649 636 695 1391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158218.4,      791093,     712084,      79009,     538227,     173857,  21.389341,  38.400000,  45.900000,  55.200000,  21.318213,   0.659000, 975.898981, 580.565939
Outstanding requests per worker:
523 539 539 549 573 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157883.2,      789417,     710751,      78666,     567995,     142756,  20.896793,  37.400000,  46.100000,  54.400000,  11.728043,   0.748000,  84.941998, 628.164931
Outstanding requests per worker:
551 542 581 587 561 557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.0,      789576,     710388,      79188,     584044,     126344,  21.295275,  37.900000,  47.200000,  55.400000,  11.956420,   0.733000,  95.069997, 653.259582
Outstanding requests per worker:
534 568 552 573 520 598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.0,      789471,     710687,      78784,     595364,     115323,  21.447894,  38.200000,  47.700000,  55.500000,  12.041429,   0.716000,  88.644996, 670.227357
Outstanding requests per worker:
571 608 545 610 552 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157914.2,      789572,     710588,      78984,     603038,     107550,  21.710003,  38.400000,  48.300000,  56.500000,  12.162261,   0.805000,  82.066000, 682.323148
Outstanding requests per worker:
559 596 574 549 605 559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.8,      789475,     710528,      78947,     609999,     100529,  21.916176,  38.700000,  48.600000,  57.300000,  12.282812,   0.733000,  87.199003, 693.242863
Outstanding requests per worker:
580 545 605 569 594 599 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:09   0:00 /usr/lib/linux
memcache      7  358  0.0 447168 165888 pts/0   Sl+  21:09   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19313352098      instructions:u                                              
        5032247952      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         546680797      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            232300      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.200823022 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 918876672
starting receive base loop
num_worker_connections 171
Creating worker on tid 3754095104
starting receive base loop
num_worker_connections 171
Creating worker on tid 2293821952
starting receive base loop
num_worker_connections 170
Creating worker on tid 833548800
starting receive base loop
num_worker_connections 170
Creating worker on tid 3678925312
starting receive base loop
Created 1024 connections total
Creating worker on tid 2226713088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322594.321019,       0.0,      397222,     357507,      39715,     240695,     116812,  27.554627,  61.800000,  78.200000, 139.100000,  29.775663,   0.000000, 519.747019, 489.376574
Outstanding requests per worker:
550 508 478 499 536 499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.6,      789499,     710793,      78706,     540428,     170365,  19.332178,  35.300000,  42.100000,  50.700000,  10.915805,   0.523000,  82.907997, 585.155265
Outstanding requests per worker:
521 520 547 512 496 518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157887.0,      789436,     710672,      78764,     570071,     140601,  19.898494,  36.100000,  43.600000,  51.900000,  11.208840,   0.613000,  70.060000, 630.540389
Outstanding requests per worker:
535 552 523 523 536 538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157868.2,      789342,     710464,      78878,     585722,     124742,  20.231637,  36.500000,  44.400000,  53.000000,  11.399815,   0.686000,  71.690999, 656.081552
Outstanding requests per worker:
595 563 560 547 568 559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157930.8,      789655,     710683,      78972,     596689,     113994,  20.456301,  37.000000,  45.100000,  53.200000,  11.522369,   0.756000,  69.787003, 672.283388
Outstanding requests per worker:
546 537 548 555 553 511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157887.8,      789440,     710649,      78791,     603605,     107044,  20.726803,  37.100000,  45.700000,  54.300000,  11.684002,   0.679000,  91.370001, 683.001596
Outstanding requests per worker:
564 570 552 570 553 533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.0,      789611,     710505,      79106,     610149,     100356,  20.732594,  37.200000,  45.700000,  54.000000,  11.665189,   0.720000,  87.924004, 693.364079
Outstanding requests per worker:
528 574 564 551 524 520 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:10   0:00 /usr/lib/linux
memcache      7  353  0.0 448192 156928 pts/0   Sl+  21:10   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19538881113      instructions:u                                              
        4943602394      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         541440055      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            158569      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.170531854 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1636626944
starting receive base loop
num_worker_connections 171
Creating worker on tid 181203456
starting receive base loop
num_worker_connections 171
Creating worker on tid 3015897600
starting receive base loop
num_worker_connections 170
Creating worker on tid 1555624448
starting receive base loop
num_worker_connections 170
Creating worker on tid 103412224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2948788736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322635.321060,       0.0,      341457,     307163,      34294,     204322,     102841,  81.632328, 162.700000, 199.100000, 579.900000, 112.846697,   0.000000, 1599.117041, 480.852749
Outstanding requests per worker:
1553 1477 1590 1621 1672 3843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163775.0,      818876,     737294,      81582,     558250,     179044,  30.773653,  52.700000,  64.800000, 141.600000,  47.435677,   0.830000, 1282.814980, 582.001704
Outstanding requests per worker:
617 616 624 647 634 630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.8,      810815,     730038,      80777,     584786,     145252,  23.483989,  40.100000,  51.300000,  61.700000,  12.881784,   0.720000, 101.213001, 629.544157
Outstanding requests per worker:
647 647 694 643 632 614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.4,      810823,     729737,      81086,     601185,     128552,  23.979161,  41.000000,  52.100000,  63.400000,  13.176391,   0.675000, 127.295002, 654.862767
Outstanding requests per worker:
622 660 675 680 640 630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.8,      810820,     729361,      81459,     612011,     117350,  24.432169,  42.200000,  53.000000,  64.400000,  13.471115,   0.831000, 132.857993, 671.631820
Outstanding requests per worker:
650 642 656 712 632 678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.8,      810835,     729350,      81485,     619913,     109437,  24.541764,  41.700000,  53.200000,  64.800000,  13.426066,   0.956000, 118.193001, 684.282261
Outstanding requests per worker:
622 720 673 697 648 661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.4,      810793,     729926,      80867,     627307,     102619,  25.269836,  44.100000,  54.300000,  67.600000,  14.118058,   0.823000, 142.271996, 694.154690
Outstanding requests per worker:
711 658 682 666 701 716 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:10   0:00 /usr/lib/linux
memcache      7  357  0.0 449216 169088 pts/0   Sl+  21:10   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19847211716      instructions:u                                              
        4926007820      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         529596482      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            318585      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.161785262 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1798042112
starting receive base loop
num_worker_connections 171
Creating worker on tid 339603968
starting receive base loop
num_worker_connections 171
Creating worker on tid 3174298112
starting receive base loop
num_worker_connections 170
Creating worker on tid 1716646400
starting receive base loop
num_worker_connections 170
Creating worker on tid 264434176
starting receive base loop
Created 1024 connections total
Creating worker on tid 3107189248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322677.321102,       0.0,      338875,     304911,      33964,     203008,     101903,  79.671745, 157.800000, 192.600000, 572.000000, 108.825402,   0.000000, 1527.323008, 481.629115
Outstanding requests per worker:
1524 1514 1534 1514 1576 3501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163655.2,      818277,     736404,      81873,     557890,     178514,  28.777235,  50.000000,  58.400000, 116.800000,  42.522533,   0.839000, 1185.722947, 582.440933
Outstanding requests per worker:
675 617 604 631 622 595 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162117.8,      810590,     729738,      80852,     583824,     145914,  23.353001,  40.000000,  50.900000,  60.900000,  12.741530,   0.955000, 108.438000, 629.574368
Outstanding requests per worker:
641 627 736 659 682 682 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162200.2,      811002,     730019,      80983,     601015,     129004,  23.764444,  40.300000,  52.000000,  62.000000,  12.942605,   0.781000,  99.294998, 654.939473
Outstanding requests per worker:
679 637 659 637 629 685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.6,      810879,     729913,      80966,     612185,     117728,  24.060535,  40.700000,  52.600000,  62.800000,  13.105361,   0.811000, 102.937996, 671.747633
Outstanding requests per worker:
649 665 669 647 663 666 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.6,      810809,     729709,      81100,     620892,     108817,  24.391819,  41.500000,  53.000000,  64.400000,  13.341686,   0.994000, 109.802000, 684.956709
Outstanding requests per worker:
687 635 652 679 675 684 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162178.2,      810892,     729649,      81243,     627215,     102434,  24.501012,  41.600000,  53.200000,  64.400000,  13.370365,   0.727000, 118.678004, 694.615256
Outstanding requests per worker:
701 705 649 641 636 667 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:11   0:00 /usr/lib/linux
memcache      7  347  0.0 515200 171264 pts/0   Sl+  21:11   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19882586909      instructions:u                                              
        5015147591      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         520539014      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            302807      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.490540011 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1548284416
starting receive base loop
num_worker_connections 171
Creating worker on tid 87290368
starting receive base loop
num_worker_connections 171
Creating worker on tid 2924605952
starting receive base loop
num_worker_connections 170
Creating worker on tid 1464332800
starting receive base loop
num_worker_connections 170
Creating worker on tid 12120576
starting receive base loop
Created 1024 connections total
Creating worker on tid 2854875648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322718.321143,       0.0,      337603,     303884,      33719,     201770,     102114,  79.871377, 160.500000, 197.200000, 618.500000, 108.511637,   0.000000, 1554.934978, 480.695334
Outstanding requests per worker:
1487 1515 1552 1621 1615 3448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163669.6,      818349,     736906,      81443,     556872,     180034,  29.305953,  51.100000,  61.000000, 130.700000,  38.426583,   0.913000, 1264.722943, 579.871275
Outstanding requests per worker:
620 606 632 624 643 653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162170.6,      810854,     729799,      81055,     584797,     145002,  23.707350,  40.400000,  52.000000,  61.800000,  12.976379,   0.869000, 114.584997, 630.261356
Outstanding requests per worker:
631 645 639 639 640 627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.2,      810787,     730631,      80156,     602103,     128528,  23.926919,  40.500000,  52.700000,  62.500000,  13.093995,   0.997000, 110.060997, 655.105093
Outstanding requests per worker:
702 665 629 652 627 677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.2,      810817,     730051,      80766,     612350,     117701,  24.545342,  41.500000,  53.600000,  64.700000,  13.457845,   0.982000, 120.281003, 671.465115
Outstanding requests per worker:
649 665 674 676 691 650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.8,      810880,     729951,      80929,     620857,     109094,  24.914223,  42.400000,  54.300000,  66.000000,  13.709982,   0.946000, 123.792000, 684.191651
Outstanding requests per worker:
678 679 682 659 649 657 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162145.4,      810728,     729839,      80889,     626512,     103327,  24.992636,  42.200000,  54.500000,  66.000000,  13.715014,   0.934000, 128.710002, 693.578160
Outstanding requests per worker:
695 747 687 709 662 681 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:12   0:00 /usr/lib/linux
memcache      7  347  0.0 449216 167872 pts/0   Sl+  21:12   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19902735584      instructions:u                                              
        4831566916      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         522830117      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            302422      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.410498970 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1213002240
starting receive base loop
num_worker_connections 171
Creating worker on tid 4046713344
starting receive base loop
num_worker_connections 171
Creating worker on tid 2589061632
starting receive base loop
num_worker_connections 170
Creating worker on tid 1128788480
starting receive base loop
num_worker_connections 170
Creating worker on tid 3971543552
starting receive base loop
Created 1024 connections total
Creating worker on tid 2519331328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322759.321184,       0.0,      349069,     314048,      35021,     210047,     104001,  98.477745, 194.200000, 230.000000, 479.700000, 107.980706,   0.000000, 1679.461002, 483.498131
Outstanding requests per worker:
2756 2926 2792 2839 2694 4734 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169330.4,      846653,     762161,      84492,     579652,     182509,  56.376557, 123.100000, 147.600000, 206.100000,  59.619835,   0.868000, 1371.659994, 584.996796
Outstanding requests per worker:
931 869 873 898 919 982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166645.6,      833229,     749906,      83323,     601333,     148573,  33.590085,  58.500000,  67.600000, 108.500000,  20.532232,   1.031000, 197.128996, 631.142642
Outstanding requests per worker:
926 916 939 920 928 987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166565.0,      832826,     749369,      83457,     618288,     131081,  35.392732,  61.500000,  73.200000, 115.400000,  21.946496,   1.202000, 217.077002, 656.540716
Outstanding requests per worker:
1046 1018 1045 1063 970 1029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166563.2,      832817,     749351,      83466,     629874,     119477,  37.325934,  65.400000,  81.200000, 126.800000,  24.139661,   1.100000, 228.301004, 673.377216
Outstanding requests per worker:
1137 1201 1121 1094 1113 1060 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166575.0,      832876,     749482,      83394,     637994,     111488,  41.587503,  73.200000,  98.400000, 142.300000,  27.466143,   1.212000, 237.856001, 685.978056
Outstanding requests per worker:
1155 1272 1222 1156 1276 1144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165704.4,      828523,     745380,      83143,     641760,     103620,  50.636174, 100.200000, 125.500000, 160.400000,  34.049397,   1.222000, 264.503002, 696.726900
Outstanding requests per worker:
1960 1973 2052 1963 2077 2053 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:12   0:00 /usr/lib/linux
memcache      7  357  0.0 518272 172992 pts/0   Sl+  21:12   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20524537178      instructions:u                                              
        4889827839      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         543311225      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            608152      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.140258383 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1260712448
starting receive base loop
num_worker_connections 171
Creating worker on tid 4097700352
starting receive base loop
num_worker_connections 171
Creating worker on tid 2637427200
starting receive base loop
num_worker_connections 170
Creating worker on tid 1179775488
starting receive base loop
num_worker_connections 170
Creating worker on tid 4022530560
starting receive base loop
Created 1024 connections total
Creating worker on tid 2570318336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322800.321225,       0.0,      348100,     312979,      35121,     209388,     103591,  95.411528, 181.400000, 217.600000, 643.000000, 124.352965,   0.000000, 1708.590031, 485.358842
Outstanding requests per worker:
2479 2571 2669 2335 2452 6116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169235.4,      846178,     761588,      84590,     577896,     183692,  59.320601, 127.600000, 154.400000, 303.500000,  88.027139,   0.901000, 1686.735034, 584.449333
Outstanding requests per worker:
1015 913 1029 974 946 966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166819.2,      834097,     751031,      83066,     603488,     147543,  31.807858,  59.400000,  67.400000, 117.400000,  21.099481,   0.996000, 231.224000, 632.971242
Outstanding requests per worker:
819 841 853 856 888 881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166567.8,      832840,     749197,      83643,     618491,     130706,  31.974180,  58.400000,  66.400000, 109.500000,  20.032435,   1.054000, 205.589995, 657.436386
Outstanding requests per worker:
923 941 1025 896 986 926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166728.8,      833645,     750169,      83476,     630508,     119661,  33.396911,  61.400000,  70.100000, 118.500000,  21.535664,   0.929000, 224.952996, 673.165897
Outstanding requests per worker:
840 943 875 930 955 900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166651.4,      833258,     750007,      83251,     638968,     111039,  34.330953,  64.300000,  74.000000, 131.900000,  23.858494,   1.119000, 228.211001, 686.304636
Outstanding requests per worker:
888 946 946 933 936 941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164991.6,      824959,     742953,      82006,     639778,     103175,  43.147297,  87.300000, 124.500000, 167.800000,  34.458783,   1.146000, 278.701991, 696.359187
Outstanding requests per worker:
2271 2207 2304 2366 2391 2466 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:13   0:00 /usr/lib/linux
memcache      7  357  0.0 517248 170368 pts/0   Sl+  21:13   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20501450701      instructions:u                                              
        4893995539      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         548842254      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            584737      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.131416005 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1296036352
starting receive base loop
num_worker_connections 171
Creating worker on tid 4132565504
starting receive base loop
num_worker_connections 171
Creating worker on tid 2672292352
starting receive base loop
num_worker_connections 170
Creating worker on tid 1212019200
starting receive base loop
num_worker_connections 170
Creating worker on tid 4054774272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2605183488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322842.321267,       0.0,      335508,     302028,      33480,     201203,     100825,  98.836211, 176.300000, 230.400000, 1069.200000, 170.783789,   0.000000, 1966.505051, 482.336091
Outstanding requests per worker:
2454 2462 2539 2443 2581 18651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172176.0,      860881,     774689,      86192,     587360,     187329, 184.909405, 260.100000, 552.900000, 1849.600000, 297.128212,   2.697000, 2755.502939, 582.774699
Outstanding requests per worker:
3935 3766 3687 3805 3839 8424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172000.0,      860001,     774158,      85843,     621274,     152884, 151.375186, 292.700000, 362.200000, 891.000000, 164.538784,   2.107000, 2020.776987, 631.672059
Outstanding requests per worker:
3802 3821 3934 3889 3925 5314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171365.2,      856827,     770669,      86158,     636663,     134006, 145.031624, 286.100000, 347.000000, 493.400000, 125.191445,   3.586000, 1708.587050, 657.917459
Outstanding requests per worker:
4190 4032 4002 4020 4119 4738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171126.0,      855631,     770173,      85458,     647914,     122259, 150.016400, 279.600000, 317.500000, 396.100000, 100.318231,   3.101000, 1393.380046, 674.456705
Outstanding requests per worker:
4483 4320 4338 4351 4561 4670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171022.0,      855111,     770151,      84960,     656498,     113653, 161.293881, 296.200000, 345.000000, 425.800000,  98.212798,   2.638000, 761.582017, 686.210038
Outstanding requests per worker:
4594 4845 4698 4617 4973 5078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169496.4,      847483,     762419,      85064,     656111,     106308, 186.302786, 338.800000, 388.000000, 482.200000, 107.814285,   3.176000, 717.944980, 695.542885
Outstanding requests per worker:
6461 6322 6690 6094 6471 6504 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:14   0:00 /usr/lib/linux
memcache      7  347  0.0 520320 181248 pts/0   Sl+  21:14   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21356590748      instructions:u                                              
        4780741738      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         565341709      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3302806      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.460606568 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1234170368
starting receive base loop
num_worker_connections 171
Creating worker on tid 4073517568
starting receive base loop
num_worker_connections 171
Creating worker on tid 2613244416
starting receive base loop
num_worker_connections 170
Creating worker on tid 1152971264
starting receive base loop
num_worker_connections 170
Creating worker on tid 3995726336
starting receive base loop
Created 1024 connections total
Creating worker on tid 2546135552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322882.321307,       0.0,      346682,     312121,      34561,     208647,     103474, 110.344938, 192.200000, 234.500000, 916.600000, 151.165377,   0.000000, 1952.150941, 483.637089
Outstanding requests per worker:
3263 3056 3266 3272 3327 11367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173565.8,      867830,     780805,      87025,     592235,     188570, 131.722324, 186.000000, 244.500000, 1141.800000, 177.986000,   2.607000, 2304.248095, 583.185893
Outstanding requests per worker:
2583 2505 2620 2542 2585 4079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171954.8,      859775,     774357,      85418,     621899,     152458,  86.945722, 184.400000, 227.900000, 315.900000,  96.053321,   3.097000, 1802.695990, 632.432174
Outstanding requests per worker:
2352 2214 2245 2340 2284 2907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171338.6,      856694,     771127,      85567,     637554,     133573,  84.842735, 195.400000, 240.200000, 308.400000,  77.209294,   1.455000, 1219.635963, 658.098635
Outstanding requests per worker:
2256 2505 2325 2507 2442 2808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171231.8,      856160,     770473,      85687,     648733,     121740,  90.196968, 217.000000, 259.200000, 325.900000,  77.900610,   2.543000, 527.658999, 674.983369
Outstanding requests per worker:
2737 2454 2566 2682 2681 2742 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171079.6,      855399,     769391,      86008,     656957,     112434,  96.636647, 233.000000, 274.200000, 348.200000,  82.983629,   3.040000, 535.908997, 688.231656
Outstanding requests per worker:
2977 2820 2938 2920 2899 3100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169907.2,      849537,     764385,      85152,     658784,     105601, 119.949461, 253.300000, 291.700000, 377.100000,  88.900342,   3.027000, 662.653983, 697.638418
Outstanding requests per worker:
4162 4241 4134 4255 4231 4282 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:15   0:00 /usr/lib/linux
memcache      7  357  0.0 521344 179328 pts/0   Sl+  21:15   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21285229528      instructions:u                                              
        4638731379      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         540421452      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1963564      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.231824225 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1263333888
starting receive base loop
num_worker_connections 171
Creating worker on tid 4097700352
starting receive base loop
num_worker_connections 171
Creating worker on tid 2637427200
starting receive base loop
num_worker_connections 170
Creating worker on tid 1179775488
starting receive base loop
num_worker_connections 170
Creating worker on tid 4022530560
starting receive base loop
Created 1024 connections total
Creating worker on tid 2570318336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322924.321349,       0.0,      339428,     305128,      34300,     203387,     101741, 110.671670, 210.000000, 265.700000, 1066.000000, 174.076245,   0.000000, 1993.255973, 481.897105
Outstanding requests per worker:
3135 3255 3309 3175 3166 25697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172142.0,      860711,     774873,      85838,     588295,     186578, 313.511512, 392.800000, 1176.000000, 2522.700000, 442.214967,   5.807000, 3738.832951, 583.745682
Outstanding requests per worker:
7977 7897 7877 7796 7927 24036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174313.0,      871566,     784596,      86970,     630453,     154143, 396.057802, 497.600000, 941.200000, 2363.500000, 385.802837,   9.368000, 3557.197094, 632.791811
Outstanding requests per worker:
10248 10000 10276 10184 10410 23240 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174345.8,      871730,     784584,      87146,     649037,     135547, 449.181509, 604.200000, 813.700000, 2362.400000, 360.458847,  13.410000, 3621.541977, 659.140973
Outstanding requests per worker:
11986 11862 11944 12192 13131 23915 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174131.6,      870659,     783475,      87184,     659851,     123624, 512.487715, 723.400000, 944.600000, 2509.300000, 367.030437,  47.120001, 3718.265057, 675.279681
Outstanding requests per worker:
13856 14081 13996 14212 15358 25271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174405.8,      872030,     785167,      86863,     670078,     115089, 574.270556, 875.000000, 1091.300000, 2644.500000, 387.183108,  44.695999, 3881.299973, 688.061635
Outstanding requests per worker:
15768 15850 15616 15964 17210 26741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173474.6,      867374,     781159,      86215,     673227,     107932, 640.583130, 1011.300000, 1265.100000, 2693.200000, 413.079547,  70.332997, 4400.846004, 696.393921
Outstanding requests per worker:
18378 17834 17988 18522 20003 29464 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:15   0:00 /usr/lib/linux
memcache      7  338  0.0 521344 194944 pts/0   Sl+  21:15   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21736436362      instructions:u                                              
        4964531293      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         595614574      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6293525      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.571578225 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1636364800
starting receive base loop
num_worker_connections 171
Creating worker on tid 181203456
starting receive base loop
num_worker_connections 171
Creating worker on tid 3015897600
starting receive base loop
num_worker_connections 170
Creating worker on tid 1555624448
starting receive base loop
num_worker_connections 170
Creating worker on tid 103412224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2948788736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575322965.321390,       0.0,      340560,     306556,      34004,     204403,     102153, 112.017434, 211.800000, 260.200000, 1046.100000, 169.964875,   0.000000, 1985.512972, 481.553139
Outstanding requests per worker:
3304 3207 3545 3432 3446 22199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173643.2,      868217,     781452,      86765,     592719,     188733, 276.124392, 382.600000, 862.600000, 2205.000000, 365.500783,   4.401000, 3031.529903, 583.338824
Outstanding requests per worker:
7238 6844 6991 7039 7394 17830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174873.8,      874370,     787241,      87129,     632484,     154757, 329.202144, 471.300000, 619.400000, 1865.600000, 273.203677,   8.341000, 2564.557076, 632.385418
Outstanding requests per worker:
8900 8846 8837 9024 9529 16263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175073.8,      875370,     787894,      87476,     651597,     136297, 368.109576, 548.100000, 692.800000, 1654.400000, 241.144354,   8.380000, 2433.226109, 658.639267
Outstanding requests per worker:
10310 10411 10325 10651 10840 15911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175045.2,      875227,     787412,      87815,     663045,     124367, 408.472353, 634.600000, 793.000000, 1614.700000, 246.267580,  16.683999, 2627.160072, 675.565982
Outstanding requests per worker:
11834 11639 11780 11596 12489 16285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175086.0,      875431,     787422,      88009,     671887,     115535, 446.532788, 725.400000, 891.400000, 1645.400000, 261.933556,   9.939000, 2758.855104, 687.610480
Outstanding requests per worker:
12882 12911 13167 13016 13574 17051 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173443.4,      867218,     780661,      86557,     673183,     107478, 505.034169, 803.300000, 995.100000, 1591.400000, 274.255597,  26.303001, 3061.718941, 697.610940
Outstanding requests per worker:
15480 15268 15429 15811 16392 19433 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:16   0:00 /usr/lib/linux
memcache      8  357  0.0 521344 189376 pts/0   Sl+  21:16   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  21:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21850184753      instructions:u                                              
        4731271423      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         562925944      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6762100      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.121601020 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1115156992
starting receive base loop
num_worker_connections 171
Creating worker on tid 3955421696
starting receive base loop
num_worker_connections 171
Creating worker on tid 2495148544
starting receive base loop
num_worker_connections 170
Creating worker on tid 1034875392
starting receive base loop
num_worker_connections 170
Creating worker on tid 3880251904
starting receive base loop
Created 1024 connections total
Creating worker on tid 2428039680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323006.321431,       0.0,      345562,     310840,      34722,     207167,     103673, 106.220702, 181.900000, 239.200000, 1091.200000, 174.849980,   0.000000, 1962.247968, 482.215818
Outstanding requests per worker:
3036 3053 2942 3086 3162 24351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172609.0,      863046,     777044,      86002,     589915,     187129, 296.900823, 392.200000, 1125.500000, 2305.000000, 399.526475,   6.032000, 3272.239923, 583.365390
Outstanding requests per worker:
7248 7530 7518 7571 7804 21346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174198.6,      870994,     783553,      87441,     629582,     153971, 369.323737, 512.200000, 787.100000, 2114.400000, 331.007753,   3.771000, 3236.993074, 632.413579
Outstanding requests per worker:
9725 10125 10050 10219 10101 20248 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174602.8,      873015,     786001,      87014,     649558,     136443, 427.086984, 638.600000, 834.300000, 2121.500000, 320.410715,   7.163000, 3497.509003, 658.138842
Outstanding requests per worker:
11676 11866 11565 12059 12328 20423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174593.8,      872970,     785739,      87231,     661860,     123879, 475.994231, 770.100000, 972.400000, 2216.900000, 339.551477,  13.640000, 3578.411102, 675.703772
Outstanding requests per worker:
13534 13403 13438 13772 13930 21278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174728.6,      873644,     786019,      87625,     670833,     115186, 531.739693, 905.600000, 1115.300000, 2505.200000, 376.221378,  21.620000, 3643.018961, 687.945938
Outstanding requests per worker:
14909 14918 15111 15129 15299 22776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173754.6,      868774,     781633,      87141,     673725,     107908, 586.472492, 1048.300000, 1265.400000, 2566.000000, 411.625006,  35.946000, 3905.330896, 697.169997
Outstanding requests per worker:
17250 17065 17093 17567 17900 24941 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:17   0:00 /usr/lib/linux
memcache      7  357  0.0 522368 194304 pts/0   Sl+  21:17   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21831553329      instructions:u                                              
        4867530270      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         591692073      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6315985      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.110616555 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1455419904
starting receive base loop
num_worker_connections 128
Creating worker on tid 342618624
starting receive base loop
num_worker_connections 128
Creating worker on tid 3528978944
starting receive base loop
num_worker_connections 128
Creating worker on tid 2414932480
starting receive base loop
Creating worker on tid 1306325504
num_worker_connections 128
starting receive base loop
num_worker_connections 128
Creating worker on tid 192279040
starting receive base loop
num_worker_connections 128
Creating worker on tid 3378639360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2264592896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323047.321472,       0.0,      350754,     315451,      35303,     210390,     105061,  27.314910,  63.100000,  77.900000, 134.800000,  28.343419,   0.000000, 391.214997, 482.596803
Outstanding requests per worker:
282 290 285 294 287 254 282 263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150940.0,      754701,     679741,      74960,     514076,     165665,  15.177525,  29.300000,  33.900000,  42.600000,   9.616013,   0.292000,  55.128001, 580.943581
Outstanding requests per worker:
340 283 280 295 295 265 261 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150941.8,      754710,     679525,      75185,     541240,     138285,  15.809588,  30.700000,  36.000000,  43.200000,   9.982290,   0.298000,  57.317998, 626.055420
Outstanding requests per worker:
261 285 272 315 314 305 326 300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150933.6,      754669,     679550,      75119,     556968,     122582,  16.246253,  31.300000,  37.000000,  44.900000,  10.288676,   0.288000,  59.478998, 651.061804
Outstanding requests per worker:
330 320 308 303 318 282 294 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150950.0,      754751,     679309,      75442,     567495,     111814,  16.500026,  32.000000,  37.600000,  46.200000,  10.463386,   0.287000,  60.449999, 668.335824
Outstanding requests per worker:
337 300 342 322 258 309 305 318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.8,      754715,     678827,      75888,     575157,     103670,  16.801079,  32.600000,  38.500000,  46.300000,  10.630122,   0.339000,  60.129002, 680.599785
Outstanding requests per worker:
336 327 312 304 300 334 338 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.8,      754720,     679467,      75253,     581788,      97679,  16.932748,  32.600000,  38.800000,  47.500000,  10.761736,   0.302000,  80.900997, 690.864575
Outstanding requests per worker:
313 307 329 351 332 305 321 341 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:17   0:00 /usr/lib/linux
memcache      8  360  0.0 442048 150272 pts/0   Sl+  21:17   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18502546871      instructions:u                                              
        4920159239      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         531900455      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            141199      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.171500386 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2027614720
starting receive base loop
num_worker_connections 128
Creating worker on tid 919794176
starting receive base loop
num_worker_connections 128
Creating worker on tid 4100715008
starting receive base loop
num_worker_connections 128
Creating worker on tid 2992108032
starting receive base loop
num_worker_connections 128
Creating worker on tid 1878061568
starting receive base loop
num_worker_connections 128
Creating worker on tid 769454592
starting receive base loop
num_worker_connections 128
Creating worker on tid 3950375424
starting receive base loop
Created 1024 connections total
Creating worker on tid 2841768448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323090.321515,       0.0,      472940,     425398,      47542,     290112,     135286,  15.236247,  38.000000,  48.000000,  76.900000,  20.177985,   0.000000, 579.198003, 499.416074
Outstanding requests per worker:
297 303 313 326 306 327 345 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153814.4,      769073,     692431,      76642,     530116,     162315,  17.088040,  32.800000,  39.300000,  47.900000,  10.855611,   0.328000,  61.206002, 590.355375
Outstanding requests per worker:
319 311 359 335 322 349 394 346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.2,      769277,     692674,      76603,     556148,     136526,  17.788324,  34.100000,  41.300000,  49.400000,  11.286331,   0.285000,  62.109001, 632.473539
Outstanding requests per worker:
352 295 349 335 355 361 346 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.2,      769212,     692413,      76799,     571036,     121377,  18.173818,  34.500000,  42.300000,  50.600000,  11.553204,   0.288000,  68.651997, 655.882170
Outstanding requests per worker:
350 328 369 346 378 354 368 363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.4,      769303,     692042,      77261,     580957,     111085,  18.478920,  35.000000,  43.000000,  51.500000,  11.727165,   0.278000,  69.499999, 672.182573
Outstanding requests per worker:
341 371 372 373 365 349 360 358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153864.0,      769321,     692873,      76448,     588972,     103901,  18.666563,  35.300000,  43.600000,  52.100000,  11.873957,   0.274000,  86.287998, 683.826833
Outstanding requests per worker:
358 351 367 338 354 337 383 361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153862.4,      769313,     692210,      77103,     594269,      97941,  18.875020,  35.700000,  44.000000,  52.800000,  11.990081,   0.302000,  88.500001, 693.186316
Outstanding requests per worker:
342 346 372 352 355 378 348 341 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:18   0:00 /usr/lib/linux
memcache      8  335  0.0 448192 163520 pts/0   Sl+  21:18   2:14 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19368491494      instructions:u                                              
        5078150453      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         562694103      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            127794      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      39.600905999 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1206186496
starting receive base loop
num_worker_connections 128
Creating worker on tid 98365952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3279286784
starting receive base loop
num_worker_connections 128
Creating worker on tid 2170679808
starting receive base loop
num_worker_connections 128
Creating worker on tid 1056633344
starting receive base loop
num_worker_connections 128
Creating worker on tid 4242993664
starting receive base loop
num_worker_connections 128
Creating worker on tid 3134386688
starting receive base loop
Created 1024 connections total
Creating worker on tid 2020340224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323132.321557,       0.0,      355381,     319764,      35617,     213291,     106473,  53.339501, 106.500000, 147.400000, 500.800000,  94.866884,   0.000000, 1430.217981, 482.818091
Outstanding requests per worker:
592 528 624 578 652 543 583 1426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157392.4,      786963,     708351,      78612,     536267,     172084,  20.499042,  38.700000,  46.900000,  58.900000,  22.723480,   0.276000, 1142.320037, 581.621352
Outstanding requests per worker:
356 385 354 401 356 394 358 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156849.4,      784248,     705968,      78280,     564101,     141867,  19.296012,  35.900000,  45.300000,  54.100000,  12.217283,   0.343000,  77.427998, 627.610213
Outstanding requests per worker:
392 392 403 365 387 388 372 390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156882.6,      784414,     706531,      77883,     580373,     126158,  19.639459,  36.300000,  46.100000,  55.100000,  12.439918,   0.336000,  90.824999, 652.868723
Outstanding requests per worker:
382 384 409 377 365 397 373 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.0,      784341,     706078,      78263,     591690,     114388,  19.872554,  36.500000,  46.600000,  55.600000,  12.572675,   0.315000,  95.462002, 670.179581
Outstanding requests per worker:
359 365 421 357 449 374 382 410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.4,      784338,     706034,      78304,     598623,     107411,  20.171938,  37.000000,  47.300000,  57.000000,  12.805705,   0.270000,  79.122998, 682.350211
Outstanding requests per worker:
383 413 407 432 386 398 387 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156877.2,      784387,     705996,      78391,     605711,     100285,  20.287556,  37.100000,  47.400000,  57.500000,  12.872588,   0.276000,  91.448002, 692.264245
Outstanding requests per worker:
406 381 445 385 359 404 399 381 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:19   0:00 /usr/lib/linux
memcache      7  350  0.0 447168 160896 pts/0   Sl+  21:19   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19261521736      instructions:u                                              
        4779891612      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         526692479      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            208474      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.461346449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1241182720
starting receive base loop
num_worker_connections 128
Creating worker on tid 133231104
starting receive base loop
num_worker_connections 128
Creating worker on tid 3319591424
starting receive base loop
num_worker_connections 128
Creating worker on tid 2205544960
starting receive base loop
num_worker_connections 128
Creating worker on tid 1096937984
starting receive base loop
num_worker_connections 128
Creating worker on tid 4277858816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3169251840
starting receive base loop
Created 1024 connections total
Creating worker on tid 2060644864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323172.321597,       0.0,      360209,     324347,      35862,     216496,     107851,  50.799234, 102.600000, 145.800000, 419.600000,  91.811226,   0.000000, 1600.108027, 483.326046
Outstanding requests per worker:
536 563 572 606 597 611 526 1475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157378.4,      786893,     708317,      78576,     535513,     172804,  20.627892,  38.200000,  46.300000,  56.700000,  26.265688,   0.325000, 1095.760942, 580.645409
Outstanding requests per worker:
401 362 384 423 370 344 371 348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156847.0,      784236,     705624,      78612,     563955,     141669,  19.554217,  36.000000,  45.800000,  55.000000,  12.369828,   0.322000,  91.908000, 628.208791
Outstanding requests per worker:
370 404 401 356 361 410 399 427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.6,      784339,     705770,      78569,     580550,     125220,  19.981210,  36.700000,  47.100000,  55.800000,  12.615780,   0.382000,  85.248001, 654.022145
Outstanding requests per worker:
405 363 392 414 397 397 379 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156876.8,      784385,     706489,      77896,     591437,     115052,  20.224685,  37.000000,  47.600000,  56.800000,  12.785178,   0.329000,  98.866001, 669.940827
Outstanding requests per worker:
391 403 421 406 399 398 373 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156870.4,      784353,     705736,      78617,     598558,     107178,  20.345922,  37.000000,  47.900000,  57.100000,  12.838481,   0.338000,  92.635997, 682.282404
Outstanding requests per worker:
409 400 409 442 399 392 371 406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156876.6,      784384,     705496,      78888,     605679,      99817,  20.573874,  37.400000,  48.300000,  58.200000,  13.022742,   0.271000, 111.464001, 692.788729
Outstanding requests per worker:
401 385 386 428 407 384 438 371 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:19   0:00 /usr/lib/linux
memcache      7  360  0.0 447168 164416 pts/0   Sl+  21:19   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19276224629      instructions:u                                              
        4921472671      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         508692010      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            207423      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.110457899 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1331294720
starting receive base loop
num_worker_connections 128
Creating worker on tid 216461824
starting receive base loop
num_worker_connections 128
Creating worker on tid 3402822144
starting receive base loop
num_worker_connections 128
Creating worker on tid 2288775680
starting receive base loop
num_worker_connections 128
Creating worker on tid 1180168704
starting receive base loop
num_worker_connections 128
Creating worker on tid 66122240
starting receive base loop
num_worker_connections 128
Creating worker on tid 3252482560
starting receive base loop
Created 1024 connections total
Creating worker on tid 2138436096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323213.321638,       0.0,      365161,     328800,      36361,     219986,     108814,  62.789503, 122.700000, 160.100000, 697.300000, 116.991833,   0.000000, 1749.063015, 485.603330
Outstanding requests per worker:
934 963 993 1010 993 926 1057 3901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161380.4,      806903,     726420,      80483,     550479,     175941,  33.990772,  59.200000,  79.500000, 162.200000,  62.461597,   0.317000, 1674.726963, 582.742591
Outstanding requests per worker:
513 493 508 498 473 441 491 515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160027.0,      800136,     720228,      79908,     576345,     143883,  23.206133,  43.600000,  53.400000,  68.800000,  15.234278,   0.389000, 158.117995, 629.121455
Outstanding requests per worker:
519 495 488 427 460 527 475 470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159936.2,      799682,     720018,      79664,     592106,     127912,  24.984757,  48.800000,  56.500000,  83.800000,  17.190706,   0.400000, 181.372002, 653.634177
Outstanding requests per worker:
544 535 552 508 524 465 521 576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159979.6,      799899,     719522,      80377,     603289,     116233,  26.616243,  53.300000,  60.900000,  99.300000,  19.282625,   0.374000, 195.116997, 671.032284
Outstanding requests per worker:
582 524 553 594 567 518 535 498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159987.2,      799937,     719932,      80005,     611689,     108243,  27.287072,  55.300000,  63.300000, 107.800000,  20.535870,   0.362000, 206.439003, 683.476205
Outstanding requests per worker:
530 576 592 532 550 578 531 601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159996.2,      799982,     719803,      80179,     618266,     101537,  28.668300,  58.300000,  67.900000, 119.600000,  22.536089,   0.427000, 222.994000, 693.201058
Outstanding requests per worker:
542 521 525 548 557 612 636 624 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:20   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 163392 pts/0   Sl+  21:20   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19704442208      instructions:u                                              
        5023285567      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         526156645      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            322370      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.120629364 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1226371584
starting receive base loop
num_worker_connections 128
Creating worker on tid 117109248
starting receive base loop
num_worker_connections 128
Creating worker on tid 3303469568
starting receive base loop
num_worker_connections 128
Creating worker on tid 2194862592
starting receive base loop
num_worker_connections 128
Creating worker on tid 1080816128
starting receive base loop
num_worker_connections 128
Creating worker on tid 4267176448
starting receive base loop
num_worker_connections 128
Creating worker on tid 3153129984
starting receive base loop
Created 1024 connections total
Creating worker on tid 2044523008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323254.321679,       0.0,      367580,     330582,      36998,     221227,     109355,  56.335899, 110.500000, 148.300000, 600.800000, 104.075775,   0.000000, 1593.814969, 484.976690
Outstanding requests per worker:
710 815 749 820 779 835 806 2642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160973.4,      804868,     724764,      80104,     549398,     175366,  25.075548,  46.400000,  55.000000,  96.000000,  37.439601,   0.281000, 1331.145048, 583.107966
Outstanding requests per worker:
383 415 397 410 447 439 429 429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160005.4,      800028,     720184,      79844,     576927,     143257,  21.153604,  38.200000,  49.300000,  60.300000,  13.407025,   0.335000, 114.876002, 630.284590
Outstanding requests per worker:
473 439 388 397 440 431 412 421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160003.6,      800019,     719952,      80067,     592989,     126963,  21.508990,  38.200000,  50.300000,  61.400000,  13.591513,   0.371000, 110.707998, 654.831248
Outstanding requests per worker:
465 446 377 470 442 421 439 424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160010.8,      800055,     720086,      79969,     603489,     116597,  21.674974,  38.700000,  50.600000,  61.600000,  13.701214,   0.335000, 107.882999, 671.472238
Outstanding requests per worker:
428 375 437 456 453 460 455 412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159878.4,      799393,     719183,      80210,     611325,     107858,  23.833223,  46.400000,  54.400000,  77.500000,  16.277575,   0.365000, 176.189005, 683.580285
Outstanding requests per worker:
486 553 498 511 516 525 508 550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160060.2,      800302,     720405,      79897,     619321,     101084,  25.458895,  51.400000,  58.400000,  94.700000,  18.520665,   0.347000, 191.330999, 694.330307
Outstanding requests per worker:
456 474 498 483 505 472 533 504 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:21   0:00 /usr/lib/linux
memcache      7  351  0.0 449216 162432 pts/0   Sl+  21:21   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19682310176      instructions:u                                              
        4828078892      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         536891456      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            247271      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.481273827 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1804661248
starting receive base loop
num_worker_connections 128
Creating worker on tid 694284800
starting receive base loop
num_worker_connections 128
Creating worker on tid 3875205632
starting receive base loop
num_worker_connections 128
Creating worker on tid 2766598656
starting receive base loop
num_worker_connections 128
Creating worker on tid 1657991680
starting receive base loop
num_worker_connections 128
Creating worker on tid 543945216
starting receive base loop
num_worker_connections 128
Creating worker on tid 3730305536
starting receive base loop
Created 1024 connections total
Creating worker on tid 2616259072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323297.321722,       0.0,      410276,     369494,      40782,     249011,     120483,  58.585509, 138.200000, 175.800000, 466.100000, 105.493464,   0.000000, 1936.153054, 490.834636
Outstanding requests per worker:
1201 1354 1227 1293 1413 1224 1243 4181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164609.8,      823050,     740559,      82491,     565112,     175447,  51.230453, 124.700000, 155.800000, 224.400000,  79.312253,   0.463000, 1856.137037, 587.923706
Outstanding requests per worker:
871 831 819 764 875 771 788 799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163158.6,      815794,     733992,      81802,     590536,     143456,  39.917740, 105.700000, 140.100000, 176.300000,  41.104682,   0.331000, 306.162000, 633.633676
Outstanding requests per worker:
846 828 920 829 988 870 914 924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162979.6,      814899,     733774,      81125,     606274,     127500,  46.961886, 134.000000, 165.600000, 210.400000,  51.001384,   0.400000, 394.697994, 657.855622
Outstanding requests per worker:
1045 1109 1133 1102 1118 981 1036 1102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162628.2,      813142,     732251,      80891,     615553,     116698,  64.051745, 181.700000, 222.800000, 299.100000,  72.620288,   0.366000, 515.798986, 673.630041
Outstanding requests per worker:
1479 1482 1518 1417 1483 1403 1580 1491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163060.4,      815303,     733826,      81477,     624439,     109387,  77.391791, 237.600000, 285.300000, 367.300000,  93.132223,   0.472000, 571.925998, 684.870045
Outstanding requests per worker:
1672 1392 1660 1601 1766 1526 1699 1670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161408.4,      807043,     725856,      81187,     623684,     102172,  86.803518, 264.100000, 313.400000, 406.400000, 104.474194,   0.419000, 631.887019, 694.251601
Outstanding requests per worker:
2811 2734 2665 2839 2844 2760 2964 2717 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:21   0:00 /usr/lib/linux
memcache      7  345  0.0 516224 169344 pts/0   Sl+  21:21   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20379083161      instructions:u                                              
        4862451101      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         544405954      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1353073      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.431103228 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1763242496
starting receive base loop
num_worker_connections 128
Creating worker on tid 653980160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3840340480
starting receive base loop
num_worker_connections 128
Creating worker on tid 2731733504
starting receive base loop
num_worker_connections 128
Creating worker on tid 1617687040
starting receive base loop
num_worker_connections 128
Creating worker on tid 509080064
starting receive base loop
num_worker_connections 128
Creating worker on tid 3690000896
starting receive base loop
Created 1024 connections total
Creating worker on tid 2581393920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323338.321763,       0.0,      365677,     329183,      36494,     220558,     108625,  79.470537, 166.000000, 208.300000, 842.500000, 142.638851,   0.000000, 1946.915030, 485.631719
Outstanding requests per worker:
1726 1725 1794 1707 1728 1730 1847 10881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167720.0,      838601,     754451,      84150,     573323,     181128, 131.091246, 194.200000, 261.500000, 1339.100000, 205.408659,   1.080000, 2411.561966, 584.117349
Outstanding requests per worker:
1941 2097 2025 2040 2042 2062 2179 3567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167101.2,      835507,     752385,      83122,     603531,     148854,  98.731039, 247.300000, 298.100000, 424.100000, 111.265525,   0.601000, 1495.699048, 631.257471
Outstanding requests per worker:
1876 1946 1949 2001 1887 1906 1997 2326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166401.4,      832008,     748950,      83058,     617686,     131264,  98.213599, 281.300000, 331.600000, 430.100000, 109.675752,   0.705000, 909.300983, 656.002223
Outstanding requests per worker:
2113 2217 2267 2156 2111 2243 2091 2068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166289.0,      831446,     747994,      83452,     628432,     119562, 109.704455, 320.700000, 383.000000, 480.600000, 124.486845,   0.934000, 863.941014, 672.971132
Outstanding requests per worker:
2591 2223 2489 2431 2325 2562 2261 2350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166397.0,      831986,     748663,      83323,     637479,     111184, 118.997188, 342.900000, 412.300000, 522.100000, 133.812011,   1.031000, 875.962973, 685.669924
Outstanding requests per worker:
2505 2517 2775 2603 2750 2549 2457 2513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164759.4,      823798,     741537,      82261,     638017,     103520, 134.264803, 363.100000, 431.900000, 560.300000, 139.913421,   0.981000, 835.864007, 694.935344
Outstanding requests per worker:
3795 3879 3664 4077 3660 3746 3613 3869 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:22   0:00 /usr/lib/linux
memcache      7  341  0.0 518272 178368 pts/0   Sl+  21:22   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20710103095      instructions:u                                              
        4791301759      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         548499222      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2657854      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.440569854 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1712648704
starting receive base loop
num_worker_connections 128
Creating worker on tid 602993152
starting receive base loop
num_worker_connections 128
Creating worker on tid 3789353472
starting receive base loop
num_worker_connections 128
Creating worker on tid 2675307008
starting receive base loop
num_worker_connections 128
Creating worker on tid 1566700032
starting receive base loop
num_worker_connections 128
Creating worker on tid 452653568
starting receive base loop
num_worker_connections 128
Creating worker on tid 3639013888
starting receive base loop
Created 1024 connections total
Creating worker on tid 2530406912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323379.321804,       0.0,      359225,     323131,      36094,     215771,     107360,  75.563368, 136.500000, 189.900000, 1033.000000, 166.513520,   0.000000, 1987.377048, 483.091341
Outstanding requests per worker:
1530 1333 1355 1397 1317 1349 1386 13363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167879.8,      839400,     755530,      83870,     572958,     182572, 127.126255, 185.200000, 268.400000, 1443.500000, 230.253721,   0.982000, 2740.889072, 582.605560
Outstanding requests per worker:
1758 1870 1888 1863 1884 1897 1846 4049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166892.0,      834461,     750921,      83540,     603048,     147873,  98.704520, 222.600000, 278.900000, 520.200000, 133.814094,   0.662000, 1842.689991, 631.641878
Outstanding requests per worker:
1924 1855 1915 1905 1846 1883 1818 2888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166535.4,      832678,     749876,      82802,     618977,     130899,  97.671128, 265.800000, 317.300000, 454.600000, 117.296894,   0.650000, 1588.778973, 656.724308
Outstanding requests per worker:
2066 2066 2042 1980 2018 2033 2017 2517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166294.8,      831475,     748156,      83319,     629014,     119142, 105.306547, 305.000000, 368.500000, 483.400000, 120.478925,   0.654000, 1040.475011, 674.326285
Outstanding requests per worker:
2479 2284 2369 2259 2338 2212 2404 2327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166328.6,      831644,     747835,      83809,     637429,     110406, 117.644706, 330.400000, 396.100000, 504.300000, 127.356087,   0.920000, 741.779983, 686.460283
Outstanding requests per worker:
2664 2499 2534 2519 2339 2671 2666 2559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165173.2,      825867,     743328,      82539,     640477,     102851, 132.179342, 354.300000, 425.500000, 557.200000, 137.298280,   0.708000, 973.264992, 696.280347
Outstanding requests per worker:
3576 3334 3520 3396 3608 3738 3295 3551 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:23   0:00 /usr/lib/linux
memcache      8  350  0.0 517248 176064 pts/0   Sl+  21:23   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20730053341      instructions:u                                              
        4707156918      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         552061607      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2436989      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.350508704 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1707667968
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
num_worker_connections 128
Creating worker on tid 2667246080
starting receive base loop
num_worker_connections 128
Creating worker on tid 1558639104
starting receive base loop
num_worker_connections 128
Creating worker on tid 450032128
starting receive base loop
num_worker_connections 128
Creating worker on tid 3630952960
starting receive base loop
Created 1024 connections total
Creating worker on tid 2522345984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323420.321845,       0.0,      367539,     330831,      36708,     220989,     109842,  82.663247, 155.000000, 198.700000, 1039.300000, 166.818472,   0.000000, 1946.961999, 483.359362
Outstanding requests per worker:
1755 1764 1920 1803 1910 1838 1788 17334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167427.8,      837140,     753852,      83288,     572157,     181695, 231.350628, 326.200000, 665.100000, 1804.600000, 289.783394,   0.994000, 2658.814907, 583.810067
Outstanding requests per worker:
4726 4811 4768 4666 4711 4783 4725 10944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168380.6,      841904,     757996,      83908,     608819,     149177, 289.546880, 435.600000, 531.700000, 1250.600000, 197.652917,   1.716000, 2352.549076, 632.112081
Outstanding requests per worker:
6348 6269 6047 6340 6037 6254 6302 9763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168766.2,      843832,     759512,      84320,     626677,     132835, 335.048176, 523.800000, 623.600000, 1011.600000, 193.087052,   2.796000, 2341.548920, 656.837612
Outstanding requests per worker:
7290 7534 7225 7484 6828 7289 7524 9489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168864.6,      844324,     759727,      84597,     638821,     120906, 375.205067, 614.600000, 740.700000, 1072.400000, 214.756593,   2.969000, 2386.678934, 674.140770
Outstanding requests per worker:
8260 8308 8198 8277 8105 8015 8195 10142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169016.2,      845082,     760627,      84455,     648272,     112355, 414.884071, 710.600000, 850.800000, 1177.600000, 236.788432,   2.039000, 2364.257097, 686.294224
Outstanding requests per worker:
9329 9057 9083 8827 8842 8553 9008 10851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168045.6,      840229,     755999,      84230,     651109,     104890, 457.347084, 808.200000, 984.200000, 1313.300000, 266.389962,   6.070000, 2699.598074, 696.407793
Outstanding requests per worker:
10475 10195 10318 10547 10218 10193 10405 12090 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:23   0:00 /usr/lib/linux
memcache      7  360  0.0 517248 187520 pts/0   Sl+  21:23   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21183801544      instructions:u                                              
        4784335663      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         575171953      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6925484      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.250803104 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1855058432
starting receive base loop
num_worker_connections 128
Creating worker on tid 745271808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3931632128
starting receive base loop
num_worker_connections 128
Creating worker on tid 2817585664
starting receive base loop
num_worker_connections 128
Creating worker on tid 1708978688
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
Created 1024 connections total
Creating worker on tid 2667246080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323463.321888,       0.0,      496680,     447626,      49054,     306387,     141239,  53.441950, 131.100000, 172.800000, 676.700000, 122.934914,   0.000000, 1915.398002, 501.713946
Outstanding requests per worker:
1931 1767 2039 1809 1959 2106 1877 9056 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167306.4,      836533,     752718,      83815,     579291,     173427, 182.613972, 277.200000, 342.600000, 1067.100000, 168.661853,   1.063000, 2250.670910, 595.440377
Outstanding requests per worker:
4358 4316 4374 4333 4480 4403 4489 6423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168390.8,      841955,     757362,      84593,     611276,     146086, 249.233404, 377.400000, 424.200000, 569.600000, 106.179946,   0.743000, 1327.409983, 636.589685
Outstanding requests per worker:
5578 5845 5699 5662 5901 5944 5600 6128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168873.2,      844367,     760487,      83880,     629721,     130766, 291.780661, 443.500000, 506.700000, 642.900000, 117.000440,   1.243000, 1237.336040, 659.669721
Outstanding requests per worker:
6506 6507 6442 6599 6671 6478 6976 6948 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169184.4,      845923,     761633,      84290,     642098,     119535, 326.992557, 506.000000, 584.200000, 765.300000, 135.087976,   1.998000, 1196.076989, 676.480415
Outstanding requests per worker:
7309 7151 7087 7369 7298 7153 7309 7674 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169303.0,      846516,     761644,      84872,     649948,     111696, 357.109483, 546.500000, 643.500000, 857.800000, 149.287261,   4.530000, 1587.252975, 687.394868
Outstanding requests per worker:
7597 8067 7575 8252 7780 7831 7921 7989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168404.4,      842023,     758032,      83991,     654056,     103976, 393.133960, 610.500000, 716.700000, 972.900000, 169.811485,   5.168000, 1636.859059, 698.323241
Outstanding requests per worker:
8880 9012 8849 9112 9054 8709 9260 9229 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:24   0:00 /usr/lib/linux
memcache      7  344  0.0 521344 187328 pts/0   Sl+  21:24   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21749331136      instructions:u                                              
        5028477969      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         632302739      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           7527894      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      39.549634608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2074276352
starting receive base loop
num_worker_connections 128
Creating worker on tid 962720256
starting receive base loop
num_worker_connections 128
Creating worker on tid 4143641088
starting receive base loop
num_worker_connections 128
Creating worker on tid 3035034112
starting receive base loop
num_worker_connections 128
Creating worker on tid 1926427136
starting receive base loop
num_worker_connections 128
Creating worker on tid 812380672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3998740992
starting receive base loop
Created 1024 connections total
Creating worker on tid 2884694528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323505.321930,       0.0,      370386,     332932,      37454,     223170,     109762,  86.980112, 183.000000, 247.200000, 940.500000, 161.647880,   0.000000, 1995.795012, 486.487009
Outstanding requests per worker:
2069 2217 1930 1991 1980 1964 2215 21840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168309.8,      841550,     757691,      83859,     576500,     181191, 303.092693, 405.200000, 1093.300000, 2357.300000, 407.398387,   1.547000, 3420.636892, 585.784580
Outstanding requests per worker:
6470 6311 6251 6381 6241 6386 6216 20006 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170663.0,      853316,     768392,      84924,     616803,     151589, 421.196028, 560.700000, 877.300000, 2249.900000, 358.563845,   5.003000, 3746.989965, 631.409851
Outstanding requests per worker:
8481 8705 8539 8799 8597 8608 8512 20348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170991.8,      854960,     769655,      85305,     635483,     134172, 506.872211, 730.600000, 935.800000, 2346.600000, 355.809097,  18.288000, 3751.811981, 656.856125
Outstanding requests per worker:
10526 10732 10642 10508 10890 10505 10477 21000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171083.2,      855417,     770039,      85378,     647789,     122250, 588.025550, 909.800000, 1139.600000, 2317.700000, 372.991261,  36.501002, 3695.151091, 674.315065
Outstanding requests per worker:
12562 12636 12383 12241 12487 12352 12648 22232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170514.6,      852574,     767210,      85364,     653800,     113410, 676.327055, 1101.000000, 1351.100000, 2546.000000, 410.130222,  44.204999, 3871.428013, 686.242841
Outstanding requests per worker:
15006 14769 14578 14497 14940 14478 14392 23935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170067.2,      850337,     765267,      85070,     659492,     105775, 772.535257, 1312.100000, 1579.800000, 2724.100000, 457.290722,  54.347999, 3996.733904, 696.485936
Outstanding requests per worker:
17580 17012 17169 16797 17155 17194 17021 25968 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:25   0:00 /usr/lib/linux
memcache      7  341  0.0 520320 196608 pts/0   Sl+  21:25   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21373315796      instructions:u                                              
        4727202694      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         573624702      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5982130      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.601048597 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1877733888
starting receive base loop
num_worker_connections 128
Creating worker on tid 769454592
starting receive base loop
num_worker_connections 128
Creating worker on tid 3950375424
starting receive base loop
num_worker_connections 128
Creating worker on tid 2841768448
starting receive base loop
num_worker_connections 128
Creating worker on tid 1727721984
starting receive base loop
num_worker_connections 128
Creating worker on tid 619115008
starting receive base loop
num_worker_connections 128
Creating worker on tid 3805475328
starting receive base loop
Created 1024 connections total
Creating worker on tid 2691428864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323546.321971,       0.0,      366464,     329703,      36761,     220613,     109090,  80.093515, 135.600000, 233.900000, 1132.900000, 186.713124,   0.000000, 1979.570031, 484.731164
Outstanding requests per worker:
1534 1461 1421 1439 1422 1552 2098 32684 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169394.0,      846971,     762393,      84578,     579826,     182567, 377.829817, 601.900000, 1761.900000, 2895.100000, 546.099806,   1.291000, 3621.536970, 585.815065
Outstanding requests per worker:
7709 7501 7423 7541 7564 7728 7429 32690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172131.6,      860659,     775228,      85431,     622991,     152237, 565.080117, 792.200000, 1786.000000, 2955.400000, 497.731751,   3.302000, 3509.571075, 632.973412
Outstanding requests per worker:
11620 11703 11237 11438 11056 11370 11354 34122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171694.4,      858473,     772703,      85770,     638929,     133774, 722.576143, 1066.400000, 1893.100000, 2967.700000, 494.759943,  92.556998, 4159.187794, 658.541644
Outstanding requests per worker:
15462 15455 15471 15419 14914 15181 15113 37364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172146.0,      860731,     774910,      85821,     652013,     122897, 885.645094, 1335.400000, 1994.700000, 3161.100000, 520.310659,  79.948999, 4552.708149, 674.321828
Outstanding requests per worker:
19016 19149 18904 18710 18617 18452 18841 40911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171999.6,      859999,     773801,      86198,     660165,     113636, 1043.905684, 1592.300000, 2146.200000, 3367.600000, 555.176587, 177.910000, 4494.113922, 687.790273
Outstanding requests per worker:
22440 22544 23075 22834 22205 22165 22286 44025 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170553.0,      852766,     767356,      85410,     660998,     106358, 1224.638977, 1862.400000, 2361.700000, 3612.500000, 593.953095, 196.579993, 4822.982788, 696.173183
Outstanding requests per worker:
26834 27509 27474 27165 26754 26497 26775 48799 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:26   0:00 /usr/lib/linux
memcache      7  350  0.0 521344 190848 pts/0   Sl+  21:26   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21453814530      instructions:u                                              
        4480594169      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         543508181      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4190786      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.180869993 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1975382528
starting receive base loop
num_worker_connections 128
Creating worker on tid 863367680
starting receive base loop
num_worker_connections 128
Creating worker on tid 4049728000
starting receive base loop
num_worker_connections 128
Creating worker on tid 2935681536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1827074560
starting receive base loop
num_worker_connections 128
Creating worker on tid 718467584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3899388416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2790781440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323587.322012,       0.0,      368352,     331423,      36929,     221594,     109829,  87.173165, 152.700000, 201.400000, 1063.700000, 173.785064,   0.000000, 1992.287993, 484.486318
Outstanding requests per worker:
2093 1845 2076 2038 2038 2067 2565 28920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169005.4,      845028,     760570,      84458,     578035,     182535, 384.060323, 563.100000, 1618.200000, 2717.200000, 505.845578,   1.785000, 3809.062958, 584.457715
Outstanding requests per worker:
8083 7962 8100 7962 8189 7990 8151 31153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171486.2,      857432,     772183,      85249,     619614,     152569, 583.767796, 813.100000, 1657.300000, 2858.900000, 485.382418,  15.934000, 4106.396198, 631.950709
Outstanding requests per worker:
12159 12141 12321 11956 12253 12257 12635 33392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171461.0,      857306,     771741,      85565,     637273,     134468, 755.471706, 1097.600000, 1802.000000, 3013.900000, 494.837461,  46.068002, 4380.161762, 657.245183
Outstanding requests per worker:
16102 16268 16166 16037 16335 16478 16523 36854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170825.2,      854127,     768673,      85454,     646777,     121896, 940.304126, 1414.700000, 1937.000000, 3237.900000, 530.586054, 156.000003, 4889.180183, 674.874694
Outstanding requests per worker:
20208 20572 20783 20865 20465 21052 20752 40911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170537.8,      852690,     767407,      85283,     654621,     112786, 1139.742422, 1689.900000, 2221.300000, 3533.800000, 576.325117, 175.926998, 5186.582088, 687.302833
Outstanding requests per worker:
25107 25083 25275 25355 24979 25122 25522 45470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169130.8,      845655,     760704,      84951,     655643,     105061, 1355.622441, 2007.700000, 2479.800000, 3884.100000, 629.799812, 208.557993, 5420.689106, 697.449209
Outstanding requests per worker:
30543 30394 30594 31080 30700 30266 30943 50700 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:26   0:00 /usr/lib/linux
memcache      7  360  0.0 520320 195968 pts/0   Sl+  21:26   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21325283100      instructions:u                                              
        4757300844      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         556858178      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3216686      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.171892235 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2276913664
starting receive base loop
num_worker_connections 85
Creating worker on tid 1502605824
starting receive base loop
num_worker_connections 85
Creating worker on tid 740225536
starting receive base loop
num_worker_connections 85
Creating worker on tid 4270191104
starting receive base loop
num_worker_connections 85
Creating worker on tid 3507810816
starting receive base loop
Created 512 connections total
Creating worker on tid 2745430528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323628.322053,       0.0,      346199,     311290,      34909,     207343,     103947,   8.900859,  18.800000,  23.800000,  37.800000,   7.942236,   0.000000, 101.765998, 481.517450
Outstanding requests per worker:
188 216 217 207 204 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.0,      750021,     675766,      74255,     509961,     165805,   8.072710,  15.000000,  17.400000,  20.800000,   4.615874,   0.314000,  28.075000, 578.626042
Outstanding requests per worker:
210 184 215 211 205 209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150008.2,      750042,     675446,      74596,     537652,     137794,   8.281910,  15.300000,  17.800000,  21.800000,   4.764232,   0.334000,  29.425001, 625.005536
Outstanding requests per worker:
203 208 200 188 208 225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.6,      750019,     674887,      75132,     552433,     122454,   8.476106,  15.700000,  18.300000,  22.300000,   4.890043,   0.270000,  32.697000, 649.179106
Outstanding requests per worker:
216 218 197 189 224 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.2,      750017,     675219,      74798,     563664,     111555,   8.598630,  15.800000,  18.600000,  22.900000,   4.985979,   0.309000,  37.170999, 667.562660
Outstanding requests per worker:
217 221 234 216 219 203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150001.6,      750009,     674991,      75018,     570937,     104054,   8.699924,  16.000000,  18.900000,  23.100000,   5.031680,   0.284000,  30.430000, 679.401342
Outstanding requests per worker:
238 235 217 217 229 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150015.6,      750079,     675332,      74747,     577354,      97978,   8.771228,  16.200000,  19.000000,  23.300000,   5.067833,   0.272000,  30.742999, 689.526303
Outstanding requests per worker:
210 224 213 215 213 217 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:27   0:00 /usr/lib/linux
memcache      7  360  0.0 443072 149696 pts/0   Sl+  21:27   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18348848286      instructions:u                                              
        4832726261      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         513158606      armv8_pmuv3_0/l2d_cache_refill/:u                                   
             89614      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.240010009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1516106240
starting receive base loop
num_worker_connections 85
Creating worker on tid 740225536
starting receive base loop
num_worker_connections 85
Creating worker on tid 4270191104
starting receive base loop
num_worker_connections 85
Creating worker on tid 3507810816
starting receive base loop
num_worker_connections 85
Creating worker on tid 2745430528
starting receive base loop
Created 512 connections total
Creating worker on tid 1980428800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323669.322094,       0.0,      353367,     317935,      35432,     212552,     105383,  10.634835,  22.500000,  29.100000,  50.300000,  10.092453,   0.000000, 144.360006, 484.242125
Outstanding requests per worker:
208 250 223 238 230 209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.0,      769251,     692790,      76461,     524338,     168452,   9.148682,  16.800000,  19.900000,  24.100000,   5.250399,   0.330000,  34.293000, 581.970485
Outstanding requests per worker:
230 225 239 235 234 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153847.2,      769237,     692389,      76848,     552192,     140197,   9.383872,  17.200000,  20.400000,  25.000000,   5.405518,   0.298000,  38.318999, 626.521601
Outstanding requests per worker:
285 237 229 234 210 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153859.4,      769298,     692079,      77219,     568012,     124067,   9.575235,  17.500000,  21.000000,  25.300000,   5.503460,   0.360000,  34.311000, 652.122175
Outstanding requests per worker:
239 256 254 237 252 231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153871.0,      769356,     692609,      76747,     579779,     112830,   9.733698,  17.700000,  21.300000,  25.900000,   5.606856,   0.300000,  49.474001, 670.205726
Outstanding requests per worker:
232 248 249 245 239 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.0,      769211,     692131,      77080,     586807,     105324,   9.834315,  17.900000,  21.500000,  26.300000,   5.672756,   0.304000,  39.489999, 681.682788
Outstanding requests per worker:
256 248 253 268 233 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.6,      769289,     692597,      76692,     593525,      99072,   9.944493,  18.100000,  21.700000,  26.900000,   5.745723,   0.349000,  39.321002, 691.670313
Outstanding requests per worker:
297 255 252 237 219 265 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:28   0:00 /usr/lib/linux
memcache      7  360  0.0 445120 151552 pts/0   Sl+  21:28   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18865717824      instructions:u                                              
        4754081990      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         527816036      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            103957      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.191162886 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1632432640
starting receive base loop
num_worker_connections 85
Creating worker on tid 858321408
starting receive base loop
num_worker_connections 85
Creating worker on tid 93319680
starting receive base loop
num_worker_connections 85
Creating worker on tid 3625906688
starting receive base loop
num_worker_connections 85
Creating worker on tid 2860904960
starting receive base loop
Created 512 connections total
Creating worker on tid 2098524672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323711.322136,       0.0,      360188,     324305,      35883,     216355,     107950,  16.906571,  29.400000,  39.000000, 160.600000,  33.499574,   0.000000, 614.404976, 482.937472
Outstanding requests per worker:
305 284 268 294 268 293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157888.8,      789445,     710628,      78817,     537712,     172916,  11.149038,  19.800000,  24.200000,  30.200000,   6.357974,   0.246000,  52.912001, 581.043902
Outstanding requests per worker:
302 279 288 328 286 333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.8,      789540,     710640,      78900,     567835,     142805,  11.579122,  20.300000,  25.200000,  31.700000,   6.620505,   0.294000,  58.915999, 627.707303
Outstanding requests per worker:
306 319 316 303 311 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157905.6,      789529,     710218,      79311,     583195,     127023,  11.867486,  20.800000,  25.700000,  32.700000,   6.797930,   0.367000,  65.618001, 652.802716
Outstanding requests per worker:
293 343 356 307 292 283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157893.0,      789466,     710812,      78654,     595683,     115129,  12.089166,  21.100000,  26.300000,  33.400000,   6.923721,   0.412000,  62.826000, 670.725598
Outstanding requests per worker:
346 324 310 336 297 328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.2,      789537,     710409,      79128,     601979,     108430,  12.234590,  21.500000,  26.400000,  34.100000,   7.041264,   0.363000,  67.129001, 681.113231
Outstanding requests per worker:
317 344 312 310 325 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.8,      789515,     710554,      78961,     609481,     101073,  12.280902,  21.600000,  26.400000,  34.200000,   7.077856,   0.403000,  66.113003, 692.426218
Outstanding requests per worker:
338 297 356 316 302 317 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:28   0:00 /usr/lib/linux
memcache      7  350  0.0 448192 147712 pts/0   Sl+  21:28   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19395999949      instructions:u                                              
        4851048946      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         540956190      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            132584      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.519790310 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2417226240
starting receive base loop
num_worker_connections 85
Creating worker on tid 1644884480
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
Created 512 connections total
Creating worker on tid 2887709184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323751.322176,       0.0,      360652,     324614,      36038,     217353,     107261,  14.222182,  30.400000,  41.400000,  75.700000,  14.737198,   0.000000, 183.731005, 486.270136
Outstanding requests per worker:
271 268 269 296 264 276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157889.8,      789450,     710764,      78686,     539157,     171607,  10.791679,  19.100000,  23.300000,  29.200000,   6.105440,   0.334000,  51.966999, 583.468774
Outstanding requests per worker:
293 307 276 296 267 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.6,      789474,     710586,      78888,     568397,     142189,  11.133707,  19.700000,  24.100000,  30.200000,   6.320524,   0.388000,  57.640001, 628.505984
Outstanding requests per worker:
259 326 313 311 285 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.4,      789493,     710624,      78869,     584717,     125907,  11.394926,  20.200000,  24.600000,  31.300000,   6.514090,   0.350000,  63.924998, 653.783631
Outstanding requests per worker:
301 307 325 296 305 285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.6,      789514,     710244,      79270,     595290,     114954,  11.629720,  20.400000,  25.200000,  31.800000,   6.623239,   0.374000,  59.717000, 671.339983
Outstanding requests per worker:
346 303 295 290 304 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.6,      789474,     710529,      78945,     603886,     106643,  11.799294,  20.600000,  25.400000,  32.700000,   6.732150,   0.486000,  57.895999, 683.630830
Outstanding requests per worker:
311 304 326 342 292 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157916.4,      789583,     710591,      78992,     610772,      99819,  11.935397,  20.800000,  25.900000,  32.800000,   6.805822,   0.357000,  68.141997, 694.019170
Outstanding requests per worker:
316 349 323 301 302 317 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:29   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 155968 pts/0   Sl+  21:29   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19373421502      instructions:u                                              
        4892456796      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         523399142      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            130653      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.190956349 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1581904384
starting receive base loop
num_worker_connections 85
Creating worker on tid 807334400
starting receive base loop
num_worker_connections 85
Creating worker on tid 42332672
starting receive base loop
num_worker_connections 85
Creating worker on tid 3574919680
starting receive base loop
num_worker_connections 85
Creating worker on tid 2812539392
starting receive base loop
Created 512 connections total
Creating worker on tid 2047537664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323793.322218,       0.0,      476276,     428451,      47825,     292762,     135689,  10.395189,  22.800000,  28.800000,  50.500000,  13.514482,   0.000000, 289.312005, 500.243804
Outstanding requests per worker:
339 336 329 338 320 387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162159.0,      810796,     729465,      81331,     559623,     169842,  12.944758,  22.100000,  27.800000,  36.100000,   7.342042,   0.363000,  66.584997, 593.086817
Outstanding requests per worker:
354 376 333 356 344 347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162151.2,      810757,     729773,      80984,     587708,     142065,  13.518172,  23.100000,  28.900000,  38.100000,   7.723147,   0.326000,  75.534999, 634.773617
Outstanding requests per worker:
376 396 366 359 387 362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729584,      81282,     602598,     126986,  13.914867,  23.700000,  29.700000,  39.100000,   7.936260,   0.515000,  75.900003, 657.548274
Outstanding requests per worker:
383 385 386 393 367 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162178.2,      810892,     729671,      81221,     613352,     116319,  14.157309,  24.000000,  30.200000,  40.300000,   8.125759,   0.469000,  79.489999, 673.183176
Outstanding requests per worker:
390 384 387 378 385 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162137.2,      810687,     729559,      81128,     621211,     108348,  14.418380,  24.500000,  30.600000,  41.100000,   8.246098,   0.505000,  80.259003, 685.530460
Outstanding requests per worker:
405 419 395 430 417 398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162076.0,      810381,     729759,      80622,     627763,     101996,  15.658625,  26.800000,  35.400000,  58.100000,  10.565173,   0.417000, 140.296996, 695.586780
Outstanding requests per worker:
473 477 512 444 447 610 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:30   0:00 /usr/lib/linux
memcache      7  359  0.0 517248 154112 pts/0   Sl+  21:30   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20426207959      instructions:u                                              
        4971862049      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         540251669      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            167542      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.250266920 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2324165120
starting receive base loop
num_worker_connections 85
Creating worker on tid 1553592832
starting receive base loop
num_worker_connections 85
Creating worker on tid 788591104
starting receive base loop
num_worker_connections 85
Creating worker on tid 26210816
starting receive base loop
num_worker_connections 85
Creating worker on tid 3558797824
starting receive base loop
Created 512 connections total
Creating worker on tid 2793796096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323834.322259,       0.0,      369133,     332096,      37037,     222536,     109560,  24.478911,  59.500000,  76.400000, 112.400000,  26.211863,   0.000000, 355.289012, 485.846674
Outstanding requests per worker:
346 388 397 373 364 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.6,      810774,     730052,      80722,     554405,     175647,  14.139426,  23.800000,  30.200000,  39.900000,   8.015421,   0.546000,  74.839003, 584.086184
Outstanding requests per worker:
451 367 359 383 403 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.6,      810849,     729365,      81484,     584402,     144963,  14.745828,  24.700000,  31.500000,  41.400000,   8.345066,   0.365000,  83.678998, 630.329380
Outstanding requests per worker:
410 399 396 413 398 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.6,      810814,     729225,      81589,     601059,     128166,  15.290967,  25.300000,  32.700000,  43.200000,   8.658584,   0.326000,  80.316998, 655.649856
Outstanding requests per worker:
430 407 395 395 438 368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162159.0,      810796,     729746,      81050,     612303,     117443,  15.483919,  25.700000,  32.800000,  44.100000,   8.811395,   0.511000,  86.214997, 672.600116
Outstanding requests per worker:
417 407 414 431 409 427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.2,      810832,     729605,      81227,     620442,     109163,  15.789792,  26.100000,  33.700000,  44.800000,   8.965510,   0.515000,  88.749997, 684.709147
Outstanding requests per worker:
427 413 412 435 446 422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161490.2,      807452,     726698,      80754,     624933,     101765,  17.323733,  29.900000,  39.700000,  62.500000,  11.581387,   0.571000, 131.699994, 694.679107
Outstanding requests per worker:
950 1042 1037 1011 981 981 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:30   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:30   0:00 /usr/lib/linux
memcache      8  359  0.0 516224 154880 pts/0   Sl+  21:30   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19954137857      instructions:u                                              
        5007014030      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         561112363      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            245378      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.180841533 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1529213440
starting receive base loop
num_worker_connections 85
Creating worker on tid 756347392
starting receive base loop
num_worker_connections 85
Creating worker on tid 4288934400
starting receive base loop
num_worker_connections 85
Creating worker on tid 3523932672
starting receive base loop
num_worker_connections 85
Creating worker on tid 2761552384
starting receive base loop
Created 512 connections total
Creating worker on tid 1996550656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323876.322301,       0.0,      376314,     338763,      37551,     226226,     112537,  17.940606,  38.100000,  55.900000,  94.100000,  20.167582,   0.000000, 320.021987, 484.370079
Outstanding requests per worker:
349 327 329 361 337 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.0,      810821,     730063,      80758,     554070,     175993,  12.727380,  21.800000,  27.300000,  35.300000,   7.189468,   0.435000,  68.449996, 583.100038
Outstanding requests per worker:
334 368 353 365 339 340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.6,      810794,     729263,      81531,     583054,     146209,  13.289436,  22.700000,  28.500000,  37.100000,   7.540405,   0.466000,  74.216001, 628.611497
Outstanding requests per worker:
349 384 363 355 365 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.4,      810848,     729417,      81431,     600261,     129156,  13.645615,  23.400000,  29.100000,  38.300000,   7.783636,   0.500000,  75.018004, 654.213385
Outstanding requests per worker:
385 360 335 356 379 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.0,      810821,     730404,      80417,     613166,     117238,  13.954567,  23.600000,  30.000000,  39.000000,   7.926897,   0.432000,  77.357002, 672.600277
Outstanding requests per worker:
402 390 383 347 386 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.4,      810823,     729961,      80862,     620471,     109490,  14.156071,  23.800000,  30.200000,  39.600000,   8.013179,   0.461000,  75.314000, 684.099263
Outstanding requests per worker:
373 389 387 392 418 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161821.4,      809108,     728369,      80739,     626451,     101918,  14.861327,  25.200000,  32.500000,  44.000000,   8.997983,   0.465000, 105.590999, 694.864904
Outstanding requests per worker:
626 742 682 687 705 662 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:31   0:00 /usr/lib/linux
memcache      7  350  0.0 516224 153216 pts/0   Sl+  21:31   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20020396977      instructions:u                                              
        4822668298      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         532799758      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            181697      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.520760023 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1441133056
starting receive base loop
num_worker_connections 85
Creating worker on tid 665055744
starting receive base loop
num_worker_connections 85
Creating worker on tid 4195021312
starting receive base loop
num_worker_connections 85
Creating worker on tid 3432641024
starting receive base loop
num_worker_connections 85
Creating worker on tid 2667639296
starting receive base loop
Created 512 connections total
Creating worker on tid 1905259008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323917.322342,       0.0,      380322,     342549,      37773,     229890,     112659,  33.947353,  77.500000,  91.000000, 128.100000,  31.683399,   0.000000, 337.935001, 486.742866
Outstanding requests per worker:
649 620 677 685 606 727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166884.4,      834423,     750734,      83689,     571649,     179085,  18.991831,  34.700000,  45.200000,  72.000000,  13.265633,   0.674000, 132.017002, 586.628721
Outstanding requests per worker:
463 532 479 457 469 525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166668.8,      833345,     749941,      83404,     601940,     148001,  17.531275,  28.600000,  37.400000,  50.700000,  10.014055,   0.583000,  99.454999, 631.644845
Outstanding requests per worker:
449 504 498 475 520 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166667.4,      833338,     749560,      83778,     618396,     131164,  17.933476,  28.800000,  38.200000,  51.200000,  10.129985,   0.631000,  99.555001, 656.911907
Outstanding requests per worker:
594 487 524 460 489 506 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166635.6,      833179,     749518,      83661,     630575,     118943,  19.383950,  33.800000,  43.100000,  63.700000,  12.026154,   0.603000, 113.627002, 674.034929
Outstanding requests per worker:
579 554 531 548 559 538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166660.6,      833304,     750438,      82866,     639040,     111398,  20.397308,  36.000000,  46.700000,  68.900000,  13.074356,   0.595000, 125.450999, 686.219901
Outstanding requests per worker:
613 596 501 590 514 573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166407.4,      832038,     748641,      83397,     644648,     103993,  21.372248,  38.300000,  51.800000,  79.900000,  14.975030,   0.781000, 171.243995, 695.851098
Outstanding requests per worker:
802 792 814 766 754 815 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:32   0:00 /usr/lib/linux
memcache      7  341  0.0 518272 159040 pts/0   Sl+  21:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20663906319      instructions:u                                              
        4765043871      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         537187080      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            321298      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.480647424 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1944056320
starting receive base loop
num_worker_connections 85
Creating worker on tid 1175122432
starting receive base loop
num_worker_connections 85
Creating worker on tid 412742144
starting receive base loop
num_worker_connections 85
Creating worker on tid 3942707712
starting receive base loop
num_worker_connections 85
Creating worker on tid 3180327424
starting receive base loop
Created 512 connections total
Creating worker on tid 2417947136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575323958.322383,       0.0,      378950,     340968,      37982,     229142,     111826,  35.267556,  80.000000,  93.700000, 137.000000,  33.641900,   0.000000, 340.148985, 488.986782
Outstanding requests per worker:
787 791 705 747 695 716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166591.4,      832958,     749901,      83057,     570155,     179746,  25.906539,  63.200000,  77.700000,  96.000000,  22.526620,   0.592000, 174.325004, 584.798869
Outstanding requests per worker:
766 813 818 848 758 880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166448.4,      832243,     749196,      83047,     601003,     148193,  32.215951,  83.400000,  99.400000, 136.000000,  31.481823,   0.412000, 243.193999, 631.563360
Outstanding requests per worker:
1048 973 1014 1111 962 953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166594.4,      832973,     749584,      83389,     618800,     130784,  36.370098,  96.700000, 120.400000, 153.900000,  37.243791,   0.652000, 254.377991, 657.201847
Outstanding requests per worker:
1044 1021 1059 1147 1140 1109 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166553.0,      832766,     749200,      83566,     629322,     119878,  41.559303, 119.700000, 144.200000, 187.100000,  46.001280,   0.529000, 342.002004, 673.007995
Outstanding requests per worker:
1220 1166 1122 1179 1217 1236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166693.2,      833467,     750001,      83466,     638848,     111153,  43.049640, 125.500000, 147.900000, 192.200000,  48.047630,   0.732000, 329.053998, 685.686292
Outstanding requests per worker:
1232 1114 1153 1223 1142 1205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165846.4,      829233,     746331,      82902,     641686,     104645,  48.707977, 131.900000, 155.600000, 202.400000,  50.686906,   0.711000, 324.573010, 695.273414
Outstanding requests per worker:
1805 1867 1973 1870 1887 1849 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:32   0:00 /usr/lib/linux
memcache      7  360  0.0 518272 157120 pts/0   Sl+  21:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20710813676      instructions:u                                              
        4906648378      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         545493044      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1353637      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.110458636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1538060800
starting receive base loop
num_worker_connections 85
Creating worker on tid 764408320
starting receive base loop
num_worker_connections 85
Creating worker on tid 2028032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3531993600
starting receive base loop
num_worker_connections 85
Creating worker on tid 2769613312
starting receive base loop
Created 512 connections total
Creating worker on tid 2007233024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324000.322425,       0.0,      382320,     344046,      38274,     230943,     113103,  58.532910, 109.900000, 128.000000, 194.700000,  44.008998,   0.000000, 399.827003, 487.707687
Outstanding requests per worker:
2141 2158 2229 2180 2341 2465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170298.4,      851493,     766374,      85119,     584048,     182326,  97.955283, 149.300000, 172.400000, 215.200000,  40.473962,   1.167000, 361.957014, 586.794394
Outstanding requests per worker:
3138 3138 3148 3232 3391 3210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170692.0,      853461,     768012,      85449,     617797,     150215, 124.351039, 193.200000, 218.600000, 266.500000,  49.706493,   1.661000, 397.486001, 634.009118
Outstanding requests per worker:
3740 3577 3855 3905 4015 3959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170839.2,      854197,     768901,      85296,     636290,     132611, 142.204420, 219.500000, 253.700000, 327.300000,  58.934790,   2.574000, 490.826011, 658.792568
Outstanding requests per worker:
4077 4102 4458 4399 4449 4566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171145.6,      855729,     770361,      85368,     648628,     121733, 156.921868, 247.700000, 288.000000, 367.200000,  66.502183,   2.717000, 548.090994, 675.551997
Outstanding requests per worker:
4254 4636 4637 4664 4559 4793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171173.8,      855870,     769995,      85875,     656513,     113482, 164.419056, 263.200000, 306.600000, 418.700000,  76.668845,   2.096000, 748.257995, 686.739740
Outstanding requests per worker:
4477 4544 4987 5052 4915 4947 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170619.8,      853100,     767675,      85425,     661718,     105957, 179.242828, 299.000000, 356.300000, 461.300000,  86.343897,   1.613000, 713.284016, 697.044831
Outstanding requests per worker:
5147 4986 5554 5789 5685 5870 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:33   0:00 /usr/lib/linux
memcache      7  341  0.0 521344 168000 pts/0   Sl+  21:33   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21568600506      instructions:u                                              
        4933681308      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         604174731      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5457890      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.621440286 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1569780224
starting receive base loop
num_worker_connections 85
Creating worker on tid 799273472
starting receive base loop
num_worker_connections 85
Creating worker on tid 34271744
starting receive base loop
num_worker_connections 85
Creating worker on tid 3566858752
starting receive base loop
num_worker_connections 85
Creating worker on tid 2801857024
starting receive base loop
Created 512 connections total
Creating worker on tid 2039476736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324041.322466,       0.0,      383920,     345715,      38205,     232397,     113318,  56.600937, 104.000000, 122.000000, 190.600000,  42.259719,   0.000000, 400.353014, 487.751055
Outstanding requests per worker:
1941 1860 2010 1954 1990 2048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171197.0,      855986,     770100,      85886,     586964,     183136,  73.376554, 130.100000, 146.000000, 185.900000,  40.695429,   1.046000, 302.634001, 587.383079
Outstanding requests per worker:
2120 2072 2115 2248 2305 2165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170838.8,      854195,     768661,      85534,     618501,     150160,  85.084998, 153.400000, 179.100000, 220.700000,  52.848821,   1.046000, 338.238001, 633.673065
Outstanding requests per worker:
2588 2512 2631 2815 2723 2781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170971.0,      854856,     769285,      85571,     635993,     133292,  99.573661, 181.900000, 206.700000, 264.100000,  62.645204,   0.922000, 457.780004, 658.512053
Outstanding requests per worker:
2894 3032 3059 3169 3240 3037 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171232.6,      856164,     770711,      85453,     649034,     121677, 110.836550, 196.200000, 228.000000, 306.200000,  68.589706,   1.563000, 521.071017, 675.098261
Outstanding requests per worker:
3078 3032 3357 3481 3347 3225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170937.6,      854689,     769297,      85392,     656456,     112841, 119.200658, 210.500000, 244.900000, 317.000000,  70.905901,   1.535000, 552.048028, 687.634241
Outstanding requests per worker:
3396 3437 3890 3570 3983 3755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170490.8,      852455,     767080,      85375,     661153,     105927, 143.272331, 222.500000, 252.800000, 321.700000,  61.469429,   2.024000, 639.403999, 696.688312
Outstanding requests per worker:
4254 4068 4654 4657 4485 4682 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  21:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:34   0:00 /usr/lib/linux
memcache      7  350  0.0 521344 169280 pts/0   Sl+  21:34   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21513497622      instructions:u                                              
        4817831186      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         586637391      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4138793      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.430847539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2217406976
starting receive base loop
num_worker_connections 85
Creating worker on tid 1443557888
starting receive base loop
num_worker_connections 85
Creating worker on tid 681177600
starting receive base loop
num_worker_connections 85
Creating worker on tid 4211143168
starting receive base loop
num_worker_connections 85
Creating worker on tid 3448762880
starting receive base loop
Created 512 connections total
Creating worker on tid 2686382592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324082.322507,       0.0,      393849,     354515,      39334,     238888,     115627,  72.800543, 133.200000, 153.000000, 260.800000,  54.595661,   0.000000, 456.416011, 490.043820
Outstanding requests per worker:
3166 3121 3156 3333 3322 3809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173942.4,      869713,     782816,      86897,     596575,     186241, 154.073846, 233.200000, 263.100000, 327.500000,  58.512228,   1.650000, 517.570019, 587.141863
Outstanding requests per worker:
5051 5265 5464 5568 5489 5771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174705.2,      873527,     786657,      86870,     633274,     153383, 210.088731, 318.200000, 369.800000, 482.900000,  83.631857,  14.270000, 823.118985, 634.496184
Outstanding requests per worker:
6325 6678 6987 7364 6898 7266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174744.6,      873724,     786577,      87147,     650633,     135944, 257.754495, 410.100000, 492.200000, 646.400000, 114.351585,  17.628999, 924.925983, 658.752548
Outstanding requests per worker:
7185 7872 8931 8638 8753 8872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174599.6,      872999,     785533,      87466,     662185,     123348, 309.226646, 520.000000, 621.500000, 848.500000, 153.031369,  20.570001, 1103.247046, 676.152708
Outstanding requests per worker:
8467 9213 10602 10670 10253 10526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174649.4,      873248,     785977,      87271,     671366,     114611, 361.192201, 653.100000, 766.300000, 1024.400000, 197.578956,  28.108999, 1308.881044, 688.021166
Outstanding requests per worker:
9387 10470 12379 12384 12044 12242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173686.6,      868434,     781438,      86996,     674054,     107384, 430.628845, 805.100000, 928.000000, 1195.300000, 245.180352,  23.042001, 1495.020032, 697.742188
Outstanding requests per worker:
11059 12451 14699 15009 14593 15108 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:35   0:00 /usr/lib/linux
memcache      7  361  0.0 523392 169664 pts/0   Sl+  21:35   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21990747932      instructions:u                                              
        4739366446      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         580018941      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4620532      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.251541144 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1648685568
starting receive base loop
num_worker_connections 85
Creating worker on tid 874443264
starting receive base loop
num_worker_connections 85
Creating worker on tid 109441536
starting receive base loop
num_worker_connections 85
Creating worker on tid 3642028544
starting receive base loop
num_worker_connections 85
Creating worker on tid 2879648256
starting receive base loop
Created 512 connections total
Creating worker on tid 2114646528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324123.322548,       0.0,      390334,     351484,      38850,     236810,     114674,  73.554511, 135.100000, 161.000000, 316.400000,  59.327208,   0.000000, 523.248017, 489.851902
Outstanding requests per worker:
2988 3003 3224 3382 3257 3914 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174061.6,      870309,     783651,      86658,     597741,     185910, 150.164206, 232.700000, 263.400000, 324.100000,  59.857542,   2.383000, 553.533971, 587.900812
Outstanding requests per worker:
4894 5046 5494 5533 5526 5400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175011.2,      875057,     787778,      87279,     634289,     153489, 200.369963, 315.200000, 376.400000, 502.000000,  88.123158,   7.836000, 830.138981, 634.847540
Outstanding requests per worker:
6264 6064 6678 6779 6686 6779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174830.2,      874152,     786979,      87173,     651262,     135717, 244.990277, 416.900000, 507.600000, 695.800000, 126.020303,  10.497000, 1082.919002, 659.048527
Outstanding requests per worker:
7036 7086 8213 8210 8376 8587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174798.8,      873995,     786407,      87588,     662501,     123906, 292.686975, 537.800000, 666.300000, 889.300000, 168.258017,  20.189000, 1149.238944, 675.754669
Outstanding requests per worker:
8281 8210 9729 9442 10253 10022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174936.4,      874683,     787575,      87108,     672285,     115290, 335.842448, 661.700000, 797.100000, 1061.600000, 209.844625,  11.886000, 1392.413020, 688.708203
Outstanding requests per worker:
9305 9231 10981 11137 11656 11378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174072.0,      870361,     783190,      87171,     675832,     107358, 392.610309, 790.500000, 958.500000, 1226.900000, 249.962000,  43.474000, 1839.081049, 698.144951
Outstanding requests per worker:
10863 10885 13101 13488 13833 13580 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:35   0:00 /usr/lib/linux
memcache      7  360  0.0 523392 167168 pts/0   Sl+  21:35   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       22009666711      instructions:u                                              
        4686879965      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         570255274      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4170165      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.219554944 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2307256832
starting receive base loop
num_worker_connections 85
Creating worker on tid 1537470976
starting receive base loop
num_worker_connections 85
Creating worker on tid 772469248
starting receive base loop
num_worker_connections 85
Creating worker on tid 10088960
starting receive base loop
num_worker_connections 85
Creating worker on tid 3540054528
starting receive base loop
Created 512 connections total
Creating worker on tid 2777674240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324164.322589,       0.0,      387943,     349041,      38902,     234524,     114517,  75.484279, 136.000000, 156.900000, 267.800000,  54.933938,   0.000000, 445.627987, 488.530548
Outstanding requests per worker:
3206 3278 3400 3279 3318 3641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173948.4,      869743,     782893,      86850,     597185,     185708, 153.942190, 236.200000, 271.900000, 363.800000,  62.791699,   3.481000, 580.506980, 587.839389
Outstanding requests per worker:
5257 5158 5511 5744 5468 5662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174667.8,      873340,     786184,      87156,     632149,     154035, 209.853566, 343.700000, 405.800000, 519.400000,  94.554260,   5.865000, 770.834982, 633.596513
Outstanding requests per worker:
6607 6452 7179 7256 7262 7112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174590.8,      872955,     785244,      87711,     649829,     135415, 261.682260, 466.000000, 560.100000, 740.100000, 138.393022,  11.919000, 1010.967970, 659.157747
Outstanding requests per worker:
8058 7699 8688 9110 8649 9111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174876.6,      874384,     787096,      87288,     664068,     123028, 311.374164, 595.700000, 721.200000, 927.300000, 184.701040,  38.414001, 1335.605025, 676.974213
Outstanding requests per worker:
9349 8839 10192 10422 10391 10137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174731.4,      873658,     786316,      87342,     671631,     114685, 359.913325, 737.400000, 891.100000, 1116.600000, 233.962208,  12.834000, 1566.061974, 688.239612
Outstanding requests per worker:
10218 10040 11731 12107 11965 12012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173860.8,      869305,     782082,      87223,     674737,     107345, 422.507020, 893.200000, 1059.500000, 1312.000000, 286.361826,  29.151000, 1886.191010, 698.653627
Outstanding requests per worker:
11441 12214 13811 14881 14212 14620 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:36   0:00 /usr/lib/linux
memcache      7  341  0.0 523392 174592 pts/0   Sl+  21:36   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21967734731      instructions:u                                              
        4702550444      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         567797977      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4631160      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.530740325 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1834086912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324206.322631,       0.0,      362823,     326642,      36181,     218487,     108155,  10.037096,  22.100000,  27.400000,  48.700000,  10.194299,   0.000000, 153.349996, 484.330184
Outstanding requests per worker:
147 154 161 194 205 191 159 172 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150928.6,      754644,     680094,      74550,     514843,     165251,   9.526039,  17.700000,  21.800000,  27.300000,   6.042515,   0.196000,  48.904002, 581.131238
Outstanding requests per worker:
174 185 185 196 172 185 185 212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150949.2,      754747,     679342,      75405,     541898,     137444,   9.969469,  18.500000,  22.900000,  28.700000,   6.338398,   0.184000,  45.019999, 626.468659
Outstanding requests per worker:
172 202 191 178 185 211 187 182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150938.6,      754694,     679023,      75671,     556800,     122223,  10.204384,  18.900000,  23.300000,  29.600000,   6.495843,   0.193000,  47.531001, 650.845366
Outstanding requests per worker:
223 194 189 185 168 189 215 207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.0,      754711,     679309,      75402,     567211,     112098,  10.514608,  19.400000,  23.900000,  30.800000,   6.709934,   0.186000,  53.020999, 667.571042
Outstanding requests per worker:
219 204 226 212 188 205 201 163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150938.6,      754694,     679077,      75617,     574955,     104122,  10.761699,  20.000000,  24.400000,  32.000000,   6.915488,   0.202000,  61.400998, 680.586889
Outstanding requests per worker:
207 222 268 178 228 190 176 211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150963.8,      754820,     679774,      75046,     582002,      97772,  10.917554,  20.100000,  24.800000,  32.200000,   6.982677,   0.239000,  62.518001, 690.548044
Outstanding requests per worker:
220 212 186 209 188 214 198 210 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:37   0:00 /usr/lib/linux
memcache      7  351  0.0 444096 150912 pts/0   Sl+  21:37   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18562792255      instructions:u                                              
        4838887439      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         508792823      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            107122      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.680449384 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2020405760
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
num_worker_connections 64
Creating worker on tid 2745627136
starting receive base loop
Created 512 connections total
Creating worker on tid 2149708288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324247.322672,       0.0,      378269,     340561,      37708,     226854,     113707,  12.603698,  26.900000,  34.500000,  69.600000,  14.712287,   0.000000, 280.831009, 482.323974
Outstanding requests per worker:
234 207 179 238 198 189 225 219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153833.8,      769170,     692252,      76918,     524054,     168198,  11.537997,  21.500000,  25.900000,  34.900000,   7.466382,   0.186000,  72.217003, 581.740722
Outstanding requests per worker:
209 225 228 226 234 236 232 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.8,      769220,     692237,      76983,     552965,     139272,  12.193677,  22.500000,  27.100000,  37.500000,   7.920652,   0.224000,  76.200999, 627.664249
Outstanding requests per worker:
218 221 255 260 229 238 247 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.8,      769305,     692102,      77203,     569221,     122881,  12.796404,  23.400000,  28.500000,  39.300000,   8.301244,   0.191000,  79.648003, 653.712934
Outstanding requests per worker:
262 230 260 251 245 241 212 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153841.8,      769210,     692320,      76890,     579388,     112932,  13.125756,  23.900000,  29.200000,  40.200000,   8.497230,   0.234000,  82.188003, 670.148619
Outstanding requests per worker:
255 282 196 264 249 278 247 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.2,      769252,     692314,      76938,     587279,     105035,  13.457164,  24.300000,  30.000000,  41.300000,   8.703268,   0.228000,  85.239001, 682.105513
Outstanding requests per worker:
280 251 255 254 269 270 258 237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153872.2,      769362,     692529,      76833,     593722,      98807,  13.758103,  24.600000,  30.600000,  42.100000,   8.875626,   0.234000,  82.759000, 692.251855
Outstanding requests per worker:
247 232 307 246 234 256 248 253 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:37   0:00 /usr/lib/linux
memcache      7  362  0.0 447168 151296 pts/0   Sl+  21:37   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19014167604      instructions:u                                              
        4835563663      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         516475509      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            142024      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.441748197 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1787097600
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
num_worker_connections 64
Creating worker on tid 2512056832
starting receive base loop
Created 512 connections total
Creating worker on tid 1916137984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324288.322713,       0.0,      376617,     338948,      37669,     227021,     111927,  17.650315,  37.100000,  55.700000, 116.600000,  22.474498,   0.000000, 323.312998, 486.088896
Outstanding requests per worker:
264 283 215 265 218 252 226 241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156832.6,      784164,     705776,      78388,     535204,     170572,  13.173247,  23.800000,  29.300000,  40.300000,   8.497909,   0.232000,  82.690999, 583.399581
Outstanding requests per worker:
283 330 249 264 258 255 279 279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.2,      784342,     705826,      78516,     565411,     140415,  14.189112,  25.100000,  31.500000,  43.200000,   9.089936,   0.229000,  91.715999, 629.800553
Outstanding requests per worker:
307 285 302 249 267 276 276 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156872.4,      784363,     705433,      78930,     580221,     125212,  14.735780,  26.200000,  32.600000,  45.600000,   9.543421,   0.186000,  91.108002, 653.556535
Outstanding requests per worker:
278 240 257 293 291 332 258 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156835.6,      784179,     705164,      79015,     591382,     113782,  15.155212,  26.800000,  33.700000,  46.200000,   9.734148,   0.283000,  91.893002, 672.201937
Outstanding requests per worker:
322 274 361 303 276 311 299 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156884.0,      784421,     705900,      78521,     599177,     106723,  15.586584,  27.700000,  34.600000,  49.100000,  10.225758,   0.279000,  97.448997, 682.699763
Outstanding requests per worker:
299 288 305 252 315 292 354 324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156795.0,      783976,     705532,      78444,     605173,     100359,  16.988092,  31.500000,  40.000000,  64.100000,  12.350101,   0.184000, 131.613001, 692.767152
Outstanding requests per worker:
383 312 399 341 329 321 362 364 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:38   0:00 /usr/lib/linux
memcache      7  361  0.0 448192 150784 pts/0   Sl+  21:38   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19375443392      instructions:u                                              
        4744782419      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         518320402      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            204645      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.260342164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2324623872
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324330.322755,       0.0,      469894,     423222,      46672,     289048,     134174,  10.449507,  24.500000,  31.000000,  56.900000,  14.145677,   0.000000, 284.603000, 500.246320
Outstanding requests per worker:
263 271 273 255 274 265 245 259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156856.2,      784282,     706402,      77880,     542437,     163965,  13.291416,  24.200000,  29.400000,  41.300000,   8.642741,   0.198000,  79.689004, 593.640305
Outstanding requests per worker:
264 300 301 261 250 291 280 258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.0,      784291,     706083,      78208,     566966,     139117,  14.169736,  25.300000,  31.500000,  43.500000,   9.148341,   0.235000,  85.747004, 632.562924
Outstanding requests per worker:
282 254 287 292 289 308 294 266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.2,      784307,     706021,      78286,     582008,     124013,  14.827243,  26.300000,  32.800000,  45.600000,   9.569121,   0.276000,  88.748999, 655.884256
Outstanding requests per worker:
318 280 285 314 303 260 273 282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.6,      784294,     705986,      78308,     592650,     113336,  15.262215,  26.700000,  34.100000,  47.000000,   9.881730,   0.251000, 101.480998, 672.441206
Outstanding requests per worker:
353 321 270 300 275 275 281 307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156860.0,      784301,     705682,      78619,     600243,     105439,  15.514793,  27.200000,  34.500000,  47.800000,   9.982121,   0.282000,  95.299996, 684.768552
Outstanding requests per worker:
333 303 271 328 267 380 303 267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156842.2,      784212,     705746,      78466,     606213,      99533,  15.750013,  27.900000,  35.000000,  49.100000,  10.250184,   0.235000,  95.744997, 693.911396
Outstanding requests per worker:
404 320 297 309 306 282 353 329 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:39   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 157376 pts/0   Sl+  21:39   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19742424211      instructions:u                                              
        4826200527      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         523367453      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            191291      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.150894834 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2124608000
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324373.322798,       0.0,      480529,     432686,      47843,     296344,     136342,  13.697466,  32.600000,  43.000000,  72.900000,  16.071881,   0.000000, 198.462993, 502.295739
Outstanding requests per worker:
345 328 330 337 412 329 279 321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159986.2,      799932,     719777,      80155,     552680,     167097,  16.812361,  29.300000,  37.500000,  52.400000,  10.905718,   0.239000, 105.125003, 593.430492
Outstanding requests per worker:
328 313 353 375 341 384 338 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159890.4,      799453,     719787,      79666,     579694,     140093,  19.308186,  36.100000,  46.500000,  70.900000,  13.903047,   0.376000, 122.570999, 634.649965
Outstanding requests per worker:
402 451 404 426 504 428 395 404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159381.4,      796908,     717222,      79686,     592161,     125061,  31.280713,  81.500000, 105.000000, 151.100000,  33.273589,   0.288000, 282.485008, 657.200536
Outstanding requests per worker:
752 851 836 845 836 850 809 781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159824.2,      799122,     719261,      79861,     604487,     114774,  43.973172, 130.800000, 155.700000, 207.200000,  51.313638,   0.232000, 386.467010, 673.754242
Outstanding requests per worker:
995 1015 898 950 889 857 999 890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159841.8,      799210,     719135,      80075,     612463,     106672,  49.764581, 154.900000, 184.400000, 233.100000,  60.932127,   0.340000, 358.491004, 686.167863
Outstanding requests per worker:
1040 898 1125 963 949 1197 1006 1160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158674.6,      793374,     714080,      79294,     614367,      99713,  58.743663, 176.800000, 209.700000, 261.700000,  69.570716,   0.325000, 386.860013, 695.243393
Outstanding requests per worker:
1814 1950 1930 1944 1912 1818 1784 1868 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:39   0:00 /usr/lib/linux
memcache      7  342  0.0 517248 155776 pts/0   Sl+  21:39   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20323544174      instructions:u                                              
        4844873715      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         561056412      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1311208      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.530871529 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2135290368
starting receive base loop
num_worker_connections 64
Creating worker on tid 1537667584
starting receive base loop
num_worker_connections 64
Creating worker on tid 941748736
starting receive base loop
num_worker_connections 64
Creating worker on tid 345829888
starting receive base loop
num_worker_connections 64
Creating worker on tid 4044878336
starting receive base loop
num_worker_connections 64
Creating worker on tid 3451580928
starting receive base loop
num_worker_connections 64
Creating worker on tid 2855662080
starting receive base loop
Created 512 connections total
Creating worker on tid 2259743232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324416.322841,       0.0,      487368,     438403,      48965,     300492,     137911,  13.968124,  33.600000,  44.600000,  75.200000,  16.772785,   0.000000, 263.929009, 502.929848
Outstanding requests per worker:
350 295 384 338 332 338 348 329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159988.6,      799944,     720413,      79531,     553834,     166579,  16.880899,  29.200000,  37.600000,  52.700000,  10.889222,   0.315000,  97.005002, 594.249046
Outstanding requests per worker:
389 317 352 335 345 387 342 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159928.8,      799645,     719529,      80116,     579191,     140338,  17.843357,  30.600000,  40.400000,  56.500000,  11.694970,   0.288000, 115.225002, 634.093964
Outstanding requests per worker:
400 378 431 366 402 466 359 409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159388.0,      796941,     717317,      79624,     592691,     124626,  28.456152,  68.600000,  89.200000, 130.800000,  27.451330,   0.379000, 235.130996, 657.685513
Outstanding requests per worker:
734 715 894 713 848 845 838 720 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159812.8,      799065,     719099,      79966,     604789,     114310,  43.350587, 126.500000, 150.300000, 194.900000,  48.563942,   0.278000, 296.009004, 673.870530
Outstanding requests per worker:
957 910 869 936 922 886 931 872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159808.6,      799044,     719059,      79985,     612124,     106935,  49.656502, 151.400000, 180.200000, 227.900000,  59.324340,   0.324000, 393.074989, 685.646612
Outstanding requests per worker:
971 1037 1093 1101 1016 970 1042 1049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158796.8,      793985,     714369,      79616,     614935,      99434,  54.413231, 156.800000, 187.900000, 239.800000,  61.860667,   0.424000, 400.941014, 695.559218
Outstanding requests per worker:
1857 1769 1725 1681 1779 1863 1871 1791 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:40   0:00 /usr/lib/linux
memcache      7  351  0.0 516224 159296 pts/0   Sl+  21:40   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20270858344      instructions:u                                              
        4954383390      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         574822537      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1235062      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.680970262 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2028335616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1435693568
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324457.322882,       0.0,      387683,     349321,      38362,     234519,     114802,  38.512869,  85.300000, 102.000000, 150.900000,  36.623082,   0.000000, 434.022993, 487.301279
Outstanding requests per worker:
939 968 967 1002 900 1020 1016 909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163175.8,      815880,     734552,      81328,     558521,     176031,  47.570394, 129.300000, 154.300000, 203.600000,  49.840410,   0.384000, 351.738989, 584.447349
Outstanding requests per worker:
1102 989 994 1001 1048 1066 955 1050 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162705.2,      813527,     732435,      81092,     587716,     144719,  58.463438, 185.400000, 219.000000, 278.000000,  73.658355,   0.339000, 447.171003, 631.629432
Outstanding requests per worker:
1435 1497 1449 1310 1360 1515 1263 1239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162353.4,      811768,     730569,      81199,     602507,     128062,  80.340763, 235.500000, 277.200000, 344.700000,  92.828114,   0.409000, 502.228975, 656.377515
Outstanding requests per worker:
2095 1862 1940 1947 1974 1998 1896 1989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162580.2,      812902,     731509,      81393,     614931,     116578, 107.733228, 284.500000, 338.100000, 437.100000, 113.582864,   0.372000, 749.001026, 673.484805
Outstanding requests per worker:
2537 2190 2605 2344 2418 2408 2373 2344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161668.0,      808341,     727767,      80574,     619518,     108249, 142.456764, 324.300000, 394.700000, 528.300000, 120.346888,   0.562000, 938.745022, 685.784314
Outstanding requests per worker:
3581 3129 3565 3213 3437 3423 3486 3414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161809.0,      809046,     728228,      80818,     626299,     101929, 182.557283, 356.500000, 433.800000, 650.400000, 126.652284,   1.218000, 1247.318983, 694.921739
Outstanding requests per worker:
4466 4137 4445 4045 4292 4482 4306 4410 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:41   0:00 /usr/lib/linux
memcache      7  352  0.0 516224 160000 pts/0   Sl+  21:41   2:10 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  21:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20411142053      instructions:u                                              
        4748732342      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         564014633      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3092412      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.230530741 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2431906304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1838346752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324499.322924,       0.0,      386485,     347927,      38558,     233747,     114180,  60.861805, 122.200000, 142.500000, 215.800000,  50.688010,   0.000000, 426.993012, 487.781857
Outstanding requests per worker:
2157 2243 2211 2053 2268 2186 2173 2247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163615.2,      818077,     736394,      81683,     560176,     176218, 155.170809, 240.100000, 278.000000, 361.700000,  64.904715,   1.000000, 539.030015, 585.732009
Outstanding requests per worker:
4090 4157 3975 4096 4132 4058 4251 4105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164300.4,      821503,     739144,      82359,     592842,     146302, 233.396142, 362.200000, 430.900000, 554.000000,  98.121159,   6.930000, 848.774016, 631.847663
Outstanding requests per worker:
5512 5708 5470 5674 5633 5542 5593 5651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164600.4,      823003,     740517,      82486,     611044,     129473, 300.403756, 493.400000, 584.400000, 730.500000, 132.242874,  11.607000, 956.529975, 656.873077
Outstanding requests per worker:
6803 7228 6884 7050 6860 6728 6804 6879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164126.6,      820634,     738289,      82345,     620767,     117522, 366.333734, 636.700000, 754.500000, 891.300000, 177.894397,  65.076999, 1164.319992, 673.638759
Outstanding requests per worker:
8417 8561 8428 8483 8943 8149 8366 8650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164483.2,      822417,     739823,      82594,     629390,     110433, 440.235321, 795.500000, 901.800000, 1094.900000, 223.707310,  22.012999, 1438.899040, 684.623733
Outstanding requests per worker:
9760 9906 9965 9997 10041 9758 9586 9971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163154.2,      815772,     734195,      81577,     632051,     102144, 516.057252, 945.200000, 1102.900000, 1324.900000, 275.112949,  71.400002, 1618.460059, 695.768320
Outstanding requests per worker:
12060 12194 12459 12284 12050 11930 11475 12192 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:41   0:00 /usr/lib/linux
memcache      7  352  0.0 517248 163968 pts/0   Sl+  21:41   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20635844232      instructions:u                                              
        4868502314      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         549461869      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3805133      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.511373108 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1831334400
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324542.322967,       0.0,      487264,     438568,      48696,     300506,     138062,  37.509858,  94.600000, 114.000000, 153.500000,  41.205535,   0.000000, 397.462994, 502.182088
Outstanding requests per worker:
1789 1818 1857 1636 1784 1691 1826 1839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163599.8,      818000,     736557,      81443,     565287,     171270, 136.818185, 218.700000, 258.500000, 334.100000,  63.262443,   1.108000, 597.038984, 593.549207
Outstanding requests per worker:
3706 3679 3692 3668 3690 3706 3712 3775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164529.4,      822648,     740728,      81920,     597413,     143315, 210.133355, 331.200000, 388.100000, 506.000000,  90.864451,   2.234000, 801.910996, 635.496336
Outstanding requests per worker:
4944 5055 4968 4938 5217 5171 5000 5089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164859.0,      824296,     741493,      82803,     613255,     128238, 269.310740, 434.200000, 510.600000, 659.300000, 119.875500,  10.004000, 987.636030, 658.833688
Outstanding requests per worker:
5939 6324 6201 6481 6271 6051 6042 6194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165008.6,      825044,     742541,      82503,     625120,     117421, 320.733037, 546.000000, 659.200000, 831.200000, 157.592711,  10.386000, 1088.143945, 674.956378
Outstanding requests per worker:
6975 7334 7264 7448 7236 7310 6903 7431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164848.6,      824244,     742079,      82165,     632603,     109476, 373.397605, 672.400000, 806.000000, 992.500000, 201.195357,  14.899000, 1349.727035, 686.924670
Outstanding requests per worker:
8117 8440 8285 8581 8220 8719 8131 8548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164116.0,      820581,     738612,      81969,     635945,     102667, 430.596728, 802.500000, 985.000000, 1216.600000, 251.167160,  21.411000, 1531.708002, 696.130147
Outstanding requests per worker:
9726 10110 10271 10024 9773 10358 9698 9903 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:42   0:00 /usr/lib/linux
memcache      7  351  0.0 519296 167168 pts/0   Sl+  21:42   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21173243754      instructions:u                                              
        4852276121      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         577990956      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4683218      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.580991377 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1610740224
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
num_worker_connections 64
Creating worker on tid 2334913024
starting receive base loop
Created 512 connections total
Creating worker on tid 1738994176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324582.323007,       0.0,      381748,     343529,      38219,     231006,     112523,  77.702705, 150.200000, 177.600000, 309.400000,  64.947993,   0.000000, 582.635999, 488.500915
Outstanding requests per worker:
2803 2866 2792 2904 2824 2683 2840 3531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165154.2,      825772,     743455,      82317,     565117,     178338, 215.970950, 325.400000, 375.400000, 487.300000,  85.568394,   2.013000, 738.020003, 584.771713
Outstanding requests per worker:
6283 6065 6026 5864 6022 5905 6067 6348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165971.4,      829858,     746983,      82875,     599489,     147494, 346.881590, 524.900000, 598.900000, 753.300000, 129.031320,  31.408999, 1032.665014, 631.386752
Outstanding requests per worker:
9077 8958 8510 8546 8751 8383 8676 8967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165600.8,      828005,     744918,      83087,     614335,     130583, 475.445324, 734.200000, 847.700000, 1053.200000, 190.041984,  66.535003, 1332.806945, 656.513873
Outstanding requests per worker:
12044 11605 11687 11647 11514 11367 11468 11685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165227.6,      826139,     743662,      82477,     624733,     118929, 614.737398, 963.300000, 1114.200000, 1373.400000, 258.333906,  70.990004, 1868.620992, 673.026005
Outstanding requests per worker:
14953 14868 14656 14691 14702 14578 14693 14919 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164735.8,      823680,     741509,      82171,     631657,     109852, 771.267657, 1200.600000, 1370.500000, 1656.700000, 309.961025, 145.365000, 2192.198038, 685.852142
Outstanding requests per worker:
18615 18328 18262 17962 18051 17829 18238 18216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163816.0,      819081,     737291,      81790,     634121,     103170, 941.011542, 1448.100000, 1615.200000, 1970.100000, 361.468684, 157.251999, 2584.954977, 695.212664
Outstanding requests per worker:
22842 22286 22552 21843 21765 22122 22109 22042 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:43   0:00 /usr/lib/linux
memcache      7  361  0.0 516224 167232 pts/0   Sl+  21:43   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20707015846      instructions:u                                              
        4616884479      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         534816371      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2308182      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.321837600 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1697968640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324624.323049,       0.0,      384999,     346602,      38397,     232497,     114105,  72.914310, 142.800000, 165.900000, 245.600000,  58.091329,   0.000000, 464.758992, 487.912231
Outstanding requests per worker:
2522 2714 2617 2662 2613 2566 2690 3026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165986.4,      829933,     747019,      82914,     569452,     177567, 191.160865, 302.100000, 353.700000, 458.800000,  83.334157,   1.205000, 674.741983, 586.647926
Outstanding requests per worker:
5424 5577 5349 5445 5010 5073 5212 5504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166784.8,      833925,     750722,      83203,     602754,     147968, 300.234517, 482.600000, 570.400000, 738.500000, 132.171076,  25.542000, 1035.943985, 632.053839
Outstanding requests per worker:
7662 7698 7322 7328 7358 7433 7285 7749 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166697.0,      833486,     750126,      83360,     619404,     130722, 399.123990, 682.700000, 795.600000, 997.500000, 192.088840,  38.387999, 1359.030962, 656.713063
Outstanding requests per worker:
9653 9753 9624 9687 9559 9753 9468 9964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166497.8,      832490,     749528,      82962,     630338,     119190, 505.998525, 911.200000, 1048.400000, 1245.600000, 260.326384,  59.652001, 1617.944956, 673.651635
Outstanding requests per worker:
12104 11964 12205 12035 11933 11830 11699 12338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166218.6,      831094,     747966,      83128,     637084,     110882, 617.586651, 1134.100000, 1269.600000, 1506.500000, 325.079098,  94.582997, 1947.716951, 685.430245
Outstanding requests per worker:
14373 14254 14622 14576 14469 14421 14532 14878 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165315.6,      826579,     744045,      82534,     641101,     102944, 744.053392, 1377.400000, 1555.100000, 1809.700000, 397.350198,  58.083002, 2242.026091, 696.097211
Outstanding requests per worker:
17256 17577 17463 17629 17234 17785 17688 18094 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:44   0:00 /usr/lib/linux
memcache      7  351  0.0 517248 170496 pts/0   Sl+  21:44   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20959228411      instructions:u                                              
        4644757115      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         550081365      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2849217      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.419965449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2277044736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324666.323091,       0.0,      500187,     450393,      49794,     309008,     141385,  57.312273, 140.600000, 165.100000, 247.400000,  62.663845,   0.000000, 488.323987, 503.711228
Outstanding requests per worker:
3061 2969 2949 3091 3118 3149 2960 3593 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167312.6,      836564,     752943,      83621,     579588,     173355, 242.097337, 364.200000, 415.200000, 518.900000,  92.410634,   2.146000, 791.325986, 595.481173
Outstanding requests per worker:
7198 7208 7157 7250 7219 7112 7138 7678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167916.0,      839581,     755609,      83972,     609608,     146001, 415.769366, 630.500000, 715.800000, 856.800000, 155.829453,  41.072000, 1343.240023, 636.443019
Outstanding requests per worker:
10701 11347 11059 11030 10921 10946 10880 11139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167532.2,      837662,     753970,      83692,     624370,     129600, 593.159421, 902.400000, 1011.600000, 1192.100000, 223.310626,  91.972001, 1528.517008, 660.014024
Outstanding requests per worker:
14719 15297 14736 15313 14929 14982 15072 14982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166971.8,      834860,     751014,      83846,     632742,     118272, 784.434285, 1187.100000, 1311.600000, 1514.700000, 285.598540, 112.646997, 1891.299009, 675.522466
Outstanding requests per worker:
18961 19862 18989 19345 19531 19336 19475 19288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166351.2,      831757,     749129,      82628,     639293,     109836, 994.138471, 1487.100000, 1630.000000, 1833.600000, 345.575438, 154.128000, 2113.034964, 687.320343
Outstanding requests per worker:
23964 24662 23564 24123 24118 23982 23984 24271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165433.6,      827169,     744319,      82850,     641259,     103060, 1222.779921, 1785.500000, 1937.700000, 2140.300000, 397.712939, 179.240003, 2522.706032, 696.307061
Outstanding requests per worker:
28876 29767 29127 29233 29655 29151 29663 29676 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:44   0:00 /usr/lib/linux
memcache      7  352  0.0 520320 170368 pts/0   Sl+  21:44   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21359596168      instructions:u                                              
        4787731860      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         560920639      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2144631      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.400714306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2103046656
starting receive base loop
num_worker_connections 64
Creating worker on tid 1505423872
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324707.323132,       0.0,      392889,     353444,      39445,     238550,     114894, 101.801863, 199.000000, 234.800000, 439.700000,  89.773260,   0.000000, 795.937002, 491.366794
Outstanding requests per worker:
4029 4081 4146 4198 4045 4125 4044 6073 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168140.6,      840704,     756668,      84036,     577610,     179058, 332.733639, 505.400000, 578.600000, 733.300000, 130.688168,  19.026000, 1063.156962, 588.604227
Outstanding requests per worker:
10108 10149 9979 10400 10138 10136 10177 11903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167569.6,      837849,     754033,      83816,     606564,     147469, 604.740998, 867.200000, 954.100000, 1129.900000, 195.222894,  98.981999, 1680.552006, 633.273062
Outstanding requests per worker:
16252 16814 16331 16865 16484 16639 16652 18093 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166751.2,      833757,     750399,      83358,     620252,     130147, 906.951187, 1239.400000, 1336.700000, 1534.800000, 253.261888, 182.542995, 1980.118036, 658.390436
Outstanding requests per worker:
22974 23839 23464 23558 22880 23739 23994 24858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165982.2,      829912,     747035,      82877,     628311,     118724, 1226.873581, 1613.700000, 1735.300000, 1974.100000, 299.216803, 277.947009, 2396.886110, 674.428165
Outstanding requests per worker:
30343 31129 31081 30852 30386 30948 31191 32434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165550.4,      827753,     745662,      82091,     634903,     110759, 1565.985842, 2025.300000, 2159.700000, 2456.800000, 347.383978, 548.343003, 2879.076958, 685.642286
Outstanding requests per worker:
37908 39003 38285 38582 38032 38694 38870 40222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164432.4,      822163,     740191,      81972,     636957,     103234, 1917.585919, 2441.700000, 2611.000000, 2918.800000, 395.489727, 742.805004, 3434.297085, 695.271988
Outstanding requests per worker:
46206 47350 46454 47026 46318 46936 47205 48939 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  21:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:45   0:00 /usr/lib/linux
memcache      7  343  0.0 519296 170816 pts/0   Sl+  21:45   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20966705212      instructions:u                                              
        4469331996      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         544408279      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1311799      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.511149911 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2323837440
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324749.323174,       0.0,      505013,     454567,      50446,     311771,     142796,  68.294733, 164.600000, 201.300000, 375.700000,  80.649473,   0.000000, 702.665985, 503.388444
Outstanding requests per worker:
3678 3507 3686 3695 3736 3674 3648 5303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167981.6,      839909,     755892,      84017,     581411,     174481, 314.731704, 481.500000, 543.500000, 672.100000, 122.272150,  18.655000, 1059.064031, 595.660979
Outstanding requests per worker:
10012 9465 10109 9824 10019 10131 9826 10573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167448.0,      837241,     753728,      83513,     608323,     145405, 591.298603, 829.900000, 911.300000, 1064.500000, 179.121618,  72.233997, 1549.424052, 637.080561
Outstanding requests per worker:
16085 16130 16255 16499 16437 16509 16407 17349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166908.6,      834544,     751434,      83110,     623488,     127946, 889.383931, 1193.600000, 1287.000000, 1500.700000, 233.597301, 217.701003, 2067.420006, 661.909384
Outstanding requests per worker:
23049 23067 23172 23157 23403 23358 23094 23806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166376.0,      831881,     748350,      83531,     631306,     117044, 1206.367129, 1563.100000, 1681.600000, 1908.400000, 272.299063, 326.373011, 2651.524067, 677.230252
Outstanding requests per worker:
30104 29991 30252 30136 30716 30575 30410 31043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165820.6,      829104,     746269,      82835,     637273,     108996, 1532.583087, 1956.500000, 2093.200000, 2327.000000, 319.491191, 471.570998, 3067.214012, 688.892390
Outstanding requests per worker:
37747 37553 37505 37538 38314 37810 38199 38407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164326.0,      821631,     739519,      82112,     638042,     101477, 1886.784705, 2395.100000, 2533.100000, 2840.200000, 378.476598, 771.028996, 3487.248898, 698.115624
Outstanding requests per worker:
46064 46061 46056 46294 46374 46228 46612 46720 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:46   0:00 /usr/lib/linux
memcache      7  352  0.0 521344 172544 pts/0   Sl+  21:46   2:13 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  21:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21442047691      instructions:u                                              
        4726376106      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         581203530      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1792347      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.210961719 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 768471552
starting receive base loop
num_worker_connections 171
Creating worker on tid 3603755520
starting receive base loop
num_worker_connections 171
Creating worker on tid 2143482368
starting receive base loop
num_worker_connections 170
Creating worker on tid 683209216
starting receive base loop
num_worker_connections 170
Creating worker on tid 3525964288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2076373504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324790.323215,       0.0,      327103,     294483,      32620,     195919,      98564,  32.745381,  63.200000,  83.800000, 210.600000,  61.047834,   0.000000, 1275.102019, 480.749622
Outstanding requests per worker:
345 339 369 354 350 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150010.0,      750051,     675255,      74796,     509190,     166065,  14.367912,  26.800000,  30.100000,  35.900000,   8.096670,   0.469000,  44.514000, 578.615057
Outstanding requests per worker:
352 376 366 319 340 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149985.1,      749926,     675189,      74737,     538095,     137094,  14.766825,  27.600000,  31.100000,  37.000000,   8.357843,   0.583000,  50.887998, 624.846108
Outstanding requests per worker:
394 394 372 408 358 379 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150025.0,      750126,     675205,      74921,     553149,     122056,  15.133088,  28.100000,  31.900000,  38.900000,   8.619625,   0.434000,  52.632000, 650.417164
Outstanding requests per worker:
365 398 375 377 388 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149993.3,      749967,     674825,      75142,     563528,     111297,  15.378986,  28.600000,  32.400000,  39.900000,   8.786670,   0.625000,  51.095001, 667.278837
Outstanding requests per worker:
382 386 396 401 388 406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150017.6,      750089,     674953,      75136,     571059,     103894,  15.477154,  28.900000,  32.700000,  39.700000,   8.822276,   0.418000,  52.106000, 679.784855
Outstanding requests per worker:
396 384 388 370 410 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.6,      750019,     675299,      74720,     577160,      98139,  15.712655,  29.100000,  33.300000,  41.400000,   9.034934,   0.614000,  57.135999, 689.124460
Outstanding requests per worker:
377 403 403 391 405 405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:46   0:00 /usr/lib/linux
memcache      7  348  0.0 441024 156672 pts/0   Sl+  21:46   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18253245380      instructions:u                                              
        4914830500      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         527576081      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            139690      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.540963907 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 924316160
starting receive base loop
num_worker_connections 171
Creating worker on tid 3762156032
starting receive base loop
num_worker_connections 171
Creating worker on tid 2301882880
starting receive base loop
num_worker_connections 170
Creating worker on tid 844231168
starting receive base loop
num_worker_connections 170
Creating worker on tid 3686986240
starting receive base loop
Created 1024 connections total
Creating worker on tid 2234774016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324831.323256,       0.0,      331461,     298491,      32970,     197889,     100602,  38.801969,  85.100000, 118.100000, 176.000000,  38.770466,   0.000000, 591.565013, 478.534813
Outstanding requests per worker:
421 405 428 405 403 409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153841.0,      769206,     692299,      76907,     522611,     169688,  16.280073,  29.900000,  34.200000,  43.900000,   9.322827,   0.585000,  59.994001, 578.799436
Outstanding requests per worker:
400 425 473 449 416 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.0,      769226,     692170,      77056,     552454,     139716,  16.869585,  30.900000,  35.800000,  45.900000,   9.704958,   0.582000,  59.615001, 627.195854
Outstanding requests per worker:
463 415 448 442 446 446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153853.4,      769268,     692159,      77109,     567475,     124684,  17.244296,  31.800000,  37.200000,  45.400000,   9.880908,   0.538000,  58.531001, 651.025496
Outstanding requests per worker:
457 457 420 445 446 451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153841.8,      769210,     692363,      76847,     579294,     113069,  17.507721,  32.300000,  37.600000,  46.600000,  10.049092,   0.585000,  59.342999, 669.230487
Outstanding requests per worker:
435 493 450 468 453 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.8,      769250,     692091,      77159,     587357,     104734,  17.766121,  32.500000,  38.200000,  48.200000,  10.252755,   0.679000,  80.445997, 682.051672
Outstanding requests per worker:
492 464 426 462 508 460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153871.0,      769356,     692591,      76765,     593472,      99119,  17.953841,  33.200000,  38.800000,  47.600000,  10.282943,   0.641000,  62.105998, 691.532089
Outstanding requests per worker:
448 430 502 498 454 449 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:47   0:00 /usr/lib/linux
memcache      7  347  0.0 446144 164736 pts/0   Sl+  21:47   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18785347936      instructions:u                                              
        4887266586      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         511311851      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            172563      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.340104380 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1629352448
starting receive base loop
num_worker_connections 171
Creating worker on tid 173142528
starting receive base loop
num_worker_connections 171
Creating worker on tid 3007836672
starting receive base loop
num_worker_connections 170
Creating worker on tid 1547563520
starting receive base loop
num_worker_connections 170
Creating worker on tid 95351296
starting receive base loop
Created 1024 connections total
Creating worker on tid 2940727808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324873.323298,       0.0,      336462,     303052,      33410,     201802,     101250,  56.753491, 128.100000, 166.500000, 280.200000,  65.325867,   0.000000, 970.615983, 481.292679
Outstanding requests per worker:
707 646 709 588 725 693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158086.8,      790435,     711620,      78815,     537843,     173777,  19.779079,  36.600000,  43.300000,  52.200000,  11.742344,   0.844000, 262.457997, 580.089709
Outstanding requests per worker:
521 521 570 535 499 513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.0,      789456,     710223,      79233,     567819,     142404,  19.905493,  36.200000,  43.700000,  52.100000,  11.248922,   0.493000,  65.709002, 627.937919
Outstanding requests per worker:
551 521 560 564 526 510 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.6,      789579,     710967,      78612,     585381,     125586,  20.326161,  36.700000,  44.700000,  53.300000,  11.505221,   0.736000,  69.946997, 654.353144
Outstanding requests per worker:
526 531 539 526 524 557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.2,      789482,     710489,      78993,     595188,     115301,  20.462118,  36.900000,  45.400000,  53.300000,  11.551795,   0.579000,  76.178998, 670.533454
Outstanding requests per worker:
604 574 487 514 537 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.8,      789505,     710412,      79093,     603324,     107088,  20.746352,  37.200000,  45.900000,  54.000000,  11.691396,   0.637000,  91.526002, 683.241223
Outstanding requests per worker:
553 529 528 551 575 538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157903.6,      789519,     710725,      78794,     609880,     100845,  20.893711,  37.500000,  46.300000,  54.400000,  11.793140,   0.728000,  92.785999, 692.743968
Outstanding requests per worker:
570 505 547 535 585 547 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:48   0:00 /usr/lib/linux
memcache      7  347  0.0 447168 166464 pts/0   Sl+  21:48   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19338684492      instructions:u                                              
        4825171764      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         539376715      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            217706      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.580904594 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1254552064
starting receive base loop
num_worker_connections 171
Creating worker on tid 4089639424
starting receive base loop
num_worker_connections 171
Creating worker on tid 2629366272
starting receive base loop
num_worker_connections 170
Creating worker on tid 1169093120
starting receive base loop
num_worker_connections 170
Creating worker on tid 4014469632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2562257408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324914.323339,       0.0,      342704,     308723,      33981,     205095,     103628,  53.166062, 125.000000, 160.400000, 223.600000,  52.783397,   0.000000, 765.600026, 480.427493
Outstanding requests per worker:
648 615 644 648 657 668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158068.8,      790345,     711041,      79304,     537392,     173649,  19.724730,  36.100000,  43.100000,  52.200000,  11.470121,   0.591000, 163.274005, 580.487669
Outstanding requests per worker:
515 549 508 514 501 496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157881.4,      789408,     710141,      79267,     567345,     142796,  19.950086,  36.200000,  43.700000,  52.400000,  11.277596,   0.740000,  70.768997, 627.844015
Outstanding requests per worker:
527 548 513 540 556 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157913.6,      789569,     710237,      79332,     584584,     125653,  20.290135,  36.700000,  44.700000,  52.600000,  11.418217,   0.750000,  65.768003, 654.117703
Outstanding requests per worker:
513 518 526 550 577 498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.4,      789478,     710600,      78878,     595420,     115180,  20.509838,  37.000000,  45.000000,  53.800000,  11.586506,   0.720000,  68.386003, 671.174675
Outstanding requests per worker:
555 545 513 554 523 543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.6,      789474,     710307,      79167,     603578,     106729,  20.710479,  37.300000,  45.700000,  53.900000,  11.659144,   0.711000,  71.927004, 683.802232
Outstanding requests per worker:
535 579 577 522 576 507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157912.4,      789563,     710591,      78972,     609928,     100663,  20.921876,  37.600000,  46.100000,  54.900000,  11.801487,   0.738000,  79.798996, 692.859268
Outstanding requests per worker:
542 548 556 525 562 554 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:48   0:00 /usr/lib/linux
memcache      7  358  0.0 449216 165888 pts/0   Sl+  21:48   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19325987307      instructions:u                                              
        4822270031      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         535914337      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            221443      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.531413606 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 844362240
starting receive base loop
num_worker_connections 171
Creating worker on tid 3678925312
starting receive base loop
num_worker_connections 171
Creating worker on tid 2218652160
starting receive base loop
num_worker_connections 170
Creating worker on tid 758379008
starting receive base loop
num_worker_connections 170
Creating worker on tid 3603755520
starting receive base loop
Created 1024 connections total
Creating worker on tid 2151543296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324955.323380,       0.0,      347149,     312448,      34701,     208035,     104413,  73.850969, 153.400000, 189.500000, 496.300000,  97.457806,   0.000000, 1421.774983, 481.557773
Outstanding requests per worker:
1481 1446 1320 1162 1358 2234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163267.6,      816339,     734433,      81906,     556758,     177675,  24.877868,  45.300000,  53.800000,  93.600000,  21.623971,   0.844000, 829.852998, 582.058640
Outstanding requests per worker:
601 587 615 553 604 605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.4,      810738,     729283,      81455,     583930,     145353,  22.472588,  39.000000,  49.700000,  58.500000,  12.429566,   0.796000, 104.934998, 629.919107
Outstanding requests per worker:
593 633 594 658 634 634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162180.2,      810902,     729665,      81237,     601114,     128551,  22.822115,  39.400000,  50.600000,  59.500000,  12.635135,   0.758000,  91.398999, 655.269313
Outstanding requests per worker:
567 620 634 616 637 642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729726,      81140,     613159,     116567,  23.136819,  39.800000,  51.200000,  60.400000,  12.767420,   0.799000,  98.852001, 672.923407
Outstanding requests per worker:
589 583 655 652 647 614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162167.2,      810837,     729716,      81121,     620997,     108719,  23.428153,  40.100000,  51.600000,  61.500000,  12.949058,   0.688000, 122.188002, 684.857358
Outstanding requests per worker:
609 653 628 605 643 663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161842.6,      809214,     728013,      81201,     626125,     101888,  23.916753,  41.400000,  52.900000,  64.400000,  13.921386,   0.922000, 189.959005, 694.585376
Outstanding requests per worker:
942 877 836 922 948 974 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  21:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:49   0:00 /usr/lib/linux
memcache      7  339  0.0 516224 172096 pts/0   Sl+  21:49   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19966101416      instructions:u                                              
        4686946428      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         537711780      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            288098      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.750877510 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1591276032
starting receive base loop
num_worker_connections 171
Creating worker on tid 130216448
starting receive base loop
num_worker_connections 171
Creating worker on tid 2964910592
starting receive base loop
num_worker_connections 170
Creating worker on tid 1504637440
starting receive base loop
num_worker_connections 170
Creating worker on tid 55046656
starting receive base loop
Created 1024 connections total
Creating worker on tid 2897801728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575324997.323422,       0.0,      342686,     308702,      33984,     205632,     103070,  75.744594, 147.100000, 187.400000, 746.800000, 131.054634,   0.000000, 1941.149950, 481.602455
Outstanding requests per worker:
1274 1200 1252 1266 1313 5143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163723.2,      818617,     737063,      81554,     558025,     179038,  31.464574,  49.300000,  57.600000, 140.300000,  71.770816,   0.740000, 1879.412055, 581.914927
Outstanding requests per worker:
658 641 611 574 597 605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.2,      810817,     730104,      80713,     584333,     145771,  22.903150,  39.400000,  50.300000,  59.600000,  12.520485,   0.854000,  96.469998, 629.999243
Outstanding requests per worker:
685 577 600 639 635 606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162153.4,      810768,     729592,      81176,     601012,     128580,  23.237261,  39.700000,  50.900000,  60.600000,  12.692859,   0.805000, 102.890998, 655.623912
Outstanding requests per worker:
616 582 636 690 652 652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.0,      810876,     729933,      80943,     612818,     117115,  23.504062,  40.000000,  51.200000,  61.700000,  12.832549,   0.883000, 106.429003, 672.158335
Outstanding requests per worker:
622 645 702 597 674 582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162092.6,      810464,     729139,      81325,     620129,     109010,  23.719048,  40.500000,  51.700000,  61.900000,  12.946284,   0.918000, 106.962003, 684.098024
Outstanding requests per worker:
705 673 720 661 757 696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162229.2,      811147,     729641,      81506,     627177,     102464,  24.007811,  41.200000,  52.100000,  63.500000,  13.200198,   1.059000, 128.998995, 694.402179
Outstanding requests per worker:
644 637 669 657 660 669 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:50   0:00 /usr/lib/linux
memcache      7  348  0.0 514176 168128 pts/0   Sl+  21:50   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19926218910      instructions:u                                              
        4853394574      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         528621838      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            270803      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.800287996 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1407644160
starting receive base loop
num_worker_connections 171
Creating worker on tid 4248039936
starting receive base loop
num_worker_connections 171
Creating worker on tid 2790388224
starting receive base loop
num_worker_connections 170
Creating worker on tid 1330115072
starting receive base loop
num_worker_connections 170
Creating worker on tid 4172870144
starting receive base loop
Created 1024 connections total
Creating worker on tid 2720657920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325039.323464,       0.0,      334005,     300826,      33179,     212819,      88007,  87.908000, 175.800000, 213.000000, 573.900000, 111.191401,   0.000000, 1744.611979, 490.114299
Outstanding requests per worker:
1809 1917 1838 1779 1993 4219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164113.8,      820570,     738774,      81796,     583510,     155264,  32.820108,  56.000000,  78.300000, 150.800000,  50.237438,   0.878000, 1521.945000, 575.165651
Outstanding requests per worker:
660 660 659 612 635 645 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.6,      810879,     729588,      81291,     601974,     127614,  23.569927,  40.200000,  51.500000,  61.300000,  12.819392,   0.786000, 112.374000, 614.382044
Outstanding requests per worker:
630 631 694 664 612 661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.0,      810876,     729251,      81625,     616113,     113138,  23.968454,  40.500000,  52.300000,  62.400000,  13.006233,   0.826000, 105.829999, 637.071572
Outstanding requests per worker:
663 635 647 679 620 687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.6,      810849,     729439,      81410,     625535,     103904,  24.116441,  40.600000,  52.700000,  62.700000,  13.038789,   0.952000, 103.644997, 650.976594
Outstanding requests per worker:
665 634 686 663 683 621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.4,      810753,     729806,      80947,     633661,      96145,  24.426305,  41.200000,  53.200000,  63.800000,  13.240229,   0.599000, 120.194003, 662.113359
Outstanding requests per worker:
803 712 625 672 656 606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162207.0,      811036,     729772,      81264,     638663,      91109,  24.653063,  41.200000,  53.500000,  64.500000,  13.361792,   0.906000, 114.197001, 669.682887
Outstanding requests per worker:
627 686 705 658 641 621 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:50   0:00 /usr/lib/linux
memcache      7  347  0.0 433856 150656 pts/0   Sl+  21:50   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20588760496      instructions:u                                              
        4974094308      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         548513293      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            361679      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.641113164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1036120576
starting receive base loop
num_worker_connections 171
Creating worker on tid 3872190976
starting receive base loop
num_worker_connections 171
Creating worker on tid 2411917824
starting receive base loop
num_worker_connections 170
Creating worker on tid 951644672
starting receive base loop
num_worker_connections 170
Creating worker on tid 3794399744
starting receive base loop
Created 1024 connections total
Creating worker on tid 2344808960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325080.323505,       0.0,      345169,     310646,      34523,     207489,     103157,  94.184481, 182.000000, 218.100000, 693.700000, 125.106999,   0.000000, 1689.685941, 483.460862
Outstanding requests per worker:
2416 2363 2273 2351 2543 5650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169275.2,      846377,     761896,      84481,     577356,     184540,  48.471051,  99.300000, 130.400000, 224.300000,  73.205364,   1.024000, 1469.439983, 582.818420
Outstanding requests per worker:
779 725 788 817 795 746 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166640.4,      833203,     750211,      82992,     601862,     148349,  28.610924,  52.600000,  59.800000,  93.300000,  17.469101,   0.740000, 182.238996, 631.414650
Outstanding requests per worker:
801 855 809 840 798 790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166638.4,      833193,     749947,      83246,     619258,     130689,  29.631402,  55.300000,  62.400000, 101.200000,  18.676089,   1.033000, 188.192993, 657.179715
Outstanding requests per worker:
792 930 837 795 855 872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166665.8,      833330,     749730,      83600,     630564,     119166,  29.889858,  54.000000,  62.600000,  95.300000,  18.049322,   0.988000, 187.225997, 673.928090
Outstanding requests per worker:
870 844 862 843 918 816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166692.6,      833464,     750114,      83350,     639677,     110437,  31.065372,  56.700000,  64.900000, 103.500000,  19.320140,   0.988000, 195.763007, 686.806661
Outstanding requests per worker:
824 833 818 916 855 872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166134.8,      830675,     747171,      83504,     643354,     103817,  35.567139,  64.800000,  79.900000, 128.700000,  24.441653,   1.283000, 248.684004, 696.476762
Outstanding requests per worker:
1370 1241 1318 1260 1241 1444 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:51   0:00 /usr/lib/linux
memcache      8  357  0.0 517248 173376 pts/0   Sl+  21:51   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20475595618      instructions:u                                              
        4665279169      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         526902522      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            459891      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.490344912 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1664938496
starting receive base loop
num_worker_connections 171
Creating worker on tid 205386240
starting receive base loop
num_worker_connections 171
Creating worker on tid 3040080384
starting receive base loop
num_worker_connections 170
Creating worker on tid 1582428672
starting receive base loop
num_worker_connections 170
Creating worker on tid 130216448
starting receive base loop
Created 1024 connections total
Creating worker on tid 2972971520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325121.323546,       0.0,      342895,     308696,      34199,     205734,     102962, 100.939671, 189.900000, 231.200000, 776.400000, 131.906516,   0.000000, 1684.337020, 481.467074
Outstanding requests per worker:
2526 2629 2666 2644 2542 6277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169554.2,      847772,     763517,      84255,     578431,     185086,  54.133770, 115.900000, 145.500000, 263.700000,  73.572094,   0.860000, 1485.669017, 582.202813
Outstanding requests per worker:
843 781 887 775 792 831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166663.6,      833319,     749738,      83581,     601258,     148480,  29.822254,  53.900000,  61.600000,  93.900000,  17.515281,   1.178000, 186.483994, 631.017615
Outstanding requests per worker:
802 855 823 834 845 837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166640.0,      833201,     749687,      83514,     618886,     130801,  31.075568,  56.400000,  64.500000, 102.000000,  18.753991,   1.259000, 209.323004, 657.768367
Outstanding requests per worker:
844 874 895 817 882 903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166577.8,      832890,     749615,      83275,     629990,     119625,  32.110875,  58.700000,  67.100000, 108.600000,  19.780089,   1.420000, 199.950993, 673.922256
Outstanding requests per worker:
969 960 938 982 921 976 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166614.0,      833071,     749915,      83156,     639139,     110776,  33.982626,  59.500000,  69.500000, 110.000000,  20.485952,   0.931000, 206.682995, 685.975071
Outstanding requests per worker:
999 1009 986 1045 1008 1010 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166061.8,      830310,     747075,      83235,     642366,     104709,  39.437149,  69.500000,  90.900000, 134.200000,  25.697579,   1.273000, 253.031999, 695.343189
Outstanding requests per worker:
1585 1502 1512 1649 1462 1441 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:52   0:00 /usr/lib/linux
memcache      7  347  0.0 517248 171072 pts/0   Sl+  21:52   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20499377098      instructions:u                                              
        4794517457      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         530312614      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            522298      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.690601747 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1087173120
starting receive base loop
num_worker_connections 171
Creating worker on tid 3920556544
starting receive base loop
num_worker_connections 171
Creating worker on tid 2462904832
starting receive base loop
num_worker_connections 170
Creating worker on tid 1002631680
starting receive base loop
num_worker_connections 170
Creating worker on tid 3845386752
starting receive base loop
Created 1024 connections total
Creating worker on tid 2395795968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325162.323587,       0.0,      345242,     310669,      34573,     207076,     103593, 111.167914, 195.000000, 237.500000, 922.200000, 148.288801,   0.000000, 1967.558026, 482.352243
Outstanding requests per worker:
3467 3144 3155 3357 3284 10876 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173202.8,      866015,     779428,      86587,     591741,     187687, 136.696960, 184.200000, 236.900000, 1086.300000, 169.190488,   2.476000, 2316.874981, 583.900468
Outstanding requests per worker:
2794 2786 2937 2741 2955 4270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171898.4,      859493,     773119,      86374,     620989,     152130,  98.387278, 186.700000, 228.900000, 320.000000,  82.612012,   2.956000, 1237.264991, 632.114302
Outstanding requests per worker:
2683 2628 2746 2575 2788 2799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171428.2,      857142,     771500,      85642,     637749,     133751,  94.504916, 194.700000, 238.600000, 301.100000,  70.399311,   2.464000, 499.233007, 657.951526
Outstanding requests per worker:
2783 2617 2696 2660 2869 2698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171208.2,      856042,     770120,      85922,     647953,     122167,  97.101878, 217.700000, 262.100000, 339.300000,  78.026211,   3.177000, 532.799006, 674.390648
Outstanding requests per worker:
2871 2738 2985 2841 3015 3019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171133.6,      855669,     770108,      85561,     656392,     113716, 104.870752, 237.400000, 281.800000, 364.000000,  84.414747,   2.649000, 606.230021, 686.402655
Outstanding requests per worker:
3157 3033 3181 3167 3151 3324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169678.2,      848392,     763894,      84498,     658434,     105460, 130.782081, 270.100000, 313.200000, 395.100000,  93.514351,   3.065000, 565.766990, 696.863630
Outstanding requests per worker:
4490 4448 4678 4657 4776 4766 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:53   0:00 /usr/lib/linux
memcache      7  357  0.0 521344 175872 pts/0   Sl+  21:53   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21331574611      instructions:u                                              
        4678083316      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         576071454      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2166708      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.420913964 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1404760576
starting receive base loop
num_worker_connections 171
Creating worker on tid 4239979008
starting receive base loop
num_worker_connections 171
Creating worker on tid 2779705856
starting receive base loop
num_worker_connections 170
Creating worker on tid 1322054144
starting receive base loop
num_worker_connections 170
Creating worker on tid 4164809216
starting receive base loop
Created 1024 connections total
Creating worker on tid 2712596992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325203.323628,       0.0,      341409,     307539,      33870,     204631,     102908, 106.564937, 194.300000, 240.900000, 852.800000, 145.037357,   0.000000, 1954.653978, 480.722357
Outstanding requests per worker:
3014 3037 2946 2920 3169 12946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173196.0,      865981,     779656,      86325,     589972,     189684, 145.965084, 201.000000, 266.900000, 1481.800000, 220.993532,   3.497000, 2544.415951, 581.835940
Outstanding requests per worker:
2699 2930 2685 2941 2794 5191 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171955.4,      859778,     773830,      85948,     621681,     152149, 102.654466, 223.500000, 272.200000, 511.300000, 132.572766,   2.057000, 1885.195971, 632.629459
Outstanding requests per worker:
2703 2624 2522 2637 2495 3739 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171311.4,      856558,     770726,      85832,     636090,     134636,  99.015203, 249.700000, 296.400000, 421.800000, 112.278813,   2.956000, 1785.707951, 657.121578
Outstanding requests per worker:
2681 2746 2907 2793 2892 3344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171377.2,      856887,     771290,      85597,     648966,     122324, 101.884105, 262.300000, 309.100000, 406.600000, 103.796045,   3.211000, 1445.796967, 674.300134
Outstanding requests per worker:
2773 2948 2842 2965 2866 3302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171219.4,      856098,     770538,      85560,     657032,     113506, 105.865939, 276.400000, 322.400000, 407.400000, 105.070827,   2.397000, 1187.801003, 686.680037
Outstanding requests per worker:
3165 3155 3071 3005 3189 3245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170250.4,      851253,     765950,      85303,     659669,     106281, 122.763540, 295.300000, 352.100000, 446.200000, 108.958343,   1.669000, 847.472012, 696.970267
Outstanding requests per worker:
4084 4254 4043 4207 4125 4119 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:53   0:00 /usr/lib/linux
memcache      7  357  0.0 521344 177216 pts/0   Sl+  21:53   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21269849236      instructions:u                                              
        4741585154      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         561476335      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2317416      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.280819720 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1183117824
starting receive base loop
num_worker_connections 171
Creating worker on tid 4022530560
starting receive base loop
num_worker_connections 171
Creating worker on tid 2562257408
starting receive base loop
num_worker_connections 170
Creating worker on tid 1101984256
starting receive base loop
num_worker_connections 170
Creating worker on tid 3947360768
starting receive base loop
Created 1024 connections total
Creating worker on tid 2495148544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325244.323669,       0.0,      348574,     313898,      34676,     209887,     104011, 109.171313, 187.100000, 239.300000, 1074.400000, 173.746912,   0.000000, 1993.388057, 484.364316
Outstanding requests per worker:
3183 3363 3303 3225 3290 24163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172538.8,      862695,     776449,      86246,     589170,     187279, 301.641720, 414.500000, 1122.700000, 2300.300000, 393.293287,   4.276000, 3230.638027, 583.381465
Outstanding requests per worker:
7559 7704 7858 7870 8025 21229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174306.4,      871533,     784389,      87144,     630373,     154016, 374.922867, 532.300000, 793.000000, 2153.500000, 324.786137,   8.148000, 3066.066027, 632.623014
Outstanding requests per worker:
10120 10020 10036 10276 10409 20259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174497.8,      872490,     785567,      86923,     650261,     135306, 430.980695, 641.200000, 839.600000, 2033.500000, 303.332092,  25.684999, 2740.252972, 659.335555
Outstanding requests per worker:
11900 11865 12041 12075 12520 20679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174641.8,      873210,     786116,      87094,     662468,     123648, 482.066848, 775.200000, 1003.500000, 1981.600000, 315.721048,  36.474001, 2816.314936, 675.742022
Outstanding requests per worker:
13451 13200 13617 13637 14530 21900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174474.2,      872372,     785215,      87157,     671000,     114215, 538.664945, 915.300000, 1199.500000, 2050.900000, 342.871796,  14.977000, 3124.548912, 688.302605
Outstanding requests per worker:
15430 14791 15497 15296 16460 22896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173623.2,      868117,     780978,      87139,     673441,     107537, 603.649633, 1113.400000, 1372.400000, 2177.400000, 389.300252,  43.765999, 3423.825026, 697.511397
Outstanding requests per worker:
17520 17144 17679 17785 19059 25496 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:54   0:00 /usr/lib/linux
memcache      7  339  0.0 521344 196160 pts/0   Sl+  21:54   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21775626966      instructions:u                                              
        4776708528      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         577255406      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6566941      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.729566973 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1625158144
starting receive base loop
num_worker_connections 171
Creating worker on tid 170521088
starting receive base loop
num_worker_connections 171
Creating worker on tid 3007836672
starting receive base loop
num_worker_connections 170
Creating worker on tid 1547563520
starting receive base loop
num_worker_connections 170
Creating worker on tid 95351296
starting receive base loop
Created 1024 connections total
Creating worker on tid 2940727808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325286.323711,       0.0,      347869,     312913,      34956,     208546,     104367, 100.704229, 170.700000, 222.800000, 1115.700000, 175.324167,   0.000000, 1990.401030, 482.409481
Outstanding requests per worker:
2773 2695 2691 2588 2759 25362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173272.6,      866364,     779809,      86555,     591486,     188323, 281.201062, 359.200000, 1189.900000, 2322.500000, 409.883001,   6.310000, 3300.664902, 583.417870
Outstanding requests per worker:
6831 6834 6828 6573 6902 20956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174970.8,      874855,     787268,      87587,     632526,     154742, 339.278569, 460.000000, 780.300000, 2136.600000, 330.698470,   7.704000, 3050.358057, 632.463171
Outstanding requests per worker:
8608 8654 8684 8809 9127 18627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175456.6,      877284,     789359,      87925,     652862,     136497, 369.209286, 515.200000, 649.700000, 2003.800000, 294.335378,   6.671000, 2994.057894, 658.868649
Outstanding requests per worker:
9886 9796 9936 9803 10332 17896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175260.2,      876302,     788774,      87528,     664309,     124465, 401.178149, 593.800000, 735.800000, 1872.200000, 290.651871,  12.020000, 3110.058069, 674.864951
Outstanding requests per worker:
10906 11137 11005 11201 11586 17930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175438.4,      877193,     789405,      87788,     673804,     115601, 431.094655, 655.500000, 806.600000, 1830.300000, 290.126678,   6.546000, 3491.179943, 687.794864
Outstanding requests per worker:
11938 11785 11866 12330 13001 18077 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174708.2,      873542,     786504,      87038,     677960,     108544, 470.333653, 734.000000, 894.800000, 1854.500000, 299.188846,  12.056000, 3709.168911, 697.098102
Outstanding requests per worker:
13545 13198 13547 13611 14696 19292 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:55   0:00 /usr/lib/linux
memcache      7  348  0.0 522368 188416 pts/0   Sl+  21:55   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21898649232      instructions:u                                              
        4803997503      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         573471570      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6665738      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.750733285 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 998568448
starting receive base loop
num_worker_connections 171
Creating worker on tid 3837325824
starting receive base loop
num_worker_connections 171
Creating worker on tid 2377052672
starting receive base loop
num_worker_connections 170
Creating worker on tid 919400960
starting receive base loop
num_worker_connections 170
Creating worker on tid 3762156032
starting receive base loop
Created 1024 connections total
Creating worker on tid 2309943808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325327.323752,       0.0,      343081,     309110,      33971,     205860,     103250, 105.476473, 181.300000, 237.600000, 1116.300000, 178.873154,   0.000000, 1984.527946, 481.460477
Outstanding requests per worker:
2940 2777 2886 2903 2845 27271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172074.8,      860375,     774469,      85906,     587913,     186556, 316.824896, 416.400000, 1328.100000, 2564.500000, 448.951009,   5.059000, 3449.342012, 583.536382
Outstanding requests per worker:
7693 7824 7931 7867 7870 24478 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174182.0,      870911,     784034,      86877,     629143,     154891, 398.644585, 542.100000, 1007.200000, 2479.500000, 377.300434,   8.764000, 3352.767944, 631.993516
Outstanding requests per worker:
10318 10227 10151 10391 10794 23289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174511.8,      872560,     784902,      87658,     648501,     136401, 453.963738, 658.300000, 911.300000, 2371.900000, 347.883814,  17.808000, 3221.009016, 657.667273
Outstanding requests per worker:
12000 12361 11952 12312 12743 23660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174502.2,      872512,     785274,      87238,     662124,     123150, 506.116344, 767.000000, 992.400000, 2283.400000, 347.383271,  37.994001, 3372.759104, 675.741600
Outstanding requests per worker:
13931 13876 13672 14121 14848 24500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174311.8,      871560,     784325,      87235,     669889,     114436, 568.026225, 896.300000, 1124.200000, 2288.000000, 359.637990,  46.119999, 3461.149931, 688.149444
Outstanding requests per worker:
15896 15718 15608 15721 16866 25994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173010.0,      865051,     778310,      86741,     671327,     106983, 640.184321, 1043.700000, 1294.900000, 2364.700000, 383.276490,  38.750000, 3826.347113, 697.506509
Outstanding requests per worker:
18737 18491 18154 18863 20203 28710 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:55   0:00 /usr/lib/linux
memcache      7  338  0.0 521344 193600 pts/0   Sl+  21:55   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21756434789      instructions:u                                              
        4749339074      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         578872956      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5965869      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.841363963 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1518727680
starting receive base loop
num_worker_connections 128
Creating worker on tid 409727488
starting receive base loop
num_worker_connections 128
Creating worker on tid 3596087808
starting receive base loop
num_worker_connections 128
Creating worker on tid 2482041344
starting receive base loop
num_worker_connections 128
Creating worker on tid 1373434368
starting receive base loop
num_worker_connections 128
Creating worker on tid 259387904
starting receive base loop
num_worker_connections 128
Creating worker on tid 3445748224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2331701760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325369.323794,       0.0,      346511,     311790,      34721,     207906,     103884,  28.116930,  64.700000,  81.700000, 138.400000,  29.240864,   0.000000, 406.735986, 482.190869
Outstanding requests per worker:
276 254 287 312 270 259 270 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150913.4,      754568,     679121,      75447,     513563,     165558,  14.963872,  29.400000,  33.600000,  40.200000,   9.395462,   0.273000,  51.743001, 580.941489
Outstanding requests per worker:
326 312 283 291 313 292 247 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150952.8,      754765,     679315,      75450,     541865,     137450,  15.529666,  30.300000,  35.200000,  42.300000,   9.800909,   0.299000,  53.281002, 626.367033
Outstanding requests per worker:
310 296 319 282 326 314 296 267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150962.6,      754814,     679304,      75510,     557369,     121935,  15.954884,  31.100000,  36.400000,  43.100000,  10.058863,   0.268000,  56.359001, 651.429706
Outstanding requests per worker:
298 300 320 282 311 277 295 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.6,      754719,     679186,      75533,     567818,     111368,  16.220903,  31.600000,  36.900000,  44.200000,  10.263330,   0.294000,  61.023999, 668.321548
Outstanding requests per worker:
320 295 314 345 320 328 302 247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150945.0,      754726,     679324,      75402,     575341,     103983,  16.369594,  31.600000,  37.300000,  45.800000,  10.389906,   0.308000,  55.877000, 680.660663
Outstanding requests per worker:
346 315 294 310 306 314 315 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150958.0,      754791,     679364,      75427,     581777,      97587,  16.512812,  32.000000,  37.400000,  46.400000,  10.496694,   0.336000,  60.401000, 690.560121
Outstanding requests per worker:
334 321 276 305 306 359 299 282 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:56   0:00 /usr/lib/linux
memcache      8  341  0.0 443072 152512 pts/0   Sl+  21:56   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18492416951      instructions:u                                              
        4873013058      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         517707910      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            142802      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.821480674 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1942876672
starting receive base loop
num_worker_connections 128
Creating worker on tid 828502528
starting receive base loop
num_worker_connections 128
Creating worker on tid 4009423360
starting receive base loop
num_worker_connections 128
Creating worker on tid 2900816384
starting receive base loop
num_worker_connections 128
Creating worker on tid 1792209408
starting receive base loop
num_worker_connections 128
Creating worker on tid 678162944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3864523264
starting receive base loop
Created 1024 connections total
Creating worker on tid 2750476800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325411.323836,       0.0,      354307,     318637,      35670,     213000,     105637,  38.209198,  84.700000, 120.700000, 187.400000,  42.063000,   0.000000, 608.482003, 484.477973
Outstanding requests per worker:
410 400 380 393 366 386 353 403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153944.8,      769725,     692921,      76804,     525107,     167814,  17.506843,  33.500000,  40.000000,  49.800000,  11.196418,   0.317000, 139.135003, 582.771020
Outstanding requests per worker:
352 342 314 343 339 334 303 348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153835.0,      769176,     692448,      76728,     552565,     139883,  17.910602,  34.100000,  41.300000,  50.900000,  11.412130,   0.325000,  67.015998, 626.580813
Outstanding requests per worker:
334 367 380 344 333 308 376 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.2,      769277,     691910,      77367,     568271,     123639,  18.396794,  34.600000,  42.600000,  52.200000,  11.713350,   0.295000,  89.201003, 652.037670
Outstanding requests per worker:
335 372 333 354 386 343 307 386 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153846.4,      769233,     692165,      77068,     578676,     113489,  18.571171,  35.000000,  42.900000,  52.800000,  11.828616,   0.301000,  72.029002, 668.809008
Outstanding requests per worker:
355 381 347 336 343 379 344 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153797.0,      768986,     692001,      76985,     586914,     105087,  18.753864,  35.300000,  43.200000,  53.300000,  11.938152,   0.352000,  73.711000, 681.604064
Outstanding requests per worker:
416 393 391 415 388 419 380 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153918.0,      769591,     693093,      76498,     593520,      99573,  18.941768,  35.500000,  44.000000,  53.600000,  12.048195,   0.321000,  66.895001, 691.141874
Outstanding requests per worker:
387 341 358 395 347 397 357 316 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:57   0:00 /usr/lib/linux
memcache      7  360  0.0 446144 156864 pts/0   Sl+  21:57   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18893348639      instructions:u                                              
        4908295775      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         539941063      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            185375      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.419816378 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1942614528
starting receive base loop
num_worker_connections 128
Creating worker on tid 828502528
starting receive base loop
num_worker_connections 128
Creating worker on tid 4009423360
starting receive base loop
num_worker_connections 128
Creating worker on tid 2900816384
starting receive base loop
num_worker_connections 128
Creating worker on tid 1792209408
starting receive base loop
num_worker_connections 128
Creating worker on tid 678162944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3864523264
starting receive base loop
Created 1024 connections total
Creating worker on tid 2750476800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325452.323877,       0.0,      365377,     328933,      36444,     220172,     108761,  41.814315,  90.500000, 129.600000, 216.300000,  52.020685,   0.000000, 904.918015, 485.108217
Outstanding requests per worker:
474 467 452 458 442 457 466 420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157016.4,      785083,     706989,      78094,     535616,     171373,  18.537597,  35.400000,  42.800000,  52.700000,  12.061918,   0.328000, 169.909000, 581.862712
Outstanding requests per worker:
397 326 349 362 394 383 331 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156852.4,      784263,     706124,      78139,     564190,     141934,  18.778783,  35.100000,  43.600000,  53.100000,  11.921475,   0.245000,  70.499003, 627.382256
Outstanding requests per worker:
354 375 438 355 383 352 388 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156883.8,      784420,     706134,      78286,     580819,     125315,  19.202131,  35.900000,  44.600000,  54.700000,  12.237556,   0.292000,  77.763997, 653.808119
Outstanding requests per worker:
359 372 350 331 368 401 400 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.8,      784295,     705661,      78634,     590857,     114804,  19.462129,  36.300000,  45.300000,  54.800000,  12.378711,   0.235000, 110.799998, 670.436361
Outstanding requests per worker:
368 378 384 374 399 395 365 408 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156874.2,      784372,     705637,      78735,     599533,     106104,  19.632808,  36.300000,  46.000000,  55.300000,  12.471894,   0.297000,  82.760997, 683.843833
Outstanding requests per worker:
399 409 347 418 381 374 385 389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156872.8,      784365,     705867,      78498,     605114,     100753,  19.821396,  36.700000,  46.600000,  55.600000,  12.561524,   0.291000,  95.008001, 692.480175
Outstanding requests per worker:
388 391 406 379 388 398 366 379 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:57   0:00 /usr/lib/linux
memcache      8  350  0.0 448192 167296 pts/0   Sl+  21:57   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19304898475      instructions:u                                              
        4820488476      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         524865323      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            200465      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.470294933 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1482420736
starting receive base loop
num_worker_connections 128
Creating worker on tid 374862336
starting receive base loop
num_worker_connections 128
Creating worker on tid 3555783168
starting receive base loop
num_worker_connections 128
Creating worker on tid 2447176192
starting receive base loop
num_worker_connections 128
Creating worker on tid 1333129728
starting receive base loop
num_worker_connections 128
Creating worker on tid 224522752
starting receive base loop
num_worker_connections 128
Creating worker on tid 3405443584
starting receive base loop
Created 1024 connections total
Creating worker on tid 2296836608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325494.323919,       0.0,      366252,     329841,      36411,     220459,     109382,  47.359454, 100.400000, 141.400000, 279.900000,  70.850528,   0.000000, 1308.616042, 484.434910
Outstanding requests per worker:
437 455 502 512 600 520 438 604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157062.6,      785314,     707079,      78235,     535680,     171399,  19.695522,  37.400000,  46.100000,  55.500000,  13.089990,   0.276000, 410.333991, 582.840026
Outstanding requests per worker:
409 367 363 375 368 377 410 438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156871.6,      784359,     705686,      78673,     564356,     141330,  19.881766,  36.700000,  46.700000,  55.800000,  12.590864,   0.358000,  96.891999, 629.200245
Outstanding requests per worker:
383 417 411 368 423 355 405 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.8,      784330,     705736,      78594,     580439,     125297,  20.177801,  37.100000,  47.500000,  56.700000,  12.768085,   0.339000,  96.626997, 653.644913
Outstanding requests per worker:
420 438 405 380 386 382 386 384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.4,      784343,     706275,      78068,     592174,     114101,  20.294887,  36.800000,  47.600000,  57.300000,  12.830471,   0.284000,  97.955003, 671.240622
Outstanding requests per worker:
409 366 412 432 432 354 408 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156870.6,      784354,     705714,      78640,     599443,     106271,  20.629806,  37.400000,  48.700000,  58.100000,  13.032171,   0.343000,  77.087000, 682.781460
Outstanding requests per worker:
402 406 387 440 408 388 391 395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156880.0,      784401,     705672,      78729,     605714,      99958,  20.765439,  37.700000,  48.700000,  58.900000,  13.162125,   0.336000,  92.129000, 692.923222
Outstanding requests per worker:
348 393 418 347 412 396 476 424 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:58   0:00 /usr/lib/linux
memcache      7  351  0.0 447168 161152 pts/0   Sl+  21:58   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19369152246      instructions:u                                              
        4868701645      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         519035871      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            211004      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.701299258 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1930949120
starting receive base loop
num_worker_connections 128
Creating worker on tid 820441600
starting receive base loop
num_worker_connections 128
Creating worker on tid 4006801920
starting receive base loop
num_worker_connections 128
Creating worker on tid 2892755456
starting receive base loop
num_worker_connections 128
Creating worker on tid 1784148480
starting receive base loop
num_worker_connections 128
Creating worker on tid 670102016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3856462336
starting receive base loop
Created 1024 connections total
Creating worker on tid 2742415872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325536.323961,       0.0,      368869,     331969,      36900,     222277,     109692,  58.874561, 124.500000, 166.300000, 575.100000, 100.976402,   0.000000, 1534.031034, 484.725366
Outstanding requests per worker:
948 927 915 857 855 999 866 2136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161061.4,      805308,     725054,      80254,     549700,     175354,  24.955052,  47.500000,  57.100000, 120.800000,  27.362446,   0.271000, 975.592971, 582.996927
Outstanding requests per worker:
399 417 441 388 407 458 410 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159966.2,      799832,     719814,      80018,     577073,     142741,  20.972441,  37.700000,  49.200000,  59.300000,  13.230264,   0.340000, 100.325003, 631.093392
Outstanding requests per worker:
452 434 528 377 408 401 464 502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160045.2,      800227,     720166,      80061,     593435,     126731,  21.430424,  38.000000,  50.300000,  61.000000,  13.502795,   0.283000, 105.270997, 655.688412
Outstanding requests per worker:
467 451 411 419 428 372 398 439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159995.4,      799978,     720011,      79967,     604482,     115529,  21.928007,  39.700000,  51.100000,  62.400000,  13.919659,   0.365000, 130.591005, 672.925073
Outstanding requests per worker:
450 449 421 477 403 414 416 450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159964.8,      799825,     719982,      79843,     611711,     108271,  22.205653,  40.600000,  51.200000,  63.900000,  14.192068,   0.352000, 131.374002, 683.391772
Outstanding requests per worker:
438 481 472 471 459 468 450 499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159962.6,      799814,     719682,      80132,     617982,     101700,  23.802142,  46.000000,  54.300000,  75.900000,  16.057482,   0.331000, 174.407005, 693.408450
Outstanding requests per worker:
442 465 499 545 512 461 535 566 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  21:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:59   0:00 /usr/lib/linux
memcache      7  341  0.0 449216 160768 pts/0   Sl+  21:59   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19702025098      instructions:u                                              
        4842480423      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         533609354      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            269351      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.861072920 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1621815808
starting receive base loop
num_worker_connections 128
Creating worker on tid 509080064
starting receive base loop
num_worker_connections 128
Creating worker on tid 3690000896
starting receive base loop
num_worker_connections 128
Creating worker on tid 2581393920
starting receive base loop
num_worker_connections 128
Creating worker on tid 1467347456
starting receive base loop
num_worker_connections 128
Creating worker on tid 358740480
starting receive base loop
num_worker_connections 128
Creating worker on tid 3539661312
starting receive base loop
Created 1024 connections total
Creating worker on tid 2431054336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325578.324003,       0.0,      402685,     362524,      40161,     244251,     118273,  48.700747,  97.100000, 138.100000, 495.700000, 103.828112,   0.000000, 1954.074025, 489.381947
Outstanding requests per worker:
754 770 801 732 782 674 786 3261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161043.6,      805219,     725020,      80199,     551525,     173495,  29.024794,  50.000000,  59.300000, 123.700000,  65.412398,   0.315000, 1915.873051, 585.910738
Outstanding requests per worker:
392 436 403 462 452 445 434 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160003.0,      800016,     720010,      80006,     577957,     142053,  21.548419,  38.100000,  50.600000,  61.500000,  13.598573,   0.416000,  97.790003, 631.529059
Outstanding requests per worker:
440 436 458 393 401 424 467 465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160012.6,      800064,     719918,      80146,     593397,     126521,  22.009186,  38.400000,  51.600000,  63.200000,  13.884366,   0.284000, 100.753002, 655.618425
Outstanding requests per worker:
445 400 473 420 440 409 439 496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159861.4,      799308,     719036,      80272,     603469,     115567,  23.966019,  45.800000,  55.300000,  73.500000,  16.057904,   0.391000, 184.741005, 672.701518
Outstanding requests per worker:
507 548 526 554 511 568 521 536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160036.6,      800184,     719911,      80273,     612303,     107608,  26.367396,  52.700000,  60.200000,  96.800000,  18.965567,   0.368000, 192.844003, 685.223057
Outstanding requests per worker:
528 529 568 481 537 526 484 506 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160001.8,      800010,     719874,      80136,     618894,     100980,  26.244120,  52.000000,  60.000000,  93.900000,  18.613701,   0.386000, 191.427007, 694.404289
Outstanding requests per worker:
544 519 525 498 485 547 532 540 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:59   0:00 /usr/lib/linux
memcache      7  345  0.0 449216 165824 pts/0   Sl+  21:59   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19863840899      instructions:u                                              
        4976494903      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         534244918      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            272290      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.329461291 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1970860544
starting receive base loop
num_worker_connections 128
Creating worker on tid 863367680
starting receive base loop
num_worker_connections 128
Creating worker on tid 4049728000
starting receive base loop
num_worker_connections 128
Creating worker on tid 2935681536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1827074560
starting receive base loop
num_worker_connections 128
Creating worker on tid 718467584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3899388416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2790781440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325619.324044,       0.0,      361535,     325374,      36161,     217665,     107709,  77.846577, 168.800000, 203.100000, 666.100000, 123.681447,   0.000000, 1974.123955, 485.315342
Outstanding requests per worker:
1819 1803 2041 1866 1731 1668 1681 5762 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165430.0,      827151,     744411,      82740,     565168,     179243,  73.080762, 149.200000, 173.600000, 301.500000, 107.562436,   0.527000, 2184.163094, 584.187836
Outstanding requests per worker:
927 952 923 920 973 891 958 1047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163050.0,      815251,     733596,      81655,     588360,     145236,  48.289351, 129.900000, 160.600000, 196.700000,  48.721147,   0.429000, 386.222988, 631.129410
Outstanding requests per worker:
1244 1103 1001 1230 1023 1001 1029 1097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162859.2,      814297,     732777,      81520,     604618,     128159,  59.855048, 167.200000, 199.400000, 270.400000,  64.602622,   0.417000, 440.407008, 656.552122
Outstanding requests per worker:
1365 1320 1328 1335 1380 1355 1284 1441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162804.6,      814024,     732400,      81624,     615036,     117364,  74.979249, 205.800000, 258.000000, 333.900000,  80.987336,   0.504000, 583.214998, 672.089842
Outstanding requests per worker:
1750 1629 1679 1582 1624 1566 1696 1650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163105.4,      815528,     734227,      81301,     624763,     109464,  84.696969, 235.700000, 283.100000, 362.600000,  89.548696,   0.616000, 552.621007, 684.976702
Outstanding requests per worker:
1760 1722 1802 1614 1741 1824 1791 1758 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163006.0,      815031,     733474,      81557,     630252,     103222,  91.124293, 260.700000, 308.400000, 406.300000, 100.803357,   0.699000, 664.466023, 693.799829
Outstanding requests per worker:
1844 1930 1942 1928 1866 2074 1867 1924 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:00   0:00 /usr/lib/linux
memcache      7  360  0.0 515200 174720 pts/0   Sl+  22:00   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20266787506      instructions:u                                              
        4891904359      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         532965226      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1582132      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.510528381 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2028139008
starting receive base loop
num_worker_connections 128
Creating worker on tid 919794176
starting receive base loop
num_worker_connections 128
Creating worker on tid 4100715008
starting receive base loop
num_worker_connections 128
Creating worker on tid 2992108032
starting receive base loop
num_worker_connections 128
Creating worker on tid 1878061568
starting receive base loop
num_worker_connections 128
Creating worker on tid 769454592
starting receive base loop
num_worker_connections 128
Creating worker on tid 3950375424
starting receive base loop
Created 1024 connections total
Creating worker on tid 2841768448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325663.324088,       0.0,      501622,     451551,      50071,     309561,     141990,  45.867431,  98.200000, 144.600000, 603.500000, 113.181921,   0.000000, 1913.092017, 503.631532
Outstanding requests per worker:
1429 1365 1420 1481 1426 1419 1388 5895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166574.8,      832875,     749707,      83168,     576449,     173258,  95.742047, 172.500000, 213.500000, 622.200000, 117.609685,   0.981000, 1860.589027, 594.354996
Outstanding requests per worker:
1979 2130 1869 1902 1976 1920 1924 2632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165519.8,      827600,     744164,      83436,     599834,     144330, 115.756772, 244.300000, 293.400000, 394.200000,  92.387486,   0.955000, 1038.035989, 636.079059
Outstanding requests per worker:
2712 2776 2816 2777 2761 2776 2687 2861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165808.4,      829043,     745727,      83316,     616798,     128929, 146.336898, 295.600000, 348.800000, 440.800000, 103.862036,   1.082000, 702.660978, 658.873444
Outstanding requests per worker:
3119 3393 3417 2985 3323 3363 3538 3372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165721.8,      828610,     745519,      83091,     628261,     117258, 170.992620, 333.300000, 393.000000, 493.700000, 112.669194,   1.243000, 708.133996, 676.207631
Outstanding requests per worker:
3727 3933 4059 3873 3913 3841 3957 3996 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165938.2,      829692,     746954,      82738,     636843,     110111, 197.672895, 366.800000, 426.800000, 537.500000, 115.837681,   1.165000, 989.706993, 687.258152
Outstanding requests per worker:
4368 4461 4369 4484 4434 4243 4312 4355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164790.6,      823954,     741822,      82132,     639565,     102257, 236.408760, 401.600000, 461.300000, 576.900000, 117.885577,   0.995000, 1162.868977, 696.976756
Outstanding requests per worker:
5728 5647 5418 5548 5599 5505 5569 5494 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:01   0:00 /usr/lib/linux
memcache      7  344  0.0 521344 184512 pts/0   Sl+  22:01   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21391202127      instructions:u                                              
        4995901509      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         594541691      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3573899      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      39.820419175 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1244983808
starting receive base loop
num_worker_connections 128
Creating worker on tid 133231104
starting receive base loop
num_worker_connections 128
Creating worker on tid 3319591424
starting receive base loop
num_worker_connections 128
Creating worker on tid 2205544960
starting receive base loop
num_worker_connections 128
Creating worker on tid 1096937984
starting receive base loop
num_worker_connections 128
Creating worker on tid 4277858816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3169251840
starting receive base loop
Created 1024 connections total
Creating worker on tid 2060644864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325705.324130,       0.0,      400374,     360387,      39987,     242441,     117946,  67.118840, 148.900000, 196.500000, 819.300000, 142.722191,   0.000000, 1932.361960, 489.226190
Outstanding requests per worker:
1666 1428 1497 1559 1530 1612 1951 14526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165998.4,      829993,     747780,      82213,     569808,     177972, 161.399686, 241.900000, 354.100000, 2212.000000, 352.530537,   0.870000, 3674.971104, 586.968128
Outstanding requests per worker:
2872 2744 2700 2773 2754 2596 2634 10080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165478.0,      827391,     744609,      82782,     598698,     145911, 189.404663, 427.400000, 534.900000, 2341.800000, 351.483290,   0.963000, 3709.764957, 633.735933
Outstanding requests per worker:
3564 3621 3596 3765 3497 3635 3441 10048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165376.0,      826881,     744245,      82636,     614388,     129857, 225.813116, 574.800000, 697.600000, 2311.000000, 376.008787,   0.942000, 3791.656017, 657.333245
Outstanding requests per worker:
4533 4644 4444 4645 4331 4320 4225 10566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165329.6,      826649,     744025,      82624,     625624,     118401, 266.157001, 693.400000, 878.600000, 2519.800000, 406.746292,   0.749000, 3976.174116, 673.780186
Outstanding requests per worker:
5469 5348 5219 5424 5423 5225 5090 11291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165176.4,      825883,     743588,      82295,     633789,     109799, 309.023225, 836.400000, 1081.500000, 2639.000000, 445.801315,   0.654000, 4269.680977, 685.896670
Outstanding requests per worker:
6318 6500 6331 6253 6133 6357 5947 12154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162678.6,      813394,     731920,      81474,     630111,     101809, 370.538869, 997.000000, 1279.100000, 2583.700000, 489.616765,   1.040000, 4275.226116, 696.329313
Outstanding requests per worker:
9134 8941 8763 8948 8760 8511 8583 14356 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:02   0:00 /usr/lib/linux
memcache      8  345  0.0 517248 186368 pts/0   Sl+  22:02   2:11 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20777564755      instructions:u                                              
        4899093428      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         564874195      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2468852      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.451144052 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1577054720
starting receive base loop
num_worker_connections 128
Creating worker on tid 468775424
starting receive base loop
num_worker_connections 128
Creating worker on tid 3655135744
starting receive base loop
num_worker_connections 128
Creating worker on tid 2541089280
starting receive base loop
num_worker_connections 128
Creating worker on tid 1432482304
starting receive base loop
num_worker_connections 128
Creating worker on tid 318435840
starting receive base loop
num_worker_connections 128
Creating worker on tid 3504796160
starting receive base loop
Created 1024 connections total
Creating worker on tid 2396189184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325747.324172,       0.0,      361698,     325476,      36222,     218246,     107230,  82.660280, 156.000000, 226.900000, 1103.100000, 179.517428,   0.000000, 1973.333001, 486.854616
Outstanding requests per worker:
1639 1823 1599 1707 1732 1820 3078 22070 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165935.6,      829679,     746833,      82846,     567175,     179658, 274.492178, 365.400000, 981.600000, 2753.700000, 456.977442,   0.895000, 4231.091022, 584.246533
Outstanding requests per worker:
5302 5173 5199 5034 5224 5250 5339 20383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167462.2,      837312,     753624,      83688,     604420,     149204, 373.723178, 552.500000, 754.000000, 3116.700000, 462.220025,   1.298000, 4446.338177, 631.732185
Outstanding requests per worker:
7304 7215 6950 7148 7082 7479 7379 20205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167950.8,      839755,     755925,      83830,     624160,     131765, 447.741266, 738.400000, 961.100000, 3360.700000, 489.266529,   2.092000, 4748.662949, 657.223616
Outstanding requests per worker:
8902 8459 8661 8838 8930 8714 8793 20872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167983.6,      839919,     755727,      84192,     635142,     120585, 511.111356, 939.500000, 1195.100000, 3575.700000, 530.739486,   3.739000, 4975.935936, 673.344792
Outstanding requests per worker:
10565 9883 10285 10231 10159 10488 9919 21853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167737.0,      838686,     755058,      83628,     642811,     112247, 580.577698, 1159.700000, 1438.500000, 3728.200000, 585.459765,   5.233000, 5073.051929, 686.156015
Outstanding requests per worker:
12166 11303 11845 11766 11825 11775 12007 23161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167101.6,      835509,     751493,      84016,     646296,     105197, 652.988726, 1357.900000, 1700.500000, 3865.400000, 639.276910,   5.592000, 5254.762173, 695.292027
Outstanding requests per worker:
14054 13429 13697 13487 13970 13743 14348 24776 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  22:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:02   0:00 /usr/lib/linux
memcache      7  341  0.0 519296 192192 pts/0   Sl+  22:02   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21032671688      instructions:u                                              
        4759537407      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         576088182      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6552932      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.110604641 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1702818304
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
num_worker_connections 128
Creating worker on tid 2667246080
starting receive base loop
num_worker_connections 128
Creating worker on tid 1558639104
starting receive base loop
num_worker_connections 128
Creating worker on tid 450032128
starting receive base loop
num_worker_connections 128
Creating worker on tid 3630952960
starting receive base loop
Created 1024 connections total
Creating worker on tid 2522345984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325788.324213,       0.0,      359498,     323619,      35879,     216600,     107019,  90.959349, 185.000000, 239.800000, 1055.100000, 170.217381,   0.000000, 1959.306955, 485.257432
Outstanding requests per worker:
2230 2229 2125 2225 2292 2279 2210 16273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167148.4,      835743,     752226,      83517,     570520,     181706, 245.025285, 414.800000, 644.500000, 1737.600000, 287.802644,   0.976000, 2637.909889, 583.555108
Outstanding requests per worker:
5021 5274 5404 5106 5144 5224 5100 11005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167774.2,      838872,     755237,      83635,     605559,     149678, 316.224539, 590.100000, 717.300000, 1326.700000, 240.947284,   1.100000, 2477.615118, 630.857176
Outstanding requests per worker:
7101 6982 7010 7011 6881 7217 6940 10447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167847.4,      839238,     755260,      83978,     623562,     131698, 383.913217, 800.000000, 961.700000, 1361.300000, 292.075531,   1.850000, 2971.889973, 656.957257
Outstanding requests per worker:
8511 8767 8395 8676 8642 8686 8731 11075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168106.0,      840531,     756138,      84393,     635438,     120700, 447.222856, 1034.200000, 1227.500000, 1606.300000, 369.322904,   2.917000, 3402.607918, 673.404433
Outstanding requests per worker:
10173 9761 9870 10371 9912 10055 9629 12333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167621.2,      838107,     753861,      84246,     642498,     111363, 518.004694, 1256.500000, 1490.200000, 1953.300000, 450.011491,   2.722000, 3570.334911, 686.994235
Outstanding requests per worker:
11988 11588 11747 11850 11514 11383 11172 13921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167002.0,      835011,     751333,      83678,     646883,     104450, 598.474784, 1512.900000, 1739.100000, 2221.000000, 531.473850,   3.183000, 3954.355001, 696.188706
Outstanding requests per worker:
14093 13584 13561 13895 13387 13687 12999 16065 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:03   0:00 /usr/lib/linux
memcache      7  350  0.0 517248 187712 pts/0   Sl+  22:03   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21158240567      instructions:u                                              
        4802226585      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         573428800      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6498459      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.350342565 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1455550976
starting receive base loop
num_worker_connections 128
Creating worker on tid 342618624
starting receive base loop
num_worker_connections 128
Creating worker on tid 3528978944
starting receive base loop
num_worker_connections 128
Creating worker on tid 2414932480
starting receive base loop
num_worker_connections 128
Creating worker on tid 1306325504
starting receive base loop
num_worker_connections 128
Creating worker on tid 192279040
starting receive base loop
num_worker_connections 128
Creating worker on tid 3378639360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2264592896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325829.324254,       0.0,      362620,     326481,      36139,     218472,     108009,  90.491489, 178.900000, 246.200000, 1075.200000, 174.338817,   0.000000, 1976.680040, 484.380941
Outstanding requests per worker:
2273 2091 2273 2312 2239 2246 2303 22532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167679.0,      838396,     754689,      83707,     573126,     181563, 324.546192, 551.400000, 1177.000000, 2199.800000, 395.980151,   1.544000, 3118.773937, 584.060803
Outstanding requests per worker:
6828 6982 6997 6853 7289 7291 7168 20076 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169414.8,      847075,     762685,      84390,     612753,     149932, 464.917748, 807.800000, 1099.600000, 2187.900000, 359.542183,   2.898000, 3198.625088, 633.144608
Outstanding requests per worker:
9979 10077 10223 9998 10423 10391 10008 20957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169672.6,      848364,     763628,      84736,     630509,     133119, 588.787904, 1119.500000, 1352.800000, 2249.500000, 410.930982,   4.960000, 3340.233088, 657.215674
Outstanding requests per worker:
12593 13204 13043 12981 13087 12972 12958 22520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169334.6,      846674,     761827,      84847,     640889,     120938, 710.712525, 1423.700000, 1664.000000, 2416.600000, 489.848339,  58.122002, 3829.894066, 674.767462
Outstanding requests per worker:
15921 16158 16024 15644 15839 16067 15929 24786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169409.6,      847049,     762381,      84668,     650109,     112272, 839.404669, 1725.600000, 2003.300000, 2691.500000, 580.516211,  63.689001, 4459.529877, 686.933255
Outstanding requests per worker:
18719 19141 18863 18333 18591 18861 18888 27556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167889.4,      839448,     755299,      84149,     650856,     104443, 981.563809, 2044.300000, 2347.500000, 3034.400000, 678.141238, 143.859997, 4701.043129, 696.549625
Outstanding requests per worker:
22447 22793 22410 22421 22427 22797 22593 31265 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:04   0:00 /usr/lib/linux
memcache      7  360  0.0 519296 196928 pts/0   Sl+  22:04   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21209195292      instructions:u                                              
        4685228527      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         556159558      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           5325221      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.411734983 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1208152576
starting receive base loop
num_worker_connections 128
Creating worker on tid 98365952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3279286784
starting receive base loop
num_worker_connections 128
Creating worker on tid 2170679808
starting receive base loop
num_worker_connections 128
Creating worker on tid 1056633344
starting receive base loop
num_worker_connections 128
Creating worker on tid 4242993664
starting receive base loop
num_worker_connections 128
Creating worker on tid 3134386688
starting receive base loop
Created 1024 connections total
Creating worker on tid 2020340224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325870.324295,       0.0,      363252,     326755,      36497,     217780,     108975, 100.342708, 184.800000, 243.300000, 1091.900000, 173.923216,   0.000000, 1965.163946, 482.592572
Outstanding requests per worker:
2485 2653 2620 2523 2468 2506 3521 28041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167704.6,      838524,     755014,      83510,     573619,     181395, 412.960275, 610.000000, 1565.900000, 2982.800000, 533.053313,   1.523000, 4733.574867, 584.421115
Outstanding requests per worker:
8941 8695 9096 8999 8783 9022 9654 34043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169577.6,      847889,     763299,      84590,     611900,     151399, 661.794282, 1041.300000, 1718.200000, 3801.500000, 585.452684,  43.981999, 5245.308876, 631.072421
Outstanding requests per worker:
14214 14102 14469 14235 14006 14406 14953 37941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169796.8,      848985,     763968,      85017,     630164,     133804, 872.555631, 1465.600000, 1952.000000, 4175.300000, 645.739918, 112.349004, 5693.513870, 656.609575
Outstanding requests per worker:
19410 19004 19515 19238 19449 19134 20077 42507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169552.4,      847763,     762672,      85091,     641047,     121625, 1095.189538, 1893.600000, 2295.200000, 4721.600000, 738.481904, 152.664006, 5947.408199, 674.030456
Outstanding requests per worker:
24561 24336 24423 24384 24443 24527 25349 47573 
count  836301
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169260.2,      846302,     761772,      84530,     649229,     112543, 1333.748973, 2321.800000, 2756.000000, 6000.000000, 841.562365, 196.792006, 6418.928146, 686.638236
Outstanding requests per worker:
29723 29366 29670 30133 29803 29748 30631 53180 
count  827075
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168039.6,      840199,     756350,      83849,     651304,     105046, 1583.446892, 2796.800000, 3265.100000, 6000.000000, 959.422999, 215.987995, 7312.537193, 695.477867
Outstanding requests per worker:
35786 35832 35618 36000 35994 35910 36537 59361 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:04   0:00 /usr/lib/linux
memcache      8  360  0.0 520320 198208 pts/0   Sl+  22:04   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  22:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21187287452      instructions:u                                              
        4892315466      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         560072902      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3347864      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      36.321714101 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1587737088
starting receive base loop
num_worker_connections 128
Creating worker on tid 476836352
starting receive base loop
num_worker_connections 128
Creating worker on tid 3663196672
starting receive base loop
num_worker_connections 128
Creating worker on tid 2549150208
starting receive base loop
num_worker_connections 128
Creating worker on tid 1440543232
starting receive base loop
num_worker_connections 128
Creating worker on tid 326496768
starting receive base loop
num_worker_connections 128
Creating worker on tid 3512857088
starting receive base loop
Created 1024 connections total
Creating worker on tid 2398810624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325912.324337,       0.0,      410226,     369006,      41220,     249408,     119598,  81.764556, 178.100000, 243.900000, 1043.200000, 170.657130,   0.000000, 1951.300025, 492.829133
Outstanding requests per worker:
2276 2173 2331 2294 2303 2225 4446 27070 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167573.0,      837866,     754475,      83391,     577040,     177435, 401.735947, 572.500000, 1444.400000, 3108.500000, 539.829696,   1.547000, 4777.914047, 590.480211
Outstanding requests per worker:
8658 9164 8814 8741 9021 9009 9710 33150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169813.6,      849069,     764542,      84527,     614396,     150146, 657.498429, 947.600000, 1728.900000, 3791.900000, 588.876641,  35.487000, 5163.466930, 633.507809
Outstanding requests per worker:
13903 14494 14091 13728 13882 14243 14438 37380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169820.0,      849101,     764324,      84777,     632423,     131901, 873.347848, 1367.900000, 1856.500000, 4158.600000, 644.035935, 137.839004, 5651.635170, 659.036481
Outstanding requests per worker:
18592 19092 18974 19252 19104 19124 19717 42184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168823.4,      844118,     759315,      84803,     639463,     119852, 1098.407219, 1805.600000, 2260.500000, 4615.000000, 718.801239, 155.242994, 6148.459911, 675.367110
Outstanding requests per worker:
23989 24580 24442 24815 25236 24641 25436 47779 
count  837312
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169292.6,      846464,     761745,      84719,     649624,     112121, 1340.592460, 2262.800000, 2660.900000, 6000.000000, 813.957958, 177.430004, 6880.854130, 687.433709
Outstanding requests per worker:
29540 29727 29945 30086 30438 30147 30553 53045 
count  826046
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167789.8,      838950,     754726,      84224,     650338,     104388, 1586.844246, 2729.000000, 3140.700000, 6000.000000, 919.595772, 238.471001, 7715.429783, 696.779980
Outstanding requests per worker:
35658 35925 36001 36292 36702 36345 37181 59394 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:05   0:00 /usr/lib/linux
memcache      7  355  0.0 521344 194752 pts/0   Sl+  22:05   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21358630599      instructions:u                                              
        4878926947      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         557932608      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2909436      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.360136591 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2483941888
starting receive base loop
num_worker_connections 85
Creating worker on tid 1711993344
starting receive base loop
num_worker_connections 85
Creating worker on tid 949613056
starting receive base loop
num_worker_connections 85
Creating worker on tid 184611328
starting receive base loop
num_worker_connections 85
Creating worker on tid 3717198336
starting receive base loop
Created 512 connections total
Creating worker on tid 2954818048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325954.324379,       0.0,      342953,     308411,      34542,     205194,     103217,  10.977170,  23.200000,  31.500000,  62.800000,  11.750433,   0.000000, 121.748000, 480.926368
Outstanding requests per worker:
212 206 191 203 209 202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150000.0,      750001,     674992,      75009,     510199,     164793,  10.604486,  18.300000,  24.600000,  66.800000,  11.001219,   0.271000, 142.104998, 579.911861
Outstanding requests per worker:
199 212 225 216 222 200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150010.0,      750051,     675272,      74779,     538489,     136783,  11.196080,  19.300000,  28.300000,  71.200000,  11.950610,   0.308000, 144.426003, 626.244975
Outstanding requests per worker:
211 221 199 214 220 225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150007.6,      750039,     674746,      75293,     553857,     120889,  11.109444,  19.600000,  25.300000,  67.300000,  11.072797,   0.267000, 130.036995, 651.742817
Outstanding requests per worker:
228 218 209 212 249 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150019.0,      750096,     674970,      75126,     564298,     110672,  11.295636,  20.000000,  26.000000,  68.100000,  11.368442,   0.290000, 131.099999, 668.304294
Outstanding requests per worker:
226 226 208 215 243 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150000.8,      750005,     675339,      74666,     571931,     103408,  11.539265,  20.300000,  27.800000,  70.700000,  11.823559,   0.342000, 134.733006, 680.562740
Outstanding requests per worker:
233 216 223 232 228 251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150008.8,      750045,     674955,      75090,     577374,      97581,  11.448678,  20.300000,  26.400000,  67.200000,  11.147340,   0.226000, 132.216007, 689.775059
Outstanding requests per worker:
233 234 242 226 243 222 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:06   0:00 /usr/lib/linux
memcache      7  350  0.0 443072 148416 pts/0   Sl+  22:06   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18412791279      instructions:u                                              
        5267840388      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         534682200      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            175107      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.090884797 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2033316352
starting receive base loop
num_worker_connections 85
Creating worker on tid 1260974592
starting receive base loop
num_worker_connections 85
Creating worker on tid 495972864
starting receive base loop
num_worker_connections 85
Creating worker on tid 4028559872
starting receive base loop
num_worker_connections 85
Creating worker on tid 3263558144
starting receive base loop
Created 512 connections total
Creating worker on tid 2501177856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575325996.324421,       0.0,      351819,     316616,      35203,     211591,     105025,  13.385415,  29.400000,  42.200000,  74.800000,  14.734272,   0.000000, 183.048993, 484.123522
Outstanding requests per worker:
231 243 266 207 263 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.8,      769245,     692548,      76697,     523136,     169412,  12.233355,  21.600000,  32.300000,  73.100000,  12.549667,   0.219000, 135.949001, 579.820564
Outstanding requests per worker:
253 247 248 278 223 239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.0,      769271,     692599,      76672,     553262,     139337,  12.898751,  22.800000,  37.600000,  75.700000,  13.256037,   0.254000, 140.214995, 627.199352
Outstanding requests per worker:
264 263 235 241 260 227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.6,      769219,     692010,      77209,     567950,     124060,  13.447052,  23.900000,  42.400000,  78.300000,  14.118392,   0.339000, 147.053003, 651.835244
Outstanding requests per worker:
260 267 261 244 262 261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.8,      769305,     692633,      76672,     579671,     112962,  13.771303,  24.800000,  45.200000,  78.500000,  14.417942,   0.262000, 138.870999, 669.201906
Outstanding requests per worker:
233 254 266 273 238 260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153745.2,      768727,     691942,      76785,     587017,     104925,  13.710272,  24.700000,  42.000000,  77.600000,  13.984539,   0.371000, 147.521004, 682.101243
Outstanding requests per worker:
315 347 315 349 396 357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153575.0,      767876,     691027,      76849,     592698,      98329,  14.248607,  25.900000,  47.100000,  80.800000,  15.017995,   0.296000, 158.480003, 692.095701
Outstanding requests per worker:
659 575 587 580 520 552 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:06   0:00 /usr/lib/linux
memcache      7  332  0.0 446144 148736 pts/0   Sl+  22:06   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18870626981      instructions:u                                              
        4972393220      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         517860639      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            220997      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.490929830 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2206790144
starting receive base loop
num_worker_connections 85
Creating worker on tid 1435496960
starting receive base loop
num_worker_connections 85
Creating worker on tid 673116672
starting receive base loop
num_worker_connections 85
Creating worker on tid 4203082240
starting receive base loop
num_worker_connections 85
Creating worker on tid 3440701952
starting receive base loop
Created 512 connections total
Creating worker on tid 2678321664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326039.324464,       0.0,      363669,     327266,      36403,     219439,     107827,  20.529099,  56.700000,  80.600000, 120.400000,  26.050401,   0.000000, 318.453997, 486.069772
Outstanding requests per worker:
679 575 617 595 579 560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157929.2,      789647,     710819,      78828,     539021,     171798,  14.480843,  26.200000,  45.000000,  78.800000,  14.390336,   0.362000, 142.943993, 582.997063
Outstanding requests per worker:
555 559 537 643 611 621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157967.4,      789838,     711262,      78576,     569237,     142025,  15.562186,  29.000000,  52.700000,  81.800000,  15.658785,   0.322000, 159.968004, 628.964864
Outstanding requests per worker:
650 539 513 516 499 545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157889.4,      789448,     710278,      79170,     584844,     125434,  16.358868,  31.600000,  56.600000,  84.400000,  16.577791,   0.405000, 166.195005, 654.470654
Outstanding requests per worker:
546 596 580 565 502 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157939.0,      789696,     711018,      78678,     596035,     114983,  16.835620,  33.700000,  58.400000,  84.500000,  16.915240,   0.360000, 144.952998, 671.442511
Outstanding requests per worker:
519 580 499 529 520 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157965.2,      789827,     711015,      78812,     604507,     106508,  17.143651,  34.500000,  59.200000,  85.100000,  17.140353,   0.374000, 145.972997, 684.579915
Outstanding requests per worker:
462 495 486 525 501 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157934.2,      789672,     710449,      79223,     610150,     100299,  17.182855,  34.000000,  58.700000,  84.900000,  16.934407,   0.408000, 154.916003, 693.687928
Outstanding requests per worker:
440 487 460 524 440 471 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:07   0:00 /usr/lib/linux
memcache      7  341  0.0 448192 149440 pts/0   Sl+  22:07   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19424503308      instructions:u                                              
        4900263425      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         532438742      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            197972      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.491243948 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1707930112
starting receive base loop
num_worker_connections 85
Creating worker on tid 933491200
starting receive base loop
num_worker_connections 85
Creating worker on tid 168489472
starting receive base loop
num_worker_connections 85
Creating worker on tid 3701076480
starting receive base loop
num_worker_connections 85
Creating worker on tid 2936074752
starting receive base loop
Created 512 connections total
Creating worker on tid 2173694464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326082.324507,       0.0,      361153,     325041,      36112,     217228,     107813,  15.898010,  35.900000,  53.700000,  82.700000,  17.237939,   0.000000, 202.483997, 484.004821
Outstanding requests per worker:
377 285 366 370 322 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157920.6,      789604,     710873,      78731,     538828,     172045,  14.082634,  25.400000,  43.000000,  77.600000,  14.014503,   0.401000, 141.661003, 582.591869
Outstanding requests per worker:
336 370 330 333 351 288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157908.0,      789541,     710807,      78734,     568777,     142030,  14.972515,  27.100000,  48.500000,  81.700000,  15.121220,   0.388000, 149.889007, 629.409148
Outstanding requests per worker:
369 351 304 312 333 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157941.8,      789710,     711048,      78662,     585466,     125582,  15.485413,  28.600000,  51.400000,  81.700000,  15.471661,   0.385000, 143.047005, 654.417264
Outstanding requests per worker:
312 296 277 322 362 313 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.4,      789478,     710863,      78615,     595693,     115170,  15.535874,  28.800000,  51.200000,  80.500000,  15.311829,   0.319000, 141.157001, 670.377009
Outstanding requests per worker:
339 323 301 327 331 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.4,      789613,     710721,      78892,     603470,     107251,  15.974747,  30.100000,  53.000000,  81.600000,  15.664276,   0.352000, 148.716003, 683.358062
Outstanding requests per worker:
296 326 321 305 262 335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157913.8,      789570,     710581,      78989,     609880,     100701,  16.170965,  30.400000,  53.300000,  83.000000,  15.854331,   0.400000, 142.755002, 693.075668
Outstanding requests per worker:
298 329 295 318 286 306 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  22:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:08   0:00 /usr/lib/linux
memcache      7  341  0.0 447168 151360 pts/0   Sl+  22:08   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19401761111      instructions:u                                              
        4872856941      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         524108863      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            306594      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.510523510 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1815867904
starting receive base loop
num_worker_connections 85
Creating worker on tid 1040904704
starting receive base loop
num_worker_connections 85
Creating worker on tid 278524416
starting receive base loop
num_worker_connections 85
Creating worker on tid 3808489984
starting receive base loop
num_worker_connections 85
Creating worker on tid 3046109696
starting receive base loop
Created 512 connections total
Creating worker on tid 2283729408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326123.324548,       0.0,      372305,     334770,      37535,     223840,     110930,  18.698153,  41.500000,  61.300000,  94.100000,  20.106309,   0.000000, 273.351997, 484.829175
Outstanding requests per worker:
325 320 330 337 338 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.2,      810807,     729352,      81455,     553775,     175577,  12.647457,  22.200000,  26.900000,  36.200000,   7.327913,   0.398000,  72.756998, 583.853152
Outstanding requests per worker:
372 377 310 326 331 340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.8,      810795,     730347,      80448,     585107,     145240,  13.151841,  22.800000,  28.000000,  37.300000,   7.587905,   0.422000,  76.696999, 630.451636
Outstanding requests per worker:
314 360 362 363 399 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.6,      810814,     729699,      81115,     601178,     128521,  13.655162,  23.600000,  29.200000,  39.500000,   7.928599,   0.362000,  76.650999, 655.741833
Outstanding requests per worker:
351 393 389 356 362 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162165.4,      810828,     729554,      81274,     612624,     116930,  13.943720,  24.000000,  29.700000,  40.100000,   8.076527,   0.439000,  74.041001, 673.254905
Outstanding requests per worker:
397 369 360 399 385 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729706,      81160,     621094,     108612,  14.037086,  24.000000,  30.000000,  40.100000,   8.092618,   0.433000,  76.375000, 685.336586
Outstanding requests per worker:
367 376 397 392 396 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161636.0,      808181,     727456,      80725,     625199,     102257,  15.196410,  26.400000,  33.700000,  50.600000,   9.917777,   0.366000, 131.457999, 694.646144
Outstanding requests per worker:
920 802 796 814 884 827 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:09   0:00 /usr/lib/linux
memcache      7  350  0.0 515200 154752 pts/0   Sl+  22:09   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19983775463      instructions:u                                              
        4712461609      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         522321085      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            184316      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.021063258 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1759572480
starting receive base loop
num_worker_connections 85
Creating worker on tid 989917696
starting receive base loop
num_worker_connections 85
Creating worker on tid 227537408
starting receive base loop
num_worker_connections 85
Creating worker on tid 3760124416
starting receive base loop
num_worker_connections 85
Creating worker on tid 2995122688
starting receive base loop
Created 512 connections total
Creating worker on tid 2232742400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326165.324590,       0.0,      374122,     336432,      37690,     225542,     110890,  19.650868,  43.200000,  63.600000,  96.200000,  21.109995,   0.000000, 292.937011, 486.346831
Outstanding requests per worker:
361 328 344 296 353 400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.2,      810787,     729634,      81153,     553796,     175838,  13.203994,  22.300000,  28.400000,  36.600000,   7.452450,   0.440000,  69.580004, 584.327801
Outstanding requests per worker:
370 361 349 345 378 344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.2,      810737,     729575,      81162,     584996,     144579,  13.794012,  23.100000,  29.700000,  38.600000,   7.826022,   0.510000,  78.798003, 631.227615
Outstanding requests per worker:
418 339 400 397 366 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.8,      810835,     729627,      81208,     601726,     127901,  14.368740,  23.900000,  30.900000,  40.300000,   8.171322,   0.466000,  74.575998, 656.376875
Outstanding requests per worker:
387 384 403 397 358 416 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.8,      810885,     729725,      81160,     613471,     116254,  14.571630,  24.200000,  31.300000,  41.100000,   8.297140,   0.347000,  76.026000, 673.751057
Outstanding requests per worker:
386 381 391 419 408 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.0,      810821,     729790,      81031,     621066,     108724,  14.755158,  24.800000,  31.600000,  41.700000,   8.432395,   0.481000,  81.058003, 684.898580
Outstanding requests per worker:
460 401 399 355 391 386 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161879.6,      809399,     728445,      80954,     626164,     102281,  15.541022,  26.100000,  33.900000,  47.000000,   9.500755,   0.422000, 122.204997, 694.796843
Outstanding requests per worker:
624 662 650 643 670 616 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:09   0:00 /usr/lib/linux
memcache      7  341  0.0 515200 156352 pts/0   Sl+  22:09   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19983647646      instructions:u                                              
        4810749217      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         533374582      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            197052      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.270688099 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2367615488
starting receive base loop
num_worker_connections 85
Creating worker on tid 1596518912
starting receive base loop
num_worker_connections 85
Creating worker on tid 831517184
starting receive base loop
num_worker_connections 85
Creating worker on tid 69136896
starting receive base loop
num_worker_connections 85
Creating worker on tid 3599102464
starting receive base loop
Created 512 connections total
Creating worker on tid 2836722176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326207.324632,       0.0,      370708,     333531,      37177,     223273,     110258,  19.100917,  42.300000,  63.100000,  96.800000,  20.558828,   0.000000, 286.455005, 485.353913
Outstanding requests per worker:
345 334 338 329 331 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162153.4,      810768,     729540,      81228,     554856,     174684,  12.747949,  22.200000,  27.200000,  35.700000,   7.284577,   0.474000,  73.518999, 585.103472
Outstanding requests per worker:
363 352 357 333 328 384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162168.8,      810845,     729967,      80878,     585052,     144915,  13.321833,  23.000000,  28.400000,  37.600000,   7.635223,   0.389000,  76.393001, 630.691286
Outstanding requests per worker:
356 378 357 396 328 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.2,      810772,     729416,      81356,     601005,     128411,  13.721054,  23.100000,  29.500000,  38.500000,   7.781387,   0.429000,  70.106998, 654.995569
Outstanding requests per worker:
373 388 369 385 384 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.2,      810832,     729901,      80931,     612850,     117051,  14.111272,  24.000000,  30.000000,  39.700000,   8.048785,   0.482000,  76.761998, 672.844405
Outstanding requests per worker:
364 420 350 391 389 396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162181.6,      810909,     729969,      80940,     620780,     109189,  14.288492,  24.100000,  30.600000,  40.400000,   8.152059,   0.342000,  75.167999, 684.416973
Outstanding requests per worker:
386 387 348 428 391 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162168.0,      810841,     729804,      81037,     627135,     102669,  14.534443,  24.600000,  31.200000,  41.100000,   8.304839,   0.496000,  78.074999, 694.018393
Outstanding requests per worker:
347 403 370 439 407 391 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:10   0:00 /usr/lib/linux
memcache      7  350  0.0 449216 155520 pts/0   Sl+  22:10   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19992439373      instructions:u                                              
        4802890651      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         510976357      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            176229      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.180995387 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2252665344
starting receive base loop
num_worker_connections 85
Creating worker on tid 1478423040
starting receive base loop
num_worker_connections 85
Creating worker on tid 713421312
starting receive base loop
num_worker_connections 85
Creating worker on tid 4246008320
starting receive base loop
num_worker_connections 85
Creating worker on tid 3483628032
starting receive base loop
Created 512 connections total
Creating worker on tid 2718626304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326250.324675,       0.0,      389407,     350168,      39239,     235201,     114967,  25.625278,  60.700000,  76.600000, 119.600000,  27.220862,   0.000000, 374.119997, 488.072974
Outstanding requests per worker:
503 538 512 495 533 518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166747.2,      833737,     750885,      82852,     572114,     178771,  16.106040,  27.000000,  34.100000,  46.900000,   9.241727,   0.457000,  93.074001, 587.086449
Outstanding requests per worker:
506 458 440 457 455 432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166654.6,      833274,     750068,      83206,     603224,     146844,  16.645143,  27.200000,  35.000000,  47.300000,   9.354278,   0.642000,  91.431998, 632.673823
Outstanding requests per worker:
475 479 450 484 476 490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166669.4,      833348,     749684,      83664,     620053,     129631,  17.167478,  28.500000,  36.200000,  49.600000,   9.780286,   0.555000,  99.298999, 657.753839
Outstanding requests per worker:
536 494 468 431 474 487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166650.8,      833255,     750213,      83042,     631223,     118990,  17.712332,  29.400000,  37.800000,  52.500000,  10.260952,   0.583000, 114.133999, 674.507459
Outstanding requests per worker:
505 475 528 471 525 511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166685.6,      833429,     749547,      83882,     638767,     110780,  18.016529,  30.500000,  38.400000,  54.200000,  10.523669,   0.484000, 103.123002, 687.000189
Outstanding requests per worker:
523 540 454 491 487 466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166664.6,      833324,     749566,      83758,     645305,     104261,  19.178753,  32.700000,  42.800000,  61.000000,  11.730927,   0.523000, 121.629000, 695.531700
Outstanding requests per worker:
496 496 501 535 496 492 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:11   0:00 /usr/lib/linux
memcache      7  333  0.0 518272 154816 pts/0   Sl+  22:11   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20625644804      instructions:u                                              
        4648981142      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         520511568      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            260105      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.610680673 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2281304576
starting receive base loop
num_worker_connections 85
Creating worker on tid 1510666752
starting receive base loop
num_worker_connections 85
Creating worker on tid 748286464
starting receive base loop
num_worker_connections 85
Creating worker on tid 4278252032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3515871744
starting receive base loop
Created 512 connections total
Creating worker on tid 2753491456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326293.324718,       0.0,      382900,     344652,      38248,     231465,     113187,  34.036783,  79.700000,  93.200000, 135.500000,  33.312899,   0.000000, 374.971002, 488.127653
Outstanding requests per worker:
781 898 833 799 805 857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166614.0,      833071,     750032,      83039,     572034,     177998,  31.282277,  82.200000,  97.600000, 131.900000,  30.800012,   0.487000, 205.951005, 587.895106
Outstanding requests per worker:
923 866 920 927 812 888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166544.0,      832721,     749612,      83109,     602562,     147050,  34.202390,  91.300000, 111.800000, 143.500000,  34.905267,   0.585000, 250.678986, 632.577831
Outstanding requests per worker:
980 996 990 1060 1001 987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166603.4,      833018,     749724,      83294,     618866,     130858,  37.422973, 102.600000, 126.500000, 162.300000,  39.672219,   0.598000, 297.309011, 657.036068
Outstanding requests per worker:
1027 1214 1089 992 1050 1028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166530.2,      832652,     749378,      83274,     630105,     119273,  40.654460, 116.700000, 139.300000, 180.600000,  44.537417,   0.701000, 308.656991, 674.110668
Outstanding requests per worker:
1145 1215 1285 1060 1190 1269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166592.6,      832964,     749130,      83834,     638063,     111067,  42.864305, 124.300000, 146.900000, 191.500000,  47.802277,   0.752000, 378.244013, 686.044290
Outstanding requests per worker:
1126 1098 1350 1401 1418 1256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165535.6,      827679,     745074,      82605,     641872,     103202,  52.249927, 133.600000, 155.200000, 201.900000,  51.459709,   0.675000, 362.383991, 697.185992
Outstanding requests per worker:
2273 2137 2372 2176 2220 2187 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:11   0:00 /usr/lib/linux
memcache      7  341  0.0 519296 157440 pts/0   Sl+  22:11   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20725030278      instructions:u                                              
        4903257845      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         563502882      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1223286      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.660662437 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2453402112
starting receive base loop
num_worker_connections 85
Creating worker on tid 1679749632
starting receive base loop
num_worker_connections 85
Creating worker on tid 914747904
starting receive base loop
num_worker_connections 85
Creating worker on tid 152367616
starting receive base loop
num_worker_connections 85
Creating worker on tid 3684954624
starting receive base loop
Created 512 connections total
Creating worker on tid 2919952896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326335.324760,       0.0,      383289,     344774,      38515,     231650,     113124,  59.649651, 111.900000, 130.800000, 190.500000,  44.059466,   0.000000, 417.003989, 488.033979
Outstanding requests per worker:
2300 2315 2373 2380 2305 2451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170039.6,      850199,     765224,      84975,     582654,     182570, 104.819452, 166.900000, 192.600000, 244.600000,  46.656321,   1.599000, 400.000006, 586.681189
Outstanding requests per worker:
3264 3466 3717 3551 3701 3423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170631.4,      853158,     768660,      84498,     617734,     150926, 135.625905, 215.100000, 249.100000, 310.700000,  58.630621,   2.568000, 484.039992, 632.588895
Outstanding requests per worker:
3841 4008 4320 4373 4444 4230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170860.4,      854303,     768994,      85309,     635478,     133516, 157.189627, 243.000000, 275.600000, 366.200000,  65.343537,   2.675000, 575.529993, 658.097494
Outstanding requests per worker:
4300 4362 4685 5078 4743 4942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170896.6,      854484,     768941,      85543,     647087,     121854, 172.272257, 275.600000, 327.900000, 437.600000,  78.305997,   2.160000, 637.830973, 675.043014
Outstanding requests per worker:
4689 4899 5122 5435 5491 5207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170974.2,      854872,     769549,      85323,     656566,     112983, 186.962555, 309.800000, 383.100000, 534.800000,  94.211140,   1.461000, 724.070013, 687.192553
Outstanding requests per worker:
4853 5024 5510 5700 6157 5956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170283.4,      851418,     766275,      85143,     660029,     106246, 209.456740, 337.900000, 436.200000, 602.700000, 106.302317,   2.393000, 868.924022, 696.465420
Outstanding requests per worker:
5910 5951 6502 6862 7077 6730 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:12   0:00 /usr/lib/linux
memcache      8  350  0.0 521344 171840 pts/0   Sl+  22:12   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21528544984      instructions:u                                              
        4852104745      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         577409711      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6071397      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.140986740 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2153509376
starting receive base loop
num_worker_connections 85
Creating worker on tid 1384509952
starting receive base loop
num_worker_connections 85
Creating worker on tid 622129664
starting receive base loop
num_worker_connections 85
Creating worker on tid 4154716672
starting receive base loop
num_worker_connections 85
Creating worker on tid 3389714944
starting receive base loop
Created 512 connections total
Creating worker on tid 2627334656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326377.324802,       0.0,      383344,     344718,      38626,     231474,     113244,  58.202331, 106.200000, 125.000000, 201.700000,  43.236089,   0.000000, 435.196012, 487.392924
Outstanding requests per worker:
2002 2046 2037 2098 1948 2159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171222.0,      856111,     770547,      85564,     587757,     182790,  74.412239, 129.200000, 145.900000, 187.100000,  40.279830,   1.109000, 298.954010, 587.728846
Outstanding requests per worker:
2150 2194 2203 2253 2299 2288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170876.0,      854381,     768878,      85503,     618033,     150845,  87.718524, 158.600000, 184.200000, 228.500000,  54.568843,   0.964000, 339.801013, 633.447472
Outstanding requests per worker:
2698 2666 2645 2649 2701 2868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171055.2,      855277,     769745,      85532,     636817,     132928, 100.727874, 182.600000, 207.400000, 259.400000,  61.150660,   1.145000, 417.980999, 658.651223
Outstanding requests per worker:
2923 2698 3288 2969 3177 3136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171112.0,      855561,     770036,      85525,     648290,     121746, 110.867779, 210.100000, 245.700000, 305.600000,  72.499599,   1.269000, 523.127973, 674.577650
Outstanding requests per worker:
3031 3183 3376 3494 3359 3375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171060.6,      855304,     769241,      86063,     655893,     113348, 121.416070, 238.400000, 278.000000, 365.100000,  83.862625,   1.106000, 541.503012, 686.952916
Outstanding requests per worker:
3303 3379 3673 3789 3850 3718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169827.0,      849136,     764179,      84957,     658805,     105374, 150.478120, 266.000000, 313.000000, 413.900000,  84.720020,   1.476000, 669.794977, 696.839155
Outstanding requests per worker:
4434 4922 5064 5052 5194 5132 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:13   0:00 /usr/lib/linux
memcache      7  341  0.0 521344 169472 pts/0   Sl+  22:13   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21546629290      instructions:u                                              
        4702521128      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         587737179      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4152565      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.171105667 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1573319168
starting receive base loop
num_worker_connections 85
Creating worker on tid 799273472
starting receive base loop
num_worker_connections 85
Creating worker on tid 34271744
starting receive base loop
num_worker_connections 85
Creating worker on tid 3566858752
starting receive base loop
num_worker_connections 85
Creating worker on tid 2801857024
starting receive base loop
Created 512 connections total
Creating worker on tid 2039476736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326419.324844,       0.0,      384025,     345415,      38610,     232451,     112964,  82.990343, 145.300000, 172.700000, 325.200000,  66.593847,   0.000000, 686.923981, 489.084351
Outstanding requests per worker:
3536 3516 3613 3717 3889 4796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173550.4,      867753,     780607,      87146,     595798,     184809, 178.830891, 259.900000, 297.900000, 401.700000,  70.392043,   2.570000, 820.699990, 588.520736
Outstanding requests per worker:
5857 5823 6266 6436 6481 6887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174197.6,      870989,     784078,      86911,     631564,     152514, 243.097598, 370.300000, 435.000000, 598.600000,  99.538249,  21.299999, 936.393023, 635.292797
Outstanding requests per worker:
7528 7346 8489 8745 8313 8793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174182.4,      870913,     783993,      86920,     649389,     134604, 312.338506, 495.000000, 581.500000, 783.400000, 136.773944,  34.085002, 1131.098032, 660.219433
Outstanding requests per worker:
8883 8756 10649 11187 10530 10763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174287.8,      871440,     783977,      87463,     660764,     123213, 372.909555, 621.700000, 719.500000, 969.200000, 179.771716,  53.061999, 1377.794981, 675.744329
Outstanding requests per worker:
10042 10134 12776 13319 12780 12691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173893.6,      869469,     782398,      87071,     667990,     114408, 440.437512, 749.900000, 863.800000, 1183.200000, 227.490938,  53.307001, 1725.324988, 688.175310
Outstanding requests per worker:
11708 11559 15269 15962 15401 14808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172582.0,      862911,     776259,      86652,     670070,     106189, 532.454694, 911.500000, 1054.600000, 1340.800000, 269.619391,  42.753000, 1941.689014, 697.962757
Outstanding requests per worker:
13977 13838 19134 19350 19335 18616 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:13   0:00 /usr/lib/linux
memcache      7  350  0.0 522368 178112 pts/0   Sl+  22:13   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21780652001      instructions:u                                              
        4749746305      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         546891739      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3626579      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.100999284 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2416243200
starting receive base loop
num_worker_connections 85
Creating worker on tid 1644884480
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
Created 512 connections total
Creating worker on tid 2887709184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326461.324886,       0.0,      393126,     353887,      39239,     238190,     115697,  73.658046, 136.200000, 157.600000, 245.300000,  55.359551,   0.000000, 508.285999, 489.260979
Outstanding requests per worker:
3355 3249 3398 3412 3342 3760 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173887.8,      869440,     782671,      86769,     597144,     185527, 156.367868, 233.300000, 262.300000, 332.300000,  57.889768,   3.587000, 488.947988, 588.276124
Outstanding requests per worker:
5295 5334 5676 5618 5804 5816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174485.4,      872428,     785344,      87084,     632418,     152926, 218.774380, 332.000000, 392.100000, 502.100000,  87.009436,   5.445000, 743.160009, 634.603134
Outstanding requests per worker:
6657 6866 7205 7555 7534 7705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174377.0,      871886,     784335,      87551,     648918,     135417, 274.190967, 447.100000, 530.400000, 685.500000, 123.293326,  22.919999, 936.755002, 659.422424
Outstanding requests per worker:
8136 8185 9049 9543 9343 9811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174455.4,      872278,     785348,      86930,     661971,     123377, 334.224436, 588.600000, 695.700000, 944.600000, 172.492120,  28.556000, 1225.345969, 675.940137
Outstanding requests per worker:
9287 9399 10770 11696 11419 11615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174350.0,      871751,     784658,      87093,     670626,     114032, 393.105162, 700.600000, 850.500000, 1138.200000, 213.982084,  46.649002, 1448.243976, 688.767853
Outstanding requests per worker:
10285 10525 13145 13716 13513 13726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173352.4,      866763,     779944,      86819,     672572,     107372, 466.934810, 853.100000, 1024.400000, 1296.600000, 258.635308,  37.723001, 1689.012051, 697.019777
Outstanding requests per worker:
12078 12385 16274 16386 16520 16917 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:14   0:00 /usr/lib/linux
memcache      7  351  0.0 524416 175616 pts/0   Sl+  22:14   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21958355503      instructions:u                                              
        4744147574      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         569347884      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3756172      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.130837227 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2418405888
starting receive base loop
num_worker_connections 85
Creating worker on tid 1644884480
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
Created 512 connections total
Creating worker on tid 2887709184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326503.324928,       0.0,      386767,     347760,      39007,     233782,     113978,  83.068904, 146.900000, 178.000000, 289.400000,  61.854559,   0.000000, 554.363012, 487.939484
Outstanding requests per worker:
3529 3650 3765 3813 3720 4407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173508.2,      867542,     780826,      86716,     594336,     186490, 175.601667, 260.600000, 298.600000, 396.100000,  67.198836,   2.485000, 703.652024, 586.883400
Outstanding requests per worker:
5822 5976 6258 6708 6520 6511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174261.4,      871308,     784338,      86970,     631134,     153204, 246.400502, 383.000000, 441.700000, 554.200000,  98.873468,  23.892000, 860.985994, 634.203176
Outstanding requests per worker:
7305 7251 8443 8557 8591 8804 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174470.8,      872355,     785256,      87099,     650374,     134882, 306.677294, 512.800000, 599.200000, 739.000000, 139.589334,  30.421000, 1104.519963, 660.543567
Outstanding requests per worker:
8500 8464 10504 10650 10203 10686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174597.0,      872986,     785782,      87204,     662562,     123220, 359.079503, 625.300000, 748.900000, 918.800000, 180.562835,  21.786001, 1289.067984, 676.312848
Outstanding requests per worker:
10102 9279 11998 12554 11823 12693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174358.2,      871792,     784745,      87047,     669963,     114782, 415.566561, 764.000000, 900.000000, 1082.500000, 226.246393,  21.558000, 1569.015026, 688.749659
Outstanding requests per worker:
11316 10912 13768 14367 14287 14456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173389.0,      866946,     780211,      86735,     672914,     107297, 486.007564, 923.000000, 1064.700000, 1295.700000, 281.817960,  31.268001, 1858.119011, 697.786692
Outstanding requests per worker:
13667 12805 16513 17159 16979 17506 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:15   0:00 /usr/lib/linux
memcache      7  333  0.0 523392 177984 pts/0   Sl+  22:15   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21854218942      instructions:u                                              
        4778585114      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         567901875      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3775729      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.461420741 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2220814848
starting receive base loop
num_worker_connections 64
Creating worker on tid 1628959232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1035661824
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2946953728
starting receive base loop
Created 512 connections total
Creating worker on tid 2351034880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326545.324970,       0.0,      368212,     331019,      37193,     222881,     108138,  10.626835,  22.800000,  28.800000,  54.800000,  12.729757,   0.000000, 195.132002, 488.904441
Outstanding requests per worker:
183 167 189 152 206 184 170 176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.6,      754714,     679418,      75296,     515108,     164310,   9.792227,  18.400000,  22.100000,  28.700000,   6.284206,   0.190000,  60.775999, 583.043118
Outstanding requests per worker:
214 171 196 201 180 198 179 187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150948.6,      754744,     679689,      75055,     542908,     136781,  10.216288,  19.100000,  23.100000,  29.900000,   6.530453,   0.201000,  50.271999, 627.191439
Outstanding requests per worker:
177 222 178 173 205 198 175 217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150945.4,      754728,     679372,      75356,     556645,     122727,  10.488657,  19.500000,  23.800000,  30.700000,   6.706835,   0.185000,  54.423001, 650.608182
Outstanding requests per worker:
209 204 205 205 193 183 206 186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150955.0,      754776,     679713,      75063,     568080,     111633,  10.781168,  20.200000,  24.300000,  32.300000,   6.976141,   0.192000,  64.090997, 668.308451
Outstanding requests per worker:
217 225 178 218 198 217 195 163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150937.6,      754689,     679730,      74959,     575963,     103767,  10.997024,  20.500000,  24.600000,  33.300000,   7.115649,   0.181000,  63.799001, 680.991998
Outstanding requests per worker:
215 198 215 206 250 215 191 200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150953.6,      754769,     679307,      75462,     581571,      97736,  11.169390,  20.500000,  25.400000,  33.300000,   7.158524,   0.191000,  58.814000, 690.568023
Outstanding requests per worker:
191 227 192 233 194 221 202 221 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:16   0:00 /usr/lib/linux
memcache      7  352  0.0 444096 146176 pts/0   Sl+  22:16   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18642157824      instructions:u                                              
        4862784655      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         507159359      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            109347      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.251090517 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2049634816
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326587.325012,       0.0,      366429,     329798,      36631,     220712,     109086,  12.563248,  27.200000,  34.900000,  66.100000,  13.563865,   0.000000, 250.824004, 484.732946
Outstanding requests per worker:
191 221 196 184 191 239 170 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153833.2,      769167,     691796,      77371,     523706,     168090,  11.026943,  20.600000,  24.900000,  32.900000,   7.121583,   0.184000,  66.740997, 582.179199
Outstanding requests per worker:
209 235 212 197 227 230 258 204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.2,      769302,     692713,      76589,     553725,     138988,  11.610182,  21.500000,  26.100000,  35.100000,   7.515783,   0.196000,  72.324000, 627.730271
Outstanding requests per worker:
237 208 241 237 224 195 216 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.6,      769249,     691879,      77370,     568226,     123653,  12.164370,  22.300000,  27.300000,  36.600000,   7.854163,   0.188000,  72.837003, 652.467460
Outstanding requests per worker:
252 231 233 221 230 237 235 192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153828.2,      769142,     691944,      77198,     578929,     113015,  12.505949,  23.000000,  28.000000,  38.600000,   8.179209,   0.228000,  90.148002, 669.799779
Outstanding requests per worker:
246 232 234 261 254 233 257 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153866.4,      769333,     692184,      77149,     587027,     105157,  12.831886,  23.200000,  28.600000,  39.200000,   8.283794,   0.232000,  80.541000, 682.374337
Outstanding requests per worker:
253 253 216 264 244 254 236 257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.0,      769261,     692224,      77037,     593274,      98950,  13.011387,  23.700000,  28.700000,  40.600000,   8.477577,   0.201000,  76.728001, 691.983595
Outstanding requests per worker:
245 283 257 268 261 235 245 239 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:16   0:00 /usr/lib/linux
memcache      7  333  0.0 446144 151424 pts/0   Sl+  22:16   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18921156453      instructions:u                                              
        4705688477      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         518546620      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            135250      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.330375031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2272260608
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326630.325055,       0.0,      376235,     338333,      37902,     226917,     111416,  16.335556,  35.500000,  48.700000,  88.000000,  18.282870,   0.000000, 254.114985, 487.537358
Outstanding requests per worker:
245 221 267 267 257 242 230 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156838.4,      784193,     705586,      78607,     536395,     169191,  13.169091,  23.900000,  29.100000,  40.500000,   8.511010,   0.214000,  83.718002, 585.130579
Outstanding requests per worker:
272 282 254 234 253 288 283 270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.4,      784278,     705795,      78483,     565230,     140565,  13.881187,  24.700000,  30.900000,  42.000000,   8.908575,   0.235000,  85.945003, 630.063462
Outstanding requests per worker:
308 280 316 307 275 247 252 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.8,      784295,     705744,      78551,     580972,     124772,  14.621754,  25.900000,  32.500000,  45.000000,   9.425689,   0.189000,  96.986003, 654.515836
Outstanding requests per worker:
285 264 288 291 266 320 283 309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156829.0,      784146,     705632,      78514,     591330,     114302,  14.840440,  26.600000,  32.800000,  45.600000,   9.558741,   0.233000,  94.259001, 671.131077
Outstanding requests per worker:
339 313 300 309 294 331 312 336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156888.6,      784444,     705617,      78827,     599085,     106532,  15.523714,  27.400000,  34.700000,  48.100000,  10.101785,   0.222000, 103.771999, 683.099262
Outstanding requests per worker:
309 335 339 274 293 269 301 332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156885.4,      784428,     705979,      78449,     605804,     100175,  15.585239,  27.600000,  34.600000,  47.800000,  10.032311,   0.181000,  95.873997, 692.628788
Outstanding requests per worker:
290 332 243 313 288 310 306 318 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:17   0:00 /usr/lib/linux
memcache      7  342  0.0 449216 151680 pts/0   Sl+  22:17   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19368713176      instructions:u                                              
        4672189433      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         498617063      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            179297      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.581107462 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1863119360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326672.325097,       0.0,      374692,     337142,      37550,     226018,     111124,  15.359779,  33.400000,  44.700000,  83.700000,  17.427461,   0.000000, 286.334008, 486.388605
Outstanding requests per worker:
245 246 253 207 247 224 203 237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156852.2,      784262,     705766,      78496,     536148,     169618,  12.638882,  23.000000,  28.100000,  38.600000,   8.140011,   0.231000,  76.529004, 584.027135
Outstanding requests per worker:
250 249 281 244 217 246 286 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156839.0,      784196,     705832,      78364,     564917,     140915,  13.415967,  24.100000,  29.900000,  41.000000,   8.610840,   0.236000,  83.710998, 629.435720
Outstanding requests per worker:
272 316 246 282 263 209 297 296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.4,      784348,     705828,      78520,     580238,     125590,  14.091516,  25.200000,  31.400000,  42.800000,   9.060025,   0.240000,  86.737998, 653.636594
Outstanding requests per worker:
261 256 246 263 266 289 356 273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.6,      784309,     706072,      78237,     590514,     115558,  14.583075,  25.900000,  32.400000,  44.500000,   9.364845,   0.185000,  86.898997, 669.896309
Outstanding requests per worker:
289 301 277 276 280 329 288 258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156871.0,      784356,     705878,      78478,     599219,     106659,  14.892223,  26.400000,  33.000000,  45.700000,   9.592092,   0.186000,  95.003001, 683.376523
Outstanding requests per worker:
308 296 279 319 266 277 308 292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.6,      784294,     705488,      78806,     604724,     100764,  15.175970,  26.700000,  33.300000,  47.200000,   9.822430,   0.292000,  94.898000, 691.935997
Outstanding requests per worker:
286 301 279 328 319 308 275 319 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:18   0:00 /usr/lib/linux
memcache      7  333  0.0 447168 147712 pts/0   Sl+  22:18   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19381997063      instructions:u                                              
        4672011091      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         524039631      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            172684      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.490834925 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1821110784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
num_worker_connections 64
Creating worker on tid 37089792
starting receive base loop
num_worker_connections 64
Creating worker on tid 3736138240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3140219392
starting receive base loop
num_worker_connections 64
Creating worker on tid 2544300544
starting receive base loop
Created 512 connections total
Creating worker on tid 1948381696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326715.325140,       0.0,      379714,     341587,      38127,     228773,     112814,  29.753027,  72.800000,  86.600000, 123.000000,  29.824013,   0.000000, 340.582997, 485.591691
Outstanding requests per worker:
567 565 504 535 611 510 536 593 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159725.6,      798629,     718762,      79867,     545565,     173197,  32.722319,  90.500000, 110.100000, 144.800000,  34.753884,   0.234000, 234.152004, 583.996493
Outstanding requests per worker:
797 705 731 779 730 719 673 726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159793.2,      798967,     719363,      79604,     576849,     142514,  40.503550, 119.700000, 144.200000, 186.400000,  46.422584,   0.286000, 287.207007, 630.630263
Outstanding requests per worker:
902 790 904 880 924 788 841 941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159844.4,      799223,     719137,      80086,     592474,     126663,  46.412227, 141.500000, 166.600000, 215.800000,  55.714948,   0.363000, 401.829004, 654.905584
Outstanding requests per worker:
957 924 879 962 1027 1075 985 1035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159839.0,      799196,     719589,      79607,     603813,     115776,  52.921714, 164.800000, 197.500000, 251.000000,  66.238667,   0.229000, 481.629997, 671.754554
Outstanding requests per worker:
1052 1106 1126 1002 1038 1079 1064 1219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159847.6,      799239,     719363,      79876,     612028,     107335,  55.968478, 177.400000, 209.900000, 262.200000,  70.273136,   0.278000, 407.537013, 684.718632
Outstanding requests per worker:
1173 1036 1119 1271 1274 1352 1144 1138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159848.0,      799241,     719031,      80210,     617741,     101290,  61.958845, 201.600000, 234.800000, 303.200000,  80.958690,   0.333000, 473.260999, 694.481145
Outstanding requests per worker:
1200 1370 1243 1253 1250 1404 1230 1393 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:18   0:00 /usr/lib/linux
memcache      7  342  0.0 449216 157312 pts/0   Sl+  22:18   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19930386801      instructions:u                                              
        4786190570      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         525195760      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1858099      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.370421634 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1903292928
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326756.325181,       0.0,      380631,     342396,      38235,     229851,     112545,  29.487149,  75.000000,  91.500000, 131.400000,  31.650312,   0.000000, 367.379010, 487.031510
Outstanding requests per worker:
513 626 617 592 577 673 583 637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159799.2,      798997,     719004,      79993,     546072,     172932,  33.440423,  92.200000, 112.500000, 148.700000,  35.897895,   0.287000, 264.485002, 584.336803
Outstanding requests per worker:
768 720 765 756 733 761 701 719 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159796.8,      798985,     719368,      79617,     576150,     143218,  40.816190, 120.700000, 145.200000, 191.000000,  47.338944,   0.320000, 348.138988, 629.575038
Outstanding requests per worker:
858 926 935 832 828 900 853 861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159818.8,      799095,     719057,      80038,     591974,     127083,  47.428355, 147.100000, 173.400000, 218.800000,  57.583811,   0.326000, 339.134991, 654.752305
Outstanding requests per worker:
1005 1113 1037 1022 919 990 955 925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159922.2,      799612,     719591,      80021,     603559,     116032,  52.262788, 161.300000, 193.300000, 249.400000,  64.895713,   0.348000, 454.944998, 671.348266
Outstanding requests per worker:
1082 1140 967 1006 962 1036 1116 1120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159800.2,      799002,     719180,      79822,     611544,     107636,  54.998358, 173.900000, 208.000000, 264.400000,  69.645421,   0.234000, 496.320009, 684.818763
Outstanding requests per worker:
1076 1162 1287 1169 1356 1135 1098 1182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159769.6,      798849,     719005,      79844,     617917,     101088,  63.278551, 200.000000, 233.800000, 294.600000,  78.898009,   0.368000, 474.177003, 694.204449
Outstanding requests per worker:
1304 1324 1409 1332 1231 1348 1362 1351 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:19   0:00 /usr/lib/linux
memcache      7  352  0.0 449216 155776 pts/0   Sl+  22:19   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19876570376      instructions:u                                              
        4861732424      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         536414854      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1732677      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.080454865 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1953231360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
num_worker_connections 64
Creating worker on tid 2678518272
starting receive base loop
Created 512 connections total
Creating worker on tid 2082599424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326798.325223,       0.0,      384441,     345734,      38707,     233008,     112726,  44.345151,  91.500000, 107.400000, 152.800000,  38.338707,   0.000000, 390.228003, 490.914845
Outstanding requests per worker:
1319 1136 1344 1335 1318 1324 1363 1392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162282.6,      811414,     729793,      81621,     554915,     174878,  80.382985, 150.900000, 177.400000, 224.400000,  52.392864,   0.476000, 421.278000, 585.102611
Outstanding requests per worker:
1817 1747 2016 1966 1908 2091 1994 1967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162528.2,      812642,     731679,      80963,     586610,     145069, 105.255877, 207.100000, 244.100000, 317.100000,  74.869012,   0.423000, 532.962978, 630.923815
Outstanding requests per worker:
2273 2505 2293 2336 2511 2471 2450 2433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162694.4,      813473,     732043,      81430,     603241,     128802, 126.966904, 258.200000, 302.000000, 383.400000,  91.762564,   0.331000, 566.953003, 655.772351
Outstanding requests per worker:
2779 2817 2853 2776 2744 2817 2750 2686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162324.2,      811622,     730301,      81321,     613491,     116810, 148.900823, 297.200000, 349.700000, 459.900000, 104.538133,   0.663000, 664.767027, 672.905401
Outstanding requests per worker:
3355 3132 3327 3350 3120 3634 3567 3485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162206.2,      811032,     729489,      81543,     621361,     108128, 182.816786, 344.600000, 423.400000, 552.100000, 111.640415,   0.914000, 781.436980, 686.132332
Outstanding requests per worker:
4219 3733 4095 3886 3941 4272 4054 4119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161870.4,      809353,     728143,      81210,     625962,     102181, 210.594208, 401.900000, 510.100000, 684.600000, 133.998194,   1.539000, 983.887017, 694.951522
Outstanding requests per worker:
5139 4517 5232 4752 4811 5279 4853 4793 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:20   0:00 /usr/lib/linux
memcache      7  342  0.0 516224 165312 pts/0   Sl+  22:20   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20507227580      instructions:u                                              
        4741475878      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         560777755      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4597580      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.271418674 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2639852032
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326840.325265,       0.0,      382182,     344103,      38079,     231132,     112971,  61.893924, 124.500000, 142.100000, 200.500000,  49.718456,   0.000000, 395.435005, 487.495110
Outstanding requests per worker:
2059 2183 2215 2189 2123 2260 2245 2346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163916.4,      819583,     737508,      82075,     560399,     177109, 151.126273, 235.900000, 273.400000, 345.400000,  63.616723,   0.888000, 683.412015, 584.234174
Outstanding requests per worker:
3717 4107 3895 4016 3899 3810 3965 4029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164398.8,      821995,     740271,      81724,     593618,     146653, 222.555313, 343.000000, 406.200000, 562.100000,  97.191114,   1.996000, 964.424014, 630.842455
Outstanding requests per worker:
5159 5550 5495 5255 5558 5297 5277 5227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164589.4,      822948,     740732,      82216,     610927,     129805, 287.662313, 469.000000, 561.100000, 760.800000, 136.840565,  19.458000, 1176.854968, 655.725472
Outstanding requests per worker:
6582 6916 6856 6633 6701 6392 6485 6698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164763.6,      823819,     741446,      82373,     622432,     119014, 346.221042, 591.300000, 708.200000, 907.100000, 173.258002,   2.918000, 1396.697998, 672.167051
Outstanding requests per worker:
7540 7951 7714 7860 8233 7764 7714 8053 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164777.4,      823888,     741314,      82574,     631644,     109670, 403.477377, 744.400000, 857.200000, 1036.200000, 219.088186,  16.824000, 1637.850046, 686.483033
Outstanding requests per worker:
8742 9190 8722 9320 9405 8781 9087 9084 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163879.6,      819399,     737657,      81742,     634326,     103331, 468.269237, 891.000000, 1013.800000, 1263.000000, 267.703319,  32.662999, 1665.575027, 695.116352
Outstanding requests per worker:
10137 11093 10470 10973 11191 10492 10902 11059 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:20   0:00 /usr/lib/linux
memcache      7  342  0.0 516224 162432 pts/0   Sl+  22:20   2:10 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  22:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20700796781      instructions:u                                              
        4699633012      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         563574020      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           4509789      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.170921573 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1715204608
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
num_worker_connections 64
Creating worker on tid 4222022144
starting receive base loop
num_worker_connections 64
Creating worker on tid 3626103296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3030184448
starting receive base loop
num_worker_connections 64
Creating worker on tid 2434265600
starting receive base loop
Created 512 connections total
Creating worker on tid 1840968192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326882.325307,       0.0,      384819,     346090,      38729,     232482,     113608,  62.064144, 126.100000, 146.400000, 217.800000,  51.118612,   0.000000, 400.003999, 487.783158
Outstanding requests per worker:
2222 2309 2294 2196 2293 2275 2015 2418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163513.2,      817567,     736003,      81564,     558984,     177019, 161.038280, 246.900000, 275.200000, 339.800000,  64.029611,   1.130000, 580.820978, 584.382296
Outstanding requests per worker:
4247 4127 4190 4493 4087 4229 4132 4337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164326.8,      821635,     739815,      81820,     593263,     146552, 239.221576, 357.100000, 405.000000, 534.100000,  92.899362,   3.142000, 757.645011, 630.719584
Outstanding requests per worker:
5479 5683 5543 6047 5678 5869 5830 5484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164273.4,      821368,     739286,      82082,     610353,     128933, 309.357808, 487.700000, 568.000000, 703.200000, 128.463073,  16.450001, 954.662979, 657.140981
Outstanding requests per worker:
7066 6832 7495 7193 7161 7455 7311 7150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164429.4,      822148,     739997,      82151,     621412,     118585, 378.805842, 617.800000, 707.300000, 861.600000, 163.984929,  43.191001, 1068.361998, 673.059000
Outstanding requests per worker:
8366 8527 8962 8669 8712 8939 8389 8389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164212.0,      821061,     739308,      81753,     629289,     110019, 448.771553, 745.400000, 866.900000, 1029.300000, 206.337175,  40.715002, 1344.359994, 685.319649
Outstanding requests per worker:
10083 10116 10552 10095 9989 10420 9946 10084 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163085.4,      815428,     733669,      81759,     630715,     102954, 527.781555, 907.400000, 1018.200000, 1222.600000, 254.114127,  22.066001, 1531.340957, 695.333014
Outstanding requests per worker:
12357 12437 12858 12298 12148 12676 12139 12348 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:21   0:00 /usr/lib/linux
memcache      8  352  0.0 516224 169344 pts/0   Sl+  22:21   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20618536673      instructions:u                                              
        4757053874      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         552179309      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3965508      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.100615787 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1738404352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
num_worker_connections 64
Creating worker on tid 2461069824
starting receive base loop
Created 512 connections total
Creating worker on tid 1865150976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326923.325348,       0.0,      385975,     347155,      38820,     233126,     114029,  77.961136, 151.100000, 176.000000, 269.200000,  62.852788,   0.000000, 490.561992, 487.292224
Outstanding requests per worker:
2800 2898 2699 2919 2874 2964 2800 3401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165174.2,      825872,     743155,      82717,     565552,     177603, 216.938364, 326.700000, 374.400000, 476.200000,  83.459448,   1.079000, 719.987988, 585.581963
Outstanding requests per worker:
6091 6097 5916 5908 6386 5978 6104 6153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165927.4,      829638,     746790,      82848,     599356,     147434, 346.263512, 524.900000, 608.800000, 771.900000, 131.276694,  19.012000, 1043.606043, 631.816458
Outstanding requests per worker:
8648 8793 8835 8637 8980 8751 8759 8769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165938.6,      829694,     746504,      83190,     616201,     130303, 471.421637, 750.200000, 849.300000, 1022.700000, 191.662411,  40.029000, 1462.388992, 657.068848
Outstanding requests per worker:
11450 11285 11403 11261 11346 11281 11958 11603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164991.6,      824959,     742408,      82551,     623983,     118425, 612.380325, 992.600000, 1109.000000, 1327.600000, 257.832454,  96.804999, 1768.435955, 674.091993
Outstanding requests per worker:
14790 14451 14903 14548 14755 14429 15183 14700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164568.8,      822845,     740589,      82256,     630500,     110089, 771.086640, 1226.100000, 1355.600000, 1576.000000, 313.018964,  87.087996, 2075.261116, 685.342368
Outstanding requests per worker:
17946 17799 18676 17948 18535 17917 18989 18253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164050.2,      820252,     738169,      82083,     635231,     102938, 938.967921, 1475.200000, 1616.800000, 1816.200000, 366.034097, 116.589002, 2396.619081, 696.043145
Outstanding requests per worker:
22060 21346 22522 21992 22282 21842 22660 22273 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:22   0:00 /usr/lib/linux
memcache      7  352  0.0 517248 167872 pts/0   Sl+  22:22   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20734605895      instructions:u                                              
        4815535047      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         557028590      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2200999      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.070776126 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2092298752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1494741504
starting receive base loop
num_worker_connections 64
Creating worker on tid 901444096
starting receive base loop
num_worker_connections 64
Creating worker on tid 305525248
starting receive base loop
num_worker_connections 64
Creating worker on tid 4004573696
starting receive base loop
num_worker_connections 64
Creating worker on tid 3408654848
starting receive base loop
num_worker_connections 64
Creating worker on tid 2812736000
starting receive base loop
Created 512 connections total
Creating worker on tid 2216817152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575326966.325391,       0.0,      382949,     344658,      38291,     231861,     112797,  78.015587, 150.900000, 179.700000, 282.400000,  62.764656,   0.000000, 520.991981, 489.231780
Outstanding requests per worker:
2870 2850 2920 2787 2810 2865 2900 3443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165473.2,      827367,     744842,      82525,     567375,     177467, 211.901799, 318.200000, 359.400000, 461.100000,  80.891184,   3.837000, 707.898974, 586.749696
Outstanding requests per worker:
5835 5722 5915 5958 5796 5996 5799 6182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166299.4,      831498,     748508,      82990,     600563,     147945, 333.852462, 506.200000, 570.900000, 690.800000, 122.237564,  54.074001, 956.938028, 631.667545
Outstanding requests per worker:
8239 8116 8490 8629 8168 8234 8489 8501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165923.4,      829618,     746813,      82805,     615768,     131045, 454.614910, 701.900000, 791.800000, 981.500000, 181.308921,  69.346003, 1479.915977, 656.527040
Outstanding requests per worker:
10574 10985 11294 11584 10792 10878 11244 11055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165851.0,      829256,     746215,      83041,     627085,     119130, 579.019941, 929.800000, 1056.300000, 1271.300000, 248.039960,  81.492998, 1913.805962, 673.087662
Outstanding requests per worker:
13356 13435 13924 14443 13580 13502 14146 13944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165671.8,      828360,     745619,      82741,     634809,     110810, 708.684088, 1157.500000, 1288.700000, 1521.700000, 309.388341,  83.916001, 2289.546967, 685.191688
Outstanding requests per worker:
16053 16204 16738 16999 16760 16692 17077 16580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164402.2,      822012,     739963,      82049,     636465,     103498, 854.113704, 1393.700000, 1558.400000, 1836.100000, 374.118662,  86.448997, 2546.442986, 694.977816
Outstanding requests per worker:
19824 19924 20519 20831 20288 20184 20592 20077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      7  342  0.0 517248 163200 pts/0   Sl+  22:23   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20779136718      instructions:u                                              
        4595369787      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         539718308      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2671874      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.481470784 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2193355264
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327008.325433,       0.0,      387973,     348959,      39014,     234806,     114153,  89.668551, 172.800000, 204.500000, 320.000000,  71.674939,   0.000000, 542.971015, 489.043550
Outstanding requests per worker:
3361 3398 3447 3621 3635 3465 3488 4165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166800.8,      834005,     750493,      83512,     570952,     179541, 271.622526, 404.600000, 457.100000, 569.000000,  99.906854,   9.446000, 800.616026, 586.417492
Outstanding requests per worker:
7954 7874 7868 8053 7965 7945 7952 8630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166868.2,      834342,     751029,      83313,     602935,     148094, 467.819965, 684.200000, 763.800000, 902.300000, 156.870474,  99.258997, 1259.516954, 632.240400
Outstanding requests per worker:
12398 12453 12439 12188 12464 12104 12496 13043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166065.0,      830326,     747332,      82994,     616758,     130574, 680.607778, 982.300000, 1080.500000, 1271.000000, 222.146561, 116.161004, 1660.984993, 657.159168
Outstanding requests per worker:
17155 17599 17318 17232 17349 17288 17394 17552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165724.8,      828625,     746037,      82588,     627209,     118828, 913.763336, 1286.100000, 1411.100000, 1663.500000, 281.614921, 162.319005, 2024.981976, 673.991915
Outstanding requests per worker:
22384 22947 22616 22327 22485 22276 22399 22472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165325.8,      826630,     743834,      82796,     633867,     109967, 1154.031609, 1606.400000, 1770.400000, 2064.000000, 340.614709, 209.288999, 2379.671097, 686.012212
Outstanding requests per worker:
27688 28363 27959 27726 27511 27792 27771 28130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163954.0,      819771,     737693,      82078,     634864,     102829, 1413.738301, 1955.800000, 2165.000000, 2451.100000, 400.350776, 334.612012, 2831.285000, 695.514840
Outstanding requests per worker:
33886 34755 34424 33673 33687 33883 34170 34324 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      7  352  0.0 517248 167040 pts/0   Sl+  22:23   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20827697112      instructions:u                                              
        4703291681      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         547368596      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2122621      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.141432813 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2634478080
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327050.325475,       0.0,      388901,     349929,      38972,     235046,     114883, 110.586300, 209.600000, 254.300000, 476.900000, 100.936219,   0.000000, 1027.287006, 487.775806
Outstanding requests per worker:
4412 4371 4417 4381 4414 4225 4363 6968 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166760.6,      833804,     750524,      83280,     571232,     179292, 368.345854, 551.000000, 617.800000, 841.000000, 147.516843,  33.638000, 1473.235011, 586.159455
Outstanding requests per worker:
11410 11644 11155 11599 11065 10978 11146 13717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166079.6,      830399,     747504,      82895,     600730,     146774, 681.594598, 946.500000, 1047.200000, 1319.000000, 209.908215, 162.173003, 1823.920012, 632.670553
Outstanding requests per worker:
18934 18917 18107 18722 18474 18328 18602 21221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165082.0,      825411,     742863,      82548,     612742,     130121, 1025.537973, 1368.100000, 1492.400000, 1742.600000, 265.079375, 299.003989, 2215.423107, 656.468481
Outstanding requests per worker:
26726 26815 26420 26312 26743 26313 26541 29033 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164675.0,      823376,     741278,      82098,     623210,     118068, 1388.161945, 1787.900000, 1921.100000, 2169.900000, 311.715102, 383.870006, 2613.173962, 674.204018
Outstanding requests per worker:
34952 35184 34391 34518 35336 34576 34578 36947 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164115.8,      820580,     738225,      82355,     628841,     109384, 1766.208459, 2223.900000, 2386.100000, 2689.200000, 356.580659, 573.714972, 3059.542894, 686.850332
Outstanding requests per worker:
43606 43859 42746 42929 43663 43260 43368 45441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163324.0,      816621,     735217,      81404,     632199,     103018, 2155.431620, 2692.400000, 2885.400000, 3154.200000, 404.120022, 760.945976, 3774.813890, 694.928719
Outstanding requests per worker:
52687 52879 51842 52234 52721 52142 52203 54548 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:24   0:00 /usr/lib/linux
memcache      7  352  0.0 516224 164800 pts/0   Sl+  22:24   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20744376163      instructions:u                                              
        4741056229      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         533061422      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1228159      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.200447845 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2443964928
starting receive base loop
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
Created 512 connections total
Creating worker on tid 2568483328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327092.325517,       0.0,      389364,     350049,      39315,     235935,     114114, 103.274115, 196.500000, 259.300000, 673.600000, 122.871842,   0.000000, 1185.755968, 489.789455
Outstanding requests per worker:
3741 3888 3643 3740 3776 3796 4113 8592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168299.0,      841496,     757372,      84124,     576856,     180516, 336.566003, 511.100000, 604.100000, 1028.800000, 163.369364,  22.442000, 1570.407033, 586.917903
Outstanding requests per worker:
9697 9980 9696 9591 9682 9752 9886 14511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168165.0,      840826,     756589,      84237,     608003,     148586, 595.740630, 851.900000, 953.900000, 1377.200000, 214.785099, 146.093994, 1952.350974, 633.242277
Outstanding requests per worker:
15560 15721 15622 15824 16101 15630 15887 20564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167327.0,      836636,     753156,      83480,     622952,     130204, 877.216668, 1198.600000, 1323.100000, 1752.200000, 268.464653, 105.962999, 2342.693090, 658.423394
Outstanding requests per worker:
21972 22512 22215 22212 22630 22154 22387 27157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166397.2,      831987,     748919,      83068,     630872,     118047, 1186.854598, 1579.400000, 1743.600000, 2124.300000, 318.540467, 305.940986, 2860.383034, 675.462439
Outstanding requests per worker:
29132 29866 29321 29365 29643 29178 29496 34233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166199.4,      830998,     748271,      82727,     638132,     110139, 1508.393043, 1979.000000, 2157.100000, 2573.300000, 362.519926, 384.737998, 3156.728029, 686.583060
Outstanding requests per worker:
36434 37137 36464 36685 36962 36195 36665 41698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164690.4,      823453,     740676,      82777,     637794,     102882, 1848.725256, 2377.500000, 2576.200000, 3037.800000, 411.937110, 429.827005, 3512.273073, 696.100354
Outstanding requests per worker:
44608 45638 44794 44894 45161 44089 44851 49710 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:25   0:00 /usr/lib/linux
memcache      7  334  0.0 517248 170368 pts/0   Sl+  22:25   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20952329799      instructions:u                                              
        4643204097      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         552462296      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           1788933      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.461489434 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1610412544
starting receive base loop
num_worker_connections 171
Creating worker on tid 154399232
starting receive base loop
num_worker_connections 171
Creating worker on tid 2991714816
starting receive base loop
num_worker_connections 170
Creating worker on tid 1531441664
starting receive base loop
num_worker_connections 170
Creating worker on tid 79229440
starting receive base loop
Created 1024 connections total
Creating worker on tid 2921984512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327135.325560,       0.0,      326470,     293411,      33059,     195181,      98230,  37.612929,  62.000000,  86.800000, 509.000000,  87.571049,   0.000000, 1336.665988, 481.106802
Outstanding requests per worker:
360 345 356 350 331 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149999.5,      749998,     674955,      75043,     510053,     164902,  14.152181,  26.300000,  29.500000,  35.800000,   8.006129,   0.398000,  46.618000, 579.360094
Outstanding requests per worker:
372 353 363 359 374 375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150020.0,      750101,     675519,      74582,     538468,     137051,  14.570558,  27.100000,  30.400000,  37.500000,   8.280059,   0.575000,  48.820000, 625.541940
Outstanding requests per worker:
382 371 350 351 372 363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150001.4,      750008,     675261,      74747,     553337,     121924,  14.801615,  27.500000,  31.100000,  37.900000,   8.436207,   0.500000,  49.499001, 650.184600
Outstanding requests per worker:
368 387 389 340 366 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.2,      750022,     675369,      74653,     563398,     111971,  15.050578,  27.900000,  31.500000,  39.900000,   8.616638,   0.505000,  49.357001, 666.894028
Outstanding requests per worker:
375 391 399 357 389 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150016.2,      750082,     675032,      75050,     571575,     103457,  15.137599,  28.200000,  31.900000,  39.100000,   8.661540,   0.517000,  53.355999, 680.089203
Outstanding requests per worker:
377 386 370 376 371 375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150008.4,      750043,     675306,      74737,     577818,      97488,  15.314340,  28.400000,  32.100000,  40.400000,   8.782895,   0.467000,  52.676000, 689.960182
Outstanding requests per worker:
377 356 374 375 382 405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:25   0:00 /usr/lib/linux
memcache      7  330  0.0 442048 155904 pts/0   Sl+  22:25   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18260447033      instructions:u                                              
        4926540714      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         512849754      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            136189      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.810552065 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1796469248
starting receive base loop
num_worker_connections 171
Creating worker on tid 339603968
starting receive base loop
num_worker_connections 171
Creating worker on tid 3174298112
starting receive base loop
num_worker_connections 170
Creating worker on tid 1716646400
starting receive base loop
num_worker_connections 170
Creating worker on tid 264434176
starting receive base loop
Created 1024 connections total
Creating worker on tid 3107189248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327178.325603,       0.0,      333495,     300170,      33325,     199042,     101128,  36.546373,  80.100000, 111.500000, 176.900000,  37.846957,   0.000000, 604.103029, 478.258707
Outstanding requests per worker:
383 384 400 405 392 399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153827.2,      769137,     692417,      76720,     522453,     169964,  16.069768,  29.800000,  34.100000,  41.300000,   9.056334,   0.609000,  52.659001, 578.337841
Outstanding requests per worker:
417 422 408 406 403 461 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153811.2,      769057,     692159,      76898,     551805,     140354,  16.664867,  30.900000,  35.500000,  43.000000,   9.420848,   0.690000,  55.117998, 625.947399
Outstanding requests per worker:
456 455 458 461 447 482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153902.4,      769513,     692380,      77133,     569047,     123333,  16.993052,  31.400000,  36.200000,  44.600000,   9.656667,   0.575000,  57.622999, 652.479839
Outstanding requests per worker:
423 404 419 451 436 431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153827.6,      769139,     692830,      76309,     579042,     113788,  17.191478,  31.800000,  37.000000,  44.300000,   9.732504,   0.525000,  53.886998, 668.194121
Outstanding requests per worker:
478 434 449 410 465 461 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153872.0,      769361,     692677,      76684,     587114,     105563,  17.432034,  32.500000,  37.700000,  44.400000,   9.854109,   0.489000,  59.671000, 681.331255
Outstanding requests per worker:
431 438 438 422 459 434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153844.4,      769223,     691904,      77319,     593056,      98848,  17.506262,  32.400000,  37.700000,  45.600000,   9.944477,   0.563000,  57.707001, 691.544818
Outstanding requests per worker:
454 456 445 450 466 430 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  22:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:26   0:00 /usr/lib/linux
memcache      8  338  0.0 444096 152128 pts/0   Sl+  22:26   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18726721013      instructions:u                                              
        4818852796      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         511871191      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            165187      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.691054062 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1345188352
starting receive base loop
num_worker_connections 171
Creating worker on tid 4180931072
starting receive base loop
num_worker_connections 171
Creating worker on tid 2723279360
starting receive base loop
num_worker_connections 170
Creating worker on tid 1263006208
starting receive base loop
num_worker_connections 170
Creating worker on tid 4105761280
starting receive base loop
Created 1024 connections total
Creating worker on tid 2653549056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327221.325646,       0.0,      343239,     308546,      34693,     205578,     102968,  53.432993, 114.600000, 149.200000, 236.400000,  76.472571,   0.000000, 1463.433981, 482.067951
Outstanding requests per worker:
562 683 626 581 581 1353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158176.0,      790881,     711820,      79061,     537736,     174084,  19.990370,  36.100000,  42.700000,  51.400000,  19.302133,   0.675000, 1030.853987, 579.158088
Outstanding requests per worker:
524 513 537 499 510 514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.4,      789458,     710895,      78563,     568022,     142873,  19.809510,  36.100000,  43.400000,  51.600000,  11.163368,   0.601000,  65.954000, 627.756970
Outstanding requests per worker:
502 544 530 510 540 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.6,      789539,     710686,      78853,     584110,     126576,  20.169347,  36.400000,  44.400000,  52.900000,  11.374743,   0.737000,  76.015003, 653.529400
Outstanding requests per worker:
531 533 521 564 516 510 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.2,      789452,     710859,      78593,     594710,     116149,  20.400597,  36.800000,  44.900000,  53.400000,  11.503900,   0.783000,  71.122997, 669.549853
Outstanding requests per worker:
546 561 523 548 529 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157866.0,      789331,     710361,      78970,     602435,     107926,  20.577997,  37.200000,  45.400000,  53.500000,  11.590433,   0.819000,  80.112003, 682.082799
Outstanding requests per worker:
594 566 612 583 587 563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157960.2,      789802,     710349,      79453,     609394,     100955,  20.777931,  37.300000,  45.900000,  54.200000,  11.682982,   0.788000,  65.871999, 692.518090
Outstanding requests per worker:
525 557 529 530 531 560 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:27   0:00 /usr/lib/linux
memcache      7  339  0.0 447168 158720 pts/0   Sl+  22:27   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19305266189      instructions:u                                              
        4832605981      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         514035259      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            212434      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.600201650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 829485568
starting receive base loop
num_worker_connections 171
Creating worker on tid 3662803456
starting receive base loop
num_worker_connections 171
Creating worker on tid 2202530304
starting receive base loop
num_worker_connections 170
Creating worker on tid 742257152
starting receive base loop
num_worker_connections 170
Creating worker on tid 3585012224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2135421440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327263.325688,       0.0,      339289,     304827,      34462,     203059,     101768,  58.946267, 127.700000, 161.900000, 250.500000,  80.590919,   0.000000, 1499.135017, 482.102071
Outstanding requests per worker:
641 621 651 643 714 1359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158182.6,      790914,     711746,      79168,     539002,     172744,  20.940566,  37.700000,  45.200000,  53.100000,  19.840588,   0.795000, 1002.884030, 581.614840
Outstanding requests per worker:
555 543 535 548 559 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.2,      789502,     710555,      78947,     567613,     142942,  20.623361,  37.200000,  45.600000,  53.200000,  11.552671,   0.763000,  71.243003, 627.500163
Outstanding requests per worker:
576 540 527 563 538 592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157861.4,      789308,     710216,      79092,     583750,     126466,  20.969566,  37.600000,  46.500000,  54.200000,  11.767408,   0.777000,  86.387001, 653.108744
Outstanding requests per worker:
570 584 616 564 609 605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157943.2,      789717,     711058,      78659,     595001,     116057,  21.263315,  38.000000,  47.200000,  55.100000,  11.917299,   0.677000,  78.495003, 669.805687
Outstanding requests per worker:
547 571 569 529 607 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157909.0,      789546,     710631,      78915,     603830,     106801,  21.393742,  38.300000,  47.400000,  55.100000,  11.954444,   0.411000,  87.033004, 683.590872
Outstanding requests per worker:
534 570 554 586 534 562 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157857.4,      789288,     710567,      78721,     609876,     100691,  21.539764,  38.300000,  47.900000,  55.700000,  12.028874,   0.819000,  87.113000, 693.298702
Outstanding requests per worker:
597 614 637 580 554 597 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:28   0:00 /usr/lib/linux
memcache      7  348  0.0 448192 163136 pts/0   Sl+  22:28   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19338100696      instructions:u                                              
        5081191871      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         526126292      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            227534      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.260747341 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1381364224
starting receive base loop
num_worker_connections 171
Creating worker on tid 4215796224
starting receive base loop
num_worker_connections 171
Creating worker on tid 2755523072
starting receive base loop
num_worker_connections 170
Creating worker on tid 1295249920
starting receive base loop
num_worker_connections 170
Creating worker on tid 4140626432
starting receive base loop
Created 1024 connections total
Creating worker on tid 2688414208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327305.325730,       0.0,      341791,     307648,      34143,     204715,     102933,  77.562322, 151.700000, 185.100000, 667.500000, 110.676824,   0.000000, 1513.623953, 480.747913
Outstanding requests per worker:
1363 1352 1419 1429 1327 3717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163521.2,      817607,     735919,      81688,     557775,     178144,  28.375190,  49.000000,  57.600000, 122.800000,  41.375800,   0.837000, 1265.697002, 582.813701
Outstanding requests per worker:
659 597 636 646 676 661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162195.8,      810980,     729888,      81092,     584863,     145025,  23.006912,  39.400000,  50.400000,  59.500000,  12.534199,   0.916000,  98.778002, 630.268529
Outstanding requests per worker:
625 606 587 639 655 677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.2,      810792,     729580,      81212,     600923,     128657,  23.459110,  39.900000,  51.500000,  61.000000,  12.774431,   0.655000, 100.110002, 655.384894
Outstanding requests per worker:
667 636 642 625 604 670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.4,      810808,     730110,      80698,     612190,     117920,  23.634261,  40.300000,  52.000000,  61.500000,  12.930401,   0.733000, 107.175000, 671.746229
Outstanding requests per worker:
643 635 640 665 674 643 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.4,      810818,     729708,      81110,     620775,     108933,  23.917002,  40.700000,  52.200000,  62.500000,  13.036621,   0.943000, 104.914002, 684.851438
Outstanding requests per worker:
652 649 668 687 641 673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162170.4,      810853,     729366,      81487,     627023,     102343,  24.320840,  41.500000,  52.900000,  64.100000,  13.346490,   0.879000, 137.839004, 694.659600
Outstanding requests per worker:
694 673 689 656 664 642 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:28   0:00 /usr/lib/linux
memcache      7  330  0.0 514176 171456 pts/0   Sl+  22:28   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19901960333      instructions:u                                              
        4798959159      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         544381763      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            309680      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.591174368 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1062334976
starting receive base loop
num_worker_connections 171
Creating worker on tid 3896373760
starting receive base loop
num_worker_connections 171
Creating worker on tid 2436100608
starting receive base loop
num_worker_connections 170
Creating worker on tid 978448896
starting receive base loop
num_worker_connections 170
Creating worker on tid 3821203968
starting receive base loop
Created 1024 connections total
Creating worker on tid 2368991744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327348.325773,       0.0,      346344,     311628,      34716,     207020,     104608,  70.673941, 151.900000, 186.800000, 389.700000,  87.192085,   0.000000, 1446.495056, 479.863250
Outstanding requests per worker:
1175 1073 1235 1143 1160 1920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163018.8,      815095,     733637,      81458,     555749,     177888,  23.685883,  42.900000,  50.800000,  81.600000,  19.938694,   0.840000, 789.460003, 582.277842
Outstanding requests per worker:
565 639 569 574 589 586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162146.8,      810735,     730053,      80682,     584234,     145819,  22.053048,  38.500000,  48.200000,  57.400000,  12.124011,   0.816000,  77.766001, 629.458879
Outstanding requests per worker:
614 598 592 617 641 588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162182.0,      810911,     729916,      80995,     601266,     128650,  22.471370,  38.900000,  49.300000,  58.600000,  12.355485,   0.761000,  87.352999, 654.589702
Outstanding requests per worker:
590 597 609 607 622 591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.4,      810738,     729572,      81166,     612204,     117368,  22.720773,  39.300000,  49.700000,  59.600000,  12.524018,   1.053000, 114.266001, 672.075964
Outstanding requests per worker:
658 611 638 574 662 623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162181.6,      810909,     729479,      81430,     619873,     109606,  22.948899,  39.500000,  50.200000,  59.800000,  12.588999,   0.840000,  98.587997, 684.085006
Outstanding requests per worker:
598 620 645 646 644 611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162179.0,      810896,     729798,      81098,     626774,     103024,  23.229912,  40.100000,  50.800000,  60.800000,  12.779404,   0.880000, 103.889003, 693.804613
Outstanding requests per worker:
635 582 619 662 587 635 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:29   0:00 /usr/lib/linux
memcache      7  330  0.0 449216 166976 pts/0   Sl+  22:29   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19887542630      instructions:u                                              
        4684744211      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         523036955      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            268187      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.840702980 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 851767808
starting receive base loop
num_worker_connections 171
Creating worker on tid 3686986240
starting receive base loop
num_worker_connections 171
Creating worker on tid 2226713088
starting receive base loop
num_worker_connections 170
Creating worker on tid 766439936
starting receive base loop
num_worker_connections 170
Creating worker on tid 3611816448
starting receive base loop
Created 1024 connections total
Creating worker on tid 2159604224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327391.325816,       0.0,      344462,     309919,      34543,     207346,     102573,  76.188570, 161.400000, 193.900000, 370.600000,  92.749272,   0.000000, 1572.463989, 484.985374
Outstanding requests per worker:
1475 1424 1493 1439 1528 2581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163421.6,      817109,     735943,      81166,     556958,     178985,  27.483215,  49.200000,  59.500000, 129.200000,  30.210732,   0.942000, 1068.428040, 581.506739
Outstanding requests per worker:
613 600 629 638 626 616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.0,      810736,     730097,      80639,     583438,     146659,  23.013751,  39.800000,  50.300000,  60.800000,  12.780979,   0.966000, 112.512998, 628.415220
Outstanding requests per worker:
676 656 642 659 612 598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.0,      810876,     729813,      81063,     600789,     129024,  23.541510,  40.700000,  51.400000,  62.100000,  13.040489,   0.986000, 110.117003, 654.891320
Outstanding requests per worker:
612 639 633 671 683 580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.0,      810811,     730111,      80700,     612358,     117753,  24.615171,  44.000000,  52.500000,  69.400000,  14.166989,   0.836000, 148.594007, 671.239538
Outstanding requests per worker:
628 655 678 655 625 640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162160.6,      810804,     729643,      81161,     620332,     109311,  24.798017,  44.200000,  52.900000,  69.200000,  14.201294,   0.768000, 157.778993, 684.359361
Outstanding requests per worker:
676 661 661 693 619 656 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162116.8,      810585,     729515,      81070,     626571,     102944,  24.984606,  44.500000,  53.500000,  69.800000,  14.349504,   0.809000, 157.786995, 693.413634
Outstanding requests per worker:
684 721 675 762 685 728 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  22:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:30   0:00 /usr/lib/linux
memcache      7  339  0.0 449216 168128 pts/0   Sl+  22:30   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19844674517      instructions:u                                              
        4937062631      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         543097050      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            308903      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.779521700 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 778039808
starting receive base loop
num_worker_connections 171
Creating worker on tid 3611816448
starting receive base loop
num_worker_connections 171
Creating worker on tid 2151543296
starting receive base loop
num_worker_connections 170
Creating worker on tid 691270144
starting receive base loop
num_worker_connections 170
Creating worker on tid 3536646656
starting receive base loop
Created 1024 connections total
Creating worker on tid 2084434432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327433.325858,       0.0,      347661,     312863,      34798,     208780,     104083,  94.198625, 182.500000, 221.600000, 700.700000, 128.864765,   0.000000, 1848.196030, 482.885148
Outstanding requests per worker:
2273 2384 2375 2535 2548 6416 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169343.4,      846718,     762515,      84203,     577260,     185255,  55.478063, 109.200000, 138.400000, 317.300000,  88.965289,   1.204000, 1687.304020, 581.623542
Outstanding requests per worker:
843 887 872 834 841 939 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166701.4,      833508,     750190,      83318,     600758,     149432,  30.306278,  55.100000,  62.800000,  98.100000,  18.195727,   1.035000, 192.249000, 629.871876
Outstanding requests per worker:
825 829 884 821 842 907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166594.0,      832971,     749660,      83311,     618099,     131561,  31.774903,  57.100000,  65.900000, 103.100000,  19.175088,   1.265000, 197.862998, 656.426012
Outstanding requests per worker:
924 914 918 917 929 959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166618.0,      833091,     749921,      83170,     629907,     120014,  34.037581,  60.300000,  70.800000, 111.500000,  20.804120,   1.385000, 212.355003, 673.365385
Outstanding requests per worker:
952 959 1008 970 1009 989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166675.8,      833380,     749553,      83827,     638535,     111018,  35.040856,  61.400000,  71.800000, 114.600000,  21.576734,   1.218000, 200.826004, 685.680870
Outstanding requests per worker:
941 1042 946 934 1013 1013 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165034.0,      825171,     742412,      82759,     638526,     103886,  43.402095,  86.400000, 120.000000, 164.500000,  33.238682,   1.184000, 277.325004, 694.674279
Outstanding requests per worker:
2320 2384 2297 2342 2369 2397 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:30   0:00 /usr/lib/linux
memcache      7  347  0.0 516224 170816 pts/0   Sl+  22:30   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20633798667      instructions:u                                              
        4655294904      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         521531594      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            552214      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.330525101 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1444999680
starting receive base loop
num_worker_connections 171
Creating worker on tid 4282905088
starting receive base loop
num_worker_connections 171
Creating worker on tid 2822631936
starting receive base loop
num_worker_connections 170
Creating worker on tid 1362358784
starting receive base loop
num_worker_connections 170
Creating worker on tid 4207735296
starting receive base loop
Created 1024 connections total
Creating worker on tid 2755523072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327475.325900,       0.0,      337023,     303230,      33793,     201515,     101715,  98.413951, 189.100000, 230.000000, 748.400000, 134.896571,   0.000000, 1953.652978, 479.842558
Outstanding requests per worker:
2439 2506 2542 2592 2510 7041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169574.4,      847873,     763242,      84631,     578072,     185170,  59.449689, 121.800000, 152.300000, 331.400000,  91.069234,   1.380000, 1903.597951, 582.535210
Outstanding requests per worker:
866 867 920 852 826 844 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166670.4,      833353,     750115,      83238,     601437,     148678,  31.065829,  56.200000,  64.400000, 100.400000,  18.509136,   1.091000, 190.406993, 631.153406
Outstanding requests per worker:
867 861 892 880 830 888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166599.6,      832999,     749637,      83362,     618087,     131550,  32.542363,  59.300000,  67.800000, 111.400000,  20.157716,   1.457000, 209.400997, 656.209681
Outstanding requests per worker:
941 884 929 1013 895 927 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166556.4,      832783,     749746,      83037,     629808,     119938,  34.948604,  62.000000,  72.600000, 115.700000,  21.305092,   1.452000, 213.852003, 672.765798
Outstanding requests per worker:
1074 1078 1008 1022 1011 1022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166532.2,      832662,     749405,      83257,     637145,     112260,  40.548904,  67.600000,  88.400000, 124.400000,  23.800660,   1.282000, 215.710998, 684.756884
Outstanding requests per worker:
1193 1166 1305 1113 1177 1012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165038.4,      825193,     742196,      82997,     638940,     103256,  48.112094,  94.800000, 124.800000, 167.500000,  34.213188,   1.120000, 315.297008, 695.731747
Outstanding requests per worker:
2668 2498 2504 2499 2602 2443 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:31   0:00 /usr/lib/linux
memcache      7  347  0.0 517248 174848 pts/0   Sl+  22:31   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20507404722      instructions:u                                              
        4851523108      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         528203818      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            583901      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.291123860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1333064192
starting receive base loop
num_worker_connections 171
Creating worker on tid 4172870144
starting receive base loop
num_worker_connections 171
Creating worker on tid 2712596992
starting receive base loop
num_worker_connections 170
Creating worker on tid 1254945280
starting receive base loop
num_worker_connections 170
Creating worker on tid 4097700352
starting receive base loop
Created 1024 connections total
Creating worker on tid 2645488128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327518.325943,       0.0,      341617,     307353,      34264,     204289,     103064,  90.871403, 175.400000, 265.500000, 1119.600000, 188.084237,   0.000000, 1965.770006, 479.685498
Outstanding requests per worker:
1922 1834 1984 1877 1955 21765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173265.2,      866327,     779488,      86839,     591847,     187641, 174.450814, 204.900000, 713.300000, 1969.800000, 334.107243,   3.307000, 2847.198963, 584.037472
Outstanding requests per worker:
2910 2904 2878 2992 3058 7478 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172603.8,      863020,     777011,      86009,     624231,     152780, 109.112038, 205.700000, 258.900000, 752.600000, 131.161195,   3.342000, 1847.391009, 632.328612
Outstanding requests per worker:
2437 2520 2690 2574 2750 3455 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171608.4,      858043,     772787,      85256,     638192,     134595,  92.864387, 217.800000, 262.400000, 358.700000,  87.812938,   2.224000, 1298.827052, 657.493946
Outstanding requests per worker:
2580 2548 2510 2585 2634 2763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171316.8,      856585,     770931,      85654,     648674,     122257,  93.103595, 229.400000, 272.700000, 352.700000,  82.779381,   2.911000, 585.003018, 675.015529
Outstanding requests per worker:
2632 2694 2622 2680 2844 2762 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171221.4,      856108,     770898,      85210,     657598,     113300,  96.700551, 242.900000, 288.500000, 378.700000,  89.123909,   2.926000, 646.282971, 687.413590
Outstanding requests per worker:
2825 2925 2914 2790 2938 2939 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170727.4,      853638,     768482,      85156,     662244,     106238, 108.272854, 262.200000, 303.200000, 389.000000,  94.622700,   3.342000, 629.921973, 696.745315
Outstanding requests per worker:
3423 3414 3543 3475 3496 3572 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:32   0:00 /usr/lib/linux
memcache      7  338  0.0 521344 180608 pts/0   Sl+  22:32   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21258791541      instructions:u                                              
        4690166143      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         554081343      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2255024      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.620477240 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1712058880
starting receive base loop
num_worker_connections 171
Creating worker on tid 256373248
starting receive base loop
num_worker_connections 171
Creating worker on tid 3091067392
starting receive base loop
num_worker_connections 170
Creating worker on tid 1630794240
starting receive base loop
num_worker_connections 170
Creating worker on tid 181203456
starting receive base loop
Created 1024 connections total
Creating worker on tid 3023958528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327559.325984,       0.0,      344325,     309932,      34393,     206118,     103814, 110.931888, 194.600000, 239.600000, 1001.100000, 158.819976,   0.000000, 1990.561008, 481.151527
Outstanding requests per worker:
3365 3128 3157 2996 3127 12223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173202.4,      866013,     779228,      86785,     591450,     187778, 141.104580, 206.300000, 263.500000, 1068.900000, 166.946841,   3.704000, 2129.694939, 583.617827
Outstanding requests per worker:
2999 3120 2949 3069 3108 3931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172081.6,      860409,     775193,      85216,     622001,     153192,  98.808670, 170.200000, 194.700000, 261.500000,  61.075029,   2.965000, 971.835017, 631.458257
Outstanding requests per worker:
2728 2604 2720 2577 2683 2647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171311.8,      856560,     770685,      85875,     636680,     134005,  94.381999, 181.300000, 220.100000, 284.400000,  64.378134,   3.024000, 598.013997, 657.396696
Outstanding requests per worker:
2661 2761 2721 2811 2825 2807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171064.2,      855322,     770083,      85239,     648156,     121927, 100.520950, 244.600000, 290.900000, 383.600000,  89.464234,   3.176000, 753.040016, 674.434318
Outstanding requests per worker:
3118 3057 3073 2933 3320 2950 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170935.6,      854679,     769566,      85113,     656395,     113171, 114.206827, 281.800000, 332.700000, 422.200000, 103.418665,   2.961000, 767.081976, 686.965613
Outstanding requests per worker:
3559 3524 3421 3249 3670 3576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169482.4,      847413,     762413,      85000,     656630,     105783, 142.164013, 309.300000, 372.400000, 471.900000, 109.420613,   2.728000, 733.090997, 696.065775
Outstanding requests per worker:
5033 5128 5124 4978 5265 5309 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:32   0:00 /usr/lib/linux
memcache      7  347  0.0 521344 177856 pts/0   Sl+  22:32   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21330166628      instructions:u                                              
        4732826638      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         553938883      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2471142      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.271019318 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 749728256
starting receive base loop
num_worker_connections 171
Creating worker on tid 3585012224
starting receive base loop
num_worker_connections 171
Creating worker on tid 2127360512
starting receive base loop
num_worker_connections 170
Creating worker on tid 667087360
starting receive base loop
num_worker_connections 170
Creating worker on tid 3509842432
starting receive base loop
Created 1024 connections total
Creating worker on tid 2060251648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327602.326027,       0.0,      353388,     318051,      35337,     212020,     106031, 112.288953, 200.600000, 249.300000, 1055.700000, 171.092404,   0.000000, 1969.053984, 482.336845
Outstanding requests per worker:
3570 3460 3548 3602 3583 20828 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173498.2,      867492,     780583,      86909,     593751,     186832, 270.585418, 342.400000, 766.000000, 2202.100000, 367.159110,   3.763000, 3612.915039, 585.654248
Outstanding requests per worker:
6997 7075 7162 6881 7182 18222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174716.6,      873584,     786290,      87294,     632684,     153606, 330.449592, 438.000000, 548.200000, 2315.000000, 324.159575,   6.857000, 3478.156090, 633.962962
Outstanding requests per worker:
9009 8983 9084 8818 9105 17390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175031.2,      875157,     787424,      87733,     651363,     136061, 374.705066, 530.000000, 652.200000, 1954.100000, 309.390966,  12.736000, 3465.231895, 658.936931
Outstanding requests per worker:
10057 10663 10345 10279 10780 17529 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175023.2,      875117,     787186,      87931,     663377,     123809, 414.501545, 623.700000, 773.300000, 2069.300000, 325.400531,  10.938000, 3481.244087, 675.712054
Outstanding requests per worker:
11512 11623 11932 11366 12122 18394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174867.8,      874340,     786714,      87626,     671503,     115211, 457.071285, 735.400000, 929.200000, 2260.800000, 351.419348,  39.903998, 3742.440939, 687.514792
Outstanding requests per worker:
12727 13050 13137 12972 13396 19753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174437.6,      872189,     784374,      87815,     676916,     107458, 509.814600, 871.900000, 1106.500000, 2509.300000, 380.403092,  26.086999, 3913.245916, 698.262960
Outstanding requests per worker:
14709 14542 15033 14433 15367 21202 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:33   0:00 /usr/lib/linux
memcache      7  348  0.0 522368 194752 pts/0   Sl+  22:33   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21902360015      instructions:u                                              
        4765035406      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         585696120      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           7437209      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.189946466 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1524036096
starting receive base loop
num_worker_connections 171
Creating worker on tid 63107584
starting receive base loop
num_worker_connections 171
Creating worker on tid 2897801728
starting receive base loop
num_worker_connections 170
Creating worker on tid 1437528576
starting receive base loop
num_worker_connections 170
Creating worker on tid 4282905088
starting receive base loop
Created 1024 connections total
Creating worker on tid 2830692864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327644.326069,       0.0,      347022,     312172,      34850,     208299,     103873, 103.902386, 178.300000, 234.500000, 1129.900000, 176.078021,   0.000000, 1968.145013, 482.813523
Outstanding requests per worker:
2765 2861 2825 2930 2827 24360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173267.0,      866336,     779528,      86808,     591599,     187929, 282.036875, 360.100000, 1133.800000, 2299.500000, 396.352212,   4.483000, 3282.521009, 583.355348
Outstanding requests per worker:
6957 6894 7003 7188 7005 19609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174888.8,      874445,     787207,      87238,     632709,     154498, 338.896749, 436.900000, 666.600000, 1931.800000, 296.105929,   9.441000, 3049.918890, 633.344280
Outstanding requests per worker:
8868 8909 8810 9018 9371 17653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175560.0,      877801,     789950,      87851,     652977,     136973, 370.211090, 499.300000, 610.300000, 1787.100000, 246.437517,  12.045000, 2867.983103, 658.534112
Outstanding requests per worker:
9813 10087 10152 10117 10489 16588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175494.6,      877474,     789558,      87916,     664849,     124709, 394.420429, 560.300000, 661.900000, 1554.500000, 224.521581,  24.367001, 2945.028067, 675.101937
Outstanding requests per worker:
10940 10949 10960 11266 11776 16320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175289.8,      876450,     788632,      87818,     672978,     115654, 425.051667, 619.400000, 728.000000, 1314.500000, 213.836244,  29.536000, 2820.476055, 688.097856
Outstanding requests per worker:
12158 12108 12077 12515 12981 16339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174485.4,      872428,     785003,      87425,     676991,     108012, 468.326930, 688.000000, 814.200000, 1246.200000, 210.739711,  21.268999, 2545.131922, 698.313008
Outstanding requests per worker:
13856 13965 13755 13918 14917 17748 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:34   0:00 /usr/lib/linux
memcache      7  348  0.0 522368 195200 pts/0   Sl+  22:34   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21882107941      instructions:u                                              
        4610069222      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         561327041      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           7401340      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.371578063 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 811790848
starting receive base loop
num_worker_connections 171
Creating worker on tid 3652121088
starting receive base loop
num_worker_connections 171
Creating worker on tid 2194469376
starting receive base loop
num_worker_connections 170
Creating worker on tid 734196224
starting receive base loop
num_worker_connections 170
Creating worker on tid 3576951296
starting receive base loop
Created 1024 connections total
Creating worker on tid 2127360512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327686.326111,       0.0,      347590,     312757,      34833,     208332,     104425, 118.855042, 221.400000, 265.200000, 1023.800000, 165.592234,   0.000000, 1975.447059, 481.874500
Outstanding requests per worker:
3672 3748 3894 3870 3965 20975 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172936.6,      864684,     778026,      86658,     590892,     187134, 292.197835, 394.200000, 851.600000, 2078.700000, 344.884956,   4.329000, 3140.886068, 583.369449
Outstanding requests per worker:
7924 7970 7773 7765 7969 18468 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174351.0,      871756,     785265,      86491,     631198,     154067, 360.761910, 492.900000, 626.300000, 1827.200000, 274.729834,   7.027000, 2643.239975, 632.761911
Outstanding requests per worker:
10198 9943 9962 10044 10522 17888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174837.8,      874190,     786777,      87413,     650907,     135870, 411.511401, 586.200000, 718.200000, 1708.100000, 253.616747,   8.336000, 2640.908957, 658.263855
Outstanding requests per worker:
11664 11054 11743 11760 12298 18308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174338.8,      871695,     784506,      87189,     660718,     123788, 462.879700, 684.700000, 854.100000, 1650.600000, 248.297294,  27.150000, 2736.891985, 675.289191
Outstanding requests per worker:
13084 13128 13761 14011 14277 19275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174811.2,      874057,     785969,      88088,     670463,     115506, 518.521340, 792.300000, 952.300000, 1637.600000, 257.280267,  41.026000, 2944.715023, 687.179480
Outstanding requests per worker:
14897 15100 14825 15127 16051 19900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173617.4,      868088,     781131,      86957,     673450,     107681, 580.052658, 908.600000, 1065.100000, 1738.200000, 279.463287,  20.392001, 3285.336018, 697.281537
Outstanding requests per worker:
17432 17080 16957 17521 18944 22322 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:35   0:00 /usr/lib/linux
memcache      7  339  0.0 522368 193728 pts/0   Sl+  22:35   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21862022943      instructions:u                                              
        4736998237      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         565888886      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6935154      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.322267333 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1127543296
starting receive base loop
num_worker_connections 128
Creating worker on tid 15135232
starting receive base loop
num_worker_connections 128
Creating worker on tid 3201495552
starting receive base loop
num_worker_connections 128
Creating worker on tid 2087449088
starting receive base loop
num_worker_connections 128
Creating worker on tid 978842112
starting receive base loop
num_worker_connections 128
Creating worker on tid 4159762944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3051155968
starting receive base loop
Created 1024 connections total
Creating worker on tid 1937109504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327729.326154,       0.0,      391551,     352201,      39350,     236609,     115592,  19.969858,  48.800000,  60.900000,  99.200000,  21.669647,   0.000000, 293.711990, 487.520325
Outstanding requests per worker:
302 285 249 282 290 241 285 271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150938.8,      754695,     679159,      75536,     515961,     163198,  14.848616,  28.700000,  33.200000,  41.000000,   9.380865,   0.281000,  58.965001, 583.911142
Outstanding requests per worker:
277 301 301 304 281 286 287 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.8,      754675,     679631,      75044,     542595,     137036,  15.382305,  29.900000,  34.700000,  42.300000,   9.716012,   0.245000,  52.400999, 626.914062
Outstanding requests per worker:
281 318 339 291 282 293 259 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150944.0,      754721,     678825,      75896,     557552,     121273,  15.915276,  30.800000,  36.100000,  44.700000,  10.110107,   0.294000,  75.694002, 652.545861
Outstanding requests per worker:
307 281 284 317 318 314 273 343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150949.6,      754749,     679590,      75159,     568617,     110973,  16.225797,  31.200000,  36.800000,  46.000000,  10.353311,   0.305000,  59.392001, 670.269111
Outstanding requests per worker:
322 284 313 309 328 297 286 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150935.2,      754677,     678949,      75728,     575768,     103181,  16.463651,  31.600000,  37.500000,  46.900000,  10.509057,   0.327000,  61.593000, 681.456983
Outstanding requests per worker:
284 331 330 323 277 339 347 297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150964.0,      754821,     678932,      75889,     581662,      97270,  16.630883,  32.000000,  37.900000,  46.600000,  10.575402,   0.279000,  78.299999, 691.314737
Outstanding requests per worker:
312 278 319 333 295 309 334 306 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:35   0:00 /usr/lib/linux
memcache      7  336  0.0 444096 154624 pts/0   Sl+  22:35   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18644626346      instructions:u                                              
        5031601595      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         528240717      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            130595      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.300952987 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1312944640
starting receive base loop
num_worker_connections 128
Creating worker on tid 200339968
starting receive base loop
num_worker_connections 128
Creating worker on tid 3386700288
starting receive base loop
num_worker_connections 128
Creating worker on tid 2272653824
starting receive base loop
num_worker_connections 128
Creating worker on tid 1164046848
starting receive base loop
num_worker_connections 128
Creating worker on tid 50000384
starting receive base loop
num_worker_connections 128
Creating worker on tid 3236360704
starting receive base loop
Created 1024 connections total
Creating worker on tid 2127753728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327771.326196,       0.0,      356148,     320476,      35672,     214438,     106038,  35.734191,  77.100000, 108.000000, 181.000000,  46.113655,   0.000000, 975.925982, 485.338088
Outstanding requests per worker:
335 317 337 293 337 338 334 318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.8,      769305,     692479,      76826,     524354,     168125,  16.670106,  32.200000,  38.200000,  46.100000,  10.547258,   0.276000,  81.381001, 581.619126
Outstanding requests per worker:
343 310 345 337 304 352 316 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153853.2,      769267,     692465,      76802,     552984,     139481,  17.162324,  33.000000,  39.600000,  47.600000,  10.866894,   0.286000,  58.214001, 627.698544
Outstanding requests per worker:
329 320 323 367 325 354 304 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.2,      769217,     692080,      77137,     568765,     123315,  17.677775,  33.800000,  40.900000,  49.300000,  11.216366,   0.265000,  61.294999, 653.345953
Outstanding requests per worker:
309 347 351 390 374 331 299 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.8,      769285,     692633,      76652,     579722,     112911,  17.889839,  34.100000,  41.400000,  49.900000,  11.330333,   0.357000,  70.860997, 669.880534
Outstanding requests per worker:
316 339 338 327 375 368 345 333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153806.4,      769033,     692266,      76767,     587098,     105168,  18.022167,  34.200000,  41.700000,  50.700000,  11.461670,   0.337000,  63.537002, 681.807814
Outstanding requests per worker:
380 387 345 389 374 374 406 362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153911.8,      769560,     692825,      76735,     594263,      98562,  18.250885,  34.800000,  42.500000,  50.500000,  11.571421,   0.331000,  75.274996, 692.466636
Outstanding requests per worker:
330 328 374 354 339 354 318 385 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:36   0:00 /usr/lib/linux
memcache      7  350  0.0 447168 161216 pts/0   Sl+  22:36   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18907827130      instructions:u                                              
        4800853834      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         512938226      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            168251      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.250320570 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1258615296
starting receive base loop
num_worker_connections 128
Creating worker on tid 149352960
starting receive base loop
num_worker_connections 128
Creating worker on tid 3335713280
starting receive base loop
num_worker_connections 128
Creating worker on tid 2221666816
starting receive base loop
num_worker_connections 128
Creating worker on tid 1113059840
starting receive base loop
num_worker_connections 128
Creating worker on tid 4293980672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3185373696
starting receive base loop
Created 1024 connections total
Creating worker on tid 2071327232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327814.326239,       0.0,      360837,     324504,      36333,     215996,     108508,  52.384235, 105.800000, 148.600000, 464.700000,  88.286658,   0.000000, 1406.648993, 481.457883
Outstanding requests per worker:
619 601 677 590 633 634 606 1308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157390.0,      786951,     708444,      78507,     536792,     171652,  20.959784,  40.000000,  48.500000,  62.500000,  17.627310,   0.338000, 846.364021, 582.583229
Outstanding requests per worker:
407 370 448 400 402 378 325 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156842.8,      784215,     706138,      78077,     565039,     141099,  19.996709,  36.900000,  47.100000,  55.900000,  12.659307,   0.302000, 100.624003, 628.687085
Outstanding requests per worker:
464 390 407 397 389 401 409 398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156889.0,      784446,     705888,      78558,     580291,     125597,  20.371716,  37.200000,  47.800000,  57.100000,  12.849278,   0.351000,  94.617002, 653.538319
Outstanding requests per worker:
411 378 443 391 416 407 385 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156879.8,      784400,     705915,      78485,     591523,     114392,  20.572934,  37.500000,  48.300000,  58.400000,  13.060618,   0.406000,  91.571003, 670.633062
Outstanding requests per worker:
377 413 387 405 393 356 450 406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156866.2,      784332,     705999,      78333,     599198,     106801,  20.808931,  37.900000,  48.700000,  58.700000,  13.192671,   0.380000, 111.248001, 682.529101
Outstanding requests per worker:
395 439 392 377 409 370 393 445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156853.4,      784268,     705409,      78859,     604965,     100444,  20.897273,  37.800000,  49.400000,  58.900000,  13.223895,   0.350000,  94.625004, 692.315468
Outstanding requests per worker:
390 449 397 438 441 429 362 428 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:37   0:00 /usr/lib/linux
memcache      7  341  0.0 447168 163072 pts/0   Sl+  22:37   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19315138977      instructions:u                                              
        4925196404      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         534510001      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            211966      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.540331725 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1127870976
starting receive base loop
num_worker_connections 128
Creating worker on tid 15135232
starting receive base loop
num_worker_connections 128
Creating worker on tid 3201495552
starting receive base loop
num_worker_connections 128
Creating worker on tid 2087449088
starting receive base loop
num_worker_connections 128
Creating worker on tid 978842112
starting receive base loop
num_worker_connections 128
Creating worker on tid 4159762944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3051155968
starting receive base loop
Created 1024 connections total
Creating worker on tid 1937109504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327856.326281,       0.0,      359227,     323259,      35968,     215911,     107348,  49.998777, 103.100000, 144.100000, 388.300000,  75.689937,   0.000000, 1205.911994, 483.482353
Outstanding requests per worker:
508 538 455 598 532 529 531 1136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157222.4,      786113,     707021,      79092,     535596,     171425,  20.643503,  39.300000,  47.600000,  61.200000,  17.647305,   0.292000, 754.803002, 581.913257
Outstanding requests per worker:
366 437 358 384 352 405 398 375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156845.4,      784228,     706297,      77931,     564781,     141516,  19.949388,  36.800000,  46.600000,  56.300000,  12.643961,   0.326000,  95.583998, 628.538977
Outstanding requests per worker:
415 366 394 428 381 404 380 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156875.6,      784379,     706178,      78201,     580707,     125471,  20.291791,  37.000000,  47.700000,  57.100000,  12.826907,   0.333000,  93.304999, 653.784794
Outstanding requests per worker:
371 430 416 354 383 430 419 424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156886.2,      784432,     706415,      78017,     591915,     114500,  20.524872,  37.300000,  48.200000,  57.600000,  12.965960,   0.329000,  95.599003, 670.952532
Outstanding requests per worker:
387 410 349 444 422 367 410 413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156859.2,      784297,     705915,      78382,     599207,     106708,  20.720938,  37.400000,  48.800000,  58.700000,  13.119000,   0.362000,  94.818003, 682.997473
Outstanding requests per worker:
402 367 420 397 426 414 419 409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156864.4,      784323,     705580,      78743,     604956,     100624,  20.951149,  38.100000,  49.000000,  59.700000,  13.328372,   0.350000, 103.863001, 692.768066
Outstanding requests per worker:
407 441 403 405 427 389 396 437 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  22:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:37   0:00 /usr/lib/linux
memcache      7  341  0.0 447168 160640 pts/0   Sl+  22:37   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19218960417      instructions:u                                              
        4946610444      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         514770749      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            219050      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.540428919 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1153888768
starting receive base loop
num_worker_connections 128
Creating worker on tid 39318016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3220238848
starting receive base loop
num_worker_connections 128
Creating worker on tid 2111631872
starting receive base loop
num_worker_connections 128
Creating worker on tid 997585408
starting receive base loop
num_worker_connections 128
Creating worker on tid 4183945728
starting receive base loop
num_worker_connections 128
Creating worker on tid 3069899264
starting receive base loop
Created 1024 connections total
Creating worker on tid 1961292288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327898.326323,       0.0,      362595,     325891,      36704,     217674,     108217,  68.035946, 150.900000, 185.000000, 508.600000, 107.159029,   0.000000, 1773.107052, 483.497912
Outstanding requests per worker:
1280 1210 1398 1361 1332 1416 1247 3269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161725.4,      808628,     728164,      80464,     552452,     175712,  37.661426,  73.900000, 112.900000, 170.600000,  55.183703,   0.423000, 1612.691998, 583.407308
Outstanding requests per worker:
492 493 499 480 453 485 526 521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159962.2,      799812,     720067,      79745,     577310,     142757,  25.432207,  50.900000,  58.000000,  91.500000,  18.077939,   0.378000, 185.123995, 631.000018
Outstanding requests per worker:
501 560 540 561 520 456 519 555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159976.8,      799885,     720153,      79732,     592599,     127554,  26.470001,  53.300000,  61.100000, 101.400000,  19.552732,   0.372000, 201.574996, 654.356402
Outstanding requests per worker:
551 542 580 515 537 546 580 541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159994.8,      799975,     720241,      79734,     603823,     116418,  27.349439,  55.500000,  63.600000, 107.500000,  20.556327,   0.375000, 205.363005, 671.096214
Outstanding requests per worker:
538 546 519 559 517 579 602 605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159966.0,      799831,     719885,      79946,     611853,     108032,  28.547871,  57.500000,  66.800000, 119.200000,  22.447182,   0.378000, 233.991995, 684.098359
Outstanding requests per worker:
556 639 575 592 594 607 585 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160038.4,      800193,     720050,      80143,     619130,     100920,  28.178799,  56.900000,  65.400000, 112.900000,  21.398751,   0.419000, 220.859006, 694.297938
Outstanding requests per worker:
563 557 542 549 581 580 564 638 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:38   0:00 /usr/lib/linux
memcache      7  341  0.0 449216 171072 pts/0   Sl+  22:38   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19748274622      instructions:u                                              
        4900272703      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         526840732      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            378663      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.551068677 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1210905088
starting receive base loop
num_worker_connections 128
Creating worker on tid 98365952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3279286784
starting receive base loop
num_worker_connections 128
Creating worker on tid 2170679808
starting receive base loop
num_worker_connections 128
Creating worker on tid 1056633344
starting receive base loop
num_worker_connections 128
Creating worker on tid 4242993664
starting receive base loop
num_worker_connections 128
Creating worker on tid 3134386688
starting receive base loop
Created 1024 connections total
Creating worker on tid 2020340224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327940.326365,       0.0,      357372,     321365,      36007,     214643,     106722,  69.352147, 153.500000, 189.300000, 489.800000, 109.085686,   0.000000, 1949.669957, 483.389053
Outstanding requests per worker:
1295 1253 1417 1295 1432 1243 1308 4012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161871.4,      809358,     728567,      80791,     552483,     176084,  42.780929,  87.700000, 125.700000, 186.900000,  76.298890,   0.391000, 1849.926949, 583.120390
Outstanding requests per worker:
476 493 466 513 508 555 504 485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159958.8,      799795,     720049,      79746,     577548,     142501,  26.089227,  52.300000,  59.800000,  96.300000,  18.839161,   0.359000, 194.486007, 631.067688
Outstanding requests per worker:
543 508 528 512 510 583 497 577 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160036.2,      800182,     720202,      79980,     592437,     127765,  26.562971,  53.200000,  60.900000,  98.000000,  19.186937,   0.281000, 196.073994, 654.157943
Outstanding requests per worker:
549 541 519 514 480 522 494 516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159965.8,      799830,     719788,      80042,     604315,     115473,  27.767135,  56.100000,  64.700000, 109.900000,  21.026741,   0.368000, 218.507007, 672.458578
Outstanding requests per worker:
530 574 601 511 472 558 591 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159932.8,      799665,     719712,      79953,     611838,     107874,  28.527813,  57.500000,  66.200000, 114.000000,  21.638165,   0.389000, 215.041995, 683.922177
Outstanding requests per worker:
641 593 632 620 601 590 536 611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159965.6,      799829,     720050,      79779,     618543,     101507,  31.211582,  63.700000,  77.100000, 141.100000,  26.692671,   0.395000, 243.057996, 694.228065
Outstanding requests per worker:
625 627 556 698 629 727 586 589 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:39   0:00 /usr/lib/linux
memcache      7  350  0.0 448192 165568 pts/0   Sl+  22:39   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19777928072      instructions:u                                              
        5067950253      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         516307085      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            422174      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.211024097 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1411576320
starting receive base loop
num_worker_connections 128
Creating worker on tid 299692544
starting receive base loop
num_worker_connections 128
Creating worker on tid 3480613376
starting receive base loop
num_worker_connections 128
Creating worker on tid 2372006400
starting receive base loop
num_worker_connections 128
Creating worker on tid 1257959936
starting receive base loop
num_worker_connections 128
Creating worker on tid 149352960
starting receive base loop
num_worker_connections 128
Creating worker on tid 3335713280
starting receive base loop
Created 1024 connections total
Creating worker on tid 2221666816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575327982.326407,       0.0,      367396,     330402,      36994,     220874,     109528,  71.047779, 145.800000, 181.300000, 782.100000, 132.311990,   0.000000, 1956.220031, 485.042497
Outstanding requests per worker:
1362 1295 1336 1359 1392 1409 1429 5887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165494.6,      827474,     744831,      82643,     565306,     179525,  49.694565,  93.400000, 128.500000, 385.900000,  94.657989,   0.410000, 1930.474997, 583.668925
Outstanding requests per worker:
535 528 591 570 534 566 553 532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163294.4,      816473,     735214,      81259,     589091,     146123,  26.537427,  52.600000,  60.400000,  95.800000,  18.848532,   0.359000, 195.813000, 630.314090
Outstanding requests per worker:
563 599 567 480 577 520 502 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163236.6,      816184,     734457,      81727,     605117,     129340,  27.648851,  54.700000,  63.100000, 101.400000,  19.818086,   0.379000, 198.090002, 656.066562
Outstanding requests per worker:
552 548 544 565 574 608 594 563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163245.4,      816228,     734671,      81557,     617332,     117339,  29.081311,  57.600000,  66.800000, 112.200000,  21.527526,   0.376000, 219.402999, 673.259275
Outstanding requests per worker:
616 618 507 621 588 612 587 561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163222.4,      816113,     734597,      81516,     625192,     109405,  30.307960,  60.900000,  70.900000, 122.700000,  23.237635,   0.393000, 228.983998, 685.043228
Outstanding requests per worker:
594 631 595 582 634 646 665 652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161670.8,      808355,     727333,      81022,     625467,     101866,  35.355261,  70.800000,  98.800000, 151.500000,  30.347556,   0.412000, 284.942001, 694.756836
Outstanding requests per worker:
1547 1704 1614 1602 1587 1676 1602 1729 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  22:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:40   0:00 /usr/lib/linux
memcache      7  341  0.0 516224 169280 pts/0   Sl+  22:40   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20153273704      instructions:u                                              
        4802347676      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         511384604      armv8_pmuv3_0/l2d_cache_refill/:u                                   
            496127      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.380166422 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1657270784
starting receive base loop
num_worker_connections 128
Creating worker on tid 543945216
starting receive base loop
num_worker_connections 128
Creating worker on tid 3730305536
starting receive base loop
num_worker_connections 128
Creating worker on tid 2616259072
starting receive base loop
num_worker_connections 128
Creating worker on tid 1507652096
starting receive base loop
num_worker_connections 128
Creating worker on tid 393605632
starting receive base loop
num_worker_connections 128
Creating worker on tid 3579965952
starting receive base loop
Created 1024 connections total
Creating worker on tid 2465919488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328024.326449,       0.0,      359227,     323149,      36078,     215761,     107388,  73.584856, 121.500000, 168.700000, 1076.000000, 171.327612,   0.000000, 1973.881960, 484.076974
Outstanding requests per worker:
1299 1200 1261 1335 1335 1357 1183 14544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167397.8,      836990,     752912,      84078,     572347,     180565, 137.388587, 207.100000, 326.900000, 1417.300000, 224.091550,   0.838000, 2299.637079, 584.803356
Outstanding requests per worker:
2309 2359 2332 2376 2281 2123 2105 4075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166747.6,      833739,     750328,      83411,     601457,     148871, 117.897522, 259.500000, 309.300000, 458.500000, 116.715373,   1.050000, 1547.747970, 630.790326
Outstanding requests per worker:
2249 2408 2328 2321 2422 2511 2373 2994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166333.0,      831666,     748670,      82996,     617579,     131091, 123.676825, 304.100000, 365.800000, 476.900000, 119.566234,   1.001000, 1208.587050, 656.498325
Outstanding requests per worker:
2589 2589 2656 2550 2527 2632 2767 3030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166061.2,      830307,     747211,      83096,     627897,     119314, 136.213283, 342.700000, 408.100000, 520.900000, 129.302921,   0.810000, 990.540981, 673.135085
Outstanding requests per worker:
2958 3138 3197 2988 2917 2922 3034 3299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165485.8,      827430,     744353,      83077,     633762,     110591, 164.063633, 387.300000, 450.300000, 568.700000, 139.848087,   0.979000, 1071.779013, 686.408799
Outstanding requests per worker:
3922 3703 3920 3596 3886 3733 3742 3952 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163540.4,      817703,     735766,      81937,     633204,     102562, 208.959933, 427.300000, 504.400000, 646.000000, 145.939635,   0.989000, 967.567980, 695.355924
Outstanding requests per worker:
5882 5719 6067 5755 5717 5535 5679 5776 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:40   0:00 /usr/lib/linux
memcache      7  349  0.0 517248 180608 pts/0   Sl+  22:40   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20751199778      instructions:u                                              
        4812805724      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         575528170      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3293501      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.161729134 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1319236096
starting receive base loop
num_worker_connections 128
Creating worker on tid 208400896
starting receive base loop
num_worker_connections 128
Creating worker on tid 3394761216
starting receive base loop
num_worker_connections 128
Creating worker on tid 2280714752
starting receive base loop
num_worker_connections 128
Creating worker on tid 1172107776
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2130375168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328068.326493,       0.0,      414095,     372166,      41929,     251366,     120800,  67.061433, 145.500000, 185.200000, 841.100000, 140.392832,   0.000000, 1975.291014, 491.591126
Outstanding requests per worker:
1711 1566 1776 1600 1640 1614 1707 8075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167935.0,      839676,     755876,      83800,     577262,     178614, 100.463933, 184.700000, 239.300000, 760.400000, 131.439556,   0.516000, 2053.059101, 589.125228
Outstanding requests per worker:
1686 1572 1622 1680 1695 1636 1741 1809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166387.6,      831939,     748688,      83251,     601928,     146760,  85.056477, 232.200000, 281.200000, 371.300000,  89.559580,   0.558000, 745.676994, 633.813267
Outstanding requests per worker:
1794 1840 2034 1904 1833 1912 1794 1822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166300.4,      831503,     748285,      83218,     618506,     129779,  95.095626, 265.300000, 312.000000, 410.900000, 102.368362,   0.883000, 793.092012, 658.168261
Outstanding requests per worker:
2181 2220 2112 2161 2136 1886 2091 2036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166326.0,      831631,     748546,      83085,     630086,     118460, 105.810354, 291.100000, 346.400000, 444.100000, 111.274020,   0.494000, 685.352981, 674.859851
Outstanding requests per worker:
2208 2379 2232 2385 2371 2325 2341 2352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166011.0,      830056,     746679,      83377,     637074,     109605, 120.342613, 318.000000, 383.700000, 484.200000, 120.453312,   0.769000, 767.053008, 687.443639
Outstanding requests per worker:
2626 2990 2710 2647 2761 2694 2774 2726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164164.8,      820825,     738614,      82211,     636160,     102454, 156.545143, 347.500000, 413.900000, 526.200000, 124.717239,   0.895000, 745.395005, 695.452304
Outstanding requests per worker:
4350 4106 4394 4359 4340 4525 4279 4195 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:41   0:00 /usr/lib/linux
memcache      7  336  0.0 518272 179136 pts/0   Sl+  22:41   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20971232297      instructions:u                                              
        4742957540      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         562963016      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           2816724      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      39.570467733 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1356984832
starting receive base loop
num_worker_connections 128
Creating worker on tid 248705536
starting receive base loop
num_worker_connections 128
Creating worker on tid 3429626368
starting receive base loop
num_worker_connections 128
Creating worker on tid 2321019392
starting receive base loop
num_worker_connections 128
Creating worker on tid 1206972928
starting receive base loop
num_worker_connections 128
Creating worker on tid 98365952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3279286784
starting receive base loop
Created 1024 connections total
Creating worker on tid 2170679808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328109.326534,       0.0,      366621,     330066,      36555,     220584,     109482,  78.154129, 138.900000, 182.600000, 1039.400000, 168.249928,   0.000000, 1973.593950, 484.202099
Outstanding requests per worker:
1510 1587 1713 1623 1630 1536 1672 17623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167622.2,      838112,     753833,      84279,     573382,     180451, 218.386636, 295.000000, 637.200000, 1970.800000, 319.686543,   1.086000, 3199.695110, 585.877434
Outstanding requests per worker:
4243 4192 4410 4299 4250 4365 4425 11716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168596.0,      842981,     758679,      84302,     608521,     150158, 271.390222, 401.100000, 497.400000, 1735.700000, 239.303669,   2.039000, 3083.111048, 631.740840
Outstanding requests per worker:
5788 5620 5809 5863 5739 5607 5609 10022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168816.0,      844081,     759588,      84493,     627448,     132140, 315.567859, 498.900000, 589.200000, 1542.400000, 227.850805,   0.877000, 3147.999048, 657.429297
Outstanding requests per worker:
6704 6834 6585 6778 6587 6897 6559 10155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169083.4,      845418,     760619,      84799,     639719,     120900, 350.841769, 584.800000, 701.100000, 1537.600000, 241.114456,   2.610000, 2913.752079, 674.334852
Outstanding requests per worker:
7264 7423 7503 7480 7541 7858 7295 10484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168965.0,      844826,     760843,      83983,     648622,     112221, 387.105950, 689.600000, 853.100000, 1547.700000, 267.507392,   2.732000, 3073.364019, 687.001372
Outstanding requests per worker:
8271 8147 8276 8155 8287 8488 8500 11021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167875.0,      839376,     756035,      83341,     651074,     104961, 431.363268, 791.100000, 993.700000, 1575.700000, 292.665100,   4.832000, 2939.055920, 695.898019
Outstanding requests per worker:
9775 9645 9701 9708 9733 10026 9808 12512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:42   0:00 /usr/lib/linux
memcache      7  350  0.0 520320 188800 pts/0   Sl+  22:42   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21199276728      instructions:u                                              
        4684115622      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         568292502      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           7074762      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.250894667 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1617031680
starting receive base loop
num_worker_connections 128
Creating worker on tid 509080064
starting receive base loop
num_worker_connections 128
Creating worker on tid 3690000896
starting receive base loop
num_worker_connections 128
Creating worker on tid 2581393920
starting receive base loop
num_worker_connections 128
Creating worker on tid 1467347456
starting receive base loop
num_worker_connections 128
Creating worker on tid 358740480
starting receive base loop
num_worker_connections 128
Creating worker on tid 3539661312
starting receive base loop
Created 1024 connections total
Creating worker on tid 2431054336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328152.326577,       0.0,      357533,     321803,      35730,     214322,     107481,  88.960279, 176.500000, 237.600000, 1067.700000, 170.533494,   0.000000, 1962.375045, 481.285684
Outstanding requests per worker:
2255 2207 1996 2025 2094 2207 2092 18730 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166171.0,      830856,     747590,      83266,     567473,     180117, 270.797431, 383.900000, 865.600000, 2057.900000, 338.552856,   0.880000, 2945.624113, 584.320780
Outstanding requests per worker:
5434 5800 5457 5605 5869 5393 5615 14729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168026.4,      840133,     756386,      83747,     607230,     149156, 353.529111, 501.000000, 634.800000, 1752.400000, 250.190308,   2.382000, 2477.921009, 631.742124
Outstanding requests per worker:
7542 7390 7258 7334 7388 7497 7291 13243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168388.4,      841943,     757406,      84537,     625719,     131687, 409.556304, 603.800000, 723.500000, 1539.000000, 224.804257,   6.518000, 2308.445930, 657.480165
Outstanding requests per worker:
8668 8766 8368 8629 8786 8792 8773 13344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168606.2,      843032,     758652,      84380,     638041,     120611, 457.941518, 688.500000, 840.300000, 1389.800000, 227.411049,   2.532000, 2473.081112, 674.416751
Outstanding requests per worker:
9859 9726 9756 9688 9922 9681 10059 13532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168136.8,      840685,     756553,      84132,     645192,     111361, 510.114299, 793.200000, 942.300000, 1387.300000, 240.622031,  40.961999, 2744.061947, 687.423197
Outstanding requests per worker:
11123 11219 11216 10897 11189 11296 11309 14447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167563.4,      837818,     753893,      83925,     649114,     104779, 574.446657, 917.900000, 1097.700000, 1535.900000, 273.405211,  21.436000, 2823.797941, 696.329155
Outstanding requests per worker:
12788 13041 12922 12703 13079 12721 13206 15589 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:42   0:00 /usr/lib/linux
memcache      7  341  0.0 518272 191872 pts/0   Sl+  22:42   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21099772614      instructions:u                                              
        4887188837      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         573554003      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6853672      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.592015395 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1943925248
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
num_worker_connections 128
Creating worker on tid 2908877312
starting receive base loop
num_worker_connections 128
Creating worker on tid 1794830848
starting receive base loop
num_worker_connections 128
Creating worker on tid 686223872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3872584192
starting receive base loop
Created 1024 connections total
Creating worker on tid 2758537728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328194.326619,       0.0,      365930,     329093,      36837,     220006,     109087,  88.445575, 163.600000, 213.000000, 1079.600000, 173.398754,   0.000000, 1991.160035, 484.489154
Outstanding requests per worker:
1945 2136 2062 2183 2097 2163 1966 19774 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170044.8,      850225,     765399,      84826,     582018,     183381, 267.662962, 373.500000, 912.000000, 1943.500000, 334.690271,   1.300000, 3039.001942, 585.121470
Outstanding requests per worker:
5693 5464 5756 5207 5586 5503 5561 14980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171758.2,      858792,     772975,      85817,     620054,     152921, 343.073853, 495.200000, 642.600000, 1570.600000, 248.888535,   1.403000, 2731.345892, 631.770676
Outstanding requests per worker:
7468 7130 7380 7256 7361 7362 7381 13279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172118.8,      860595,     774564,      86031,     639852,     134712, 398.172083, 604.400000, 733.300000, 1300.300000, 224.979835,   4.641000, 2751.218081, 657.722792
Outstanding requests per worker:
8698 8692 8728 8555 8629 8746 8738 12921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171892.8,      859465,     773264,      86201,     651400,     121864, 451.238219, 716.000000, 869.500000, 1242.600000, 232.160325,   6.813000, 2601.864100, 675.245926
Outstanding requests per worker:
10351 10279 9868 9979 10004 10343 9883 13149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171837.6,      859189,     772901,      86288,     658703,     114198, 511.081747, 845.800000, 1015.700000, 1474.900000, 265.228669,   5.939000, 2677.736044, 686.468782
Outstanding requests per worker:
11736 11738 10892 11511 11377 11528 11248 14284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170848.8,      854245,     768348,      85897,     662199,     106149, 581.540355, 967.100000, 1195.100000, 1651.000000, 299.405689,   7.279000, 2664.156914, 697.024134
Outstanding requests per worker:
13545 13497 13223 13314 13113 13494 13347 16198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:43   0:00 /usr/lib/linux
memcache      7  332  0.0 521344 195200 pts/0   Sl+  22:43   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21555570195      instructions:u                                              
        4544529974      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         555715163      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           6534220      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.611819571 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1583149568
starting receive base loop
num_worker_connections 128
Creating worker on tid 468775424
starting receive base loop
num_worker_connections 128
Creating worker on tid 3655135744
starting receive base loop
num_worker_connections 128
Creating worker on tid 2541089280
starting receive base loop
num_worker_connections 128
Creating worker on tid 1432482304
starting receive base loop
num_worker_connections 128
Creating worker on tid 318435840
starting receive base loop
num_worker_connections 128
Creating worker on tid 3504796160
starting receive base loop
Created 1024 connections total
Creating worker on tid 2396189184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328236.326661,       0.0,      365219,     328579,      36640,     219632,     108947,  90.058020, 169.600000, 233.600000, 1064.600000, 173.955994,   0.000000, 1968.587041, 484.869556
Outstanding requests per worker:
2125 2051 2128 2238 2144 2119 2262 27687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169542.2,      847712,     762720,      84992,     579670,     183050, 372.275754, 527.700000, 1491.900000, 2687.300000, 480.819557,   1.893000, 3627.931118, 585.098448
Outstanding requests per worker:
7757 8118 8261 7842 7899 8005 7962 28138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172369.8,      861850,     775828,      86022,     623823,     152005, 548.901772, 736.400000, 1433.800000, 2733.700000, 445.664927,  18.400000, 3824.210882, 633.662004
Outstanding requests per worker:
11756 11629 11535 11335 11346 11586 11808 30095 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172097.0,      860486,     774679,      85807,     641570,     133109, 701.980517, 996.000000, 1484.800000, 2846.200000, 455.069350, 110.538997, 4368.401051, 659.430803
Outstanding requests per worker:
15624 15212 14713 15229 15421 15209 15031 33137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172006.6,      860034,     774338,      85696,     653277,     121061, 866.790763, 1242.500000, 1730.000000, 3049.700000, 483.647863, 139.340997, 4550.870895, 676.884452
Outstanding requests per worker:
19147 18956 18566 19048 18755 18924 18814 36326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171931.8,      859660,     773167,      86493,     660153,     113014, 1026.473224, 1505.400000, 1891.900000, 3241.800000, 520.118164, 186.366007, 4769.434929, 688.002919
Outstanding requests per worker:
22963 22164 22336 22688 22535 22511 22350 40347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170939.8,      854700,     769595,      85105,     663633,     105962, 1204.410122, 1779.900000, 2166.900000, 3486.100000, 564.189818, 182.895005, 5114.540100, 697.952422
Outstanding requests per worker:
27339 26781 26816 26575 26490 26887 26843 44415 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:44   0:00 /usr/lib/linux
memcache      7  350  0.0 520320 194688 pts/0   Sl+  22:44   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21438284255      instructions:u                                              
        4716514690      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         569724985      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3281614      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      37.330716973 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,armv8_pmuv3_0/l2d_cache_wb/,armv8_pmuv3_0/l2d_cache_refill/,armv8_pmuv3_0/l2d_cache_allocate/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2117464576
starting receive base loop
num_worker_connections 128
Creating worker on tid 1005646336
starting receive base loop
num_worker_connections 128
Creating worker on tid 4192006656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3077960192
starting receive base loop
num_worker_connections 128
Creating worker on tid 1969353216
starting receive base loop
num_worker_connections 128
Creating worker on tid 855306752
starting receive base loop
num_worker_connections 128
Creating worker on tid 4041667072
starting receive base loop
Created 1024 connections total
Creating worker on tid 2933060096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575328278.326703,       0.0,      370084,     332708,      37376,     223315,     109393,  94.702439, 180.300000, 239.100000, 1060.600000, 172.117980,   0.000000, 1971.217036, 487.183578
Outstanding requests per worker:
2541 2579 2428 2585 2554 2464 2504 25588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169363.6,      846819,     762502,      84317,     580768,     181734, 375.238882, 531.200000, 1349.200000, 2600.000000, 454.342439,   1.817000, 3569.668055, 586.876752
Outstanding requests per worker:
8230 8494 8178 8204 8468 8544 8252 27032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171742.2,      858712,     773090,      85622,     621595,     151495, 565.304230, 785.200000, 1323.500000, 2689.300000, 425.148419,  35.771001, 3654.588938, 632.685658
Outstanding requests per worker:
11931 12163 12534 12611 12494 12358 12201 29400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171329.6,      856649,     770637,      86012,     636741,     133896, 738.263304, 1069.500000, 1474.600000, 2928.500000, 446.939980,  33.944000, 3697.997093, 657.749358
Outstanding requests per worker:
16212 16208 16101 16807 16532 16665 16254 33282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171229.4,      856148,     770070,      86078,     648388,     121682, 919.906389, 1385.700000, 1777.400000, 3112.800000, 486.926404, 156.617001, 4103.597164, 675.013104
Outstanding requests per worker:
20364 20860 20007 20648 20769 20651 20278 37294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170589.4,      852948,     767604,      85344,     654097,     113507, 1112.544226, 1711.100000, 2068.500000, 3290.100000, 540.532075, 186.833993, 4379.022121, 685.894193
Outstanding requests per worker:
24883 25215 24520 25476 25459 25091 24692 41571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170312.2,      851562,     766559,      85003,     660803,     105756, 1313.855815, 2016.700000, 2426.700000, 3525.300000, 594.918706, 127.658993, 4634.256840, 696.806323
Outstanding requests per worker:
29337 29572 29367 30100 29987 29856 29669 46462 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:44   0:00 /usr/lib/linux
memcache      7  333  0.0 521344 193792 pts/0   Sl+  22:44   2:09 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  22:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21401954310      instructions:u                                              
        4799787765      armv8_pmuv3_0/l2d_cache_wb/:u                                   
         538192070      armv8_pmuv3_0/l2d_cache_refill/:u                                   
           3508422      armv8_pmuv3_0/l2d_cache_allocate/:u                                   

      38.620602048 seconds time elapsed

