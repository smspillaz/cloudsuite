+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 27000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 256
Created 256 connections total
Creating worker on tid 236384768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282175.280600,       0.0,       54015,      48666,       5349,      28139,      20527,   0.958760,   1.300000,   1.400000,   2.600000,   1.419511,   0.000000,  58.965001, 387.931451
Outstanding requests per worker:
27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121586,      13565,      79618,      41968,   0.872989,   1.300000,   1.400000,   1.700000,   0.272597,   0.161000,   3.833000, 470.512559
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121545,      13600,      85227,      36318,   0.891930,   1.300000,   1.400000,   1.700000,   0.280898,   0.160000,   3.764000, 519.916599
Outstanding requests per worker:
29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121767,      13377,      88413,      33354,   0.901995,   1.300000,   1.400000,   1.700000,   0.285191,   0.161000,   3.891000, 546.857983
Outstanding requests per worker:
27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121662,      13486,      90335,      31327,   0.915810,   1.300000,   1.400000,   1.800000,   0.294545,   0.161000,   4.368000, 564.568246
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121583,      13569,      91670,      29913,   0.913594,   1.300000,   1.400000,   1.800000,   0.292489,   0.159000,   3.473000, 578.616484
Outstanding requests per worker:
21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121853,      13294,      92957,      28896,   0.910511,   1.300000,   1.400000,   1.800000,   0.287931,   0.160000,   3.550000, 588.407278
Outstanding requests per worker:
27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  09:56   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   09:56   0:00 /usr/lib/linux
memcache      9 77.1  0.0 124352 44288 pts/0    Sl+  09:56   0:28 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  09:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3334506130      instructions:u            #    0.54  insn per cycle         
        6222985005      cycles:u                                                    
          23769379      armv8_pmuv3_0/br_mis_pred/:u                                   
         587908964      armv8_pmuv3_0/br_pred/:u                                    

      37.070648669 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 28000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 256
Created 256 connections total
Creating worker on tid 68284928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282216.280641,       0.0,       57099,      51442,       5657,      30098,      21344,   1.289984,   1.800000,   2.100000,   3.800000,   1.555613,   0.000000,  62.779002, 393.731134
Outstanding requests per worker:
28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.6,      142858,     128488,      14370,      84691,      43797,   1.154957,   1.700000,   1.800000,   2.300000,   0.386176,   0.162000,   3.703000, 475.087292
Outstanding requests per worker:
38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128514,      14350,      90089,      38425,   1.202336,   1.800000,   1.900000,   2.500000,   0.416940,   0.161000,   5.588000, 520.178245
Outstanding requests per worker:
39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.4,      142872,     128871,      14001,      93501,      35370,   1.189299,   1.700000,   1.900000,   2.400000,   0.406594,   0.158000,   4.332000, 548.283695
Outstanding requests per worker:
33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128442,      14427,      95402,      33040,   1.216728,   1.800000,   2.000000,   2.500000,   0.427920,   0.162000,   5.974000, 564.995578
Outstanding requests per worker:
33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.4,      142867,     128640,      14227,      97475,      31165,   1.236691,   1.800000,   2.000000,   2.600000,   0.436236,   0.158000,   5.382000, 581.605193
Outstanding requests per worker:
32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.6,      142858,     128741,      14117,      98661,      30080,   1.232350,   1.800000,   2.000000,   2.500000,   0.427558,   0.158000,   4.754000, 593.032546
Outstanding requests per worker:
38 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:57   0:00 /usr/lib/linux
memcache      8 79.9  0.0 125376 44352 pts/0    Sl+  09:57   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3498703196      instructions:u            #    0.54  insn per cycle         
        6495585548      cycles:u                                                    
          25861065      armv8_pmuv3_0/br_mis_pred/:u                                   
         618213737      armv8_pmuv3_0/br_pred/:u                                    

      37.050405552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 29000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 256
Created 256 connections total
Creating worker on tid 676262400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282257.280682,       0.0,       58761,      52947,       5814,      31283,      21664,   1.699685,   2.400000,   2.900000,   5.800000,   1.768939,   0.000000,  65.701000, 398.138743
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.6,      147063,     132268,      14795,      87229,      45039,   1.499268,   2.200000,   2.500000,   3.200000,   0.556342,   0.159000,   7.166000, 475.108681
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.4,      147077,     132362,      14715,      93381,      38981,   1.547827,   2.300000,   2.600000,   3.400000,   0.587642,   0.161000,   7.703000, 522.943851
Outstanding requests per worker:
42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132582,      14488,      96438,      36144,   1.567950,   2.300000,   2.600000,   3.400000,   0.598163,   0.161000,   7.408000, 548.542230
Outstanding requests per worker:
41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.4,      147062,     132174,      14888,      98736,      33438,   1.607810,   2.400000,   2.700000,   3.500000,   0.619818,   0.164000,   8.522000, 570.339098
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.0,      147060,     132463,      14597,     100581,      31882,   1.618029,   2.400000,   2.700000,   3.600000,   0.625590,   0.162000,   9.859000, 583.610299
Outstanding requests per worker:
53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132488,      14584,     101682,      30806,   1.613453,   2.400000,   2.700000,   3.400000,   0.602896,   0.163000,   6.687000, 593.817546
Outstanding requests per worker:
49 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  09:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:57   0:00 /usr/lib/linux
memcache      8 81.4  0.0 128448 45184 pts/0    Sl+  09:57   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3594855035      instructions:u            #    0.55  insn per cycle         
        6550840094      cycles:u                                                    
          27516572      armv8_pmuv3_0/br_mis_pred/:u                                   
         632795640      armv8_pmuv3_0/br_pred/:u                                    

      36.951266280 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 30000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 256
Created 256 connections total
Creating worker on tid 525595136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282297.280722,       0.0,       60525,      54538,       5987,      31879,      22659,   2.228584,   3.300000,   4.100000,   8.300000,   1.769289,   0.000000,  53.560000, 394.806722
Outstanding requests per worker:
62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136260,      15260,      90527,      45733,   2.030066,   3.100000,   3.500000,   4.600000,   0.819866,   0.169000,  12.600000, 479.966718
Outstanding requests per worker:
67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.6,      151538,     136419,      15119,      95876,      40543,   2.123029,   3.200000,   3.700000,   4.900000,   0.867181,   0.167000,  11.369000, 523.498288
Outstanding requests per worker:
56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136498,      15023,      99536,      36962,   2.196675,   3.300000,   3.900000,   5.100000,   0.909621,   0.161000,  11.907000, 550.978981
Outstanding requests per worker:
58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136284,      15240,     101756,      34528,   2.239460,   3.400000,   4.000000,   5.200000,   0.944149,   0.170000,  18.242000, 571.135152
Outstanding requests per worker:
58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30301.8,      151509,     136462,      15047,     103427,      33035,   2.260178,   3.500000,   4.000000,   5.300000,   0.950918,   0.168000,  12.863000, 582.785508
Outstanding requests per worker:
72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136479,      15051,     105072,      31407,   2.265948,   3.400000,   4.000000,   5.200000,   0.925410,   0.192000,  10.305000, 595.640795
Outstanding requests per worker:
69 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:58   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   09:58   0:00 /usr/lib/linux
memcache     10 82.9  0.0 127424 48000 pts/0    Sl+  09:58   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3676227601      instructions:u            #    0.56  insn per cycle         
        6599940990      cycles:u                                                    
          25241341      armv8_pmuv3_0/br_mis_pred/:u                                   
         645738179      armv8_pmuv3_0/br_pred/:u                                    

      36.850329467 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 31000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 256
Created 256 connections total
Creating worker on tid 359330304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282338.280763,       0.0,       62389,      56221,       6168,      33233,      22988,   3.708783,   6.000000,   7.500000,  12.900000,   2.879123,   0.000000,  73.623002, 399.229398
Outstanding requests per worker:
91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31247.2,      156236,     140524,      15712,      94041,      46483,   3.289193,   5.300000,   6.200000,   8.500000,   1.551706,   0.173000,  19.631000, 483.991112
Outstanding requests per worker:
115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140614,      15650,      99642,      40972,   3.575303,   5.700000,   6.800000,   9.400000,   1.726950,   0.175000,  23.127001, 527.878433
Outstanding requests per worker:
116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.6,      156263,     140812,      15451,     102882,      37930,   3.711688,   6.000000,   7.100000,   9.800000,   1.804585,   0.177000,  25.682000, 553.007286
Outstanding requests per worker:
108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140514,      15750,     105114,      35400,   3.841219,   6.200000,   7.400000,  10.300000,   1.904458,   0.191000,  25.082000, 571.625674
Outstanding requests per worker:
104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31244.6,      156223,     140791,      15432,     107012,      33779,   3.902324,   6.300000,   7.500000,  10.800000,   1.996348,   0.174000,  35.647999, 585.523357
Outstanding requests per worker:
140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31256.4,      156282,     140652,      15630,     108723,      31929,   3.906071,   6.300000,   7.400000,  10.000000,   1.844473,   0.199000,  18.631000, 598.986257
Outstanding requests per worker:
120 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   09:59   0:00 /usr/lib/linux
memcache     10 86.6  0.0 129472 48768 pts/0    Sl+  09:59   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3776135805      instructions:u            #    0.56  insn per cycle         
        6732622805      cycles:u                                                    
          27480453      armv8_pmuv3_0/br_mis_pred/:u                                   
         654963120      armv8_pmuv3_0/br_pred/:u                                    

      35.610121165 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 1 threads, 32000 rps'
==> Bench: 4096 keys, 256 conns, 1 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 256
Created 256 connections total
Creating worker on tid 584905216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282378.280803,       0.0,       63560,      57276,       6284,      33694,      23582,  17.230928,  30.000000,  42.200000,  71.400000,  12.825748,   0.000000, 154.428005, 397.323416
Outstanding requests per worker:
934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31827.4,      159137,     143123,      16014,      94744,      48379,  50.001872, 112.900000, 144.200000, 230.700000,  47.333267,   0.249000, 433.189005, 477.874989
Outstanding requests per worker:
3088 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31489.6,      157448,     141682,      15766,     100374,      41308, 144.628080, 292.500000, 346.300000, 454.400000, 104.971567,   0.373000, 669.727981, 528.274072
Outstanding requests per worker:
5967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31513.8,      157569,     141979,      15590,     103963,      38016, 217.752159, 437.300000, 518.800000, 692.000000, 156.131229,   0.563000, 893.954992, 554.600434
Outstanding requests per worker:
7801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31500.4,      157502,     141683,      15819,     106057,      35626, 264.815088, 520.700000, 624.600000, 884.000000, 191.075405,   0.321000, 1283.377051, 572.623102
Outstanding requests per worker:
9068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31418.8,      157094,     141567,      15527,     107716,      33851, 304.921230, 600.100000, 720.700000, 989.200000, 216.262125,   0.710000, 1297.502041, 587.214414
Outstanding requests per worker:
10298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31398.8,      156994,     141233,      15761,     108693,      32540, 342.111064, 708.900000, 829.800000, 1086.400000, 250.038090,   0.960000, 1300.300002, 596.406732
Outstanding requests per worker:
11429 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  09:59   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   09:59   0:00 /usr/lib/linux
memcache      9 85.8  0.0 130496 50112 pts/0    Sl+  09:59   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3774853994      instructions:u            #    0.56  insn per cycle         
        6705586380      cycles:u                                                    
          25165577      armv8_pmuv3_0/br_mis_pred/:u                                   
         648552143      armv8_pmuv3_0/br_pred/:u                                    

      36.970689167 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 27000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1807544832
starting receive base loop
Created 256 connections total
Creating worker on tid 694284800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282419.280844,       0.0,       68964,      62111,       6853,      37008,      25103,   0.573099,   0.244100,   0.254100,   1.400000,   5.050359,   0.000000, 140.110001, 404.899551
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121531,      13622,      80805,      40726,   0.184153,   0.239100,   0.249100,   0.263100,   0.039428,   0.100000,   2.048000, 480.965943
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121604,      13537,      85546,      36058,   0.184096,   0.238100,   0.249100,   0.264100,   0.039291,   0.098000,   1.973000, 522.350408
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121719,      13425,      87688,      34031,   0.183920,   0.238100,   0.249100,   0.266100,   0.040097,   0.101000,   2.031000, 543.031121
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121526,      13622,      90059,      31467,   0.184364,   0.239100,   0.250100,   0.266100,   0.039878,   0.102000,   1.107000, 565.328061
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121513,      13637,      91481,      30032,   0.184235,   0.239100,   0.249100,   0.266100,   0.040665,   0.099000,   2.033000, 576.347181
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121735,      13408,      93093,      28642,   0.184296,   0.239100,   0.249100,   0.267100,   0.043004,   0.097000,   2.103000, 590.474925
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:00   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:00   0:00 /usr/lib/linux
memcache     10 81.8  0.0 123328 43904 pts/0    Sl+  10:00   0:30 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3373267284      instructions:u            #    0.52  insn per cycle         
        6542884453      cycles:u                                                    
          25197437      armv8_pmuv3_0/br_mis_pred/:u                                   
         593052412      armv8_pmuv3_0/br_pred/:u                                    

      37.081631964 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 28000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1163915776
starting receive base loop
Created 256 connections total
Creating worker on tid 50000384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282460.280885,       0.0,       71533,      64453,       7080,      38340,      26113,   0.523429,   0.246100,   0.253100,   0.990100,   4.275035,   0.000000, 115.258999, 402.222798
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126710,      14145,      83960,      42750,   0.189972,   0.244100,   0.250100,   0.265100,   0.039282,   0.097000,   1.263000, 477.237416
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126872,      13981,      89480,      37392,   0.190395,   0.244100,   0.250100,   0.267100,   0.039841,   0.096000,   1.263000, 524.067785
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126746,      14108,      92169,      34577,   0.190421,   0.244100,   0.250100,   0.268100,   0.039176,   0.098000,   0.863000, 549.361305
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126868,      13985,      94081,      32787,   0.190835,   0.245100,   0.251100,   0.269100,   0.040586,   0.095000,   1.377000, 564.615230
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126742,      14113,      96243,      30499,   0.190959,   0.245100,   0.251100,   0.270100,   0.041149,   0.096000,   1.306000, 583.392972
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126930,      13922,      97599,      29331,   0.191185,   0.245100,   0.251100,   0.269100,   0.040542,   0.097000,   0.898000, 594.224352
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:01   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:01   0:00 /usr/lib/linux
memcache     10 83.8  0.0 126400 46016 pts/0    Sl+  10:01   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3540470450      instructions:u            #    0.52  insn per cycle         
        6755005923      cycles:u                                                    
          25620801      armv8_pmuv3_0/br_mis_pred/:u                                   
         623478868      armv8_pmuv3_0/br_pred/:u                                    

      37.009518296 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 29000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1400238592
starting receive base loop
Created 256 connections total
Creating worker on tid 291631616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282500.280925,       0.0,       74707,      67189,       7518,      40053,      27136,   0.521448,   0.251100,   0.259100,   1.100000,   4.062085,   0.000000, 106.302999, 405.407314
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132344,      14722,      88343,      44001,   0.199712,   0.249100,   0.255100,   0.293100,   0.042308,   0.096000,   1.074000, 482.626368
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132270,      14795,      93530,      38740,   0.200650,   0.250100,   0.256100,   0.298100,   0.043256,   0.095000,   1.136000, 525.828948
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132316,      14755,      96539,      35777,   0.200485,   0.250100,   0.256100,   0.297100,   0.043108,   0.098000,   1.115000, 550.964849
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132491,      14573,      99010,      33481,   0.200715,   0.250100,   0.257100,   0.298100,   0.043596,   0.095000,   1.279000, 569.698387
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132362,      14704,     100708,      31654,   0.201398,   0.250100,   0.257100,   0.299100,   0.044648,   0.094000,   0.983000, 585.821270
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132458,      14607,     101892,      30566,   0.201251,   0.250100,   0.257100,   0.299100,   0.045795,   0.099000,   1.130000, 595.809072
Outstanding requests per worker:
3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:01   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:02   0:00 /usr/lib/linux
memcache      9 88.0  0.0 127424 48000 pts/0    Sl+  10:02   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3658854013      instructions:u            #    0.54  insn per cycle         
        6778289707      cycles:u                                                    
          28134776      armv8_pmuv3_0/br_mis_pred/:u                                   
         641192857      armv8_pmuv3_0/br_pred/:u                                    

      35.790076064 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 30000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1696461312
starting receive base loop
Created 256 connections total
Creating worker on tid 586871296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282541.280966,       0.0,       77794,      70013,       7781,      41846,      28167,   0.497956,   0.251100,   0.278100,   1.100000,   3.946019,   0.000000, 111.717999, 407.469513
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136532,      14992,      91387,      45145,   0.203380,   0.250100,   0.265100,   0.300100,   0.044202,   0.104000,   1.279000, 486.049336
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136028,      15496,      96135,      39893,   0.202692,   0.249100,   0.262000,   0.298100,   0.044323,   0.097000,   1.275000, 526.853582
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136549,      14971,      99928,      36621,   0.203148,   0.250100,   0.266100,   0.300100,   0.044055,   0.098000,   0.895000, 554.583805
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136322,      15202,     102310,      34012,   0.204007,   0.250100,   0.270100,   0.301100,   0.045028,   0.099000,   1.123000, 573.358431
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136400,      15121,     103820,      32580,   0.204165,   0.250100,   0.270100,   0.302100,   0.046535,   0.104000,   1.223000, 585.883732
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136501,      15023,     105165,      31336,   0.204505,   0.251100,   0.271100,   0.302100,   0.047448,   0.098000,   0.952000, 596.277881
Outstanding requests per worker:
2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:02   0:00 /usr/lib/linux
memcache      7 88.5  0.0 129472 48896 pts/0    Sl+  10:02   0:31 memcached -t 1
memcache     15  0.0  0.0   6656  4352 pts/1    Rs+  10:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3721169212      instructions:u            #    0.54  insn per cycle         
        6855904189      cycles:u                                                    
          25202600      armv8_pmuv3_0/br_mis_pred/:u                                   
         651261337      armv8_pmuv3_0/br_pred/:u                                    

      35.789974939 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 31000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2048848384
starting receive base loop
Created 256 connections total
Creating worker on tid 938537472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282581.281006,       0.0,       80081,      72139,       7942,      43269,      28870,   0.428931,   0.269100,   0.286100,   0.936100,   3.236622,   0.000000, 101.775996, 409.046591
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140438,      15824,      94146,      46292,   0.207719,   0.251100,   0.280100,   0.303100,   0.046082,   0.095000,   1.314000, 486.195859
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140488,      15776,     100036,      40452,   0.207979,   0.252100,   0.280100,   0.303100,   0.045837,   0.099000,   1.438000, 531.697981
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140631,      15633,     103376,      37255,   0.209128,   0.255100,   0.282100,   0.307100,   0.046885,   0.097000,   1.380000, 556.951483
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140664,      15596,     105427,      35237,   0.209397,   0.258000,   0.282100,   0.308100,   0.047378,   0.095000,   1.324000, 572.557406
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140667,      15593,     107402,      33265,   0.209846,   0.261100,   0.282100,   0.309100,   0.047855,   0.104000,   0.947000, 588.378397
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.6,      156263,     140575,      15688,     108729,      31846,   0.217057,   0.270100,   0.284100,   0.365100,   0.109408,   0.095000,   4.275000, 599.904770
Outstanding requests per worker:
3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:03   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:03   0:00 /usr/lib/linux
memcache     11 92.5  0.0 130496 49664 pts/0    Sl+  10:03   0:32 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  10:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3860241396      instructions:u            #    0.55  insn per cycle         
        6957985166      cycles:u                                                    
          26330319      armv8_pmuv3_0/br_mis_pred/:u                                   
         675890674      armv8_pmuv3_0/br_pred/:u                                    

      35.590243665 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 2 threads, 32000 rps'
==> Bench: 4096 keys, 256 conns, 2 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1864888832
starting receive base loop
Created 256 connections total
Creating worker on tid 753332736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282621.281046,       0.0,       81763,      73634,       8129,      43966,      29668,   0.482786,   0.285000,   0.364100,   1.800000,   3.278955,   0.000000,  96.352004, 405.554187
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.6,      161298,     145309,      15989,      97838,      47471,   0.219931,   0.278100,   0.286100,   0.338100,   0.048484,   0.103000,   1.178000, 489.951145
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     144937,      16364,     103097,      41840,   0.221287,   0.279100,   0.288100,   0.337100,   0.048395,   0.108000,   1.113000, 531.709115
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.0,      161295,     145169,      16126,     106695,      38474,   0.225117,   0.281000,   0.291100,   0.345100,   0.051479,   0.099000,   1.256000, 557.733862
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145035,      16264,     109039,      35996,   0.227440,   0.282100,   0.294100,   0.347100,   0.053468,   0.096000,   0.979000, 577.016582
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145299,      16000,     111016,      34283,   0.229062,   0.283100,   0.296100,   0.353100,   0.056010,   0.098000,   1.132000, 589.966036
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     145179,      16122,     112490,      32689,   0.231949,   0.284100,   0.300100,   0.361100,   0.067044,   0.101000,   1.280000, 600.546353
Outstanding requests per worker:
4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:04   0:00 /usr/lib/linux
memcache      8 93.1  0.0 131520 51072 pts/0    Sl+  10:04   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3915344480      instructions:u            #    0.56  insn per cycle         
        6979109080      cycles:u                                                    
          26604254      armv8_pmuv3_0/br_mis_pred/:u                                   
         681734119      armv8_pmuv3_0/br_pred/:u                                    

      35.640186562 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 27000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1659957760
starting receive base loop
num_worker_connections 64
Creating worker on tid 1067905536
starting receive base loop
num_worker_connections 64
Creating worker on tid 471986688
starting receive base loop
Created 256 connections total
Creating worker on tid 4171035136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282661.281086,       0.0,       69928,      62945,       6983,      37200,      25745,   1.081270,   0.105100,   0.189100,  35.800000,   9.249390,   0.000000, 187.582999, 400.725332
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121557,      13586,      80684,      40873,   0.089741,   0.103100,   0.106100,   0.165100,   0.018219,   0.063000,   0.847000, 477.862418
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121564,      13579,      85381,      36183,   0.089504,   0.103100,   0.106100,   0.138100,   0.016273,   0.060000,   0.776000, 521.517151
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121708,      13435,      88249,      33459,   0.089783,   0.103100,   0.106100,   0.143100,   0.018890,   0.059000,   0.852000, 546.930761
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121545,      13599,      90176,      31369,   0.089749,   0.103100,   0.106100,   0.141100,   0.015614,   0.059000,   0.836000, 564.506438
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121749,      13393,      91790,      29959,   0.090393,   0.104100,   0.107100,   0.164100,   0.019437,   0.060000,   0.719000, 578.358722
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121658,      13485,      93145,      28513,   0.089999,   0.103100,   0.106100,   0.135100,   0.020087,   0.060000,   0.834000, 590.778264
Outstanding requests per worker:
1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:04   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   10:04   0:00 /usr/lib/linux
memcache     12 88.3  0.0 125376 44992 pts/0    Sl+  10:04   0:30 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3441815676      instructions:u            #    0.52  insn per cycle         
        6681846769      cycles:u                                                    
          23169454      armv8_pmuv3_0/br_mis_pred/:u                                   
         617403034      armv8_pmuv3_0/br_pred/:u                                    

      35.710495059 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 28000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1618670080
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
Created 256 connections total
Creating worker on tid 4130730496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282701.281126,       0.0,       72025,      64888,       7137,      38674,      26214,   1.006562,   0.121100,   0.381100,  29.500000,   8.316426,   0.000000, 181.088999, 404.992048
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126611,      14241,      84287,      42324,   0.097089,   0.117100,   0.122100,   0.177100,   0.018581,   0.061000,   1.033000, 481.059955
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126952,      13901,      89726,      37226,   0.097003,   0.117100,   0.122100,   0.174100,   0.018120,   0.061000,   1.030000, 524.866509
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126705,      14146,      92429,      34276,   0.097803,   0.118100,   0.123100,   0.180100,   0.022324,   0.067000,   0.671000, 549.480076
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126792,      14061,      94471,      32321,   0.097383,   0.118100,   0.123100,   0.177100,   0.017927,   0.060000,   0.678000, 567.048615
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126790,      14061,      95804,      30986,   0.097640,   0.118100,   0.123100,   0.177100,   0.021713,   0.060000,   0.974000, 580.295670
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126842,      14011,      97143,      29699,   0.098007,   0.118100,   0.123100,   0.179100,   0.023740,   0.059000,   0.837000, 590.558104
Outstanding requests per worker:
1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:05   0:00 /usr/lib/linux
memcache      9 88.8  0.0 126400 45120 pts/0    Sl+  10:05   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3547092160      instructions:u            #    0.53  insn per cycle         
        6742286137      cycles:u                                                    
          25333370      armv8_pmuv3_0/br_mis_pred/:u                                   
         630165120      armv8_pmuv3_0/br_pred/:u                                    

      35.750638748 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 29000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2596205056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1999368704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
Created 256 connections total
Creating worker on tid 807531008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282741.281166,       0.0,       74848,      67313,       7535,      40509,      26804,   1.094426,   0.164100,   1.700000,  29.700000,   8.513647,   0.000000, 198.872000, 411.081440
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131556,      14438,      87906,      43650,   0.105943,   0.134100,   0.157100,   0.186100,   0.025551,   0.060000,   0.720000, 483.862728
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131073,      14924,      92473,      38600,   0.106582,   0.151100,   0.158100,   0.187100,   0.027769,   0.060000,   0.748000, 525.778223
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131499,      14500,      96136,      35363,   0.106324,   0.150100,   0.157100,   0.186100,   0.026678,   0.060000,   0.771000, 551.491844
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131320,      14682,      98101,      33219,   0.106381,   0.150100,   0.158100,   0.186100,   0.028550,   0.061000,   0.753000, 570.094639
Outstanding requests per worker:
1 0 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131208,      14785,      99553,      31655,   0.106743,   0.151100,   0.158100,   0.186100,   0.028387,   0.061000,   0.788000, 583.802040
Outstanding requests per worker:
0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131538,      14459,     100939,      30599,   0.107235,   0.152000,   0.158100,   0.188100,   0.031747,   0.057000,   0.891000, 592.791239
Outstanding requests per worker:
0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:06   0:00 /usr/lib/linux
memcache      9 90.2  0.0 128448 49088 pts/0    Sl+  10:06   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3560679715      instructions:u            #    0.53  insn per cycle         
        6678628235      cycles:u                                                    
          24109088      armv8_pmuv3_0/br_mis_pred/:u                                   
         618607834      armv8_pmuv3_0/br_pred/:u                                    

      35.730863115 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 30000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2414932480
starting receive base loop
num_worker_connections 64
Creating worker on tid 1822224896
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
Created 256 connections total
Creating worker on tid 633008640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282782.281207,       0.0,       77362,      69664,       7698,      41819,      27845,   1.371766,   0.193100,   1.400000,  52.000000,  10.395514,   0.000000, 207.592994, 409.710841
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135527,      14861,      90749,      44778,   0.135301,   0.189100,   0.191100,   0.202100,   0.042573,   0.059000,   1.777000, 484.884326
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135312,      15075,      95866,      39446,   0.135895,   0.189100,   0.191100,   0.203100,   0.043820,   0.059000,   1.143000, 528.614609
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135458,      14931,      99010,      36448,   0.136114,   0.189100,   0.192100,   0.203100,   0.044019,   0.059000,   1.845000, 552.940395
Outstanding requests per worker:
1 0 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.0,      150395,     135451,      14944,     101260,      34191,   0.135990,   0.189100,   0.192100,   0.202100,   0.043977,   0.060000,   1.026000, 571.453072
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135317,      15067,     102870,      32447,   0.136140,   0.189100,   0.192100,   0.201100,   0.041986,   0.059000,   1.796000, 584.860609
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135435,      14952,     104326,      31109,   0.136830,   0.189100,   0.192100,   0.202100,   0.045804,   0.059000,   1.091000, 596.305372
Outstanding requests per worker:
2 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:06   0:00 /usr/lib/linux
memcache      9 88.4  0.0 127424 47040 pts/0    Sl+  10:06   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3620200635      instructions:u            #    0.56  insn per cycle         
        6514929412      cycles:u                                                    
          24889900      armv8_pmuv3_0/br_mis_pred/:u                                   
         625695695      armv8_pmuv3_0/br_pred/:u                                    

      35.859730439 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 31000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1654977024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1059844608
starting receive base loop
num_worker_connections 64
Creating worker on tid 463925760
starting receive base loop
Created 256 connections total
Creating worker on tid 4162974208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282822.281247,       0.0,       79201,      71338,       7863,      42612,      28726,   2.224892,   7.100000,   9.800000,  26.000000,   7.782130,   0.000000, 170.203999, 406.975721
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139579,      15474,      93893,      45686,   0.112128,   0.155100,   0.164100,   0.209100,   0.082805,   0.057000,   2.121000, 487.651459
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139323,      15731,      98936,      40387,   0.107657,   0.156100,   0.164100,   0.188100,   0.029637,   0.060000,   0.706000, 530.955535
Outstanding requests per worker:
2 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139455,      15603,     101991,      37464,   0.109416,   0.158100,   0.166100,   0.190100,   0.031855,   0.059000,   0.736000, 553.462149
Outstanding requests per worker:
0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139385,      15662,     104551,      34834,   0.110615,   0.159100,   0.167100,   0.190100,   0.036178,   0.060000,   0.945000, 573.612498
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139459,      15592,     106194,      33265,   0.111352,   0.159100,   0.168100,   0.190100,   0.039074,   0.060000,   0.958000, 587.426211
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139659,      15395,     108034,      31625,   0.111986,   0.159100,   0.170100,   0.191100,   0.041699,   0.059000,   0.961000, 600.621750
Outstanding requests per worker:
0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:07   0:00 /usr/lib/linux
memcache      8 92.8  0.0 130496 51008 pts/0    Sl+  10:07   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3823727556      instructions:u            #    0.54  insn per cycle         
        7017130264      cycles:u                                                    
          26851460      armv8_pmuv3_0/br_mis_pred/:u                                   
         670529424      armv8_pmuv3_0/br_pred/:u                                    

      35.599709853 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 4 threads, 32000 rps'
==> Bench: 4096 keys, 256 conns, 4 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2005004800
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
Created 256 connections total
Creating worker on tid 219673088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282863.281288,       0.0,       82628,      74294,       8334,      44687,      29607,   5.185022,  11.400000,  15.700000,  59.000000,  14.885621,   0.000000, 322.290003, 411.145826
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144126,      15891,      97017,      47109,   0.151155,   0.186100,   0.189100,   0.288100,   0.043244,   0.059000,   0.954000, 489.916066
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144068,      15949,     102626,      41442,   0.156287,   0.188100,   0.191100,   0.265100,   0.040189,   0.064000,   1.027000, 532.559632
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     144241,      15767,     106283,      37958,   0.160695,   0.189100,   0.198100,   0.287100,   0.045473,   0.060000,   1.052000, 558.289613
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144021,      15992,     108197,      35824,   0.165006,   0.189100,   0.207100,   0.312100,   0.057387,   0.064000,   1.034000, 575.779074
Outstanding requests per worker:
0 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144174,      15839,     110018,      34156,   0.166988,   0.190100,   0.209100,   0.300100,   0.055341,   0.059000,   1.057000, 588.936965
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144087,      15926,     111640,      32447,   0.171326,   0.191100,   0.212100,   0.425100,   0.072542,   0.061000,   1.117000, 600.212372
Outstanding requests per worker:
0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:07   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:08   0:00 /usr/lib/linux
memcache     10 88.2  0.0 130496 51136 pts/0    Sl+  10:08   0:32 memcached -t 1
memcache     23  0.0  0.0   6656  4416 pts/1    Rs+  10:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3824541599      instructions:u            #    0.58  insn per cycle         
        6590738229      cycles:u                                                    
          25596159      armv8_pmuv3_0/br_mis_pred/:u                                   
         655219658      armv8_pmuv3_0/br_pred/:u                                    

      37.040832832 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 27000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 1876881920
starting receive base loop
num_worker_connections 32
Creating worker on tid 1543303680
starting receive base loop
num_worker_connections 32
Creating worker on tid 1207759360
starting receive base loop
num_worker_connections 32
Creating worker on tid 872215040
starting receive base loop
num_worker_connections 32
Creating worker on tid 536670720
starting receive base loop
num_worker_connections 32
Creating worker on tid 201126400
starting receive base loop
num_worker_connections 32
Creating worker on tid 4160549376
starting receive base loop
Created 256 connections total
Creating worker on tid 3825005056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282904.281329,       0.0,       73209,      65973,       7236,      39050,      26923,   4.026167,   0.145100,   3.100000, 143.100000,  23.865965,   0.000000, 296.546996, 401.900005
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121725,      13425,      80851,      40874,   0.103997,   0.131000,   0.133100,   0.162100,   0.022274,   0.059000,   1.306000, 480.163672
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121498,      13643,      85446,      36052,   0.104917,   0.132100,   0.134100,   0.166100,   0.024206,   0.058000,   1.439000, 522.681559
Outstanding requests per worker:
0 0 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121639,      13506,      88421,      33218,   0.105010,   0.132100,   0.134100,   0.165100,   0.023265,   0.058000,   1.367000, 548.800130
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121689,      13457,      90378,      31311,   0.105482,   0.132100,   0.137100,   0.167100,   0.024309,   0.059000,   1.373000, 566.872018
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121589,      13560,      92044,      29545,   0.105475,   0.132100,   0.136100,   0.167100,   0.025761,   0.060000,   0.778000, 581.235564
Outstanding requests per worker:
1 0 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121759,      13382,      93158,      28601,   0.105148,   0.132100,   0.135100,   0.165100,   0.022623,   0.059000,   1.311000, 590.123605
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:08   0:00 /usr/lib/linux
memcache      9 79.4  0.0 124352 42944 pts/0    Sl+  10:08   0:29 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3278418740      instructions:u            #    0.54  insn per cycle         
        6044623991      cycles:u                                                    
          21868055      armv8_pmuv3_0/br_mis_pred/:u                                   
         564566581      armv8_pmuv3_0/br_pred/:u                                    

      37.109499559 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 28000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2427908608
starting receive base loop
num_worker_connections 32
Creating worker on tid 2088235520
starting receive base loop
num_worker_connections 32
Creating worker on tid 1752691200
starting receive base loop
num_worker_connections 32
Creating worker on tid 1417146880
starting receive base loop
num_worker_connections 32
Creating worker on tid 1081602560
starting receive base loop
num_worker_connections 32
Creating worker on tid 746058240
starting receive base loop
num_worker_connections 32
Creating worker on tid 410513920
starting receive base loop
Created 256 connections total
Creating worker on tid 74969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282944.281369,       0.0,       78480,      70746,       7734,      42125,      28621,   3.432468,   0.153100,   2.400000, 126.900000,  22.716164,   0.000000, 313.118994, 405.552116
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.2,      140366,     126287,      14079,      84335,      41952,   0.118472,   0.142100,   0.149100,   0.178100,   0.024081,   0.054000,   0.553000, 484.023486
Outstanding requests per worker:
1 1 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.2,      140356,     126151,      14205,      89127,      37024,   0.119131,   0.142100,   0.151100,   0.183100,   0.026014,   0.058000,   1.522000, 525.603800
Outstanding requests per worker:
0 0 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126350,      14010,      92156,      34194,   0.119232,   0.143100,   0.152000,   0.181100,   0.025383,   0.059000,   0.896000, 550.344329
Outstanding requests per worker:
0 0 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126223,      14140,      94142,      32081,   0.119792,   0.143100,   0.153100,   0.186100,   0.028037,   0.056000,   1.577000, 568.025194
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.0,      140365,     126516,      13849,      95813,      30703,   0.119842,   0.143100,   0.153100,   0.183100,   0.029029,   0.055000,   0.889000, 581.885501
Outstanding requests per worker:
0 0 0 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.4,      140357,     126266,      14091,      96889,      29377,   0.119930,   0.143100,   0.154100,   0.186100,   0.024490,   0.059000,   0.884000, 593.181126
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:09   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   10:09   0:00 /usr/lib/linux
memcache     12 84.5  0.0 127424 45376 pts/0    Sl+  10:09   0:30 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  10:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3389141875      instructions:u            #    0.55  insn per cycle         
        6182021469      cycles:u                                                    
          23389145      armv8_pmuv3_0/br_mis_pred/:u                                   
         581166952      armv8_pmuv3_0/br_pred/:u                                    

      35.840470998 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 29000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 1913057792
starting receive base loop
num_worker_connections 32
Creating worker on tid 1578168832
starting receive base loop
num_worker_connections 32
Creating worker on tid 1242624512
starting receive base loop
num_worker_connections 32
Creating worker on tid 907080192
starting receive base loop
num_worker_connections 32
Creating worker on tid 571535872
starting receive base loop
num_worker_connections 32
Creating worker on tid 235991552
starting receive base loop
num_worker_connections 32
Creating worker on tid 4195414528
starting receive base loop
Created 256 connections total
Creating worker on tid 3859870208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575282985.281410,       0.0,       78904,      71100,       7804,      42564,      28536,   3.259874,   1.200000,   5.800000, 114.200000,  19.568927,   0.000000, 262.486011, 408.243868
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.6,      145463,     130832,      14631,      87412,      43420,   0.091550,   0.109100,   0.119100,   0.153100,   0.020813,   0.052000,   0.682000, 483.758499
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     130962,      14503,      92661,      38301,   0.091951,   0.109100,   0.120100,   0.153100,   0.020036,   0.052000,   0.622000, 526.736275
Outstanding requests per worker:
0 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.6,      145468,     130887,      14581,      95544,      35343,   0.092041,   0.109100,   0.120100,   0.152000,   0.020749,   0.053000,   0.673000, 551.119103
Outstanding requests per worker:
0 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.2,      145471,     130971,      14500,      97640,      33331,   0.092736,   0.110100,   0.122100,   0.155100,   0.021520,   0.053000,   0.659000, 567.987608
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     130733,      14728,      99378,      31355,   0.093451,   0.114100,   0.127100,   0.156100,   0.025941,   0.053000,   0.871000, 584.003427
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     131087,      14378,     100642,      30445,   0.093359,   0.114100,   0.125100,   0.155100,   0.027198,   0.054000,   0.875000, 593.007468
Outstanding requests per worker:
1 0 1 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:10   0:00 /usr/lib/linux
memcache      8 88.2  0.0 127424 48064 pts/0    Sl+  10:10   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3588604598      instructions:u            #    0.53  insn per cycle         
        6708344100      cycles:u                                                    
          25604007      armv8_pmuv3_0/br_mis_pred/:u                                   
         626681868      armv8_pmuv3_0/br_pred/:u                                    

      35.679686584 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 30000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2352017920
starting receive base loop
num_worker_connections 32
Creating worker on tid 2013065728
starting receive base loop
num_worker_connections 32
Creating worker on tid 1677521408
starting receive base loop
num_worker_connections 32
Creating worker on tid 1341977088
starting receive base loop
num_worker_connections 32
Creating worker on tid 1006432768
starting receive base loop
num_worker_connections 32
Creating worker on tid 670888448
starting receive base loop
num_worker_connections 32
Creating worker on tid 335344128
starting receive base loop
Created 256 connections total
Creating worker on tid 4294767104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283026.281451,       0.0,       82473,      74275,       8198,      44806,      29469,   3.585723,   2.400000,   6.000000, 120.400000,  21.005963,   0.000000, 293.655008, 411.944113
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135496,      14888,      91061,      44435,   0.101364,   0.141100,   0.151100,   0.185100,   0.029656,   0.053000,   0.774000, 487.671481
Outstanding requests per worker:
0 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135299,      15083,      96123,      39176,   0.102876,   0.142100,   0.153100,   0.188100,   0.034326,   0.053000,   1.401000, 529.267947
Outstanding requests per worker:
1 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135509,      14874,      99006,      36503,   0.103162,   0.142100,   0.153100,   0.187100,   0.033736,   0.053000,   1.404000, 552.718491
Outstanding requests per worker:
1 1 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135140,      15243,     100930,      34210,   0.174421,   0.144100,   0.163100,   3.600000,   0.539648,   0.052000,   7.691000, 569.703396
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135299,      15088,     102834,      32465,   0.104303,   0.143100,   0.154100,   0.189100,   0.035242,   0.053000,   1.299000, 585.529856
Outstanding requests per worker:
0 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135386,      14997,     104112,      31274,   0.105010,   0.143100,   0.154100,   0.196000,   0.040760,   0.053000,   0.945000, 595.942232
Outstanding requests per worker:
1 0 1 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:10   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:10   0:00 /usr/lib/linux
memcache     11 87.1  0.0 128448 48832 pts/0    Sl+  10:10   0:32 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  10:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3673108572      instructions:u            #    0.55  insn per cycle         
        6703530432      cycles:u                                                    
          25927480      armv8_pmuv3_0/br_mis_pred/:u                                   
         637259948      armv8_pmuv3_0/br_pred/:u                                    

      36.990574271 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 31000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2224157184
starting receive base loop
num_worker_connections 32
Creating worker on tid 1886908928
starting receive base loop
num_worker_connections 32
Creating worker on tid 1551364608
starting receive base loop
num_worker_connections 32
Creating worker on tid 1215820288
starting receive base loop
num_worker_connections 32
Creating worker on tid 880275968
starting receive base loop
num_worker_connections 32
Creating worker on tid 544731648
starting receive base loop
num_worker_connections 32
Creating worker on tid 209187328
starting receive base loop
Created 256 connections total
Creating worker on tid 4168610304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283068.281493,       0.0,       84778,      76403,       8375,      45824,      30579,   6.074304,   9.700000,  14.000000, 110.400000,  19.269639,   0.000000, 280.559003, 408.984412
Outstanding requests per worker:
1 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139483,      15572,      94440,      45043,   0.125299,   0.160100,   0.175000,   0.226100,   0.036778,   0.052000,   1.506000, 492.984909
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139531,      15515,      99245,      40286,   0.128260,   0.164100,   0.182100,   0.235100,   0.041996,   0.054000,   0.831000, 530.597423
Outstanding requests per worker:
0 0 0 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139550,      15497,     102308,      37242,   0.130536,   0.166100,   0.186100,   0.244100,   0.046656,   0.054000,   0.956000, 555.463540
Outstanding requests per worker:
0 0 0 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139437,      15615,     104387,      35050,   0.129359,   0.167100,   0.185100,   0.221100,   0.034655,   0.053000,   1.483000, 571.796144
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139518,      15536,     106249,      33269,   0.136537,   0.176100,   0.197100,   0.295100,   0.059227,   0.054000,   1.119000, 587.423530
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139319,      15726,     107692,      31627,   0.137384,   0.177100,   0.197100,   0.287100,   0.060956,   0.053000,   1.110000, 598.882371
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:11   0:00 /usr/lib/linux
memcache      8 88.2  0.0 129472 47808 pts/0    Sl+  10:11   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3732223995      instructions:u            #    0.56  insn per cycle         
        6641171239      cycles:u                                                    
          25545386      armv8_pmuv3_0/br_mis_pred/:u                                   
         634888762      armv8_pmuv3_0/br_pred/:u                                    

      37.200156521 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 256 conns, 8 threads, 32000 rps'
==> Bench: 4096 keys, 256 conns, 8 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 8'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2677535232
starting receive base loop
num_worker_connections 32
Creating worker on tid 2340549120
starting receive base loop
num_worker_connections 32
Creating worker on tid 2005004800
starting receive base loop
num_worker_connections 32
Creating worker on tid 1669460480
starting receive base loop
num_worker_connections 32
Creating worker on tid 1333916160
starting receive base loop
num_worker_connections 32
Creating worker on tid 998371840
starting receive base loop
num_worker_connections 32
Creating worker on tid 662827520
starting receive base loop
Created 256 connections total
Creating worker on tid 327283200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283108.281533,       0.0,       86487,      77797,       8690,      46900,      30897,   8.597633,  15.600000,  18.700000, 122.100000,  20.041868,   0.000000, 279.917002, 412.632711
Outstanding requests per worker:
28 31 30 27 27 24 27 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.6,      159988,     143824,      16164,      97160,      46664,   7.139034,  12.700000,  13.400000,  14.300000,   4.055615,   0.090000,  16.635999, 491.663721
Outstanding requests per worker:
27 37 25 32 36 29 33 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143977,      16030,     102696,      41281,   7.876777,  14.300000,  15.000000,  16.900000,   4.574212,   0.090000,  20.553000, 533.286560
Outstanding requests per worker:
33 31 31 34 29 30 30 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144060,      15952,     105998,      38062,   8.151165,  15.000000,  15.800000,  17.000000,   4.775997,   0.090000,  19.440001, 557.548299
Outstanding requests per worker:
31 29 36 34 26 35 28 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143976,      16033,     108384,      35592,   8.327068,  15.400000,  16.200000,  17.500000,   4.896150,   0.087000,  20.821000, 576.560628
Outstanding requests per worker:
34 31 30 36 30 35 28 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.0,      160000,     143932,      16068,     109805,      34127,   8.543524,  16.000000,  16.800000,  18.100000,   5.053514,   0.090000,  20.802001, 588.282092
Outstanding requests per worker:
35 28 29 38 34 40 40 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.6,      159998,     143872,      16126,     111544,      32328,   8.919856,  16.800000,  17.800000,  19.200000,   5.339712,   0.086000,  23.560001, 602.358478
Outstanding requests per worker:
35 34 40 36 35 27 40 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:12   0:00 /usr/lib/linux
memcache      8 93.6  0.0 130496 51776 pts/0    Sl+  10:12   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3792445111      instructions:u            #    0.69  insn per cycle         
        5489536009      cycles:u                                                    
          22464593      armv8_pmuv3_0/br_mis_pred/:u                                   
         597363006      armv8_pmuv3_0/br_pred/:u                                    

      35.750128608 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 27000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2424173056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283149.281574,       0.0,       53967,      48622,       5345,      28389,      20233,   1.824519,   2.500000,   2.900000,   5.900000,   1.124469,   0.000000,  45.818999, 392.230307
Outstanding requests per worker:
50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.8,      135139,     121580,      13559,      80032,      41548,   1.758413,   2.500000,   2.800000,   3.400000,   0.584316,   0.229000,   6.380000, 472.061128
Outstanding requests per worker:
55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121545,      13605,      85032,      36513,   1.808201,   2.600000,   2.800000,   3.500000,   0.600312,   0.228000,   6.489000, 518.691859
Outstanding requests per worker:
54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27032.4,      135162,     121782,      13380,      88246,      33536,   1.840095,   2.700000,   2.900000,   3.600000,   0.618495,   0.228000,   8.164000, 544.475497
Outstanding requests per worker:
41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27025.8,      135129,     121651,      13478,      90096,      31555,   1.846145,   2.700000,   2.900000,   3.600000,   0.620087,   0.235000,   7.096000, 563.831543
Outstanding requests per worker:
54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.6,      135158,     121585,      13573,      91631,      29954,   1.855021,   2.700000,   2.900000,   3.600000,   0.624421,   0.224000,   6.162000, 577.510565
Outstanding requests per worker:
41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.8,      135134,     121841,      13293,      92994,      28847,   1.873306,   2.700000,   3.000000,   3.700000,   0.637436,   0.228000,   8.682000, 588.945626
Outstanding requests per worker:
56 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:12   0:00 /usr/lib/linux
memcache      8 77.2  0.0 123328 46656 pts/0    Sl+  10:12   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  10:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3267984700      instructions:u            #    0.54  insn per cycle         
        6073856233      cycles:u                                                    
          23280047      armv8_pmuv3_0/br_mis_pred/:u                                   
         571312796      armv8_pmuv3_0/br_pred/:u                                    

      36.709722261 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 28000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3325227520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283191.281616,       0.0,       57040,      51388,       5652,      30267,      21121,   2.609214,   3.600000,   4.300000,  11.000000,   1.904361,   0.000000,  61.142001, 396.196953
Outstanding requests per worker:
66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.6,      142858,     128487,      14371,      84604,      43883,   2.503036,   3.700000,   4.100000,   5.100000,   0.899846,   0.232000,  10.002000, 473.559566
Outstanding requests per worker:
80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.6,      142868,     128522,      14346,      90465,      38057,   2.752412,   4.100000,   4.500000,   5.800000,   1.026003,   0.227000,  10.846000, 522.871843
Outstanding requests per worker:
86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.6,      142873,     128871,      14002,      93473,      35398,   2.725517,   4.000000,   4.400000,   5.700000,   0.998802,   0.231000,  10.797000, 546.082400
Outstanding requests per worker:
79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.0,      142860,     128432,      14428,      95491,      32941,   2.752288,   4.100000,   4.500000,   5.800000,   1.015815,   0.261000,  11.577000, 565.809424
Outstanding requests per worker:
87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28575.2,      142876,     128646,      14230,      97112,      31534,   2.884533,   4.300000,   4.800000,   6.200000,   1.094879,   0.233000,  12.030000, 580.243606
Outstanding requests per worker:
81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.4,      142862,     128749,      14113,      98576,      30173,   2.818063,   4.200000,   4.600000,   5.900000,   1.046078,   0.239000,  11.734000, 591.163124
Outstanding requests per worker:
91 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:13   0:00 /usr/lib/linux
memcache      8 80.2  0.0 127424 49280 pts/0    Sl+  10:13   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3456188238      instructions:u            #    0.55  insn per cycle         
        6340202589      cycles:u                                                    
          23760095      armv8_pmuv3_0/br_mis_pred/:u                                   
         603253508      armv8_pmuv3_0/br_pred/:u                                    

      36.800696018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 29000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3255562752
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283232.281657,       0.0,       58692,      52884,       5808,      30896,      21988,   3.764165,   5.500000,   6.800000,  15.400000,   3.037689,   0.000000,  95.582001, 393.978027
Outstanding requests per worker:
91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.2,      147051,     132257,      14794,      87180,      45077,   3.632383,   5.500000,   6.200000,   8.100000,   1.466368,   0.262000,  16.857000, 474.990239
Outstanding requests per worker:
110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132358,      14715,      93140,      39218,   3.815947,   5.700000,   6.500000,   8.400000,   1.517456,   0.268000,  15.257000, 522.677783
Outstanding requests per worker:
102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.2,      147056,     132570,      14486,      96447,      36123,   3.958016,   6.000000,   6.800000,   8.900000,   1.617748,   0.254000,  18.722000, 549.152304
Outstanding requests per worker:
114 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132181,      14885,      98639,      33542,   3.965810,   6.000000,   6.900000,   9.000000,   1.633998,   0.252000,  24.912000, 568.890763
Outstanding requests per worker:
117 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132471,      14603,     100034,      32437,   3.874176,   5.800000,   6.600000,   8.600000,   1.557764,   0.239000,  18.821999, 580.931442
Outstanding requests per worker:
108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132485,      14582,     101861,      30624,   3.932163,   5.900000,   6.800000,   8.900000,   1.613019,   0.285000,  21.436000, 595.080832
Outstanding requests per worker:
107 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:14   0:00 /usr/lib/linux
memcache      8 83.9  0.0 126400 49536 pts/0    Sl+  10:14   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3539841389      instructions:u            #    0.56  insn per cycle         
        6336044375      cycles:u                                                    
          25531672      armv8_pmuv3_0/br_mis_pred/:u                                   
         617232761      armv8_pmuv3_0/br_pred/:u                                    

      36.719570474 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 30000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3174691328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283273.281698,       0.0,       60420,      54443,       5977,      32139,      22304,   5.598791,   8.900000,  11.300000,  20.300000,   3.591573,   0.000000,  79.360001, 398.896130
Outstanding requests per worker:
144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30298.8,      151494,     136239,      15255,      90569,      45670,   5.196989,   8.000000,   9.200000,  12.100000,   2.220987,   0.270000,  24.147000, 479.089497
Outstanding requests per worker:
178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136406,      15118,      96189,      40217,   5.861594,   9.200000,  10.800000,  14.600000,   2.666152,   0.251000,  30.822000, 523.966270
Outstanding requests per worker:
184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.0,      151535,     136515,      15020,      99634,      36881,   5.878510,   9.100000,  10.700000,  14.100000,   2.605525,   0.278000,  31.312000, 552.160188
Outstanding requests per worker:
184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136282,      15248,     101854,      34428,   6.007921,   9.300000,  10.900000,  14.500000,   2.671316,   0.285000,  35.362002, 570.682210
Outstanding requests per worker:
175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.0,      151515,     136467,      15048,     103601,      32866,   6.567667,  10.400000,  12.300000,  17.000000,   3.158042,   0.239000,  43.864999, 583.552676
Outstanding requests per worker:
186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30312.0,      151560,     136506,      15054,     105339,      31167,   6.294452,   9.800000,  11.600000,  15.400000,   2.841652,   0.293000,  29.137000, 597.788478
Outstanding requests per worker:
155 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:14   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:14   0:00 /usr/lib/linux
memcache      9 83.2  0.0 128448 52288 pts/0    Sl+  10:14   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3622835092      instructions:u            #    0.56  insn per cycle         
        6527376772      cycles:u                                                    
          24724601      armv8_pmuv3_0/br_mis_pred/:u                                   
         626811268      armv8_pmuv3_0/br_pred/:u                                    

      36.740088599 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 31000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2410607104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283314.281739,       0.0,       62235,      56081,       6154,      33016,      23065,   9.374750,  16.000000,  19.800000,  31.100000,   5.855161,   0.000000, 101.643004, 398.155614
Outstanding requests per worker:
223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31234.0,      156170,     140463,      15707,      93545,      46918,   8.849121,  14.500000,  17.300000,  23.600000,   4.442455,   0.319000,  49.749002, 481.536034
Outstanding requests per worker:
318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31247.8,      156239,     140599,      15640,      99636,      40963,  11.231920,  19.100000,  23.300000,  33.900000,   6.367619,   0.295000,  97.468004, 528.274518
Outstanding requests per worker:
336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.0,      156230,     140785,      15445,     103131,      37654,  11.238012,  18.900000,  22.700000,  31.600000,   6.018945,   0.311000,  82.644001, 554.251802
Outstanding requests per worker:
364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.4,      156232,     140477,      15755,     105463,      35014,  11.761308,  19.900000,  24.100000,  33.600000,   6.421570,   0.334000,  83.320998, 574.532578
Outstanding requests per worker:
390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31237.4,      156187,     140762,      15425,     107266,      33496,  13.994577,  24.600000,  30.200000,  44.000000,   8.430346,   0.324000, 101.856999, 586.433775
Outstanding requests per worker:
462 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31264.2,      156321,     140689,      15632,     108426,      32263,  13.390194,  23.200000,  28.400000,  40.000000,   7.644304,   0.291000,  81.358999, 597.602684
Outstanding requests per worker:
403 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:15   0:00 /usr/lib/linux
memcache      8 84.2  0.0 129472 51072 pts/0    Sl+  10:15   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3700591832      instructions:u            #    0.57  insn per cycle         
        6477165872      cycles:u                                                    
          24059312      armv8_pmuv3_0/br_mis_pred/:u                                   
         630912294      armv8_pmuv3_0/br_pred/:u                                    

      36.651059348 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 1 threads, 32000 rps'
==> Bench: 4096 keys, 512 conns, 1 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 4096 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 1'
Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2395468288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283356.281781,       0.0,       63585,      57301,       6284,      33632,      23669,  26.676868,  36.200000,  39.600000,  51.300000,   8.798453,   0.000000, 167.871997, 398.116054
Outstanding requests per worker:
887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31744.8,      158724,     142772,      15952,      95446,      47326,  53.204218, 112.000000, 144.100000, 228.600000,  46.111157,   0.593000, 509.630024, 482.765822
Outstanding requests per worker:
3463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31343.0,      156715,     141003,      15712,     100061,      40942, 176.526943, 363.800000, 440.800000, 628.300000, 136.744534,   1.115000, 926.172972, 528.754417
Outstanding requests per worker:
7841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31412.2,      157061,     141514,      15547,     103892,      37622, 290.358286, 597.400000, 701.200000, 893.500000, 211.191721,   0.834000, 1225.610971, 556.155349
Outstanding requests per worker:
10590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31413.4,      157067,     141263,      15804,     105711,      35552, 365.925369, 734.300000, 890.200000, 1176.700000, 266.143214,   1.085000, 1691.097975, 572.137764
Outstanding requests per worker:
12811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31421.0,      157105,     141574,      15531,     107650,      33924, 428.440554, 852.900000, 1033.700000, 1381.000000, 313.786356,   1.217000, 2028.805017, 585.576787
Outstanding requests per worker:
14463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31355.6,      156778,     141074,      15704,     108541,      32533, 479.999853, 949.500000, 1152.000000, 1530.700000, 353.002378,   1.169000, 2356.224060, 595.948127
Outstanding requests per worker:
16070 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:16   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:16   0:00 /usr/lib/linux
memcache     10 85.3  0.0 129472 52352 pts/0    Sl+  10:16   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3656860714      instructions:u            #    0.58  insn per cycle         
        6253936205      cycles:u                                                    
          22864839      armv8_pmuv3_0/br_mis_pred/:u                                   
         608901689      armv8_pmuv3_0/br_pred/:u                                    

      37.961032482 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 27000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 301199872
starting receive base loop
Created 512 connections total
Creating worker on tid 2456875520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283397.281822,       0.0,       68766,      61977,       6789,      36484,      25493,   0.340333,   0.427100,   0.526100,   0.701100,   1.047073,   0.000000,  52.770000, 399.382884
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.8,      135154,     121473,      13681,      80299,      41174,   0.310726,   0.432100,   0.536100,   0.646000,   0.100406,   0.138000,   1.063000, 477.003104
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121620,      13526,      85399,      36221,   0.310984,   0.432100,   0.537100,   0.653100,   0.101348,   0.138000,   1.116000, 522.644195
Outstanding requests per worker:
5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121717,      13433,      88423,      33294,   0.311696,   0.435100,   0.539000,   0.653100,   0.101365,   0.139000,   1.100000, 548.940485
Outstanding requests per worker:
6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121637,      13503,      90385,      31252,   0.311427,   0.432100,   0.529100,   0.643100,   0.100359,   0.137000,   1.254000, 565.454796
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121683,      13462,      91820,      29863,   0.311772,   0.435100,   0.538100,   0.649100,   0.100495,   0.138000,   0.996000, 578.436774
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121811,      13335,      93035,      28776,   0.312372,   0.437100,   0.539000,   0.654000,   0.102749,   0.138000,   1.436000, 589.343056
Outstanding requests per worker:
3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:16   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:16   0:00 /usr/lib/linux
memcache     10 80.2  0.0 126400 49024 pts/0    Sl+  10:16   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3316851029      instructions:u            #    0.53  insn per cycle         
        6282812165      cycles:u                                                    
          22640361      armv8_pmuv3_0/br_mis_pred/:u                                   
         578316852      armv8_pmuv3_0/br_pred/:u                                    

      36.829924879 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 28000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 1046409728
starting receive base loop
Created 512 connections total
Creating worker on tid 3195073024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283439.281864,       0.0,       71537,      64401,       7136,      38406,      25995,   0.359444,   0.462100,   0.555100,   0.726100,   1.092986,   0.000000,  53.925999, 405.150867
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.4,      140862,     126644,      14218,      84494,      42150,   0.327814,   0.466100,   0.551100,   0.665100,   0.105156,   0.139000,   1.116000, 482.052509
Outstanding requests per worker:
6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126692,      14164,      89418,      37274,   0.327353,   0.466100,   0.553100,   0.669000,   0.106009,   0.136000,   1.096000, 523.939909
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126824,      14031,      92259,      34565,   0.327620,   0.466100,   0.549100,   0.665100,   0.105189,   0.137000,   1.166000, 548.594935
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126689,      14170,      93905,      32784,   0.329240,   0.468100,   0.552100,   0.669000,   0.106217,   0.137000,   1.301000, 563.745850
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126729,      14131,      95921,      30808,   0.328880,   0.467100,   0.552100,   0.667100,   0.106776,   0.138000,   1.454000, 581.209581
Outstanding requests per worker:
6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126723,      14129,      97234,      29489,   0.327956,   0.467100,   0.547000,   0.658100,   0.103825,   0.138000,   1.090000, 593.170671
Outstanding requests per worker:
5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:17   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:17   0:00 /usr/lib/linux
memcache      9 80.2  0.0 128448 52800 pts/0    Sl+  10:17   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3434617949      instructions:u            #    0.52  insn per cycle         
        6556967560      cycles:u                                                    
          23318366      armv8_pmuv3_0/br_mis_pred/:u                                   
         598656406      armv8_pmuv3_0/br_pred/:u                                    

      38.110283841 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 29000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 609677824
starting receive base loop
Created 512 connections total
Creating worker on tid 2757554688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283481.281906,       0.0,       74982,      67554,       7428,      40402,      27152,   0.373075,   0.500100,   0.592100,   0.777100,   0.823035,   0.000000,  47.993001, 407.618157
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132215,      14852,      88444,      43771,   0.348976,   0.498100,   0.580100,   0.684100,   0.110077,   0.147000,   1.619000, 484.611360
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132414,      14657,      93800,      38614,   0.349181,   0.500100,   0.577100,   0.680100,   0.109190,   0.157000,   1.399000, 526.401891
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132499,      14575,      96517,      35982,   0.349346,   0.501000,   0.577100,   0.679100,   0.109406,   0.150000,   1.168000, 549.495777
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.6,      147078,     132237,      14841,      98911,      33326,   0.349686,   0.501000,   0.579100,   0.682100,   0.110468,   0.154000,   1.240000, 571.229686
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132444,      14620,     100415,      32029,   0.350052,   0.500100,   0.576100,   0.685100,   0.111412,   0.159000,   1.492000, 582.594010
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132422,      14648,     102025,      30397,   0.350322,   0.502100,   0.578100,   0.675100,   0.109152,   0.149000,   0.978000, 595.636964
Outstanding requests per worker:
6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:18   0:00 /usr/lib/linux
memcache      8 86.8  0.0 127424 50624 pts/0    Sl+  10:18   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3575021871      instructions:u            #    0.54  insn per cycle         
        6577348440      cycles:u                                                    
          24656059      armv8_pmuv3_0/br_mis_pred/:u                                   
         620863365      armv8_pmuv3_0/br_pred/:u                                    

      36.880031827 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 30000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 342684160
starting receive base loop
Created 512 connections total
Creating worker on tid 2497180160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283522.281947,       0.0,       76949,      69251,       7698,      41315,      27936,   0.453133,   0.532100,   0.638100,   1.900000,   2.010357,   0.000000, 104.133002, 406.246682
Outstanding requests per worker:
9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136376,      15145,      90819,      45557,   0.359848,   0.510100,   0.582100,   0.687100,   0.111627,   0.158000,   1.564000, 482.536590
Outstanding requests per worker:
10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.4,      151537,     136420,      15117,      96619,      39801,   0.362573,   0.515100,   0.588100,   0.696100,   0.114435,   0.158000,   1.779000, 528.318846
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136430,      15095,      99576,      36854,   0.362981,   0.515100,   0.585000,   0.693100,   0.113858,   0.161000,   1.674000, 552.562068
Outstanding requests per worker:
7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136358,      15167,     101665,      34693,   0.364595,   0.517100,   0.588100,   0.694100,   0.115770,   0.149000,   1.473000, 570.974024
Outstanding requests per worker:
6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.6,      151533,     136337,      15196,     103696,      32641,   0.365553,   0.520100,   0.592100,   0.698100,   0.116002,   0.158000,   1.604000, 585.398835
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136519,      15008,     105335,      31184,   0.363795,   0.516000,   0.585000,   0.690100,   0.112432,   0.153000,   1.354000, 598.241966
Outstanding requests per worker:
5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:19   0:00 /usr/lib/linux
memcache      8 85.7  0.0 130496 53760 pts/0    Sl+  10:19   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3662676908      instructions:u            #    0.55  insn per cycle         
        6704903699      cycles:u                                                    
          24525837      armv8_pmuv3_0/br_mis_pred/:u                                   
         632311636      armv8_pmuv3_0/br_pred/:u                                    

      36.750377813 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 31000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 347992576
starting receive base loop
Created 512 connections total
Creating worker on tid 2497180160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283565.281990,       0.0,       79493,      71488,       8005,      42955,      28533,   0.435486,   0.599100,   0.693100,   1.500000,   0.785563,   0.000000,  45.910001, 411.596212
Outstanding requests per worker:
23 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31255.0,      156275,     140672,      15603,      94856,      45816,   0.381824,   0.536100,   0.607100,   0.701100,   0.116645,   0.168000,   1.953000, 491.319097
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140598,      15664,     100214,      40384,   0.383266,   0.538100,   0.608000,   0.701100,   0.115763,   0.154000,   1.547000, 532.819684
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140762,      15499,     103274,      37488,   0.385395,   0.540100,   0.607100,   0.705100,   0.118089,   0.164000,   1.391000, 556.123869
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140524,      15740,     105167,      35357,   0.385159,   0.541100,   0.609100,   0.707100,   0.117530,   0.160000,   1.397000, 572.258781
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140645,      15615,     106993,      33652,   0.387898,   0.543100,   0.611100,   0.715000,   0.118373,   0.143000,   1.477000, 586.717750
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140632,      15630,     108902,      31730,   0.385436,   0.539000,   0.604100,   0.691100,   0.113285,   0.159000,   1.092000, 600.347325
Outstanding requests per worker:
4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:19   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:19   0:00 /usr/lib/linux
memcache      9 84.3  0.0 130496 52992 pts/0    Sl+  10:19   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3750825149      instructions:u            #    0.57  insn per cycle         
        6588961499      cycles:u                                                    
          24215535      armv8_pmuv3_0/br_mis_pred/:u                                   
         643207488      armv8_pmuv3_0/br_pred/:u                                    

      38.029774816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 2 threads, 32000 rps'
==> Bench: 4096 keys, 512 conns, 2 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 4096 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 2'
Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 187232768
starting receive base loop
Created 512 connections total
Creating worker on tid 2338779648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283607.282032,       0.0,       81822,      73627,       8195,      44436,      29191,  11.554047,  28.400000,  31.300000,  33.200000,  10.307966,   0.000000,  53.754002, 412.088093
Outstanding requests per worker:
222 214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32343.0,      161715,     145643,      16072,      98035,      47608,   2.008568,   6.900000,  12.900000,  21.400000,   4.309745,   0.168000,  24.726000, 489.331406
Outstanding requests per worker:
10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.6,      161308,     145077,      16231,     103356,      41721,   0.444104,   0.606100,   0.669000,   0.778100,   0.128664,   0.170000,   2.348000, 532.867119
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.2,      161296,     145274,      16022,     106554,      38720,   0.452236,   0.612100,   0.674100,   0.805100,   0.138177,   0.173000,   2.410000, 555.724025
Outstanding requests per worker:
9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.8,      161304,     145284,      16020,     109266,      36018,   0.456785,   0.616100,   0.677000,   0.814100,   0.135084,   0.156000,   1.615000, 575.733364
Outstanding requests per worker:
8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32258.8,      161294,     145131,      16163,     110860,      34271,   0.474665,   0.650100,   0.711100,   1.100000,   0.154172,   0.179000,   2.354000, 589.815698
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.2,      161296,     145168,      16128,     112317,      32851,   0.474367,   0.647100,   0.709100,   1.200000,   0.157438,   0.177000,   1.917000, 600.639969
Outstanding requests per worker:
11 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:20   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:20   0:00 /usr/lib/linux
memcache     10 87.4  0.0 129472 54400 pts/0    Sl+  10:20   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3789479674      instructions:u            #    0.57  insn per cycle         
        6593074709      cycles:u                                                    
          23446958      armv8_pmuv3_0/br_mis_pred/:u                                   
         636872911      armv8_pmuv3_0/br_pred/:u                                    

      38.140235852 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 27000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 512 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1655960064
starting receive base loop
num_worker_connections 128
Creating worker on tid 543945216
starting receive base loop
num_worker_connections 128
Creating worker on tid 3730305536
starting receive base loop
Created 512 connections total
Creating worker on tid 2616259072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283650.282075,       0.0,       77703,      69932,       7771,      41884,      28048,   0.341834,   0.258000,   0.385100,   0.944100,   3.025207,   0.000000, 102.185003, 410.006435
Outstanding requests per worker:
2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121681,      13466,      81341,      40340,   0.172047,   0.266100,   0.377100,   0.497100,   0.083509,   0.073000,   0.994000, 485.161858
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121725,      13425,      85675,      36050,   0.172365,   0.268100,   0.381100,   0.501000,   0.084638,   0.067000,   0.999000, 523.452150
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121708,      13444,      88487,      33221,   0.171879,   0.266100,   0.376100,   0.495100,   0.083593,   0.071000,   0.976000, 548.151716
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121536,      13606,      90355,      31181,   0.172447,   0.266100,   0.377100,   0.500100,   0.084773,   0.072000,   1.128000, 566.129789
Outstanding requests per worker:
0 2 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121402,      13743,      91590,      29812,   0.172888,   0.268100,   0.378100,   0.495100,   0.084581,   0.072000,   1.151000, 579.104586
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121534,      13615,      92825,      28709,   0.173007,   0.268100,   0.378100,   0.496100,   0.085408,   0.072000,   1.246000, 589.342184
Outstanding requests per worker:
1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:21   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:21   0:00 /usr/lib/linux
memcache     10 80.6  0.0 127424 51072 pts/0    Sl+  10:21   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3351470224      instructions:u            #    0.52  insn per cycle         
        6424190169      cycles:u                                                    
          22696233      armv8_pmuv3_0/br_mis_pred/:u                                   
         583693475      armv8_pmuv3_0/br_pred/:u                                    

      38.281341460 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 28000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1629745664
starting receive base loop
num_worker_connections 128
Creating worker on tid 519762432
starting receive base loop
num_worker_connections 128
Creating worker on tid 3706122752
starting receive base loop
Created 512 connections total
Creating worker on tid 2597515776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283692.282117,       0.0,       80905,      72874,       8031,      43656,      29218,   0.576391,   0.331100,   0.405100,   3.200000,   5.531824,   0.000000, 182.990998, 409.721780
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126667,      14194,      85114,      41553,   0.183121,   0.307100,   0.376100,   0.489100,   0.083635,   0.075000,   0.918000, 487.801006
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126655,      14197,      89854,      36801,   0.181944,   0.302100,   0.371100,   0.481100,   0.081641,   0.073000,   0.954000, 528.388180
Outstanding requests per worker:
1 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126743,      14112,      92727,      34016,   0.182792,   0.306100,   0.374100,   0.486100,   0.082934,   0.074000,   0.950000, 553.857318
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126748,      14110,      94506,      32242,   0.183903,   0.310100,   0.376100,   0.485100,   0.084407,   0.072000,   1.077000, 569.243870
Outstanding requests per worker:
2 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126797,      14064,      96211,      30586,   0.183566,   0.308100,   0.376100,   0.484100,   0.084405,   0.071000,   1.098000, 583.116572
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.0,      140850,     126842,      14008,      97426,      29416,   0.183371,   0.308100,   0.376100,   0.484100,   0.082014,   0.072000,   0.772000, 593.872471
Outstanding requests per worker:
1 1 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:21   0:00 /usr/lib/linux
memcache      8 84.1  0.0 127424 49472 pts/0    Sl+  10:21   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3459818770      instructions:u            #    0.54  insn per cycle         
        6396278744      cycles:u                                                    
          23449392      armv8_pmuv3_0/br_mis_pred/:u                                   
         601269437      armv8_pmuv3_0/br_pred/:u                                    

      36.921525321 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 29000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 512 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1724641792
starting receive base loop
num_worker_connections 128
Creating worker on tid 611054080
starting receive base loop
num_worker_connections 128
Creating worker on tid 3797414400
starting receive base loop
Created 512 connections total
Creating worker on tid 2683367936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283734.282159,       0.0,       84806,      76443,       8363,      46073,      30370,   0.382075,   0.346000,   0.433100,   2.100000,   3.231963,   0.000000, 114.846997, 412.836597
Outstanding requests per worker:
2 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131437,      14559,      88100,      43337,   0.177937,   0.330100,   0.373100,   0.482100,   0.088910,   0.069000,   0.934000, 487.505375
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.6,      145998,     131305,      14693,      93236,      38069,   0.178812,   0.333100,   0.377100,   0.484100,   0.090836,   0.072000,   1.048000, 530.068428
Outstanding requests per worker:
1 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131349,      14653,      96003,      35346,   0.177329,   0.325100,   0.371100,   0.475100,   0.086839,   0.073000,   0.875000, 553.128254
Outstanding requests per worker:
2 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131375,      14618,      98254,      33121,   0.179828,   0.335100,   0.377100,   0.483100,   0.090624,   0.069000,   1.029000, 570.784921
Outstanding requests per worker:
1 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131353,      14643,      99890,      31463,   0.179872,   0.334100,   0.377100,   0.479100,   0.090322,   0.071000,   1.063000, 584.445205
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.2,      146001,     131604,      14397,     101296,      30308,   0.179139,   0.331100,   0.373100,   0.474100,   0.087028,   0.070000,   0.745000, 595.815560
Outstanding requests per worker:
0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:22   0:00 /usr/lib/linux
memcache      8 84.3  0.0 128448 51904 pts/0    Sl+  10:22   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3649734583      instructions:u            #    0.54  insn per cycle         
        6791764315      cycles:u                                                    
          24050394      armv8_pmuv3_0/br_mis_pred/:u                                   
         641183964      armv8_pmuv3_0/br_pred/:u                                    

      38.379458211 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 30000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1957032448
starting receive base loop
num_worker_connections 128
Creating worker on tid 844624384
starting receive base loop
num_worker_connections 128
Creating worker on tid 4025545216
starting receive base loop
Created 512 connections total
Creating worker on tid 2916938240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283776.282201,       0.0,       85682,      77129,       8553,      46389,      30740,   0.556434,   0.378100,   0.589100,   3.800000,   4.386024,   0.000000, 135.893002, 411.401989
Outstanding requests per worker:
2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135359,      15033,      91004,      44355,   0.194633,   0.345100,   0.379100,   0.480100,   0.090754,   0.073000,   0.912000, 489.424220
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135123,      15260,      96157,      38966,   0.195514,   0.346000,   0.380100,   0.479100,   0.092373,   0.073000,   1.024000, 529.902289
Outstanding requests per worker:
2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135306,      15078,      98773,      36533,   0.198235,   0.348100,   0.386100,   0.483100,   0.093942,   0.073000,   1.035000, 553.742096
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135145,      15239,     101256,      33889,   0.197121,   0.346000,   0.381100,   0.478100,   0.089482,   0.073000,   0.835000, 573.036035
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135293,      15091,     102699,      32594,   0.199089,   0.348100,   0.386100,   0.481100,   0.094206,   0.072000,   1.161000, 584.518467
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135327,      15057,     104486,      30841,   0.198744,   0.347100,   0.384100,   0.480100,   0.093191,   0.072000,   1.069000, 597.135058
Outstanding requests per worker:
1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:23   0:00 /usr/lib/linux
memcache      8 90.1  0.0 129472 53184 pts/0    Sl+  10:23   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3689629526      instructions:u            #    0.55  insn per cycle         
        6732571068      cycles:u                                                    
          23987399      armv8_pmuv3_0/br_mis_pred/:u                                   
         640441201      armv8_pmuv3_0/br_pred/:u                                    

      36.890398593 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 31000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1691021824
starting receive base loop
num_worker_connections 128
Creating worker on tid 576188928
starting receive base loop
num_worker_connections 128
Creating worker on tid 3757109760
starting receive base loop
Created 512 connections total
Creating worker on tid 2648502784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283818.282243,       0.0,       89064,      80147,       8917,      48403,      31744,   6.181980,  15.600000,  17.200000,  19.500000,   6.542333,   0.000000, 103.357002, 413.825271
Outstanding requests per worker:
42 46 43 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31043.2,      155216,     139765,      15451,      94701,      45064,   0.324140,   0.368100,   0.464100,   4.700000,   0.693146,   0.073000,   7.278000, 494.567238
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139505,      15553,      99493,      40012,   0.218198,   0.352100,   0.423100,   0.484100,   0.094953,   0.071000,   1.063000, 533.355134
Outstanding requests per worker:
1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139497,      15550,     102426,      37071,   0.219196,   0.353100,   0.423100,   0.480100,   0.093106,   0.074000,   1.081000, 556.158154
Outstanding requests per worker:
3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139614,      15441,     104638,      34976,   0.219558,   0.353100,   0.423100,   0.478100,   0.090228,   0.075000,   0.951000, 572.594231
Outstanding requests per worker:
1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139431,      15621,     106713,      32718,   0.225165,   0.356100,   0.429100,   0.486100,   0.099025,   0.076000,   1.216000, 589.523370
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139439,      15614,     107753,      31686,   0.227535,   0.357100,   0.430100,   0.489100,   0.104985,   0.074000,   1.340000, 599.513974
Outstanding requests per worker:
1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:23   0:00 /usr/lib/linux
memcache      8 88.3  0.0 129472 52288 pts/0    Sl+  10:23   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3780330281      instructions:u            #    0.57  insn per cycle         
        6603863486      cycles:u                                                    
          24537816      armv8_pmuv3_0/br_mis_pred/:u                                   
         646437318      armv8_pmuv3_0/br_pred/:u                                    

      36.990788639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 4 threads, 32000 rps'
==> Bench: 4096 keys, 512 conns, 4 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 4096 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 4'
Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1481044480
starting receive base loop
num_worker_connections 128
Creating worker on tid 366801408
starting receive base loop
num_worker_connections 128
Creating worker on tid 3547722240
starting receive base loop
Created 512 connections total
Creating worker on tid 2439115264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283859.282284,       0.0,       90954,      81866,       9088,      49589,      32277,   9.483214,  24.500000,  26.900000,  28.800000,   9.771933,   0.000000, 121.716999, 414.533017
Outstanding requests per worker:
103 102 99 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32081.0,      160405,     144287,      16118,      97342,      46945,   1.505194,   5.400000,  10.300000,  17.200000,   3.483847,   0.072000,  21.609001, 490.810329
Outstanding requests per worker:
2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     144007,      16011,     102837,      41170,   0.269551,   0.428100,   0.452100,   0.594100,   0.110331,   0.074000,   1.117000, 533.737416
Outstanding requests per worker:
3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143984,      16024,     106064,      37920,   0.278415,   0.432100,   0.457100,   0.577100,   0.114932,   0.079000,   1.424000, 559.536393
Outstanding requests per worker:
3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143874,      16139,     108057,      35817,   0.277760,   0.431100,   0.452100,   0.537100,   0.097788,   0.078000,   0.902000, 574.942874
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144010,      16007,     110397,      33613,   0.290896,   0.438100,   0.469100,   0.674100,   0.119351,   0.084000,   1.227000, 591.528554
Outstanding requests per worker:
2 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144199,      15818,     111873,      32326,   0.299934,   0.441100,   0.477100,   0.973100,   0.139980,   0.078000,   1.541000, 602.115015
Outstanding requests per worker:
2 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:24   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:24   0:00 /usr/lib/linux
memcache     11 88.4  0.0 129472 54400 pts/0    Sl+  10:24   0:32 memcached -t 1
memcache     19  1.0  0.0   6656  4352 pts/1    Rs+  10:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3792326791      instructions:u            #    0.59  insn per cycle         
        6442278179      cycles:u                                                    
          22521534      armv8_pmuv3_0/br_mis_pred/:u                                   
         638895281      armv8_pmuv3_0/br_pred/:u                                    

      36.841358976 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 27000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 27000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2561143296
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
Created 512 connections total
Creating worker on tid 2686579200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283900.282325,       0.0,       83025,      74812,       8213,      44950,      29862,   0.770295,   0.267100,   0.387100,   9.800000,   7.056778,   0.000000, 143.588006, 410.487355
Outstanding requests per worker:
1 0 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121811,      13342,      81838,      39973,   0.150753,   0.262000,   0.363100,   0.468100,   0.085415,   0.067000,   0.848000, 487.271634
Outstanding requests per worker:
1 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121608,      13536,      86049,      35559,   0.150185,   0.262000,   0.361100,   0.464100,   0.084424,   0.067000,   0.933000, 527.303672
Outstanding requests per worker:
1 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121749,      13397,      88423,      33326,   0.150386,   0.261100,   0.361100,   0.463100,   0.085153,   0.063000,   1.136000, 548.944295
Outstanding requests per worker:
0 1 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121573,      13576,      90306,      31267,   0.151036,   0.263100,   0.362100,   0.466100,   0.085837,   0.067000,   1.047000, 566.143461
Outstanding requests per worker:
1 0 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121754,      13398,      92221,      29533,   0.151560,   0.264100,   0.363100,   0.470100,   0.086736,   0.067000,   1.154000, 582.127905
Outstanding requests per worker:
1 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121532,      13612,      93213,      28319,   0.149918,   0.260100,   0.360100,   0.457100,   0.082627,   0.068000,   0.981000, 593.811367
Outstanding requests per worker:
1 0 1 0 1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:25   0:00 /usr/lib/linux
memcache      9 81.5  0.0 125376 46976 pts/0    Sl+  10:25   0:30 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3329412172      instructions:u            #    0.53  insn per cycle         
        6224867379      cycles:u                                                    
          22376002      armv8_pmuv3_0/br_mis_pred/:u                                   
         573563243      armv8_pmuv3_0/br_pred/:u                                    

      37.030314884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 28000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 28000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2302996992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1706750464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
Created 512 connections total
Creating worker on tid 2426204672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283943.282368,       0.0,       85283,      76764,       8519,      46555,      30209,   0.859589,   0.309100,   0.395100,  18.600000,   7.641502,   0.000000, 146.715000, 415.938930
Outstanding requests per worker:
1 0 1 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126281,      14081,      85195,      41086,   0.133899,   0.265100,   0.349100,   0.440100,   0.086188,   0.066000,   0.947000, 490.039610
Outstanding requests per worker:
0 0 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126244,      14115,      89317,      36927,   0.134539,   0.267100,   0.349100,   0.445100,   0.088016,   0.062000,   0.956000, 527.111142
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.4,      140357,     126183,      14174,      92251,      33932,   0.134823,   0.266100,   0.349100,   0.442100,   0.087516,   0.064000,   1.057000, 553.257610
Outstanding requests per worker:
0 1 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126214,      14145,      94140,      32074,   0.134289,   0.266100,   0.348100,   0.435100,   0.085058,   0.063000,   0.986000, 569.679790
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.4,      140357,     126437,      13920,      95904,      30533,   0.135907,   0.268100,   0.349100,   0.444100,   0.088789,   0.061000,   1.121000, 582.916314
Outstanding requests per worker:
0 0 1 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126451,      13909,      97272,      29179,   0.136595,   0.270100,   0.350000,   0.450100,   0.090031,   0.063000,   1.109000, 595.705894
Outstanding requests per worker:
0 0 0 1 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:26   0:00 /usr/lib/linux
memcache      9 83.2  0.0 127424 50432 pts/0    Sl+  10:26   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3503190221      instructions:u            #    0.53  insn per cycle         
        6643961334      cycles:u                                                    
          23680064      armv8_pmuv3_0/br_mis_pred/:u                                   
         611118180      armv8_pmuv3_0/br_pred/:u                                    

      38.240098358 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 29000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 29000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2398351872
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575283984.282409,       0.0,       88059,      79261,       8798,      47669,      31592,   1.139190,   0.335100,   0.431100,  37.600000,   9.583816,   0.000000, 210.627005, 410.709706
Outstanding requests per worker:
0 1 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.6,      145473,     130831,      14642,      87672,      43159,   0.165249,   0.321100,   0.363100,   0.456100,   0.086165,   0.067000,   0.888000, 486.897540
Outstanding requests per worker:
0 1 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     130808,      14653,      92614,      38194,   0.166132,   0.321100,   0.365100,   0.462100,   0.088647,   0.068000,   1.436000, 528.316250
Outstanding requests per worker:
0 1 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.4,      145467,     131138,      14329,      95488,      35650,   0.167126,   0.323000,   0.367100,   0.462100,   0.089281,   0.068000,   1.084000, 551.514336
Outstanding requests per worker:
1 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.6,      145468,     130923,      14545,      97678,      33245,   0.166468,   0.322100,   0.364100,   0.453100,   0.086131,   0.068000,   0.758000, 569.982509
Outstanding requests per worker:
0 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.4,      145472,     131035,      14437,      99256,      31779,   0.168494,   0.324100,   0.370100,   0.465100,   0.090368,   0.066000,   1.423000, 582.331156
Outstanding requests per worker:
0 0 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.6,      145463,     130863,      14600,     100852,      30011,   0.168661,   0.323000,   0.368100,   0.463100,   0.091743,   0.067000,   1.250000, 596.578269
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:26   0:00 /usr/lib/linux
memcache      8 87.7  0.0 128448 52864 pts/0    Sl+  10:26   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3511577914      instructions:u            #    0.55  insn per cycle         
        6365547973      cycles:u                                                    
          23711372      armv8_pmuv3_0/br_mis_pred/:u                                   
         601787831      armv8_pmuv3_0/br_pred/:u                                    

      36.689924449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2047734272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284025.282450,       0.0,       90268,      81341,       8927,      48905,      32436,   0.743734,   0.377100,   0.640100,   4.500000,   5.804575,   0.000000, 145.311996, 411.685866
Outstanding requests per worker:
0 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135255,      15131,      91306,      43949,   0.181890,   0.326100,   0.385100,   0.481100,   0.095819,   0.068000,   1.494000, 490.496958
Outstanding requests per worker:
0 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135338,      15048,      96364,      38974,   0.180896,   0.325100,   0.380100,   0.465100,   0.092805,   0.069000,   0.952000, 530.782116
Outstanding requests per worker:
0 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135357,      15032,      99403,      35954,   0.183315,   0.327000,   0.386100,   0.473100,   0.095853,   0.067000,   1.452000, 555.072445
Outstanding requests per worker:
0 0 0 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135383,      15009,     101264,      34119,   0.184998,   0.329100,   0.389100,   0.482100,   0.098879,   0.061000,   1.234000, 571.651515
Outstanding requests per worker:
0 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135448,      14934,     103246,      32202,   0.185849,   0.332100,   0.390100,   0.481100,   0.098925,   0.067000,   1.220000, 587.168980
Outstanding requests per worker:
1 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135416,      14971,     104661,      30755,   0.184474,   0.329100,   0.387100,   0.468100,   0.094106,   0.067000,   0.719000, 597.929499
Outstanding requests per worker:
0 0 1 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:27   0:00 /usr/lib/linux
memcache      8 87.0  0.0 130496 54656 pts/0    Sl+  10:27   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3637119641      instructions:u            #    0.56  insn per cycle         
        6532343429      cycles:u                                                    
          24422512      armv8_pmuv3_0/br_mis_pred/:u                                   
         622925340      armv8_pmuv3_0/br_pred/:u                                    

      36.930990011 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 31000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 31000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1780609536
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
num_worker_connections 64
Creating worker on tid 2501374464
starting receive base loop
Created 512 connections total
Creating worker on tid 1908077056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284067.282492,       0.0,       94234,      84897,       9337,      51518,      33379,   8.171553,  21.600000,  24.200000,  27.300000,  10.346321,   0.000000, 175.128996, 417.292955
Outstanding requests per worker:
31 34 32 35 36 35 29 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31061.6,      155308,     139901,      15407,      94634,      45267,   0.596554,   0.416100,   3.900000,   9.400000,   1.679867,   0.067000,  12.953000, 492.415958
Outstanding requests per worker:
1 0 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139523,      15527,      99864,      39659,   0.183862,   0.328100,   0.374100,   0.446100,   0.099479,   0.068000,   1.048000, 535.181726
Outstanding requests per worker:
1 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139602,      15445,     102969,      36633,   0.188128,   0.331100,   0.376100,   0.460100,   0.103355,   0.068000,   1.104000, 558.685083
Outstanding requests per worker:
1 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139371,      15676,     104860,      34511,   0.193843,   0.342100,   0.382100,   0.463100,   0.102418,   0.066000,   1.010000, 576.124811
Outstanding requests per worker:
1 0 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139584,      15460,     106532,      33052,   0.194951,   0.340100,   0.383100,   0.477100,   0.110217,   0.069000,   1.342000, 588.412454
Outstanding requests per worker:
0 1 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139463,      15588,     107862,      31601,   0.192542,   0.337100,   0.375100,   0.440100,   0.094866,   0.067000,   0.786000, 599.523508
Outstanding requests per worker:
0 1 0 0 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:28   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:28   0:00 /usr/lib/linux
memcache     10 88.9  0.0 130496 53312 pts/0    Sl+  10:28   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3763592966      instructions:u            #    0.57  insn per cycle         
        6546373436      cycles:u                                                    
          23492492      armv8_pmuv3_0/br_mis_pred/:u                                   
         642113700      armv8_pmuv3_0/br_pred/:u                                    

      37.000625822 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 512 conns, 8 threads, 32000 rps'
==> Bench: 4096 keys, 512 conns, 8 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 4096 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 8'
Starting client with -r 32000 -k 4096 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 4096
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2053239296
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284109.282534,       0.0,       96436,      86729,       9707,      52528,      34201,   9.704562,  26.000000,  29.400000,  32.400000,  11.768587,   0.000000, 209.977999, 415.713810
Outstanding requests per worker:
47 46 56 48 59 49 50 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32083.6,      160418,     144321,      16097,      97741,      46580,   1.990857,   7.900000,  13.900000,  19.400000,   4.391781,   0.068000,  22.627000, 493.536228
Outstanding requests per worker:
0 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     143972,      16030,     103044,      40928,   0.260685,   0.463100,   0.546100,   0.671100,   0.148080,   0.068000,   1.377000, 536.321514
Outstanding requests per worker:
2 2 2 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.4,      160022,     143995,      16027,     106192,      37803,   0.267844,   0.464100,   0.545100,   0.698100,   0.152709,   0.063000,   1.544000, 559.322122
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     143965,      16053,     108673,      35292,   0.278690,   0.473100,   0.548100,   0.642100,   0.147615,   0.070000,   1.412000, 578.693808
Outstanding requests per worker:
1 1 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.0,      160000,     144179,      15821,     110286,      33893,   0.290048,   0.484100,   0.556100,   0.809100,   0.154194,   0.067000,   1.549000, 590.798646
Outstanding requests per worker:
2 2 2 1 2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     144046,      15972,     111491,      32555,   0.297497,   0.489100,   0.559100,   0.970100,   0.165242,   0.069000,   1.651000, 601.013086
Outstanding requests per worker:
1 0 1 1 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:28   0:00 /usr/lib/linux
memcache      9 91.3  0.0 130496 55424 pts/0    Sl+  10:28   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3790987128      instructions:u            #    0.58  insn per cycle         
        6487420409      cycles:u                                                    
          22917744      armv8_pmuv3_0/br_mis_pred/:u                                   
         635296830      armv8_pmuv3_0/br_pred/:u                                    

      36.930259459 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 27000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 1024 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3426677248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284152.282577,       0.0,       53870,      48533,       5337,      28421,      20112,   4.467454,   6.400000,   7.600000,  17.700000,   2.791033,   0.000000,  63.018002, 394.416912
Outstanding requests per worker:
104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27024.2,      135121,     121566,      13555,      79712,      41854,   4.259283,   6.200000,   6.800000,   8.500000,   1.499052,   0.422000,  15.566000, 471.801639
Outstanding requests per worker:
130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.8,      135134,     121531,      13603,      85088,      36443,   5.187657,   7.600000,   8.400000,  10.600000,   1.896775,   0.410000,  18.518001, 517.883865
Outstanding requests per worker:
139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.6,      135138,     121751,      13387,      88079,      33672,   5.246710,   7.700000,   8.500000,  10.700000,   1.925173,   0.432000,  19.924000, 544.235283
Outstanding requests per worker:
146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121671,      13470,      90213,      31458,   5.291272,   7.800000,   8.500000,  10.800000,   1.937989,   0.378000,  19.331999, 564.632920
Outstanding requests per worker:
154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27035.8,      135179,     121605,      13574,      91601,      30004,   5.408349,   8.000000,   8.800000,  11.200000,   2.019082,   0.430000,  26.005000, 577.864043
Outstanding requests per worker:
118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27025.4,      135127,     121829,      13298,      92905,      28924,   5.341913,   7.800000,   8.600000,  11.100000,   1.975727,   0.435000,  22.290001, 587.790879
Outstanding requests per worker:
130 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:29   0:00 /usr/lib/linux
memcache      8 74.3  0.0 124352 53504 pts/0    Sl+  10:29   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3186980219      instructions:u            #    0.55  insn per cycle         
        5772412737      cycles:u                                                    
          20792682      armv8_pmuv3_0/br_mis_pred/:u                                   
         549332664      armv8_pmuv3_0/br_pred/:u                                    

      39.080843692 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 28000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2763911680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284194.282619,       0.0,       56861,      51229,       5632,      29721,      21508,   7.908609,  11.600000,  14.700000,  30.500000,   4.903456,   0.000000, 104.284003, 389.059068
Outstanding requests per worker:
194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28566.0,      142830,     128456,      14374,      84830,      43626,   6.986336,  10.600000,  12.100000,  15.800000,   2.834803,   0.483000,  32.921001, 474.961388
Outstanding requests per worker:
235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28570.4,      142852,     128521,      14331,      90298,      38223,   9.208546,  14.000000,  16.000000,  21.000000,   3.851312,   0.409000,  46.998002, 521.589585
Outstanding requests per worker:
251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128857,      14012,      93547,      35310,   9.196568,  13.900000,  15.900000,  20.700000,   3.785974,   0.468000,  39.643999, 547.720450
Outstanding requests per worker:
253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28564.2,      142821,     128390,      14431,      95471,      32919,   9.420723,  14.200000,  16.300000,  21.200000,   3.906838,   0.413000,  40.305998, 567.424083
Outstanding requests per worker:
300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28576.6,      142883,     128660,      14223,      97398,      31262,   9.685206,  14.700000,  17.000000,  22.400000,   4.119995,   0.446000,  45.729998, 580.371802
Outstanding requests per worker:
282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.2,      142871,     128760,      14111,      98479,      30281,   9.567664,  14.500000,  16.600000,  21.700000,   3.989016,   0.657000,  42.975999, 588.939678
Outstanding requests per worker:
282 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:30   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:30   0:00 /usr/lib/linux
memcache     11 78.8  0.0 125376 56448 pts/0    Sl+  10:30   0:29 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3341353401      instructions:u            #    0.57  insn per cycle         
        5858548498      cycles:u                                                    
          22717748      armv8_pmuv3_0/br_mis_pred/:u                                   
         566492083      armv8_pmuv3_0/br_pred/:u                                    

      37.930607295 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 29000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2510287360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284237.282662,       0.0,       58445,      52665,       5780,      30967,      21698,  13.787682,  21.700000,  24.200000,  38.600000,   7.256090,   0.000000, 161.661997, 396.831710
Outstanding requests per worker:
285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29397.4,      146987,     132198,      14789,      87399,      44799,   9.876352,  15.400000,  18.000000,  24.700000,   4.454854,   0.488000,  54.728001, 476.408652
Outstanding requests per worker:
367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29405.8,      147029,     132321,      14708,      93008,      39313,  13.711728,  21.600000,  25.400000,  34.700000,   6.380429,   0.416000,  74.061997, 521.879286
Outstanding requests per worker:
406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29407.0,      147035,     132544,      14491,      96449,      36095,  13.972260,  21.800000,  25.800000,  34.500000,   6.386705,   0.489000,  74.789003, 549.837503
Outstanding requests per worker:
442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29407.2,      147036,     132152,      14884,      98347,      33805,  15.075770,  24.000000,  28.300000,  38.200000,   7.093116,   0.527000,  77.721000, 566.189736
Outstanding requests per worker:
476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29417.2,      147086,     132472,      14614,     100003,      32469,  15.003216,  23.800000,  28.100000,  38.100000,   7.052480,   0.547000,  71.020998, 580.755209
Outstanding requests per worker:
457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29405.8,      147029,     132459,      14570,     101652,      30807,  14.755427,  23.300000,  27.500000,  36.900000,   6.843887,   0.530000,  82.557000, 592.160616
Outstanding requests per worker:
495 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:30   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:30   0:00 /usr/lib/linux
memcache      9 79.6  0.0 127424 58496 pts/0    Sl+  10:30   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3412301057      instructions:u            #    0.58  insn per cycle         
        5842626715      cycles:u                                                    
          21859762      armv8_pmuv3_0/br_mis_pred/:u                                   
         576300992      armv8_pmuv3_0/br_pred/:u                                    

      37.769462005 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 30000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2823877120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284279.282704,       0.0,       59493,      53624,       5869,      31473,      22151,  34.118119,  44.700000,  48.100000,  57.200000,   9.670499,   0.000000, 226.215005, 397.021632
Outstanding requests per worker:
1021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30379.8,      151899,     136597,      15302,      90578,      46019,  30.302910,  42.900000,  45.600000,  53.200000,  10.770528,   0.716000, 133.840993, 477.971163
Outstanding requests per worker:
646 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30290.2,      151451,     136332,      15119,      96187,      40145,  22.691521,  38.100000,  45.700000,  64.100000,  12.076800,   0.826000, 159.804001, 523.955924
Outstanding requests per worker:
720 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.2,      151531,     136501,      15030,      99402,      37099,  22.815985,  38.200000,  45.700000,  62.600000,  11.929233,   0.691000, 157.583997, 550.068761
Outstanding requests per worker:
715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.4,      151512,     136279,      15233,     101618,      34661,  23.675044,  39.800000,  47.900000,  66.600000,  12.560270,   0.803000, 137.592003, 568.343861
Outstanding requests per worker:
728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30301.8,      151509,     136448,      15061,     103458,      32990,  25.583084,  43.600000,  53.200000,  75.900000,  14.457492,   0.717000, 216.473997, 583.187148
Outstanding requests per worker:
747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.8,      151514,     136471,      15043,     104901,      31570,  25.046920,  42.400000,  51.200000,  71.800000,  13.669700,   0.612000, 159.342006, 595.729510
Outstanding requests per worker:
759 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:31   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:31   0:00 /usr/lib/linux
memcache      9 82.9  0.0 128448 58560 pts/0    Sl+  10:31   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3447307951      instructions:u            #    0.59  insn per cycle         
        5797737237      cycles:u                                                    
          21108666      armv8_pmuv3_0/br_mis_pred/:u                                   
         570705757      armv8_pmuv3_0/br_pred/:u                                    

      37.810134353 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 31000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3492213248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284321.282746,       0.0,       57929,      52186,       5743,      30688,      21498, 103.625234, 187.300000, 229.900000, 321.300000,  62.454078,   0.000000, 546.536028, 396.239719
Outstanding requests per worker:
4473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30885.2,      154426,     138886,      15540,      92449,      46437, 234.678848, 453.800000, 543.000000, 737.900000, 156.780718,  13.655000, 1198.467970, 480.479480
Outstanding requests per worker:
6312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.4,      159987,     144007,      15980,     102017,      41990, 111.957475, 241.800000, 348.500000, 616.000000, 118.035422,   2.222000, 1123.635054, 527.046894
Outstanding requests per worker:
2589 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31337.2,      156686,     141223,      15463,     103122,      38101,  71.088721, 138.300000, 174.300000, 263.100000,  53.464473,   1.520000, 651.919007, 552.264454
Outstanding requests per worker:
2162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31124.6,      155623,     139907,      15716,     104564,      35343,  78.313762, 153.700000, 192.900000, 284.600000,  58.052173,   1.779000, 639.832973, 572.444610
Outstanding requests per worker:
2798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31091.2,      155456,     140102,      15354,     106411,      33691, 109.949438, 223.700000, 281.500000, 412.900000,  86.091935,   3.586000, 845.049977, 584.620177
Outstanding requests per worker:
3600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31055.4,      155277,     139742,      15535,     107871,      31871, 128.329623, 258.600000, 322.800000, 474.500000,  98.844566,   6.399000, 899.792016, 598.968993
Outstanding requests per worker:
4586 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:32   0:00 /usr/lib/linux
memcache      8 83.5  0.0 130496 60608 pts/0    Sl+  10:32   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3530009217      instructions:u            #    0.64  insn per cycle         
        5534866353      cycles:u                                                    
          19403857      armv8_pmuv3_0/br_mis_pred/:u                                   
         573406703      armv8_pmuv3_0/br_pred/:u                                    

      37.761061291 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 1 threads, 32000 rps'
==> Bench: 4096 keys, 1024 conns, 1 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 4096 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 1'
Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2975330816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284363.282788,       0.0,       54478,      49088,       5390,      28679,      20409, 171.524301, 315.400000, 380.900000, 507.200000, 104.810226,   0.000000, 816.251993, 393.527705
Outstanding requests per worker:
7680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.6,      150403,     135265,      15138,      89379,      45886, 341.738306, 641.900000, 754.200000, 964.400000, 213.911678,  18.700000, 1496.587038, 475.956855
Outstanding requests per worker:
13227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30561.2,      152806,     137516,      15290,      97110,      40406, 474.044041, 910.500000, 1067.100000, 1387.600000, 317.644710,  14.442000, 2032.213926, 524.430714
Outstanding requests per worker:
16717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30529.2,      152646,     137604,      15042,     100155,      37449, 580.249597, 1153.100000, 1353.500000, 1811.600000, 408.712034,  13.937000, 2566.277027, 549.145861
Outstanding requests per worker:
19616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30529.6,      152648,     137269,      15379,     102421,      34848, 663.023243, 1325.500000, 1572.900000, 2059.100000, 472.443880,  11.861000, 2782.766104, 568.285287
Outstanding requests per worker:
21880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30524.8,      152624,     137416,      15208,     104349,      33067, 736.782122, 1446.800000, 1731.200000, 2434.500000, 528.508260,  11.319000, 3243.679047, 583.779793
Outstanding requests per worker:
23948 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30504.8,      152524,     137349,      15175,     105632,      31717, 800.363671, 1590.400000, 1899.800000, 2550.600000, 579.027366,  10.971000, 3429.908991, 595.371535
Outstanding requests per worker:
26003 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:32   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:33   0:00 /usr/lib/linux
memcache     10 81.7  0.0 130496 62976 pts/0    Sl+  10:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3532119262      instructions:u            #    0.64  insn per cycle         
        5537600219      cycles:u                                                    
          21017878      armv8_pmuv3_0/br_mis_pred/:u                                   
         565685555      armv8_pmuv3_0/br_pred/:u                                    

      37.859135272 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 27000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3291345408
starting receive base loop
Created 1024 connections total
Creating worker on tid 3378311680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284407.282832,       0.0,       69155,      62324,       6831,      36969,      25355,   0.679846,   1.100000,   1.200000,   1.400000,   0.927642,   0.000000,  63.974001, 402.212326
Outstanding requests per worker:
16 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121545,      13600,      80928,      40617,   0.693840,   1.200000,   1.300000,   1.400000,   0.280683,   0.220000,   2.160000, 481.422691
Outstanding requests per worker:
15 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.6,      135158,     121675,      13483,      85835,      35840,   0.681849,   1.200000,   1.400000,   1.500000,   0.301612,   0.216000,   2.267000, 523.603666
Outstanding requests per worker:
13 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121708,      13434,      88739,      32969,   0.684037,   1.200000,   1.400000,   1.500000,   0.301879,   0.222000,   2.310000, 550.057580
Outstanding requests per worker:
13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121516,      13625,      90379,      31137,   0.685472,   1.200000,   1.400000,   1.500000,   0.301865,   0.223000,   2.394000, 566.804429
Outstanding requests per worker:
14 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.8,      135154,     121819,      13335,      91825,      29994,   0.686542,   1.200000,   1.400000,   1.500000,   0.300135,   0.224000,   2.298000, 578.955376
Outstanding requests per worker:
12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.4,      135157,     121820,      13337,      93170,      28650,   0.689643,   1.200000,   1.400000,   1.500000,   0.303911,   0.245000,   2.552000, 590.884682
Outstanding requests per worker:
9 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:33   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:33   0:00 /usr/lib/linux
memcache      9 75.8  0.0 124352 55616 pts/0    Sl+  10:33   0:29 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3225691967      instructions:u            #    0.56  insn per cycle         
        5808610839      cycles:u                                                    
          21319683      armv8_pmuv3_0/br_mis_pred/:u                                   
         551169127      armv8_pmuv3_0/br_pred/:u                                    

      39.060049443 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 28000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2809590272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2900488704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284449.282874,       0.0,       72370,      65075,       7295,      38636,      26439,   0.786863,   1.300000,   1.400000,   1.700000,   0.774235,   0.000000,  49.803998, 402.636604
Outstanding requests per worker:
21 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126671,      14181,      84315,      42356,   0.788632,   1.300000,   1.400000,   1.500000,   0.299579,   0.219000,   2.108000, 480.952475
Outstanding requests per worker:
19 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.6,      140868,     126695,      14173,      89098,      37597,   0.747224,   1.300000,   1.400000,   1.600000,   0.315568,   0.217000,   2.310000, 523.089427
Outstanding requests per worker:
14 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.6,      140863,     126872,      13991,      92295,      34577,   0.749514,   1.300000,   1.400000,   1.600000,   0.315766,   0.249000,   2.263000, 548.979452
Outstanding requests per worker:
13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.0,      140865,     126835,      14030,      94028,      32807,   0.751848,   1.300000,   1.400000,   1.600000,   0.316699,   0.240000,   2.367000, 565.163370
Outstanding requests per worker:
11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126682,      14169,      95533,      31149,   0.756432,   1.300000,   1.400000,   1.600000,   0.317645,   0.240000,   2.398000, 579.158405
Outstanding requests per worker:
14 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126839,      14020,      97154,      29685,   0.753956,   1.300000,   1.400000,   1.600000,   0.315058,   0.235000,   2.638000, 591.490125
Outstanding requests per worker:
11 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:34   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5952 pts/0    S+   10:34   0:00 /usr/lib/linux
memcache     13 79.8  0.0 127424 57728 pts/0    Sl+  10:34   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3339993816      instructions:u            #    0.56  insn per cycle         
        5931019701      cycles:u                                                    
          21221944      armv8_pmuv3_0/br_mis_pred/:u                                   
         566994714      armv8_pmuv3_0/br_pred/:u                                    

      37.980176757 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 29000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3126587904
starting receive base loop
Created 1024 connections total
Creating worker on tid 3211850240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284492.282917,       0.0,       75255,      67769,       7486,      40114,      27655,   2.716228,   7.300000,   8.700000,   9.700000,   2.777661,   0.000000,  67.579001, 401.344863
Outstanding requests per worker:
27 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29418.2,      147091,     132493,      14598,      88094,      44399,   1.039349,   1.600000,   1.800000,   2.200000,   0.414434,   0.218000,   3.222000, 479.964889
Outstanding requests per worker:
19 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132385,      14686,      93480,      38905,   0.824999,   1.400000,   1.500000,   1.600000,   0.325551,   0.218000,   2.364000, 525.752434
Outstanding requests per worker:
20 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132504,      14562,      96593,      35911,   0.829253,   1.400000,   1.500000,   1.600000,   0.326242,   0.246000,   2.487000, 551.508188
Outstanding requests per worker:
22 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29417.2,      147086,     132283,      14803,      98623,      33660,   0.838092,   1.400000,   1.500000,   1.600000,   0.328378,   0.218000,   2.424000, 567.799800
Outstanding requests per worker:
16 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29416.4,      147082,     132377,      14705,     100699,      31678,   0.836901,   1.400000,   1.500000,   1.600000,   0.326196,   0.252000,   2.413000, 586.234036
Outstanding requests per worker:
12 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132394,      14671,     101931,      30463,   0.834781,   1.400000,   1.500000,   1.600000,   0.322997,   0.243000,   2.337000, 595.658013
Outstanding requests per worker:
16 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:35   0:00 /usr/lib/linux
memcache     10 81.2  0.0 127424 58816 pts/0    Sl+  10:35   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3433660940      instructions:u            #    0.59  insn per cycle         
        5858440312      cycles:u                                                    
          21829634      armv8_pmuv3_0/br_mis_pred/:u                                   
         579954441      armv8_pmuv3_0/br_pred/:u                                    

      37.891488607 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 30000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2575168000
starting receive base loop
Created 1024 connections total
Creating worker on tid 2666918400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284534.282959,       0.0,       76648,      68962,       7686,      41305,      27657,  14.018902,  28.700000,  29.700000,  31.100000,  11.022781,   0.000000, 131.049007, 408.193077
Outstanding requests per worker:
315 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30420.4,      152102,     136857,      15245,      91410,      45447,  12.661744,  31.200000,  32.700000,  34.000000,  11.796051,   0.257000,  35.489999, 485.674054
Outstanding requests per worker:
23 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.8,      151519,     136335,      15184,      96656,      39679,   0.898915,   1.400000,   1.500000,   1.700000,   0.328062,   0.245000,   2.452000, 529.156512
Outstanding requests per worker:
25 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.6,      151528,     136509,      15019,      99724,      36785,   0.897231,   1.400000,   1.500000,   1.700000,   0.325802,   0.243000,   2.526000, 553.437942
Outstanding requests per worker:
23 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30308.0,      151540,     136265,      15275,     101956,      34309,   0.902792,   1.400000,   1.500000,   1.700000,   0.324304,   0.249000,   2.539000, 571.776494
Outstanding requests per worker:
18 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136428,      15092,     104127,      32301,   0.907261,   1.400000,   1.500000,   1.700000,   0.329321,   0.245000,   2.619000, 587.085078
Outstanding requests per worker:
19 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136310,      15210,     105239,      31071,   0.906615,   1.400000,   1.500000,   1.700000,   0.318693,   0.255000,   2.336000, 598.886157
Outstanding requests per worker:
21 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:35   0:00 /usr/lib/linux
memcache     10 84.7  0.0 129472 62400 pts/0    Sl+  10:35   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3534316588      instructions:u            #    0.60  insn per cycle         
        5925908967      cycles:u                                                    
          21315843      armv8_pmuv3_0/br_mis_pred/:u                                   
         587678577      armv8_pmuv3_0/br_pred/:u                                    

      37.849869560 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 31000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2416833024
starting receive base loop
Created 1024 connections total
Creating worker on tid 2505896448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284576.283001,       0.0,       79250,      71364,       7886,      42369,      28995,  17.529136,  38.500000,  39.600000,  41.600000,  14.371669,   0.000000, 137.843996, 404.542599
Outstanding requests per worker:
377 385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31395.4,      156977,     141298,      15679,      94907,      46391,  15.729947,  38.600000,  41.000000,  43.300000,  13.875015,   0.295000,  45.495000, 488.094842
Outstanding requests per worker:
22 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140475,      15785,      99984,      40491,   1.069354,   1.600000,   1.700000,   2.100000,   0.345508,   0.268000,   3.182000, 531.459911
Outstanding requests per worker:
23 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31250.6,      156253,     140568,      15685,     103356,      37212,   1.134957,   1.600000,   1.800000,   2.600000,   0.392200,   0.294000,   3.812000, 557.414027
Outstanding requests per worker:
24 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140614,      15645,     105686,      34928,   1.166174,   1.600000,   1.800000,   2.900000,   0.417732,   0.285000,   4.004000, 576.705492
Outstanding requests per worker:
24 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140593,      15668,     107104,      33489,   1.170599,   1.600000,   1.800000,   2.500000,   0.371806,   0.294000,   3.448000, 587.871658
Outstanding requests per worker:
23 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140566,      15696,     108848,      31718,   1.190354,   1.700000,   1.800000,   2.100000,   0.343468,   0.298000,   3.231000, 600.657463
Outstanding requests per worker:
22 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:36   0:00 /usr/lib/linux
memcache      8 83.1  0.0 130496 63872 pts/0    Sl+  10:36   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3601846960      instructions:u            #    0.63  insn per cycle         
        5756952672      cycles:u                                                    
          20575480      armv8_pmuv3_0/br_mis_pred/:u                                   
         593316139      armv8_pmuv3_0/br_pred/:u                                    

      37.820374157 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 2 threads, 32000 rps'
==> Bench: 4096 keys, 1024 conns, 2 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 4096 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 2'
Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2424566272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2513957376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284619.283044,       0.0,       81503,      73304,       8199,      43844,      29460,  20.298807,  45.900000,  47.600000,  50.100000,  17.031710,   0.000000, 271.546990, 408.374591
Outstanding requests per worker:
445 474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32364.4,      161822,     145471,      16351,      98121,      47350,  22.067533,  46.400000,  50.700000,  56.000000,  14.296474,   0.620000,  60.713001, 490.751511
Outstanding requests per worker:
208 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32262.2,      161311,     145129,      16182,     103411,      41718,  11.503182,  15.600000,  16.000000,  16.600000,   4.352791,   0.610000,  17.897001, 533.488710
Outstanding requests per worker:
206 196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.0,      161305,     145302,      16003,     107138,      38164,  12.746594,  17.600000,  18.200000,  19.100000,   5.093608,   0.628000,  20.947000, 560.291662
Outstanding requests per worker:
194 203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32253.0,      161265,     145138,      16127,     109022,      36116,  12.813098,  17.700000,  18.200000,  18.900000,   5.096568,   0.603000,  20.120000, 575.770288
Outstanding requests per worker:
214 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.2,      161296,     145114,      16182,     110790,      34324,  13.734723,  19.400000,  20.000000,  21.700000,   5.670244,   0.667000,  24.149001, 589.700780
Outstanding requests per worker:
217 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32257.8,      161289,     145048,      16241,     112659,      32389,  13.960033,  19.400000,  19.800000,  20.400000,   5.754573,   0.699000,  21.676000, 603.098595
Outstanding requests per worker:
230 232 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:37   0:00 /usr/lib/linux
memcache      8 84.4  0.0 131520 63168 pts/0    Sl+  10:37   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  10:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3755502408      instructions:u            #    0.67  insn per cycle         
        5634168773      cycles:u                                                    
          22133039      armv8_pmuv3_0/br_mis_pred/:u                                   
         601963160      armv8_pmuv3_0/br_pred/:u                                    

      37.869947430 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 27000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 182383104
starting receive base loop
num_worker_connections 256
Creating worker on tid 2330718720
starting receive base loop
num_worker_connections 256
Creating worker on tid 191296000
starting receive base loop
Created 1024 connections total
Creating worker on tid 2346840576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284662.283087,       0.0,       77432,      69615,       7817,      41978,      27637,   0.467268,   0.808100,   0.926100,   1.600000,   2.265772,   0.000000, 126.066998, 410.471579
Outstanding requests per worker:
4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121569,      13576,      81744,      39825,   0.419443,   0.834100,   0.935100,   1.100000,   0.262117,   0.106000,   1.833000, 487.621672
Outstanding requests per worker:
4 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27032.0,      135160,     121522,      13638,      85624,      35898,   0.397974,   0.868100,   0.975100,   1.200000,   0.277995,   0.102000,   1.952000, 523.729300
Outstanding requests per worker:
1 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121572,      13581,      88586,      32986,   0.398947,   0.868100,   0.975100,   1.200000,   0.278345,   0.104000,   1.829000, 549.295463
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121599,      13544,      90400,      31199,   0.398895,   0.861100,   0.969100,   1.200000,   0.276981,   0.106000,   2.076000, 566.534330
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121539,      13608,      91598,      29941,   0.400424,   0.866100,   0.973100,   1.200000,   0.278443,   0.104000,   1.890000, 578.241865
Outstanding requests per worker:
2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121558,      13588,      93157,      28401,   0.400728,   0.864100,   0.972100,   1.200000,   0.276693,   0.103000,   1.872000, 591.063130
Outstanding requests per worker:
2 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:37   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:37   0:00 /usr/lib/linux
memcache     10 78.5  0.0 125376 56320 pts/0    Sl+  10:37   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3283541517      instructions:u            #    0.55  insn per cycle         
        6005985509      cycles:u                                                    
          22435542      armv8_pmuv3_0/br_mis_pred/:u                                   
         562107656      armv8_pmuv3_0/br_pred/:u                                    

      39.270881028 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 28000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 753332736
starting receive base loop
num_worker_connections 256
Creating worker on tid 2907894272
starting receive base loop
num_worker_connections 256
Creating worker on tid 763032064
starting receive base loop
Created 1024 connections total
Creating worker on tid 2918576640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284705.283130,       0.0,       80978,      72998,       7980,      43456,      29542,   0.709032,   1.100000,   2.500000,   3.900000,   2.606336,   0.000000, 142.735004, 405.769473
Outstanding requests per worker:
9 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126809,      14043,      84833,      41976,   0.515455,   0.916100,   1.100000,   1.200000,   0.280233,   0.104000,   1.892000, 483.649623
Outstanding requests per worker:
7 7 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.6,      140863,     126706,      14157,      89616,      37090,   0.459507,   0.922100,   1.100000,   1.200000,   0.286774,   0.105000,   1.780000, 525.807594
Outstanding requests per worker:
6 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126936,      13925,      92622,      34314,   0.462171,   0.923100,   1.100000,   1.200000,   0.288164,   0.106000,   2.050000, 550.603596
Outstanding requests per worker:
6 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.8,      140869,     126846,      14023,      94606,      32240,   0.467050,   0.926100,   1.100000,   1.200000,   0.290109,   0.102000,   1.930000, 568.205517
Outstanding requests per worker:
4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126791,      14061,      96082,      30709,   0.467052,   0.925100,   1.100000,   1.200000,   0.290315,   0.101000,   2.049000, 583.137092
Outstanding requests per worker:
4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126758,      14101,      97298,      29460,   0.464409,   0.921100,   1.100000,   1.200000,   0.285866,   0.104000,   1.944000, 593.005451
Outstanding requests per worker:
3 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:38   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:38   0:00 /usr/lib/linux
memcache      9 80.2  0.0 126400 57344 pts/0    Sl+  10:38   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3366598649      instructions:u            #    0.56  insn per cycle         
        6050666094      cycles:u                                                    
          21766306      armv8_pmuv3_0/br_mis_pred/:u                                   
         570974306      armv8_pmuv3_0/br_pred/:u                                    

      39.209099933 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 29000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 535949824
starting receive base loop
num_worker_connections 256
Creating worker on tid 2690445824
starting receive base loop
num_worker_connections 256
Creating worker on tid 551023104
starting receive base loop
Created 1024 connections total
Creating worker on tid 2706567680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284748.283173,       0.0,       83607,      75219,       8388,      45155,      30064,   5.059247,  10.100000,  10.600000,  11.200000,   6.958174,   0.000000, 290.901989, 410.858506
Outstanding requests per worker:
72 72 67 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29248.6,      146243,     131579,      14664,      88200,      43379,   4.207853,  11.700000,  12.300000,  13.100000,   4.780653,   0.108000,  14.408000, 486.805273
Outstanding requests per worker:
8 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131108,      14894,      92735,      38373,   0.504563,   0.967100,   1.100000,   1.200000,   0.300986,   0.103000,   1.865000, 527.191300
Outstanding requests per worker:
6 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.4,      145992,     131380,      14612,      95786,      35594,   0.499225,   0.943100,   1.100000,   1.200000,   0.295091,   0.105000,   2.109000, 551.506112
Outstanding requests per worker:
6 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.6,      145998,     131151,      14847,      97867,      33284,   0.505965,   0.955100,   1.100000,   1.200000,   0.295006,   0.105000,   1.988000, 569.307684
Outstanding requests per worker:
6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.2,      145991,     131270,      14721,      99488,      31782,   0.508021,   0.958100,   1.100000,   1.200000,   0.298577,   0.106000,   2.228000, 582.795338
Outstanding requests per worker:
5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131414,      14582,     101301,      30113,   0.513922,   0.967100,   1.100000,   1.200000,   0.300131,   0.106000,   2.006000, 596.134377
Outstanding requests per worker:
4 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:39   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:39   0:00 /usr/lib/linux
memcache      9 81.1  0.0 128448 61056 pts/0    Sl+  10:39   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3467956840      instructions:u            #    0.57  insn per cycle         
        6031792700      cycles:u                                                    
          21866215      armv8_pmuv3_0/br_mis_pred/:u                                   
         585476835      armv8_pmuv3_0/br_pred/:u                                    

      39.140740552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 30000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 980873728
starting receive base loop
num_worker_connections 256
Creating worker on tid 3136025088
starting receive base loop
num_worker_connections 256
Creating worker on tid 996602368
starting receive base loop
Created 1024 connections total
Creating worker on tid 3152146944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284791.283216,       0.0,       86207,      77585,       8622,      46675,      30910,  12.689315,  30.100000,  31.800000,  34.400000,  12.605606,   0.000000, 257.638007, 410.194458
Outstanding requests per worker:
161 170 161 166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30199.2,      150996,     135782,      15214,      91441,      44341,  11.263103,  29.700000,  32.300000,  33.800000,  11.381699,   0.104000,  36.084000, 489.578250
Outstanding requests per worker:
11 12 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30085.2,      150426,     135323,      15103,      95848,      39475,   0.756210,   1.600000,   1.700000,   1.900000,   0.505758,   0.107000,   3.224000, 529.324882
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135275,      15107,      98989,      36286,   0.764780,   1.600000,   1.700000,   1.900000,   0.508021,   0.108000,   3.282000, 553.736943
Outstanding requests per worker:
2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30069.6,      150348,     135240,      15108,     101168,      34072,   0.769720,   1.600000,   1.700000,   1.900000,   0.506208,   0.102000,   3.397000, 572.470238
Outstanding requests per worker:
11 10 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30075.4,      150377,     135377,      15000,     102626,      32751,   0.771388,   1.600000,   1.700000,   1.900000,   0.506693,   0.107000,   2.956000, 582.752137
Outstanding requests per worker:
13 11 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30085.2,      150426,     135499,      14927,     104621,      30878,   0.786654,   1.600000,   1.700000,   1.900000,   0.514931,   0.106000,   3.183000, 598.022819
Outstanding requests per worker:
2 1 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:40   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:40   0:00 /usr/lib/linux
memcache      9 84.3  0.0 129472 61632 pts/0    Sl+  10:40   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3563288063      instructions:u            #    0.60  insn per cycle         
        5958677604      cycles:u                                                    
          21752217      armv8_pmuv3_0/br_mis_pred/:u                                   
         593909445      armv8_pmuv3_0/br_pred/:u                                    

      38.010226918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 31000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 906228224
starting receive base loop
num_worker_connections 256
Creating worker on tid 3060855296
starting receive base loop
num_worker_connections 256
Creating worker on tid 921432576
starting receive base loop
Created 1024 connections total
Creating worker on tid 3076977152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284833.283258,       0.0,       89272,      80369,       8903,      48327,      32042,  15.161758,  37.700000,  39.200000,  41.900000,  15.331968,   0.000000, 376.372010, 412.295972
Outstanding requests per worker:
205 178 190 182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31154.8,      155774,     140170,      15604,      94651,      45519,  14.138293,  35.500000,  39.200000,  41.800000,  13.039033,   0.114000,  44.716001, 491.645666
Outstanding requests per worker:
7 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31002.4,      155012,     139473,      15539,      99225,      40248,   1.092547,   1.700000,   2.500000,   3.900000,   0.625159,   0.123000,   4.954000, 531.424433
Outstanding requests per worker:
18 18 18 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31017.8,      155089,     139538,      15551,     102331,      37207,   1.166776,   1.700000,   1.900000,   2.100000,   0.382679,   0.158000,   3.001000, 556.709054
Outstanding requests per worker:
11 11 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139656,      15390,     104514,      35142,   1.385289,   2.000000,   2.300000,   2.900000,   0.482775,   0.174000,   3.428000, 573.313692
Outstanding requests per worker:
13 12 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.8,      155059,     139649,      15410,     106160,      33489,   1.469686,   2.100000,   2.300000,   3.000000,   0.473706,   0.157000,   3.465000, 585.763772
Outstanding requests per worker:
9 11 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.4,      155042,     139543,      15499,     107760,      31783,   1.834629,   2.700000,   3.400000,   4.300000,   0.706543,   0.162000,   4.843000, 598.390102
Outstanding requests per worker:
12 13 14 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:40   0:00 /usr/lib/linux
memcache      8 86.7  0.0 130496 63680 pts/0    Sl+  10:40   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3604821075      instructions:u            #    0.62  insn per cycle         
        5806748905      cycles:u                                                    
          20770258      armv8_pmuv3_0/br_mis_pred/:u                                   
         590044522      armv8_pmuv3_0/br_pred/:u                                    

      38.000109668 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 4 threads, 32000 rps'
==> Bench: 4096 keys, 1024 conns, 4 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 4096 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 4'
Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 46133760
starting receive base loop
num_worker_connections 256
Creating worker on tid 2196500992
starting receive base loop
num_worker_connections 256
Creating worker on tid 57078272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2212622848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284876.283301,       0.0,       92073,      82917,       9156,      50536,      32381,  18.618151,  46.800000,  49.200000,  51.400000,  24.647993,   0.000000, 787.772000, 418.845050
Outstanding requests per worker:
226 218 244 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32118.2,      160591,     144323,      16268,      98431,      45892,  20.147252,  41.400000,  47.400000,  51.700000,  13.093578,   0.290000,  53.675000, 498.384547
Outstanding requests per worker:
86 89 81 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31996.4,      159982,     144023,      15959,     103341,      40682,  10.903212,  14.800000,  15.500000,  16.700000,   4.359449,   0.299000,  18.092001, 537.750616
Outstanding requests per worker:
92 91 91 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.0,      159995,     143928,      16067,     106104,      37824,  11.363405,  15.700000,  16.100000,  17.000000,   4.607216,   0.304000,  18.541999, 560.404570
Outstanding requests per worker:
105 92 95 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     143935,      16070,     108494,      35441,  12.171555,  17.000000,  17.600000,  18.700000,   5.090497,   0.294000,  19.921999, 578.291632
Outstanding requests per worker:
98 96 100 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.2,      159996,     143936,      16060,     110174,      33762,  12.599454,  17.700000,  18.100000,  18.700000,   5.340190,   0.298000,  20.001000, 589.185645
Outstanding requests per worker:
104 110 102 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144079,      15928,     111486,      32593,  12.875610,  18.000000,  18.400000,  19.000000,   5.491814,   0.281000,  20.136001, 601.009106
Outstanding requests per worker:
99 110 104 101 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:41   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:41   0:00 /usr/lib/linux
memcache     10 85.6  0.0 130496 63040 pts/0    Sl+  10:41   0:32 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  10:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3783027879      instructions:u            #    0.65  insn per cycle         
        5827257052      cycles:u                                                    
          22711963      armv8_pmuv3_0/br_mis_pred/:u                                   
         604401565      armv8_pmuv3_0/br_pred/:u                                    

      38.069879719 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 27000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 27000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1964831232
starting receive base loop
num_worker_connections 128
Creating worker on tid 855306752
starting receive base loop
num_worker_connections 128
Creating worker on tid 4041667072
starting receive base loop
num_worker_connections 128
Creating worker on tid 2933060096
starting receive base loop
num_worker_connections 128
Creating worker on tid 1819013632
starting receive base loop
num_worker_connections 128
Creating worker on tid 710406656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3891327488
starting receive base loop
Created 1024 connections total
Creating worker on tid 2782720512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284918.283343,       0.0,       83208,      75082,       8126,      44894,      30188,   0.511355,   0.756100,   0.869100,   2.000000,   3.876229,   0.000000, 201.065004, 408.253323
Outstanding requests per worker:
2 1 1 2 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121657,      13495,      81442,      40215,   0.371726,   0.784000,   0.875100,   1.100000,   0.262724,   0.075000,   1.861000, 484.988320
Outstanding requests per worker:
1 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121798,      13347,      86047,      35751,   0.348428,   0.805100,   0.938100,   1.100000,   0.273945,   0.077000,   1.673000, 525.714059
Outstanding requests per worker:
1 1 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.0,      135155,     121696,      13459,      88357,      33339,   0.354436,   0.814100,   0.949100,   1.100000,   0.278707,   0.076000,   1.759000, 548.495850
Outstanding requests per worker:
0 1 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121628,      13515,      90326,      31302,   0.352770,   0.811100,   0.943100,   1.100000,   0.276817,   0.074000,   1.970000, 564.302866
Outstanding requests per worker:
1 1 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121606,      13539,      91919,      29687,   0.351924,   0.809100,   0.940100,   1.100000,   0.275678,   0.075000,   1.911000, 579.105513
Outstanding requests per worker:
0 1 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121769,      13377,      93253,      28516,   0.351647,   0.806100,   0.939100,   1.100000,   0.274132,   0.074000,   1.746000, 591.453219
Outstanding requests per worker:
0 0 0 1 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache      8 79.9  0.0 126400 54976 pts/0    Sl+  10:42   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  10:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3241330617      instructions:u            #    0.55  insn per cycle         
        5840832809      cycles:u                                                    
          21935760      armv8_pmuv3_0/br_mis_pred/:u                                   
         549468268      armv8_pmuv3_0/br_pred/:u                                    

      37.990216596 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 28000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 28000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1908011520
starting receive base loop
num_worker_connections 128
Creating worker on tid 796258816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3982619136
starting receive base loop
num_worker_connections 128
Creating worker on tid 2868572672
starting receive base loop
num_worker_connections 128
Creating worker on tid 1759965696
starting receive base loop
num_worker_connections 128
Creating worker on tid 651358720
starting receive base loop
num_worker_connections 128
Creating worker on tid 3832279552
starting receive base loop
Created 1024 connections total
Creating worker on tid 2723672576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575284961.283386,       0.0,       85246,      76849,       8397,      46066,      30783,   0.739944,   0.875100,   1.200000,   3.000000,   5.648056,   0.000000, 212.828994, 409.853362
Outstanding requests per worker:
3 1 3 2 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.6,      140368,     126336,      14032,      85114,      41222,   0.419455,   0.818100,   0.926100,   1.100000,   0.276321,   0.075000,   1.787000, 489.425896
Outstanding requests per worker:
1 1 2 1 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126241,      14118,      89377,      36864,   0.374914,   0.839100,   0.945100,   1.100000,   0.290774,   0.076000,   1.936000, 527.832875
Outstanding requests per worker:
2 2 2 1 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.8,      140364,     126292,      14072,      92341,      33951,   0.375697,   0.837100,   0.941100,   1.100000,   0.289855,   0.074000,   2.098000, 553.670597
Outstanding requests per worker:
1 1 2 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126175,      14188,      94252,      31923,   0.376321,   0.834100,   0.941100,   1.100000,   0.289053,   0.075000,   2.078000, 570.233065
Outstanding requests per worker:
1 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28074.8,      140374,     126519,      13855,      96170,      30349,   0.382376,   0.849100,   0.946100,   1.100000,   0.292065,   0.074000,   1.892000, 584.350177
Outstanding requests per worker:
0 1 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126257,      14102,      96775,      29482,   0.379487,   0.839100,   0.942100,   1.100000,   0.288868,   0.076000,   1.858000, 593.449916
Outstanding requests per worker:
0 1 0 1 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache     10 82.2  0.0 126400 55424 pts/0    Sl+  10:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3362890890      instructions:u            #    0.57  insn per cycle         
        5940345547      cycles:u                                                    
          22668809      armv8_pmuv3_0/br_mis_pred/:u                                   
         572167732      armv8_pmuv3_0/br_pred/:u                                    

      38.110685456 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 29000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 29000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1930818048
starting receive base loop
num_worker_connections 128
Creating worker on tid 820441600
starting receive base loop
num_worker_connections 128
Creating worker on tid 4006801920
starting receive base loop
num_worker_connections 128
Creating worker on tid 2892755456
starting receive base loop
num_worker_connections 128
Creating worker on tid 1784148480
starting receive base loop
num_worker_connections 128
Creating worker on tid 670102016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3856462336
starting receive base loop
Created 1024 connections total
Creating worker on tid 2742415872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285003.283428,       0.0,       88018,      79415,       8603,      47862,      31553,   8.046381,  20.000000,  21.800000,  23.000000,   8.786001,   0.000000, 196.998000, 411.748108
Outstanding requests per worker:
58 60 57 54 62 63 52 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29184.2,      145921,     131469,      14452,      88157,      43312,   7.550183,  22.600000,  24.000000,  25.100000,   8.866209,   0.077000,  26.145000, 486.426070
Outstanding requests per worker:
1 1 2 2 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29091.8,      145459,     130856,      14603,      92838,      38018,   0.426541,   0.890100,   0.953100,   1.100000,   0.293749,   0.076000,   2.361000, 528.993130
Outstanding requests per worker:
2 2 1 1 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.8,      145464,     130749,      14715,      96029,      34720,   0.436635,   0.898100,   0.961100,   1.100000,   0.295878,   0.075000,   1.921000, 554.899403
Outstanding requests per worker:
2 2 2 1 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.0,      145460,     130843,      14617,      97866,      32977,   0.439723,   0.899100,   0.963100,   1.200000,   0.298413,   0.075000,   1.866000, 571.510459
Outstanding requests per worker:
1 1 1 2 2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.4,      145467,     130955,      14512,      99762,      31193,   0.441125,   0.899100,   0.963100,   1.100000,   0.295615,   0.076000,   1.898000, 587.395693
Outstanding requests per worker:
1 1 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.0,      145460,     130904,      14556,     101183,      29721,   0.435699,   0.890100,   0.946100,   1.100000,   0.288698,   0.075000,   1.742000, 598.400675
Outstanding requests per worker:
2 2 1 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:43   0:00 /usr/lib/linux
memcache      8 83.5  0.0 128448 60224 pts/0    Sl+  10:43   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3458536356      instructions:u            #    0.57  insn per cycle         
        6045517347      cycles:u                                                    
          21902812      armv8_pmuv3_0/br_mis_pred/:u                                   
         580060035      armv8_pmuv3_0/br_pred/:u                                    

      38.101645647 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 30000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 30000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1823011328
starting receive base loop
num_worker_connections 128
Creating worker on tid 710406656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3891327488
starting receive base loop
num_worker_connections 128
Creating worker on tid 2782720512
starting receive base loop
num_worker_connections 128
Creating worker on tid 1668674048
starting receive base loop
num_worker_connections 128
Creating worker on tid 560067072
starting receive base loop
num_worker_connections 128
Creating worker on tid 3740987904
starting receive base loop
Created 1024 connections total
Creating worker on tid 2632380928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285047.283472,       0.0,       91257,      82161,       9096,      49765,      32396,  12.502851,  31.300000,  32.300000,  33.400000,  13.405757,   0.000000, 349.141985, 415.491401
Outstanding requests per worker:
79 76 76 78 83 84 71 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30196.8,      150984,     135820,      15164,      91715,      44105,  11.130625,  29.700000,  31.900000,  33.700000,  11.416120,   0.078000,  36.306001, 491.365292
Outstanding requests per worker:
3 2 2 2 3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135256,      15126,      96363,      38893,   0.509176,   0.910100,   0.983100,   1.200000,   0.292587,   0.075000,   2.105000, 532.523851
Outstanding requests per worker:
3 2 3 3 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135255,      15138,      99334,      35921,   0.522637,   0.923100,   1.100000,   1.200000,   0.294816,   0.077000,   1.961000, 555.828273
Outstanding requests per worker:
2 1 2 2 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.0,      150380,     135476,      14904,     101382,      34094,   0.528243,   0.923100,   1.100000,   1.300000,   0.303742,   0.080000,   2.162000, 573.125078
Outstanding requests per worker:
2 1 2 2 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135305,      15079,     102955,      32350,   0.534187,   0.926100,   1.100000,   1.300000,   0.301177,   0.077000,   2.180000, 585.480108
Outstanding requests per worker:
2 1 2 2 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135498,      14887,     104352,      31146,   0.533576,   0.924100,   0.996100,   1.200000,   0.283078,   0.076000,   1.945000, 597.539255
Outstanding requests per worker:
2 2 2 2 2 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:44   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:44   0:00 /usr/lib/linux
memcache     11 82.3  0.0 130496 59648 pts/0    Sl+  10:44   0:32 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3551630351      instructions:u            #    0.60  insn per cycle         
        5951993672      cycles:u                                                    
          21147817      armv8_pmuv3_0/br_mis_pred/:u                                   
         590681560      armv8_pmuv3_0/br_pred/:u                                    

      39.419895802 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 31000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 31000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1977741824
starting receive base loop
num_worker_connections 128
Creating worker on tid 863367680
starting receive base loop
num_worker_connections 128
Creating worker on tid 4049728000
starting receive base loop
num_worker_connections 128
Creating worker on tid 2935681536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1827074560
starting receive base loop
num_worker_connections 128
Creating worker on tid 718467584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3899388416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2790781440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285090.283515,       0.0,       94920,      85503,       9417,      51756,      33747,  20.043544,  42.200000,  45.300000, 116.100000,  63.987748,   0.000000, 1477.915049, 414.994328
Outstanding requests per worker:
102 102 108 95 102 95 97 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31159.4,      155797,     140052,      15745,      94824,      45228,  15.563484,  36.500000,  40.000000,  43.300000,  12.911851,   0.115000,  46.613000, 493.984527
Outstanding requests per worker:
6 6 6 6 6 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139755,      15299,     100012,      39743,   1.283381,   1.900000,   2.200000,   2.500000,   0.451573,   0.094000,   3.048000, 534.950585
Outstanding requests per worker:
5 5 5 5 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31004.8,      155024,     139471,      15553,     102441,      37030,   1.718517,   2.300000,   2.500000,   3.100000,   0.490085,   0.118000,   3.718000, 558.324010
Outstanding requests per worker:
9 6 9 9 8 8 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31006.2,      155031,     139445,      15586,     104948,      34497,   2.427838,   3.300000,   3.700000,   4.100000,   0.690379,   0.129000,   4.697000, 575.758615
Outstanding requests per worker:
9 11 11 11 10 10 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31003.0,      155015,     139645,      15370,     106325,      33320,   2.969521,   4.000000,   4.300000,   4.900000,   0.829691,   0.119000,   5.524000, 586.994314
Outstanding requests per worker:
13 13 14 14 12 15 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31007.8,      155039,     139607,      15432,     108008,      31599,   3.326480,   4.800000,   5.100000,   5.700000,   1.107638,   0.130000,   6.447000, 600.039905
Outstanding requests per worker:
15 17 14 15 15 15 17 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:45   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:45   0:00 /usr/lib/linux
memcache      9 80.8  0.0 129472 60032 pts/0    Sl+  10:45   0:32 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  10:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3627340538      instructions:u            #    0.61  insn per cycle         
        5911533406      cycles:u                                                    
          20138441      armv8_pmuv3_0/br_mis_pred/:u                                   
         592192081      armv8_pmuv3_0/br_pred/:u                                    

      39.420810638 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys, 1024 conns, 8 threads, 32000 rps'
==> Bench: 4096 keys, 1024 conns, 8 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 4096 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 8'
Starting client with -r 32000 -k 4096 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 4096
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1293218304
starting receive base loop
num_worker_connections 128
Creating worker on tid 184218112
starting receive base loop
num_worker_connections 128
Creating worker on tid 3370578432
starting receive base loop
num_worker_connections 128
Creating worker on tid 2261971456
starting receive base loop
num_worker_connections 128
Creating worker on tid 1147924992
starting receive base loop
num_worker_connections 128
Creating worker on tid 39318016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3220238848
starting receive base loop
Created 1024 connections total
Creating worker on tid 2111631872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285133.283558,       0.0,       95009,      85537,       9472,      51751,      33786,  25.733655,  42.000000,  49.000000, 492.300000, 104.429157,   0.000000, 1915.071011, 414.978734
Outstanding requests per worker:
118 131 124 111 122 126 105 1808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32451.8,      162259,     146095,      16164,      98983,      47112,  43.774687,  57.400000,  74.800000, 784.600000, 182.957552,   0.145000, 3287.899971, 494.248763
Outstanding requests per worker:
49 48 50 50 46 46 50 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31996.0,      159980,     143935,      16045,     102571,      41364,  12.927984,  18.200000,  18.700000,  19.500000,   5.622917,   0.167000,  20.905999, 534.160517
Outstanding requests per worker:
57 55 52 50 53 54 51 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144075,      15939,     106084,      37991,  13.301262,  19.000000,  19.600000,  20.700000,   5.850379,   0.144000,  22.552000, 558.509207
Outstanding requests per worker:
60 54 46 50 53 52 59 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31992.8,      159964,     143935,      16029,     108592,      35343,  14.305226,  20.700000,  21.200000,  22.000000,   6.484934,   0.166000,  23.635000, 579.087567
Outstanding requests per worker:
66 61 58 59 60 62 58 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32011.2,      160056,     144128,      15928,     110176,      33952,  14.557835,  21.200000,  21.700000,  23.400000,   6.670841,   0.169000,  24.751000, 590.170737
Outstanding requests per worker:
56 59 55 53 56 55 51 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31994.8,      159974,     143974,      16000,     111619,      32355,  14.618447,  21.200000,  21.700000,  22.600000,   6.697827,   0.173000,  23.678999, 601.102484
Outstanding requests per worker:
60 60 57 63 60 57 62 57 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:45   0:00 /usr/lib/linux
memcache      8 86.0  0.0 130496 61312 pts/0    Sl+  10:45   0:32 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3789813020      instructions:u            #    0.66  insn per cycle         
        5757794253      cycles:u                                                    
          22502436      armv8_pmuv3_0/br_mis_pred/:u                                   
         606739414      armv8_pmuv3_0/br_pred/:u                                    

      38.120305872 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 27000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 256
Created 256 connections total
Creating worker on tid 1012396544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285173.283598,       0.0,       54009,      48667,       5342,      28557,      20110,   0.949361,   1.300000,   1.400000,   2.500000,   1.266525,   0.000000,  58.417000, 394.337991
Outstanding requests per worker:
28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121849,      13297,      79841,      42008,   0.877627,   1.300000,   1.400000,   1.700000,   0.277438,   0.159000,   3.343000, 469.742878
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121461,      13687,      84848,      36613,   0.890402,   1.300000,   1.400000,   1.700000,   0.281001,   0.163000,   4.278000, 517.167930
Outstanding requests per worker:
22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121692,      13449,      87871,      33821,   0.897523,   1.300000,   1.400000,   1.700000,   0.284157,   0.154000,   3.929000, 543.882671
Outstanding requests per worker:
26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121836,      13308,      90262,      31574,   0.900332,   1.300000,   1.400000,   1.800000,   0.286618,   0.158000,   4.127000, 562.586370
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121528,      13614,      91452,      30076,   0.903067,   1.300000,   1.400000,   1.800000,   0.288447,   0.159000,   4.490000, 575.742306
Outstanding requests per worker:
21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121683,      13462,      92803,      28880,   0.904929,   1.300000,   1.400000,   1.700000,   0.285946,   0.160000,   3.104000, 588.163268
Outstanding requests per worker:
21 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:46   0:00 /usr/lib/linux
memcache      8 79.6  0.0 124352 44416 pts/0    Sl+  10:46   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3327082185      instructions:u            #    0.53  insn per cycle         
        6247325419      cycles:u                                                    
          23610238      armv8_pmuv3_0/br_mis_pred/:u                                   
         586963438      armv8_pmuv3_0/br_pred/:u                                    

      35.630454322 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 28000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 256
Created 256 connections total
Creating worker on tid 546435584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285215.283640,       0.0,       57087,      51424,       5663,      30322,      21102,   1.557369,   2.100000,   2.600000,   4.900000,   2.381510,   0.000000,  86.737998, 397.042879
Outstanding requests per worker:
37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.6,      142873,     128741,      14132,      84735,      44006,   1.350372,   2.000000,   2.200000,   2.800000,   0.484285,   0.162000,   5.502000, 473.077334
Outstanding requests per worker:
35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128471,      14398,      90173,      38298,   1.351218,   2.000000,   2.200000,   2.800000,   0.484370,   0.167000,   5.945000, 521.135019
Outstanding requests per worker:
31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.2,      142861,     128675,      14186,      93611,      35064,   1.361872,   2.000000,   2.200000,   2.900000,   0.493024,   0.161000,   7.222000, 548.023454
Outstanding requests per worker:
35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.4,      142857,     128702,      14155,      95592,      33110,   1.397256,   2.100000,   2.300000,   2.900000,   0.509253,   0.161000,   7.020000, 565.778908
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.6,      142873,     128541,      14332,      96985,      31556,   1.387624,   2.100000,   2.300000,   2.900000,   0.504694,   0.161000,   6.171000, 579.428844
Outstanding requests per worker:
39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.4,      142862,     128704,      14158,      98369,      30335,   1.393554,   2.100000,   2.300000,   2.900000,   0.501851,   0.160000,   5.790000, 590.677586
Outstanding requests per worker:
41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:47   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:47   0:00 /usr/lib/linux
memcache      9 80.5  0.0 127424 47040 pts/0    Sl+  10:47   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3508850981      instructions:u            #    0.54  insn per cycle         
        6527763567      cycles:u                                                    
          25232566      armv8_pmuv3_0/br_mis_pred/:u                                   
         621813722      armv8_pmuv3_0/br_pred/:u                                    

      37.059848291 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 29000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 256
Created 256 connections total
Creating worker on tid 971305472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285255.283680,       0.0,       58762,      52934,       5828,      30781,      22153,   1.732603,   2.400000,   3.000000,   6.500000,   2.509018,   0.000000,  89.319997, 391.045094
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132529,      14537,      87506,      45023,   1.490157,   2.200000,   2.500000,   3.200000,   0.553836,   0.161000,   8.638000, 476.045696
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132258,      14814,      93049,      39209,   1.530341,   2.300000,   2.600000,   3.300000,   0.573578,   0.160000,   8.349000, 522.632264
Outstanding requests per worker:
41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132460,      14607,      96244,      36216,   1.549080,   2.300000,   2.600000,   3.300000,   0.581906,   0.165000,   7.538000, 547.285165
Outstanding requests per worker:
39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.2,      147056,     132439,      14617,      98441,      33998,   1.584181,   2.400000,   2.700000,   3.500000,   0.605374,   0.160000,   7.617000, 566.857383
Outstanding requests per worker:
50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132388,      14676,     100020,      32368,   1.614577,   2.400000,   2.800000,   3.600000,   0.631252,   0.160000,   9.956000, 581.012395
Outstanding requests per worker:
52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.8,      147079,     132453,      14626,     101798,      30655,   1.602289,   2.400000,   2.700000,   3.400000,   0.601636,   0.157000,   6.849000, 592.852997
Outstanding requests per worker:
41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   10:47   0:00 /usr/lib/linux
memcache      7 86.2  0.0 128448 48832 pts/0    Sl+  10:47   0:30 memcached -t 1
memcache     15  0.0  0.0   6656  4352 pts/1    Rs+  10:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3591197013      instructions:u            #    0.53  insn per cycle         
        6777377790      cycles:u                                                    
          26329217      armv8_pmuv3_0/br_mis_pred/:u                                   
         634099968      armv8_pmuv3_0/br_pred/:u                                    

      35.830301123 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 30000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 256
Created 256 connections total
Creating worker on tid 831975936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285296.283721,       0.0,       60537,      54519,       6018,      32136,      22383,   2.243509,   3.300000,   4.100000,   7.900000,   1.904598,   0.000000,  66.730998, 398.894294
Outstanding requests per worker:
55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.6,      151533,     136608,      14925,      90543,      46065,   2.078638,   3.100000,   3.600000,   4.800000,   0.855637,   0.164000,  12.393000, 477.974657
Outstanding requests per worker:
57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.6,      151513,     136197,      15316,      96037,      40160,   2.152404,   3.300000,   3.800000,   4.900000,   0.881670,   0.169000,  12.722000, 524.104452
Outstanding requests per worker:
68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.2,      151531,     136564,      14967,      99354,      37210,   2.224306,   3.400000,   3.900000,   5.100000,   0.917217,   0.165000,  13.665000, 549.601271
Outstanding requests per worker:
63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136390,      15130,     101787,      34603,   2.306859,   3.500000,   4.100000,   5.400000,   0.970602,   0.164000,  13.613000, 568.723895
Outstanding requests per worker:
73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.6,      151538,     136404,      15134,     103768,      32636,   2.303926,   3.500000,   4.100000,   5.400000,   0.973010,   0.168000,  13.635000, 584.592512
Outstanding requests per worker:
69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136443,      15081,     105166,      31277,   2.302506,   3.500000,   4.000000,   5.300000,   0.942519,   0.170000,   9.888000, 596.295677
Outstanding requests per worker:
68 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:48   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   10:48   0:00 /usr/lib/linux
memcache     11 85.3  0.0 128448 49088 pts/0    Sl+  10:48   0:30 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3687997126      instructions:u            #    0.55  insn per cycle         
        6673717909      cycles:u                                                    
          25128803      armv8_pmuv3_0/br_mis_pred/:u                                   
         646588732      armv8_pmuv3_0/br_pred/:u                                    

      35.800827131 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 31000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 256
Created 256 connections total
Creating worker on tid 423424512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285336.283761,       0.0,       62347,      56138,       6209,      32956,      23182,   5.692590,   9.700000,  11.800000,  20.100000,   6.029300,   0.000000, 147.394001, 395.779561
Outstanding requests per worker:
135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31254.2,      156271,     140835,      15436,      93832,      47003,   4.602327,   7.700000,   9.200000,  13.300000,   2.469319,   0.193000,  32.400001, 481.695289
Outstanding requests per worker:
132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.4,      156247,     140514,      15733,      99099,      41415,   4.884459,   8.200000,   9.900000,  14.300000,   2.689748,   0.183000,  48.664000, 525.449471
Outstanding requests per worker:
145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.8,      156249,     140785,      15464,     102967,      37818,   5.315578,   9.000000,  10.900000,  15.700000,   2.967200,   0.182000,  38.871001, 553.847249
Outstanding requests per worker:
159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31243.6,      156218,     140596,      15622,     105448,      35148,   5.941115,  10.200000,  12.600000,  18.600000,   3.497094,   0.203000,  41.877002, 573.309696
Outstanding requests per worker:
208 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31250.0,      156250,     140675,      15575,     106876,      33799,   6.127463,  10.600000,  13.100000,  20.300000,   3.842678,   0.208000,  61.926998, 585.893243
Outstanding requests per worker:
227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31256.6,      156283,     140782,      15501,     108679,      32103,   6.078647,  10.400000,  12.500000,  17.500000,   3.325256,   0.179000,  38.199000, 597.747638
Outstanding requests per worker:
203 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:49   0:00 /usr/lib/linux
memcache     10 89.5  0.0 129472 49088 pts/0    Sl+  10:49   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  10:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3768845687      instructions:u            #    0.57  insn per cycle         
        6667096685      cycles:u                                                    
          26578044      armv8_pmuv3_0/br_mis_pred/:u                                   
         660083675      armv8_pmuv3_0/br_pred/:u                                    

      35.730173726 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 1 threads, 32000 rps'
==> Bench: 16384 keys, 256 conns, 1 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 16384 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 1'
Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 256
Created 256 connections total
Creating worker on tid 90108416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285376.283801,       0.0,       63266,      56978,       6288,      33781,      23197,  17.385489,  29.800000,  43.800000,  76.700000,  13.181449,   0.000000, 159.193993, 403.575977
Outstanding requests per worker:
1227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31334.0,      156670,     141174,      15496,      94417,      46757, 104.019991, 215.200000, 257.500000, 381.400000,  81.724615,   0.545000, 565.091014, 484.875182
Outstanding requests per worker:
4931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31314.8,      156574,     140802,      15772,      99706,      41096, 189.636788, 389.900000, 468.300000, 587.000000, 138.896096,   0.351000, 772.143006, 528.384370
Outstanding requests per worker:
7042 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31266.0,      156330,     140869,      15461,     102938,      37931, 248.498983, 489.600000, 582.500000, 716.200000, 173.408426,   0.583000, 943.428993, 553.425807
Outstanding requests per worker:
8681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31239.8,      156199,     140565,      15634,     105183,      35382, 294.838883, 617.700000, 703.100000, 867.000000, 213.778952,   1.120000, 1066.225052, 572.283435
Outstanding requests per worker:
9994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31176.6,      155883,     140389,      15494,     106789,      33600, 336.109707, 699.700000, 855.700000, 1055.200000, 256.419633,   0.481000, 1538.414955, 586.100620
Outstanding requests per worker:
11277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31132.0,      155660,     140184,      15476,     108127,      32057, 374.709518, 786.600000, 925.700000, 1257.700000, 277.594291,   0.765000, 1608.461976, 598.287736
Outstanding requests per worker:
12203 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:49   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:49   0:00 /usr/lib/linux
memcache      9 88.3  0.0 130496 50048 pts/0    Sl+  10:49   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3726703237      instructions:u            #    0.57  insn per cycle         
        6496578145      cycles:u                                                    
          24437061      armv8_pmuv3_0/br_mis_pred/:u                                   
         637664093      armv8_pmuv3_0/br_pred/:u                                    

      35.709298529 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 27000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1639838208
starting receive base loop
Created 256 connections total
Creating worker on tid 527823360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285417.283842,       0.0,       68839,      61866,       6973,      36673,      25193,   0.344878,   0.242100,   0.252100,   1.100000,   2.451538,   0.000000,  78.445002, 402.960576
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121657,      13486,      81170,      40487,   0.183535,   0.232100,   0.248100,   0.262000,   0.037532,   0.098000,   0.942000, 481.992290
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121635,      13508,      85391,      36244,   0.183184,   0.231100,   0.248100,   0.262000,   0.037333,   0.097000,   0.711000, 521.330135
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121673,      13467,      88349,      33324,   0.183594,   0.234100,   0.249100,   0.263100,   0.037713,   0.098000,   0.768000, 548.455664
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121761,      13382,      90401,      31360,   0.183512,   0.234100,   0.249100,   0.264100,   0.038295,   0.094000,   0.865000, 565.312571
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121575,      13566,      91439,      30136,   0.183509,   0.233100,   0.249100,   0.264100,   0.038436,   0.097000,   0.862000, 576.980276
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121664,      13479,      92988,      28676,   0.183731,   0.235100,   0.249100,   0.265100,   0.038865,   0.097000,   0.849000, 589.668102
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:50   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5952 pts/0    S+   10:50   0:00 /usr/lib/linux
memcache     13 87.1  0.0 126400 44800 pts/0    Sl+  10:50   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  10:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3399988202      instructions:u            #    0.51  insn per cycle         
        6663291929      cycles:u                                                    
          24292340      armv8_pmuv3_0/br_mis_pred/:u                                   
         600563723      armv8_pmuv3_0/br_pred/:u                                    

      35.759615648 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 28000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1135997440
starting receive base loop
Created 256 connections total
Creating worker on tid 23196160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285457.283882,       0.0,       71559,      64349,       7210,      38363,      25986,   0.310031,   0.246100,   0.253100,   0.901100,   2.004661,   0.000000,  75.138003, 405.532347
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126959,      13897,      84861,      42098,   0.189858,   0.244100,   0.250100,   0.266100,   0.039819,   0.096000,   1.248000, 483.973913
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126753,      14104,      89229,      37524,   0.190348,   0.245100,   0.251100,   0.267100,   0.039468,   0.096000,   1.159000, 523.271986
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126835,      14025,      92435,      34400,   0.190868,   0.245100,   0.251100,   0.269100,   0.040694,   0.097000,   1.057000, 550.734364
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126852,      13999,      94405,      32447,   0.190391,   0.245100,   0.251100,   0.267100,   0.038867,   0.096000,   0.866000, 567.360546
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126596,      14257,      95809,      30787,   0.190896,   0.245100,   0.251100,   0.270100,   0.040678,   0.096000,   1.092000, 580.209414
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126879,      13981,      97138,      29741,   0.191130,   0.245100,   0.252100,   0.269100,   0.041211,   0.096000,   1.131000, 591.809819
Outstanding requests per worker:
2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:51   0:00 /usr/lib/linux
memcache      8 86.0  0.0 128448 47424 pts/0    Sl+  10:51   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  10:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3515184770      instructions:u            #    0.52  insn per cycle         
        6743349242      cycles:u                                                    
          24971136      armv8_pmuv3_0/br_mis_pred/:u                                   
         619595232      armv8_pmuv3_0/br_pred/:u                                    

      35.910399889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 29000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1891693056
starting receive base loop
Created 256 connections total
Creating worker on tid 777515520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285498.283923,       0.0,       75766,      68215,       7551,      40695,      27520,   0.386645,   0.250100,   0.259100,   1.300000,   2.668396,   0.000000,  87.231003, 404.880583
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132611,      14460,      88647,      43964,   0.198704,   0.248100,   0.255100,   0.295100,   0.042875,   0.097000,   1.450000, 484.350770
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132189,      14883,      93649,      38540,   0.198786,   0.248100,   0.255100,   0.296100,   0.042611,   0.099000,   1.383000, 528.143280
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.0,      147075,     132554,      14521,      97288,      35266,   0.199218,   0.248100,   0.255100,   0.297100,   0.043860,   0.097000,   1.385000, 555.899905
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132357,      14710,      98900,      33457,   0.199052,   0.249100,   0.256100,   0.297100,   0.041691,   0.096000,   0.913000, 571.557092
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132393,      14675,     100624,      31769,   0.199386,   0.249100,   0.256100,   0.298100,   0.043826,   0.096000,   1.339000, 585.856926
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132288,      14785,     101850,      30438,   0.199783,   0.249100,   0.256100,   0.299100,   0.044746,   0.095000,   1.133000, 595.038016
Outstanding requests per worker:
4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:51   0:00 /usr/lib/linux
memcache      8 90.5  0.0 128448 48448 pts/0    Sl+  10:51   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  10:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3660355401      instructions:u            #    0.53  insn per cycle         
        6845315228      cycles:u                                                    
          27860791      armv8_pmuv3_0/br_mis_pred/:u                                   
         644486224      armv8_pmuv3_0/br_pred/:u                                    

      35.800584842 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 30000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1348268544
starting receive base loop
Created 256 connections total
Creating worker on tid 240644608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285539.283964,       0.0,       78094,      70202,       7892,      41859,      28343,   0.375299,   0.246100,   0.256100,   0.581100,   3.163821,   0.000000, 111.123003, 405.614869
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136479,      15046,      91354,      45125,   0.197891,   0.245100,   0.253100,   0.294100,   0.043410,   0.092000,   1.483000, 485.438998
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136358,      15163,      96402,      39956,   0.198329,   0.245100,   0.253100,   0.294100,   0.043114,   0.095000,   1.422000, 526.655018
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.4,      151522,     136557,      14965,     100026,      36531,   0.198911,   0.246100,   0.254100,   0.296100,   0.044206,   0.091000,   1.481000, 553.427199
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136399,      15128,     102166,      34233,   0.198849,   0.246100,   0.254100,   0.296100,   0.043871,   0.092000,   1.478000, 571.685408
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.6,      151523,     136376,      15147,     103651,      32725,   0.199494,   0.246100,   0.255100,   0.297100,   0.044845,   0.093000,   1.033000, 585.141015
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136569,      14952,     105222,      31347,   0.199660,   0.246100,   0.255100,   0.297100,   0.046338,   0.091000,   1.442000, 595.839341
Outstanding requests per worker:
3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   10:52   0:00 /usr/lib/linux
memcache      9 86.3  0.0 129472 49024 pts/0    Sl+  10:52   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3744575904      instructions:u            #    0.54  insn per cycle         
        6922580450      cycles:u                                                    
          26756956      armv8_pmuv3_0/br_mis_pred/:u                                   
         657934737      armv8_pmuv3_0/br_pred/:u                                    

      37.149133356 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 31000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1196159488
starting receive base loop
Created 256 connections total
Creating worker on tid 82244096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285580.284005,       0.0,       81445,      73196,       8249,      44023,      29173,   0.332416,   0.253100,   0.283100,   0.867100,   2.298012,   0.000000,  88.643998, 411.837874
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140845,      15416,      94872,      45973,   0.206406,   0.251100,   0.279100,   0.301100,   0.045341,   0.104000,   1.135000, 488.430622
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140483,      15773,      99927,      40556,   0.207177,   0.253100,   0.281000,   0.303100,   0.044849,   0.094000,   1.049000, 531.367867
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140660,      15600,     103172,      37488,   0.208572,   0.261100,   0.281000,   0.304000,   0.046069,   0.092000,   1.122000, 556.974598
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140676,      15580,     105478,      35198,   0.209329,   0.264100,   0.282100,   0.311100,   0.047621,   0.096000,   1.053000, 573.708614
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140715,      15545,     107444,      33271,   0.209578,   0.264100,   0.282100,   0.308100,   0.049362,   0.091000,   1.061000, 587.500977
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31248.4,      156242,     140683,      15559,     108644,      32039,   0.210866,   0.268100,   0.283100,   0.318100,   0.053784,   0.105000,   1.163000, 598.865094
Outstanding requests per worker:
11 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:53   0:00 /usr/lib/linux
memcache      8 90.1  0.0 130496 49088 pts/0    Sl+  10:53   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3850601213      instructions:u            #    0.56  insn per cycle         
        6931684777      cycles:u                                                    
          26684977      armv8_pmuv3_0/br_mis_pred/:u                                   
         672757035      armv8_pmuv3_0/br_pred/:u                                    

      35.950117343 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 2 threads, 32000 rps'
==> Bench: 16384 keys, 256 conns, 2 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 16384 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 2'
Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1985016320
starting receive base loop
Created 256 connections total
Creating worker on tid 871428608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285621.284046,       0.0,       81987,      73763,       8224,      43919,      29844,   0.396428,   0.281000,   0.327000,   1.800000,   2.755283,   0.000000, 100.477003, 406.777992
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.6,      161308,     145269,      16039,      97902,      47367,   0.217100,   0.276100,   0.284100,   0.333100,   0.048698,   0.105000,   0.760000, 489.356236
Outstanding requests per worker:
5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     145101,      16200,     103456,      41645,   0.219191,   0.278100,   0.286100,   0.332100,   0.047738,   0.107000,   0.732000, 533.557088
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.0,      161305,     145170,      16135,     106757,      38413,   0.222128,   0.279100,   0.289100,   0.339100,   0.050298,   0.106000,   1.136000, 557.462871
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32262.4,      161312,     145007,      16305,     108994,      36013,   0.226708,   0.282100,   0.294100,   0.348100,   0.055070,   0.100000,   1.025000, 575.619570
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145083,      16217,     110900,      34183,   0.227979,   0.282100,   0.295100,   0.346000,   0.056521,   0.096000,   1.026000, 590.583969
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.4,      161302,     145408,      15894,     112366,      33042,   0.226446,   0.282100,   0.294100,   0.339100,   0.047585,   0.095000,   0.576000, 599.574968
Outstanding requests per worker:
3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:54   0:00 /usr/lib/linux
memcache      8 93.1  0.0 129472 48128 pts/0    Sl+  10:54   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3920963101      instructions:u            #    0.57  insn per cycle         
        6878054648      cycles:u                                                    
          26243813      armv8_pmuv3_0/br_mis_pred/:u                                   
         681009954      armv8_pmuv3_0/br_pred/:u                                    

      35.769761722 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 27000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2557538816
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
Created 256 connections total
Creating worker on tid 775287296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285661.284086,       0.0,       69255,      62201,       7054,      37246,      24955,   0.771241,   0.122100,   0.131000,  17.000000,   7.265933,   0.000000, 159.483001, 405.897478
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121686,      13458,      81210,      40476,   0.097287,   0.121100,   0.125100,   0.181100,   0.020433,   0.061000,   0.985000, 482.809296
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121591,      13554,      85648,      35943,   0.097153,   0.121100,   0.125100,   0.179100,   0.019460,   0.058000,   0.518000, 523.773289
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121467,      13682,      88643,      32824,   0.096891,   0.121100,   0.124100,   0.172100,   0.019606,   0.065000,   0.996000, 551.392403
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121697,      13448,      90434,      31263,   0.097084,   0.121100,   0.124100,   0.177100,   0.021096,   0.064000,   1.005000, 567.042441
Outstanding requests per worker:
0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121546,      13597,      91917,      29629,   0.096974,   0.121100,   0.124100,   0.172100,   0.020482,   0.061000,   0.706000, 580.114475
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121675,      13471,      93012,      28663,   0.097226,   0.121100,   0.124100,   0.178100,   0.023062,   0.066000,   0.861000, 589.881685
Outstanding requests per worker:
1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:54   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   10:54   0:00 /usr/lib/linux
memcache     10 85.0  0.0 124352 43840 pts/0    Sl+  10:54   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3365822092      instructions:u            #    0.52  insn per cycle         
        6436712492      cycles:u                                                    
          24042278      armv8_pmuv3_0/br_mis_pred/:u                                   
         593846947      armv8_pmuv3_0/br_pred/:u                                    

      35.809605014 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 28000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2276848128
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
Created 256 connections total
Creating worker on tid 488108544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285702.284127,       0.0,       72774,      65350,       7424,      38863,      26487,   0.580990,   0.169100,   0.187100,   3.900000,   5.416541,   0.000000, 131.158993, 404.392548
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     127009,      13846,      84713,      42296,   0.104774,   0.155100,   0.174100,   0.191100,   0.030137,   0.061000,   0.937000, 483.628877
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126690,      14169,      89258,      37432,   0.104277,   0.137100,   0.173000,   0.189100,   0.029281,   0.059000,   0.962000, 523.751575
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126722,      14138,      92266,      34456,   0.104744,   0.151100,   0.173000,   0.190100,   0.031886,   0.059000,   0.902000, 550.282429
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126778,      14073,      94483,      32295,   0.104486,   0.153100,   0.173000,   0.189100,   0.028931,   0.059000,   0.463000, 569.356679
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126757,      14099,      96136,      30621,   0.104784,   0.155100,   0.173000,   0.190100,   0.031372,   0.060000,   0.745000, 582.377896
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126860,      13998,      97508,      29352,   0.104654,   0.153100,   0.173000,   0.189100,   0.031544,   0.059000,   1.037000, 594.167610
Outstanding requests per worker:
0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:55   0:00 /usr/lib/linux
memcache      8 89.0  0.0 126400 44992 pts/0    Sl+  10:55   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  10:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3481156087      instructions:u            #    0.52  insn per cycle         
        6655038199      cycles:u                                                    
          24884147      armv8_pmuv3_0/br_mis_pred/:u                                   
         611134338      armv8_pmuv3_0/br_pred/:u                                    

      35.759241330 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 29000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2586178048
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
Created 256 connections total
Creating worker on tid 799470080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285743.284168,       0.0,       75465,      67861,       7604,      40575,      27286,   1.069396,   0.170100,   1.200000,  31.600000,   8.501356,   0.000000, 173.060000, 408.261387
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.0,      146000,     131505,      14495,      87958,      43547,   0.109966,   0.154100,   0.169100,   0.189100,   0.027776,   0.061000,   0.618000, 483.205140
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131261,      14741,      92654,      38607,   0.109991,   0.154100,   0.169100,   0.188100,   0.027606,   0.060000,   0.607000, 525.347727
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.4,      145992,     131601,      14391,      95977,      35624,   0.110319,   0.154100,   0.169100,   0.189100,   0.030488,   0.061000,   0.732000, 551.324139
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131326,      14668,      98243,      33083,   0.109979,   0.154100,   0.169100,   0.187100,   0.026977,   0.061000,   0.641000, 571.209951
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131302,      14697,      99562,      31740,   0.111032,   0.155100,   0.170100,   0.189100,   0.031578,   0.061000,   0.852000, 582.819896
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.0,      146000,     131495,      14505,     101019,      30476,   0.111146,   0.156100,   0.170100,   0.190100,   0.032122,   0.060000,   0.855000, 593.775771
Outstanding requests per worker:
2 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:56   0:00 /usr/lib/linux
memcache      8 87.4  0.0 127424 48000 pts/0    Sl+  10:56   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  10:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3613290930      instructions:u            #    0.54  insn per cycle         
        6672752848      cycles:u                                                    
          25262174      armv8_pmuv3_0/br_mis_pred/:u                                   
         632056542      armv8_pmuv3_0/br_pred/:u                                    

      35.690484615 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 30000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1864692224
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
Created 256 connections total
Creating worker on tid 77394432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285784.284209,       0.0,       77789,      70044,       7745,      41658,      28386,   0.829289,   0.161100,   1.500000,   8.900000,   6.788966,   0.000000, 162.042007, 404.871666
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135479,      14907,      90394,      45085,   0.103354,   0.123100,   0.156100,   0.187100,   0.024682,   0.060000,   0.838000, 482.037533
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135194,      15191,      95859,      39335,   0.103959,   0.124100,   0.157100,   0.187100,   0.024899,   0.061000,   1.531000, 528.278466
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135214,      15170,      98934,      36280,   0.103975,   0.124100,   0.157100,   0.187100,   0.025762,   0.061000,   1.672000, 553.459405
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135314,      15072,     101180,      34134,   0.104318,   0.125100,   0.157100,   0.186100,   0.025795,   0.059000,   0.860000, 570.458740
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135447,      14938,     102932,      32515,   0.104615,   0.125100,   0.157100,   0.187100,   0.029411,   0.060000,   1.631000, 584.325670
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135548,      14835,     104087,      31461,   0.105370,   0.126100,   0.159100,   0.188100,   0.031404,   0.061000,   0.875000, 593.914923
Outstanding requests per worker:
1 1 2 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:56   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:56   0:00 /usr/lib/linux
memcache      9 87.1  0.0 128448 48000 pts/0    Sl+  10:56   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  10:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3738379668      instructions:u            #    0.53  insn per cycle         
        7028091612      cycles:u                                                    
          26324600      armv8_pmuv3_0/br_mis_pred/:u                                   
         658004809      armv8_pmuv3_0/br_pred/:u                                    

      37.030913956 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 31000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2010903040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
Created 256 connections total
Creating worker on tid 219673088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285825.284250,       0.0,       79977,      71862,       8115,      43070,      28792,   1.632160,   4.900000,   8.100000,  13.600000,   7.151007,   0.000000, 183.917999, 409.018786
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139661,      15386,      94211,      45450,   0.106569,   0.153100,   0.163100,   0.189100,   0.030523,   0.056000,   0.898000, 488.975204
Outstanding requests per worker:
1 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139354,      15697,      99339,      40015,   0.106118,   0.152000,   0.161100,   0.187100,   0.027899,   0.058000,   0.992000, 532.691161
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139351,      15702,     102401,      36950,   0.107130,   0.153100,   0.162100,   0.187100,   0.031389,   0.058000,   0.955000, 557.001263
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139459,      15597,     104884,      34575,   0.108910,   0.156100,   0.164100,   0.189100,   0.033105,   0.058000,   0.889000, 576.719107
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139465,      15581,     106534,      32931,   0.111845,   0.159100,   0.170100,   0.190100,   0.037023,   0.059000,   0.946000, 589.912989
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139677,      15372,     108281,      31396,   0.111531,   0.158100,   0.167100,   0.190100,   0.041290,   0.060000,   0.967000, 600.332553
Outstanding requests per worker:
0 1 0 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:57   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   10:57   0:00 /usr/lib/linux
memcache      9 90.4  0.0 130496 50048 pts/0    Sl+  10:57   0:32 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3866312388      instructions:u            #    0.55  insn per cycle         
        7021043950      cycles:u                                                    
          26308064      armv8_pmuv3_0/br_mis_pred/:u                                   
         680025061      armv8_pmuv3_0/br_pred/:u                                    

      35.739608212 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 4 threads, 32000 rps'
==> Bench: 16384 keys, 256 conns, 4 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 16384 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 4'
Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2253386240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1655763456
starting receive base loop
num_worker_connections 64
Creating worker on tid 1059844608
starting receive base loop
Created 256 connections total
Creating worker on tid 463925760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285866.284291,       0.0,       81677,      73533,       8144,      44404,      29129,   3.990388,  10.400000,  14.300000,  20.600000,   8.602574,   0.000000, 186.672002, 412.031360
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144264,      15747,      97035,      47229,   0.138835,   0.181100,   0.186100,   0.221100,   0.038082,   0.063000,   0.616000, 490.409416
Outstanding requests per worker:
1 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144149,      15864,     102585,      41564,   0.143092,   0.183100,   0.186100,   0.209100,   0.036586,   0.065000,   0.694000, 532.215687
Outstanding requests per worker:
2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     143836,      16181,     105522,      38314,   0.148651,   0.184100,   0.187100,   0.224100,   0.039065,   0.059000,   0.766000, 556.309491
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143972,      16036,     108242,      35730,   0.151926,   0.185100,   0.188100,   0.228100,   0.043865,   0.065000,   0.951000, 576.529221
Outstanding requests per worker:
0 0 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143982,      16027,     110067,      33915,   0.155511,   0.185100,   0.189100,   0.282100,   0.050871,   0.061000,   0.944000, 588.676258
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144084,      15930,     111461,      32623,   0.161784,   0.186100,   0.191100,   0.323000,   0.080200,   0.062000,   1.336000, 599.921400
Outstanding requests per worker:
2 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:58   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5888 pts/0    S+   10:58   0:00 /usr/lib/linux
memcache     12 88.1  0.0 130496 51072 pts/0    Sl+  10:58   0:32 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  10:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3859243378      instructions:u            #    0.57  insn per cycle         
        6778981952      cycles:u                                                    
          24594504      armv8_pmuv3_0/br_mis_pred/:u                                   
         663575689      armv8_pmuv3_0/br_pred/:u                                    

      37.040214227 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 27000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 27000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2069230080
starting receive base loop
num_worker_connections 32
Creating worker on tid 1728508416
starting receive base loop
num_worker_connections 32
Creating worker on tid 1392964096
starting receive base loop
num_worker_connections 32
Creating worker on tid 1057419776
starting receive base loop
num_worker_connections 32
Creating worker on tid 721875456
starting receive base loop
num_worker_connections 32
Creating worker on tid 386331136
starting receive base loop
num_worker_connections 32
Creating worker on tid 50786816
starting receive base loop
Created 256 connections total
Creating worker on tid 4010209792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285906.284331,       0.0,       74509,      67000,       7509,      40030,      26970,   2.910806,   0.143100,   2.000000, 120.400000,  20.105402,   0.000000, 279.817998, 407.190313
Outstanding requests per worker:
0 1 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121781,      13365,      80784,      40997,   0.103797,   0.132100,   0.142100,   0.172100,   0.024831,   0.056000,   1.053000, 479.033724
Outstanding requests per worker:
1 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121609,      13541,      85589,      36020,   0.104098,   0.132100,   0.142100,   0.172100,   0.024850,   0.053000,   0.560000, 522.549721
Outstanding requests per worker:
0 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121806,      13345,      88453,      33353,   0.104536,   0.134100,   0.142100,   0.174100,   0.025679,   0.055000,   1.023000, 547.558495
Outstanding requests per worker:
0 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121517,      13626,      90075,      31442,   0.104781,   0.137100,   0.143100,   0.175000,   0.026717,   0.053000,   0.768000, 563.963042
Outstanding requests per worker:
0 1 1 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121353,      13793,      91365,      29988,   0.104902,   0.137100,   0.143100,   0.174100,   0.026482,   0.055000,   0.711000, 577.437336
Outstanding requests per worker:
1 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121740,      13409,      93042,      28698,   0.104773,   0.137100,   0.143100,   0.173000,   0.024619,   0.058000,   0.816000, 590.137046
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:58   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   10:58   0:00 /usr/lib/linux
memcache     10 84.8  0.0 126400 44352 pts/0    Sl+  10:58   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3319390807      instructions:u            #    0.53  insn per cycle         
        6285500529      cycles:u                                                    
          23301381      armv8_pmuv3_0/br_mis_pred/:u                                   
         577076018      armv8_pmuv3_0/br_pred/:u                                    

      35.840637560 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 28000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 28000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2503471616
starting receive base loop
num_worker_connections 32
Creating worker on tid 2166026752
starting receive base loop
num_worker_connections 32
Creating worker on tid 1830482432
starting receive base loop
num_worker_connections 32
Creating worker on tid 1494938112
starting receive base loop
num_worker_connections 32
Creating worker on tid 1159393792
starting receive base loop
num_worker_connections 32
Creating worker on tid 823849472
starting receive base loop
num_worker_connections 32
Creating worker on tid 488305152
starting receive base loop
Created 256 connections total
Creating worker on tid 152760832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285946.284371,       0.0,       76493,      68759,       7734,      41201,      27558,   2.520379,   0.175000,   1.600000, 104.000000,  18.253449,   0.000000, 273.108989, 409.006646
Outstanding requests per worker:
1 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126452,      13909,      84659,      41793,   0.119035,   0.172100,   0.175000,   0.197100,   0.034455,   0.054000,   0.605000, 485.617966
Outstanding requests per worker:
0 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.8,      140364,     125959,      14405,      88722,      37237,   0.119046,   0.172100,   0.175000,   0.197100,   0.034260,   0.053000,   0.626000, 524.293596
Outstanding requests per worker:
1 1 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.2,      140366,     126243,      14123,      92254,      33989,   0.119733,   0.172100,   0.176100,   0.199100,   0.035352,   0.058000,   0.737000, 551.753135
Outstanding requests per worker:
0 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.2,      140356,     126397,      13959,      94390,      32007,   0.120019,   0.173000,   0.176100,   0.203100,   0.036007,   0.052000,   0.784000, 570.119884
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126202,      14157,      95956,      30246,   0.120376,   0.173000,   0.176100,   0.204100,   0.036578,   0.054000,   0.875000, 583.904399
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.8,      140364,     126496,      13868,      96860,      29636,   0.120403,   0.173000,   0.176100,   0.205100,   0.038513,   0.051000,   0.972000, 590.473762
Outstanding requests per worker:
0 0 0 0 1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   10:59   0:00 /usr/lib/linux
memcache      8 84.7  0.0 127424 48064 pts/0    Sl+  10:59   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  11:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3431968880      instructions:u            #    0.54  insn per cycle         
        6324113632      cycles:u                                                    
          23953652      armv8_pmuv3_0/br_mis_pred/:u                                   
         593364359      armv8_pmuv3_0/br_pred/:u                                    

      35.861218862 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 29000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 29000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2374365696
starting receive base loop
num_worker_connections 32
Creating worker on tid 2039869952
starting receive base loop
num_worker_connections 32
Creating worker on tid 1704325632
starting receive base loop
num_worker_connections 32
Creating worker on tid 1368781312
starting receive base loop
num_worker_connections 32
Creating worker on tid 1033236992
starting receive base loop
num_worker_connections 32
Creating worker on tid 697692672
starting receive base loop
num_worker_connections 32
Creating worker on tid 362148352
starting receive base loop
Created 256 connections total
Creating worker on tid 26604032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575285987.284412,       0.0,       79963,      71917,       8046,      43145,      28772,   1.541283,   0.153100,   1.400000,  57.700000,  11.410314,   0.000000, 193.955004, 409.569170
Outstanding requests per worker:
0 1 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     130860,      14606,      87838,      43022,   0.113982,   0.144100,   0.153100,   0.184100,   0.026804,   0.054000,   0.987000, 487.763549
Outstanding requests per worker:
1 0 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.8,      145469,     130856,      14613,      92839,      38017,   0.114243,   0.147100,   0.154100,   0.185100,   0.027307,   0.054000,   1.038000, 529.920577
Outstanding requests per worker:
0 1 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.6,      145473,     130992,      14481,      95965,      35027,   0.114447,   0.149100,   0.154100,   0.185100,   0.027234,   0.053000,   0.675000, 553.890558
Outstanding requests per worker:
0 0 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     130922,      14539,      97779,      33143,   0.115325,   0.150100,   0.155100,   0.187100,   0.031203,   0.053000,   0.867000, 570.966278
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     130842,      14624,      99300,      31542,   0.115322,   0.150100,   0.155100,   0.187100,   0.030378,   0.056000,   0.872000, 583.975895
Outstanding requests per worker:
0 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.6,      145468,     130668,      14800,     100524,      30144,   0.115004,   0.151100,   0.155100,   0.186100,   0.025873,   0.057000,   1.040000, 594.792000
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:00   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:00   0:00 /usr/lib/linux
memcache      9 87.2  0.0 128448 45440 pts/0    Sl+  11:00   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3530341843      instructions:u            #    0.54  insn per cycle         
        6564822070      cycles:u                                                    
          23938739      armv8_pmuv3_0/br_mis_pred/:u                                   
         606672934      armv8_pmuv3_0/br_pred/:u                                    

      35.880012659 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 30000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 30000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2153968128
starting receive base loop
num_worker_connections 32
Creating worker on tid 1819800064
starting receive base loop
num_worker_connections 32
Creating worker on tid 1484255744
starting receive base loop
num_worker_connections 32
Creating worker on tid 1148711424
starting receive base loop
num_worker_connections 32
Creating worker on tid 813167104
starting receive base loop
num_worker_connections 32
Creating worker on tid 477622784
starting receive base loop
num_worker_connections 32
Creating worker on tid 142078464
starting receive base loop
Created 256 connections total
Creating worker on tid 4101501440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286027.284452,       0.0,       83544,      75189,       8355,      45115,      30074,   5.990173,   1.500000,   4.900000, 198.300000,  33.117375,   0.000000, 386.534989, 408.432151
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135561,      14832,      91002,      44559,   0.116352,   0.152000,   0.162100,   0.199100,   0.033092,   0.053000,   1.553000, 487.375270
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135212,      15170,      95963,      39249,   0.177628,   0.155100,   0.181100,   2.600000,   0.453390,   0.053000,   6.882000, 529.285271
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135428,      14960,      98898,      36530,   0.117510,   0.153100,   0.164100,   0.198100,   0.035731,   0.053000,   1.536000, 553.397857
Outstanding requests per worker:
0 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135216,      15173,     101176,      34040,   0.117477,   0.153100,   0.165100,   0.197100,   0.032153,   0.053000,   1.522000, 571.126183
Outstanding requests per worker:
0 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135360,      15032,     103073,      32287,   0.118506,   0.154100,   0.165100,   0.201100,   0.038824,   0.053000,   0.970000, 586.724741
Outstanding requests per worker:
0 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135306,      15076,     104296,      31010,   0.119193,   0.154100,   0.166100,   0.202100,   0.041433,   0.051000,   1.109000, 596.413359
Outstanding requests per worker:
1 1 1 1 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:00   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:00   0:00 /usr/lib/linux
memcache     10 88.9  0.0 128448 48128 pts/0    Sl+  11:00   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3661947993      instructions:u            #    0.55  insn per cycle         
        6612295208      cycles:u                                                    
          24485905      armv8_pmuv3_0/br_mis_pred/:u                                   
         629784658      armv8_pmuv3_0/br_pred/:u                                    

      36.009948355 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 31000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 31000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2250633728
starting receive base loop
num_worker_connections 32
Creating worker on tid 1913713152
starting receive base loop
num_worker_connections 32
Creating worker on tid 1578168832
starting receive base loop
num_worker_connections 32
Creating worker on tid 1242624512
starting receive base loop
num_worker_connections 32
Creating worker on tid 907080192
starting receive base loop
num_worker_connections 32
Creating worker on tid 571535872
starting receive base loop
num_worker_connections 32
Creating worker on tid 235991552
starting receive base loop
Created 256 connections total
Creating worker on tid 4195414528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286068.284493,       0.0,       85155,      76619,       8536,      46438,      30181,   5.245564,   9.600000,  13.400000,  91.300000,  16.417087,   0.000000, 240.600005, 416.095003
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139665,      15391,      94181,      45484,   0.111259,   0.147100,   0.162100,   0.199100,   0.033063,   0.052000,   0.622000, 491.982616
Outstanding requests per worker:
1 0 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139490,      15559,      99460,      40030,   0.115030,   0.153100,   0.166100,   0.218100,   0.039304,   0.052000,   0.757000, 533.156492
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139327,      15722,     102350,      36977,   0.118907,   0.154100,   0.174100,   0.238100,   0.054659,   0.053000,   0.928000, 556.416495
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139748,      15305,     104783,      34965,   0.115931,   0.154100,   0.173000,   0.204100,   0.031606,   0.053000,   0.392000, 573.433874
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139762,      15292,     106530,      33232,   0.123181,   0.164100,   0.183100,   0.242100,   0.060917,   0.053000,   1.149000, 587.551910
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139814,      15234,     108208,      31606,   0.124400,   0.164100,   0.185100,   0.245100,   0.062241,   0.052000,   1.116000, 599.789878
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:01   0:00 /usr/lib/linux
memcache      8 88.3  0.0 130496 50432 pts/0    Sl+  11:01   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3790347038      instructions:u            #    0.56  insn per cycle         
        6715920733      cycles:u                                                    
          24900764      armv8_pmuv3_0/br_mis_pred/:u                                   
         652434751      armv8_pmuv3_0/br_pred/:u                                    

      37.039722532 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 256 conns, 8 threads, 32000 rps'
==> Bench: 16384 keys, 256 conns, 8 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 16384 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 8'
Starting client with -r 32000 -k 16384 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 16384
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2689004032
starting receive base loop
num_worker_connections 32
Creating worker on tid 2348610048
starting receive base loop
num_worker_connections 32
Creating worker on tid 2013065728
starting receive base loop
num_worker_connections 32
Creating worker on tid 1677521408
starting receive base loop
num_worker_connections 32
Creating worker on tid 1341977088
starting receive base loop
num_worker_connections 32
Creating worker on tid 1006432768
starting receive base loop
num_worker_connections 32
Creating worker on tid 670888448
starting receive base loop
Created 256 connections total
Creating worker on tid 335344128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286108.284533,       0.0,       86673,      77976,       8697,      47073,      30903,   8.422909,  17.600000,  20.100000,  74.900000,  15.161119,   0.000000, 237.373993, 413.382643
Outstanding requests per worker:
30 31 26 34 33 33 36 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.2,      160021,     143909,      16112,      97042,      46867,   8.043844,  14.700000,  15.500000,  16.800000,   4.684066,   0.088000,  19.035000, 490.754331
Outstanding requests per worker:
35 36 38 23 26 28 32 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31993.6,      159968,     143509,      16459,     102380,      41129,   8.489662,  15.900000,  16.700000,  18.000000,   5.020566,   0.078000,  20.066001, 533.972399
Outstanding requests per worker:
42 42 33 36 39 41 27 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     143997,      16009,     106197,      37800,   8.987367,  17.000000,  17.900000,  19.100000,   5.361893,   0.089000,  20.814000, 560.242970
Outstanding requests per worker:
39 35 45 34 37 40 32 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143922,      16085,     108128,      35794,   9.245623,  17.600000,  18.600000,  19.800000,   5.543089,   0.088000,  21.426000, 575.193570
Outstanding requests per worker:
39 39 47 35 29 36 41 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143837,      16176,     109993,      33844,   9.596485,  18.500000,  19.500000,  20.900000,   5.808619,   0.089000,  24.230000, 590.549177
Outstanding requests per worker:
51 42 31 35 35 38 39 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31996.4,      159982,     143915,      16067,     111653,      32262,   9.904052,  19.200000,  20.300000,  21.800000,   6.029256,   0.088000,  25.150999, 602.212431
Outstanding requests per worker:
45 43 39 42 50 37 40 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:02   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:02   0:00 /usr/lib/linux
memcache      9 91.0  0.0 131520 52800 pts/0    Sl+  11:02   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3804909706      instructions:u            #    0.69  insn per cycle         
        5501306178      cycles:u                                                    
          21498172      armv8_pmuv3_0/br_mis_pred/:u                                   
         597537566      armv8_pmuv3_0/br_pred/:u                                    

      35.590722067 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 27000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2646340096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286150.284575,       0.0,       53977,      48640,       5337,      28458,      20182,   1.904005,   2.600000,   3.000000,   6.400000,   1.553645,   0.000000,  69.963999, 393.101172
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121847,      13297,      79790,      42057,   1.834737,   2.700000,   2.900000,   3.600000,   0.616189,   0.225000,   8.426000, 468.828186
Outstanding requests per worker:
46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121459,      13687,      85201,      36258,   1.885705,   2.700000,   3.000000,   3.700000,   0.629882,   0.228000,   7.225000, 519.299805
Outstanding requests per worker:
51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121693,      13450,      88337,      33356,   1.916666,   2.800000,   3.000000,   3.800000,   0.653587,   0.224000,  10.536000, 546.883313
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.8,      135134,     121826,      13308,      90195,      31631,   1.931548,   2.800000,   3.100000,   3.800000,   0.661296,   0.229000,   7.125000, 563.805871
Outstanding requests per worker:
59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.8,      135154,     121538,      13616,      91370,      30168,   1.937537,   2.800000,   3.100000,   3.800000,   0.657532,   0.236000,   8.273000, 576.290962
Outstanding requests per worker:
54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121683,      13462,      92909,      28774,   1.953593,   2.800000,   3.100000,   3.900000,   0.667113,   0.229000,   7.680000, 589.572759
Outstanding requests per worker:
59 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:02   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:02   0:00 /usr/lib/linux
memcache      9 77.8  0.0 123328 44864 pts/0    Sl+  11:02   0:28 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3269231376      instructions:u            #    0.53  insn per cycle         
        6127406488      cycles:u                                                    
          22579189      armv8_pmuv3_0/br_mis_pred/:u                                   
         569675094      armv8_pmuv3_0/br_pred/:u                                    

      38.029131741 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 28000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2806051328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286191.284616,       0.0,       57029,      51370,       5659,      30203,      21167,   2.757543,   3.900000,   4.700000,  10.500000,   1.857735,   0.000000,  60.228001, 396.070294
Outstanding requests per worker:
77 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.0,      142870,     128739,      14131,      84858,      43881,   2.694451,   4.000000,   4.400000,   5.700000,   1.007816,   0.225000,  13.148000, 474.456622
Outstanding requests per worker:
79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28575.0,      142875,     128477,      14398,      90544,      37933,   2.799138,   4.100000,   4.600000,   5.900000,   1.035428,   0.231000,  12.735000, 522.515586
Outstanding requests per worker:
72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.2,      142871,     128683,      14188,      93436,      35247,   2.939131,   4.400000,   4.900000,   6.300000,   1.121711,   0.267000,  12.751000, 547.825292
Outstanding requests per worker:
69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28569.8,      142849,     128696,      14153,      95640,      33056,   2.961765,   4.400000,   4.900000,   6.400000,   1.133765,   0.245000,  14.294000, 566.830632
Outstanding requests per worker:
85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.0,      142870,     128538,      14332,      97034,      31504,   2.969044,   4.400000,   4.900000,   6.300000,   1.115813,   0.229000,  14.020000, 579.372917
Outstanding requests per worker:
89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128707,      14157,      98827,      29880,   3.017055,   4.500000,   5.000000,   6.500000,   1.165921,   0.231000,  16.618000, 591.962333
Outstanding requests per worker:
89 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:03   0:00 /usr/lib/linux
memcache      8 80.5  0.0 125376 47488 pts/0    Sl+  11:03   0:29 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3453599200      instructions:u            #    0.54  insn per cycle         
        6380256212      cycles:u                                                    
          24047490      armv8_pmuv3_0/br_mis_pred/:u                                   
         601890631      armv8_pmuv3_0/br_pred/:u                                    

      36.830102128 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 29000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2495476224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286233.284658,       0.0,       58702,      52882,       5820,      31142,      21740,   3.291225,   4.700000,   5.900000,  14.200000,   2.278279,   0.000000,  55.652998, 397.104913
Outstanding requests per worker:
84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132530,      14539,      87407,      45123,   3.106409,   4.600000,   5.200000,   6.600000,   1.179532,   0.231000,  14.684000, 474.366777
Outstanding requests per worker:
80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.6,      147058,     132242,      14816,      93299,      38943,   3.402494,   5.100000,   5.800000,   7.500000,   1.353080,   0.266000,  18.521000, 524.377883
Outstanding requests per worker:
96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.0,      147060,     132461,      14599,      96343,      36118,   3.360610,   5.000000,   5.600000,   7.300000,   1.299457,   0.236000,  16.106000, 548.129782
Outstanding requests per worker:
110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29416.8,      147084,     132460,      14624,      98536,      33924,   3.445035,   5.100000,   5.800000,   7.500000,   1.339205,   0.266000,  13.869000, 566.306885
Outstanding requests per worker:
89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.0,      147050,     132374,      14676,     100063,      32311,   3.621313,   5.400000,   6.200000,   8.100000,   1.451735,   0.239000,  17.130001, 580.151027
Outstanding requests per worker:
108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132451,      14623,     101402,      31049,   3.511677,   5.200000,   5.900000,   7.600000,   1.366863,   0.240000,  15.633000, 591.208220
Outstanding requests per worker:
103 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:04   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:04   0:00 /usr/lib/linux
memcache      9 79.4  0.0 128448 49920 pts/0    Sl+  11:04   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3535374652      instructions:u            #    0.54  insn per cycle         
        6530097483      cycles:u                                                    
          25718852      armv8_pmuv3_0/br_mis_pred/:u                                   
         615054725      armv8_pmuv3_0/br_pred/:u                                    

      37.980443735 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 30000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2418143744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286275.284700,       0.0,       60433,      54426,       6007,      32221,      22205,   5.268878,   8.300000,  10.700000,  20.900000,   3.872274,   0.000000,  90.196997, 400.450722
Outstanding requests per worker:
133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30301.8,      151509,     136590,      14919,      90331,      46259,   5.135477,   8.000000,   9.300000,  12.400000,   2.278951,   0.305000,  31.840999, 477.135500
Outstanding requests per worker:
157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136207,      15322,      95967,      40240,   5.491106,   8.400000,   9.900000,  13.000000,   2.379677,   0.277000,  28.241999, 524.041481
Outstanding requests per worker:
150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30299.6,      151498,     136535,      14963,      99591,      36944,   5.981960,   9.300000,  11.000000,  15.000000,   2.754032,   0.284000,  34.864001, 551.787981
Outstanding requests per worker:
178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136390,      15135,     101898,      34492,   6.084740,   9.500000,  11.300000,  15.300000,   2.818464,   0.271000,  39.184999, 568.995777
Outstanding requests per worker:
179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.2,      151511,     136384,      15127,     103352,      33032,   6.118876,   9.500000,  11.200000,  14.900000,   2.753946,   0.279000,  31.192999, 582.561620
Outstanding requests per worker:
200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136448,      15081,     105151,      31297,   6.380050,  10.100000,  11.900000,  16.400000,   3.012939,   0.316000,  34.311999, 596.690366
Outstanding requests per worker:
194 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:04   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:04   0:00 /usr/lib/linux
memcache     10 81.0  0.0 128448 50560 pts/0    Sl+  11:04   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3605176494      instructions:u            #    0.56  insn per cycle         
        6491251136      cycles:u                                                    
          25553554      armv8_pmuv3_0/br_mis_pred/:u                                   
         625141255      armv8_pmuv3_0/br_pred/:u                                    

      37.961063963 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 31000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2593911296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286317.284742,       0.0,       62234,      56035,       6199,      33185,      22850,   9.964024,  16.900000,  21.300000,  34.500000,   6.794294,   0.000000, 126.873001, 401.287802
Outstanding requests per worker:
225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31243.4,      156217,     140788,      15429,      93528,      47260,   9.047843,  14.900000,  17.700000,  24.500000,   4.581545,   0.276000,  62.226001, 479.692332
Outstanding requests per worker:
267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31221.4,      156107,     140382,      15725,      99462,      40920,  11.719126,  20.100000,  24.600000,  36.100000,   6.824917,   0.315000,  92.729002, 527.930995
Outstanding requests per worker:
421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31254.4,      156272,     140812,      15460,     102906,      37906,  11.597197,  19.600000,  23.800000,  33.700000,   6.364083,   0.296000,  75.577997, 552.740938
Outstanding requests per worker:
406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31254.0,      156270,     140649,      15621,     105135,      35514,  12.610687,  21.600000,  26.300000,  37.200000,   7.049856,   0.377000,  81.811003, 571.284666
Outstanding requests per worker:
398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.8,      156234,     140655,      15579,     106925,      33730,  15.097715,  26.800000,  33.400000,  49.800000,   9.607076,   0.294000, 132.085994, 586.012719
Outstanding requests per worker:
421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.4,      156257,     140762,      15495,     108404,      32358,  13.395016,  23.200000,  28.100000,  39.100000,   7.512270,   0.376000,  78.610003, 596.250266
Outstanding requests per worker:
425 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:05   0:00 /usr/lib/linux
memcache      8 84.2  0.0 129472 50880 pts/0    Sl+  11:05   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3691551482      instructions:u            #    0.57  insn per cycle         
        6482541445      cycles:u                                                    
          24939819      armv8_pmuv3_0/br_mis_pred/:u                                   
         632830067      armv8_pmuv3_0/br_pred/:u                                    

      37.969527147 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 1 threads, 32000 rps'
==> Bench: 16384 keys, 512 conns, 1 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 16384 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 1'
Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2294608384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286358.284783,       0.0,       63501,      57187,       6314,      33886,      23301,  32.513001,  44.400000,  49.900000,  66.500000,  12.338854,   0.000000, 272.962987, 401.707241
Outstanding requests per worker:
974 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31118.8,      155594,     140192,      15402,      93432,      46760, 107.435438, 246.800000, 314.700000, 450.400000,  99.527569,   0.640000, 844.847977, 481.430096
Outstanding requests per worker:
6218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31198.4,      155992,     140291,      15701,      99429,      40862, 249.577018, 491.700000, 584.700000, 808.100000, 181.383684,   0.943000, 1297.611952, 527.891041
Outstanding requests per worker:
9626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31238.0,      156190,     140732,      15458,     102751,      37981, 338.917371, 687.100000, 802.400000, 1135.500000, 251.432264,   1.355000, 1837.607980, 552.754775
Outstanding requests per worker:
11924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31207.2,      156036,     140410,      15626,     105373,      35037, 405.037794, 820.800000, 970.500000, 1345.000000, 302.456646,   0.972000, 2003.931999, 573.728823
Outstanding requests per worker:
13849 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31138.4,      155692,     140219,      15473,     106775,      33444, 467.170023, 940.100000, 1146.400000, 1491.300000, 344.030101,   0.544000, 2334.969997, 587.028056
Outstanding requests per worker:
15712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31148.8,      155744,     140301,      15443,     108094,      32207, 520.247556, 1048.700000, 1257.800000, 1628.100000, 374.590049,   1.934000, 2415.323973, 596.253619
Outstanding requests per worker:
17073 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:06   0:00 /usr/lib/linux
memcache      8 85.4  0.0 130496 54528 pts/0    Sl+  11:06   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3632813234      instructions:u            #    0.59  insn per cycle         
        6191665060      cycles:u                                                    
          22437475      armv8_pmuv3_0/br_mis_pred/:u                                   
         606860410      armv8_pmuv3_0/br_pred/:u                                    

      36.779310406 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 27000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 512291328
starting receive base loop
Created 512 connections total
Creating worker on tid 2666263040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286400.284825,       0.0,       68905,      61924,       6981,      36682,      25242,   0.324646,   0.428100,   0.514100,   0.655100,   0.687858,   0.000000,  42.174999, 401.807974
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121842,      13302,      80792,      41050,   0.311430,   0.435100,   0.531100,   0.643100,   0.100129,   0.138000,   1.078000, 477.931140
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121529,      13617,      85471,      36058,   0.312427,   0.437100,   0.538100,   0.649100,   0.102115,   0.135000,   1.174000, 522.657539
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121671,      13473,      88334,      33337,   0.311332,   0.434100,   0.527100,   0.643100,   0.100490,   0.138000,   1.164000, 548.678116
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121820,      13325,      90324,      31496,   0.311742,   0.436100,   0.529100,   0.638100,   0.100486,   0.139000,   1.247000, 563.308168
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121575,      13567,      91695,      29880,   0.312416,   0.436100,   0.525100,   0.637100,   0.099206,   0.138000,   1.139000, 578.523751
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121634,      13509,      92966,      28668,   0.312964,   0.439100,   0.534100,   0.639100,   0.101603,   0.135000,   1.315000, 590.236710
Outstanding requests per worker:
4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:06   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:06   0:00 /usr/lib/linux
memcache     10 80.5  0.0 123328 46976 pts/0    Sl+  11:06   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3312730284      instructions:u            #    0.53  insn per cycle         
        6290436306      cycles:u                                                    
          22977121      armv8_pmuv3_0/br_mis_pred/:u                                   
         577500331      armv8_pmuv3_0/br_pred/:u                                    

      36.860628682 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 28000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 84800000
starting receive base loop
Created 512 connections total
Creating worker on tid 2239427072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286441.284866,       0.0,       71537,      64283,       7254,      38471,      25812,   0.354835,   0.454100,   0.536100,   0.673100,   1.200337,   0.000000,  73.679999, 407.348257
Outstanding requests per worker:
7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126916,      13937,      84464,      42452,   0.324596,   0.461100,   0.544100,   0.658100,   0.103362,   0.137000,   1.279000, 479.932207
Outstanding requests per worker:
6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126787,      14071,      89259,      37528,   0.323193,   0.458100,   0.535100,   0.647100,   0.101904,   0.146000,   1.250000, 523.630909
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.0,      140865,     126692,      14173,      92227,      34465,   0.324470,   0.461100,   0.539000,   0.651100,   0.102805,   0.139000,   1.249000, 548.673097
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126707,      14146,      94351,      32356,   0.324750,   0.461100,   0.540100,   0.650100,   0.103249,   0.147000,   1.254000, 567.054559
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126701,      14154,      95616,      31085,   0.325566,   0.462100,   0.540100,   0.649100,   0.104049,   0.138000,   1.458000, 580.290234
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126834,      14019,      97488,      29346,   0.325430,   0.463100,   0.539000,   0.647100,   0.102006,   0.139000,   1.059000, 594.078536
Outstanding requests per worker:
4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:07   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5888 pts/0    S+   11:07   0:00 /usr/lib/linux
memcache     13 82.6  0.0 126400 51200 pts/0    Sl+  11:07   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3454610035      instructions:u            #    0.54  insn per cycle         
        6387261346      cycles:u                                                    
          23773293      armv8_pmuv3_0/br_mis_pred/:u                                   
         601060024      armv8_pmuv3_0/br_pred/:u                                    

      36.840773986 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 29000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 449049088
starting receive base loop
Created 512 connections total
Creating worker on tid 2599154176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286482.284907,       0.0,       74678,      67088,       7590,      40107,      26981,   0.366886,   0.483100,   0.576100,   0.776000,   0.895032,   0.000000,  52.489001, 406.926097
Outstanding requests per worker:
7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132425,      14644,      88425,      44000,   0.341651,   0.482100,   0.558100,   0.661100,   0.105406,   0.160000,   1.120000, 484.050391
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132267,      14804,      93889,      38378,   0.340933,   0.480100,   0.551100,   0.656100,   0.104573,   0.148000,   1.276000, 527.210151
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.0,      147060,     132576,      14484,      96946,      35630,   0.341319,   0.479100,   0.548100,   0.656100,   0.104269,   0.159000,   1.358000, 552.852047
Outstanding requests per worker:
8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132283,      14786,      98876,      33407,   0.343424,   0.485100,   0.557100,   0.660100,   0.106020,   0.152000,   1.281000, 571.544280
Outstanding requests per worker:
5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132479,      14591,     100417,      32062,   0.342870,   0.484100,   0.553100,   0.659100,   0.106304,   0.159000,   1.269000, 583.291118
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132554,      14513,     102221,      30333,   0.342765,   0.483100,   0.552100,   0.657100,   0.104077,   0.148000,   0.997000, 597.334980
Outstanding requests per worker:
5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:08   0:00 /usr/lib/linux
memcache     10 84.6  0.0 128448 50112 pts/0    Sl+  11:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3580828033      instructions:u            #    0.54  insn per cycle         
        6637686099      cycles:u                                                    
          25001515      armv8_pmuv3_0/br_mis_pred/:u                                   
         622472757      armv8_pmuv3_0/br_pred/:u                                    

      36.860502224 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 30000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 57799168
starting receive base loop
Created 512 connections total
Creating worker on tid 2212622848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286523.284948,       0.0,       76949,      69219,       7730,      41165,      28054,   0.389428,   0.529100,   0.630100,   0.890100,   0.843165,   0.000000,  52.660000, 405.111790
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.6,      151518,     136434,      15084,      91093,      45341,   0.360753,   0.510100,   0.583100,   0.690100,   0.112574,   0.143000,   1.483000, 483.576073
Outstanding requests per worker:
10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136334,      15195,      96520,      39814,   0.362404,   0.513100,   0.583100,   0.695100,   0.113664,   0.150000,   1.302000, 527.595068
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136489,      15037,      99583,      36906,   0.362824,   0.514100,   0.585000,   0.694100,   0.113981,   0.162000,   1.345000, 550.705258
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136293,      15227,     101675,      34618,   0.363641,   0.514100,   0.585000,   0.692000,   0.113575,   0.162000,   1.279000, 569.796571
Outstanding requests per worker:
7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.6,      151528,     136344,      15184,     103811,      32533,   0.365586,   0.519100,   0.589100,   0.696100,   0.115600,   0.164000,   1.393000, 586.951270
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136538,      14982,     105136,      31402,   0.364296,   0.515100,   0.584100,   0.689100,   0.111891,   0.156000,   1.489000, 596.531500
Outstanding requests per worker:
7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:09   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   11:09   0:00 /usr/lib/linux
memcache     12 85.6  0.0 128448 50368 pts/0    Sl+  11:09   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3657787918      instructions:u            #    0.55  insn per cycle         
        6658923661      cycles:u                                                    
          24654079      armv8_pmuv3_0/br_mis_pred/:u                                   
         632547995      armv8_pmuv3_0/br_pred/:u                                    

      36.739689831 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 31000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 82178560
starting receive base loop
Created 512 connections total
Creating worker on tid 2236805632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286565.284990,       0.0,       79666,      71791,       7875,      43106,      28685,   0.451638,   0.614100,   0.712100,   1.900000,   0.921960,   0.000000,  52.914999, 408.825772
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140625,      15636,      94606,      46019,   0.381015,   0.537100,   0.607100,   0.700000,   0.116526,   0.163000,   1.246000, 488.042425
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.6,      156263,     140494,      15769,      99646,      40848,   0.384196,   0.540100,   0.609100,   0.705100,   0.116852,   0.158000,   1.255000, 529.744822
Outstanding requests per worker:
7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140462,      15799,     103100,      37362,   0.387394,   0.543100,   0.613100,   0.709100,   0.118179,   0.161000,   1.268000, 556.382032
Outstanding requests per worker:
4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31250.8,      156254,     140360,      15894,     104975,      35385,   0.390696,   0.550100,   0.617100,   0.719100,   0.120493,   0.156000,   1.380000, 572.778277
Outstanding requests per worker:
9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.6,      156263,     140866,      15397,     107593,      33273,   0.392565,   0.550100,   0.618100,   0.728100,   0.123023,   0.145000,   1.499000, 589.116309
Outstanding requests per worker:
7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.4,      156257,     140536,      15721,     108682,      31854,   0.391943,   0.549100,   0.614100,   0.699100,   0.116439,   0.161000,   1.067000, 600.034703
Outstanding requests per worker:
10 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:09   0:00 /usr/lib/linux
memcache      8 86.7  0.0 130496 53760 pts/0    Sl+  11:09   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3757788806      instructions:u            #    0.55  insn per cycle         
        6804280591      cycles:u                                                    
          24863699      armv8_pmuv3_0/br_mis_pred/:u                                   
         641481286      armv8_pmuv3_0/br_pred/:u                                    

      36.740400515 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 2 threads, 32000 rps'
==> Bench: 16384 keys, 512 conns, 2 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 16384 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 2'
Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 825684480
starting receive base loop
Created 512 connections total
Creating worker on tid 2977624576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286606.285031,       0.0,       81463,      73288,       8175,      43726,      29562,  11.877409,  28.600000,  31.300000,  34.300000,  10.479354,   0.000000,  84.623002, 408.488593
Outstanding requests per worker:
246 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32351.2,      161756,     145579,      16177,      98226,      47353,   2.076791,   7.200000,  12.900000,  22.200000,   4.413680,   0.167000,  26.069000, 490.190247
Outstanding requests per worker:
9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145173,      16126,     103333,      41840,   0.448767,   0.603100,   0.666100,   0.811100,   0.133203,   0.167000,   1.520000, 532.342137
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145181,      16118,     106537,      38644,   0.455288,   0.609100,   0.669000,   0.786100,   0.130722,   0.182000,   1.700000, 555.856310
Outstanding requests per worker:
10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145010,      16290,     109007,      36003,   0.467997,   0.625100,   0.696100,   1.100000,   0.149267,   0.168000,   1.771000, 575.481905
Outstanding requests per worker:
11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.6,      161298,     145170,      16128,     110409,      34761,   0.474008,   0.634100,   0.700000,   0.986100,   0.145583,   0.179000,   1.839000, 587.264290
Outstanding requests per worker:
8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.4,      161297,     145288,      16009,     112526,      32762,   0.472191,   0.636100,   0.680100,   0.770100,   0.120859,   0.180000,   1.045000, 601.870244
Outstanding requests per worker:
11 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:10   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:10   0:00 /usr/lib/linux
memcache     10 89.8  0.0 129472 52352 pts/0    Sl+  11:10   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3787528921      instructions:u            #    0.60  insn per cycle         
        6338611352      cycles:u                                                    
          22669536      armv8_pmuv3_0/br_mis_pred/:u                                   
         636472010      armv8_pmuv3_0/br_pred/:u                                    

      36.800859361 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 27000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1947791872
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
Created 512 connections total
Creating worker on tid 2908877312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286648.285073,       0.0,       77688,      69799,       7889,      41649,      28150,   0.648712,   0.275100,   0.398100,   2.200000,   6.076232,   0.000000, 160.751000, 406.681815
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121729,      13423,      81446,      40283,   0.181312,   0.279100,   0.390100,   0.512100,   0.086592,   0.073000,   0.947000, 484.933459
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121550,      13591,      85530,      36020,   0.180295,   0.273100,   0.387100,   0.509100,   0.084874,   0.070000,   0.856000, 522.688573
Outstanding requests per worker:
0 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121664,      13481,      88717,      32947,   0.180830,   0.276100,   0.388000,   0.511100,   0.086189,   0.073000,   0.930000, 549.385644
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121634,      13515,      90884,      30750,   0.181326,   0.277100,   0.388000,   0.513100,   0.087217,   0.070000,   1.009000, 570.272136
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121555,      13595,      91879,      29676,   0.180874,   0.276100,   0.388000,   0.508100,   0.086293,   0.073000,   1.102000, 579.521591
Outstanding requests per worker:
0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121715,      13427,      93325,      28390,   0.180336,   0.274100,   0.386100,   0.508100,   0.084438,   0.068000,   0.834000, 591.120560
Outstanding requests per worker:
1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:11   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:11   0:00 /usr/lib/linux
memcache      9 82.2  0.0 125376 49664 pts/0    Sl+  11:11   0:30 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3331052005      instructions:u            #    0.53  insn per cycle         
        6282526794      cycles:u                                                    
          24319295      armv8_pmuv3_0/br_mis_pred/:u                                   
         579052767      armv8_pmuv3_0/br_pred/:u                                    

      36.840164903 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 28000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1563488768
starting receive base loop
num_worker_connections 128
Creating worker on tid 452653568
starting receive base loop
num_worker_connections 128
Creating worker on tid 3639013888
starting receive base loop
Created 512 connections total
Creating worker on tid 2530406912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286689.285114,       0.0,       81063,      72851,       8212,      43457,      29394,   0.442147,   0.307100,   0.390100,   1.800000,   3.973824,   0.000000, 123.461999, 405.552388
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126857,      13995,      84696,      42161,   0.181091,   0.306100,   0.375100,   0.486100,   0.083721,   0.072000,   0.830000, 482.784797
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126615,      14241,      89552,      37063,   0.180830,   0.305100,   0.374100,   0.482100,   0.083069,   0.073000,   0.933000, 526.268167
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126968,      13891,      92357,      34611,   0.181301,   0.306100,   0.375100,   0.483100,   0.083871,   0.068000,   0.939000, 548.356570
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126937,      13924,      94369,      32568,   0.181064,   0.304000,   0.372100,   0.481100,   0.083474,   0.072000,   1.100000, 567.026407
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126654,      14197,      95761,      30893,   0.182324,   0.308100,   0.378100,   0.487100,   0.085024,   0.071000,   1.078000, 579.951995
Outstanding requests per worker:
1 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126911,      13941,      97521,      29390,   0.182513,   0.309100,   0.376100,   0.486100,   0.086098,   0.072000,   1.234000, 594.248213
Outstanding requests per worker:
1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:11   0:00 /usr/lib/linux
memcache      8 84.4  0.0 126400 51136 pts/0    Sl+  11:11   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3470790561      instructions:u            #    0.54  insn per cycle         
        6461902793      cycles:u                                                    
          23490711      armv8_pmuv3_0/br_mis_pred/:u                                   
         603449913      armv8_pmuv3_0/br_pred/:u                                    

      36.940774454 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 29000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2133717504
starting receive base loop
num_worker_connections 128
Creating worker on tid 1021768192
starting receive base loop
num_worker_connections 128
Creating worker on tid 4208128512
starting receive base loop
Created 512 connections total
Creating worker on tid 3094082048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286730.285155,       0.0,       83630,      75173,       8457,      45077,      30096,   0.363620,   0.347100,   0.434100,   2.000000,   3.036270,   0.000000, 110.583000, 411.131829
Outstanding requests per worker:
1 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.6,      145998,     131588,      14410,      88716,      42872,   0.185360,   0.340100,   0.381100,   0.484100,   0.089875,   0.073000,   0.906000, 489.667523
Outstanding requests per worker:
2 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131388,      14611,      93287,      38101,   0.184846,   0.336100,   0.378100,   0.480100,   0.088749,   0.074000,   0.952000, 527.965796
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131304,      14698,      95875,      35429,   0.186415,   0.341100,   0.382100,   0.483100,   0.090253,   0.073000,   1.047000, 551.941929
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131424,      14569,      97751,      33673,   0.185984,   0.340100,   0.380100,   0.479100,   0.087568,   0.070000,   0.786000, 566.955290
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.0,      145995,     131469,      14526,      99709,      31760,   0.188461,   0.344100,   0.384100,   0.491100,   0.092218,   0.073000,   1.057000, 584.000761
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131221,      14778,     100919,      30302,   0.188933,   0.344100,   0.385100,   0.487100,   0.093577,   0.071000,   1.248000, 594.857134
Outstanding requests per worker:
2 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:12   0:00 /usr/lib/linux
memcache      8 88.8  0.0 127424 51136 pts/0    Sl+  11:12   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3611241075      instructions:u            #    0.53  insn per cycle         
        6794027325      cycles:u                                                    
          23990556      armv8_pmuv3_0/br_mis_pred/:u                                   
         627424715      armv8_pmuv3_0/br_pred/:u                                    

      36.929849410 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 30000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 512 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1866461696
starting receive base loop
num_worker_connections 128
Creating worker on tid 753332736
starting receive base loop
num_worker_connections 128
Creating worker on tid 3939693056
starting receive base loop
Created 512 connections total
Creating worker on tid 2825646592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286772.285197,       0.0,       86080,      77502,       8578,      46939,      30563,   0.436929,   0.377100,   0.486100,   2.400000,   3.727210,   0.000000, 122.293003, 414.584695
Outstanding requests per worker:
2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.0,      150400,     135282,      15118,      90655,      44627,   0.204916,   0.350000,   0.425100,   0.492100,   0.093629,   0.070000,   1.114000, 487.571791
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135246,      15135,      96182,      39064,   0.205931,   0.351100,   0.426100,   0.490100,   0.095119,   0.072000,   1.029000, 531.514426
Outstanding requests per worker:
2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135353,      15037,      99196,      36157,   0.207443,   0.353100,   0.430100,   0.495100,   0.096452,   0.072000,   1.402000, 554.352065
Outstanding requests per worker:
2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135596,      14794,     101526,      34070,   0.206841,   0.352100,   0.427100,   0.492100,   0.093787,   0.072000,   1.391000, 571.431429
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135350,      15043,     102659,      32691,   0.209839,   0.353100,   0.431100,   0.501000,   0.100513,   0.072000,   1.375000, 582.961973
Outstanding requests per worker:
0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135343,      15042,     104121,      31222,   0.211173,   0.355100,   0.434100,   0.500100,   0.101611,   0.071000,   1.424000, 595.876122
Outstanding requests per worker:
2 1 2 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:13   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:13   0:00 /usr/lib/linux
memcache      9 84.6  0.0 130496 54528 pts/0    Sl+  11:13   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3656605786      instructions:u            #    0.54  insn per cycle         
        6715610916      cycles:u                                                    
          25355298      armv8_pmuv3_0/br_mis_pred/:u                                   
         631255850      armv8_pmuv3_0/br_pred/:u                                    

      38.241023135 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 31000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1386344960
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
Created 512 connections total
Creating worker on tid 2347823616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286814.285239,       0.0,       89496,      80436,       9060,      48801,      31635,   3.023555,   8.800000,  10.000000,  11.000000,   6.114719,   0.000000, 160.114005, 416.876598
Outstanding requests per worker:
2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139586,      15470,      93741,      45845,   0.217314,   0.430100,   0.487100,   0.602100,   0.118020,   0.076000,   1.121000, 487.981065
Outstanding requests per worker:
2 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139330,      15717,      99077,      40253,   0.220116,   0.431100,   0.488100,   0.608000,   0.123200,   0.074000,   1.225000, 530.426348
Outstanding requests per worker:
3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.6,      155063,     139645,      15418,     102476,      37169,   0.221937,   0.433100,   0.488100,   0.607100,   0.121857,   0.069000,   1.149000, 556.551119
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139568,      15476,     104639,      34929,   0.225143,   0.437100,   0.494100,   0.610100,   0.121968,   0.074000,   0.856000, 574.069966
Outstanding requests per worker:
1 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139688,      15364,     106589,      33099,   0.226803,   0.438100,   0.496100,   0.613100,   0.123687,   0.073000,   1.071000, 588.819104
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139557,      15490,     107902,      31655,   0.229547,   0.440100,   0.498100,   0.618100,   0.129547,   0.071000,   1.433000, 600.543463
Outstanding requests per worker:
2 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:13   0:00 /usr/lib/linux
memcache      8 90.7  0.0 130496 53184 pts/0    Sl+  11:13   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3784500423      instructions:u            #    0.56  insn per cycle         
        6720782064      cycles:u                                                    
          23975192      armv8_pmuv3_0/br_mis_pred/:u                                   
         652034782      armv8_pmuv3_0/br_pred/:u                                    

      36.910081498 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 4 threads, 32000 rps'
==> Bench: 16384 keys, 512 conns, 4 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 16384 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 4'
Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2064708096
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
Created 512 connections total
Creating worker on tid 3026973184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286856.285281,       0.0,       91668,      82413,       9255,      49922,      32491,   9.933229,  25.800000,  28.600000,  32.400000,  10.472779,   0.000000, 130.568996, 416.609479
Outstanding requests per worker:
113 116 103 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32088.2,      160441,     144388,      16053,      98050,      46338,   1.851811,   6.900000,  12.500000,  20.600000,   4.229393,   0.079000,  24.218000, 495.176794
Outstanding requests per worker:
3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144045,      15969,     102514,      41531,   0.268751,   0.420100,   0.446100,   0.551100,   0.103510,   0.078000,   1.092000, 531.469874
Outstanding requests per worker:
1 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144018,      15987,     106046,      37972,   0.277412,   0.429100,   0.456100,   0.584100,   0.112135,   0.082000,   1.216000, 558.663230
Outstanding requests per worker:
2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143876,      16132,     108335,      35541,   0.287893,   0.434100,   0.463100,   0.678100,   0.120725,   0.082000,   1.361000, 577.073807
Outstanding requests per worker:
2 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144056,      15961,     110089,      33967,   0.288892,   0.433100,   0.459100,   0.844100,   0.130955,   0.082000,   1.490000, 589.996980
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143890,      16119,     111470,      32420,   0.307161,   0.438100,   0.472100,   1.400000,   0.172620,   0.085000,   1.812000, 601.237953
Outstanding requests per worker:
1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:14   0:00 /usr/lib/linux
memcache      8 88.7  0.0 131520 56128 pts/0    Sl+  11:14   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3789977283      instructions:u            #    0.59  insn per cycle         
        6429175066      cycles:u                                                    
          23445516      armv8_pmuv3_0/br_mis_pred/:u                                   
         639467519      armv8_pmuv3_0/br_pred/:u                                    

      36.931091884 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 27000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 27000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2213147136
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
Created 512 connections total
Creating worker on tid 2342973952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286898.285323,       0.0,       83244,      74933,       8311,      44954,      29979,   0.635509,   0.270100,   0.393100,   2.000000,   5.906617,   0.000000, 131.171003, 411.036646
Outstanding requests per worker:
1 0 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121764,      13388,      81514,      40250,   0.149676,   0.269100,   0.365100,   0.474100,   0.086481,   0.067000,   0.925000, 485.964924
Outstanding requests per worker:
0 0 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121606,      13543,      85731,      35875,   0.149850,   0.270100,   0.366100,   0.474100,   0.087000,   0.066000,   0.849000, 523.105028
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121581,      13570,      88475,      33106,   0.149454,   0.268100,   0.363100,   0.465100,   0.085691,   0.067000,   0.975000, 549.105008
Outstanding requests per worker:
0 1 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121699,      13445,      90597,      31102,   0.150630,   0.271100,   0.367100,   0.474100,   0.087343,   0.067000,   0.939000, 567.369436
Outstanding requests per worker:
0 1 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121448,      13698,      91633,      29815,   0.150901,   0.271100,   0.367100,   0.477100,   0.088271,   0.067000,   1.078000, 579.862353
Outstanding requests per worker:
0 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121910,      13239,      93096,      28814,   0.150574,   0.271100,   0.366100,   0.471100,   0.086543,   0.067000,   0.799000, 589.079952
Outstanding requests per worker:
1 0 0 1 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:15   0:00 /usr/lib/linux
memcache      8 80.5  0.0 126400 49920 pts/0    Sl+  11:15   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3310812537      instructions:u            #    0.53  insn per cycle         
        6271018881      cycles:u                                                    
          22350136      armv8_pmuv3_0/br_mis_pred/:u                                   
         570433393      armv8_pmuv3_0/br_pred/:u                                    

      38.420640274 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 28000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 28000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2583491072
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
Created 512 connections total
Creating worker on tid 2713383424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286940.285365,       0.0,       88022,      79073,       8949,      47672,      31401,   0.465605,   0.325100,   0.409100,   1.900000,   4.205085,   0.000000, 125.915006, 414.157336
Outstanding requests per worker:
0 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.6,      140368,     126424,      13944,      84880,      41544,   0.164617,   0.322100,   0.379100,   0.484100,   0.090258,   0.069000,   0.908000, 487.452849
Outstanding requests per worker:
0 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.4,      140357,     126417,      13940,      89415,      37002,   0.164409,   0.322100,   0.376100,   0.481100,   0.089832,   0.063000,   0.966000, 527.244651
Outstanding requests per worker:
1 0 1 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126287,      14073,      92468,      33819,   0.165890,   0.326100,   0.383100,   0.488100,   0.092111,   0.067000,   1.485000, 552.847744
Outstanding requests per worker:
1 0 1 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126400,      13963,      94328,      32072,   0.165336,   0.323000,   0.376100,   0.481100,   0.091111,   0.067000,   1.044000, 570.496891
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.4,      140367,     126191,      14176,      95415,      30776,   0.166131,   0.324100,   0.380100,   0.486100,   0.092697,   0.068000,   1.241000, 581.503079
Outstanding requests per worker:
1 0 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.6,      140358,     126565,      13793,      97003,      29562,   0.165618,   0.325100,   0.379100,   0.478100,   0.089721,   0.066000,   0.746000, 593.137321
Outstanding requests per worker:
0 0 0 1 1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:15   0:00 /usr/lib/linux
memcache      8 83.4  0.0 128448 53120 pts/0    Sl+  11:15   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  11:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3415835129      instructions:u            #    0.54  insn per cycle         
        6271282888      cycles:u                                                    
          22474853      armv8_pmuv3_0/br_mis_pred/:u                                   
         586784772      armv8_pmuv3_0/br_pred/:u                                    

      37.131208871 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 29000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 29000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1913647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
Creating worker on tid 2635592192
num_worker_connections 64
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575286982.285407,       0.0,       88345,      79475,       8870,      48133,      31342,   0.682360,   0.327000,   0.415100,   3.300000,   6.075773,   0.000000, 138.473004, 415.567940
Outstanding requests per worker:
0 0 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.6,      145468,     130972,      14496,      88211,      42761,   0.147688,   0.317100,   0.352100,   0.441100,   0.087144,   0.068000,   0.849000, 490.001573
Outstanding requests per worker:
1 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.4,      145467,     130910,      14557,      93308,      37602,   0.148950,   0.318100,   0.358100,   0.452100,   0.090081,   0.067000,   0.951000, 531.704415
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.4,      145472,     131135,      14337,      96097,      35038,   0.149445,   0.319100,   0.355100,   0.439100,   0.088301,   0.066000,   1.269000, 555.042613
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.6,      145463,     130983,      14480,      97980,      33003,   0.149526,   0.319100,   0.356100,   0.440100,   0.087361,   0.066000,   0.773000, 572.163243
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     130855,      14610,      99335,      31520,   0.151854,   0.321100,   0.364100,   0.454100,   0.092160,   0.068000,   1.080000, 583.764533
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.8,      145469,     131141,      14328,     101240,      29901,   0.152453,   0.322100,   0.363100,   0.447100,   0.093602,   0.066000,   1.426000, 596.958228
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:16   0:00 /usr/lib/linux
memcache      8 84.0  0.0 128448 53120 pts/0    Sl+  11:16   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3578243722      instructions:u            #    0.54  insn per cycle         
        6668193619      cycles:u                                                    
          26727455      armv8_pmuv3_0/br_mis_pred/:u                                   
         619021115      armv8_pmuv3_0/br_pred/:u                                    

      38.260846098 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2361913856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1763176960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
Created 512 connections total
Creating worker on tid 2485252608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287024.285449,       0.0,       90654,      81489,       9165,      49056,      32433,   0.798806,   0.358100,   0.507100,   9.000000,   6.595287,   0.000000, 159.431994, 413.042816
Outstanding requests per worker:
0 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135366,      15017,      91253,      44113,   0.166075,   0.322100,   0.365100,   0.448100,   0.090958,   0.067000,   0.951000, 489.768295
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135216,      15171,      96375,      38841,   0.167453,   0.322100,   0.368100,   0.454100,   0.092397,   0.068000,   1.011000, 532.272808
Outstanding requests per worker:
1 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135314,      15075,      99144,      36170,   0.169100,   0.323000,   0.369000,   0.450100,   0.092896,   0.067000,   1.554000, 555.251467
Outstanding requests per worker:
0 0 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135524,      14864,     101282,      34242,   0.170774,   0.324100,   0.370100,   0.458100,   0.094180,   0.066000,   1.048000, 571.233494
Outstanding requests per worker:
1 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135370,      15011,     102918,      32452,   0.171097,   0.324100,   0.369000,   0.455100,   0.094493,   0.065000,   1.129000, 585.752198
Outstanding requests per worker:
0 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135425,      14958,     104515,      30910,   0.172734,   0.325100,   0.370100,   0.457100,   0.096321,   0.068000,   1.198000, 598.663755
Outstanding requests per worker:
0 0 0 1 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:17   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:17   0:00 /usr/lib/linux
memcache      9 87.3  0.0 129472 54208 pts/0    Sl+  11:17   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3653009633      instructions:u            #    0.55  insn per cycle         
        6668559836      cycles:u                                                    
          24596138      armv8_pmuv3_0/br_mis_pred/:u                                   
         626710236      armv8_pmuv3_0/br_pred/:u                                    

      36.950215084 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 31000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 31000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1961619968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1368584704
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287067.285492,       0.0,       93838,      84314,       9524,      51220,      33094,   7.698950,  20.700000,  23.700000,  27.000000,   9.684702,   0.000000, 136.629000, 417.285575
Outstanding requests per worker:
36 39 32 30 35 39 29 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31063.4,      155317,     139768,      15549,      94512,      45256,   0.640556,   0.465100,   3.700000,  10.500000,   1.745500,   0.066000,  13.620000, 492.674282
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.8,      155059,     139532,      15527,      99239,      40293,   0.216862,   0.368100,   0.415100,   0.491100,   0.103728,   0.065000,   1.085000, 531.637589
Outstanding requests per worker:
1 1 1 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139669,      15389,     102533,      37136,   0.221996,   0.374100,   0.420100,   0.501000,   0.106757,   0.066000,   1.097000, 555.008205
Outstanding requests per worker:
0 1 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139687,      15361,     104569,      35118,   0.225959,   0.380100,   0.424100,   0.510100,   0.109178,   0.068000,   1.191000, 572.955465
Outstanding requests per worker:
0 1 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139554,      15497,     106614,      32940,   0.228471,   0.381100,   0.427100,   0.559100,   0.113839,   0.066000,   1.210000, 588.268856
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139793,      15263,     107841,      31952,   0.232617,   0.386100,   0.432100,   0.555100,   0.119834,   0.066000,   1.411000, 597.973282
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:18   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:18   0:00 /usr/lib/linux
memcache      9 86.0  0.0 130496 55360 pts/0    Sl+  11:18   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3698786863      instructions:u            #    0.58  insn per cycle         
        6388269796      cycles:u                                                    
          23405269      armv8_pmuv3_0/br_mis_pred/:u                                   
         624439008      armv8_pmuv3_0/br_pred/:u                                    

      38.470598416 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 32000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 32000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2285367808
starting receive base loop
num_worker_connections 64
Creating worker on tid 1688007168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1092088320
starting receive base loop
num_worker_connections 64
Creating worker on tid 498790912
starting receive base loop
num_worker_connections 64
Creating worker on tid 4197839360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3601920512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3006001664
starting receive base loop
Created 512 connections total
Creating worker on tid 2410082816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287109.285534,       0.0,       96088,      86389,       9699,      52707,      33682,  10.356854,  26.600000,  30.100000,  38.000000,  13.208470,   0.000000, 173.363999, 420.976525
Outstanding requests per worker:
51 49 55 51 58 53 53 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32086.2,      160431,     144505,      15926,      97882,      46623,   1.881264,   7.500000,  12.300000,  19.900000,   4.194438,   0.067000,  24.106000, 493.955932
Outstanding requests per worker:
0 0 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143803,      16206,     102467,      41336,   0.251695,   0.388000,   0.429100,   0.549100,   0.110927,   0.067000,   1.228000, 533.816701
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144031,      15979,     106081,      37950,   0.264409,   0.396100,   0.439100,   0.621100,   0.112842,   0.068000,   1.136000, 559.453722
Outstanding requests per worker:
0 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144165,      15852,     108312,      35853,   0.274799,   0.409100,   0.450100,   0.630100,   0.114881,   0.067000,   1.156000, 576.097035
Outstanding requests per worker:
1 1 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.4,      160022,     144231,      15791,     110391,      33840,   0.292730,   0.431100,   0.477100,   0.865100,   0.137224,   0.069000,   1.551000, 590.788513
Outstanding requests per worker:
1 1 2 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     143962,      16048,     111560,      32402,   0.301513,   0.423100,   0.469100,   1.400000,   0.180985,   0.068000,   1.964000, 600.407851
Outstanding requests per worker:
1 1 0 0 1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:18   0:00 /usr/lib/linux
memcache      8 91.1  0.0 129472 54336 pts/0    Sl+  11:18   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3776283918      instructions:u            #    0.59  insn per cycle         
        6387780042      cycles:u                                                    
          22247282      armv8_pmuv3_0/br_mis_pred/:u                                   
         633656089      armv8_pmuv3_0/br_pred/:u                                    

      36.959801514 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 27000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3479302656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287152.285577,       0.0,       53849,      48531,       5318,      28388,      20143,   4.384566,   6.300000,   7.500000,  16.600000,   2.578573,   0.000000,  61.569002, 393.651048
Outstanding requests per worker:
121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27024.4,      135122,     121823,      13299,      79831,      41992,   4.184905,   6.000000,   6.700000,   8.200000,   1.441081,   0.399000,  15.349000, 471.080740
Outstanding requests per worker:
143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121449,      13692,      84829,      36620,   5.073198,   7.400000,   8.200000,  10.400000,   1.849036,   0.360000,  21.007000, 516.674703
Outstanding requests per worker:
144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27033.4,      135167,     121723,      13444,      88038,      33685,   5.050935,   7.400000,   8.100000,  10.300000,   1.834117,   0.437000,  22.877000, 544.611988
Outstanding requests per worker:
120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27024.2,      135121,     121805,      13316,      90165,      31640,   5.098485,   7.500000,   8.200000,  10.400000,   1.851848,   0.398000,  20.455001, 562.703904
Outstanding requests per worker:
146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121537,      13603,      91433,      30104,   5.266014,   7.700000,   8.500000,  10.800000,   1.934801,   0.393000,  24.030000, 577.313106
Outstanding requests per worker:
152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121677,      13470,      93054,      28623,   5.246140,   7.700000,   8.400000,  10.600000,   1.905921,   0.411000,  19.141000, 589.447726
Outstanding requests per worker:
144 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:19   0:00 /usr/lib/linux
memcache      8 76.1  0.0 125376 55488 pts/0    Sl+  11:19   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3189832503      instructions:u            #    0.55  insn per cycle         
        5750850246      cycles:u                                                    
          21400993      armv8_pmuv3_0/br_mis_pred/:u                                   
         548109330      armv8_pmuv3_0/br_pred/:u                                    

      37.840467175 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 28000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3323982336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287194.285619,       0.0,       56812,      51171,       5641,      30066,      21105,   8.241251,  12.000000,  15.100000,  27.500000,   4.461772,   0.000000,  90.107001, 395.191241
Outstanding requests per worker:
244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128733,      14131,      85228,      43505,   7.305036,  11.100000,  12.700000,  16.700000,   2.990463,   0.544000,  35.487998, 476.535504
Outstanding requests per worker:
249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28567.4,      142837,     128437,      14400,      89683,      38754,   9.662280,  14.700000,  16.900000,  22.300000,   4.082780,   0.434000,  50.452001, 516.824529
Outstanding requests per worker:
277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128690,      14174,      93522,      35168,   9.808189,  14.800000,  17.200000,  22.500000,   4.142998,   0.495000,  49.045999, 548.532326
Outstanding requests per worker:
279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.6,      142873,     128707,      14166,      95584,      33123,   9.997761,  15.200000,  17.500000,  22.900000,   4.225063,   0.417000,  46.247002, 565.772025
Outstanding requests per worker:
269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28568.6,      142843,     128520,      14323,      96937,      31583,  10.464142,  16.000000,  18.600000,  24.300000,   4.502187,   0.494000,  50.813999, 578.464877
Outstanding requests per worker:
288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.4,      142862,     128717,      14145,      98311,      30406,  10.355646,  15.800000,  18.300000,  24.000000,   4.412161,   0.398000,  55.953000, 590.248965
Outstanding requests per worker:
297 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:20   0:00 /usr/lib/linux
memcache      9 78.8  0.0 127424 57408 pts/0    Sl+  11:20   0:29 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3325736613      instructions:u            #    0.57  insn per cycle         
        5864761647      cycles:u                                                    
          21110040      armv8_pmuv3_0/br_mis_pred/:u                                   
         565863513      armv8_pmuv3_0/br_pred/:u                                    

      37.970358425 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 29000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2800284160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287237.285662,       0.0,       58428,      52639,       5789,      30802,      21837,  14.589563,  22.900000,  25.500000,  36.000000,   6.847888,   0.000000, 112.319000, 393.593153
Outstanding requests per worker:
309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29397.6,      146988,     132448,      14540,      87331,      45117,   9.944410,  15.500000,  18.000000,  24.400000,   4.426588,   0.548000,  56.488000, 474.529982
Outstanding requests per worker:
391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132258,      14809,      93115,      39143,  13.802892,  21.800000,  25.700000,  34.700000,   6.419033,   0.448000,  69.320999, 523.050220
Outstanding requests per worker:
394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.4,      147052,     132462,      14590,      96376,      36086,  13.819813,  21.700000,  25.600000,  34.200000,   6.376540,   0.446000,  73.775999, 548.812814
Outstanding requests per worker:
417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29400.8,      147004,     132374,      14630,      98378,      33996,  14.554345,  23.000000,  27.100000,  36.200000,   6.746170,   0.539000,  77.970996, 566.769872
Outstanding requests per worker:
479 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29423.4,      147117,     132446,      14671,     100405,      32041,  15.166275,  24.200000,  28.500000,  38.800000,   7.181189,   0.484000,  81.561998, 581.598334
Outstanding requests per worker:
431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29404.8,      147024,     132397,      14627,     101433,      30964,  15.092851,  23.900000,  28.200000,  37.800000,   7.046841,   0.590000,  83.714001, 592.500132
Outstanding requests per worker:
477 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:20   0:00 /usr/lib/linux
memcache      9 79.8  0.0 127424 58560 pts/0    Sl+  11:20   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3415293995      instructions:u            #    0.58  insn per cycle         
        5897267742      cycles:u                                                    
          22404257      armv8_pmuv3_0/br_mis_pred/:u                                   
         573684778      armv8_pmuv3_0/br_pred/:u                                    

      37.780742378 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 30000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3244749312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287279.285704,       0.0,       59503,      53588,       5915,      31394,      22194,  34.154361,  45.000000,  48.600000,  58.300000,   9.667417,   0.000000, 231.930003, 394.282638
Outstanding requests per worker:
1012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30367.6,      151838,     136877,      14961,      90491,      46386,  31.637742,  44.200000,  47.300000,  56.600000,  11.012476,   0.904000, 130.045995, 477.071363
Outstanding requests per worker:
699 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30289.6,      151448,     136142,      15306,      95853,      40289,  25.356246,  43.100000,  52.300000,  73.500000,  13.892342,   0.735000, 156.332999, 524.186247
Outstanding requests per worker:
776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30288.4,      151442,     136479,      14963,      99613,      36866,  25.700911,  43.700000,  52.900000,  74.600000,  14.166999,   0.689000, 159.318998, 552.305153
Outstanding requests per worker:
857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30283.4,      151417,     136288,      15129,     101797,      34491,  26.611345,  45.700000,  55.400000,  77.800000,  14.922564,   0.628000, 166.564003, 569.401958
Outstanding requests per worker:
966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30328.0,      151640,     136506,      15134,     103875,      32631,  28.580061,  49.500000,  60.200000,  85.100000,  16.316134,   0.725000, 174.750000, 584.988850
Outstanding requests per worker:
848 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136451,      15069,     105004,      31447,  26.935955,  46.100000,  55.900000,  77.600000,  14.902404,   0.745000, 152.795002, 595.460715
Outstanding requests per worker:
854 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:21   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:21   0:00 /usr/lib/linux
memcache      9 83.1  0.0 128448 61056 pts/0    Sl+  11:21   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  11:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3448930065      instructions:u            #    0.61  insn per cycle         
        5655730593      cycles:u                                                    
          20802264      armv8_pmuv3_0/br_mis_pred/:u                                   
         571508752      armv8_pmuv3_0/br_pred/:u                                    

      37.889264231 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 31000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2517299712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287321.285746,       0.0,       55840,      50326,       5514,      29605,      20721, 123.110029, 235.800000, 289.800000, 400.800000,  82.443072,   0.000000, 665.602982, 396.415710
Outstanding requests per worker:
6557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31254.8,      156274,     140814,      15460,      93447,      47367, 277.780682, 535.300000, 634.300000, 837.300000, 183.350505,  11.396000, 1325.624943, 478.482459
Outstanding requests per worker:
6550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32158.4,      160792,     144567,      16225,     101975,      42592, 105.581738, 225.300000, 348.000000, 663.900000, 123.652218,   1.883000, 1204.980969, 525.282098
Outstanding requests per worker:
2021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140811,      15448,     102909,      37902,  60.339468, 115.600000, 146.000000, 214.600000,  43.182281,   1.418000, 467.431992, 552.085015
Outstanding requests per worker:
2022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31149.4,      155747,     140178,      15569,     104822,      35356,  65.635069, 127.100000, 157.700000, 231.800000,  46.828175,   1.659000, 491.656005, 571.388392
Outstanding requests per worker:
2534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31216.6,      156083,     140516,      15567,     106806,      33710,  83.628402, 166.800000, 209.400000, 299.000000,  62.339494,   1.992000, 668.550014, 586.114926
Outstanding requests per worker:
2707 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31239.2,      156196,     140726,      15470,     108497,      32229,  89.997653, 178.100000, 222.200000, 326.000000,  67.130402,   3.274000, 753.181994, 595.883106
Outstanding requests per worker:
2775 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:22   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:22   0:00 /usr/lib/linux
memcache     10 81.3  0.0 130496 64192 pts/0    Sl+  11:22   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3524430967      instructions:u            #    0.63  insn per cycle         
        5563799968      cycles:u                                                    
          20036953      armv8_pmuv3_0/br_mis_pred/:u                                   
         572521868      armv8_pmuv3_0/br_pred/:u                                    

      37.820281828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 1 threads, 32000 rps'
==> Bench: 16384 keys, 1024 conns, 1 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 16384 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 1'
Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3214471680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287364.285789,       0.0,       54620,      49223,       5397,      29046,      20177, 173.066275, 321.300000, 383.700000, 508.100000, 105.527353,   0.000000, 759.860992, 396.635313
Outstanding requests per worker:
7716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30145.6,      150728,     135839,      14889,      89744,      46095, 341.759315, 638.900000, 758.100000, 1000.200000, 216.110221,  16.450001, 1618.738055, 474.794205
Outstanding requests per worker:
13114 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30593.2,      152966,     137540,      15426,      96927,      40613, 467.365410, 925.400000, 1091.000000, 1418.800000, 322.850617,  11.471000, 2105.089903, 524.607111
Outstanding requests per worker:
16500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30647.2,      153236,     138028,      15208,     100580,      37448, 568.215568, 1138.300000, 1323.600000, 1746.000000, 400.722179,  12.914000, 2806.698084, 551.772532
Outstanding requests per worker:
19233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30519.8,      152599,     137388,      15211,     102182,      35206, 654.859824, 1320.700000, 1522.200000, 1981.700000, 471.073417,   9.373000, 3172.085047, 567.366888
Outstanding requests per worker:
21846 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30533.8,      152669,     137426,      15243,     104284,      33142, 736.983090, 1506.200000, 1756.100000, 2157.400000, 528.847627,   7.919000, 3107.368946, 583.108698
Outstanding requests per worker:
24189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30567.4,      152837,     137687,      15150,     106121,      31566, 808.635158, 1668.700000, 1932.000000, 2451.900000, 578.283787,  11.378000, 3609.446049, 595.447675
Outstanding requests per worker:
26135 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:23   0:00 /usr/lib/linux
memcache      8 81.6  0.0 130496 60736 pts/0    Sl+  11:23   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3541020885      instructions:u            #    0.64  insn per cycle         
        5498487632      cycles:u                                                    
          20919086      armv8_pmuv3_0/br_mis_pred/:u                                   
         567820872      armv8_pmuv3_0/br_pred/:u                                    

      37.980310644 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 27000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2808214016
starting receive base loop
Created 1024 connections total
Creating worker on tid 2900488704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287407.285832,       0.0,       69304,      62194,       7110,      36847,      25347,   0.687229,   1.100000,   1.200000,   1.400000,   1.122041,   0.000000,  85.134998, 402.069540
Outstanding requests per worker:
16 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121823,      13326,      80391,      41432,   0.700528,   1.200000,   1.300000,   1.500000,   0.284328,   0.240000,   2.299000, 476.901037
Outstanding requests per worker:
16 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.4,      135137,     121494,      13643,      85205,      36289,   0.690925,   1.200000,   1.400000,   1.500000,   0.306686,   0.227000,   2.294000, 520.010354
Outstanding requests per worker:
19 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.0,      135155,     121730,      13425,      88516,      33214,   0.689553,   1.200000,   1.400000,   1.500000,   0.303830,   0.245000,   2.440000, 549.418714
Outstanding requests per worker:
13 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121602,      13542,      90209,      31393,   0.693655,   1.200000,   1.400000,   1.500000,   0.307968,   0.210000,   2.406000, 564.105549
Outstanding requests per worker:
14 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.6,      135158,     121566,      13592,      91876,      29690,   0.692366,   1.200000,   1.400000,   1.500000,   0.302818,   0.215000,   2.507000, 579.716681
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.6,      135133,     121622,      13511,      93000,      28622,   0.693056,   1.200000,   1.400000,   1.500000,   0.304904,   0.220000,   2.234000, 589.741667
Outstanding requests per worker:
14 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:23   0:00 /usr/lib/linux
memcache      8 77.7  0.0 125376 55360 pts/0    Sl+  11:23   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3240306737      instructions:u            #    0.56  insn per cycle         
        5830598154      cycles:u                                                    
          21957952      armv8_pmuv3_0/br_mis_pred/:u                                   
         549615956      armv8_pmuv3_0/br_pred/:u                                    

      37.880464202 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 28000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2567500288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2658857472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287450.285875,       0.0,       71801,      64609,       7192,      38539,      26070,   0.735004,   1.200000,   1.300000,   1.500000,   0.526326,   0.000000,  43.662000, 406.730146
Outstanding requests per worker:
18 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126814,      14045,      84403,      42411,   0.759448,   1.200000,   1.400000,   1.500000,   0.295846,   0.251000,   2.381000, 480.679775
Outstanding requests per worker:
19 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.4,      140867,     126496,      14371,      89180,      37316,   0.731108,   1.300000,   1.400000,   1.600000,   0.314025,   0.239000,   2.419000, 523.607877
Outstanding requests per worker:
15 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28168.8,      140844,     126909,      13935,      92340,      34569,   0.735200,   1.300000,   1.400000,   1.600000,   0.316181,   0.239000,   2.671000, 548.882443
Outstanding requests per worker:
17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.0,      140865,     126680,      14185,      94283,      32397,   0.735819,   1.300000,   1.400000,   1.600000,   0.314622,   0.224000,   2.298000, 566.197940
Outstanding requests per worker:
15 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126689,      14171,      96015,      30674,   0.733673,   1.300000,   1.400000,   1.600000,   0.312248,   0.243000,   2.259000, 580.624782
Outstanding requests per worker:
10 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126820,      14037,      97422,      29398,   0.737947,   1.300000,   1.400000,   1.600000,   0.315818,   0.220000,   2.519000, 592.769784
Outstanding requests per worker:
13 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:24   0:00 /usr/lib/linux
memcache      8 77.1  0.0 128448 60160 pts/0    Sl+  11:24   0:30 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3341545147      instructions:u            #    0.57  insn per cycle         
        5914222557      cycles:u                                                    
          21885377      armv8_pmuv3_0/br_mis_pred/:u                                   
         568961226      armv8_pmuv3_0/br_pred/:u                                    

      39.210104416 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 29000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2486628864
starting receive base loop
Created 1024 connections total
Creating worker on tid 2573005312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287493.285918,       0.0,       75013,      67457,       7556,      40078,      27379,   7.835380,  15.300000,  16.600000,  19.000000,   5.695698,   0.000000,  60.816001, 403.832708
Outstanding requests per worker:
211 225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29490.8,      147454,     132773,      14681,      88809,      43964,  10.254592,  25.500000,  26.900000,  28.300000,   9.912415,   0.252000,  30.400001, 484.581007
Outstanding requests per worker:
26 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29416.6,      147083,     132422,      14661,      93778,      38644,   0.835102,   1.400000,   1.500000,   1.600000,   0.328269,   0.244000,   2.388000, 527.669957
Outstanding requests per worker:
19 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132375,      14693,      96746,      35629,   0.838238,   1.400000,   1.500000,   1.600000,   0.327489,   0.229000,   2.444000, 551.273669
Outstanding requests per worker:
17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132342,      14730,      98726,      33616,   0.843481,   1.400000,   1.500000,   1.600000,   0.326784,   0.230000,   2.439000, 569.397138
Outstanding requests per worker:
14 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132199,      14867,      99966,      32233,   0.844371,   1.400000,   1.500000,   1.600000,   0.326720,   0.211000,   2.484000, 581.729128
Outstanding requests per worker:
18 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132507,      14558,     101689,      30818,   0.845930,   1.400000,   1.500000,   1.600000,   0.324588,   0.252000,   2.593000, 592.465764
Outstanding requests per worker:
21 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      9 79.6  0.0 128448 59008 pts/0    Sl+  11:25   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3446289439      instructions:u            #    0.58  insn per cycle         
        5993365230      cycles:u                                                    
          21197355      armv8_pmuv3_0/br_mis_pred/:u                                   
         576428563      armv8_pmuv3_0/br_pred/:u                                    

      39.160757914 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 30000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3042243072
starting receive base loop
Created 1024 connections total
Creating worker on tid 3128619520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287536.285961,       0.0,       76831,      69000,       7831,      41186,      27814,  13.217132,  27.200000,  28.900000,  30.100000,  10.460014,   0.000000,  75.430997, 406.026493
Outstanding requests per worker:
299 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30416.4,      152082,     136972,      15110,      91882,      45090,  11.919723,  29.900000,  31.400000,  32.900000,  11.480533,   0.222000,  34.766000, 485.650418
Outstanding requests per worker:
18 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136214,      15312,      96749,      39465,   0.889801,   1.400000,   1.500000,   1.700000,   0.327680,   0.242000,   2.549000, 529.940682
Outstanding requests per worker:
19 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.0,      151535,     136488,      15047,      99608,      36880,   0.899712,   1.400000,   1.500000,   1.700000,   0.330114,   0.245000,   2.877000, 552.735361
Outstanding requests per worker:
18 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136394,      15127,     101931,      34463,   0.905852,   1.400000,   1.500000,   1.700000,   0.329280,   0.249000,   2.589000, 570.379943
Outstanding requests per worker:
19 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136277,      15244,     103604,      32673,   0.907002,   1.400000,   1.500000,   1.700000,   0.331673,   0.220000,   2.717000, 584.883421
Outstanding requests per worker:
22 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136286,      15241,     104703,      31583,   0.905593,   1.400000,   1.500000,   1.700000,   0.320538,   0.251000,   2.364000, 593.777967
Outstanding requests per worker:
19 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      8 80.2  0.0 130496 60160 pts/0    Sl+  11:25   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3537251115      instructions:u            #    0.59  insn per cycle         
        5991003812      cycles:u                                                    
          22175643      armv8_pmuv3_0/br_mis_pred/:u                                   
         588442972      armv8_pmuv3_0/br_pred/:u                                    

      39.121036005 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 31000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2375152128
starting receive base loop
Created 1024 connections total
Creating worker on tid 2465591808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287579.286004,       0.0,       78924,      70973,       7951,      42403,      28570,  16.831949,  36.000000,  37.300000,  39.300000,  13.543351,   0.000000, 112.930000, 407.254801
Outstanding requests per worker:
382 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31395.0,      156975,     141288,      15687,      94745,      46543,  14.843898,  36.800000,  39.400000,  41.400000,  13.507895,   0.255000,  43.701999, 486.925372
Outstanding requests per worker:
25 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.4,      156267,     140753,      15514,     100053,      40700,   1.051049,   1.500000,   1.600000,   1.900000,   0.334395,   0.260000,   2.875000, 530.632427
Outstanding requests per worker:
24 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140648,      15616,     103344,      37304,   1.066360,   1.500000,   1.600000,   2.000000,   0.333358,   0.287000,   2.976000, 557.584402
Outstanding requests per worker:
20 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140571,      15693,     105468,      35103,   1.105195,   1.600000,   1.700000,   2.200000,   0.354803,   0.289000,   3.164000, 575.492762
Outstanding requests per worker:
17 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.8,      156269,     140617,      15652,     107626,      32991,   1.125601,   1.600000,   1.700000,   2.600000,   0.385458,   0.283000,   3.676000, 588.776599
Outstanding requests per worker:
18 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140706,      15550,     108601,      32105,   1.096807,   1.600000,   1.700000,   1.800000,   0.314128,   0.281000,   2.681000, 599.329709
Outstanding requests per worker:
21 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:26   0:00 /usr/lib/linux
memcache      8 85.3  0.0 129472 62528 pts/0    Sl+  11:26   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3606715597      instructions:u            #    0.62  insn per cycle         
        5852248868      cycles:u                                                    
          21671010      armv8_pmuv3_0/br_mis_pred/:u                                   
         595030189      armv8_pmuv3_0/br_pred/:u                                    

      37.740910018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 2 threads, 32000 rps'
==> Bench: 16384 keys, 1024 conns, 2 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 16384 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 2'
Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2954621440
starting receive base loop
Created 1024 connections total
Creating worker on tid 3042767360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287622.286047,       0.0,       81363,      73127,       8236,      44079,      29048,  20.319690,  45.900000,  47.300000,  49.100000,  16.899772,   0.000000, 247.346997, 412.782256
Outstanding requests per worker:
449 455 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32370.2,      161851,     145847,      16004,      98198,      47649,  21.856153,  46.400000,  52.400000,  58.800000,  14.739294,   0.737000,  62.542997, 490.131158
Outstanding requests per worker:
176 181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32254.0,      161270,     145188,      16082,     103776,      41412,  10.536061,  13.900000,  14.400000,  15.100000,   3.803985,   0.520000,  16.230000, 534.900357
Outstanding requests per worker:
192 194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32262.2,      161311,     145112,      16199,     106726,      38386,  11.178860,  15.100000,  15.500000,  16.000000,   4.165878,   0.552000,  17.330000, 557.480408
Outstanding requests per worker:
188 189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32255.8,      161279,     145209,      16070,     109365,      35844,  12.153948,  16.800000,  17.200000,  18.000000,   4.734105,   0.656000,  19.223999, 576.587973
Outstanding requests per worker:
199 199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32255.6,      161278,     145246,      16032,     111071,      34175,  12.816148,  17.700000,  18.200000,  19.900000,   5.113387,   0.580000,  21.309000, 589.994306
Outstanding requests per worker:
216 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32256.6,      161283,     145261,      16022,     112810,      32451,  12.927599,  17.800000,  18.100000,  18.900000,   5.168673,   0.637000,  20.252001, 603.702776
Outstanding requests per worker:
219 223 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:27   0:00 /usr/lib/linux
memcache      8 80.1  0.0 131520 61632 pts/0    Sl+  11:27   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3760835023      instructions:u            #    0.66  insn per cycle         
        5713296342      cycles:u                                                    
          22289961      armv8_pmuv3_0/br_mis_pred/:u                                   
         601381990      armv8_pmuv3_0/br_pred/:u                                    

      39.240199157 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 27000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 653586944
starting receive base loop
num_worker_connections 256
Creating worker on tid 2808541696
starting receive base loop
num_worker_connections 256
Creating worker on tid 669118976
starting receive base loop
Created 1024 connections total
Creating worker on tid 2824663552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287665.286090,       0.0,       77571,      69651,       7920,      41522,      28129,   0.433659,   0.801100,   0.914100,   1.300000,   1.656668,   0.000000,  83.140001, 405.808574
Outstanding requests per worker:
4 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121644,      13501,      81124,      40520,   0.419509,   0.830100,   0.934100,   1.100000,   0.261798,   0.103000,   1.994000, 482.895819
Outstanding requests per worker:
3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121583,      13560,      85727,      35856,   0.395274,   0.856100,   0.965100,   1.200000,   0.275696,   0.102000,   2.021000, 524.880148
Outstanding requests per worker:
4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121717,      13435,      88568,      33149,   0.399384,   0.868100,   0.972100,   1.200000,   0.278337,   0.102000,   1.966000, 548.601157
Outstanding requests per worker:
2 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121591,      13560,      90165,      31426,   0.401951,   0.871100,   0.975100,   1.200000,   0.279580,   0.103000,   1.848000, 563.431915
Outstanding requests per worker:
2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121576,      13566,      91726,      29850,   0.403913,   0.873100,   0.978100,   1.200000,   0.280425,   0.103000,   1.888000, 578.904150
Outstanding requests per worker:
3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121634,      13516,      92797,      28837,   0.398595,   0.857100,   0.963100,   1.200000,   0.274652,   0.102000,   1.940000, 589.363287
Outstanding requests per worker:
2 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:28   0:00 /usr/lib/linux
memcache      9 80.8  0.0 125376 54976 pts/0    Sl+  11:28   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3283624424      instructions:u            #    0.54  insn per cycle         
        6038265959      cycles:u                                                    
          21660516      armv8_pmuv3_0/br_mis_pred/:u                                   
         564758288      armv8_pmuv3_0/br_pred/:u                                    

      37.980610779 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 28000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 248050176
starting receive base loop
num_worker_connections 256
Creating worker on tid 2397827584
starting receive base loop
num_worker_connections 256
Creating worker on tid 258404864
starting receive base loop
Created 1024 connections total
Creating worker on tid 2413949440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287707.286132,       0.0,       80704,      72478,       8226,      43687,      28791,   0.585910,   0.906100,   1.100000,   3.000000,   2.726067,   0.000000, 147.933006, 413.042440
Outstanding requests per worker:
6 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.8,      140864,     126898,      13966,      84846,      42052,   0.484660,   0.898100,   0.962100,   1.100000,   0.272304,   0.102000,   1.909000, 484.283196
Outstanding requests per worker:
4 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.2,      140866,     126938,      13928,      89457,      37481,   0.441550,   0.913100,   1.100000,   1.200000,   0.288617,   0.103000,   1.976000, 523.973034
Outstanding requests per worker:
4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126590,      14266,      91949,      34641,   0.441382,   0.912100,   1.100000,   1.200000,   0.287364,   0.103000,   1.924000, 548.025413
Outstanding requests per worker:
3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     127010,      13848,      94293,      32717,   0.442767,   0.911100,   1.100000,   1.200000,   0.287704,   0.105000,   2.032000, 566.751886
Outstanding requests per worker:
4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126944,      13917,      96026,      30918,   0.451242,   0.919100,   1.100000,   1.200000,   0.291776,   0.099000,   1.910000, 580.806293
Outstanding requests per worker:
3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126857,      14004,      97375,      29482,   0.450083,   0.918100,   1.100000,   1.200000,   0.289022,   0.103000,   1.772000, 593.581269
Outstanding requests per worker:
3 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:28   0:00 /usr/lib/linux
memcache      8 82.2  0.0 127424 56768 pts/0    Sl+  11:28   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3390768600      instructions:u            #    0.56  insn per cycle         
        6105069032      cycles:u                                                    
          21871912      armv8_pmuv3_0/br_mis_pred/:u                                   
         577981021      armv8_pmuv3_0/br_pred/:u                                    

      38.021235831 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 29000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 779678208
starting receive base loop
num_worker_connections 256
Creating worker on tid 2934698496
starting receive base loop
num_worker_connections 256
Creating worker on tid 795275776
starting receive base loop
Created 1024 connections total
Creating worker on tid 2950820352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287751.286176,       0.0,       85253,      76625,       8628,      46212,      30413,   6.652087,  14.000000,  15.300000,  17.400000,   5.983065,   0.000000, 124.880999, 411.545801
Outstanding requests per worker:
93 98 98 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29273.6,      146368,     131699,      14669,      88355,      43344,   6.420698,  18.500000,  19.300000,  20.800000,   7.412795,   0.106000,  22.422001, 487.029081
Outstanding requests per worker:
5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29196.4,      145982,     131439,      14543,      93673,      37766,   0.510725,   0.972100,   1.100000,   1.200000,   0.299998,   0.107000,   1.953000, 530.801695
Outstanding requests per worker:
10 10 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29203.0,      146015,     131425,      14590,      96117,      35308,   0.514218,   0.974100,   1.100000,   1.200000,   0.298687,   0.103000,   2.246000, 553.011467
Outstanding requests per worker:
5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131545,      14454,      98254,      33291,   0.520839,   0.982100,   1.100000,   1.200000,   0.300737,   0.104000,   1.974000, 570.323851
Outstanding requests per worker:
4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.4,      145992,     131395,      14597,      99951,      31444,   0.524406,   0.986100,   1.100000,   1.200000,   0.301583,   0.105000,   2.040000, 584.373066
Outstanding requests per worker:
6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.8,      146004,     131448,      14556,     101177,      30271,   0.524518,   0.983100,   1.100000,   1.200000,   0.298287,   0.105000,   1.879000, 594.942403
Outstanding requests per worker:
4 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:29   0:00 /usr/lib/linux
memcache      9 81.2  0.0 128448 59200 pts/0    Sl+  11:29   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3464601785      instructions:u            #    0.57  insn per cycle         
        6066945198      cycles:u                                                    
          22047397      armv8_pmuv3_0/br_mis_pred/:u                                   
         583569229      armv8_pmuv3_0/br_pred/:u                                    

      39.350728017 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 30000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 282259968
starting receive base loop
num_worker_connections 256
Creating worker on tid 2438132224
starting receive base loop
num_worker_connections 256
Creating worker on tid 293270016
starting receive base loop
Created 1024 connections total
Creating worker on tid 2448814592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287794.286219,       0.0,       87056,      78335,       8721,      47198,      31137,  12.475209,  30.000000,  31.500000,  32.700000,  12.406595,   0.000000, 221.788004, 411.742605
Outstanding requests per worker:
157 159 165 152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30197.2,      150986,     136015,      14971,      91302,      44713,  11.355804,  30.100000,  32.100000,  33.900000,  11.524228,   0.109000,  35.847001, 487.484219
Outstanding requests per worker:
8 7 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135170,      15222,      95623,      39547,   0.590825,   1.100000,   1.100000,   1.400000,   0.304764,   0.103000,   2.251000, 528.377636
Outstanding requests per worker:
8 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30075.4,      150377,     135384,      14993,      99112,      36272,   0.585747,   0.996100,   1.100000,   1.300000,   0.291792,   0.105000,   2.026000, 554.002644
Outstanding requests per worker:
13 12 14 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30081.2,      150406,     135575,      14831,     101525,      34050,   0.591495,   1.100000,   1.100000,   1.200000,   0.287760,   0.102000,   2.246000, 572.294376
Outstanding requests per worker:
6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.0,      150395,     135418,      14977,     103130,      32288,   0.606335,   1.100000,   1.100000,   1.300000,   0.300875,   0.102000,   2.431000, 586.412094
Outstanding requests per worker:
4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135443,      14947,     104584,      30859,   0.597338,   0.998100,   1.100000,   1.200000,   0.282390,   0.107000,   2.020000, 598.305811
Outstanding requests per worker:
4 5 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:30   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:30   0:00 /usr/lib/linux
memcache     10 82.0  0.0 128448 59712 pts/0    Sl+  11:30   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3537430653      instructions:u            #    0.59  insn per cycle         
        5950314224      cycles:u                                                    
          20697675      armv8_pmuv3_0/br_mis_pred/:u                                   
         589649219      armv8_pmuv3_0/br_pred/:u                                    

      39.430055388 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 31000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 506786304
starting receive base loop
num_worker_connections 256
Creating worker on tid 2658202112
starting receive base loop
num_worker_connections 256
Creating worker on tid 518779392
starting receive base loop
Created 1024 connections total
Creating worker on tid 2674323968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287837.286262,       0.0,       88408,      79502,       8906,      48086,      31416,  15.521395,  38.200000,  39.700000,  41.600000,  15.616641,   0.000000, 358.628988, 413.733831
Outstanding requests per worker:
185 190 207 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31156.2,      155781,     140159,      15622,      94635,      45524,  14.579078,  36.500000,  39.900000,  42.300000,  13.248686,   0.167000,  46.434999, 491.400759
Outstanding requests per worker:
8 9 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139364,      15684,      99269,      40095,   0.953612,   1.400000,   1.600000,   2.100000,   0.355260,   0.119000,   2.676000, 531.759414
Outstanding requests per worker:
12 9 10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139568,      15490,     102677,      36891,   1.157596,   1.700000,   1.900000,   2.300000,   0.407282,   0.160000,   3.275000, 557.407128
Outstanding requests per worker:
10 9 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139463,      15588,     104711,      34752,   1.623340,   2.400000,   2.700000,   3.100000,   0.520132,   0.168000,   3.554000, 575.064971
Outstanding requests per worker:
13 12 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31005.2,      155026,     139462,      15564,     106393,      33069,   1.793160,   2.800000,   3.800000,   4.500000,   0.794604,   0.166000,   5.137000, 588.185276
Outstanding requests per worker:
17 18 19 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.8,      155064,     139658,      15406,     107888,      31770,   2.060226,   2.800000,   3.100000,   3.400000,   0.569172,   0.166000,   3.799000, 600.380830
Outstanding requests per worker:
15 14 14 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:30   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:30   0:00 /usr/lib/linux
memcache      9 82.2  0.0 129472 59456 pts/0    Sl+  11:30   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3595949588      instructions:u            #    0.62  insn per cycle         
        5822068174      cycles:u                                                    
          20728700      armv8_pmuv3_0/br_mis_pred/:u                                   
         590082730      armv8_pmuv3_0/br_pred/:u                                    

      39.240854094 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 4 threads, 32000 rps'
==> Bench: 16384 keys, 1024 conns, 4 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 16384 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 4'
Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 1074524672
starting receive base loop
num_worker_connections 256
Creating worker on tid 3227316736
starting receive base loop
num_worker_connections 256
Creating worker on tid 1087894016
starting receive base loop
Created 1024 connections total
Creating worker on tid 3243438592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287879.286304,       0.0,       91217,      82089,       9128,      49365,      32724,  18.307722,  46.800000,  49.000000,  52.100000,  20.041662,   0.000000, 580.356002, 411.614138
Outstanding requests per worker:
215 221 220 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32114.0,      160570,     144634,      15936,      97678,      46956,  20.837075,  43.600000,  49.100000,  55.000000,  13.789895,   0.294000,  59.090000, 492.657985
Outstanding requests per worker:
77 90 77 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31993.8,      159969,     143672,      16297,     102620,      41052,  11.393167,  15.900000,  16.400000,  17.300000,   4.659011,   0.307000,  18.160000, 535.957612
Outstanding requests per worker:
101 92 94 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.8,      159999,     144138,      15861,     106114,      38024,  12.145567,  16.900000,  17.300000,  18.200000,   5.057483,   0.289000,  20.468000, 558.915151
Outstanding requests per worker:
97 99 104 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.6,      159998,     144026,      15972,     108235,      35791,  12.375279,  17.200000,  17.600000,  18.700000,   5.217704,   0.300000,  20.197000, 575.271958
Outstanding requests per worker:
103 101 103 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     143963,      16051,     110130,      33833,  13.107967,  18.500000,  19.000000,  20.000000,   5.629829,   0.294000,  21.934001, 590.346693
Outstanding requests per worker:
94 108 103 107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.2,      160016,     144172,      15844,     111503,      32669,  12.826358,  17.900000,  18.300000,  18.800000,   5.467543,   0.296000,  19.461000, 597.861291
Outstanding requests per worker:
103 108 107 100 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:31   0:00 /usr/lib/linux
memcache      8 85.6  0.0 129472 60928 pts/0    Sl+  11:31   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3770697102      instructions:u            #    0.66  insn per cycle         
        5737150174      cycles:u                                                    
          22535240      armv8_pmuv3_0/br_mis_pred/:u                                   
         604001770      armv8_pmuv3_0/br_pred/:u                                    

      38.130912058 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 27000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 27000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1410527744
starting receive base loop
num_worker_connections 128
Creating worker on tid 299692544
starting receive base loop
num_worker_connections 128
Creating worker on tid 3480613376
starting receive base loop
num_worker_connections 128
Creating worker on tid 2372006400
starting receive base loop
num_worker_connections 128
Creating worker on tid 1257959936
starting receive base loop
num_worker_connections 128
Creating worker on tid 149352960
starting receive base loop
num_worker_connections 128
Creating worker on tid 3335713280
starting receive base loop
Created 1024 connections total
Creating worker on tid 2221666816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287923.286348,       0.0,       83196,      74760,       8436,      45034,      29726,   0.470174,   0.744100,   0.850100,   1.400000,   3.243584,   0.000000, 136.207998, 412.078652
Outstanding requests per worker:
2 1 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121480,      13667,      81178,      40302,   0.362712,   0.769100,   0.856100,   0.991100,   0.259576,   0.075000,   1.658000, 484.982886
Outstanding requests per worker:
2 2 1 1 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121605,      13548,      85751,      35854,   0.339692,   0.796100,   0.929100,   1.100000,   0.272953,   0.076000,   1.838000, 525.011554
Outstanding requests per worker:
1 1 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121741,      13401,      88730,      33011,   0.341344,   0.796100,   0.928100,   1.100000,   0.273085,   0.075000,   1.905000, 550.401253
Outstanding requests per worker:
1 1 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121640,      13503,      90529,      31111,   0.348017,   0.809100,   0.941100,   1.100000,   0.278223,   0.077000,   1.945000, 567.103971
Outstanding requests per worker:
1 1 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121447,      13698,      92061,      29386,   0.343992,   0.796100,   0.927100,   1.100000,   0.273726,   0.075000,   1.806000, 582.214670
Outstanding requests per worker:
1 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121663,      13482,      93482,      28181,   0.344233,   0.800100,   0.930100,   1.100000,   0.273719,   0.074000,   1.902000, 593.991197
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:32   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:32   0:00 /usr/lib/linux
memcache     10 78.5  0.0 127424 56768 pts/0    Sl+  11:32   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3269510780      instructions:u            #    0.56  insn per cycle         
        5854517558      cycles:u                                                    
          21210430      armv8_pmuv3_0/br_mis_pred/:u                                   
         555144665      armv8_pmuv3_0/br_pred/:u                                    

      39.350829662 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 28000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 28000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1720250880
starting receive base loop
num_worker_connections 128
Creating worker on tid 611054080
starting receive base loop
num_worker_connections 128
Creating worker on tid 3797414400
starting receive base loop
num_worker_connections 128
Creating worker on tid 2683367936
starting receive base loop
num_worker_connections 128
Creating worker on tid 1574760960
starting receive base loop
num_worker_connections 128
Creating worker on tid 460714496
starting receive base loop
num_worker_connections 128
Creating worker on tid 3647074816
starting receive base loop
Created 1024 connections total
Creating worker on tid 2533028352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575287965.286390,       0.0,       87732,      78835,       8897,      47622,      31213,   0.548206,   0.825100,   0.997100,   2.800000,   3.150986,   0.000000, 155.707002, 415.453910
Outstanding requests per worker:
1 2 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126277,      14083,      85119,      41158,   0.405219,   0.814100,   0.922100,   1.100000,   0.276032,   0.077000,   1.900000, 490.486336
Outstanding requests per worker:
1 2 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126253,      14110,      89444,      36809,   0.363900,   0.823100,   0.937100,   1.100000,   0.284887,   0.076000,   1.859000, 527.733448
Outstanding requests per worker:
1 2 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.0,      140365,     126342,      14023,      92521,      33821,   0.365069,   0.821100,   0.936100,   1.100000,   0.284250,   0.075000,   1.893000, 553.457006
Outstanding requests per worker:
1 1 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28074.8,      140374,     126280,      14094,      94345,      31935,   0.368981,   0.826100,   0.939100,   1.100000,   0.286098,   0.075000,   1.779000, 570.421516
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126303,      14057,      95676,      30627,   0.370749,   0.825100,   0.939100,   1.100000,   0.288623,   0.076000,   1.957000, 583.145792
Outstanding requests per worker:
1 0 1 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126410,      13952,      97122,      29288,   0.365335,   0.817100,   0.932100,   1.100000,   0.281054,   0.076000,   1.852000, 594.637189
Outstanding requests per worker:
0 1 1 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:33   0:00 /usr/lib/linux
memcache      8 82.3  0.0 127424 58304 pts/0    Sl+  11:33   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3386608856      instructions:u            #    0.56  insn per cycle         
        6004701089      cycles:u                                                    
          22229735      armv8_pmuv3_0/br_mis_pred/:u                                   
         577223783      armv8_pmuv3_0/br_pred/:u                                    

      38.189929421 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 29000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 29000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1996091904
starting receive base loop
num_worker_connections 128
Creating worker on tid 887550464
starting receive base loop
num_worker_connections 128
Creating worker on tid 4073910784
starting receive base loop
num_worker_connections 128
Creating worker on tid 2959864320
starting receive base loop
num_worker_connections 128
Creating worker on tid 1851257344
starting receive base loop
num_worker_connections 128
Creating worker on tid 737210880
starting receive base loop
num_worker_connections 128
Creating worker on tid 3923571200
starting receive base loop
Created 1024 connections total
Creating worker on tid 2809524736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288008.286433,       0.0,       88508,      79583,       8925,      48095,      31488,   8.967536,  22.600000,  24.400000,  25.700000,   9.599658,   0.000000, 223.075002, 413.799404
Outstanding requests per worker:
60 67 63 65 65 62 62 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29190.4,      145952,     131391,      14561,      88345,      43046,   8.488434,  24.100000,  25.800000,  27.200000,   9.470349,   0.077000,  28.489999, 487.089367
Outstanding requests per worker:
1 1 1 2 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29095.0,      145475,     130686,      14789,      92379,      38307,   0.438359,   0.898100,   0.960100,   1.100000,   0.294899,   0.078000,   1.829000, 526.127856
Outstanding requests per worker:
1 1 1 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     130979,      14486,      95658,      35321,   0.441560,   0.899100,   0.964100,   1.200000,   0.297417,   0.075000,   2.094000, 551.658869
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29091.8,      145459,     131026,      14433,      97796,      33230,   0.449466,   0.901100,   0.966100,   1.200000,   0.299193,   0.076000,   1.979000, 570.883191
Outstanding requests per worker:
1 1 2 2 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29095.8,      145479,     130775,      14704,      99298,      31477,   0.448849,   0.900100,   0.963100,   1.200000,   0.296797,   0.076000,   1.900000, 585.390663
Outstanding requests per worker:
1 0 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.8,      145469,     131032,      14437,     100749,      30283,   0.445782,   0.897100,   0.957100,   1.100000,   0.291199,   0.075000,   1.879000, 595.289654
Outstanding requests per worker:
1 1 1 1 1 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:33   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:33   0:00 /usr/lib/linux
memcache     10 83.6  0.0 127424 59520 pts/0    Sl+  11:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3461958087      instructions:u            #    0.58  insn per cycle         
        5973686801      cycles:u                                                    
          21802855      armv8_pmuv3_0/br_mis_pred/:u                                   
         578624700      armv8_pmuv3_0/br_pred/:u                                    

      37.989642852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 30000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 30000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1982657024
starting receive base loop
num_worker_connections 128
Creating worker on tid 871428608
starting receive base loop
num_worker_connections 128
Creating worker on tid 4057788928
starting receive base loop
num_worker_connections 128
Creating worker on tid 2943742464
starting receive base loop
num_worker_connections 128
Creating worker on tid 1835135488
starting receive base loop
num_worker_connections 128
Creating worker on tid 721089024
starting receive base loop
num_worker_connections 128
Creating worker on tid 3907449344
starting receive base loop
Created 1024 connections total
Creating worker on tid 2798842368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288050.286475,       0.0,       90820,      81715,       9105,      49130,      32585,  14.778668,  35.200000,  36.800000,  40.200000,  29.289067,   0.000000, 885.990977, 413.743890
Outstanding requests per worker:
81 85 88 78 83 89 90 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30210.0,      151050,     135976,      15074,      91871,      44105,  12.871581,  32.600000,  34.800000,  37.100000,  12.309856,   0.081000,  38.628999, 490.939732
Outstanding requests per worker:
2 2 2 2 2 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135050,      15338,      95925,      39125,   0.532452,   0.917100,   0.987000,   1.200000,   0.286896,   0.079000,   1.956000, 529.848974
Outstanding requests per worker:
3 2 2 2 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.6,      150398,     135202,      15196,      98834,      36368,   0.529970,   0.913100,   0.983100,   1.200000,   0.284193,   0.078000,   1.989000, 552.849669
Outstanding requests per worker:
2 1 1 2 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.4,      150397,     135360,      15037,     101328,      34032,   0.556544,   0.937100,   1.100000,   1.400000,   0.302992,   0.080000,   2.230000, 571.681627
Outstanding requests per worker:
1 1 2 1 1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135367,      15022,     103018,      32349,   0.572322,   0.943100,   1.100000,   1.700000,   0.317718,   0.081000,   2.674000, 585.675194
Outstanding requests per worker:
1 1 1 2 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135399,      14985,     104440,      30959,   0.561721,   0.934100,   1.100000,   1.200000,   0.276208,   0.080000,   1.972000, 597.226951
Outstanding requests per worker:
1 2 2 1 2 1 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:34   0:00 /usr/lib/linux
memcache      8 86.9  0.0 129472 61504 pts/0    Sl+  11:34   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3529268528      instructions:u            #    0.59  insn per cycle         
        5939880084      cycles:u                                                    
          21379126      armv8_pmuv3_0/br_mis_pred/:u                                   
         587214706      armv8_pmuv3_0/br_pred/:u                                    

      38.090595848 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 31000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 31000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1756623360
starting receive base loop
num_worker_connections 128
Creating worker on tid 643297792
starting receive base loop
num_worker_connections 128
Creating worker on tid 3824218624
starting receive base loop
num_worker_connections 128
Creating worker on tid 2715611648
starting receive base loop
num_worker_connections 128
Creating worker on tid 1601565184
starting receive base loop
num_worker_connections 128
Creating worker on tid 492958208
starting receive base loop
num_worker_connections 128
Creating worker on tid 3673879040
starting receive base loop
Created 1024 connections total
Creating worker on tid 2565272064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288093.286518,       0.0,       95554,      85987,       9567,      52066,      33921,  19.459096,  43.600000,  47.500000,  68.600000,  53.843474,   0.000000, 1344.295979, 416.756300
Outstanding requests per worker:
100 106 97 107 103 102 98 104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31149.4,      155747,     140300,      15447,      95360,      44940,  16.759321,  38.100000,  41.700000,  45.700000,  12.862095,   0.144000,  47.543000, 495.707691
Outstanding requests per worker:
16 15 14 14 15 14 16 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31004.6,      155023,     139589,      15434,      99469,      40120,   3.808697,   5.500000,   5.900000,   6.500000,   1.327575,   0.145000,   7.190000, 532.314674
Outstanding requests per worker:
19 17 19 18 16 19 17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31007.2,      155036,     139688,      15348,     102313,      37375,   4.622722,   6.000000,   6.300000,   6.700000,   1.379266,   0.137000,   7.388000, 556.733248
Outstanding requests per worker:
22 20 20 19 19 19 22 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31003.2,      155016,     139578,      15438,     105118,      34460,   5.626869,   7.600000,   7.900000,   8.900000,   1.834667,   0.136000,   9.961000, 576.600496
Outstanding requests per worker:
25 26 25 23 22 23 24 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139722,      15330,     106635,      33087,   6.238133,   8.300000,   9.500000,  10.700000,   2.150297,   0.145000,  11.506000, 588.766143
Outstanding requests per worker:
23 22 21 25 26 23 23 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30992.8,      154964,     139720,      15244,     108143,      31577,   6.550972,   8.500000,   8.700000,   9.400000,   2.170191,   0.143000,  11.846000, 599.805024
Outstanding requests per worker:
32 34 32 32 37 36 33 37 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:35   0:00 /usr/lib/linux
memcache     10 81.5  0.0 130496 64000 pts/0    Sl+  11:35   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3636319898      instructions:u            #    0.64  insn per cycle         
        5717177373      cycles:u                                                    
          20684598      armv8_pmuv3_0/br_mis_pred/:u                                   
         590146538      armv8_pmuv3_0/br_pred/:u                                    

      39.421290402 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 32000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 32000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 16384
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1342829056
starting receive base loop
num_worker_connections 128
Creating worker on tid 232583680
starting receive base loop
num_worker_connections 128
Creating worker on tid 3413504512
starting receive base loop
num_worker_connections 128
Creating worker on tid 2304897536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1190851072
starting receive base loop
num_worker_connections 128
Creating worker on tid 82244096
starting receive base loop
num_worker_connections 128
Creating worker on tid 3268604416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2154557952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288136.286561,       0.0,       97438,      87628,       9810,      52845,      34783,  26.446848,  44.600000,  51.700000, 493.100000, 105.438927,   0.000000, 1946.352005, 412.567798
Outstanding requests per worker:
137 127 131 122 134 128 140 1364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32373.0,      161865,     145791,      16074,      98515,      47276,  37.007660,  54.400000,  71.300000, 125.300000, 142.128696,   0.148000, 2950.536966, 492.034179
Outstanding requests per worker:
55 49 56 50 55 58 51 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31993.6,      159968,     144018,      15950,     102882,      41136,  13.651561,  19.500000,  20.000000,  21.100000,   6.092116,   0.150000,  22.678001, 535.401339
Outstanding requests per worker:
61 59 58 52 64 60 56 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31998.6,      159993,     144200,      15793,     106259,      37941,  14.412551,  21.100000,  21.600000,  22.200000,   6.585660,   0.170000,  23.630001, 559.251054
Outstanding requests per worker:
60 61 60 58 60 62 60 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.4,      160022,     144123,      15899,     108501,      35622,  15.008337,  22.100000,  22.600000,  23.600000,   6.934597,   0.164000,  26.324000, 577.417414
Outstanding requests per worker:
65 60 64 61 58 56 49 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31998.4,      159992,     143907,      16085,     109985,      33922,  15.272162,  22.400000,  23.400000,  25.800000,   7.148664,   0.146000,  27.484000, 590.360955
Outstanding requests per worker:
59 59 60 61 59 61 65 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.8,      159999,     144006,      15993,     111428,      32578,  15.539189,  23.000000,  23.400000,  24.100000,   7.301762,   0.149000,  24.857000, 600.460974
Outstanding requests per worker:
66 71 60 57 63 56 64 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:35   0:00 /usr/lib/linux
memcache     10 84.2  0.0 131520 65088 pts/0    Sl+  11:35   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3820206020      instructions:u            #    0.66  insn per cycle         
        5759369279      cycles:u                                                    
          22975646      armv8_pmuv3_0/br_mis_pred/:u                                   
         609559956      armv8_pmuv3_0/br_pred/:u                                    

      39.439860743 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 27000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 256
Created 256 connections total
Creating worker on tid 118944256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288178.286603,       0.0,       54016,      48493,       5523,      28224,      20269,   0.984906,   1.300000,   1.500000,   2.600000,   1.795330,   0.000000,  74.304998, 390.388840
Outstanding requests per worker:
20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121557,      13586,      79907,      41650,   0.884808,   1.300000,   1.400000,   1.700000,   0.283345,   0.160000,   4.908000, 472.731624
Outstanding requests per worker:
27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121477,      13670,      85010,      36467,   0.897899,   1.300000,   1.400000,   1.700000,   0.286734,   0.160000,   4.175000, 520.574537
Outstanding requests per worker:
26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121535,      13618,      88148,      33387,   0.909277,   1.300000,   1.400000,   1.800000,   0.293610,   0.160000,   4.652000, 547.273065
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121688,      13452,      90108,      31580,   0.910718,   1.300000,   1.400000,   1.800000,   0.295874,   0.157000,   4.655000, 564.908126
Outstanding requests per worker:
26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121758,      13393,      92142,      29616,   0.914600,   1.300000,   1.400000,   1.800000,   0.297048,   0.156000,   5.232000, 580.428875
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.0,      135135,     121656,      13479,      92688,      28968,   0.911099,   1.300000,   1.400000,   1.800000,   0.290888,   0.159000,   3.543000, 587.323469
Outstanding requests per worker:
26 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:36   0:00 /usr/lib/linux
memcache      8 77.5  0.0 125376 42944 pts/0    Sl+  11:36   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3332163228      instructions:u            #    0.52  insn per cycle         
        6351369073      cycles:u                                                    
          24186379      armv8_pmuv3_0/br_mis_pred/:u                                   
         586037591      armv8_pmuv3_0/br_pred/:u                                    

      37.360670727 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 28000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 256
Created 256 connections total
Creating worker on tid 1025962496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288218.286643,       0.0,       57089,      51271,       5818,      30040,      21231,   1.531679,   2.100000,   2.500000,   4.700000,   2.411823,   0.000000,  90.544999, 395.140196
Outstanding requests per worker:
37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.0,      142865,     128484,      14381,      84969,      43515,   1.329064,   2.000000,   2.200000,   2.800000,   0.477846,   0.159000,   6.328000, 476.319293
Outstanding requests per worker:
42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.8,      142874,     128455,      14419,      90299,      38156,   1.352696,   2.000000,   2.200000,   2.800000,   0.487083,   0.167000,   5.659000, 522.067860
Outstanding requests per worker:
40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28575.6,      142878,     128525,      14353,      93409,      35116,   1.366928,   2.000000,   2.200000,   2.900000,   0.495189,   0.163000,   6.256000, 548.903124
Outstanding requests per worker:
34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.2,      142866,     128619,      14247,      95489,      33130,   1.383475,   2.000000,   2.300000,   2.900000,   0.504504,   0.165000,   5.906000, 566.072555
Outstanding requests per worker:
35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.2,      142861,     128741,      14120,      97254,      31487,   1.398278,   2.100000,   2.300000,   3.000000,   0.514015,   0.167000,   6.640000, 579.874749
Outstanding requests per worker:
38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128545,      14324,      98848,      29697,   1.406744,   2.100000,   2.300000,   2.900000,   0.510860,   0.164000,   5.525000, 593.280563
Outstanding requests per worker:
40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:37   0:00 /usr/lib/linux
memcache      9 82.6  0.0 126400 46976 pts/0    Sl+  11:37   0:29 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3502853946      instructions:u            #    0.54  insn per cycle         
        6454566326      cycles:u                                                    
          25112289      armv8_pmuv3_0/br_mis_pred/:u                                   
         619175115      armv8_pmuv3_0/br_pred/:u                                    

      35.949790578 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 29000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 256
Created 256 connections total
Creating worker on tid 543748608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288259.286684,       0.0,       58769,      52771,       5998,      30864,      21907,   1.536320,   2.200000,   2.700000,   5.100000,   1.113851,   0.000000,  43.685999, 393.899225
Outstanding requests per worker:
35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.0,      147060,     132248,      14812,      87643,      44605,   1.453334,   2.100000,   2.400000,   3.100000,   0.539823,   0.161000,   7.019000, 476.703368
Outstanding requests per worker:
46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132254,      14813,      93353,      38901,   1.495860,   2.200000,   2.500000,   3.200000,   0.557371,   0.160000,   8.031000, 524.792248
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132289,      14776,      96367,      35922,   1.517082,   2.300000,   2.500000,   3.300000,   0.569758,   0.161000,   9.481000, 549.884027
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132426,      14641,      98808,      33618,   1.550868,   2.300000,   2.600000,   3.400000,   0.592685,   0.159000,   7.595000, 570.230808
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132448,      14624,     100628,      31820,   1.549643,   2.300000,   2.600000,   3.300000,   0.582385,   0.164000,   7.576000, 584.445805
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132440,      14632,     102014,      30426,   1.560118,   2.300000,   2.600000,   3.400000,   0.587058,   0.166000,   8.411000, 597.014829
Outstanding requests per worker:
43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:37   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:37   0:00 /usr/lib/linux
memcache     10 81.3  0.0 128448 46976 pts/0    Sl+  11:37   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3597493133      instructions:u            #    0.55  insn per cycle         
        6536583848      cycles:u                                                    
          24845638      armv8_pmuv3_0/br_mis_pred/:u                                   
         633774551      armv8_pmuv3_0/br_pred/:u                                    

      37.110353624 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 30000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 256
Created 256 connections total
Creating worker on tid 1070592512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288300.286725,       0.0,       60527,      54361,       6166,      32111,      22250,   2.504152,   3.800000,   4.700000,   9.000000,   2.491398,   0.000000,  86.328998, 398.745424
Outstanding requests per worker:
60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136244,      15281,      90476,      45768,   2.240310,   3.400000,   4.000000,   5.300000,   0.957430,   0.165000,  16.155999, 478.105553
Outstanding requests per worker:
70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136318,      15208,      96087,      40231,   2.358353,   3.600000,   4.200000,   5.500000,   0.995883,   0.163000,  11.531000, 525.018560
Outstanding requests per worker:
67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.2,      151511,     136328,      15183,      99440,      36888,   2.440572,   3.700000,   4.400000,   5.800000,   1.048035,   0.159000,  18.181000, 551.143426
Outstanding requests per worker:
82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.4,      151537,     136390,      15147,     102199,      34191,   2.492815,   3.800000,   4.500000,   6.000000,   1.083532,   0.168000,  15.498000, 571.726138
Outstanding requests per worker:
74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.6,      151523,     136457,      15066,     103381,      33076,   2.541527,   3.900000,   4.600000,   6.200000,   1.129924,   0.170000,  26.353000, 584.059381
Outstanding requests per worker:
84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30308.8,      151544,     136524,      15020,     105225,      31299,   2.523927,   3.900000,   4.500000,   5.900000,   1.061821,   0.170000,  12.137000, 597.594262
Outstanding requests per worker:
64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:38   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:38   0:00 /usr/lib/linux
memcache      9 83.1  0.0 129472 50112 pts/0    Sl+  11:38   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3682989333      instructions:u            #    0.54  insn per cycle         
        6764656319      cycles:u                                                    
          25856278      armv8_pmuv3_0/br_mis_pred/:u                                   
         647316472      armv8_pmuv3_0/br_pred/:u                                    

      37.190967558 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 31000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 256
Created 256 connections total
Creating worker on tid 962654720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288340.286765,       0.0,       62359,      55996,       6363,      33074,      22922,   4.104642,   6.800000,   8.500000,  14.600000,   3.062326,   0.000000,  81.886999, 400.998518
Outstanding requests per worker:
125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.0,      156255,     140510,      15745,      93441,      47069,   3.740156,   6.000000,   7.200000,  10.000000,   1.833890,   0.175000,  29.815000, 481.382201
Outstanding requests per worker:
142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140549,      15713,      99691,      40858,   4.094899,   6.700000,   8.000000,  11.100000,   2.062491,   0.193000,  26.776001, 529.109243
Outstanding requests per worker:
139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31255.2,      156276,     140586,      15690,     102949,      37637,   4.344428,   7.100000,   8.500000,  12.000000,   2.234611,   0.210000,  28.532000, 554.481122
Outstanding requests per worker:
126 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31247.0,      156235,     140690,      15545,     105242,      35448,   4.645377,   7.700000,   9.300000,  13.400000,   2.506952,   0.211000,  38.148001, 572.216853
Outstanding requests per worker:
158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.4,      156267,     140711,      15556,     107024,      33687,   4.765883,   7.900000,   9.600000,  13.900000,   2.617787,   0.179000,  38.766000, 586.873471
Outstanding requests per worker:
161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.4,      156247,     140662,      15585,     108718,      31944,   4.727344,   7.800000,   9.300000,  12.900000,   2.411373,   0.192000,  25.714001, 598.786026
Outstanding requests per worker:
174 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:39   0:00 /usr/lib/linux
memcache      8 89.2  0.0 129472 49088 pts/0    Sl+  11:39   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3782101129      instructions:u            #    0.56  insn per cycle         
        6724462470      cycles:u                                                    
          26707408      armv8_pmuv3_0/br_mis_pred/:u                                   
         663746342      armv8_pmuv3_0/br_pred/:u                                    

      35.920087924 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 1 threads, 32000 rps'
==> Bench: 65536 keys, 256 conns, 1 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 65536 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 1'
Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 256
Created 256 connections total
Creating worker on tid 457437696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288381.286806,       0.0,       63680,      57184,       6496,      33675,      23509,  17.730519,  27.100000,  37.300000,  61.100000,  10.183359,   0.000000, 114.875004, 398.035674
Outstanding requests per worker:
814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32133.4,      160667,     144478,      16189,      96380,      48098,  32.331026,  71.900000,  92.500000, 135.900000,  29.001598,   0.252000, 225.502998, 483.528343
Outstanding requests per worker:
1447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142180,      15934,     100534,      41646,  84.737538, 189.100000, 235.400000, 350.500000,  75.605937,   0.361000, 552.097976, 526.615973
Outstanding requests per worker:
4558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31658.6,      158293,     142488,      15805,     104420,      38068, 179.757723, 362.000000, 424.800000, 534.900000, 129.035859,   0.536000, 904.443979, 555.109974
Outstanding requests per worker:
6744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142329,      15781,     106418,      35911, 240.703692, 476.500000, 547.900000, 737.500000, 171.616398,   0.544000, 1039.499998, 572.373761
Outstanding requests per worker:
8448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31671.6,      158358,     142609,      15749,     108846,      33763, 283.102873, 573.900000, 684.700000, 914.000000, 210.555698,   0.488000, 1404.963970, 587.613250
Outstanding requests per worker:
9783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31581.2,      157906,     142097,      15809,     109777,      32320, 326.225470, 669.700000, 815.500000, 1183.400000, 255.130059,   0.525000, 1613.916039, 600.408017
Outstanding requests per worker:
11035 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:39   0:00 /usr/lib/linux
memcache      8 83.9  0.0 130496 51200 pts/0    Sl+  11:39   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3721201003      instructions:u            #    0.58  insn per cycle         
        6446123487      cycles:u                                                    
          24230710      armv8_pmuv3_0/br_mis_pred/:u                                   
         630749337      armv8_pmuv3_0/br_pred/:u                                    

      37.469508307 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 27000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2063987200
starting receive base loop
Created 256 connections total
Creating worker on tid 954659328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288422.286847,       0.0,       68482,      61613,       6869,      36574,      25039,   0.393820,   0.246100,   0.254100,   0.835100,   3.267113,   0.000000, 105.850004, 401.507847
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121713,      13430,      80632,      41081,   0.188104,   0.244100,   0.251100,   0.265100,   0.038937,   0.072000,   1.071000, 476.856737
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121644,      13498,      85472,      36172,   0.187972,   0.244100,   0.251100,   0.267100,   0.039674,   0.100000,   1.020000, 521.216122
Outstanding requests per worker:
1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121595,      13557,      88423,      33172,   0.187752,   0.244100,   0.252100,   0.267100,   0.039513,   0.072000,   1.062000, 547.771282
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121798,      13343,      90386,      31412,   0.188189,   0.244100,   0.252100,   0.268100,   0.039799,   0.100000,   0.843000, 564.894801
Outstanding requests per worker:
3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121694,      13451,      91969,      29725,   0.187839,   0.244100,   0.252100,   0.268100,   0.040364,   0.095000,   1.067000, 579.948321
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121648,      13494,      93247,      28401,   0.188238,   0.244100,   0.252100,   0.268100,   0.038991,   0.100000,   0.993000, 592.052241
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:40   0:00 /usr/lib/linux
memcache      8 86.0  0.0 125376 43968 pts/0    Sl+  11:40   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3312583305      instructions:u            #    0.52  insn per cycle         
        6426142777      cycles:u                                                    
          24143198      armv8_pmuv3_0/br_mis_pred/:u                                   
         579941639      armv8_pmuv3_0/br_pred/:u                                    

      35.900028937 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 28000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1090974208
starting receive base loop
Created 256 connections total
Creating worker on tid 4277858816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288464.286889,       0.0,       71682,      64466,       7216,      38321,      26145,   0.492413,   0.249100,   0.256100,   0.677000,   4.380638,   0.000000, 129.593998, 404.378634
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126830,      14024,      84705,      42125,   0.193050,   0.246100,   0.253100,   0.270100,   0.040050,   0.099000,   0.801000, 483.028660
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126772,      14079,      89376,      37396,   0.192641,   0.246100,   0.253100,   0.272100,   0.040984,   0.096000,   0.812000, 524.259671
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126791,      14060,      92256,      34535,   0.191864,   0.245100,   0.252100,   0.271100,   0.040501,   0.098000,   0.763000, 548.941037
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126718,      14137,      94353,      32365,   0.191744,   0.245100,   0.252100,   0.273100,   0.040939,   0.097000,   0.910000, 567.873759
Outstanding requests per worker:
1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28169.6,      140848,     126732,      14116,      95805,      30927,   0.191827,   0.245100,   0.252100,   0.272100,   0.041441,   0.094000,   0.886000, 580.052844
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126750,      14103,      97446,      29304,   0.191918,   0.246100,   0.253100,   0.273100,   0.042143,   0.098000,   0.915000, 592.562067
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:41   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:41   0:00 /usr/lib/linux
memcache      9 83.0  0.0 126400 47040 pts/0    Sl+  11:41   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3463990593      instructions:u            #    0.53  insn per cycle         
        6495442954      cycles:u                                                    
          24609078      armv8_pmuv3_0/br_mis_pred/:u                                   
         604229172      armv8_pmuv3_0/br_pred/:u                                    

      37.289899870 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 29000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1995043328
starting receive base loop
Created 256 connections total
Creating worker on tid 887550464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288505.286930,       0.0,       75384,      67882,       7502,      40234,      27648,   0.677128,   0.249100,   0.260100,   3.900000,   5.509791,   0.000000, 126.925007, 403.044607
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132448,      14621,      88443,      44005,   0.198245,   0.247100,   0.254100,   0.295100,   0.042082,   0.093000,   1.191000, 484.062341
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132429,      14640,      93243,      39186,   0.198676,   0.247100,   0.255100,   0.297100,   0.043440,   0.101000,   1.316000, 525.125237
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132168,      14906,      96467,      35701,   0.198736,   0.247100,   0.255100,   0.297100,   0.043221,   0.091000,   1.390000, 552.408662
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132261,      14807,      98717,      33544,   0.199051,   0.248100,   0.256100,   0.299100,   0.043894,   0.099000,   1.463000, 570.332101
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132494,      14573,     100695,      31799,   0.198729,   0.247100,   0.255100,   0.297100,   0.044484,   0.095000,   1.059000, 584.058750
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132480,      14587,     101904,      30576,   0.199553,   0.248100,   0.256100,   0.299100,   0.046341,   0.096000,   1.275000, 595.493735
Outstanding requests per worker:
3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:42   0:00 /usr/lib/linux
memcache     10 84.7  0.0 128448 49088 pts/0    Sl+  11:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3624672902      instructions:u            #    0.54  insn per cycle         
        6694544172      cycles:u                                                    
          25202108      armv8_pmuv3_0/br_mis_pred/:u                                   
         630414063      armv8_pmuv3_0/br_pred/:u                                    

      37.269447547 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 30000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1740567040
starting receive base loop
Created 256 connections total
Creating worker on tid 627175936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288546.286971,       0.0,       77293,      69529,       7764,      41613,      27916,   0.697973,   0.255100,   0.291100,   2.700000,   6.142985,   0.000000, 166.307002, 407.742683
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136451,      15076,      91162,      45289,   0.204481,   0.250100,   0.268100,   0.300100,   0.044499,   0.098000,   1.283000, 483.493591
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.8,      151534,     136531,      15003,      96419,      40112,   0.204596,   0.251100,   0.271100,   0.301100,   0.044947,   0.097000,   1.219000, 525.477657
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136244,      15277,      99510,      36734,   0.205228,   0.252100,   0.274100,   0.303100,   0.045861,   0.103000,   1.426000, 552.999178
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136351,      15174,     102149,      34202,   0.205564,   0.252100,   0.275100,   0.304000,   0.046739,   0.100000,   0.989000, 573.165037
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136292,      15235,     103638,      32654,   0.205746,   0.252100,   0.277100,   0.305100,   0.048309,   0.100000,   1.183000, 587.682425
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136238,      15292,     105184,      31054,   0.206177,   0.252100,   0.277100,   0.305100,   0.048924,   0.098000,   1.156000, 597.668096
Outstanding requests per worker:
3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:42   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:42   0:00 /usr/lib/linux
memcache      9 86.1  0.0 128448 48832 pts/0    Sl+  11:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3719046131      instructions:u            #    0.54  insn per cycle         
        6930392493      cycles:u                                                    
          25072269      armv8_pmuv3_0/br_mis_pred/:u                                   
         648558390      armv8_pmuv3_0/br_pred/:u                                    

      37.310797744 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 31000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1446703616
starting receive base loop
Created 256 connections total
Creating worker on tid 334557696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288587.287012,       0.0,       79720,      71669,       8051,      42994,      28675,   0.485131,   0.278100,   0.297100,   2.700000,   3.914396,   0.000000, 123.375997, 409.278447
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.6,      156268,     140698,      15570,      94438,      46260,   0.207857,   0.261100,   0.282100,   0.305100,   0.045457,   0.094000,   0.926000, 487.303224
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140820,      15438,      99886,      40934,   0.209503,   0.270100,   0.283100,   0.307100,   0.045753,   0.096000,   0.877000, 530.120558
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140473,      15785,     102936,      37537,   0.209401,   0.269100,   0.283100,   0.308100,   0.046265,   0.095000,   0.891000, 555.433421
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140549,      15715,     105359,      35190,   0.210677,   0.272100,   0.284100,   0.313100,   0.049191,   0.103000,   0.986000, 573.189905
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.2,      156266,     140684,      15582,     107047,      33637,   0.210431,   0.271100,   0.284100,   0.315100,   0.049429,   0.096000,   1.117000, 585.380690
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140697,      15559,     108759,      31938,   0.211752,   0.273100,   0.284100,   0.313100,   0.053400,   0.096000,   1.187000, 599.168468
Outstanding requests per worker:
4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:43   0:00 /usr/lib/linux
memcache      8 92.2  0.0 130496 50112 pts/0    Sl+  11:43   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3824845344      instructions:u            #    0.55  insn per cycle         
        6931796961      cycles:u                                                    
          25943465      armv8_pmuv3_0/br_mis_pred/:u                                   
         667597433      armv8_pmuv3_0/br_pred/:u                                    

      35.919319215 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 2 threads, 32000 rps'
==> Bench: 65536 keys, 256 conns, 2 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 65536 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 2'
Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1696723456
starting receive base loop
Created 256 connections total
Creating worker on tid 586871296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288628.287053,       0.0,       81873,      73704,       8169,      43970,      29734,   0.788476,   0.289100,   0.678100,   4.000000,   6.330939,   0.000000, 161.963999, 406.493922
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     144964,      16337,      97377,      47587,   0.223265,   0.279100,   0.289100,   0.346000,   0.050464,   0.108000,   1.335000, 488.712349
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145039,      16261,     103450,      41589,   0.226536,   0.281000,   0.292100,   0.348100,   0.052412,   0.104000,   1.284000, 534.166335
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145359,      15941,     106538,      38821,   0.227316,   0.282100,   0.292100,   0.341100,   0.049271,   0.099000,   0.860000, 555.316712
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.8,      161304,     145318,      15986,     109375,      35943,   0.230116,   0.283100,   0.296100,   0.352100,   0.053165,   0.093000,   1.284000, 575.389442
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145184,      16115,     110663,      34521,   0.231271,   0.284100,   0.297100,   0.348100,   0.054007,   0.109000,   1.330000, 587.409790
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145086,      16213,     112072,      33014,   0.234478,   0.285000,   0.302100,   0.352100,   0.056913,   0.107000,   1.153000, 599.593103
Outstanding requests per worker:
4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:44   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:44   0:00 /usr/lib/linux
memcache     10 90.5  0.0 130496 49664 pts/0    Sl+  11:44   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3907726166      instructions:u            #    0.56  insn per cycle         
        6936493458      cycles:u                                                    
          26040312      armv8_pmuv3_0/br_mis_pred/:u                                   
         674703571      armv8_pmuv3_0/br_pred/:u                                    

      35.999687624 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 27000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1840116224
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
Created 256 connections total
Creating worker on tid 53211648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288669.287094,       0.0,       69517,      62625,       6892,      37281,      25344,   1.061821,   0.136100,   0.201100,  32.400000,   9.244687,   0.000000, 209.784001, 404.639649
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121787,      13356,      80959,      40828,   0.105168,   0.126100,   0.140100,   0.185100,   0.022635,   0.061000,   0.578000, 481.146953
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121593,      13553,      85602,      35991,   0.105565,   0.126100,   0.140100,   0.187100,   0.024169,   0.061000,   1.270000, 522.553009
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121491,      13657,      88257,      33234,   0.105466,   0.126100,   0.140100,   0.187100,   0.023728,   0.060000,   0.618000, 547.672124
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121767,      13384,      90805,      30962,   0.105727,   0.126100,   0.141100,   0.188100,   0.024798,   0.060000,   0.665000, 567.646218
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121815,      13328,      91936,      29879,   0.106273,   0.127100,   0.142100,   0.191100,   0.026171,   0.060000,   1.245000, 579.419333
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121550,      13595,      92821,      28729,   0.105253,   0.126100,   0.140100,   0.185100,   0.022588,   0.060000,   0.505000, 589.305315
Outstanding requests per worker:
0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:44   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   11:44   0:00 /usr/lib/linux
memcache      9 81.2  0.0 125376 42944 pts/0    Sl+  11:44   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3344324550      instructions:u            #    0.53  insn per cycle         
        6357175909      cycles:u                                                    
          23391089      armv8_pmuv3_0/br_mis_pred/:u                                   
         584968547      armv8_pmuv3_0/br_pred/:u                                    

      37.240184914 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 28000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2434920960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
Created 256 connections total
Creating worker on tid 649130496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288710.287135,       0.0,       73922,      66427,       7495,      39794,      26633,   0.832583,   0.188100,   0.211100,  11.900000,   7.338755,   0.000000, 156.362996, 407.874178
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126660,      14196,      84486,      42174,   0.129378,   0.185100,   0.190100,   0.207100,   0.039170,   0.061000,   0.743000, 483.495437
Outstanding requests per worker:
0 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126888,      13969,      89862,      37026,   0.129616,   0.185100,   0.191100,   0.208100,   0.040260,   0.061000,   0.698000, 528.160937
Outstanding requests per worker:
1 2 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.6,      140863,     127028,      13835,      92019,      35009,   0.129139,   0.185100,   0.190100,   0.207100,   0.039729,   0.061000,   1.302000, 547.620737
Outstanding requests per worker:
2 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126896,      13955,      94506,      32390,   0.129263,   0.185100,   0.190100,   0.207100,   0.040181,   0.061000,   0.701000, 567.677744
Outstanding requests per worker:
2 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126770,      14085,      95854,      30916,   0.129528,   0.185100,   0.191100,   0.207100,   0.041311,   0.061000,   1.328000, 579.791378
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     127031,      13826,      97300,      29731,   0.129203,   0.185100,   0.190100,   0.207100,   0.038743,   0.061000,   0.353000, 593.169234
Outstanding requests per worker:
2 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:45   0:00 /usr/lib/linux
memcache      8 85.2  0.0 127424 47232 pts/0    Sl+  11:45   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3418050307      instructions:u            #    0.54  insn per cycle         
        6320449404      cycles:u                                                    
          23536834      armv8_pmuv3_0/br_mis_pred/:u                                   
         587577350      armv8_pmuv3_0/br_pred/:u                                    

      36.020604475 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 29000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2217341440
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
Created 256 connections total
Creating worker on tid 431682048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288750.287175,       0.0,       77531,      69775,       7756,      41676,      28099,   0.783187,   0.169100,   0.329100,  12.000000,   6.811519,   0.000000, 158.324003, 408.026843
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131365,      14632,      87895,      43470,   0.109803,   0.158100,   0.172100,   0.189100,   0.030023,   0.058000,   0.992000, 484.984242
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.2,      146001,     131215,      14786,      92684,      38531,   0.109887,   0.158100,   0.172100,   0.188100,   0.029394,   0.057000,   0.648000, 526.347026
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131153,      14841,      95764,      35389,   0.110608,   0.160100,   0.173000,   0.190100,   0.030754,   0.058000,   0.916000, 551.505349
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131521,      14472,      98148,      33373,   0.110576,   0.160100,   0.173000,   0.189100,   0.031336,   0.059000,   0.749000, 570.167585
Outstanding requests per worker:
0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131689,      14308,      99824,      31865,   0.110843,   0.160100,   0.173000,   0.190100,   0.032960,   0.058000,   0.812000, 582.561809
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.0,      146000,     131329,      14671,     100674,      30655,   0.111329,   0.161100,   0.173000,   0.191100,   0.035076,   0.058000,   0.913000, 593.039100
Outstanding requests per worker:
0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:46   0:00 /usr/lib/linux
memcache      9 90.4  0.0 128448 49024 pts/0    Sl+  11:46   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3610766315      instructions:u            #    0.53  insn per cycle         
        6754202221      cycles:u                                                    
          24639659      armv8_pmuv3_0/br_mis_pred/:u                                   
         630063131      armv8_pmuv3_0/br_pred/:u                                    

      36.049979570 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 30000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2375152128
starting receive base loop
num_worker_connections 64
Creating worker on tid 1781920256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
Created 256 connections total
Creating worker on tid 590082560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288791.287216,       0.0,       77651,      69805,       7846,      41254,      28551,   0.658322,   0.167100,   0.482100,   6.000000,   5.608338,   0.000000, 145.714000, 402.044495
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135395,      14988,      90663,      44732,   0.113483,   0.160100,   0.169100,   0.190100,   0.030392,   0.060000,   1.303000, 485.583796
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135217,      15169,      95823,      39394,   0.113835,   0.160100,   0.169100,   0.191100,   0.030389,   0.061000,   1.308000, 528.813899
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135309,      15073,      98941,      36368,   0.113813,   0.160100,   0.169100,   0.191100,   0.031601,   0.060000,   1.320000, 553.579843
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135535,      14850,     101453,      34082,   0.113931,   0.161100,   0.169100,   0.190100,   0.031404,   0.062000,   1.292000, 572.239894
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.2,      150381,     135313,      15068,     103067,      32246,   0.114161,   0.161100,   0.169100,   0.189100,   0.032635,   0.060000,   0.829000, 586.147037
Outstanding requests per worker:
0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135276,      15110,     103970,      31306,   0.114773,   0.161100,   0.170100,   0.190100,   0.037261,   0.061000,   1.284000, 595.680224
Outstanding requests per worker:
0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:46   0:00 /usr/lib/linux
memcache      8 91.6  0.0 129472 49024 pts/0    Sl+  11:46   0:32 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  11:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3696436797      instructions:u            #    0.55  insn per cycle         
        6749111662      cycles:u                                                    
          25374148      armv8_pmuv3_0/br_mis_pred/:u                                   
         646318089      armv8_pmuv3_0/br_pred/:u                                    

      35.869848123 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 31000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1593700864
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
Created 256 connections total
Creating worker on tid 4103926272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288832.287257,       0.0,       80048,      72033,       8015,      43310,      28723,   1.695633,   4.200000,   7.600000,  23.200000,   8.814652,   0.000000, 189.971998, 408.330293
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139629,      15428,      93733,      45896,   0.120838,   0.169100,   0.181100,   0.191100,   0.037015,   0.060000,   0.872000, 486.485136
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139675,      15371,      99344,      40331,   0.121620,   0.171100,   0.182100,   0.191100,   0.037246,   0.060000,   0.862000, 529.882900
Outstanding requests per worker:
0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139590,      15458,     102533,      37057,   0.122215,   0.173000,   0.182100,   0.191100,   0.037736,   0.060000,   0.842000, 555.601118
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139755,      15298,     104925,      34830,   0.123207,   0.175000,   0.183100,   0.192100,   0.040604,   0.061000,   0.928000, 574.683704
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139579,      15476,     106534,      33045,   0.123247,   0.175000,   0.183100,   0.192100,   0.039756,   0.060000,   0.864000, 587.679336
Outstanding requests per worker:
0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139529,      15516,     107627,      31902,   0.124091,   0.176100,   0.183100,   0.193100,   0.044365,   0.059000,   0.995000, 596.897993
Outstanding requests per worker:
0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:47   0:00 /usr/lib/linux
memcache      8 89.9  0.0 129472 49024 pts/0    Sl+  11:47   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3793438487      instructions:u            #    0.55  insn per cycle         
        6837692502      cycles:u                                                    
          26572372      armv8_pmuv3_0/br_mis_pred/:u                                   
         659368094      armv8_pmuv3_0/br_pred/:u                                    

      36.049942481 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 4 threads, 32000 rps'
==> Bench: 65536 keys, 256 conns, 4 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 65536 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 4'
Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2276389376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
Created 256 connections total
Creating worker on tid 488108544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288872.287297,       0.0,       83966,      75426,       8540,      45696,      29730,   3.372946,   8.700000,  12.000000,  20.800000,   8.208034,   0.000000, 195.309997, 414.364649
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144062,      15945,      97761,      46301,   0.141327,   0.183100,   0.187100,   0.230100,   0.042699,   0.060000,   1.041000, 493.863899
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143975,      16036,     102707,      41268,   0.144014,   0.184100,   0.188100,   0.217100,   0.040990,   0.059000,   0.813000, 533.923702
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     143973,      16041,     106202,      37771,   0.146423,   0.185100,   0.188100,   0.227100,   0.043879,   0.059000,   0.937000, 559.638884
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     143987,      16030,     108198,      35789,   0.148628,   0.185100,   0.189100,   0.233100,   0.048910,   0.057000,   1.159000, 576.075111
Outstanding requests per worker:
2 0 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143992,      16015,     110077,      33915,   0.147681,   0.185100,   0.188100,   0.227100,   0.046272,   0.062000,   0.917000, 589.996472
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     144049,      15960,     111558,      32491,   0.150823,   0.185100,   0.189100,   0.280100,   0.061510,   0.062000,   1.190000, 600.870613
Outstanding requests per worker:
1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:48   0:00 /usr/lib/linux
memcache      8 90.6  0.0 130496 51136 pts/0    Sl+  11:48   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3859647993      instructions:u            #    0.57  insn per cycle         
        6830114721      cycles:u                                                    
          25423449      armv8_pmuv3_0/br_mis_pred/:u                                   
         661678203      armv8_pmuv3_0/br_pred/:u                                    

      36.090684761 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 27000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 27000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2799759872
starting receive base loop
num_worker_connections 32
Creating worker on tid 2458644992
starting receive base loop
num_worker_connections 32
Creating worker on tid 2123100672
starting receive base loop
num_worker_connections 32
Creating worker on tid 1787556352
starting receive base loop
num_worker_connections 32
Creating worker on tid 1452012032
starting receive base loop
num_worker_connections 32
Creating worker on tid 1116467712
starting receive base loop
num_worker_connections 32
Creating worker on tid 780923392
starting receive base loop
Created 256 connections total
Creating worker on tid 445379072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288913.287338,       0.0,       75611,      68071,       7540,      40739,      27332,   1.902205,   0.154100,   1.400000,  70.600000,  13.760650,   0.000000, 223.113999, 407.247492
Outstanding requests per worker:
1 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121891,      13252,      81208,      40683,   0.111836,   0.153100,   0.155100,   0.179100,   0.030535,   0.054000,   0.794000, 481.245621
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121553,      13593,      85200,      36353,   0.112332,   0.153100,   0.155100,   0.184100,   0.030777,   0.053000,   0.798000, 520.121470
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121371,      13775,      88383,      32988,   0.112574,   0.153100,   0.155100,   0.185100,   0.031188,   0.055000,   0.854000, 548.389096
Outstanding requests per worker:
1 0 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121912,      13237,      90745,      31167,   0.113155,   0.153100,   0.156100,   0.187100,   0.031763,   0.055000,   0.845000, 566.608824
Outstanding requests per worker:
0 1 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121687,      13454,      91759,      29928,   0.113246,   0.153100,   0.156100,   0.187100,   0.032443,   0.052000,   0.808000, 578.802674
Outstanding requests per worker:
0 0 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121512,      13632,      92947,      28565,   0.113328,   0.153100,   0.156100,   0.186100,   0.033064,   0.053000,   0.841000, 591.278022
Outstanding requests per worker:
0 0 0 1 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:48   0:00 /usr/lib/linux
memcache      8 81.5  0.0 124352 44992 pts/0    Sl+  11:48   0:29 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  11:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3283851809      instructions:u            #    0.54  insn per cycle         
        6069595646      cycles:u                                                    
          22564104      armv8_pmuv3_0/br_mis_pred/:u                                   
         564794522      armv8_pmuv3_0/br_pred/:u                                    

      36.089614925 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 28000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 28000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2536370688
starting receive base loop
num_worker_connections 32
Creating worker on tid 2198270464
starting receive base loop
num_worker_connections 32
Creating worker on tid 1862726144
starting receive base loop
num_worker_connections 32
Creating worker on tid 1527181824
starting receive base loop
num_worker_connections 32
Creating worker on tid 1191637504
starting receive base loop
num_worker_connections 32
Creating worker on tid 856093184
starting receive base loop
num_worker_connections 32
Creating worker on tid 520548864
starting receive base loop
Created 256 connections total
Creating worker on tid 185004544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288954.287379,       0.0,       76990,      69359,       7631,      41632,      27727,   2.502384,   0.174100,   1.800000,  91.900000,  17.250546,   0.000000, 256.049007, 408.757450
Outstanding requests per worker:
0 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126269,      14091,      84294,      41975,   0.112265,   0.164100,   0.173000,   0.187100,   0.033385,   0.054000,   1.015000, 483.364199
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126380,      13981,      89310,      37070,   0.112991,   0.164100,   0.173000,   0.193100,   0.034698,   0.055000,   0.982000, 527.339927
Outstanding requests per worker:
0 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.0,      140365,     126413,      13952,      92172,      34241,   0.112970,   0.164100,   0.173000,   0.193100,   0.034154,   0.058000,   0.686000, 551.715892
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.4,      140367,     126539,      13828,      94344,      32195,   0.113026,   0.164100,   0.173000,   0.191100,   0.034347,   0.054000,   1.036000, 567.858067
Outstanding requests per worker:
1 1 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.6,      140358,     126284,      14074,      95844,      30440,   0.121525,   0.165100,   0.175000,   0.327000,   0.099741,   0.058000,   2.265000, 583.255591
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126388,      13974,      96806,      29582,   0.113312,   0.164100,   0.174100,   0.194000,   0.032738,   0.055000,   1.033000, 592.548652
Outstanding requests per worker:
1 1 1 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:49   0:00 /usr/lib/linux
memcache     10 84.3  0.0 128448 45312 pts/0    Sl+  11:49   0:30 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  11:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3398692692      instructions:u            #    0.54  insn per cycle         
        6333104976      cycles:u                                                    
          23687388      armv8_pmuv3_0/br_mis_pred/:u                                   
         584120149      armv8_pmuv3_0/br_pred/:u                                    

      36.040444745 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 29000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 29000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2817454592
starting receive base loop
num_worker_connections 32
Creating worker on tid 2482827776
starting receive base loop
num_worker_connections 32
Creating worker on tid 2147283456
starting receive base loop
num_worker_connections 32
Creating worker on tid 1811739136
starting receive base loop
num_worker_connections 32
Creating worker on tid 1476194816
starting receive base loop
num_worker_connections 32
Creating worker on tid 1140650496
starting receive base loop
num_worker_connections 32
Creating worker on tid 805106176
starting receive base loop
Created 256 connections total
Creating worker on tid 469561856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575288995.287420,       0.0,       81364,      73294,       8070,      43832,      29462,   3.643595,   0.208100,   3.100000, 127.000000,  23.097170,   0.000000, 322.064996, 407.687041
Outstanding requests per worker:
0 1 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.8,      145469,     131065,      14404,      87950,      43115,   0.114000,   0.175000,   0.183100,   0.202100,   0.039843,   0.054000,   1.410000, 487.137436
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     130930,      14535,      92499,      38431,   0.114389,   0.175000,   0.183100,   0.205100,   0.041446,   0.053000,   0.707000, 525.464034
Outstanding requests per worker:
1 1 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.6,      145468,     130975,      14493,      95566,      35409,   0.114588,   0.175000,   0.184100,   0.206100,   0.040699,   0.052000,   1.313000, 551.794686
Outstanding requests per worker:
1 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     131028,      14438,      97745,      33283,   0.114860,   0.175000,   0.184100,   0.207100,   0.039245,   0.054000,   1.479000, 568.891039
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     130995,      14471,      99325,      31670,   0.115478,   0.175000,   0.184100,   0.209100,   0.043156,   0.054000,   1.294000, 582.347540
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.4,      145472,     130991,      14481,     100677,      30314,   0.115659,   0.175000,   0.185100,   0.209100,   0.042625,   0.053000,   0.894000, 594.643892
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:50   0:00 /usr/lib/linux
memcache      8 87.7  0.0 127424 46016 pts/0    Sl+  11:50   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3526675272      instructions:u            #    0.55  insn per cycle         
        6397747146      cycles:u                                                    
          23244180      armv8_pmuv3_0/br_mis_pred/:u                                   
         608528548      armv8_pmuv3_0/br_pred/:u                                    

      36.049827150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2487218688
starting receive base loop
num_worker_connections 32
Creating worker on tid 2147283456
starting receive base loop
num_worker_connections 32
Creating worker on tid 1811739136
starting receive base loop
num_worker_connections 32
Creating worker on tid 1476194816
starting receive base loop
num_worker_connections 32
Creating worker on tid 1140650496
starting receive base loop
num_worker_connections 32
Creating worker on tid 805106176
starting receive base loop
num_worker_connections 32
Creating worker on tid 469561856
starting receive base loop
Created 256 connections total
Creating worker on tid 134017536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289036.287461,       0.0,       81484,      73242,       8242,      46416,      26826,   7.048372,   4.700000,  10.500000, 205.800000,  34.014012,   0.000000, 381.058991, 424.250594
Outstanding requests per worker:
1 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135347,      15047,      95905,      39442,   0.126506,   0.165100,   0.174100,   0.207100,   0.034692,   0.052000,   1.415000, 496.336269
Outstanding requests per worker:
1 1 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135368,      15015,     100043,      35325,   0.126597,   0.165100,   0.174100,   0.205100,   0.033726,   0.053000,   1.374000, 529.929540
Outstanding requests per worker:
1 0 1 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135331,      15055,     102984,      32347,   0.127513,   0.165100,   0.175000,   0.208100,   0.035881,   0.052000,   0.779000, 554.545307
Outstanding requests per worker:
1 1 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135651,      14738,     104783,      30868,   0.127883,   0.165100,   0.175000,   0.210100,   0.036861,   0.053000,   0.783000, 567.010792
Outstanding requests per worker:
0 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135369,      15022,     105804,      29565,   0.128193,   0.165100,   0.176100,   0.207100,   0.040412,   0.053000,   0.955000, 578.172558
Outstanding requests per worker:
0 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135320,      15063,     107570,      27750,   0.128628,   0.166100,   0.176100,   0.210100,   0.038841,   0.052000,   1.353000, 592.738265
Outstanding requests per worker:
0 1 0 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:50   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:50   0:00 /usr/lib/linux
memcache     10 86.0  0.0 124352 44928 pts/0    Sl+  11:50   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3694376545      instructions:u            #    0.56  insn per cycle         
        6575848453      cycles:u                                                    
          23373044      armv8_pmuv3_0/br_mis_pred/:u                                   
         623296728      armv8_pmuv3_0/br_pred/:u                                    

      37.390783413 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 31000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 31000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 1958539776
starting receive base loop
num_worker_connections 32
Creating worker on tid 1618473472
starting receive base loop
num_worker_connections 32
Creating worker on tid 1282929152
starting receive base loop
num_worker_connections 32
Creating worker on tid 947384832
starting receive base loop
num_worker_connections 32
Creating worker on tid 611840512
starting receive base loop
num_worker_connections 32
Creating worker on tid 276296192
starting receive base loop
num_worker_connections 32
Creating worker on tid 4235719168
starting receive base loop
Created 256 connections total
Creating worker on tid 3900174848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289076.287501,       0.0,       85821,      77142,       8679,      46562,      30580,   3.066478,   6.000000,  10.800000,  78.100000,  14.491417,   0.000000, 242.726997, 413.587021
Outstanding requests per worker:
0 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.8,      155059,     139607,      15452,      94312,      45295,   0.111518,   0.142100,   0.154100,   0.198100,   0.030104,   0.052000,   1.589000, 492.237524
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139540,      15507,      99559,      39981,   0.114472,   0.144100,   0.163100,   0.212100,   0.036082,   0.051000,   1.513000, 532.603927
Outstanding requests per worker:
0 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139754,      15296,     102752,      37002,   0.115010,   0.150100,   0.163100,   0.205100,   0.035043,   0.053000,   0.817000, 557.134086
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139533,      15520,     104670,      34863,   0.115365,   0.152000,   0.164100,   0.197100,   0.029149,   0.053000,   1.501000, 574.423262
Outstanding requests per worker:
0 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139456,      15601,     106352,      33104,   0.117846,   0.153100,   0.167100,   0.210100,   0.040960,   0.053000,   0.933000, 587.523943
Outstanding requests per worker:
0 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139712,      15334,     107762,      31950,   0.119557,   0.153100,   0.172100,   0.230100,   0.051491,   0.052000,   1.080000, 597.361136
Outstanding requests per worker:
1 1 0 0 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:51   0:00 /usr/lib/linux
memcache      8 90.5  0.0 130496 50048 pts/0    Sl+  11:51   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3780038388      instructions:u            #    0.56  insn per cycle         
        6778452652      cycles:u                                                    
          25705481      armv8_pmuv3_0/br_mis_pred/:u                                   
         652308149      armv8_pmuv3_0/br_pred/:u                                    

      35.939206930 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 256 conns, 8 threads, 32000 rps'
==> Bench: 65536 keys, 256 conns, 8 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 65536 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 8'
Starting client with -r 32000 -k 65536 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 65536
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2608198144
starting receive base loop
num_worker_connections 32
Creating worker on tid 2273440256
starting receive base loop
num_worker_connections 32
Creating worker on tid 1937895936
starting receive base loop
num_worker_connections 32
Creating worker on tid 1602351616
starting receive base loop
num_worker_connections 32
Creating worker on tid 1266807296
starting receive base loop
num_worker_connections 32
Creating worker on tid 931262976
starting receive base loop
num_worker_connections 32
Creating worker on tid 595718656
starting receive base loop
Created 256 connections total
Creating worker on tid 260174336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289117.287542,       0.0,       88096,      79222,       8874,      47802,      31420,   9.043228,  16.500000,  19.400000, 131.400000,  21.733224,   0.000000, 305.727988, 412.765482
Outstanding requests per worker:
28 30 27 27 30 30 28 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.8,      159989,     143959,      16030,      97254,      46705,   7.526846,  13.500000,  14.100000,  15.300000,   4.314725,   0.083000,  17.541001, 492.016060
Outstanding requests per worker:
30 25 34 30 28 31 31 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31998.6,      159993,     143907,      16086,     102647,      41260,   7.936587,  14.500000,  15.200000,  16.600000,   4.632053,   0.087000,  19.028001, 533.969487
Outstanding requests per worker:
37 31 36 31 32 35 28 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.6,      159998,     144218,      15780,     106011,      38207,   8.319177,  15.400000,  16.200000,  17.300000,   4.883237,   0.088000,  19.145999, 558.482915
Outstanding requests per worker:
40 43 24 30 29 34 34 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     144030,      15972,     108219,      35811,   8.791564,  16.600000,  17.400000,  18.600000,   5.225873,   0.088000,  20.777000, 575.160286
Outstanding requests per worker:
33 47 31 42 36 39 37 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.0,      160000,     144070,      15930,     110287,      33783,   9.120223,  17.400000,  18.200000,  19.600000,   5.466429,   0.089000,  22.826999, 588.555654
Outstanding requests per worker:
32 39 35 38 34 41 35 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     143987,      16015,     111548,      32439,   9.226981,  17.600000,  18.500000,  19.800000,   5.536976,   0.090000,  23.068000, 600.643357
Outstanding requests per worker:
36 35 44 40 36 41 39 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:52   0:00 /usr/lib/linux
memcache      8 91.3  0.0 130496 50816 pts/0    Sl+  11:52   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3831191946      instructions:u            #    0.68  insn per cycle         
        5597019778      cycles:u                                                    
          22423430      armv8_pmuv3_0/br_mis_pred/:u                                   
         599761848      armv8_pmuv3_0/br_pred/:u                                    

      36.109627693 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 27000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3046371840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289159.287584,       0.0,       53978,      48459,       5519,      28093,      20366,   1.836769,   2.500000,   2.900000,   6.100000,   1.606529,   0.000000,  72.417997, 389.301368
Outstanding requests per worker:
42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121555,      13590,      80033,      41522,   1.771881,   2.600000,   2.800000,   3.400000,   0.587455,   0.229000,   6.182000, 473.495372
Outstanding requests per worker:
48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121477,      13666,      84927,      36550,   1.801175,   2.600000,   2.800000,   3.500000,   0.594696,   0.227000,   5.826000, 518.039999
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.0,      135135,     121518,      13617,      87495,      34023,   1.853794,   2.700000,   2.900000,   3.600000,   0.622851,   0.233000,   6.429000, 541.587633
Outstanding requests per worker:
60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.0,      135155,     121701,      13454,      89759,      31942,   1.862900,   2.700000,   2.900000,   3.700000,   0.629213,   0.217000,   7.719000, 562.175652
Outstanding requests per worker:
53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27032.4,      135162,     121770,      13392,      91591,      30179,   1.844000,   2.700000,   2.900000,   3.600000,   0.614020,   0.236000,   7.052000, 574.770822
Outstanding requests per worker:
39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.6,      135138,     121658,      13480,      92717,      28941,   1.880305,   2.700000,   3.000000,   3.700000,   0.634606,   0.225000,   7.638000, 586.834635
Outstanding requests per worker:
44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:52   0:00 /usr/lib/linux
memcache      9 75.4  0.0 123328 46976 pts/0    Sl+  11:52   0:28 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3264078215      instructions:u            #    0.53  insn per cycle         
        6151267544      cycles:u                                                    
          23684844      armv8_pmuv3_0/br_mis_pred/:u                                   
         569754309      armv8_pmuv3_0/br_pred/:u                                    

      38.280805445 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 28000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3103060480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289201.287626,       0.0,       57045,      51231,       5814,      29993,      21238,   2.732313,   3.900000,   4.600000,  11.500000,   1.957437,   0.000000,  56.345001, 394.004099
Outstanding requests per worker:
58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128484,      14380,      85136,      43348,   2.656202,   3.900000,   4.400000,   5.600000,   0.987792,   0.236000,  10.556000, 477.084579
Outstanding requests per worker:
62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28570.4,      142852,     128437,      14415,      90747,      37690,   2.738073,   4.000000,   4.500000,   5.700000,   1.005333,   0.236000,   9.788000, 525.497995
Outstanding requests per worker:
79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.6,      142863,     128512,      14351,      93533,      34979,   2.891542,   4.300000,   4.800000,   6.200000,   1.092398,   0.240000,  12.341000, 549.957942
Outstanding requests per worker:
88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.0,      142870,     128619,      14251,      95805,      32814,   2.907422,   4.300000,   4.800000,   6.200000,   1.107107,   0.234000,  14.971000, 567.470553
Outstanding requests per worker:
87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.6,      142858,     128737,      14121,      97554,      31183,   2.871220,   4.200000,   4.700000,   6.000000,   1.067807,   0.262000,  11.081000, 581.887057
Outstanding requests per worker:
95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28577.0,      142885,     128560,      14325,      98446,      30114,   2.955753,   4.400000,   4.900000,   6.300000,   1.123702,   0.266000,  14.409000, 590.772674
Outstanding requests per worker:
79 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:53   0:00 /usr/lib/linux
memcache      8 82.6  0.0 127424 48768 pts/0    Sl+  11:53   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3448752526      instructions:u            #    0.55  insn per cycle         
        6324206349      cycles:u                                                    
          24125147      armv8_pmuv3_0/br_mis_pred/:u                                   
         600279581      armv8_pmuv3_0/br_pred/:u                                    

      37.110657985 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 29000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2898194944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289244.287669,       0.0,       58704,      52711,       5993,      31049,      21662,   3.715783,   5.400000,   6.700000,  15.200000,   3.118014,   0.000000, 105.159000, 397.851340
Outstanding requests per worker:
80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132252,      14812,      88094,      44158,   3.448940,   5.200000,   5.800000,   7.500000,   1.342166,   0.240000,  13.752000, 481.476794
Outstanding requests per worker:
94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.6,      147063,     132249,      14814,      92936,      39313,   3.755423,   5.700000,   6.500000,   8.400000,   1.514092,   0.241000,  16.310999, 522.173430
Outstanding requests per worker:
98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29408.4,      147042,     132274,      14768,      96338,      35936,   3.756700,   5.600000,   6.300000,   8.200000,   1.478876,   0.234000,  18.289000, 549.798933
Outstanding requests per worker:
125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29419.2,      147096,     132445,      14651,      98823,      33622,   3.828864,   5.800000,   6.500000,   8.500000,   1.534170,   0.240000,  16.009999, 568.187942
Outstanding requests per worker:
102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.6,      147058,     132440,      14618,     100209,      32231,   4.035516,   6.100000,   6.900000,   9.000000,   1.638270,   0.238000,  16.050000, 580.946572
Outstanding requests per worker:
120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29416.2,      147081,     132444,      14637,     101681,      30763,   3.909510,   5.900000,   6.700000,   8.600000,   1.557697,   0.236000,  17.620999, 593.290493
Outstanding requests per worker:
106 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:54   0:00 /usr/lib/linux
memcache      9 79.7  0.0 127424 49216 pts/0    Sl+  11:54   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3531295546      instructions:u            #    0.54  insn per cycle         
        6517326961      cycles:u                                                    
          23871600      armv8_pmuv3_0/br_mis_pred/:u                                   
         613106597      armv8_pmuv3_0/br_pred/:u                                    

      38.260205889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2667377152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289285.287710,       0.0,       60440,      54285,       6155,      32106,      22179,   5.312973,   8.200000,  10.300000,  20.200000,   4.182842,   0.000000, 121.591002, 399.422935
Outstanding requests per worker:
125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30298.8,      151494,     136212,      15282,      90464,      45748,   5.045620,   7.800000,   9.100000,  12.200000,   2.216703,   0.280000,  26.819000, 478.644870
Outstanding requests per worker:
158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.2,      151536,     136328,      15208,      96019,      40309,   5.301863,   8.100000,   9.500000,  12.400000,   2.266452,   0.276000,  24.575001, 522.315658
Outstanding requests per worker:
148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30301.6,      151508,     136326,      15182,      99216,      37110,   5.745829,   9.000000,  10.500000,  14.200000,   2.603999,   0.313000,  39.195001, 549.022798
Outstanding requests per worker:
162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30298.0,      151490,     136351,      15139,     101795,      34556,   5.887334,   9.200000,  10.900000,  14.800000,   2.697163,   0.275000,  32.086998, 569.189636
Outstanding requests per worker:
198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30309.0,      151545,     136476,      15069,     103461,      33015,   5.841437,   9.000000,  10.600000,  14.000000,   2.576263,   0.245000,  34.968000, 583.697317
Outstanding requests per worker:
177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30300.8,      151504,     136487,      15017,     105148,      31339,   6.061859,   9.500000,  11.200000,  15.300000,   2.796134,   0.319000,  37.075002, 595.602321
Outstanding requests per worker:
197 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:55   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:55   0:00 /usr/lib/linux
memcache     10 85.5  0.0 128448 50944 pts/0    Sl+  11:55   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3622151130      instructions:u            #    0.56  insn per cycle         
        6498404469      cycles:u                                                    
          24907549      armv8_pmuv3_0/br_mis_pred/:u                                   
         625922399      armv8_pmuv3_0/br_pred/:u                                    

      36.979474375 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 31000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3320312320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289327.287752,       0.0,       62225,      55880,       6345,      32893,      22987,  10.547759,  17.800000,  21.900000,  34.400000,   6.757675,   0.000000, 150.378004, 398.034341
Outstanding requests per worker:
237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31232.8,      156164,     140414,      15750,      93034,      47380,   9.659130,  16.100000,  19.300000,  26.700000,   5.046856,   0.288000,  53.784002, 479.554368
Outstanding requests per worker:
339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31248.4,      156242,     140541,      15701,      99244,      41297,  12.140991,  20.800000,  25.500000,  37.400000,   7.172998,   0.298000, 105.883002, 526.166414
Outstanding requests per worker:
365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.0,      156230,     140544,      15686,     102829,      37715,  11.846101,  20.100000,  24.200000,  33.600000,   6.421274,   0.285000,  82.934998, 552.948123
Outstanding requests per worker:
394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31257.8,      156289,     140733,      15556,     105223,      35510,  12.835616,  22.100000,  26.900000,  37.800000,   7.184163,   0.324000,  75.896002, 569.633803
Outstanding requests per worker:
366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31245.2,      156226,     140680,      15546,     106518,      34162,  14.485386,  25.600000,  31.700000,  47.600000,   9.042009,   0.331000, 131.362006, 581.781028
Outstanding requests per worker:
402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.0,      156245,     140670,      15575,     108528,      32142,  13.797111,  23.900000,  29.000000,  40.600000,   7.787843,   0.330000,  84.206000, 597.412696
Outstanding requests per worker:
428 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:55   0:00 /usr/lib/linux
memcache      9 84.2  0.0 129472 51200 pts/0    Sl+  11:55   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3679342508      instructions:u            #    0.56  insn per cycle         
        6532577506      cycles:u                                                    
          25290622      armv8_pmuv3_0/br_mis_pred/:u                                   
         632463580      armv8_pmuv3_0/br_pred/:u                                    

      36.900601121 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 1 threads, 32000 rps'
==> Bench: 65536 keys, 512 conns, 1 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 65536 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 1'
Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2666721792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289368.287793,       0.0,       63608,      57117,       6491,      33506,      23611,  29.044110,  39.200000,  43.100000,  57.300000,  11.771327,   0.000000, 307.188004, 397.821769
Outstanding requests per worker:
865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31448.2,      157241,     141421,      15820,      94525,      46896,  75.379319, 169.800000, 221.600000, 326.800000,  69.370121,   0.650000, 534.048021, 484.370970
Outstanding requests per worker:
4767 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31200.4,      156002,     140263,      15739,      99567,      40696, 213.314715, 426.300000, 510.400000, 710.900000, 156.562963,   0.522000, 1031.409025, 530.077241
Outstanding requests per worker:
8706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31205.0,      156025,     140413,      15612,     103015,      37398, 315.723486, 633.600000, 740.200000, 985.400000, 225.532016,   0.871000, 1308.956027, 555.383469
Outstanding requests per worker:
11371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31188.0,      155940,     140425,      15515,     105492,      34933, 389.275435, 785.100000, 918.700000, 1170.200000, 277.026771,   0.961000, 1694.689989, 575.057454
Outstanding requests per worker:
13320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31183.2,      155916,     140372,      15544,     107016,      33356, 445.985903, 915.200000, 1085.700000, 1345.600000, 323.785730,   1.080000, 1902.776003, 588.577309
Outstanding requests per worker:
15043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31159.4,      155797,     140238,      15559,     108469,      31769, 497.521566, 1016.700000, 1193.300000, 1581.900000, 363.329012,   1.306000, 2077.826023, 599.147920
Outstanding requests per worker:
16542 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:56   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:56   0:00 /usr/lib/linux
memcache      9 85.4  0.0 129472 50880 pts/0    Sl+  11:56   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3634220592      instructions:u            #    0.59  insn per cycle         
        6118113666      cycles:u                                                    
          21308479      armv8_pmuv3_0/br_mis_pred/:u                                   
         603849380      armv8_pmuv3_0/br_pred/:u                                    

      36.980132899 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 27000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 517927424
starting receive base loop
Created 512 connections total
Creating worker on tid 2666263040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289410.287835,       0.0,       69042,      62124,       6918,      36715,      25409,   0.355359,   0.437100,   0.547000,   0.694100,   1.410603,   0.000000,  74.532002, 400.123930
Outstanding requests per worker:
7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121626,      13521,      80455,      41171,   0.314622,   0.443100,   0.546100,   0.657100,   0.103004,   0.138000,   1.140000, 476.736545
Outstanding requests per worker:
4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121660,      13490,      85546,      36114,   0.315434,   0.447100,   0.548100,   0.661100,   0.103670,   0.138000,   1.078000, 521.948660
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121807,      13344,      88302,      33505,   0.314958,   0.444100,   0.545100,   0.659100,   0.103774,   0.140000,   1.246000, 547.173208
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121538,      13603,      90260,      31278,   0.315367,   0.447100,   0.547000,   0.660100,   0.104023,   0.137000,   1.253000, 564.500263
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121651,      13496,      91593,      30058,   0.315434,   0.446100,   0.544100,   0.656100,   0.102675,   0.138000,   1.209000, 577.387362
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121643,      13505,      92571,      29072,   0.315291,   0.450100,   0.547000,   0.653100,   0.104165,   0.139000,   1.314000, 587.727087
Outstanding requests per worker:
4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:57   0:00 /usr/lib/linux
memcache      8 80.2  0.0 124352 48576 pts/0    Sl+  11:57   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3307692664      instructions:u            #    0.53  insn per cycle         
        6266719502      cycles:u                                                    
          22331980      armv8_pmuv3_0/br_mis_pred/:u                                   
         577125500      armv8_pmuv3_0/br_pred/:u                                    

      37.030522514 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 28000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 672920064
starting receive base loop
Created 512 connections total
Creating worker on tid 2824663552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289451.287876,       0.0,       71529,      64343,       7186,      38467,      25876,   0.355945,   0.454100,   0.534100,   0.677000,   1.196574,   0.000000,  63.648999, 406.693393
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126795,      14061,      84584,      42211,   0.324786,   0.458100,   0.539000,   0.652100,   0.102193,   0.139000,   1.518000, 482.483797
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126825,      14026,      89559,      37266,   0.322827,   0.456100,   0.532100,   0.640100,   0.101028,   0.139000,   1.518000, 525.200544
Outstanding requests per worker:
8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126826,      14031,      92391,      34435,   0.325272,   0.459100,   0.536100,   0.647100,   0.101538,   0.138000,   1.249000, 549.861495
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126654,      14200,      94542,      32112,   0.324879,   0.459100,   0.536100,   0.649100,   0.102195,   0.139000,   1.448000, 568.786023
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126801,      14050,      96358,      30443,   0.325460,   0.459100,   0.536100,   0.647100,   0.102366,   0.135000,   1.350000, 583.358586
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126981,      13874,      97639,      29342,   0.325433,   0.460100,   0.535100,   0.644100,   0.100737,   0.138000,   1.431000, 593.719147
Outstanding requests per worker:
5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:57   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:57   0:00 /usr/lib/linux
memcache      9 82.5  0.0 126400 49024 pts/0    Sl+  11:57   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3443788807      instructions:u            #    0.54  insn per cycle         
        6371045661      cycles:u                                                    
          23308889      armv8_pmuv3_0/br_mis_pred/:u                                   
         599196221      armv8_pmuv3_0/br_pred/:u                                    

      37.079471462 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 29000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 336851456
starting receive base loop
Created 512 connections total
Creating worker on tid 2489119232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289493.287918,       0.0,       74824,      67269,       7555,      40239,      27030,   0.398624,   0.494100,   0.584100,   0.838100,   1.436869,   0.000000,  74.212998, 406.888403
Outstanding requests per worker:
13 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.6,      147078,     132347,      14731,      89300,      43047,   0.343834,   0.485100,   0.561100,   0.661100,   0.105260,   0.144000,   1.137000, 489.771563
Outstanding requests per worker:
6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132627,      14443,      93939,      38688,   0.343246,   0.481100,   0.550100,   0.660100,   0.105378,   0.158000,   1.404000, 527.674682
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132441,      14628,      96802,      35639,   0.344439,   0.486100,   0.563100,   0.667100,   0.106305,   0.160000,   1.257000, 552.595745
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132455,      14611,      98824,      33631,   0.344419,   0.486100,   0.561100,   0.663100,   0.106723,   0.154000,   1.455000, 569.391597
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132349,      14719,     100494,      31855,   0.345297,   0.490100,   0.566100,   0.663100,   0.106970,   0.161000,   1.269000, 583.237599
Outstanding requests per worker:
5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132363,      14705,     101725,      30638,   0.344924,   0.487100,   0.556100,   0.656100,   0.103935,   0.164000,   1.017000, 594.693540
Outstanding requests per worker:
4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:58   0:00 /usr/lib/linux
memcache      8 84.5  0.0 127424 50176 pts/0    Sl+  11:58   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3571204127      instructions:u            #    0.54  insn per cycle         
        6630364971      cycles:u                                                    
          24128686      armv8_pmuv3_0/br_mis_pred/:u                                   
         621469927      armv8_pmuv3_0/br_pred/:u                                    

      36.890138185 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 296940032
starting receive base loop
Created 512 connections total
Creating worker on tid 2448814592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289534.287959,       0.0,       76944,      69188,       7756,      41744,      27444,   0.407155,   0.525100,   0.628100,   1.100000,   1.228200,   0.000000,  69.781996, 411.779152
Outstanding requests per worker:
8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.6,      151528,     136327,      15201,      91302,      45025,   0.357992,   0.507100,   0.580100,   0.686100,   0.111075,   0.145000,   1.171000, 486.025395
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136212,      15309,      96417,      39795,   0.358584,   0.507100,   0.580100,   0.689100,   0.111765,   0.161000,   1.126000, 527.629607
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136153,      15376,      99830,      36323,   0.360430,   0.510100,   0.580100,   0.687100,   0.111206,   0.166000,   1.228000, 554.797735
Outstanding requests per worker:
6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.8,      151519,     136458,      15061,     102112,      34346,   0.362076,   0.515100,   0.587100,   0.697100,   0.115085,   0.161000,   1.407000, 572.018020
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136477,      15050,     103626,      32851,   0.362875,   0.514100,   0.585000,   0.694100,   0.115409,   0.154000,   1.424000, 584.730995
Outstanding requests per worker:
6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.8,      151524,     136493,      15031,     105191,      31302,   0.361271,   0.512100,   0.581100,   0.686100,   0.111229,   0.143000,   1.182000, 596.403596
Outstanding requests per worker:
5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   11:59   0:00 /usr/lib/linux
memcache     10 87.9  0.0 129472 53056 pts/0    Sl+  11:59   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  11:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3663195771      instructions:u            #    0.55  insn per cycle         
        6620951803      cycles:u                                                    
          24987598      armv8_pmuv3_0/br_mis_pred/:u                                   
         632241057      armv8_pmuv3_0/br_pred/:u                                    

      36.990893050 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 31000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 964817408
starting receive base loop
Created 512 connections total
Creating worker on tid 3119903232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289576.288001,       0.0,       79678,      71617,       8061,      42956,      28661,   0.452848,   0.622100,   0.726100,   1.700000,   0.877739,   0.000000,  51.242001, 410.325104
Outstanding requests per worker:
9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140526,      15733,      94720,      45806,   0.386600,   0.547000,   0.618100,   0.716100,   0.118775,   0.161000,   1.117000, 490.227673
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.4,      156262,     140584,      15678,     100226,      40358,   0.388293,   0.549100,   0.619100,   0.717100,   0.119532,   0.159000,   1.381000, 531.968610
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140843,      15415,     103476,      37367,   0.389291,   0.550100,   0.620100,   0.720100,   0.119735,   0.161000,   1.330000, 556.353606
Outstanding requests per worker:
9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140686,      15578,     105452,      35234,   0.394561,   0.556100,   0.625100,   0.731100,   0.124331,   0.166000,   1.386000, 575.485400
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140588,      15673,     107326,      33262,   0.397069,   0.560100,   0.628100,   0.741100,   0.127768,   0.156000,   1.577000, 588.577012
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.0,      156255,     140638,      15617,     108792,      31846,   0.395852,   0.557100,   0.622100,   0.716100,   0.118977,   0.160000,   1.025000, 600.546979
Outstanding requests per worker:
9 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   11:59   0:00 /usr/lib/linux
memcache     10 86.7  0.0 130496 52224 pts/0    Sl+  11:59   0:32 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  12:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3741854217      instructions:u            #    0.55  insn per cycle         
        6757681066      cycles:u                                                    
          25506403      armv8_pmuv3_0/br_mis_pred/:u                                   
         641766178      armv8_pmuv3_0/br_pred/:u                                    

      36.909047409 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 2 threads, 32000 rps'
==> Bench: 65536 keys, 512 conns, 2 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 65536 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 2'
Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 689893888
starting receive base loop
Created 512 connections total
Creating worker on tid 2843406848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289618.288043,       0.0,       81930,      73623,       8307,      44293,      29330,  12.108622,  29.000000,  31.800000,  33.600000,  10.594199,   0.000000,  68.080999, 409.458933
Outstanding requests per worker:
241 243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32353.2,      161766,     145808,      15958,      98254,      47554,   2.196790,   7.700000,  14.000000,  22.900000,   4.672788,   0.171000,  26.999000, 489.605152
Outstanding requests per worker:
10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145142,      16161,     103399,      41743,   0.443803,   0.598100,   0.661100,   0.798100,   0.132633,   0.167000,   1.913000, 532.072991
Outstanding requests per worker:
9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.4,      161302,     145226,      16076,     107155,      38071,   0.454372,   0.609100,   0.670100,   0.791100,   0.130333,   0.171000,   1.825000, 559.085240
Outstanding requests per worker:
8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.0,      161305,     145220,      16085,     109109,      36111,   0.465853,   0.630100,   0.690100,   0.831100,   0.132714,   0.168000,   1.604000, 576.110336
Outstanding requests per worker:
8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.2,      161296,     145281,      16015,     111037,      34244,   0.474093,   0.644100,   0.705100,   1.200000,   0.153987,   0.172000,   1.852000, 589.655433
Outstanding requests per worker:
9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145332,      15971,     112896,      32436,   0.476753,   0.645100,   0.706100,   1.200000,   0.152419,   0.174000,   1.897000, 602.637919
Outstanding requests per worker:
8 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:00   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:00   0:00 /usr/lib/linux
memcache      9 85.1  0.0 129472 54464 pts/0    Sl+  12:00   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3782739467      instructions:u            #    0.58  insn per cycle         
        6540392440      cycles:u                                                    
          23723969      armv8_pmuv3_0/br_mis_pred/:u                                   
         635444872      armv8_pmuv3_0/br_pred/:u                                    

      38.300092810 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 27000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 512 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1983836672
starting receive base loop
num_worker_connections 128
Creating worker on tid 871428608
starting receive base loop
num_worker_connections 128
Creating worker on tid 4057788928
starting receive base loop
Created 512 connections total
Creating worker on tid 2943742464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289660.288085,       0.0,       77511,      69570,       7941,      41366,      28204,   0.303436,   0.262000,   0.385100,   0.606100,   2.838135,   0.000000, 100.252002, 404.985655
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121618,      13527,      81232,      40386,   0.165367,   0.269100,   0.383100,   0.507100,   0.086979,   0.071000,   0.815000, 484.844382
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121373,      13768,      85193,      36180,   0.164477,   0.268100,   0.380100,   0.498100,   0.085640,   0.071000,   0.975000, 521.924959
Outstanding requests per worker:
2 0 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121806,      13338,      88326,      33480,   0.163948,   0.265100,   0.377100,   0.497100,   0.084588,   0.073000,   0.924000, 546.922533
Outstanding requests per worker:
0 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121611,      13531,      90426,      31185,   0.166472,   0.272100,   0.386100,   0.509100,   0.088451,   0.071000,   1.028000, 566.225399
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121706,      13437,      91932,      29774,   0.165773,   0.270100,   0.383100,   0.505100,   0.087545,   0.072000,   1.105000, 578.955195
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121710,      13433,      93204,      28506,   0.164892,   0.269100,   0.381100,   0.494100,   0.084910,   0.070000,   0.834000, 590.004913
Outstanding requests per worker:
0 1 0 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:01   0:00 /usr/lib/linux
memcache      8 80.8  0.0 126400 51136 pts/0    Sl+  12:01   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3371734624      instructions:u            #    0.52  insn per cycle         
        6425381979      cycles:u                                                    
          22326209      armv8_pmuv3_0/br_mis_pred/:u                                   
         591439329      armv8_pmuv3_0/br_pred/:u                                    

      38.370536884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 28000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 512 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1269166592
starting receive base loop
num_worker_connections 128
Creating worker on tid 157413888
starting receive base loop
num_worker_connections 128
Creating worker on tid 3338334720
starting receive base loop
Created 512 connections total
Creating worker on tid 2229727744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289702.288127,       0.0,       80904,      72707,       8197,      43526,      29181,   0.408322,   0.311100,   0.394100,   1.800000,   3.969733,   0.000000, 130.292997, 408.418227
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126829,      14027,      84997,      41832,   0.181282,   0.314100,   0.384100,   0.501000,   0.086377,   0.071000,   1.616000, 486.673836
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126720,      14132,      89781,      36939,   0.180622,   0.311100,   0.383100,   0.499100,   0.085520,   0.072000,   0.809000, 527.107631
Outstanding requests per worker:
1 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126652,      14200,      92281,      34371,   0.181656,   0.316100,   0.384100,   0.499100,   0.086569,   0.072000,   0.975000, 550.401265
Outstanding requests per worker:
0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126759,      14093,      94604,      32155,   0.183005,   0.325100,   0.386100,   0.507100,   0.089327,   0.073000,   1.569000, 568.976025
Outstanding requests per worker:
0 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126828,      14027,      95641,      31187,   0.182053,   0.319100,   0.383100,   0.503100,   0.088159,   0.071000,   1.170000, 578.662464
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126769,      14082,      97382,      29387,   0.181687,   0.316100,   0.382100,   0.497100,   0.085470,   0.072000,   0.793000, 593.472403
Outstanding requests per worker:
1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:01   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:01   0:00 /usr/lib/linux
memcache      9 80.0  0.0 128448 50944 pts/0    Sl+  12:01   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3475977357      instructions:u            #    0.53  insn per cycle         
        6575097974      cycles:u                                                    
          23722072      armv8_pmuv3_0/br_mis_pred/:u                                   
         603400752      armv8_pmuv3_0/br_pred/:u                                    

      38.401365764 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 29000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1536487936
starting receive base loop
num_worker_connections 128
Creating worker on tid 425849344
starting receive base loop
num_worker_connections 128
Creating worker on tid 3606770176
starting receive base loop
Created 512 connections total
Creating worker on tid 2498163200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289744.288169,       0.0,       83692,      75211,       8481,      45107,      30104,   0.378187,   0.317100,   0.384100,   1.700000,   3.363505,   0.000000, 101.866998, 410.264483
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131497,      14502,      88317,      43180,   0.175836,   0.308100,   0.358100,   0.464100,   0.081508,   0.073000,   0.857000, 487.884629
Outstanding requests per worker:
2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.0,      145995,     131297,      14698,      93366,      37931,   0.176474,   0.309100,   0.359100,   0.471100,   0.084767,   0.074000,   0.933000, 529.927889
Outstanding requests per worker:
0 2 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131274,      14722,      96076,      35198,   0.177402,   0.312100,   0.361100,   0.469100,   0.084610,   0.071000,   1.025000, 553.602016
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131427,      14575,      98340,      33087,   0.177450,   0.314100,   0.361100,   0.465100,   0.082546,   0.073000,   0.862000, 570.599732
Outstanding requests per worker:
1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.6,      146003,     131265,      14738,      99697,      31568,   0.178598,   0.317100,   0.362100,   0.470100,   0.086388,   0.073000,   1.161000, 584.135253
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131557,      14437,     101262,      30295,   0.179971,   0.323000,   0.366100,   0.474100,   0.087836,   0.074000,   1.198000, 595.748520
Outstanding requests per worker:
1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:02   0:00 /usr/lib/linux
memcache      8 86.4  0.0 128448 52864 pts/0    Sl+  12:02   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3614250242      instructions:u            #    0.54  insn per cycle         
        6637567364      cycles:u                                                    
          24106013      armv8_pmuv3_0/br_mis_pred/:u                                   
         632180513      armv8_pmuv3_0/br_pred/:u                                    

      37.129646551 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1737945600
starting receive base loop
num_worker_connections 128
Creating worker on tid 627175936
starting receive base loop
num_worker_connections 128
Creating worker on tid 3808096768
starting receive base loop
Created 512 connections total
Creating worker on tid 2699489792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289786.288211,       0.0,       87169,      78492,       8677,      46990,      31502,   0.382652,   0.352100,   0.449100,   2.600000,   3.253621,   0.000000, 107.561000, 409.867974
Outstanding requests per worker:
1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135248,      15140,      90621,      44627,   0.189168,   0.343100,   0.379100,   0.481100,   0.091101,   0.073000,   0.854000, 486.700875
Outstanding requests per worker:
2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135329,      15061,      96114,      39215,   0.189809,   0.343100,   0.377100,   0.480100,   0.092607,   0.072000,   1.014000, 529.981571
Outstanding requests per worker:
1 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135171,      15212,      98676,      36495,   0.192167,   0.345100,   0.385100,   0.484100,   0.094315,   0.073000,   1.052000, 551.526437
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135216,      15171,     101015,      34201,   0.191664,   0.344100,   0.380100,   0.477100,   0.090380,   0.070000,   0.879000, 571.553352
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135283,      15102,     102944,      32339,   0.193996,   0.346000,   0.386100,   0.482100,   0.094521,   0.071000,   1.125000, 586.586009
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135515,      14869,     104431,      31084,   0.195044,   0.347100,   0.389100,   0.486100,   0.097223,   0.072000,   1.200000, 596.733970
Outstanding requests per worker:
1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:03   0:00 /usr/lib/linux
memcache      8 87.5  0.0 130496 55040 pts/0    Sl+  12:03   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3718019652      instructions:u            #    0.54  insn per cycle         
        6848392329      cycles:u                                                    
          24900829      armv8_pmuv3_0/br_mis_pred/:u                                   
         648750301      armv8_pmuv3_0/br_pred/:u                                    

      37.209697157 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 31000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1948840448
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
Created 512 connections total
Creating worker on tid 2908877312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289827.288252,       0.0,       88150,      79310,       8840,      48121,      31189,   0.776649,   1.500000,   3.900000,   4.700000,   3.981037,   0.000000, 117.702000, 416.634851
Outstanding requests per worker:
6 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31013.2,      155066,     139845,      15221,      94630,      45215,   0.221889,   0.355100,   0.431100,   0.488100,   0.094694,   0.071000,   0.975000, 492.599807
Outstanding requests per worker:
2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.4,      155042,     139469,      15573,      99460,      40009,   0.222961,   0.356100,   0.431100,   0.490100,   0.096418,   0.074000,   1.061000, 532.186450
Outstanding requests per worker:
2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139564,      15492,     102470,      37094,   0.224734,   0.356100,   0.433100,   0.490100,   0.096536,   0.074000,   1.104000, 556.215829
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139739,      15312,     104763,      34976,   0.225244,   0.357100,   0.431100,   0.483100,   0.092827,   0.075000,   0.805000, 573.272093
Outstanding requests per worker:
2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139513,      15544,     106565,      32948,   0.229483,   0.359100,   0.435100,   0.496100,   0.103000,   0.076000,   1.258000, 588.490499
Outstanding requests per worker:
2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139562,      15482,     107809,      31753,   0.232230,   0.363100,   0.437100,   0.522100,   0.106471,   0.074000,   1.245000, 599.660008
Outstanding requests per worker:
2 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache      8 87.8  0.0 129472 53824 pts/0    Sl+  12:04   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3739567950      instructions:u            #    0.57  insn per cycle         
        6606446114      cycles:u                                                    
          24799346      armv8_pmuv3_0/br_mis_pred/:u                                   
         639820215      armv8_pmuv3_0/br_pred/:u                                    

      37.030357487 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 4 threads, 32000 rps'
==> Bench: 65536 keys, 512 conns, 4 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 65536 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 4'
Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1210315264
starting receive base loop
num_worker_connections 128
Creating worker on tid 98365952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3279286784
starting receive base loop
Created 512 connections total
Creating worker on tid 2170679808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289869.288294,       0.0,       90901,      81872,       9029,      49227,      32645,   9.611327,  25.000000,  28.100000,  30.500000,  10.956829,   0.000000, 217.700005, 410.488800
Outstanding requests per worker:
99 96 93 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32076.8,      160384,     144490,      15894,      97353,      47137,   1.696501,   6.400000,  11.500000,  18.500000,   3.880779,   0.080000,  21.275001, 489.513240
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143997,      16011,     102682,      41315,   0.264087,   0.420100,   0.445100,   0.544100,   0.100065,   0.077000,   0.993000, 533.790600
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143808,      16200,     105977,      37831,   0.272535,   0.428100,   0.455100,   0.565100,   0.111315,   0.083000,   1.281000, 558.363151
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     143910,      16108,     108382,      35528,   0.280333,   0.432100,   0.467100,   0.650100,   0.115831,   0.084000,   1.334000, 575.952512
Outstanding requests per worker:
2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144083,      15930,     110219,      33864,   0.288745,   0.436100,   0.473100,   0.838100,   0.130223,   0.084000,   1.412000, 589.540897
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143977,      16034,     111387,      32590,   0.292998,   0.435100,   0.467100,   0.781100,   0.125894,   0.084000,   1.533000, 600.533856
Outstanding requests per worker:
2 2 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache      9 91.0  0.0 130496 54464 pts/0    Sl+  12:04   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3805149890      instructions:u            #    0.58  insn per cycle         
        6536388724      cycles:u                                                    
          23047102      armv8_pmuv3_0/br_mis_pred/:u                                   
         639225682      armv8_pmuv3_0/br_pred/:u                                    

      37.140903379 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 27000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 27000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1836839424
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289910.288335,       0.0,       81289,      73139,       8150,      43996,      29143,   1.560478,   0.287100,   0.424100,  47.000000,  13.777220,   0.000000, 244.057000, 410.123655
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121779,      13366,      81322,      40457,   0.156641,   0.250100,   0.354100,   0.458100,   0.079587,   0.068000,   0.953000, 483.879848
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121740,      13407,      86006,      35734,   0.156930,   0.255100,   0.357100,   0.458100,   0.079775,   0.068000,   1.097000, 524.599893
Outstanding requests per worker:
0 1 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121562,      13587,      88428,      33134,   0.157193,   0.254100,   0.355100,   0.460100,   0.079867,   0.069000,   0.931000, 549.185280
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121682,      13459,      90358,      31324,   0.157070,   0.252100,   0.355100,   0.458100,   0.080279,   0.070000,   1.085000, 565.893320
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121660,      13484,      91869,      29791,   0.158570,   0.264100,   0.359100,   0.463100,   0.081338,   0.070000,   0.968000, 579.918807
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121715,      13431,      93039,      28676,   0.157754,   0.261100,   0.357100,   0.459100,   0.079572,   0.067000,   0.917000, 588.999770
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:05   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:05   0:00 /usr/lib/linux
memcache     10 80.5  0.0 125376 47808 pts/0    Sl+  12:05   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3275713635      instructions:u            #    0.55  insn per cycle         
        5992373586      cycles:u                                                    
          22112633      armv8_pmuv3_0/br_mis_pred/:u                                   
         561544244      armv8_pmuv3_0/br_pred/:u                                    

      37.069578390 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 28000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 28000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2649027072
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289952.288377,       0.0,       86670,      78120,       8550,      47313,      30807,   0.762808,   0.320100,   0.404100,   8.200000,   6.948799,   0.000000, 153.953001, 414.833052
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.6,      140368,     126629,      13739,      84853,      41776,   0.147650,   0.266100,   0.349100,   0.443100,   0.082116,   0.068000,   0.899000, 485.265903
Outstanding requests per worker:
0 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126354,      14005,      89220,      37134,   0.148641,   0.268100,   0.351100,   0.446100,   0.083429,   0.068000,   0.922000, 524.112747
Outstanding requests per worker:
1 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126307,      14053,      92071,      34236,   0.149644,   0.270100,   0.352100,   0.453100,   0.084541,   0.066000,   1.457000, 551.440656
Outstanding requests per worker:
1 0 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126356,      14006,      94211,      32145,   0.149479,   0.269100,   0.351100,   0.449100,   0.084368,   0.068000,   1.119000, 567.796242
Outstanding requests per worker:
0 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.4,      140367,     126560,      13807,      95704,      30856,   0.150134,   0.271100,   0.351100,   0.451100,   0.084802,   0.067000,   1.049000, 581.317312
Outstanding requests per worker:
1 0 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.2,      140356,     126230,      14126,      96844,      29386,   0.150235,   0.273100,   0.352100,   0.445100,   0.083217,   0.065000,   0.693000, 593.282754
Outstanding requests per worker:
0 1 0 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:06   0:00 /usr/lib/linux
memcache      8 82.0  0.0 127424 50688 pts/0    Sl+  12:06   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3447340694      instructions:u            #    0.53  insn per cycle         
        6470551552      cycles:u                                                    
          24625625      armv8_pmuv3_0/br_mis_pred/:u                                   
         596343717      armv8_pmuv3_0/br_pred/:u                                    

      37.260980575 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 29000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 29000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2105078272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1513484800
starting receive base loop
num_worker_connections 64
Creating worker on tid 917565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 321647104
starting receive base loop
num_worker_connections 64
Creating worker on tid 4020695552
starting receive base loop
num_worker_connections 64
Creating worker on tid 3424776704
starting receive base loop
num_worker_connections 64
Creating worker on tid 2828857856
starting receive base loop
Created 512 connections total
Creating worker on tid 2232939008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575289994.288419,       0.0,       88591,      79830,       8761,      48363,      31467,   0.727454,   0.329100,   0.434100,   4.000000,   6.446129,   0.000000, 175.910994, 414.477189
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.8,      145464,     130944,      14520,      88304,      42640,   0.156851,   0.315100,   0.352100,   0.451100,   0.086416,   0.068000,   1.529000, 489.730305
Outstanding requests per worker:
1 0 0 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     131047,      14418,      93497,      37550,   0.158038,   0.316100,   0.353100,   0.453100,   0.088336,   0.066000,   0.961000, 533.182896
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.4,      145467,     130870,      14597,      95713,      35157,   0.159770,   0.319100,   0.362100,   0.461100,   0.090219,   0.065000,   1.493000, 552.988813
Outstanding requests per worker:
0 1 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.4,      145472,     130947,      14525,      97637,      33310,   0.158331,   0.317100,   0.354100,   0.448100,   0.086057,   0.066000,   0.811000, 568.435306
Outstanding requests per worker:
1 1 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     131030,      14431,      99184,      31846,   0.160352,   0.319100,   0.362100,   0.459100,   0.090233,   0.067000,   1.113000, 581.732206
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     131055,      14411,     100926,      30129,   0.161055,   0.320100,   0.363100,   0.457100,   0.091089,   0.066000,   1.158000, 595.955721
Outstanding requests per worker:
1 0 1 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:06   0:00 /usr/lib/linux
memcache      9 85.4  0.0 128448 53056 pts/0    Sl+  12:06   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3554367534      instructions:u            #    0.55  insn per cycle         
        6475197263      cycles:u                                                    
          23949246      armv8_pmuv3_0/br_mis_pred/:u                                   
         611931242      armv8_pmuv3_0/br_pred/:u                                    

      37.200655248 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2651255296
starting receive base loop
num_worker_connections 64
Creating worker on tid 2058416640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
Created 512 connections total
Creating worker on tid 2780492288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290036.288461,       0.0,       93873,      84393,       9480,      51310,      33083,   1.344611,   0.358100,   0.501000,  36.900000,  11.672148,   0.000000, 212.565005, 417.414169
Outstanding requests per worker:
1 0 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.2,      150396,     135519,      14877,      91545,      43974,   0.164133,   0.324100,   0.370100,   0.458100,   0.094439,   0.067000,   0.883000, 492.624311
Outstanding requests per worker:
1 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135506,      14877,      96457,      39049,   0.163852,   0.323000,   0.368100,   0.446100,   0.093209,   0.067000,   0.950000, 531.671454
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135584,      14803,      99348,      36236,   0.165866,   0.324100,   0.372100,   0.457100,   0.095580,   0.067000,   1.647000, 554.461721
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135377,      15013,     101444,      33933,   0.168452,   0.326100,   0.376100,   0.464100,   0.098572,   0.060000,   1.131000, 573.178140
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135509,      14883,     103280,      32229,   0.168700,   0.326100,   0.375100,   0.460100,   0.099101,   0.058000,   1.266000, 587.920205
Outstanding requests per worker:
1 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135438,      14945,     104553,      30885,   0.167112,   0.324100,   0.371100,   0.451100,   0.093498,   0.067000,   0.829000, 597.396528
Outstanding requests per worker:
1 0 0 0 0 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:07   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:07   0:00 /usr/lib/linux
memcache      9 87.7  0.0 130496 51904 pts/0    Sl+  12:07   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3680839005      instructions:u            #    0.55  insn per cycle         
        6644718819      cycles:u                                                    
          23332180      armv8_pmuv3_0/br_mis_pred/:u                                   
         633401928      armv8_pmuv3_0/br_pred/:u                                    

      37.310264307 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 31000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2268197376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1671885312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
Created 512 connections total
Creating worker on tid 2393960960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290078.288503,       0.0,       95263,      85756,       9507,      51884,      33872,   5.418637,  14.600000,  16.800000,  20.300000,   8.616669,   0.000000, 165.938005, 415.031112
Outstanding requests per worker:
1 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139529,      15522,      94303,      45226,   0.180678,   0.332100,   0.379100,   0.460100,   0.100125,   0.061000,   0.845000, 492.617234
Outstanding requests per worker:
0 1 0 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139605,      15449,      99652,      39953,   0.182020,   0.332100,   0.380100,   0.461100,   0.101946,   0.066000,   1.055000, 533.082963
Outstanding requests per worker:
1 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139698,      15356,     102662,      37036,   0.186863,   0.343100,   0.389100,   0.466100,   0.104090,   0.065000,   1.073000, 556.472441
Outstanding requests per worker:
1 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139523,      15523,     104702,      34821,   0.187908,   0.341100,   0.387100,   0.465100,   0.103554,   0.067000,   1.025000, 573.921439
Outstanding requests per worker:
1 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139710,      15338,     106627,      33083,   0.192236,   0.346000,   0.394100,   0.477100,   0.110309,   0.062000,   1.333000, 588.896944
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139633,      15412,     107985,      31648,   0.194675,   0.348100,   0.395100,   0.488100,   0.114965,   0.066000,   1.352000, 599.143856
Outstanding requests per worker:
0 1 1 1 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:08   0:00 /usr/lib/linux
memcache     10 88.6  0.0 130496 55232 pts/0    Sl+  12:08   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3747574768      instructions:u            #    0.56  insn per cycle         
        6681839711      cycles:u                                                    
          23301294      armv8_pmuv3_0/br_mis_pred/:u                                   
         639791727      armv8_pmuv3_0/br_pred/:u                                    

      37.249314390 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 32000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2153247232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290120.288545,       0.0,       97839,      88119,       9720,      53289,      34830,   9.868437,  26.200000,  29.500000,  32.600000,  12.548326,   0.000000, 197.170004, 415.632701
Outstanding requests per worker:
54 58 54 55 52 52 43 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32083.6,      160418,     144326,      16092,      97796,      46530,   1.876451,   7.300000,  12.700000,  19.600000,   4.160298,   0.069000,  23.357000, 494.963894
Outstanding requests per worker:
1 1 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144092,      15915,     102770,      41322,   0.266370,   0.410100,   0.453100,   0.582100,   0.115184,   0.069000,   1.119000, 533.472892
Outstanding requests per worker:
1 1 1 1 2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144075,      15939,     106578,      37497,   0.284882,   0.420100,   0.462100,   0.669000,   0.126244,   0.068000,   1.465000, 561.486989
Outstanding requests per worker:
0 1 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144121,      15886,     108768,      35353,   0.310877,   0.446100,   0.521100,   1.300000,   0.171028,   0.068000,   1.766000, 578.168865
Outstanding requests per worker:
1 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144117,      15888,     110637,      33480,   0.320964,   0.454100,   0.534100,   1.300000,   0.171103,   0.068000,   1.941000, 592.739621
Outstanding requests per worker:
2 2 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144072,      15940,     111378,      32694,   0.340959,   0.464100,   0.554100,   1.800000,   0.233707,   0.072000,   2.338000, 599.616692
Outstanding requests per worker:
1 1 1 1 1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:08   0:00 /usr/lib/linux
memcache      9 86.6  0.0 131520 56384 pts/0    Sl+  12:08   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3798457270      instructions:u            #    0.60  insn per cycle         
        6320459649      cycles:u                                                    
          22316906      armv8_pmuv3_0/br_mis_pred/:u                                   
         633117221      armv8_pmuv3_0/br_pred/:u                                    

      37.310503872 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 27000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3003249152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290163.288588,       0.0,       53861,      48351,       5510,      28073,      20278,   4.653791,   6.800000,   8.000000,  17.400000,   2.751720,   0.000000,  62.958002, 390.295857
Outstanding requests per worker:
111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27025.0,      135125,     121542,      13583,      80205,      41337,   4.398934,   6.400000,   7.100000,   8.900000,   1.562998,   0.387000,  19.773001, 474.856362
Outstanding requests per worker:
131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.0,      135135,     121467,      13668,      85048,      36419,   5.442057,   8.000000,   8.800000,  11.200000,   2.017433,   0.368000,  21.486999, 517.369524
Outstanding requests per worker:
141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27024.4,      135122,     121504,      13618,      88029,      33475,   5.494451,   8.100000,   8.900000,  11.300000,   2.029979,   0.395000,  20.892000, 545.425607
Outstanding requests per worker:
161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.2,      135156,     121701,      13455,      90143,      31558,   5.552768,   8.200000,   9.000000,  11.500000,   2.077311,   0.433000,  21.840001, 563.271386
Outstanding requests per worker:
150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.2,      135156,     121771,      13385,      91540,      30231,   5.609177,   8.300000,   9.100000,  11.700000,   2.095797,   0.450000,  21.252001, 576.958479
Outstanding requests per worker:
133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27019.4,      135097,     121613,      13484,      92877,      28736,   5.638725,   8.300000,   9.200000,  11.700000,   2.109024,   0.416000,  28.531000, 590.017671
Outstanding requests per worker:
184 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:09   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:09   0:00 /usr/lib/linux
memcache     10 78.5  0.0 124352 54016 pts/0    Sl+  12:09   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3192906762      instructions:u            #    0.56  insn per cycle         
        5743558508      cycles:u                                                    
          22154613      armv8_pmuv3_0/br_mis_pred/:u                                   
         549914328      armv8_pmuv3_0/br_pred/:u                                    

      38.091422896 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 28000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 1024 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2986865152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290207.288632,       0.0,       56865,      51070,       5795,      29812,      21258,   8.226131,  12.200000,  15.600000,  29.000000,   4.838357,   0.000000, 111.846000, 391.702232
Outstanding requests per worker:
193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28564.6,      142823,     128452,      14371,      84926,      43526,   7.138929,  10.800000,  12.400000,  16.300000,   2.934912,   0.518000,  35.204999, 475.813892
Outstanding requests per worker:
242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28563.4,      142817,     128407,      14410,      90324,      38083,   9.615275,  14.600000,  16.800000,  21.700000,   4.028968,   0.428000,  44.465002, 522.143076
Outstanding requests per worker:
300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28577.0,      142885,     128536,      14349,      93426,      35110,   9.715151,  14.700000,  16.900000,  22.100000,   4.057329,   0.462000,  40.341999, 547.542299
Outstanding requests per worker:
280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28561.6,      142808,     128555,      14253,      95266,      33289,  10.108796,  15.400000,  18.000000,  23.700000,   4.360451,   0.459000,  48.082002, 564.132690
Outstanding requests per worker:
341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28581.6,      142908,     128786,      14122,      97206,      31580,  10.255972,  15.600000,  18.100000,  23.600000,   4.368514,   0.437000,  49.159002, 578.794481
Outstanding requests per worker:
304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.6,      142858,     128532,      14326,      98175,      30357,  10.410093,  15.900000,  18.400000,  24.200000,   4.465311,   0.441000,  47.791000, 589.967137
Outstanding requests per worker:
320 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:10   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:10   0:00 /usr/lib/linux
memcache      9 76.6  0.0 127424 56704 pts/0    Sl+  12:10   0:29 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3347151286      instructions:u            #    0.57  insn per cycle         
        5900872445      cycles:u                                                    
          21153197      armv8_pmuv3_0/br_mis_pred/:u                                   
         568883903      armv8_pmuv3_0/br_pred/:u                                    

      39.559783757 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 29000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3460559360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290250.288675,       0.0,       58459,      52494,       5965,      30964,      21530,  13.568347,  21.000000,  23.500000,  35.200000,   6.858085,   0.000000, 186.992005, 397.952071
Outstanding requests per worker:
272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29381.4,      146907,     132108,      14799,      87686,      44422,  10.059194,  15.700000,  18.400000,  25.300000,   4.569678,   0.534000,  58.839001, 479.638614
Outstanding requests per worker:
429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.6,      147053,     132237,      14816,      93150,      39087,  14.520318,  22.900000,  27.000000,  36.200000,   6.739189,   0.498000,  78.775004, 524.441548
Outstanding requests per worker:
452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29422.0,      147110,     132329,      14781,      96256,      36073,  14.422988,  22.700000,  26.800000,  35.700000,   6.616189,   0.478000,  65.889001, 550.244610
Outstanding requests per worker:
411 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29402.4,      147012,     132377,      14635,      98578,      33799,  14.733965,  23.200000,  27.400000,  36.900000,   6.841173,   0.585000,  73.909998, 568.614004
Outstanding requests per worker:
465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29418.6,      147093,     132477,      14616,     100517,      31960,  15.581778,  24.900000,  29.400000,  39.800000,   7.420331,   0.583000,  87.045997, 583.354311
Outstanding requests per worker:
441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29408.8,      147044,     132407,      14637,     101870,      30537,  15.409983,  24.500000,  29.000000,  39.000000,   7.277827,   0.448000,  83.453998, 595.901282
Outstanding requests per worker:
468 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:11   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:11   0:00 /usr/lib/linux
memcache      9 79.7  0.0 128448 60096 pts/0    Sl+  12:11   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3418640154      instructions:u            #    0.57  insn per cycle         
        5959609588      cycles:u                                                    
          21690760      armv8_pmuv3_0/br_mis_pred/:u                                   
         578373691      armv8_pmuv3_0/br_pred/:u                                    

      38.090675688 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 30000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2512318976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290293.288718,       0.0,       59401,      53347,       6054,      31526,      21821,  36.889656,  48.500000,  52.400000,  62.500000,  10.494879,   0.000000, 261.817008, 398.692691
Outstanding requests per worker:
1100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30382.2,      151911,     136595,      15316,      90680,      45915,  32.572304,  45.900000,  49.200000,  58.800000,  11.550283,   0.927000, 133.577004, 478.725356
Outstanding requests per worker:
722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.2,      151516,     136314,      15202,      96148,      40166,  24.914725,  42.400000,  51.400000,  71.800000,  13.707721,   0.735000, 155.772001, 524.047501
Outstanding requests per worker:
732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30298.0,      151490,     136296,      15194,      99482,      36814,  24.974091,  42.300000,  51.100000,  71.700000,  13.577808,   0.611000, 166.288003, 550.916043
Outstanding requests per worker:
769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30263.6,      151318,     136207,      15111,     101929,      34278,  27.212425,  46.700000,  56.800000,  80.200000,  15.348298,   0.518000, 177.134007, 571.874404
Outstanding requests per worker:
977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30334.0,      151670,     136579,      15091,     103946,      32633,  28.740429,  49.800000,  60.700000,  86.600000,  16.550122,   0.578000, 204.782993, 586.155192
Outstanding requests per worker:
831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30293.0,      151465,     136458,      15007,     105007,      31451,  28.514331,  49.200000,  59.900000,  84.500000,  16.152203,   0.603000, 184.526995, 596.313342
Outstanding requests per worker:
890 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:11   0:00 /usr/lib/linux
memcache      8 80.8  0.0 128448 60864 pts/0    Sl+  12:11   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  12:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3453872419      instructions:u            #    0.59  insn per cycle         
        5807145387      cycles:u                                                    
          21789561      armv8_pmuv3_0/br_mis_pred/:u                                   
         570284128      armv8_pmuv3_0/br_pred/:u                                    

      38.120518296 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 31000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 1024 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2778591744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290336.288761,       0.0,       57638,      51771,       5867,      30610,      21161,  94.392865, 172.300000, 211.400000, 293.300000,  57.751794,   0.000000, 547.652006, 398.657955
Outstanding requests per worker:
4763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31821.8,      159109,     143045,      16064,      95219,      47826, 134.601473, 263.600000, 331.400000, 476.400000,  95.861529,   2.760000, 756.347001, 479.860631
Outstanding requests per worker:
1921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31207.4,      156037,     140368,      15669,      99303,      41065,  60.465589, 116.500000, 146.500000, 213.300000,  43.276738,   1.374000, 596.599996, 527.705104
Outstanding requests per worker:
2146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31291.8,      156459,     140728,      15731,     103191,      37537,  60.626901, 117.900000, 148.600000, 217.500000,  44.132358,   1.202000, 568.892002, 554.429843
Outstanding requests per worker:
1953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31195.2,      155976,     140473,      15503,     105152,      35321,  66.872962, 130.200000, 163.500000, 243.700000,  49.243457,   1.336000, 585.601985, 571.440483
Outstanding requests per worker:
2237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31243.2,      156216,     140652,      15564,     106956,      33696,  77.637313, 154.500000, 193.000000, 281.400000,  57.887999,   1.595000, 554.013014, 585.720715
Outstanding requests per worker:
2268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31223.2,      156116,     140566,      15550,     108220,      32346,  74.400585, 145.800000, 183.100000, 271.000000,  54.713568,   1.878000, 470.326990, 595.905162
Outstanding requests per worker:
2427 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:12   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:12   0:00 /usr/lib/linux
memcache      9 79.0  0.0 130496 63552 pts/0    Sl+  12:12   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3523641076      instructions:u            #    0.63  insn per cycle         
        5626282976      cycles:u                                                    
          19794466      armv8_pmuv3_0/br_mis_pred/:u                                   
         575561155      armv8_pmuv3_0/br_pred/:u                                    

      39.391264442 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 1 threads, 32000 rps'
==> Bench: 65536 keys, 1024 conns, 1 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 65536 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 1'
Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2550657536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290379.288804,       0.0,       53888,      48367,       5521,      28228,      20139, 177.019917, 329.000000, 393.300000, 525.200000, 109.071356,   0.000000, 1020.009995, 393.639051
Outstanding requests per worker:
7763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29914.2,      149571,     134492,      15079,      89093,      45399, 346.551514, 654.100000, 774.600000, 1024.800000, 221.132732,  21.011000, 1553.539991, 478.359702
Outstanding requests per worker:
13231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30486.0,      152430,     137124,      15306,      96833,      40291, 474.507145, 928.600000, 1113.000000, 1442.000000, 324.767891,  16.051000, 2133.496046, 524.397028
Outstanding requests per worker:
16570 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30413.4,      152067,     136770,      15297,      99704,      37066, 576.808683, 1125.900000, 1354.900000, 1722.500000, 398.757250,  16.093999, 2872.378111, 550.572889
Outstanding requests per worker:
19543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30365.0,      151825,     136724,      15101,     101972,      34752, 670.828207, 1340.400000, 1567.900000, 2005.900000, 474.151683,  11.345000, 3474.945068, 568.162349
Outstanding requests per worker:
22142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30392.0,      151960,     136848,      15112,     104112,      32736, 749.220855, 1475.000000, 1747.700000, 2240.200000, 517.764826,  14.473000, 2985.877037, 584.910558
Outstanding requests per worker:
24250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30409.6,      152048,     136978,      15070,     105458,      31520, 811.805896, 1629.300000, 1927.000000, 2422.000000, 567.075778,  14.290000, 3066.142082, 594.861182
Outstanding requests per worker:
26108 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:13   0:00 /usr/lib/linux
memcache     10 81.9  0.0 130496 63936 pts/0    Sl+  12:13   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  12:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3536294577      instructions:u            #    0.65  insn per cycle         
        5480936531      cycles:u                                                    
          21624034      armv8_pmuv3_0/br_mis_pred/:u                                   
         564402689      armv8_pmuv3_0/br_pred/:u                                    

      38.189164244 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 27000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2600661504
starting receive base loop
Created 1024 connections total
Creating worker on tid 2691101184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290422.288847,       0.0,       69302,      62308,       6994,      37083,      25225,   0.665475,   1.100000,   1.200000,   1.400000,   0.452981,   0.000000,  34.279998, 404.343632
Outstanding requests per worker:
16 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121711,      13438,      81070,      40641,   0.700170,   1.200000,   1.300000,   1.500000,   0.284031,   0.246000,   2.130000, 481.257676
Outstanding requests per worker:
16 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121621,      13520,      85202,      36419,   0.687343,   1.200000,   1.400000,   1.500000,   0.301816,   0.219000,   2.353000, 519.569211
Outstanding requests per worker:
18 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121668,      13472,      88450,      33218,   0.691516,   1.200000,   1.400000,   1.500000,   0.305337,   0.227000,   2.738000, 547.769512
Outstanding requests per worker:
18 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121559,      13589,      90205,      31354,   0.692192,   1.200000,   1.400000,   1.500000,   0.303882,   0.212000,   2.435000, 564.953767
Outstanding requests per worker:
14 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121575,      13573,      91786,      29789,   0.693920,   1.200000,   1.400000,   1.500000,   0.303562,   0.238000,   2.255000, 578.779272
Outstanding requests per worker:
13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.8,      135139,     121664,      13475,      93095,      28569,   0.694827,   1.200000,   1.400000,   1.500000,   0.304220,   0.225000,   2.306000, 590.202385
Outstanding requests per worker:
15 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:14   0:00 /usr/lib/linux
memcache     10 77.9  0.0 126400 55616 pts/0    Sl+  12:14   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3228543833      instructions:u            #    0.56  insn per cycle         
        5760627578      cycles:u                                                    
          21379546      armv8_pmuv3_0/br_mis_pred/:u                                   
         551500332      armv8_pmuv3_0/br_pred/:u                                    

      38.260423752 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 28000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2957439488
starting receive base loop
Created 1024 connections total
Creating worker on tid 3042767360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290466.288891,       0.0,       71942,      64705,       7237,      38389,      26316,   0.751609,   1.200000,   1.300000,   1.500000,   0.552622,   0.000000,  42.314000, 403.024079
Outstanding requests per worker:
18 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126859,      14002,      84921,      41938,   0.768060,   1.200000,   1.300000,   1.500000,   0.291021,   0.210000,   2.195000, 484.122104
Outstanding requests per worker:
20 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126764,      14096,      89725,      37039,   0.741029,   1.300000,   1.400000,   1.600000,   0.314187,   0.237000,   2.359000, 525.906622
Outstanding requests per worker:
17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.6,      140868,     126701,      14167,      92437,      34264,   0.741874,   1.300000,   1.400000,   1.600000,   0.312499,   0.220000,   2.528000, 549.985217
Outstanding requests per worker:
16 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28169.6,      140848,     126857,      13991,      94316,      32541,   0.743926,   1.300000,   1.400000,   1.600000,   0.313578,   0.209000,   2.239000, 567.864249
Outstanding requests per worker:
17 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.4,      140862,     126905,      13957,      96027,      30878,   0.741796,   1.300000,   1.400000,   1.500000,   0.311351,   0.246000,   2.238000, 581.745085
Outstanding requests per worker:
13 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.4,      140867,     126689,      14178,      97382,      29307,   0.748104,   1.300000,   1.400000,   1.600000,   0.314519,   0.208000,   2.302000, 594.132924
Outstanding requests per worker:
10 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:14   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:14   0:00 /usr/lib/linux
memcache     10 77.8  0.0 128448 60864 pts/0    Sl+  12:14   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3343200972      instructions:u            #    0.57  insn per cycle         
        5913507701      cycles:u                                                    
          21710217      armv8_pmuv3_0/br_mis_pred/:u                                   
         566923226      armv8_pmuv3_0/br_pred/:u                                    

      39.400813004 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 29000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2450715136
starting receive base loop
Created 1024 connections total
Creating worker on tid 2540761600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290509.288934,       0.0,       74961,      67436,       7525,      40262,      27174,   2.689976,   7.500000,   8.700000,   9.400000,   2.760255,   0.000000,  72.810002, 406.170502
Outstanding requests per worker:
16 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.8,      147059,     132281,      14778,      88239,      44042,   0.925774,   1.400000,   1.500000,   1.700000,   0.322597,   0.251000,   2.376000, 482.878100
Outstanding requests per worker:
20 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132597,      14477,      93823,      38774,   0.818504,   1.400000,   1.500000,   1.600000,   0.328826,   0.218000,   2.573000, 526.190517
Outstanding requests per worker:
21 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29416.0,      147080,     132513,      14567,      96591,      35922,   0.819385,   1.400000,   1.500000,   1.600000,   0.325603,   0.245000,   2.701000, 551.721084
Outstanding requests per worker:
18 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132607,      14460,      99057,      33550,   0.827751,   1.400000,   1.500000,   1.700000,   0.334380,   0.247000,   2.799000, 570.611423
Outstanding requests per worker:
16 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132158,      14908,     100252,      31906,   0.830210,   1.400000,   1.500000,   1.600000,   0.330745,   0.244000,   2.839000, 583.457740
Outstanding requests per worker:
17 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132395,      14678,     101521,      30874,   0.826633,   1.400000,   1.500000,   1.600000,   0.324593,   0.208000,   2.580000, 594.152476
Outstanding requests per worker:
16 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:15   0:00 /usr/lib/linux
memcache      8 81.2  0.0 128448 59392 pts/0    Sl+  12:15   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3446095651      instructions:u            #    0.58  insn per cycle         
        5947828523      cycles:u                                                    
          21509304      armv8_pmuv3_0/br_mis_pred/:u                                   
         580228271      armv8_pmuv3_0/br_pred/:u                                    

      38.030884905 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 30000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2465395200
starting receive base loop
Created 1024 connections total
Creating worker on tid 2556883456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290551.288976,       0.0,       76636,      68994,       7642,      41359,      27635,  14.622408,  30.400000,  31.300000,  32.600000,  11.581671,   0.000000, 132.976994, 409.136113
Outstanding requests per worker:
324 317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30424.4,      152122,     136853,      15269,      91829,      45024,  12.906580,  31.800000,  33.300000,  35.000000,  12.067991,   0.259000,  37.709001, 486.659774
Outstanding requests per worker:
22 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.8,      151519,     136190,      15329,      96462,      39728,   0.907058,   1.400000,   1.500000,   1.700000,   0.322716,   0.244000,   2.360000, 528.197849
Outstanding requests per worker:
23 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136298,      15232,      99599,      36699,   0.912947,   1.400000,   1.500000,   1.700000,   0.326590,   0.248000,   2.408000, 552.017821
Outstanding requests per worker:
20 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.4,      151522,     136510,      15012,     101952,      34558,   0.922580,   1.400000,   1.500000,   1.700000,   0.332287,   0.254000,   2.783000, 569.195546
Outstanding requests per worker:
22 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136370,      15155,     103632,      32738,   0.935716,   1.400000,   1.500000,   1.800000,   0.336580,   0.248000,   2.940000, 584.767684
Outstanding requests per worker:
23 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.4,      151532,     136392,      15140,     104674,      31718,   0.918569,   1.400000,   1.500000,   1.700000,   0.316733,   0.215000,   2.569000, 594.732631
Outstanding requests per worker:
19 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      9 82.5  0.0 130496 60032 pts/0    Sl+  12:16   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3536429145      instructions:u            #    0.60  insn per cycle         
        5925505259      cycles:u                                                    
          20993636      armv8_pmuv3_0/br_mis_pred/:u                                   
         586035013      armv8_pmuv3_0/br_pred/:u                                    

      38.300150627 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 31000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3133600256
starting receive base loop
Created 1024 connections total
Creating worker on tid 3219911168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290595.289020,       0.0,       79106,      71147,       7959,      42281,      28866,  16.885497,  36.300000,  37.400000,  40.900000,  13.613706,   0.000000,  45.892999, 404.508412
Outstanding requests per worker:
371 379 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31391.4,      156957,     141277,      15680,      94454,      46823,  15.140296,  36.700000,  38.900000,  41.300000,  13.414909,   0.285000,  44.408999, 485.204159
Outstanding requests per worker:
30 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140628,      15628,      99723,      40905,   1.259676,   2.000000,   2.100000,   2.400000,   0.522519,   0.279000,   3.590000, 527.796719
Outstanding requests per worker:
33 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.2,      156266,     140789,      15477,     103134,      37655,   1.256233,   2.000000,   2.100000,   2.400000,   0.510636,   0.256000,   3.657000, 554.450689
Outstanding requests per worker:
29 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31255.8,      156279,     140763,      15516,     105440,      35323,   1.287734,   2.000000,   2.200000,   2.500000,   0.526712,   0.263000,   3.543000, 572.671306
Outstanding requests per worker:
21 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31254.2,      156271,     140822,      15449,     107374,      33448,   1.307593,   2.000000,   2.200000,   2.500000,   0.514175,   0.283000,   3.612000, 588.211387
Outstanding requests per worker:
17 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.0,      156255,     140493,      15762,     108624,      31869,   1.293971,   2.000000,   2.100000,   2.300000,   0.497560,   0.268000,   3.601000, 599.224744
Outstanding requests per worker:
19 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      8 83.3  0.0 129472 59200 pts/0    Sl+  12:16   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3616365552      instructions:u            #    0.61  insn per cycle         
        5944584259      cycles:u                                                    
          21242705      armv8_pmuv3_0/br_mis_pred/:u                                   
         595752252      armv8_pmuv3_0/br_pred/:u                                    

      38.270509428 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 2 threads, 32000 rps'
==> Bench: 65536 keys, 1024 conns, 2 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 65536 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 2'
Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2324492800
starting receive base loop
Created 1024 connections total
Creating worker on tid 2414604800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290638.289063,       0.0,       81352,      73111,       8241,      43761,      29350,  20.093263,  45.100000,  47.100000,  48.900000,  16.717495,   0.000000, 253.825009, 407.790086
Outstanding requests per worker:
451 466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32375.6,      161878,     145676,      16202,      98076,      47600,  21.737266,  47.200000,  51.900000,  56.800000,  14.823391,   0.748000,  61.873998, 488.903409
Outstanding requests per worker:
184 159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.8,      161299,     145274,      16025,     103476,      41798,  10.268996,  13.600000,  14.000000,  14.800000,   3.655570,   0.629000,  16.154001, 532.559722
Outstanding requests per worker:
167 175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32253.8,      161269,     145393,      15876,     107223,      38170,  11.039862,  14.700000,  15.000000,  16.300000,   4.090993,   0.576000,  18.528000, 558.815191
Outstanding requests per worker:
189 189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.4,      161297,     145259,      16038,     109176,      36083,  11.420824,  15.400000,  16.000000,  17.600000,   4.317824,   0.469000,  18.807000, 575.304504
Outstanding requests per worker:
186 193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32252.4,      161262,     145222,      16040,     110678,      34544,  12.024359,  16.200000,  16.800000,  18.200000,   4.621951,   0.539000,  20.048000, 587.686907
Outstanding requests per worker:
214 203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32256.8,      161284,     145225,      16059,     112401,      32824,  12.126981,  16.400000,  16.800000,  17.600000,   4.690750,   0.646000,  18.877000, 599.560227
Outstanding requests per worker:
217 216 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:17   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:17   0:00 /usr/lib/linux
memcache     10 84.2  0.0 130496 61888 pts/0    Sl+  12:17   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3754290813      instructions:u            #    0.66  insn per cycle         
        5710875103      cycles:u                                                    
          22106308      armv8_pmuv3_0/br_mis_pred/:u                                   
         601774803      armv8_pmuv3_0/br_pred/:u                                    

      38.230356510 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 27000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 784200192
starting receive base loop
num_worker_connections 256
Creating worker on tid 2934698496
starting receive base loop
num_worker_connections 256
Creating worker on tid 795275776
starting receive base loop
Created 1024 connections total
Creating worker on tid 2950820352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290682.289107,       0.0,       77501,      69624,       7877,      41576,      28048,   0.489644,   0.804100,   0.925100,   1.900000,   2.832533,   0.000000, 137.815997, 407.483914
Outstanding requests per worker:
5 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121575,      13572,      81479,      40096,   0.413478,   0.825100,   0.929100,   1.100000,   0.257012,   0.105000,   1.962000, 486.127822
Outstanding requests per worker:
4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121542,      13606,      85730,      35812,   0.396756,   0.863100,   0.970100,   1.200000,   0.275296,   0.104000,   2.065000, 524.731969
Outstanding requests per worker:
5 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27033.0,      135165,     121691,      13474,      88566,      33125,   0.395449,   0.853100,   0.964100,   1.200000,   0.272604,   0.103000,   1.954000, 549.085216
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121744,      13399,      90637,      31107,   0.394902,   0.853100,   0.960100,   1.100000,   0.271782,   0.105000,   1.866000, 567.581474
Outstanding requests per worker:
2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121475,      13674,      91885,      29590,   0.398040,   0.854100,   0.965100,   1.200000,   0.273364,   0.102000,   1.881000, 580.314320
Outstanding requests per worker:
2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121654,      13496,      93392,      28262,   0.397298,   0.854100,   0.961100,   1.100000,   0.270946,   0.105000,   1.838000, 593.403563
Outstanding requests per worker:
1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:18   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:18   0:00 /usr/lib/linux
memcache      9 78.5  0.0 126400 57344 pts/0    Sl+  12:18   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3282432216      instructions:u            #    0.54  insn per cycle         
        6090222601      cycles:u                                                    
          21890834      armv8_pmuv3_0/br_mis_pred/:u                                   
         563103849      armv8_pmuv3_0/br_pred/:u                                    

      39.560024319 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 28000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 780202496
starting receive base loop
num_worker_connections 256
Creating worker on tid 2934698496
starting receive base loop
num_worker_connections 256
Creating worker on tid 795275776
starting receive base loop
Created 1024 connections total
Creating worker on tid 2950820352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290726.289151,       0.0,       81119,      72817,       8302,      43898,      28919,   0.550540,   0.911100,   1.100000,   2.400000,   1.911752,   0.000000, 108.295001, 410.571062
Outstanding requests per worker:
7 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.6,      140863,     126855,      14008,      85126,      41729,   0.490246,   0.904100,   0.971100,   1.200000,   0.275759,   0.106000,   1.950000, 486.115999
Outstanding requests per worker:
5 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126787,      14067,      89241,      37546,   0.442908,   0.916100,   1.100000,   1.200000,   0.290174,   0.102000,   2.046000, 522.506503
Outstanding requests per worker:
4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126782,      14070,      92045,      34737,   0.445640,   0.917100,   1.100000,   1.200000,   0.289993,   0.102000,   1.938000, 548.804554
Outstanding requests per worker:
5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126792,      14059,      94359,      32433,   0.450723,   0.921100,   1.100000,   1.200000,   0.291133,   0.105000,   1.917000, 568.750757
Outstanding requests per worker:
6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126605,      14254,      95489,      31116,   0.452662,   0.919100,   1.100000,   1.200000,   0.292325,   0.103000,   2.068000, 578.345215
Outstanding requests per worker:
4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126965,      13889,      97691,      29274,   0.451014,   0.918100,   1.100000,   1.200000,   0.289842,   0.106000,   1.898000, 593.666010
Outstanding requests per worker:
4 4 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:19   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:19   0:00 /usr/lib/linux
memcache      9 80.4  0.0 128448 57280 pts/0    Sl+  12:19   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  12:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3393049917      instructions:u            #    0.55  insn per cycle         
        6179008418      cycles:u                                                    
          21664012      armv8_pmuv3_0/br_mis_pred/:u                                   
         579168785      armv8_pmuv3_0/br_pred/:u                                    

      39.580118000 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 29000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 962261504
starting receive base loop
num_worker_connections 256
Creating worker on tid 3111842304
starting receive base loop
num_worker_connections 256
Creating worker on tid 972419584
starting receive base loop
Created 1024 connections total
Creating worker on tid 3127964160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290769.289194,       0.0,       83774,      75382,       8392,      45179,      30203,   3.819519,   9.400000,  10.600000,  11.600000,   4.125235,   0.000000, 128.029004, 410.150248
Outstanding requests per worker:
11 12 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29202.6,      146013,     131521,      14492,      88371,      43150,   0.708182,   1.300000,   1.500000,   2.000000,   0.405852,   0.107000,   2.563000, 488.357563
Outstanding requests per worker:
7 6 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131372,      14624,      93339,      38033,   0.500354,   0.955100,   1.100000,   1.200000,   0.296141,   0.103000,   2.077000, 529.707982
Outstanding requests per worker:
7 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131470,      14523,      96145,      35325,   0.499587,   0.948100,   1.100000,   1.200000,   0.294480,   0.106000,   1.948000, 553.688385
Outstanding requests per worker:
8 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131539,      14458,      98392,      33147,   0.505291,   0.953100,   1.100000,   1.200000,   0.295279,   0.102000,   1.970000, 572.294209
Outstanding requests per worker:
6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131388,      14606,     100295,      31093,   0.505657,   0.946100,   1.100000,   1.200000,   0.294974,   0.103000,   1.973000, 588.689660
Outstanding requests per worker:
6 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.6,      146003,     131299,      14704,     100986,      30313,   0.507151,   0.950100,   1.100000,   1.200000,   0.293256,   0.099000,   2.092000, 595.321777
Outstanding requests per worker:
4 5 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:19   0:00 /usr/lib/linux
memcache      8 83.1  0.0 128448 57536 pts/0    Sl+  12:19   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3470117867      instructions:u            #    0.57  insn per cycle         
        6056938379      cycles:u                                                    
          21810637      armv8_pmuv3_0/br_mis_pred/:u                                   
         584836730      armv8_pmuv3_0/br_pred/:u                                    

      38.290243577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 30000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 548008448
starting receive base loop
num_worker_connections 256
Creating worker on tid 2698506752
starting receive base loop
num_worker_connections 256
Creating worker on tid 559084032
starting receive base loop
Created 1024 connections total
Creating worker on tid 2709189120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290812.289237,       0.0,       87805,      78952,       8853,      47748,      31204,  12.640844,  30.800000,  32.000000,  33.400000,  12.448444,   0.000000, 221.404001, 414.591081
Outstanding requests per worker:
167 155 172 147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30197.8,      150989,     135844,      15145,      91656,      44188,  11.023020,  30.200000,  32.700000,  34.900000,  11.579719,   0.105000,  37.154000, 491.349121
Outstanding requests per worker:
9 9 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.8,      150404,     135133,      15271,      96043,      39090,   0.578388,   0.998100,   1.100000,   1.300000,   0.296532,   0.107000,   2.072000, 530.456003
Outstanding requests per worker:
4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135360,      15026,      99581,      35779,   0.586736,   1.100000,   1.100000,   1.300000,   0.295678,   0.103000,   1.991000, 558.042184
Outstanding requests per worker:
6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135429,      14965,     101678,      33751,   0.586401,   0.999100,   1.100000,   1.200000,   0.288240,   0.106000,   2.163000, 573.108655
Outstanding requests per worker:
6 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135408,      14980,     102976,      32432,   0.598672,   1.100000,   1.100000,   1.400000,   0.307600,   0.107000,   2.316000, 584.225378
Outstanding requests per worker:
5 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135331,      15053,     104481,      30850,   0.605163,   1.100000,   1.200000,   1.500000,   0.311611,   0.103000,   2.415000, 597.493767
Outstanding requests per worker:
5 6 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:20   0:00 /usr/lib/linux
memcache      8 81.9  0.0 129472 62208 pts/0    Sl+  12:20   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  12:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3545569671      instructions:u            #    0.59  insn per cycle         
        5999281027      cycles:u                                                    
          21255935      armv8_pmuv3_0/br_mis_pred/:u                                   
         590329116      armv8_pmuv3_0/br_pred/:u                                    

      38.450579984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 31000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 324596224
starting receive base loop
num_worker_connections 256
Creating worker on tid 2472997376
starting receive base loop
num_worker_connections 256
Creating worker on tid 333574656
starting receive base loop
Created 1024 connections total
Creating worker on tid 2489119232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290855.289280,       0.0,       89377,      80425,       8952,      48495,      31930,  15.144069,  37.600000,  38.900000,  40.300000,  15.249359,   0.000000, 359.768987, 412.916556
Outstanding requests per worker:
170 184 182 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31148.8,      155744,     140515,      15229,      94672,      45843,  14.016483,  35.200000,  38.800000,  41.500000,  12.976975,   0.119000,  43.823000, 490.182671
Outstanding requests per worker:
9 9 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139512,      15533,      99033,      40479,   0.873979,   1.400000,   1.600000,   2.200000,   0.371690,   0.122000,   2.497000, 530.284183
Outstanding requests per worker:
13 12 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31005.6,      155028,     139356,      15672,     102394,      36962,   0.929317,   1.400000,   1.500000,   2.400000,   0.365270,   0.123000,   3.545000, 558.004442
Outstanding requests per worker:
20 18 19 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31017.2,      155086,     139376,      15710,     104539,      34837,   1.036660,   1.500000,   1.700000,   2.300000,   0.377435,   0.126000,   2.920000, 574.347477
Outstanding requests per worker:
10 9 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31014.0,      155070,     139663,      15407,     106777,      32886,   1.318834,   2.200000,   2.700000,   3.200000,   0.590068,   0.160000,   3.862000, 589.198915
Outstanding requests per worker:
9 8 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.0,      155060,     139603,      15457,     108026,      31577,   1.195849,   1.700000,   1.900000,   2.100000,   0.369604,   0.117000,   2.970000, 599.677872
Outstanding requests per worker:
9 7 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:21   0:00 /usr/lib/linux
memcache      8 84.5  0.0 129472 59392 pts/0    Sl+  12:21   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3596486395      instructions:u            #    0.61  insn per cycle         
        5861194425      cycles:u                                                    
          20291867      armv8_pmuv3_0/br_mis_pred/:u                                   
         591573447      armv8_pmuv3_0/br_pred/:u                                    

      38.480706677 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 4 threads, 32000 rps'
==> Bench: 65536 keys, 1024 conns, 4 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 65536 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 4'
Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 861729280
starting receive base loop
num_worker_connections 256
Creating worker on tid 3009868288
starting receive base loop
num_worker_connections 256
Creating worker on tid 870445568
starting receive base loop
Created 1024 connections total
Creating worker on tid 3025990144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290899.289324,       0.0,       90941,      81870,       9071,      49842,      32028,  18.184951,  46.600000,  48.700000,  50.200000,  19.077920,   0.000000, 571.847022, 419.289838
Outstanding requests per worker:
247 232 239 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32126.2,      160631,     144521,      16110,      97223,      47298,  19.696246,  42.500000,  47.200000,  51.300000,  13.369856,   0.291000,  55.185001, 490.289370
Outstanding requests per worker:
77 76 80 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.8,      160019,     143895,      16124,     102977,      40918,   9.370857,  12.200000,  12.600000,  13.300000,   3.457530,   0.291000,  14.586000, 535.760694
Outstanding requests per worker:
78 77 76 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.0,      159985,     143905,      16080,     106078,      37827,  10.191968,  13.700000,  14.100000,  14.800000,   3.934559,   0.293000,  16.101999, 560.409944
Outstanding requests per worker:
80 81 90 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.8,      160024,     144052,      15972,     108270,      35782,  10.442305,  14.200000,  14.700000,  15.800000,   4.091485,   0.294000,  17.751001, 576.402688
Outstanding requests per worker:
80 83 76 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.0,      159985,     144015,      15970,     110279,      33736,  10.812462,  14.800000,  15.400000,  17.700000,   4.342924,   0.296000,  18.798999, 591.732382
Outstanding requests per worker:
88 85 92 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32006.0,      160030,     144002,      16028,     111536,      32466,  10.949243,  14.800000,  15.100000,  15.800000,   4.346750,   0.302000,  16.631000, 599.840037
Outstanding requests per worker:
94 85 84 83 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:21   0:00 /usr/lib/linux
memcache      8 85.5  0.0 131520 61568 pts/0    Sl+  12:21   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  12:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3765612662      instructions:u            #    0.66  insn per cycle         
        5738156350      cycles:u                                                    
          22036313      armv8_pmuv3_0/br_mis_pred/:u                                   
         604135053      armv8_pmuv3_0/br_pred/:u                                    

      38.209237733 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 27000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 27000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 65536
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1151857152
starting receive base loop
num_worker_connections 128
Creating worker on tid 39318016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3220238848
starting receive base loop
num_worker_connections 128
Creating worker on tid 2111631872
starting receive base loop
num_worker_connections 128
Creating worker on tid 997585408
starting receive base loop
num_worker_connections 128
Creating worker on tid 4183945728
starting receive base loop
num_worker_connections 128
Creating worker on tid 3069899264
starting receive base loop
Created 1024 connections total
Creating worker on tid 1961292288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290943.289368,       0.0,       82629,      74318,       8311,      44693,      29625,   0.424206,   0.722100,   0.827100,   1.500000,   2.811532,   0.000000, 124.948002, 410.339178
Outstanding requests per worker:
1 1 2 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121641,      13507,      81628,      40013,   0.344239,   0.757100,   0.843100,   0.983100,   0.260155,   0.076000,   1.699000, 486.165117
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121662,      13491,      85979,      35683,   0.326348,   0.790100,   0.926100,   1.100000,   0.276939,   0.075000,   1.649000, 525.568962
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121667,      13485,      88420,      33247,   0.325993,   0.787100,   0.920100,   1.100000,   0.275689,   0.075000,   1.748000, 549.451018
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121696,      13448,      90263,      31433,   0.327305,   0.785100,   0.923100,   1.100000,   0.276098,   0.075000,   1.871000, 565.778744
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121652,      13495,      92097,      29555,   0.331052,   0.792100,   0.926100,   1.100000,   0.278619,   0.076000,   1.801000, 580.873985
Outstanding requests per worker:
0 0 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121626,      13524,      93002,      28624,   0.326788,   0.785100,   0.919100,   1.100000,   0.274952,   0.075000,   1.860000, 590.802608
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:22   0:00 /usr/lib/linux
memcache      8 79.3  0.0 126400 55168 pts/0    Sl+  12:22   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  12:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3293249129      instructions:u            #    0.56  insn per cycle         
        5920775675      cycles:u                                                    
          22244675      armv8_pmuv3_0/br_mis_pred/:u                                   
         565887520      armv8_pmuv3_0/br_pred/:u                                    

      39.530650723 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 28000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 28000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2144662016
starting receive base loop
num_worker_connections 128
Creating worker on tid 1029829120
starting receive base loop
num_worker_connections 128
Creating worker on tid 4210749952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3102142976
starting receive base loop
num_worker_connections 128
Creating worker on tid 1993536000
starting receive base loop
num_worker_connections 128
Creating worker on tid 879489536
starting receive base loop
num_worker_connections 128
Creating worker on tid 4065849856
starting receive base loop
Created 1024 connections total
Creating worker on tid 2951803392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575290986.289411,       0.0,       87917,      79127,       8790,      47607,      31520,   0.508673,   0.795100,   0.932100,   2.100000,   2.983583,   0.000000, 134.877995, 411.601388
Outstanding requests per worker:
2 3 2 3 3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126457,      13906,      84895,      41562,   0.405661,   0.805100,   0.914100,   1.100000,   0.272963,   0.077000,   1.975000, 487.587322
Outstanding requests per worker:
2 2 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28075.4,      140377,     126249,      14128,      89351,      36898,   0.365736,   0.823100,   0.937100,   1.100000,   0.287839,   0.076000,   1.894000, 526.747285
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126269,      14090,      92282,      33987,   0.367897,   0.821100,   0.935100,   1.100000,   0.287211,   0.077000,   1.782000, 552.921873
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.2,      140356,     126404,      13952,      93945,      32459,   0.369177,   0.821100,   0.933100,   1.100000,   0.288010,   0.075000,   2.029000, 566.638421
Outstanding requests per worker:
0 0 0 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.8,      140364,     126342,      14022,      95735,      30607,   0.370841,   0.820100,   0.934100,   1.100000,   0.287612,   0.075000,   1.826000, 582.932691
Outstanding requests per worker:
1 0 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126277,      14084,      96835,      29442,   0.369684,   0.819100,   0.932100,   1.100000,   0.284239,   0.076000,   1.918000, 592.267499
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:23   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:23   0:00 /usr/lib/linux
memcache      9 82.8  0.0 127424 57472 pts/0    Sl+  12:23   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3382590836      instructions:u            #    0.56  insn per cycle         
        6063885653      cycles:u                                                    
          23231780      armv8_pmuv3_0/br_mis_pred/:u                                   
         571850465      armv8_pmuv3_0/br_pred/:u                                    

      38.569550966 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 29000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 29000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1383789056
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
num_worker_connections 128
Creating worker on tid 2347823616
starting receive base loop
num_worker_connections 128
Creating worker on tid 1239216640
starting receive base loop
num_worker_connections 128
Creating worker on tid 125170176
starting receive base loop
num_worker_connections 128
Creating worker on tid 3311530496
starting receive base loop
Created 1024 connections total
Creating worker on tid 2197484032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291029.289454,       0.0,       89374,      80427,       8947,      48581,      31846,   8.782464,  22.200000,  24.100000,  25.300000,   9.549836,   0.000000, 225.461006, 413.459274
Outstanding requests per worker:
60 57 61 69 69 66 64 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29189.4,      145947,     131360,      14587,      88452,      42908,   7.884635,  23.600000,  25.500000,  26.900000,   9.195201,   0.077000,  28.960001, 489.100190
Outstanding requests per worker:
2 1 1 2 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.8,      145469,     130831,      14638,      92703,      38128,   0.432314,   0.896100,   0.953100,   1.100000,   0.294393,   0.075000,   1.975000, 527.656794
Outstanding requests per worker:
2 1 2 1 2 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     130763,      14698,      95238,      35525,   0.434817,   0.896100,   0.955100,   1.100000,   0.293057,   0.074000,   2.083000, 549.805641
Outstanding requests per worker:
2 1 2 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     131203,      14262,      97920,      33283,   0.437911,   0.895100,   0.952100,   1.100000,   0.294116,   0.076000,   1.936000, 568.343590
Outstanding requests per worker:
2 3 2 2 1 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.2,      145471,     130896,      14575,      99263,      31633,   0.447141,   0.900100,   0.964100,   1.200000,   0.298413,   0.075000,   1.854000, 583.641807
Outstanding requests per worker:
1 0 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29091.8,      145459,     130941,      14518,     100704,      30237,   0.437187,   0.890100,   0.944100,   1.100000,   0.287280,   0.075000,   1.880000, 594.712466
Outstanding requests per worker:
2 1 2 1 2 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:24   0:00 /usr/lib/linux
memcache      8 83.7  0.0 128448 60288 pts/0    Sl+  12:24   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3459874256      instructions:u            #    0.59  insn per cycle         
        5907932414      cycles:u                                                    
          21734116      armv8_pmuv3_0/br_mis_pred/:u                                   
         579229712      armv8_pmuv3_0/br_pred/:u                                    

      38.301044954 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1534456320
starting receive base loop
num_worker_connections 128
Creating worker on tid 425849344
starting receive base loop
num_worker_connections 128
Creating worker on tid 3606770176
starting receive base loop
num_worker_connections 128
Creating worker on tid 2498163200
starting receive base loop
num_worker_connections 128
Creating worker on tid 1389556224
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
Created 1024 connections total
Creating worker on tid 2347823616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291072.289497,       0.0,       93544,      84093,       9451,      50961,      33132,  12.509614,  32.000000,  33.500000,  35.700000,  13.921663,   0.000000, 362.204999, 415.863306
Outstanding requests per worker:
71 77 87 77 77 82 82 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30201.6,      151008,     136211,      14797,      91905,      44306,  11.145320,  29.700000,  31.800000,  33.800000,  11.372539,   0.077000,  35.220999, 491.021437
Outstanding requests per worker:
2 2 2 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.4,      150402,     135272,      15130,      96432,      38840,   0.532418,   0.935100,   1.100000,   1.200000,   0.293753,   0.075000,   1.964000, 532.899329
Outstanding requests per worker:
2 2 1 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135446,      14942,      99552,      35894,   0.551209,   0.951100,   1.100000,   1.300000,   0.307028,   0.076000,   2.161000, 556.744466
Outstanding requests per worker:
1 1 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135391,      14993,     101375,      34016,   0.545641,   0.940100,   1.100000,   1.200000,   0.296067,   0.076000,   2.049000, 571.594759
Outstanding requests per worker:
1 1 2 2 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.2,      150396,     135264,      15132,     103039,      32225,   0.557053,   0.949100,   1.100000,   1.300000,   0.302131,   0.077000,   2.168000, 587.579415
Outstanding requests per worker:
1 2 1 1 2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135217,      15175,     104123,      31094,   0.545290,   0.934100,   1.100000,   1.200000,   0.282418,   0.076000,   1.988000, 595.864751
Outstanding requests per worker:
2 2 2 2 1 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:24   0:00 /usr/lib/linux
memcache      8 82.3  0.0 130496 60480 pts/0    Sl+  12:24   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3550646130      instructions:u            #    0.59  insn per cycle         
        5983049250      cycles:u                                                    
          20678254      armv8_pmuv3_0/br_mis_pred/:u                                   
         587865301      armv8_pmuv3_0/br_pred/:u                                    

      38.449443732 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 31000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 31000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1317597696
starting receive base loop
num_worker_connections 128
Creating worker on tid 208400896
starting receive base loop
num_worker_connections 128
Creating worker on tid 3394761216
starting receive base loop
num_worker_connections 128
Creating worker on tid 2280714752
starting receive base loop
num_worker_connections 128
Creating worker on tid 1172107776
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2130375168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291116.289541,       0.0,       93716,      84357,       9359,      51251,      33106,  24.399852,  44.100000,  50.700000, 357.900000,  88.946294,   0.000000, 1766.975045, 417.484026
Outstanding requests per worker:
119 100 100 108 98 119 118 111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31156.2,      155781,     140344,      15437,      95002,      45342,  17.306745,  38.600000,  42.200000,  45.100000,  12.733085,   0.144000,  50.436001, 494.434739
Outstanding requests per worker:
16 19 20 18 19 19 18 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.2,      155061,     139536,      15525,      99421,      40115,   4.027145,   5.200000,   5.500000,   6.400000,   1.148727,   0.144000,   7.093000, 532.635026
Outstanding requests per worker:
16 18 18 17 18 17 19 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31003.0,      155015,     139451,      15564,     102495,      36956,   5.296149,   6.800000,   7.100000,   8.000000,   1.624808,   0.148000,   8.986000, 558.116371
Outstanding requests per worker:
23 25 24 20 21 21 19 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31007.8,      155039,     139506,      15533,     104883,      34623,   6.187189,   8.000000,   8.300000,   8.800000,   1.995777,   0.145000,   9.674000, 575.279916
Outstanding requests per worker:
24 26 26 21 23 26 24 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139494,      15558,     106478,      33016,   6.913110,   9.300000,  10.000000,  11.000000,   2.389541,   0.142000,  11.961000, 589.582556
Outstanding requests per worker:
27 25 27 24 22 26 22 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31004.4,      155022,     139445,      15577,     107752,      31693,   7.161735,   9.500000,   9.900000,  10.600000,   2.462639,   0.142000,  11.577000, 598.241988
Outstanding requests per worker:
29 27 29 29 27 32 28 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:25   0:00 /usr/lib/linux
memcache      9 85.5  0.0 130496 63104 pts/0    Sl+  12:25   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3640877627      instructions:u            #    0.63  insn per cycle         
        5772355407      cycles:u                                                    
          20969444      armv8_pmuv3_0/br_mis_pred/:u                                   
         590093844      armv8_pmuv3_0/br_pred/:u                                    

      38.310166036 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 32000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 32000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1196487168
starting receive base loop
num_worker_connections 128
Creating worker on tid 82244096
starting receive base loop
num_worker_connections 128
Creating worker on tid 3268604416
starting receive base loop
num_worker_connections 128
Creating worker on tid 2154557952
starting receive base loop
num_worker_connections 128
Creating worker on tid 1045950976
starting receive base loop
num_worker_connections 128
Creating worker on tid 4226871808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3118264832
starting receive base loop
Created 1024 connections total
Creating worker on tid 2004218368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291159.289584,       0.0,       94004,      84537,       9467,      50908,      33629,  26.181905,  41.900000,  49.100000, 509.900000, 107.258122,   0.000000, 1944.049001, 413.473639
Outstanding requests per worker:
121 134 129 125 105 121 137 2056 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32501.4,      162507,     146286,      16221,      99141,      47145,  52.166853,  63.200000,  83.900000, 1207.600000, 220.620445,   0.147000, 3653.821945, 493.592435
Outstanding requests per worker:
60 59 52 54 55 49 48 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.4,      159997,     144029,      15968,     102941,      41088,  13.971147,  20.400000,  20.900000,  21.400000,   6.308306,   0.144000,  22.651000, 534.918176
Outstanding requests per worker:
57 56 57 58 54 59 56 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31993.0,      159965,     144049,      15916,     106269,      37780,  14.841999,  21.700000,  22.100000,  22.900000,   6.850281,   0.169000,  24.899000, 559.640865
Outstanding requests per worker:
68 65 61 67 62 53 55 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     144057,      15958,     108378,      35679,  15.195947,  22.200000,  22.800000,  24.100000,   7.078687,   0.152000,  26.837001, 576.671255
Outstanding requests per worker:
67 60 61 60 62 56 62 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144018,      15989,     110638,      33380,  15.653116,  23.100000,  23.600000,  24.400000,   7.349051,   0.151000,  27.042000, 592.048681
Outstanding requests per worker:
63 59 65 64 66 58 60 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31996.0,      159980,     144210,      15770,     111441,      32769,  15.869448,  23.600000,  24.100000,  26.100000,   7.512078,   0.142000,  29.034000, 598.937321
Outstanding requests per worker:
63 61 69 63 64 73 70 65 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:26   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:26   0:00 /usr/lib/linux
memcache      9 86.3  0.0 131520 65216 pts/0    Sl+  12:26   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3806157490      instructions:u            #    0.66  insn per cycle         
        5789927393      cycles:u                                                    
          22499081      armv8_pmuv3_0/br_mis_pred/:u                                   
         607586958      armv8_pmuv3_0/br_pred/:u                                    

      38.191596226 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 27000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 256
Created 256 connections total
Creating worker on tid 444330496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291201.289626,       0.0,       54014,      48610,       5404,      28392,      20218,   1.093948,   1.300000,   1.500000,   3.300000,   3.173574,   0.000000,  97.768001, 391.772886
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.8,      135139,     121602,      13537,      79906,      41696,   0.891161,   1.300000,   1.400000,   1.700000,   0.281987,   0.159000,   4.573000, 472.091323
Outstanding requests per worker:
27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121324,      13825,      85197,      36127,   0.902832,   1.300000,   1.400000,   1.800000,   0.287556,   0.160000,   4.341000, 520.285022
Outstanding requests per worker:
22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.4,      135137,     121922,      13215,      88210,      33712,   0.911024,   1.300000,   1.400000,   1.800000,   0.291158,   0.158000,   3.603000, 545.070881
Outstanding requests per worker:
31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121683,      13468,      90074,      31609,   0.917323,   1.300000,   1.400000,   1.800000,   0.294676,   0.157000,   3.450000, 563.737071
Outstanding requests per worker:
27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121630,      13512,      91831,      29799,   0.918971,   1.300000,   1.400000,   1.800000,   0.297282,   0.156000,   4.508000, 578.781559
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121505,      13636,      92900,      28605,   0.921035,   1.300000,   1.500000,   1.800000,   0.294718,   0.160000,   3.521000, 589.110720
Outstanding requests per worker:
30 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:26   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:26   0:00 /usr/lib/linux
memcache     10 75.6  0.0 123328 42880 pts/0    Sl+  12:26   0:28 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  12:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3324851026      instructions:u            #    0.53  insn per cycle         
        6323261728      cycles:u                                                    
          24272764      armv8_pmuv3_0/br_mis_pred/:u                                   
         587337606      armv8_pmuv3_0/br_pred/:u                                    

      38.170487809 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 28000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 256
Created 256 connections total
Creating worker on tid 570421760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291243.289668,       0.0,       57093,      51405,       5688,      30149,      21256,   1.315564,   1.800000,   2.100000,   4.000000,   1.508166,   0.000000,  53.158998, 395.018656
Outstanding requests per worker:
36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28575.4,      142877,     128510,      14367,      84920,      43590,   1.198417,   1.800000,   1.900000,   2.500000,   0.416457,   0.159000,   7.027000, 475.114505
Outstanding requests per worker:
33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.6,      142863,     128361,      14502,      90174,      38187,   1.236381,   1.800000,   2.000000,   2.600000,   0.433859,   0.162000,   4.900000, 520.914826
Outstanding requests per worker:
33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128870,      13994,      93756,      35114,   1.242165,   1.800000,   2.000000,   2.600000,   0.437343,   0.158000,   5.629000, 547.841973
Outstanding requests per worker:
36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28574.2,      142871,     128510,      14361,      95624,      32886,   1.259033,   1.900000,   2.000000,   2.600000,   0.444205,   0.161000,   5.417000, 567.148852
Outstanding requests per worker:
38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128526,      14343,      96963,      31563,   1.271977,   1.900000,   2.100000,   2.600000,   0.451973,   0.164000,   7.308000, 580.402541
Outstanding requests per worker:
38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.4,      142867,     128529,      14338,      98545,      29984,   1.275014,   1.900000,   2.100000,   2.600000,   0.449157,   0.160000,   5.529000, 592.547192
Outstanding requests per worker:
34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:27   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:27   0:00 /usr/lib/linux
memcache      9 78.0  0.0 126400 44992 pts/0    Sl+  12:27   0:29 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  12:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3511160478      instructions:u            #    0.54  insn per cycle         
        6484873752      cycles:u                                                    
          24153496      armv8_pmuv3_0/br_mis_pred/:u                                   
         620840220      armv8_pmuv3_0/br_pred/:u                                    

      38.080189285 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 29000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 256
Created 256 connections total
Creating worker on tid 1069675008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291284.289709,       0.0,       58763,      52918,       5845,      31119,      21799,   1.605013,   2.300000,   2.700000,   5.600000,   1.659544,   0.000000,  56.060001, 396.560395
Outstanding requests per worker:
42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132260,      14804,      88081,      44179,   1.436388,   2.100000,   2.400000,   3.000000,   0.523381,   0.159000,   6.546000, 479.985725
Outstanding requests per worker:
45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132163,      14901,      93426,      38737,   1.482964,   2.200000,   2.500000,   3.200000,   0.550254,   0.161000,   6.545000, 526.460151
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132695,      14378,      96947,      35748,   1.504358,   2.200000,   2.500000,   3.200000,   0.555942,   0.161000,   6.886000, 551.360481
Outstanding requests per worker:
43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132216,      14850,      98401,      33815,   1.538659,   2.300000,   2.600000,   3.300000,   0.574720,   0.164000,   7.400000, 568.508025
Outstanding requests per worker:
43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29411.8,      147059,     132313,      14746,     100430,      31883,   1.542282,   2.300000,   2.600000,   3.300000,   0.580063,   0.165000,   8.250000, 584.610537
Outstanding requests per worker:
50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132340,      14724,     101738,      30602,   1.566186,   2.300000,   2.600000,   3.400000,   0.583966,   0.161000,   7.194000, 594.823077
Outstanding requests per worker:
52 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:28   0:00 /usr/lib/linux
memcache      8 81.5  0.0 127424 45632 pts/0    Sl+  12:28   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3595544252      instructions:u            #    0.55  insn per cycle         
        6591329138      cycles:u                                                    
          25807033      armv8_pmuv3_0/br_mis_pred/:u                                   
         629472208      armv8_pmuv3_0/br_pred/:u                                    

      36.669880993 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 30000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 256
Created 256 connections total
Creating worker on tid 208204288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291325.289750,       0.0,       60519,      54472,       6047,      32334,      22138,   2.410896,   3.600000,   4.500000,   9.100000,   2.068196,   0.000000,  59.420999, 401.516449
Outstanding requests per worker:
67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136293,      15233,      90735,      45558,   2.209112,   3.400000,   3.900000,   5.200000,   0.932485,   0.169000,  13.724000, 480.834056
Outstanding requests per worker:
66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30302.6,      151513,     136222,      15291,      96469,      39753,   2.328448,   3.600000,   4.100000,   5.500000,   0.991003,   0.166000,  15.340000, 527.413729
Outstanding requests per worker:
80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136596,      14933,      99868,      36728,   2.390624,   3.700000,   4.300000,   5.600000,   1.011687,   0.163000,  12.728000, 551.853912
Outstanding requests per worker:
74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.0,      151515,     136316,      15199,     101436,      34880,   2.463464,   3.800000,   4.400000,   6.000000,   1.077442,   0.164000,  16.674001, 568.080930
Outstanding requests per worker:
81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.8,      151519,     136323,      15196,     103523,      32800,   2.480070,   3.800000,   4.500000,   5.900000,   1.072061,   0.169000,  14.635000, 583.801127
Outstanding requests per worker:
86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.4,      151537,     136344,      15193,     105139,      31205,   2.507486,   3.800000,   4.500000,   5.900000,   1.064183,   0.191000,  12.331000, 596.287207
Outstanding requests per worker:
76 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:29   0:00 /usr/lib/linux
memcache      9 83.1  0.0 129472 49024 pts/0    Sl+  12:29   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3683613349      instructions:u            #    0.55  insn per cycle         
        6674951474      cycles:u                                                    
          26020766      armv8_pmuv3_0/br_mis_pred/:u                                   
         649392633      armv8_pmuv3_0/br_pred/:u                                    

      36.860526985 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 31000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 256
Created 256 connections total
Creating worker on tid 959443456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291367.289792,       0.0,       62372,      56142,       6230,      33089,      23053,   3.968963,   6.500000,   8.100000,  13.100000,   2.602047,   0.000000,  58.502998, 400.629137
Outstanding requests per worker:
113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31248.8,      156244,     140544,      15700,      93617,      46927,   3.755702,   6.100000,   7.200000,  10.000000,   1.841304,   0.179000,  23.994001, 481.204939
Outstanding requests per worker:
137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31259.0,      156295,     140538,      15757,      99308,      41230,   4.110343,   6.700000,   8.000000,  11.300000,   2.093356,   0.169000,  28.440000, 526.935989
Outstanding requests per worker:
112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.4,      156267,     140793,      15474,     103067,      37726,   4.237280,   7.000000,   8.300000,  11.800000,   2.190107,   0.192000,  31.284999, 554.368484
Outstanding requests per worker:
106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.0,      156230,     140643,      15587,     105379,      35264,   4.554646,   7.500000,   9.100000,  13.000000,   2.431940,   0.170000,  40.755000, 573.020392
Outstanding requests per worker:
141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31248.6,      156243,     140570,      15673,     107244,      33326,   4.666213,   7.800000,   9.300000,  13.400000,   2.503705,   0.197000,  35.179000, 587.248225
Outstanding requests per worker:
162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.6,      156268,     140537,      15731,     108440,      32097,   4.788063,   7.900000,   9.500000,  13.100000,   2.454481,   0.203000,  27.249999, 598.012502
Outstanding requests per worker:
151 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:29   0:00 /usr/lib/linux
memcache      8 86.8  0.0 130496 50112 pts/0    Sl+  12:29   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3766000501      instructions:u            #    0.56  insn per cycle         
        6708308770      cycles:u                                                    
          25599435      armv8_pmuv3_0/br_mis_pred/:u                                   
         658315882      armv8_pmuv3_0/br_pred/:u                                    

      36.790534089 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 1 threads, 32000 rps'
==> Bench: 262114 keys, 256 conns, 1 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 262114 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 1'
Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 256
Created 256 connections total
Creating worker on tid 369816064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291409.289834,       0.0,       63137,      56839,       6298,      33699,      23140,  17.942690,  30.900000,  43.600000,  74.800000,  13.079897,   0.000000, 137.130007, 400.787839
Outstanding requests per worker:
1358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31122.0,      155610,     139993,      15617,      93202,      46791, 116.504419, 246.400000, 302.300000, 415.200000,  92.272142,   0.433000, 527.823985, 481.399656
Outstanding requests per worker:
5285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31199.4,      155997,     140259,      15738,      99255,      41004, 201.473335, 409.800000, 504.100000, 615.900000, 146.395474,   0.741000, 754.379988, 528.144832
Outstanding requests per worker:
7338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31164.6,      155823,     140357,      15466,     102595,      37762, 256.953882, 514.300000, 592.700000, 770.200000, 182.787722,   0.420000, 987.661004, 553.596301
Outstanding requests per worker:
8913 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31120.4,      155602,     140101,      15501,     104715,      35386, 304.931025, 631.700000, 727.800000, 938.100000, 223.094764,   0.355000, 1169.113994, 570.992734
Outstanding requests per worker:
10336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31113.8,      155569,     139929,      15640,     106261,      33668, 347.980337, 722.400000, 845.500000, 1070.400000, 249.356154,   0.695000, 1323.222995, 584.058437
Outstanding requests per worker:
11422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31070.6,      155353,     139734,      15619,     107632,      32102, 379.470618, 762.500000, 928.200000, 1164.200000, 272.289280,   0.722000, 1553.643942, 595.850001
Outstanding requests per worker:
12410 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:30   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:30   0:00 /usr/lib/linux
memcache     10 83.7  0.0 129472 49088 pts/0    Sl+  12:30   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3717578011      instructions:u            #    0.56  insn per cycle         
        6624988020      cycles:u                                                    
          25146242      armv8_pmuv3_0/br_mis_pred/:u                                   
         637201066      armv8_pmuv3_0/br_pred/:u                                    

      38.140342889 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 27000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1614082560
starting receive base loop
Created 256 connections total
Creating worker on tid 501019136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291451.289876,       0.0,       69057,      62242,       6815,      36919,      25323,   0.541526,   0.246100,   0.255100,   1.700000,   5.034164,   0.000000, 147.024006, 401.620803
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121692,      13456,      80742,      40950,   0.187779,   0.243100,   0.251100,   0.265100,   0.039064,   0.101000,   1.294000, 477.594591
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121417,      13734,      85441,      35976,   0.187594,   0.243100,   0.251100,   0.269100,   0.040833,   0.102000,   1.304000, 522.575183
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121530,      13610,      88247,      33283,   0.187143,   0.242100,   0.251100,   0.267100,   0.039272,   0.099000,   1.211000, 546.464906
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121841,      13302,      90397,      31444,   0.187410,   0.243100,   0.251100,   0.268100,   0.039405,   0.100000,   1.128000, 564.756445
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121619,      13527,      91854,      29765,   0.187201,   0.242100,   0.251100,   0.268100,   0.039945,   0.097000,   0.861000, 580.006553
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121610,      13541,      93081,      28529,   0.187324,   0.243100,   0.251100,   0.268100,   0.040661,   0.096000,   1.316000, 590.101102
Outstanding requests per worker:
3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:31   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5888 pts/0    S+   12:31   0:00 /usr/lib/linux
memcache     12 81.8  0.0 125376 45888 pts/0    Sl+  12:31   0:30 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  12:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3334369510      instructions:u            #    0.52  insn per cycle         
        6396903345      cycles:u                                                    
          23944859      armv8_pmuv3_0/br_mis_pred/:u                                   
         585353874      armv8_pmuv3_0/br_pred/:u                                    

      36.950175428 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 28000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1788539392
starting receive base loop
Created 256 connections total
Creating worker on tid 678162944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291492.289917,       0.0,       72326,      64984,       7342,      38700,      26284,   0.388447,   0.247100,   0.255100,   0.883100,   3.251705,   0.000000, 110.036999, 405.066786
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126827,      14026,      84870,      41957,   0.190806,   0.245100,   0.252100,   0.270100,   0.041006,   0.096000,   1.969000, 484.556940
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126578,      14274,      89399,      37179,   0.190724,   0.245100,   0.252100,   0.269100,   0.041220,   0.096000,   1.967000, 524.196337
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126721,      14131,      92184,      34537,   0.191059,   0.245100,   0.252100,   0.271100,   0.042318,   0.099000,   2.024000, 548.264660
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126744,      14107,      94410,      32334,   0.190560,   0.245100,   0.252100,   0.269100,   0.040981,   0.097000,   1.881000, 568.049359
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.8,      140854,     126602,      14252,      95889,      30713,   0.190517,   0.245100,   0.252100,   0.270100,   0.040998,   0.100000,   1.035000, 580.395792
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.0,      140850,     126689,      14161,      97206,      29483,   0.190532,   0.245100,   0.252100,   0.271100,   0.042849,   0.096000,   2.026000, 592.797678
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:31   0:00 /usr/lib/linux
memcache      8 85.8  0.0 127424 47936 pts/0    Sl+  12:31   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3478437723      instructions:u            #    0.52  insn per cycle         
        6682765427      cycles:u                                                    
          24397085      armv8_pmuv3_0/br_mis_pred/:u                                   
         607797155      armv8_pmuv3_0/br_pred/:u                                    

      36.850496189 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 29000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1487139328
starting receive base loop
Created 256 connections total
Creating worker on tid 374862336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291533.289958,       0.0,       74983,      67438,       7545,      40282,      27156,   0.877018,   0.251100,   0.261100,  15.200000,   7.560154,   0.000000, 178.148001, 407.057505
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132400,      14668,      88349,      44051,   0.198980,   0.249100,   0.255100,   0.294100,   0.042188,   0.095000,   1.396000, 484.977636
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132122,      14948,      93360,      38762,   0.199349,   0.249100,   0.256100,   0.296100,   0.042942,   0.095000,   1.344000, 526.428369
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.0,      147075,     132407,      14668,      96786,      35621,   0.199400,   0.249100,   0.256100,   0.296100,   0.043065,   0.098000,   1.485000, 553.030399
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.0,      147075,     132193,      14882,      98952,      33241,   0.199836,   0.249100,   0.256100,   0.297100,   0.043105,   0.092000,   0.915000, 572.066289
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132472,      14597,     100377,      32095,   0.200301,   0.249100,   0.257100,   0.298100,   0.044878,   0.097000,   1.330000, 581.858883
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132211,      14859,     101912,      30299,   0.200134,   0.249100,   0.257100,   0.298100,   0.045659,   0.097000,   1.401000, 596.646368
Outstanding requests per worker:
3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:32   0:00 /usr/lib/linux
memcache      8 85.5  0.0 128448 49088 pts/0    Sl+  12:32   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3668981460      instructions:u            #    0.54  insn per cycle         
        6837843814      cycles:u                                                    
          26472652      armv8_pmuv3_0/br_mis_pred/:u                                   
         645834600      armv8_pmuv3_0/br_pred/:u                                    

      36.950662133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 30000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2041246208
starting receive base loop
Created 256 connections total
Creating worker on tid 930476544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291575.290000,       0.0,       76997,      69470,       7527,      41440,      28030,   0.483976,   0.253100,   0.288100,   2.300000,   3.435492,   0.000000,  96.715003, 405.969872
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.4,      151532,     136510,      15022,      91348,      45162,   0.203394,   0.249100,   0.262000,   0.300100,   0.043824,   0.099000,   0.944000, 484.643499
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.8,      151534,     136137,      15397,      96814,      39323,   0.203692,   0.250100,   0.265100,   0.299100,   0.043879,   0.097000,   0.868000, 530.468315
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.6,      151523,     136117,      15406,      99658,      36459,   0.203897,   0.250100,   0.268100,   0.301100,   0.044352,   0.098000,   0.839000, 554.448313
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.4,      151527,     136383,      15144,     101941,      34442,   0.204161,   0.250100,   0.270100,   0.302100,   0.045386,   0.100000,   0.964000, 571.892237
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136363,      15166,     103946,      32417,   0.204500,   0.250100,   0.270100,   0.302100,   0.048892,   0.096000,   1.087000, 586.228097
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.6,      151533,     136344,      15189,     105126,      31218,   0.204815,   0.251100,   0.271100,   0.302100,   0.048045,   0.099000,   1.103000, 597.883361
Outstanding requests per worker:
3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:33   0:00 /usr/lib/linux
memcache      8 84.0  0.0 127424 48064 pts/0    Sl+  12:33   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3727511705      instructions:u            #    0.56  insn per cycle         
        6710362846      cycles:u                                                    
          25709239      armv8_pmuv3_0/br_mis_pred/:u                                   
         650144189      armv8_pmuv3_0/br_pred/:u                                    

      38.279290445 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 31000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1913319936
starting receive base loop
Created 256 connections total
Creating worker on tid 804319744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291617.290042,       0.0,       79360,      71377,       7983,      42884,      28493,   0.421027,   0.255100,   0.284100,   1.100000,   3.480301,   0.000000, 115.875997, 410.897390
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140542,      15718,      94393,      46149,   0.207130,   0.252100,   0.280100,   0.302100,   0.045142,   0.105000,   0.916000, 487.714584
Outstanding requests per worker:
5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140468,      15791,     100048,      40420,   0.207626,   0.252100,   0.281000,   0.302100,   0.044745,   0.094000,   0.937000, 532.497394
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140816,      15448,     103537,      37279,   0.208531,   0.254100,   0.281000,   0.305100,   0.045510,   0.098000,   0.937000, 558.252059
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.4,      156257,     140603,      15654,     105363,      35240,   0.209310,   0.262000,   0.282100,   0.309100,   0.046650,   0.095000,   1.112000, 573.346024
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.4,      156257,     140623,      15634,     107376,      33247,   0.209584,   0.262000,   0.282100,   0.306100,   0.048240,   0.097000,   1.015000, 588.255236
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140580,      15681,     108515,      32065,   0.210605,   0.266100,   0.283100,   0.314100,   0.051702,   0.105000,   1.121000, 597.189771
Outstanding requests per worker:
2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:33   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5952 pts/0    S+   12:33   0:00 /usr/lib/linux
memcache     13 87.4  0.0 130496 50240 pts/0    Sl+  12:33   0:32 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  12:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3841521012      instructions:u            #    0.56  insn per cycle         
        6893599823      cycles:u                                                    
          26734030      armv8_pmuv3_0/br_mis_pred/:u                                   
         671908794      armv8_pmuv3_0/br_pred/:u                                    

      36.950110081 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 2 threads, 32000 rps'
==> Bench: 262114 keys, 256 conns, 2 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 262114 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 2'
Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1582363136
starting receive base loop
Created 256 connections total
Creating worker on tid 468775424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291659.290084,       0.0,       82480,      74226,       8254,      44718,      29508,   2.905645,   7.700000,  10.700000,  15.900000,   4.648404,   0.000000, 110.274002, 411.672150
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145118,      16185,      97786,      47332,   0.228757,   0.281000,   0.290100,   0.349100,   0.050785,   0.109000,   1.016000, 489.617187
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32262.0,      161310,     144814,      16496,     102995,      41819,   0.231845,   0.283100,   0.294100,   0.345100,   0.048452,   0.108000,   0.903000, 531.019653
Outstanding requests per worker:
4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.6,      161298,     145174,      16124,     106594,      38580,   0.235898,   0.285000,   0.301100,   0.353100,   0.050768,   0.104000,   1.097000, 556.333131
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145312,      15991,     109263,      36049,   0.238518,   0.286100,   0.305100,   0.361100,   0.054327,   0.110000,   1.020000, 575.856275
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145093,      16210,     110861,      34232,   0.242209,   0.288100,   0.311100,   0.367100,   0.059925,   0.110000,   1.151000, 589.919024
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32261.8,      161309,     145027,      16282,     112480,      32547,   0.248585,   0.293100,   0.323000,   0.411100,   0.072859,   0.109000,   1.366000, 601.657153
Outstanding requests per worker:
5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:34   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:34   0:00 /usr/lib/linux
memcache     10 90.7  0.0 129472 49664 pts/0    Sl+  12:34   0:32 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  12:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3872520965      instructions:u            #    0.57  insn per cycle         
        6792549943      cycles:u                                                    
          25112554      armv8_pmuv3_0/br_mis_pred/:u                                   
         667970643      armv8_pmuv3_0/br_pred/:u                                    

      36.990047057 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 27000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1714549248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
Created 256 connections total
Creating worker on tid 4222022144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291701.290126,       0.0,       69617,      62669,       6948,      37421,      25248,   0.710141,   0.123100,   0.129000,   7.800000,   7.096722,   0.000000, 159.034997, 404.479472
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121720,      13422,      80693,      41027,   0.095985,   0.121100,   0.124100,   0.145100,   0.018381,   0.061000,   0.694000, 479.043493
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121142,      14002,      85106,      36036,   0.096349,   0.121100,   0.124100,   0.175000,   0.019931,   0.059000,   0.551000, 521.873165
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121776,      13370,      88515,      33261,   0.096131,   0.121100,   0.124100,   0.167100,   0.019524,   0.060000,   0.579000, 548.645817
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121525,      13625,      90270,      31255,   0.096276,   0.121100,   0.124100,   0.172100,   0.020681,   0.059000,   0.675000, 565.586727
Outstanding requests per worker:
1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121593,      13548,      91900,      29693,   0.096510,   0.121100,   0.124100,   0.176100,   0.021717,   0.058000,   0.752000, 579.174878
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121592,      13551,      92828,      28764,   0.097012,   0.122100,   0.125100,   0.180100,   0.023681,   0.061000,   0.837000, 589.884737
Outstanding requests per worker:
1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:35   0:00 /usr/lib/linux
memcache      8 82.3  0.0 125376 46016 pts/0    Sl+  12:35   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3357813549      instructions:u            #    0.53  insn per cycle         
        6394309453      cycles:u                                                    
          24413070      armv8_pmuv3_0/br_mis_pred/:u                                   
         589954353      armv8_pmuv3_0/br_pred/:u                                    

      37.011048632 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 28000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1708192256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
Created 256 connections total
Creating worker on tid 4213961216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291742.290167,       0.0,       72427,      65137,       7290,      38770,      26367,   0.729314,   0.162100,   0.182100,  12.500000,   6.723315,   0.000000, 158.518001, 404.864301
Outstanding requests per worker:
0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126761,      14096,      84302,      42459,   0.107891,   0.137100,   0.173000,   0.189100,   0.028256,   0.059000,   0.524000, 480.072104
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126594,      14259,      89089,      37505,   0.107858,   0.136100,   0.173000,   0.189100,   0.029200,   0.065000,   0.541000, 522.941348
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126714,      14137,      92196,      34518,   0.107607,   0.136100,   0.172100,   0.188100,   0.028431,   0.060000,   0.631000, 549.733731
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126711,      14142,      94064,      32647,   0.108245,   0.138100,   0.173000,   0.190100,   0.029797,   0.062000,   0.772000, 565.240705
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126722,      14130,      95865,      30857,   0.108135,   0.137100,   0.173000,   0.189100,   0.029670,   0.060000,   0.696000, 581.611512
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126726,      14126,      97236,      29490,   0.108665,   0.138100,   0.173000,   0.191100,   0.032097,   0.060000,   0.910000, 593.224753
Outstanding requests per worker:
0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:36   0:00 /usr/lib/linux
memcache      8 83.7  0.0 128448 48000 pts/0    Sl+  12:36   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  12:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3486271781      instructions:u            #    0.53  insn per cycle         
        6629232723      cycles:u                                                    
          25114919      armv8_pmuv3_0/br_mis_pred/:u                                   
         612259192      armv8_pmuv3_0/br_pred/:u                                    

      36.979936103 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 29000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1715728896
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
Created 256 connections total
Creating worker on tid 4222022144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291784.290209,       0.0,       75188,      67602,       7586,      40476,      27126,   0.947327,   0.155100,   0.766100,  23.500000,   7.725421,   0.000000, 166.952997, 406.803275
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.6,      146003,     131374,      14629,      87725,      43649,   0.106735,   0.125100,   0.155100,   0.187100,   0.023621,   0.059000,   0.653000, 485.102273
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.4,      145992,     131103,      14889,      92875,      38228,   0.107122,   0.126100,   0.155100,   0.187100,   0.025789,   0.058000,   0.704000, 527.262259
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.2,      145996,     131497,      14499,      95904,      35593,   0.106910,   0.126100,   0.155100,   0.186100,   0.025079,   0.058000,   0.652000, 551.471319
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.6,      145998,     131544,      14454,      98067,      33477,   0.107560,   0.127100,   0.158100,   0.187100,   0.022913,   0.058000,   0.666000, 568.504280
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.2,      146001,     131434,      14567,      99688,      31746,   0.107445,   0.126100,   0.156100,   0.186100,   0.026864,   0.059000,   0.805000, 584.858591
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131503,      14490,     101348,      30155,   0.107573,   0.126100,   0.156100,   0.187100,   0.028149,   0.058000,   0.888000, 596.091230
Outstanding requests per worker:
1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:36   0:00 /usr/lib/linux
memcache      8 87.7  0.0 127424 46528 pts/0    Sl+  12:36   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3595464649      instructions:u            #    0.53  insn per cycle         
        6731632694      cycles:u                                                    
          26134284      armv8_pmuv3_0/br_mis_pred/:u                                   
         629653679      armv8_pmuv3_0/br_pred/:u                                    

      36.880621931 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 30000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2130047488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1537667584
starting receive base loop
num_worker_connections 64
Creating worker on tid 941748736
starting receive base loop
Created 256 connections total
Creating worker on tid 345829888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291826.290251,       0.0,       77088,      69574,       7514,      41830,      27744,   0.577900,   0.158100,   0.344100,   4.600000,   4.981418,   0.000000, 127.257004, 411.149639
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135360,      15026,      90977,      44383,   0.106382,   0.129000,   0.158100,   0.188100,   0.026741,   0.059000,   0.876000, 487.020168
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135227,      15162,      96208,      39019,   0.106694,   0.150100,   0.159100,   0.188100,   0.027234,   0.059000,   0.822000, 530.279515
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135582,      14809,      99558,      36024,   0.107037,   0.151100,   0.160100,   0.187100,   0.027691,   0.058000,   0.736000, 556.584237
Outstanding requests per worker:
0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135351,      15031,     101045,      34306,   0.107260,   0.151100,   0.160100,   0.188100,   0.028964,   0.057000,   0.874000, 571.723201
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135202,      15184,     102693,      32509,   0.107735,   0.152000,   0.161100,   0.188100,   0.030906,   0.059000,   0.847000, 585.275233
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135500,      14889,     104473,      31027,   0.108966,   0.153100,   0.162100,   0.190100,   0.035473,   0.058000,   0.991000, 597.239661
Outstanding requests per worker:
1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:37   0:00 /usr/lib/linux
memcache      9 84.5  0.0 129472 48960 pts/0    Sl+  12:37   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3702066431      instructions:u            #    0.54  insn per cycle         
        6824436990      cycles:u                                                    
          25926188      armv8_pmuv3_0/br_mis_pred/:u                                   
         647464380      armv8_pmuv3_0/br_pred/:u                                    

      38.190422623 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 31000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1995960832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
Created 256 connections total
Creating worker on tid 211612160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291868.290293,       0.0,       80754,      72577,       8177,      43649,      28928,   1.300248,   2.600000,   5.500000,  23.700000,   7.313136,   0.000000, 155.276999, 411.021494
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139475,      15581,      94047,      45428,   0.105376,   0.152000,   0.160100,   0.188100,   0.030074,   0.059000,   0.859000, 489.335386
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139186,      15863,      98838,      40348,   0.105846,   0.153100,   0.160100,   0.186100,   0.028425,   0.059000,   0.800000, 530.147659
Outstanding requests per worker:
0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139566,      15484,     102459,      37107,   0.106540,   0.154100,   0.161100,   0.188100,   0.031430,   0.056000,   0.943000, 555.543900
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139421,      15628,     104335,      35086,   0.107956,   0.155100,   0.162100,   0.188100,   0.036257,   0.056000,   0.942000, 572.683979
Outstanding requests per worker:
0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139449,      15608,     106614,      32835,   0.109655,   0.157100,   0.165100,   0.188100,   0.035082,   0.058000,   0.875000, 588.185057
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139641,      15406,     108202,      31439,   0.109839,   0.156100,   0.164100,   0.189100,   0.044010,   0.056000,   1.098000, 600.765320
Outstanding requests per worker:
1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:38   0:00 /usr/lib/linux
memcache      8 83.1  0.0 130496 50048 pts/0    Sl+  12:38   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3816742370      instructions:u            #    0.56  insn per cycle         
        6860280729      cycles:u                                                    
          26029877      armv8_pmuv3_0/br_mis_pred/:u                                   
         667455867      armv8_pmuv3_0/br_pred/:u                                    

      38.269472651 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 4 threads, 32000 rps'
==> Bench: 262114 keys, 256 conns, 4 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 262114 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 4'
Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1823928832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
Created 256 connections total
Creating worker on tid 37089792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291910.290335,       0.0,       82293,      74112,       8181,      44909,      29203,   3.941017,   9.700000,  13.100000,  25.700000,   9.443765,   0.000000, 227.709994, 414.957146
Outstanding requests per worker:
1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     143812,      16194,      97139,      46673,   0.142338,   0.183100,   0.187100,   0.233100,   0.040962,   0.067000,   1.617000, 490.746183
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143837,      16172,     102093,      41744,   0.146635,   0.184100,   0.187100,   0.219100,   0.041402,   0.063000,   1.846000, 530.922002
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     144180,      15829,     105526,      38654,   0.151582,   0.185100,   0.188100,   0.228100,   0.038099,   0.063000,   1.789000, 554.466563
Outstanding requests per worker:
1 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144042,      15965,     107861,      36181,   0.156322,   0.186100,   0.190100,   0.266100,   0.051015,   0.061000,   0.949000, 571.332292
Outstanding requests per worker:
1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143832,      16181,     109671,      34161,   0.160847,   0.187100,   0.190100,   0.292100,   0.050496,   0.060000,   1.817000, 587.913670
Outstanding requests per worker:
1 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144003,      16004,     111304,      32699,   0.164062,   0.188100,   0.194000,   0.293100,   0.059475,   0.062000,   1.196000, 598.575689
Outstanding requests per worker:
1 1 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:38   0:00 /usr/lib/linux
memcache     10 85.8  0.0 130496 50112 pts/0    Sl+  12:38   0:32 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  12:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3839991477      instructions:u            #    0.57  insn per cycle         
        6710580991      cycles:u                                                    
          26223726      armv8_pmuv3_0/br_mis_pred/:u                                   
         659905069      armv8_pmuv3_0/br_pred/:u                                    

      38.209797695 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 27000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 27000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 1849160192
starting receive base loop
num_worker_connections 32
Creating worker on tid 1511059968
starting receive base loop
num_worker_connections 32
Creating worker on tid 1175515648
starting receive base loop
num_worker_connections 32
Creating worker on tid 839971328
starting receive base loop
num_worker_connections 32
Creating worker on tid 504427008
starting receive base loop
num_worker_connections 32
Creating worker on tid 168882688
starting receive base loop
num_worker_connections 32
Creating worker on tid 4128305664
starting receive base loop
Created 256 connections total
Creating worker on tid 3792761344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291952.290377,       0.0,       73516,      66139,       7377,      39661,      26478,   1.418516,   0.110100,   0.183100,  51.800000,  11.405769,   0.000000, 194.040999, 408.966404
Outstanding requests per worker:
0 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121544,      13599,      80703,      40841,   0.090166,   0.109100,   0.115100,   0.142100,   0.017510,   0.053000,   0.511000, 479.653163
Outstanding requests per worker:
1 0 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121438,      13702,      85563,      35875,   0.090511,   0.109100,   0.117100,   0.143100,   0.017716,   0.052000,   0.667000, 524.287908
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121714,      13427,      88376,      33338,   0.090718,   0.109100,   0.117100,   0.143100,   0.018198,   0.053000,   0.530000, 547.378527
Outstanding requests per worker:
0 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121537,      13605,      90272,      31265,   0.090919,   0.109100,   0.118100,   0.143100,   0.018705,   0.053000,   0.659000, 565.535434
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121617,      13523,      91912,      29705,   0.091348,   0.110100,   0.118100,   0.145100,   0.020794,   0.053000,   0.756000, 580.164475
Outstanding requests per worker:
0 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121422,      13719,      92898,      28524,   0.090942,   0.109100,   0.118100,   0.144100,   0.021714,   0.053000,   1.088000, 589.509982
Outstanding requests per worker:
0 0 0 1 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:39   0:00 /usr/lib/linux
memcache      8 80.7  0.0 127424 48000 pts/0    Sl+  12:39   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3374059093      instructions:u            #    0.54  insn per cycle         
        6273874087      cycles:u                                                    
          22240165      armv8_pmuv3_0/br_mis_pred/:u                                   
         591876738      armv8_pmuv3_0/br_pred/:u                                    

      36.860234075 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 28000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 28000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2089611776
starting receive base loop
num_worker_connections 32
Creating worker on tid 1752691200
starting receive base loop
num_worker_connections 32
Creating worker on tid 1417146880
starting receive base loop
num_worker_connections 32
Creating worker on tid 1081602560
starting receive base loop
num_worker_connections 32
Creating worker on tid 746058240
starting receive base loop
num_worker_connections 32
Creating worker on tid 410513920
starting receive base loop
num_worker_connections 32
Creating worker on tid 74969600
starting receive base loop
Created 256 connections total
Creating worker on tid 4034392576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575291994.290419,       0.0,       76084,      68338,       7746,      41022,      27316,   2.360110,   0.139100,   2.000000,  90.200000,  16.513310,   0.000000, 246.703997, 410.205596
Outstanding requests per worker:
0 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126255,      14107,      84720,      41535,   0.100274,   0.130100,   0.133100,   0.163100,   0.024674,   0.058000,   1.583000, 486.595216
Outstanding requests per worker:
0 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.6,      140363,     126144,      14219,      89029,      37115,   0.100812,   0.130100,   0.133100,   0.166100,   0.026804,   0.054000,   0.629000, 524.558798
Outstanding requests per worker:
1 1 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.4,      140367,     126296,      14071,      91620,      34676,   0.100759,   0.130100,   0.134100,   0.165100,   0.026221,   0.053000,   1.588000, 547.137756
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.6,      140358,     126316,      14042,      93742,      32574,   0.101257,   0.130100,   0.136100,   0.167100,   0.026365,   0.055000,   1.496000, 566.074337
Outstanding requests per worker:
0 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126548,      13813,      95602,      30946,   0.101417,   0.131000,   0.138100,   0.167100,   0.028310,   0.051000,   0.891000, 579.393598
Outstanding requests per worker:
0 0 0 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126161,      14201,      96658,      29503,   0.101020,   0.131000,   0.137100,   0.166100,   0.024459,   0.053000,   0.633000, 591.479982
Outstanding requests per worker:
1 1 1 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:40   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:40   0:00 /usr/lib/linux
memcache     10 81.1  0.0 126400 44096 pts/0    Sl+  12:40   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3455398982      instructions:u            #    0.53  insn per cycle         
        6467920748      cycles:u                                                    
          23612539      armv8_pmuv3_0/br_mis_pred/:u                                   
         599317108      armv8_pmuv3_0/br_pred/:u                                    

      37.990058081 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 29000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 29000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2452091392
starting receive base loop
num_worker_connections 32
Creating worker on tid 2115039744
starting receive base loop
num_worker_connections 32
Creating worker on tid 1779495424
starting receive base loop
num_worker_connections 32
Creating worker on tid 1443951104
starting receive base loop
num_worker_connections 32
Creating worker on tid 1108406784
starting receive base loop
num_worker_connections 32
Creating worker on tid 772862464
starting receive base loop
num_worker_connections 32
Creating worker on tid 437318144
starting receive base loop
Created 256 connections total
Creating worker on tid 101773824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292035.290460,       0.0,       80249,      72175,       8074,      43382,      28793,   2.494047,   0.163100,   2.600000,  89.900000,  16.865965,   0.000000, 255.513012, 411.842882
Outstanding requests per worker:
1 0 1 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.8,      145464,     130880,      14584,      88156,      42724,   0.114876,   0.143100,   0.152000,   0.180100,   0.028187,   0.054000,   0.688000, 489.411430
Outstanding requests per worker:
1 0 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.0,      145460,     130783,      14677,      92404,      38379,   0.115406,   0.143100,   0.153100,   0.183100,   0.027470,   0.054000,   0.587000, 527.268078
Outstanding requests per worker:
0 1 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.2,      145461,     131126,      14335,      95411,      35715,   0.115927,   0.144100,   0.154100,   0.186100,   0.029495,   0.051000,   0.687000, 549.782903
Outstanding requests per worker:
1 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.8,      145464,     130848,      14616,      97584,      33264,   0.115902,   0.144100,   0.154100,   0.185100,   0.029928,   0.050000,   0.725000, 569.757046
Outstanding requests per worker:
1 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.4,      145462,     131020,      14442,      99577,      31443,   0.116455,   0.144100,   0.154100,   0.186100,   0.030738,   0.053000,   0.808000, 583.446909
Outstanding requests per worker:
0 0 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29091.8,      145459,     130738,      14721,     100255,      30483,   0.116774,   0.145100,   0.154100,   0.186100,   0.034471,   0.053000,   0.940000, 592.205701
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:40   0:00 /usr/lib/linux
memcache      8 85.0  0.0 128448 49024 pts/0    Sl+  12:40   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3531219636      instructions:u            #    0.54  insn per cycle         
        6577320024      cycles:u                                                    
          24513056      armv8_pmuv3_0/br_mis_pred/:u                                   
         606278336      armv8_pmuv3_0/br_pred/:u                                    

      37.060002790 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 30000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 30000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 256 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2842227200
starting receive base loop
num_worker_connections 32
Creating worker on tid 2501571072
starting receive base loop
num_worker_connections 32
Creating worker on tid 2166026752
starting receive base loop
num_worker_connections 32
Creating worker on tid 1830482432
starting receive base loop
num_worker_connections 32
Creating worker on tid 1494938112
starting receive base loop
num_worker_connections 32
Creating worker on tid 1159393792
starting receive base loop
num_worker_connections 32
Creating worker on tid 823849472
starting receive base loop
Created 256 connections total
Creating worker on tid 488305152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292077.290502,       0.0,       81737,      73575,       8162,      44011,      29564,   4.299737,   4.700000,  10.400000, 150.200000,  23.925878,   0.000000, 327.829003, 408.878396
Outstanding requests per worker:
0 0 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135282,      15101,      90997,      44285,   0.119132,   0.160100,   0.165100,   0.198100,   0.034957,   0.053000,   0.674000, 489.131754
Outstanding requests per worker:
0 0 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135111,      15276,      96225,      38886,   0.119859,   0.162100,   0.168100,   0.200100,   0.035082,   0.053000,   0.669000, 531.531881
Outstanding requests per worker:
0 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135180,      15203,      99036,      36144,   0.120236,   0.162100,   0.172100,   0.200100,   0.034448,   0.053000,   0.618000, 555.129598
Outstanding requests per worker:
0 0 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135446,      14947,     101385,      34061,   0.120870,   0.162100,   0.173000,   0.205100,   0.038695,   0.052000,   0.846000, 572.192069
Outstanding requests per worker:
0 1 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135284,      15101,     103016,      32268,   0.121720,   0.163100,   0.174100,   0.209100,   0.040819,   0.053000,   0.875000, 586.028991
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135296,      15093,     104701,      30595,   0.122342,   0.163100,   0.175000,   0.210100,   0.043898,   0.054000,   1.093000, 598.335058
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:41   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:41   0:00 /usr/lib/linux
memcache      9 84.1  0.0 130496 50048 pts/0    Sl+  12:41   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3635635495      instructions:u            #    0.55  insn per cycle         
        6553280056      cycles:u                                                    
          24276292      armv8_pmuv3_0/br_mis_pred/:u                                   
         620572466      armv8_pmuv3_0/br_pred/:u                                    

      38.180432146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 31000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 31000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 2106913280
starting receive base loop
num_worker_connections 32
Creating worker on tid 1771434496
starting receive base loop
num_worker_connections 32
Creating worker on tid 1435890176
starting receive base loop
num_worker_connections 32
Creating worker on tid 1100345856
starting receive base loop
num_worker_connections 32
Creating worker on tid 764801536
starting receive base loop
num_worker_connections 32
Creating worker on tid 429257216
starting receive base loop
num_worker_connections 32
Creating worker on tid 93712896
starting receive base loop
Created 256 connections total
Creating worker on tid 4053135872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292119.290544,       0.0,       84714,      76219,       8495,      46094,      30125,   4.500503,   8.900000,  12.400000, 101.700000,  17.304620,   0.000000, 256.330013, 412.978522
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139331,      15721,      93731,      45600,   0.096321,   0.122100,   0.139100,   0.176100,   0.029260,   0.053000,   0.616000, 489.102626
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139435,      15619,      99493,      39942,   0.100332,   0.131000,   0.144100,   0.185100,   0.030931,   0.053000,   0.726000, 533.090336
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139609,      15448,     102115,      37494,   0.102155,   0.132100,   0.151100,   0.188100,   0.034907,   0.053000,   0.898000, 554.160591
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139486,      15562,     104203,      35283,   0.105676,   0.141100,   0.155100,   0.199100,   0.039170,   0.053000,   0.935000, 572.143864
Outstanding requests per worker:
0 1 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139517,      15534,     106296,      33221,   0.106850,   0.142100,   0.155100,   0.202100,   0.043112,   0.052000,   0.899000, 587.117147
Outstanding requests per worker:
0 0 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139574,      15479,     107712,      31862,   0.110336,   0.143100,   0.163100,   0.223100,   0.057658,   0.053000,   1.193000, 597.488021
Outstanding requests per worker:
0 1 0 1 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:42   0:00 /usr/lib/linux
memcache      8 88.4  0.0 130496 51136 pts/0    Sl+  12:42   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3832849904      instructions:u            #    0.56  insn per cycle         
        6880185309      cycles:u                                                    
          27035717      armv8_pmuv3_0/br_mis_pred/:u                                   
         669927576      armv8_pmuv3_0/br_pred/:u                                    

      36.880019604 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 256 conns, 8 threads, 32000 rps'
==> Bench: 262114 keys, 256 conns, 8 threads, 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 262114 -c 256 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 8'
Starting client with -r 32000 -k 262114 -c 256 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 256 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 256 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 262114
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 32
num_worker_connections 32
Creating worker on tid 1872425472
starting receive base loop
num_worker_connections 32
Creating worker on tid 1535242752
starting receive base loop
num_worker_connections 32
Creating worker on tid 1199698432
starting receive base loop
num_worker_connections 32
Creating worker on tid 864154112
starting receive base loop
num_worker_connections 32
Creating worker on tid 528609792
starting receive base loop
num_worker_connections 32
Creating worker on tid 193065472
starting receive base loop
num_worker_connections 32
Creating worker on tid 4152488448
starting receive base loop
Created 256 connections total
Creating worker on tid 3816944128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292160.290585,       0.0,       89551,      80509,       9042,      49060,      31449,   8.875697,  16.400000,  18.900000, 128.600000,  22.085480,   0.000000, 324.797988, 418.907638
Outstanding requests per worker:
24 27 32 28 30 26 32 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.2,      159996,     143869,      16127,      97355,      46514,   7.495911,  13.500000,  14.100000,  15.000000,   4.291835,   0.089000,  16.364001, 493.584400
Outstanding requests per worker:
26 29 36 35 37 29 32 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.8,      160004,     143808,      16196,     102808,      41000,   7.876605,  14.400000,  15.100000,  16.100000,   4.561526,   0.080000,  17.599000, 534.718034
Outstanding requests per worker:
30 29 30 32 40 32 30 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     144125,      15877,     106011,      38114,   8.328674,  15.400000,  16.200000,  17.600000,   4.894033,   0.086000,  21.895001, 558.741343
Outstanding requests per worker:
33 30 30 38 34 28 44 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143980,      16028,     108079,      35901,   8.683421,  16.300000,  17.100000,  18.200000,   5.146737,   0.089000,  20.702999, 574.571183
Outstanding requests per worker:
36 32 30 35 34 34 38 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143880,      16128,     110048,      33832,   8.875001,  16.700000,  17.600000,  19.100000,   5.288460,   0.088000,  22.546001, 591.261732
Outstanding requests per worker:
31 39 43 34 38 31 44 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.2,      160001,     143948,      16053,     111482,      32466,   9.026338,  17.100000,  17.900000,  19.100000,   5.393115,   0.090000,  22.638001, 600.403048
Outstanding requests per worker:
38 33 33 40 37 32 44 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:42   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:42   0:00 /usr/lib/linux
memcache      9 88.9  0.0 129472 50624 pts/0    Sl+  12:42   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3819366554      instructions:u            #    0.68  insn per cycle         
        5620330400      cycles:u                                                    
          22054183      armv8_pmuv3_0/br_mis_pred/:u                                   
         599949026      armv8_pmuv3_0/br_pred/:u                                    

      37.071048486 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 27000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3016028672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292203.290628,       0.0,       53983,      48583,       5400,      28165,      20418,   1.841949,   2.500000,   2.900000,   6.300000,   1.369567,   0.000000,  52.391998, 388.383550
Outstanding requests per worker:
37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.4,      135132,     121593,      13539,      79561,      42032,   1.771879,   2.600000,   2.800000,   3.500000,   0.592497,   0.230000,   7.284000, 469.141513
Outstanding requests per worker:
48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121323,      13824,      84795,      36528,   1.816599,   2.600000,   2.800000,   3.500000,   0.602015,   0.225000,   7.091000, 517.768997
Outstanding requests per worker:
45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121927,      13213,      88417,      33510,   1.872843,   2.700000,   3.000000,   3.700000,   0.637923,   0.222000,   8.131000, 546.247615
Outstanding requests per worker:
47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.6,      135138,     121667,      13471,      89915,      31752,   1.874224,   2.700000,   3.000000,   3.700000,   0.634436,   0.231000,   7.573000, 562.733823
Outstanding requests per worker:
54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121630,      13511,      91663,      29967,   1.859854,   2.700000,   2.900000,   3.600000,   0.621461,   0.227000,   7.160000, 577.032574
Outstanding requests per worker:
55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.4,      135152,     121518,      13634,      92566,      28952,   1.886961,   2.700000,   3.000000,   3.700000,   0.641603,   0.225000,   7.034000, 587.715104
Outstanding requests per worker:
47 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:43   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:43   0:00 /usr/lib/linux
memcache      9 71.6  0.0 124352 48064 pts/0    Sl+  12:43   0:28 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3272644995      instructions:u            #    0.53  insn per cycle         
        6133998625      cycles:u                                                    
          23544349      armv8_pmuv3_0/br_mis_pred/:u                                   
         573907469      armv8_pmuv3_0/br_pred/:u                                    

      39.331019733 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 28000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 512
Created 512 connections total
Creating worker on tid 2652369408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292246.290671,       0.0,       57041,      51356,       5685,      30034,      21322,   2.539460,   3.600000,   4.200000,  10.200000,   1.721670,   0.000000,  46.815999, 393.693356
Outstanding requests per worker:
60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.4,      142862,     128504,      14358,      84538,      43966,   2.449514,   3.600000,   4.000000,   5.100000,   0.884626,   0.232000,   9.547000, 472.623879
Outstanding requests per worker:
66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.0,      142855,     128351,      14504,      90089,      38262,   2.557551,   3.800000,   4.100000,   5.300000,   0.928870,   0.229000,  10.322000, 520.803367
Outstanding requests per worker:
74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.6,      142863,     128866,      13997,      93580,      35286,   2.651936,   3.900000,   4.300000,   5.600000,   0.976716,   0.259000,  11.922000, 547.561327
Outstanding requests per worker:
81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.2,      142861,     128501,      14360,      95591,      32910,   2.652434,   3.900000,   4.300000,   5.500000,   0.980899,   0.232000,  11.544000, 566.433553
Outstanding requests per worker:
81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28576.0,      142880,     128535,      14345,      97329,      31206,   2.657067,   3.900000,   4.300000,   5.500000,   0.977842,   0.237000,  12.272000, 580.432948
Outstanding requests per worker:
66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.0,      142855,     128519,      14336,      98300,      30219,   2.711446,   4.000000,   4.400000,   5.700000,   1.010792,   0.226000,  12.634000, 591.069367
Outstanding requests per worker:
74 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:44   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:44   0:00 /usr/lib/linux
memcache     10 75.9  0.0 125376 47488 pts/0    Sl+  12:44   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3434465493      instructions:u            #    0.55  insn per cycle         
        6300116388      cycles:u                                                    
          23709433      armv8_pmuv3_0/br_mis_pred/:u                                   
         599660184      armv8_pmuv3_0/br_pred/:u                                    

      38.930200034 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 29000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3345609216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292288.290713,       0.0,       58688,      52855,       5833,      31152,      21703,   3.716824,   5.400000,   6.800000,  15.200000,   2.594514,   0.000000,  58.952998, 397.107483
Outstanding requests per worker:
94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.4,      147052,     132242,      14810,      87381,      44861,   3.510417,   5.300000,   5.900000,   7.700000,   1.378233,   0.265000,  14.264000, 476.192201
Outstanding requests per worker:
112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132174,      14899,      93180,      38994,   3.840255,   5.800000,   6.600000,   8.700000,   1.569161,   0.240000,  27.569000, 523.585123
Outstanding requests per worker:
106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132691,      14375,      97025,      35666,   3.827117,   5.800000,   6.500000,   8.400000,   1.524333,   0.242000,  15.205000, 552.437980
Outstanding requests per worker:
108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29409.2,      147046,     132196,      14850,      98802,      33394,   3.857581,   5.800000,   6.600000,   8.500000,   1.538970,   0.251000,  19.058000, 571.283617
Outstanding requests per worker:
128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.2,      147076,     132330,      14746,     100224,      32106,   4.043803,   6.100000,   7.000000,   9.100000,   1.661253,   0.234000,  19.632000, 582.843006
Outstanding requests per worker:
120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.2,      147051,     132324,      14727,     101618,      30706,   3.965571,   6.000000,   6.800000,   8.800000,   1.595226,   0.237000,  17.771000, 594.024954
Outstanding requests per worker:
135 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:45   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:45   0:00 /usr/lib/linux
memcache     10 81.7  0.0 128448 51776 pts/0    Sl+  12:45   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3539107845      instructions:u            #    0.55  insn per cycle         
        6398489194      cycles:u                                                    
          24825719      armv8_pmuv3_0/br_mis_pred/:u                                   
         616189078      armv8_pmuv3_0/br_pred/:u                                    

      37.840683782 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 30000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3013407232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292331.290756,       0.0,       60435,      54396,       6039,      31920,      22476,   4.991172,   7.700000,   9.700000,  18.700000,   3.322953,   0.000000,  77.027000, 395.462332
Outstanding requests per worker:
134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30300.6,      151503,     136276,      15227,      90181,      46095,   4.947593,   7.600000,   8.900000,  12.000000,   2.187679,   0.273000,  31.036999, 477.038481
Outstanding requests per worker:
162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.8,      151534,     136235,      15299,      96133,      40102,   5.341573,   8.200000,   9.600000,  12.600000,   2.320081,   0.278000,  33.509001, 525.468675
Outstanding requests per worker:
161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136588,      14933,      99863,      36725,   5.725588,   8.900000,  10.400000,  13.900000,   2.560392,   0.307000,  31.734999, 553.570094
Outstanding requests per worker:
165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30298.0,      151490,     136293,      15197,     101850,      34443,   5.772624,   9.000000,  10.600000,  14.100000,   2.597585,   0.294000,  29.903000, 570.534341
Outstanding requests per worker:
201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30309.2,      151546,     136350,      15196,     103411,      32939,   5.864796,   9.100000,  10.600000,  14.000000,   2.585240,   0.271000,  27.418001, 584.266630
Outstanding requests per worker:
185 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.0,      151535,     136340,      15195,     104920,      31420,   5.976242,   9.400000,  11.000000,  15.000000,   2.746137,   0.271000,  36.749002, 596.008816
Outstanding requests per worker:
183 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:45   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   12:45   0:00 /usr/lib/linux
memcache     11 81.0  0.0 128448 50944 pts/0    Sl+  12:45   0:30 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3612226344      instructions:u            #    0.56  insn per cycle         
        6501909553      cycles:u                                                    
          25417700      armv8_pmuv3_0/br_mis_pred/:u                                   
         624614336      armv8_pmuv3_0/br_pred/:u                                    

      38.020041260 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 31000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 512 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3011441152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292373.290798,       0.0,       62213,      56002,       6211,      33119,      22883,  10.536190,  18.000000,  22.000000,  32.500000,   6.298891,   0.000000, 115.658000, 399.650762
Outstanding requests per worker:
247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31229.6,      156148,     140457,      15691,      93559,      46898,   9.848144,  16.500000,  19.800000,  27.900000,   5.227934,   0.401000,  62.808998, 480.814384
Outstanding requests per worker:
358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31231.4,      156157,     140408,      15749,      99479,      40929,  12.833338,  22.200000,  27.200000,  40.100000,   7.569591,   0.297000,  96.695997, 528.221853
Outstanding requests per worker:
463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31255.0,      156275,     140799,      15476,     102994,      37805,  12.617593,  21.600000,  26.100000,  36.300000,   6.991872,   0.343000,  75.336002, 552.477376
Outstanding requests per worker:
446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31250.6,      156253,     140670,      15583,     104705,      35965,  13.486953,  23.300000,  28.300000,  39.800000,   7.661332,   0.329000,  85.845999, 568.722492
Outstanding requests per worker:
454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31237.6,      156188,     140510,      15678,     106827,      33683,  16.889415,  30.500000,  38.100000,  57.300000,  11.082026,   0.363000, 143.388003, 584.727792
Outstanding requests per worker:
525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31266.2,      156331,     140609,      15722,     108558,      32051,  15.067258,  26.500000,  32.400000,  46.000000,   8.884621,   0.296000, 102.371998, 598.043319
Outstanding requests per worker:
453 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:46   0:00 /usr/lib/linux
memcache      8 84.3  0.0 130496 54656 pts/0    Sl+  12:46   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3675676418      instructions:u            #    0.57  insn per cycle         
        6501407397      cycles:u                                                    
          24533872      armv8_pmuv3_0/br_mis_pred/:u                                   
         630453664      armv8_pmuv3_0/br_pred/:u                                    

      37.890501200 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 1 threads, 32000 rps'
==> Bench: 262114 keys, 512 conns, 1 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 262114 -c 512 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 1'
Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 512 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 512 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 512
Created 512 connections total
Creating worker on tid 3096113664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292416.290841,       0.0,       63567,      57227,       6340,      33746,      23481,  30.614837,  41.600000,  46.000000,  58.800000,  10.690972,   0.000000, 227.524996, 398.662677
Outstanding requests per worker:
911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30992.6,      154963,     139393,      15570,      92741,      46652, 112.867864, 259.600000, 327.500000, 460.900000, 103.463644,   0.789000, 749.535024, 480.775333
Outstanding requests per worker:
6453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31108.6,      155543,     139837,      15706,      99428,      40409, 254.818795, 520.200000, 612.900000, 781.900000, 181.910658,   0.742000, 995.724976, 530.024457
Outstanding requests per worker:
9630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31035.0,      155175,     139783,      15392,     102611,      37172, 343.533947, 689.700000, 804.500000, 1021.300000, 242.667017,   1.406000, 1409.868956, 555.389647
Outstanding requests per worker:
12045 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139636,      15416,     104576,      35060, 411.017861, 820.700000, 987.400000, 1324.900000, 298.651990,   0.926000, 1749.815941, 573.001948
Outstanding requests per worker:
13922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31019.2,      155096,     139547,      15549,     106148,      33399, 470.132313, 969.800000, 1141.900000, 1410.100000, 339.475074,   0.415000, 1797.271967, 586.102768
Outstanding requests per worker:
15662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30955.4,      154777,     139186,      15591,     107279,      31907, 521.330165, 1055.100000, 1240.900000, 1496.300000, 366.512196,   1.314000, 1988.716006, 597.027309
Outstanding requests per worker:
17080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:47   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:47   0:00 /usr/lib/linux
memcache      9 81.0  0.0 129472 53376 pts/0    Sl+  12:47   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3632129003      instructions:u            #    0.58  insn per cycle         
        6208822304      cycles:u                                                    
          22627347      armv8_pmuv3_0/br_mis_pred/:u                                   
         606071759      armv8_pmuv3_0/br_pred/:u                                    

      39.279229728 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 27000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 552006144
starting receive base loop
Created 512 connections total
Creating worker on tid 2706567680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292459.290884,       0.0,       69039,      62208,       6831,      36877,      25331,   0.398885,   0.431100,   0.544100,   0.767100,   2.155212,   0.000000,  96.891999, 401.904835
Outstanding requests per worker:
5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.6,      135153,     121559,      13594,      80725,      40834,   0.312279,   0.438100,   0.541100,   0.645100,   0.100908,   0.139000,   1.005000, 478.582581
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121536,      13604,      85533,      36003,   0.313069,   0.439100,   0.543100,   0.655100,   0.102880,   0.138000,   1.166000, 521.919571
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121518,      13630,      88368,      33150,   0.312967,   0.439100,   0.543100,   0.654000,   0.102969,   0.136000,   1.283000, 547.737545
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121607,      13537,      90345,      31262,   0.313148,   0.439100,   0.542100,   0.653100,   0.102569,   0.139000,   1.233000, 565.801755
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121649,      13502,      92002,      29647,   0.312487,   0.437100,   0.539000,   0.647100,   0.100998,   0.139000,   1.105000, 579.366259
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121699,      13444,      93076,      28623,   0.314123,   0.446100,   0.544100,   0.655100,   0.103696,   0.137000,   1.290000, 589.618329
Outstanding requests per worker:
4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:47   0:00 /usr/lib/linux
memcache      8 78.5  0.0 124352 48064 pts/0    Sl+  12:47   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3320976226      instructions:u            #    0.52  insn per cycle         
        6345315339      cycles:u                                                    
          23767571      armv8_pmuv3_0/br_mis_pred/:u                                   
         578671533      armv8_pmuv3_0/br_pred/:u                                    

      37.930933812 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 28000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 672723456
starting receive base loop
Created 512 connections total
Creating worker on tid 2824663552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292502.290927,       0.0,       72521,      65329,       7192,      39015,      26314,   0.325421,   0.455100,   0.527100,   0.644100,   0.330851,   0.000000,  29.432001, 406.390990
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.2,      140861,     126712,      14149,      84661,      42051,   0.325958,   0.461100,   0.541100,   0.650100,   0.102402,   0.138000,   1.613000, 484.126673
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126615,      14237,      89290,      37325,   0.325402,   0.460100,   0.538100,   0.651100,   0.102677,   0.139000,   1.452000, 523.753560
Outstanding requests per worker:
7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126753,      14100,      92408,      34345,   0.326512,   0.462100,   0.539000,   0.654000,   0.102695,   0.140000,   1.516000, 551.458261
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126743,      14108,      94186,      32557,   0.326496,   0.462100,   0.539000,   0.650100,   0.103278,   0.143000,   1.418000, 566.402713
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126890,      13968,      96131,      30759,   0.326586,   0.462100,   0.539000,   0.654000,   0.103484,   0.139000,   1.404000, 582.315691
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126566,      14287,      97154,      29412,   0.327810,   0.464100,   0.542100,   0.649100,   0.102561,   0.149000,   1.451000, 592.527503
Outstanding requests per worker:
6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:48   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5952 pts/0    S+   12:48   0:00 /usr/lib/linux
memcache     13 80.7  0.0 127424 49088 pts/0    Sl+  12:48   0:30 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  12:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3445807326      instructions:u            #    0.53  insn per cycle         
        6494699624      cycles:u                                                    
          24020331      armv8_pmuv3_0/br_mis_pred/:u                                   
         600950951      armv8_pmuv3_0/br_pred/:u                                    

      37.930885422 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 29000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 453571072
starting receive base loop
Created 512 connections total
Creating worker on tid 2607215104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292545.290970,       0.0,       75284,      67781,       7503,      40418,      27363,   0.354215,   0.485100,   0.577100,   0.707100,   0.736891,   0.000000,  49.440999, 405.973916
Outstanding requests per worker:
7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132534,      14534,      88500,      44034,   0.341705,   0.488100,   0.571100,   0.667100,   0.107893,   0.151000,   1.181000, 482.464575
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132172,      14902,      93500,      38672,   0.344646,   0.494100,   0.576100,   0.674100,   0.109735,   0.145000,   1.203000, 526.767939
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.0,      147070,     132347,      14723,      96543,      35804,   0.343398,   0.490100,   0.571100,   0.668100,   0.108520,   0.148000,   1.297000, 551.957453
Outstanding requests per worker:
7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.8,      147074,     132437,      14637,      98811,      33626,   0.346055,   0.497100,   0.575100,   0.675100,   0.110296,   0.157000,   1.324000, 568.614677
Outstanding requests per worker:
5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132219,      14853,     100311,      31908,   0.346920,   0.497100,   0.577100,   0.679100,   0.111819,   0.152000,   1.383000, 583.178129
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132176,      14893,     101698,      30478,   0.345223,   0.496100,   0.573100,   0.670100,   0.108446,   0.150000,   1.029000, 594.698992
Outstanding requests per worker:
4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:49   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   12:49   0:00 /usr/lib/linux
memcache     11 82.4  0.0 129472 51840 pts/0    Sl+  12:49   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3581175072      instructions:u            #    0.54  insn per cycle         
        6596059628      cycles:u                                                    
          24021747      armv8_pmuv3_0/br_mis_pred/:u                                   
         622431510      armv8_pmuv3_0/br_pred/:u                                    

      37.799616523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 30000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 1028977152
starting receive base loop
Created 512 connections total
Creating worker on tid 3178951168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292588.291013,       0.0,       77401,      69675,       7726,      41794,      27881,   0.399703,   0.528100,   0.631000,   0.907100,   1.075230,   0.000000,  59.163999, 409.902662
Outstanding requests per worker:
8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.4,      151522,     136390,      15132,      91497,      44893,   0.361834,   0.512100,   0.585000,   0.694100,   0.113198,   0.150000,   1.281000, 487.152387
Outstanding requests per worker:
15 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30307.8,      151539,     136201,      15338,      96689,      39512,   0.363185,   0.516000,   0.587100,   0.696100,   0.113862,   0.150000,   1.297000, 530.447515
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.8,      151534,     136209,      15325,      99642,      36567,   0.363579,   0.515100,   0.586100,   0.695100,   0.113592,   0.142000,   1.275000, 553.163881
Outstanding requests per worker:
3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.6,      151528,     136346,      15182,     101907,      34439,   0.365277,   0.520100,   0.589100,   0.698100,   0.115801,   0.161000,   1.599000, 572.045267
Outstanding requests per worker:
6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.8,      151534,     136360,      15174,     103714,      32646,   0.365078,   0.516000,   0.587100,   0.695100,   0.115609,   0.157000,   1.549000, 584.710392
Outstanding requests per worker:
5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136256,      15269,     104952,      31304,   0.364089,   0.515100,   0.584100,   0.690100,   0.111622,   0.163000,   1.345000, 595.555029
Outstanding requests per worker:
6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:50   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   12:50   0:00 /usr/lib/linux
memcache     11 79.1  0.0 129472 53632 pts/0    Sl+  12:50   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3661452096      instructions:u            #    0.55  insn per cycle         
        6718186986      cycles:u                                                    
          24880392      armv8_pmuv3_0/br_mis_pred/:u                                   
         633150441      armv8_pmuv3_0/br_pred/:u                                    

      39.450446289 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 31000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 512 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 602534400
starting receive base loop
Created 512 connections total
Creating worker on tid 2757554688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292632.291057,       0.0,       79508,      71523,       7985,      42648,      28875,   0.429963,   0.592100,   0.689100,   1.400000,   0.708753,   0.000000,  51.546000, 405.137774
Outstanding requests per worker:
7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140328,      15930,      93496,      46832,   0.384260,   0.540100,   0.610100,   0.706100,   0.117501,   0.155000,   1.487000, 483.383216
Outstanding requests per worker:
8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140610,      15649,     100000,      40610,   0.385871,   0.542100,   0.609100,   0.699100,   0.117099,   0.155000,   1.258000, 531.286601
Outstanding requests per worker:
6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140643,      15618,     102962,      37681,   0.388564,   0.545100,   0.612100,   0.713100,   0.119007,   0.162000,   1.347000, 554.373179
Outstanding requests per worker:
6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.4,      156257,     140867,      15390,     105561,      35306,   0.390349,   0.548100,   0.615100,   0.716100,   0.119237,   0.152000,   1.465000, 572.713169
Outstanding requests per worker:
7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.8,      156259,     140649,      15610,     107153,      33496,   0.393523,   0.552100,   0.620100,   0.733100,   0.125866,   0.157000,   1.627000, 585.252536
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140581,      15677,     108478,      32103,   0.391474,   0.548100,   0.614100,   0.701100,   0.116587,   0.165000,   1.103000, 596.266245
Outstanding requests per worker:
7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:50   0:00 /usr/lib/linux
memcache      8 82.4  0.0 130496 51648 pts/0    Sl+  12:50   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3749559794      instructions:u            #    0.57  insn per cycle         
        6544587747      cycles:u                                                    
          25106733      armv8_pmuv3_0/br_mis_pred/:u                                   
         642424942      armv8_pmuv3_0/br_pred/:u                                    

      39.209369674 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 2 threads, 32000 rps'
==> Bench: 262114 keys, 512 conns, 2 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 262114 -c 512 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 2'
Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 512 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 512 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 862253568
starting receive base loop
Created 512 connections total
Creating worker on tid 3017929216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292674.291099,       0.0,       81484,      73371,       8113,      44170,      29201,  11.656039,  27.600000,  30.200000,  32.300000,  10.042479,   0.000000,  75.494997, 411.636369
Outstanding requests per worker:
226 214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32345.2,      161726,     145553,      16173,      98113,      47440,   1.741809,   5.300000,  11.400000,  19.100000,   3.851127,   0.168000,  23.692001, 490.051445
Outstanding requests per worker:
8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.0,      161295,     145100,      16195,     103357,      41743,   0.433602,   0.594100,   0.656100,   0.753000,   0.125689,   0.172000,   1.418000, 533.072584
Outstanding requests per worker:
9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.8,      161304,     145255,      16049,     106775,      38480,   0.442510,   0.606100,   0.668100,   0.787100,   0.130418,   0.175000,   1.812000, 557.558012
Outstanding requests per worker:
9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.0,      161295,     145180,      16115,     109048,      36132,   0.448765,   0.608000,   0.670100,   0.787100,   0.133327,   0.178000,   1.574000, 575.459133
Outstanding requests per worker:
9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.6,      161303,     145177,      16126,     111060,      34117,   0.454899,   0.617100,   0.682100,   0.861100,   0.140933,   0.175000,   1.562000, 588.888329
Outstanding requests per worker:
9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     145079,      16222,     112401,      32678,   0.462348,   0.622100,   0.690100,   1.100000,   0.152881,   0.176000,   1.731000, 601.262547
Outstanding requests per worker:
8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:51   0:00 /usr/lib/linux
memcache      8 87.4  0.0 130496 55488 pts/0    Sl+  12:51   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3802964450      instructions:u            #    0.59  insn per cycle         
        6459389513      cycles:u                                                    
          23391408      armv8_pmuv3_0/br_mis_pred/:u                                   
         641173466      armv8_pmuv3_0/br_pred/:u                                    

      37.950281792 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 27000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1555165696
starting receive base loop
num_worker_connections 128
Creating worker on tid 441971200
starting receive base loop
num_worker_connections 128
Creating worker on tid 3622892032
starting receive base loop
Created 512 connections total
Creating worker on tid 2514285056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292717.291142,       0.0,       77678,      69881,       7797,      41825,      28056,   0.350328,   0.266100,   0.387100,   0.686100,   3.416485,   0.000000, 126.291007, 407.446116
Outstanding requests per worker:
1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121515,      13625,      81126,      40389,   0.167751,   0.268100,   0.381100,   0.502100,   0.084814,   0.070000,   0.845000, 483.447171
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121458,      13688,      85870,      35588,   0.168121,   0.270100,   0.382100,   0.506100,   0.085878,   0.069000,   0.967000, 525.214387
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121699,      13442,      88437,      33262,   0.168455,   0.270100,   0.384100,   0.509100,   0.086750,   0.068000,   0.909000, 548.891651
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121516,      13626,      90160,      31356,   0.168213,   0.269100,   0.381100,   0.503100,   0.085949,   0.072000,   1.087000, 564.819406
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121534,      13609,      92000,      29534,   0.168433,   0.269100,   0.380100,   0.503100,   0.086853,   0.073000,   1.218000, 580.556996
Outstanding requests per worker:
0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121658,      13485,      93171,      28487,   0.169636,   0.272100,   0.384100,   0.511100,   0.088721,   0.068000,   1.146000, 591.378898
Outstanding requests per worker:
2 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:52   0:00 /usr/lib/linux
memcache      9 80.4  0.0 127424 51136 pts/0    Sl+  12:52   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3370833799      instructions:u            #    0.52  insn per cycle         
        6427690288      cycles:u                                                    
          23314856      armv8_pmuv3_0/br_mis_pred/:u                                   
         588025296      armv8_pmuv3_0/br_pred/:u                                    

      38.020889113 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 28000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1332081152
starting receive base loop
num_worker_connections 128
Creating worker on tid 224522752
starting receive base loop
num_worker_connections 128
Creating worker on tid 3405443584
starting receive base loop
Created 512 connections total
Creating worker on tid 2296836608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292760.291185,       0.0,       80896,      72784,       8112,      43641,      29143,   0.448171,   0.304000,   0.389100,   2.000000,   4.314026,   0.000000, 137.246996, 407.230106
Outstanding requests per worker:
2 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.4,      140862,     126515,      14347,      84569,      41946,   0.171504,   0.299100,   0.366100,   0.479100,   0.083860,   0.070000,   1.492000, 482.610837
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.6,      140853,     126585,      14268,      89903,      36682,   0.170909,   0.296100,   0.365100,   0.478100,   0.083881,   0.072000,   1.520000, 529.092349
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.4,      140857,     126842,      14015,      92366,      34476,   0.170999,   0.294100,   0.365100,   0.477100,   0.083276,   0.070000,   0.957000, 550.372818
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126653,      14203,      94241,      32412,   0.171324,   0.296100,   0.365100,   0.476100,   0.082536,   0.072000,   1.462000, 566.277159
Outstanding requests per worker:
1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.4,      140862,     126848,      14014,      96277,      30571,   0.172463,   0.302100,   0.368100,   0.480100,   0.085142,   0.071000,   1.091000, 583.584085
Outstanding requests per worker:
0 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126655,      14197,      97444,      29211,   0.171676,   0.298100,   0.364100,   0.475100,   0.084349,   0.072000,   1.374000, 594.870925
Outstanding requests per worker:
0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:52   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:52   0:00 /usr/lib/linux
memcache      9 82.6  0.0 127424 51392 pts/0    Sl+  12:52   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3518502855      instructions:u            #    0.53  insn per cycle         
        6605348216      cycles:u                                                    
          23761660      armv8_pmuv3_0/br_mis_pred/:u                                   
         618185099      armv8_pmuv3_0/br_pred/:u                                    

      37.919624304 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 29000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1856893440
starting receive base loop
num_worker_connections 128
Creating worker on tid 745271808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3931632128
starting receive base loop
Created 512 connections total
Creating worker on tid 2817585664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292802.291227,       0.0,       83968,      75650,       8318,      45418,      30232,   0.500917,   0.347100,   0.449100,   2.600000,   4.605272,   0.000000, 138.547003, 410.112545
Outstanding requests per worker:
1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.4,      145997,     131427,      14570,      88310,      43117,   0.190571,   0.339100,   0.383100,   0.488100,   0.088479,   0.074000,   1.802000, 487.912514
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.4,      146002,     131283,      14719,      93028,      38255,   0.190537,   0.337100,   0.382100,   0.490100,   0.088610,   0.073000,   0.992000, 528.553705
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131299,      14694,      95987,      35312,   0.191223,   0.339100,   0.383100,   0.489100,   0.088789,   0.069000,   1.757000, 552.195538
Outstanding requests per worker:
1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.8,      145994,     131344,      14650,      98052,      33292,   0.190901,   0.339100,   0.382100,   0.486100,   0.087146,   0.074000,   1.344000, 569.835135
Outstanding requests per worker:
2 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.0,      145995,     131472,      14523,      99711,      31761,   0.192152,   0.341100,   0.383100,   0.488100,   0.089360,   0.069000,   1.081000, 582.906337
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.6,      146003,     131120,      14883,     100672,      30448,   0.193153,   0.342100,   0.385100,   0.489100,   0.091137,   0.072000,   1.202000, 594.996530
Outstanding requests per worker:
1 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:53   0:00 /usr/lib/linux
memcache      8 83.6  0.0 128448 53184 pts/0    Sl+  12:53   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3595245767      instructions:u            #    0.54  insn per cycle         
        6642757324      cycles:u                                                    
          24175261      armv8_pmuv3_0/br_mis_pred/:u                                   
         622638582      armv8_pmuv3_0/br_pred/:u                                    

      38.061029010 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 30000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2126049792
starting receive base loop
num_worker_connections 128
Creating worker on tid 1013707264
starting receive base loop
num_worker_connections 128
Creating worker on tid 4200067584
starting receive base loop
Created 512 connections total
Creating worker on tid 3086021120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292845.291270,       0.0,       88079,      79370,       8709,      47766,      31604,   0.399509,   0.356100,   0.473100,   3.000000,   3.200240,   0.000000, 138.101995, 411.919126
Outstanding requests per worker:
2 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135248,      15142,      91139,      44109,   0.198476,   0.348100,   0.394100,   0.485100,   0.091410,   0.068000,   1.040000, 489.696838
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135196,      15192,      96212,      38984,   0.197777,   0.346000,   0.386100,   0.485100,   0.091302,   0.072000,   0.964000, 530.721545
Outstanding requests per worker:
2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135497,      14895,      99023,      36474,   0.199617,   0.347100,   0.391100,   0.485100,   0.092814,   0.073000,   1.175000, 555.036052
Outstanding requests per worker:
1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135413,      14979,     101151,      34262,   0.198537,   0.346000,   0.386100,   0.482100,   0.089049,   0.073000,   0.743000, 570.406239
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135230,      15155,     102744,      32486,   0.201725,   0.349100,   0.413100,   0.487100,   0.094148,   0.073000,   1.128000, 584.971382
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135343,      15043,     104478,      30865,   0.203325,   0.351100,   0.424100,   0.488100,   0.095732,   0.068000,   1.164000, 598.064606
Outstanding requests per worker:
2 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:54   0:00 /usr/lib/linux
memcache      9 87.4  0.0 129472 53184 pts/0    Sl+  12:54   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3695772808      instructions:u            #    0.55  insn per cycle         
        6764698687      cycles:u                                                    
          25144090      armv8_pmuv3_0/br_mis_pred/:u                                   
         641773684      armv8_pmuv3_0/br_pred/:u                                    

      37.990130245 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 31000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1731916288
starting receive base loop
num_worker_connections 128
Creating worker on tid 619115008
starting receive base loop
num_worker_connections 128
Creating worker on tid 3805475328
starting receive base loop
Created 512 connections total
Creating worker on tid 2691428864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292888.291313,       0.0,       89102,      80185,       8917,      48437,      31748,   5.943380,  14.800000,  17.300000,  19.900000,   6.763385,   0.000000, 124.057002, 414.724774
Outstanding requests per worker:
12 14 16 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31021.2,      155106,     139574,      15532,      94345,      45229,   0.215050,   0.350000,   0.420100,   0.497100,   0.117694,   0.075000,   2.264000, 492.875894
Outstanding requests per worker:
1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139391,      15666,      99456,      39935,   0.212076,   0.350000,   0.417100,   0.482100,   0.093682,   0.073000,   0.997000, 533.993134
Outstanding requests per worker:
2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139537,      15511,     102574,      36963,   0.212437,   0.350000,   0.414100,   0.477100,   0.091509,   0.075000,   1.012000, 556.938790
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139577,      15473,     104939,      34638,   0.210632,   0.348100,   0.384100,   0.467100,   0.085737,   0.076000,   0.812000, 574.741340
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139532,      15524,     106402,      33130,   0.216938,   0.352100,   0.418100,   0.479100,   0.095997,   0.073000,   1.168000, 588.414851
Outstanding requests per worker:
1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139484,      15574,     107810,      31674,   0.217635,   0.352100,   0.420100,   0.481100,   0.095693,   0.073000,   1.251000, 599.555203
Outstanding requests per worker:
1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   12:55   0:00 /usr/lib/linux
memcache      9 85.9  0.0 130496 53248 pts/0    Sl+  12:55   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3776301740      instructions:u            #    0.56  insn per cycle         
        6753212801      cycles:u                                                    
          25616975      armv8_pmuv3_0/br_mis_pred/:u                                   
         649071936      armv8_pmuv3_0/br_pred/:u                                    

      37.929497469 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 4 threads, 32000 rps'
==> Bench: 262114 keys, 512 conns, 4 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 262114 -c 512 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 4'
Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 512 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 512 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2079191552
starting receive base loop
num_worker_connections 128
Creating worker on tid 970781184
starting receive base loop
num_worker_connections 128
Creating worker on tid 4151702016
starting receive base loop
Created 512 connections total
Creating worker on tid 3043095040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292930.291355,       0.0,       91406,      82163,       9243,      49745,      32418,   9.134990,  23.700000,  26.000000,  29.000000,   9.570755,   0.000000, 130.334005, 415.892762
Outstanding requests per worker:
85 80 90 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32070.0,      160350,     144034,      16316,      97717,      46317,   1.239427,   3.800000,   9.000000,  14.900000,   3.006453,   0.077000,  17.983001, 493.992995
Outstanding requests per worker:
4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143871,      16140,     103070,      40801,   0.251089,   0.392000,   0.436100,   0.536100,   0.101129,   0.077000,   1.074000, 537.601372
Outstanding requests per worker:
2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144217,      15790,     106372,      37845,   0.256892,   0.403100,   0.437100,   0.533100,   0.103337,   0.081000,   1.461000, 560.626265
Outstanding requests per worker:
3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144129,      15882,     108481,      35648,   0.264825,   0.418100,   0.444100,   0.565100,   0.108372,   0.076000,   1.275000, 576.760811
Outstanding requests per worker:
3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144219,      15795,     110409,      33810,   0.265681,   0.416100,   0.443100,   0.552100,   0.108572,   0.084000,   1.368000, 590.125129
Outstanding requests per worker:
3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     144142,      15864,     111768,      32374,   0.271678,   0.420100,   0.448100,   0.713100,   0.124838,   0.079000,   1.551000, 602.511059
Outstanding requests per worker:
3 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:55   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:55   0:00 /usr/lib/linux
memcache     10 86.2  0.0 131520 55424 pts/0    Sl+  12:55   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3807990645      instructions:u            #    0.59  insn per cycle         
        6503045878      cycles:u                                                    
          23568442      armv8_pmuv3_0/br_mis_pred/:u                                   
         645801294      armv8_pmuv3_0/br_pred/:u                                    

      38.140070353 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 27000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 27000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 27000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2489905664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1897394688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
Created 512 connections total
Creating worker on tid 2619470336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575292973.291398,       0.0,       82647,      74560,       8087,      44675,      29885,   0.696522,   0.269100,   0.395100,   2.500000,   6.300642,   0.000000, 127.959996, 408.781585
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121658,      13484,      80930,      40728,   0.163533,   0.264100,   0.363100,   0.472100,   0.081317,   0.071000,   0.830000, 480.834240
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121430,      13715,      85475,      35955,   0.163678,   0.264100,   0.364100,   0.472100,   0.081644,   0.071000,   0.964000, 521.507568
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121674,      13473,      88543,      33131,   0.164540,   0.267100,   0.365100,   0.470100,   0.082156,   0.069000,   0.939000, 549.282106
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121457,      13686,      90159,      31298,   0.164527,   0.266100,   0.364100,   0.470100,   0.082598,   0.069000,   1.161000, 565.614259
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121617,      13525,      91910,      29707,   0.164707,   0.266100,   0.364100,   0.467100,   0.082449,   0.068000,   1.095000, 580.337214
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121610,      13533,      92974,      28636,   0.164459,   0.267100,   0.364100,   0.465100,   0.080730,   0.070000,   0.817000, 589.527210
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:56   0:00 /usr/lib/linux
memcache      8 80.5  0.0 126400 47936 pts/0    Sl+  12:56   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3278217231      instructions:u            #    0.55  insn per cycle         
        5992782026      cycles:u                                                    
          21840974      armv8_pmuv3_0/br_mis_pred/:u                                   
         560695597      armv8_pmuv3_0/br_pred/:u                                    

      38.080318284 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 28000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 28000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 28000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2367484416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1773859328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
Created 512 connections total
Creating worker on tid 2493313536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293016.291441,       0.0,       84681,      76238,       8443,      45525,      30713,   1.057589,   0.322100,   0.424100,  26.100000,   9.589466,   0.000000, 211.256996, 407.445749
Outstanding requests per worker:
0 0 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126266,      14093,      85158,      41108,   0.131605,   0.261100,   0.348100,   0.440100,   0.085724,   0.060000,   1.002000, 489.174370
Outstanding requests per worker:
0 1 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126300,      14060,      89486,      36814,   0.131486,   0.259100,   0.348100,   0.440100,   0.085116,   0.059000,   0.831000, 527.485194
Outstanding requests per worker:
0 1 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.8,      140364,     126503,      13861,      92436,      34067,   0.132387,   0.265100,   0.348100,   0.441100,   0.087228,   0.062000,   0.991000, 552.517387
Outstanding requests per worker:
1 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.6,      140368,     126482,      13886,      94253,      32229,   0.132851,   0.266100,   0.349100,   0.442100,   0.087487,   0.059000,   0.962000, 569.092282
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28071.8,      140359,     126364,      13995,      95759,      30605,   0.133541,   0.266100,   0.349100,   0.441100,   0.090055,   0.060000,   1.128000, 583.012092
Outstanding requests per worker:
0 0 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126355,      14006,      97000,      29355,   0.132020,   0.263100,   0.347100,   0.432100,   0.084222,   0.066000,   0.745000, 594.369625
Outstanding requests per worker:
1 0 0 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:57   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:57   0:00 /usr/lib/linux
memcache     10 80.9  0.0 126400 48960 pts/0    Sl+  12:57   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  12:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3505502417      instructions:u            #    0.52  insn per cycle         
        6691452840      cycles:u                                                    
          24670489      armv8_pmuv3_0/br_mis_pred/:u                                   
         614510138      armv8_pmuv3_0/br_pred/:u                                    

      39.270081123 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 29000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 29000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 29000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1653993984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1059844608
starting receive base loop
num_worker_connections 64
Creating worker on tid 463925760
starting receive base loop
num_worker_connections 64
Creating worker on tid 4162974208
starting receive base loop
num_worker_connections 64
Creating worker on tid 3567055360
starting receive base loop
num_worker_connections 64
Creating worker on tid 2971136512
starting receive base loop
num_worker_connections 64
Creating worker on tid 2377839104
starting receive base loop
Created 512 connections total
Creating worker on tid 1781920256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293059.291484,       0.0,       89548,      80532,       9016,      48352,      32180,   1.109054,   0.366100,   0.579100,  37.200000,   9.214811,   0.000000, 166.314006, 409.274611
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.4,      145467,     130782,      14685,      88094,      42688,   0.148682,   0.320100,   0.420100,   0.591100,   0.106919,   0.067000,   0.952000, 489.264325
Outstanding requests per worker:
1 0 1 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.0,      145470,     130781,      14689,      93092,      37689,   0.149634,   0.321100,   0.419100,   0.587100,   0.106371,   0.067000,   1.013000, 531.664470
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.4,      145472,     130929,      14543,      96090,      34839,   0.150702,   0.322100,   0.421100,   0.595100,   0.110431,   0.068000,   1.253000, 556.472287
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.6,      145463,     130947,      14516,      97805,      33142,   0.150985,   0.323000,   0.428100,   0.592100,   0.108114,   0.068000,   0.973000, 570.684651
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.2,      145466,     130961,      14505,      99659,      31302,   0.152223,   0.325100,   0.434100,   0.593000,   0.109698,   0.065000,   0.974000, 585.364483
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.0,      145470,     130881,      14589,     100612,      30269,   0.152382,   0.324100,   0.428100,   0.596100,   0.113314,   0.060000,   1.444000, 595.910384
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:57   0:00 /usr/lib/linux
memcache      8 83.9  0.0 128448 53120 pts/0    Sl+  12:57   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3609327825      instructions:u            #    0.55  insn per cycle         
        6617427773      cycles:u                                                    
          24593300      armv8_pmuv3_0/br_mis_pred/:u                                   
         624767961      armv8_pmuv3_0/br_pred/:u                                    

      38.139822382 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2507665920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1916137984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
Created 512 connections total
Creating worker on tid 2635592192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293102.291527,       0.0,       90969,      81704,       9265,      49947,      31757,   1.163141,   1.100000,   4.800000,   9.700000,   7.261680,   0.000000, 166.079998, 419.645378
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135324,      15062,      91497,      43827,   0.178167,   0.330100,   0.389100,   0.468100,   0.095579,   0.067000,   1.361000, 493.621161
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135114,      15275,      96379,      38735,   0.181089,   0.339100,   0.391100,   0.477100,   0.098866,   0.068000,   1.136000, 533.354412
Outstanding requests per worker:
1 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135323,      15060,      99152,      36171,   0.181561,   0.334100,   0.388000,   0.468100,   0.099401,   0.066000,   1.175000, 555.230973
Outstanding requests per worker:
1 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135269,      15114,     101331,      33938,   0.181295,   0.336100,   0.390100,   0.465100,   0.095583,   0.068000,   0.848000, 572.768158
Outstanding requests per worker:
1 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135241,      15145,     102955,      32286,   0.184525,   0.342100,   0.394100,   0.478100,   0.099963,   0.065000,   1.025000, 587.195636
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135412,      14975,     104489,      30923,   0.186280,   0.344100,   0.394100,   0.480100,   0.106072,   0.066000,   1.390000, 597.420686
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:58   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   12:58   0:00 /usr/lib/linux
memcache     10 84.9  0.0 130496 54528 pts/0    Sl+  12:58   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3642274501      instructions:u            #    0.55  insn per cycle         
        6635253963      cycles:u                                                    
          23999692      armv8_pmuv3_0/br_mis_pred/:u                                   
         622581664      armv8_pmuv3_0/br_pred/:u                                    

      38.100413735 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 31000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 31000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1710158336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293145.291570,       0.0,       97814,      87961,       9853,      53428,      34533,   7.115656,  18.900000,  21.700000,  44.400000,  14.092466,   0.000000, 286.424011, 418.243483
Outstanding requests per worker:
1 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139320,      15730,      94609,      44711,   0.190598,   0.340100,   0.387100,   0.465100,   0.099960,   0.068000,   0.995000, 496.069696
Outstanding requests per worker:
1 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139362,      15687,      99748,      39614,   0.190817,   0.339100,   0.383100,   0.457100,   0.098563,   0.068000,   0.971000, 535.502612
Outstanding requests per worker:
1 1 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139722,      15329,     102976,      36746,   0.195559,   0.345100,   0.390100,   0.465100,   0.101399,   0.068000,   1.104000, 559.712679
Outstanding requests per worker:
0 0 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139612,      15446,     104778,      34834,   0.197993,   0.346000,   0.391100,   0.469100,   0.105648,   0.067000,   1.232000, 574.688000
Outstanding requests per worker:
0 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139337,      15707,     106373,      32964,   0.199805,   0.346000,   0.391100,   0.472100,   0.107572,   0.069000,   1.320000, 588.988352
Outstanding requests per worker:
1 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139280,      15769,     107592,      31688,   0.201995,   0.347100,   0.393100,   0.486100,   0.107744,   0.067000,   1.216000, 598.999584
Outstanding requests per worker:
0 1 1 1 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:59   0:00 /usr/lib/linux
memcache      8 86.4  0.0 130496 55360 pts/0    Sl+  12:59   0:32 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3767447306      instructions:u            #    0.57  insn per cycle         
        6593905290      cycles:u                                                    
          24236789      armv8_pmuv3_0/br_mis_pred/:u                                   
         639029791      armv8_pmuv3_0/br_pred/:u                                    

      38.251570984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 32000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 32000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1837691392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293188.291613,       0.0,       97503,      87718,       9785,      53475,      34243,  10.415025,  26.900000,  30.700000,  46.700000,  14.199727,   0.000000, 218.697995, 419.300451
Outstanding requests per worker:
51 49 50 48 53 50 54 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32081.8,      160409,     144300,      16109,      97612,      46688,   1.805378,   6.900000,  12.500000,  20.300000,   4.235156,   0.065000,  22.309000, 493.080305
Outstanding requests per worker:
1 2 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143770,      16243,     102813,      40957,   0.236184,   0.375100,   0.418100,   0.543100,   0.107080,   0.069000,   1.056000, 535.129450
Outstanding requests per worker:
0 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143962,      16046,     106234,      37728,   0.246581,   0.386100,   0.421100,   0.549100,   0.111345,   0.067000,   1.214000, 560.397466
Outstanding requests per worker:
0 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143890,      16117,     108135,      35755,   0.264012,   0.405100,   0.447100,   0.714100,   0.121744,   0.068000,   1.146000, 576.754903
Outstanding requests per worker:
2 1 1 1 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143932,      16081,     109973,      33959,   0.265247,   0.400100,   0.444100,   0.623100,   0.120670,   0.071000,   1.314000, 589.897278
Outstanding requests per worker:
1 1 2 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143837,      16170,     111427,      32410,   0.286656,   0.417100,   0.463100,   1.300000,   0.168829,   0.067000,   1.726000, 600.795421
Outstanding requests per worker:
1 1 2 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:00   0:00 /usr/lib/linux
memcache      8 84.6  0.0 131520 55360 pts/0    Sl+  13:00   0:33 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

        3818731406      instructions:u            #    0.58  insn per cycle         
        6560173151      cycles:u                                                    
          22095921      armv8_pmuv3_0/br_mis_pred/:u                                   
         640188070      armv8_pmuv3_0/br_pred/:u                                    

      39.510184012 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 27000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 1024 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2770924032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293232.291657,       0.0,       53849,      48460,       5389,      28167,      20293,   4.634518,   6.700000,   8.100000,  18.300000,   2.816558,   0.000000,  51.690001, 389.948906
Outstanding requests per worker:
123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27026.8,      135134,     121598,      13536,      79824,      41774,   4.395458,   6.400000,   7.100000,   8.800000,   1.545438,   0.371000,  16.776999, 472.147848
Outstanding requests per worker:
132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121320,      13822,      84699,      36621,   5.516308,   8.100000,   9.000000,  11.500000,   2.061377,   0.358000,  20.296000, 517.781405
Outstanding requests per worker:
136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27024.2,      135121,     121908,      13213,      88262,      33646,   5.413612,   8.000000,   8.800000,  11.200000,   2.011340,   0.366000,  20.453000, 545.815533
Outstanding requests per worker:
160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27032.8,      135164,     121691,      13473,      89839,      31852,   5.421509,   8.000000,   8.800000,  11.100000,   1.993391,   0.425000,  21.237999, 559.815451
Outstanding requests per worker:
142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.2,      135136,     121616,      13520,      91928,      29688,   5.517565,   8.100000,   9.000000,  11.400000,   2.053724,   0.434000,  24.325000, 579.076462
Outstanding requests per worker:
150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27033.2,      135166,     121536,      13630,      92511,      29025,   5.491661,   8.100000,   8.900000,  11.200000,   2.021063,   0.411000,  22.100000, 587.427742
Outstanding requests per worker:
128 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:00   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   13:00   0:00 /usr/lib/linux
memcache     10 72.7  0.0 124352 54400 pts/0    Sl+  13:00   0:29 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3190991026      instructions:u            #    0.55  insn per cycle         
        5770644549      cycles:u                                                    
          21279094      armv8_pmuv3_0/br_mis_pred/:u                                   
         549637410      armv8_pmuv3_0/br_pred/:u                                    

      40.260308438 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 28000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2714104320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293275.291700,       0.0,       56882,      51214,       5668,      30006,      21208,   7.248865,  10.700000,  13.400000,  27.400000,   4.610720,   0.000000, 114.735000, 394.846839
Outstanding requests per worker:
175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28562.0,      142810,     128462,      14348,      84773,      43689,   6.931298,  10.400000,  11.800000,  15.200000,   2.726061,   0.443000,  28.829999, 475.203445
Outstanding requests per worker:
239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28567.4,      142837,     128331,      14506,      90418,      37913,   9.092324,  13.700000,  15.700000,  20.500000,   3.740285,   0.436000,  42.760000, 523.778541
Outstanding requests per worker:
271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28575.2,      142876,     128872,      14004,      93516,      35356,   9.311987,  14.000000,  16.100000,  21.100000,   3.857344,   0.449000,  42.314000, 547.438932
Outstanding requests per worker:
261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28576.0,      142880,     128528,      14352,      95613,      32915,   9.159719,  13.800000,  15.700000,  20.300000,   3.714937,   0.401000,  42.337000, 566.095870
Outstanding requests per worker:
250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28570.2,      142851,     128506,      14345,      96883,      31623,   9.622354,  14.500000,  16.700000,  21.800000,   3.985770,   0.470000,  46.579000, 578.150359
Outstanding requests per worker:
273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28571.8,      142859,     128519,      14340,      98319,      30200,   9.463879,  14.200000,  16.300000,  21.100000,   3.858828,   0.431000,  40.197000, 590.699056
Outstanding requests per worker:
278 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:01   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   13:01   0:00 /usr/lib/linux
memcache     11 76.7  0.0 127424 58944 pts/0    Sl+  13:01   0:29 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  13:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3361002613      instructions:u            #    0.57  insn per cycle         
        5921995596      cycles:u                                                    
          22441284      armv8_pmuv3_0/br_mis_pred/:u                                   
         575145577      armv8_pmuv3_0/br_pred/:u                                    

      39.051633440 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 29000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 1024 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2995646976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293320.291745,       0.0,       58458,      52649,       5809,      30945,      21704,  16.216226,  24.300000,  26.700000,  36.400000,   6.974353,   0.000000, 136.406004, 396.435925
Outstanding requests per worker:
275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29394.6,      146973,     132183,      14790,      87479,      44704,   9.784873,  15.100000,  17.600000,  24.000000,   4.298542,   0.506000,  50.925002, 476.040701
Outstanding requests per worker:
371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29407.0,      147035,     132128,      14907,      92998,      39130,  13.628462,  21.400000,  25.200000,  34.000000,   6.292480,   0.505000,  74.584000, 522.299777
Outstanding requests per worker:
403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29407.4,      147037,     132662,      14375,      96186,      36476,  14.246475,  22.500000,  26.600000,  35.900000,   6.677259,   0.523000,  93.998000, 547.197306
Outstanding requests per worker:
434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29419.2,      147096,     132245,      14851,      98218,      34027,  14.464784,  22.900000,  26.900000,  35.900000,   6.686434,   0.496000,  70.409998, 566.874150
Outstanding requests per worker:
409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29406.4,      147032,     132289,      14743,     100312,      31977,  14.973210,  23.800000,  28.000000,  37.700000,   7.027141,   0.495000,  80.674000, 583.687714
Outstanding requests per worker:
444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29410.2,      147051,     132319,      14732,     101614,      30705,  14.915891,  23.600000,  27.800000,  37.300000,   6.912751,   0.633000,  70.915997, 594.191084
Outstanding requests per worker:
460 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:02   0:00 /usr/lib/linux
memcache      8 75.8  0.0 127424 56832 pts/0    Sl+  13:02   0:30 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3411706852      instructions:u            #    0.58  insn per cycle         
        5899299556      cycles:u                                                    
          21703288      armv8_pmuv3_0/br_mis_pred/:u                                   
         571589160      armv8_pmuv3_0/br_pred/:u                                    

      40.210655807 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 30000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2656498176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293363.291788,       0.0,       59560,      53612,       5948,      31621,      21991,  33.193981,  43.400000,  46.900000,  55.900000,   8.930742,   0.000000, 127.348006, 398.474651
Outstanding requests per worker:
953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30349.2,      151746,     136493,      15253,      90299,      46194,  30.102000,  41.600000,  45.000000,  57.100000,  10.560492,   0.717000, 165.470004, 476.591679
Outstanding requests per worker:
733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30301.0,      151505,     136207,      15298,      96061,      40146,  27.207400,  47.100000,  57.400000,  81.700000,  15.655261,   0.725000, 209.940001, 523.369049
Outstanding requests per worker:
751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30293.2,      151466,     136545,      14921,      99480,      37065,  29.035441,  50.600000,  62.100000,  90.000000,  17.197787,   0.533000, 249.713004, 550.896657
Outstanding requests per worker:
811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30297.2,      151486,     136279,      15207,     101847,      34432,  28.286159,  48.800000,  59.100000,  83.500000,  16.078979,   0.625000, 217.648000, 570.151931
Outstanding requests per worker:
851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30292.2,      151461,     136280,      15181,     103563,      32717,  30.529000,  53.400000,  65.200000,  95.000000,  18.054893,   0.703000, 181.213006, 583.918822
Outstanding requests per worker:
912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30315.4,      151577,     136390,      15187,     104938,      31452,  29.230553,  50.700000,  61.600000,  86.800000,  16.712618,   0.716000, 192.169994, 595.507545
Outstanding requests per worker:
861 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:02   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   13:03   0:00 /usr/lib/linux
memcache     10 78.6  0.0 128448 60224 pts/0    Sl+  13:03   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3469657133      instructions:u            #    0.60  insn per cycle         
        5814802544      cycles:u                                                    
          21059818      armv8_pmuv3_0/br_mis_pred/:u                                   
         576867871      armv8_pmuv3_0/br_pred/:u                                    

      38.950351235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 31000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 3323785728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293407.291832,       0.0,       55202,      49712,       5490,      29111,      20601, 136.533963, 264.700000, 318.300000, 422.100000,  89.589555,   0.000000, 699.455976, 394.687520
Outstanding requests per worker:
7050 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30089.2,      150446,     135309,      15137,      89541,      45768, 326.309754, 612.600000, 722.600000, 945.700000, 205.629943,  16.572000, 1385.316014, 476.283100
Outstanding requests per worker:
12710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30593.6,      152968,     137491,      15477,      97139,      40352, 454.826755, 900.800000, 1057.400000, 1347.700000, 309.417777,   7.669000, 1887.840986, 525.560502
Outstanding requests per worker:
16029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30528.6,      152643,     137635,      15008,     100572,      37063, 558.387608, 1131.600000, 1335.900000, 1677.800000, 392.735457,   7.589000, 2485.035896, 552.936949
Outstanding requests per worker:
18983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30488.6,      152443,     137128,      15315,     102482,      34646, 649.576648, 1320.600000, 1559.300000, 2010.200000, 469.957756,   9.141000, 2839.385986, 571.014060
Outstanding requests per worker:
21688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30425.2,      152126,     136925,      15201,     104052,      32873, 736.851444, 1470.400000, 1731.300000, 2197.000000, 524.225722,   8.818000, 3317.611933, 584.155253
Outstanding requests per worker:
24246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30498.4,      152492,     137143,      15349,     105857,      31286, 813.647842, 1604.100000, 1873.800000, 2488.800000, 572.061064,  10.188000, 3635.473967, 597.837360
Outstanding requests per worker:
26278 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:03   0:00 /usr/lib/linux
memcache      8 79.5  0.0 130496 63424 pts/0    Sl+  13:03   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3535655265      instructions:u            #    0.64  insn per cycle         
        5519090025      cycles:u                                                    
          21613579      armv8_pmuv3_0/br_mis_pred/:u                                   
         567304405      armv8_pmuv3_0/br_pred/:u                                    

      39.009769800 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 1 threads, 32000 rps'
==> Bench: 262114 keys, 1024 conns, 1 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 262114 -c 1024 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 1'
Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 1024 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 1024 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 1024
Created 1024 connections total
Creating worker on tid 2578772480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293450.291875,       0.0,       54426,      49027,       5399,      28744,      20283, 172.604768, 317.700000, 375.700000, 489.700000, 102.860386,   0.000000, 791.854024, 394.490199
Outstanding requests per worker:
7699 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30118.8,      150594,     135426,      15168,      89320,      46106, 340.069176, 638.100000, 749.000000, 971.600000, 213.297099,  17.735001, 1457.627058, 475.100173
Outstanding requests per worker:
13033 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30600.6,      153003,     137522,      15481,      96826,      40696, 464.322857, 918.300000, 1079.500000, 1367.900000, 314.479316,  11.562000, 1884.191990, 524.202578
Outstanding requests per worker:
16294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30484.6,      152423,     137426,      14997,     100265,      37161, 567.152676, 1146.000000, 1353.700000, 1693.400000, 397.560087,  12.157000, 2489.568949, 551.845779
Outstanding requests per worker:
19215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30489.6,      152448,     137149,      15299,     102895,      34254, 656.153670, 1327.900000, 1570.800000, 2030.000000, 473.604530,  11.430000, 2900.706053, 572.995735
Outstanding requests per worker:
21894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30414.6,      152073,     136861,      15212,     104026,      32835, 743.412602, 1477.300000, 1741.400000, 2230.400000, 528.174552,   9.438000, 3386.681080, 585.623560
Outstanding requests per worker:
24417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30521.8,      152609,     137265,      15344,     105895,      31370, 817.956789, 1609.200000, 1876.000000, 2498.400000, 574.168752,  11.252000, 3696.055889, 598.827035
Outstanding requests per worker:
26433 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:04   0:00 /usr/lib/linux
memcache      8 81.6  0.0 130496 64192 pts/0    Sl+  13:04   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3529608407      instructions:u            #    0.64  insn per cycle         
        5511769226      cycles:u                                                    
          21190400      armv8_pmuv3_0/br_mis_pred/:u                                   
         567261500      armv8_pmuv3_0/br_pred/:u                                    

      39.050763671 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 27000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2905993728
starting receive base loop
Created 1024 connections total
Creating worker on tid 2994401792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293493.291918,       0.0,       69026,      62203,       6823,      37161,      25042,   0.686225,   1.200000,   1.300000,   1.400000,   0.857138,   0.000000,  53.656999, 406.455525
Outstanding requests per worker:
17 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121617,      13524,      80869,      40748,   0.698622,   1.200000,   1.300000,   1.500000,   0.286479,   0.219000,   2.267000, 479.246495
Outstanding requests per worker:
17 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121507,      13641,      85222,      36285,   0.688030,   1.200000,   1.400000,   1.500000,   0.308306,   0.205000,   2.419000, 521.207889
Outstanding requests per worker:
16 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121770,      13378,      88483,      33287,   0.689361,   1.200000,   1.400000,   1.500000,   0.306338,   0.213000,   2.416000, 547.930204
Outstanding requests per worker:
15 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121495,      13649,      90142,      31353,   0.690617,   1.200000,   1.400000,   1.500000,   0.308810,   0.247000,   2.497000, 565.448767
Outstanding requests per worker:
12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.4,      135147,     121518,      13629,      91746,      29772,   0.691040,   1.200000,   1.400000,   1.500000,   0.307283,   0.217000,   2.569000, 578.951645
Outstanding requests per worker:
10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.8,      135144,     121505,      13639,      92798,      28707,   0.694002,   1.200000,   1.400000,   1.500000,   0.309683,   0.214000,   3.274000, 590.107839
Outstanding requests per worker:
11 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:05   0:00 /usr/lib/linux
memcache      9 75.7  0.0 124352 55040 pts/0    Sl+  13:05   0:29 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3217388249      instructions:u            #    0.55  insn per cycle         
        5853547613      cycles:u                                                    
          22410464      armv8_pmuv3_0/br_mis_pred/:u                                   
         546173231      armv8_pmuv3_0/br_pred/:u                                    

      39.231337644 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 28000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3125932544
starting receive base loop
Created 1024 connections total
Creating worker on tid 3211850240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293538.291963,       0.0,       72228,      64989,       7239,      38569,      26420,   0.769778,   1.200000,   1.400000,   1.600000,   0.580576,   0.000000,  43.134999, 403.352783
Outstanding requests per worker:
16 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126721,      14131,      84450,      42271,   0.787341,   1.300000,   1.400000,   1.500000,   0.297502,   0.239000,   2.415000, 481.019973
Outstanding requests per worker:
17 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126558,      14302,      89673,      36885,   0.751390,   1.300000,   1.400000,   1.600000,   0.316335,   0.246000,   2.468000, 528.197949
Outstanding requests per worker:
17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28175.0,      140875,     126808,      14067,      92471,      34337,   0.751224,   1.300000,   1.400000,   1.600000,   0.315326,   0.199000,   2.176000, 550.769715
Outstanding requests per worker:
11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28167.6,      140838,     126746,      14092,      94254,      32492,   0.757429,   1.300000,   1.400000,   1.600000,   0.318302,   0.232000,   2.668000, 567.723707
Outstanding requests per worker:
19 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28174.6,      140873,     126821,      14052,      96042,      30779,   0.754776,   1.300000,   1.400000,   1.600000,   0.314103,   0.214000,   2.471000, 583.212094
Outstanding requests per worker:
11 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28169.8,      140849,     126683,      14166,      97282,      29401,   0.756537,   1.300000,   1.400000,   1.600000,   0.314067,   0.233000,   2.377000, 593.873195
Outstanding requests per worker:
10 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:05   0:00 /usr/lib/linux
memcache      8 75.8  0.0 127424 56768 pts/0    Sl+  13:05   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3344787763      instructions:u            #    0.56  insn per cycle         
        5993955721      cycles:u                                                    
          21972340      armv8_pmuv3_0/br_mis_pred/:u                                   
         566739842      armv8_pmuv3_0/br_pred/:u                                    

      40.299545357 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 29000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3173577216
starting receive base loop
Created 1024 connections total
Creating worker on tid 3262837248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293581.292006,       0.0,       74969,      67447,       7522,      39921,      27526,   3.169187,   8.500000,   9.500000,  10.400000,   3.065863,   0.000000,  65.389000, 401.275565
Outstanding requests per worker:
19 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132396,      14668,      88218,      44178,   1.095652,   1.800000,   2.000000,   2.300000,   0.447126,   0.254000,   2.888000, 482.246171
Outstanding requests per worker:
19 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132291,      14780,      93688,      38603,   0.831510,   1.400000,   1.500000,   1.600000,   0.329394,   0.244000,   2.471000, 527.320974
Outstanding requests per worker:
21 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29412.8,      147064,     132414,      14650,      96739,      35675,   0.831586,   1.400000,   1.500000,   1.600000,   0.327176,   0.233000,   2.483000, 552.064668
Outstanding requests per worker:
21 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132540,      14529,      98817,      33723,   0.835050,   1.400000,   1.500000,   1.600000,   0.329611,   0.246000,   2.533000, 568.729033
Outstanding requests per worker:
20 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29415.4,      147077,     132487,      14590,     100516,      31971,   0.837134,   1.400000,   1.500000,   1.600000,   0.328315,   0.245000,   2.923000, 583.514277
Outstanding requests per worker:
15 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.6,      147068,     132236,      14832,     101711,      30525,   0.838904,   1.400000,   1.500000,   1.600000,   0.325216,   0.248000,   2.356000, 595.801272
Outstanding requests per worker:
17 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:06   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   13:06   0:00 /usr/lib/linux
memcache     10 79.3  0.0 128448 59648 pts/0    Sl+  13:06   0:30 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3445660780      instructions:u            #    0.58  insn per cycle         
        5972140238      cycles:u                                                    
          20908876      armv8_pmuv3_0/br_mis_pred/:u                                   
         578413924      armv8_pmuv3_0/br_pred/:u                                    

      38.870287812 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 30000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2766729728
starting receive base loop
Created 1024 connections total
Creating worker on tid 2857562624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293626.292051,       0.0,       76646,      69149,       7497,      41017,      28132,  14.537891,  30.200000,  31.200000,  32.800000,  11.497069,   0.000000,  96.271001, 403.722527
Outstanding requests per worker:
314 314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30421.8,      152109,     136887,      15222,      91673,      45214,  13.136885,  32.000000,  33.500000,  35.100000,  12.160932,   0.279000,  37.207000, 485.500471
Outstanding requests per worker:
21 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136414,      15112,      96776,      39638,   0.931733,   1.400000,   1.500000,   1.700000,   0.329577,   0.239000,   2.564000, 529.342414
Outstanding requests per worker:
21 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136462,      15068,      99986,      36476,   0.939505,   1.400000,   1.500000,   1.800000,   0.334854,   0.251000,   2.756000, 555.433535
Outstanding requests per worker:
18 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.6,      151518,     136376,      15142,     102071,      34305,   0.944271,   1.400000,   1.500000,   1.800000,   0.332457,   0.252000,   2.753000, 572.241912
Outstanding requests per worker:
23 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.4,      151532,     136341,      15191,     103564,      32777,   0.955870,   1.500000,   1.600000,   1.800000,   0.338122,   0.259000,   2.795000, 585.551742
Outstanding requests per worker:
19 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.6,      151528,     136195,      15333,     105102,      31093,   0.947997,   1.400000,   1.500000,   1.700000,   0.322379,   0.250000,   2.301000, 596.961416
Outstanding requests per worker:
19 19 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:07   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   13:07   0:00 /usr/lib/linux
memcache      9 78.4  0.0 130496 63040 pts/0    Sl+  13:07   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3527293720      instructions:u            #    0.60  insn per cycle         
        5834327108      cycles:u                                                    
          21517737      armv8_pmuv3_0/br_mis_pred/:u                                   
         586218812      armv8_pmuv3_0/br_pred/:u                                    

      40.270690951 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 31000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 1024 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 3326276096
starting receive base loop
Created 1024 connections total
Creating worker on tid 3413176832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293670.292095,       0.0,       78932,      71157,       7775,      42519,      28638,  17.365426,  37.600000,  39.200000,  41.100000,  14.103423,   0.000000, 130.759999, 407.537178
Outstanding requests per worker:
395 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31394.0,      156970,     141324,      15646,      95037,      46287,  15.544091,  38.200000,  40.800000,  43.400000,  13.814166,   0.293000,  45.288000, 486.491629
Outstanding requests per worker:
30 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.2,      156266,     140497,      15769,      99851,      40646,   1.127439,   1.600000,   1.700000,   2.100000,   0.342320,   0.279000,   3.114000, 530.383716
Outstanding requests per worker:
26 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140680,      15584,     103241,      37439,   1.232708,   1.700000,   1.900000,   2.500000,   0.377396,   0.297000,   3.364000, 555.593986
Outstanding requests per worker:
23 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.2,      156256,     140787,      15469,     105606,      35181,   1.345835,   1.900000,   2.100000,   2.900000,   0.432900,   0.253000,   3.746000, 573.317451
Outstanding requests per worker:
27 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.0,      156260,     140591,      15669,     107001,      33590,   1.426521,   2.000000,   2.300000,   3.000000,   0.453316,   0.340000,   3.866000, 586.094821
Outstanding requests per worker:
27 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.8,      156249,     140474,      15775,     108506,      31968,   1.511428,   2.100000,   2.200000,   2.500000,   0.387397,   0.282000,   3.367000, 598.414959
Outstanding requests per worker:
33 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:08   0:00 /usr/lib/linux
memcache      9 77.0  0.0 130496 60416 pts/0    Sl+  13:08   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3590469111      instructions:u            #    0.61  insn per cycle         
        5912880017      cycles:u                                                    
          19395024      armv8_pmuv3_0/br_mis_pred/:u                                   
         589699589      armv8_pmuv3_0/br_pred/:u                                    

      40.401457303 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 2 threads, 32000 rps'
==> Bench: 262114 keys, 1024 conns, 2 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 262114 -c 1024 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 2'
Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 1024 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 1024 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 512
num_worker_connections 512
Creating worker on tid 2531848704
starting receive base loop
Created 1024 connections total
Creating worker on tid 2623992320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293714.292139,       0.0,       81362,      73178,       8184,      44349,      28829,  20.227128,  45.600000,  47.300000,  49.500000,  17.033849,   0.000000, 245.362997, 414.973981
Outstanding requests per worker:
438 466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32380.0,      161900,     145696,      16204,      98267,      47429,  20.802632,  44.900000,  49.600000,  53.600000,  14.180644,   0.468000,  57.131998, 491.179065
Outstanding requests per worker:
147 158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32254.6,      161273,     145145,      16128,     103515,      41630,   9.301828,  12.400000,  12.900000,  13.500000,   3.171893,   0.521000,  15.335000, 533.022074
Outstanding requests per worker:
162 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32256.8,      161284,     144944,      16340,     106918,      38026,  10.377586,  13.800000,  14.200000,  15.000000,   3.708555,   0.485000,  16.337000, 560.120198
Outstanding requests per worker:
175 174 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145281,      16019,     109046,      36235,  10.833381,  14.500000,  15.000000,  16.200000,   3.975090,   0.518000,  17.816000, 575.234607
Outstanding requests per worker:
177 169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32256.4,      161282,     144919,      16363,     111076,      33843,  11.497033,  15.500000,  16.300000,  18.200000,   4.388178,   0.621000,  20.245999, 591.534112
Outstanding requests per worker:
185 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32256.8,      161284,     145003,      16281,     112320,      32683,  11.505783,  15.500000,  15.800000,  16.400000,   4.308405,   0.610000,  17.371001, 601.688972
Outstanding requests per worker:
189 193 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:08   0:00 /usr/lib/linux
memcache      9 82.0  0.0 131520 61888 pts/0    Sl+  13:08   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3749471076      instructions:u            #    0.66  insn per cycle         
        5722735963      cycles:u                                                    
          21982564      armv8_pmuv3_0/br_mis_pred/:u                                   
         597785710      armv8_pmuv3_0/br_pred/:u                                    

      39.089414335 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 27000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 152433152
starting receive base loop
num_worker_connections 256
Creating worker on tid 2306535936
starting receive base loop
num_worker_connections 256
Creating worker on tid 167113216
starting receive base loop
Created 1024 connections total
Creating worker on tid 2322657792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293758.292183,       0.0,       77632,      69803,       7829,      41747,      28056,   0.474712,   0.817100,   0.941100,   2.100000,   2.441293,   0.000000, 147.866994, 407.147286
Outstanding requests per worker:
6 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.8,      135154,     121643,      13511,      81262,      40381,   0.431500,   0.835100,   0.936100,   1.100000,   0.263912,   0.102000,   1.849000, 483.643572
Outstanding requests per worker:
4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27031.6,      135158,     121366,      13792,      85836,      35530,   0.400584,   0.862100,   0.967100,   1.200000,   0.276009,   0.104000,   1.990000, 525.885116
Outstanding requests per worker:
3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.8,      135139,     121762,      13377,      88430,      33332,   0.402187,   0.865100,   0.969100,   1.200000,   0.277540,   0.101000,   1.836000, 546.474631
Outstanding requests per worker:
3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121744,      13407,      90077,      31667,   0.404785,   0.867100,   0.969100,   1.200000,   0.278199,   0.102000,   1.980000, 562.876117
Outstanding requests per worker:
2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121646,      13503,      91933,      29713,   0.403232,   0.867100,   0.968100,   1.200000,   0.277372,   0.108000,   1.866000, 577.704479
Outstanding requests per worker:
2 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121536,      13614,      93082,      28454,   0.405007,   0.868100,   0.970100,   1.200000,   0.277802,   0.105000,   1.893000, 590.960226
Outstanding requests per worker:
2 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:09   0:00 /usr/lib/linux
memcache      8 79.2  0.0 125376 57472 pts/0    Sl+  13:09   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3295286685      instructions:u            #    0.54  insn per cycle         
        6101791759      cycles:u                                                    
          21081295      armv8_pmuv3_0/br_mis_pred/:u                                   
         563611490      armv8_pmuv3_0/br_pred/:u                                    

      39.259946816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 28000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 366735872
starting receive base loop
num_worker_connections 256
Creating worker on tid 2515923456
starting receive base loop
num_worker_connections 256
Creating worker on tid 376500736
starting receive base loop
Created 1024 connections total
Creating worker on tid 2532045312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293803.292228,       0.0,       81056,      73016,       8040,      43763,      29253,   0.560113,   0.930100,   1.100000,   2.300000,   2.048905,   0.000000, 121.734001, 408.481155
Outstanding requests per worker:
6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.0,      140855,     126678,      14177,      84890,      41788,   0.506295,   0.928100,   1.100000,   1.200000,   0.289696,   0.109000,   2.063000, 485.468471
Outstanding requests per worker:
7 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28173.2,      140866,     126559,      14307,      89527,      37032,   0.458690,   0.939100,   1.100000,   1.200000,   0.303496,   0.107000,   1.945000, 527.285843
Outstanding requests per worker:
5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.4,      140862,     126782,      14080,      92549,      34233,   0.456723,   0.932100,   1.100000,   1.200000,   0.301416,   0.103000,   2.045000, 552.560143
Outstanding requests per worker:
3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126733,      14119,      94604,      32129,   0.455217,   0.929100,   1.100000,   1.200000,   0.297764,   0.107000,   2.017000, 569.764252
Outstanding requests per worker:
4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126888,      13970,      96342,      30546,   0.457142,   0.931100,   1.100000,   1.200000,   0.300394,   0.108000,   2.134000, 584.603249
Outstanding requests per worker:
4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28174.0,      140870,     126792,      14078,      97291,      29501,   0.460132,   0.934100,   1.100000,   1.200000,   0.301209,   0.108000,   2.438000, 593.702024
Outstanding requests per worker:
1 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:10   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   13:10   0:00 /usr/lib/linux
memcache     11 80.1  0.0 128448 57472 pts/0    Sl+  13:10   0:31 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  13:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3385235238      instructions:u            #    0.55  insn per cycle         
        6106802949      cycles:u                                                    
          21171694      armv8_pmuv3_0/br_mis_pred/:u                                   
         579010405      armv8_pmuv3_0/br_pred/:u                                    

      39.300876074 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 29000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 73593344
starting receive base loop
num_worker_connections 256
Creating worker on tid 2228744704
starting receive base loop
num_worker_connections 256
Creating worker on tid 89321984
starting receive base loop
Created 1024 connections total
Creating worker on tid 2239427072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293846.292271,       0.0,       83505,      75096,       8409,      45347,      29749,   6.867418,  14.400000,  15.600000,  16.700000,   7.029185,   0.000000, 213.891998, 413.803585
Outstanding requests per worker:
99 100 98 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29272.8,      146364,     131737,      14627,      88584,      43153,   7.072879,  21.100000,  23.100000,  25.600000,   8.289779,   0.105000,  26.853999, 488.879616
Outstanding requests per worker:
6 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.2,      146001,     131072,      14929,      92965,      38107,   0.514206,   0.975100,   1.100000,   1.200000,   0.301907,   0.103000,   2.127000, 528.692245
Outstanding requests per worker:
5 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29200.8,      146004,     131366,      14638,      96004,      35362,   0.513895,   0.965100,   1.100000,   1.200000,   0.298480,   0.106000,   1.916000, 553.003981
Outstanding requests per worker:
5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.0,      145995,     131452,      14543,      98205,      33247,   0.513985,   0.960100,   1.100000,   1.200000,   0.294964,   0.105000,   2.007000, 570.841881
Outstanding requests per worker:
5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29199.8,      145999,     131208,      14791,      99609,      31599,   0.516608,   0.963100,   1.100000,   1.200000,   0.296630,   0.106000,   1.859000, 583.697031
Outstanding requests per worker:
5 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29201.4,      146007,     131507,      14500,     101162,      30345,   0.522014,   0.973100,   1.100000,   1.200000,   0.300170,   0.102000,   2.105000, 594.446554
Outstanding requests per worker:
3 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:11   0:00 /usr/lib/linux
memcache      8 81.2  0.0 127424 60224 pts/0    Sl+  13:11   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3468368709      instructions:u            #    0.58  insn per cycle         
        6022894482      cycles:u                                                    
          21098577      armv8_pmuv3_0/br_mis_pred/:u                                   
         584403836      armv8_pmuv3_0/br_pred/:u                                    

      39.040487753 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 30000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 30000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 30000 cpus 4
meanInterarrival 133
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 948040192
starting receive base loop
num_worker_connections 256
Creating worker on tid 3101159936
starting receive base loop
num_worker_connections 256
Creating worker on tid 961737216
starting receive base loop
Created 1024 connections total
Creating worker on tid 3111842304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293890.292315,       0.0,       85763,      77122,       8641,      46749,      30373,  13.542738,  32.500000,  34.000000,  35.900000,  13.783743,   0.000000, 311.951011, 417.090311
Outstanding requests per worker:
158 172 163 160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30203.4,      151017,     135811,      15206,      91430,      44381,  12.264927,  32.000000,  34.400000,  36.300000,  12.112658,   0.108000,  38.137000, 490.568709
Outstanding requests per worker:
7 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.6,      150398,     135255,      15143,      95694,      39561,   0.621636,   1.100000,   1.200000,   1.300000,   0.292256,   0.106000,   1.965000, 528.682563
Outstanding requests per worker:
6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135367,      15020,      99077,      36290,   0.635530,   1.100000,   1.200000,   1.400000,   0.295600,   0.106000,   2.012000, 553.994489
Outstanding requests per worker:
5 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135313,      15070,     101253,      34060,   0.629591,   1.100000,   1.100000,   1.300000,   0.279111,   0.113000,   2.066000, 572.223718
Outstanding requests per worker:
6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.0,      150395,     135404,      14991,     103037,      32367,   0.651609,   1.100000,   1.200000,   1.500000,   0.303150,   0.108000,   2.225000, 585.750052
Outstanding requests per worker:
6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.2,      150401,     135231,      15170,     104081,      31150,   0.673617,   1.100000,   1.200000,   1.800000,   0.320692,   0.110000,   2.511000, 596.296877
Outstanding requests per worker:
4 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:11   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5888 pts/0    S+   13:11   0:00 /usr/lib/linux
memcache     13 82.0  0.0 130496 62720 pts/0    Sl+  13:11   0:32 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  13:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3536101809      instructions:u            #    0.59  insn per cycle         
        6004755146      cycles:u                                                    
          21182769      armv8_pmuv3_0/br_mis_pred/:u                                   
         585581139      armv8_pmuv3_0/br_pred/:u                                    

      39.200121333 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 31000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 31000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 1024 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 31000 cpus 4
meanInterarrival 129
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 147190272
starting receive base loop
num_worker_connections 256
Creating worker on tid 2295853568
starting receive base loop
num_worker_connections 256
Creating worker on tid 156430848
starting receive base loop
Created 1024 connections total
Creating worker on tid 2306535936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293935.292360,       0.0,       88925,      80052,       8873,      48189,      31863,  15.624900,  39.200000,  40.600000,  42.500000,  15.533606,   0.000000, 325.939000, 412.096250
Outstanding requests per worker:
202 185 186 212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31160.2,      155801,     140114,      15687,      94567,      45547,  15.015791,  35.900000,  40.300000,  42.700000,  13.080845,   0.173000,  44.539001, 491.030297
Outstanding requests per worker:
10 10 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.0,      155060,     139370,      15690,      99131,      40239,   1.214832,   1.800000,   2.100000,   2.500000,   0.437500,   0.165000,   2.969000, 530.585671
Outstanding requests per worker:
10 10 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31004.0,      155020,     139560,      15460,     102176,      37384,   1.460227,   2.000000,   3.000000,   3.700000,   0.588314,   0.171000,   4.348000, 554.575967
Outstanding requests per worker:
19 19 17 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31013.8,      155069,     139585,      15484,     104912,      34673,   1.788583,   2.500000,   2.600000,   2.800000,   0.501495,   0.180000,   3.692000, 575.388315
Outstanding requests per worker:
14 15 14 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.4,      155042,     139417,      15625,     106039,      33378,   1.987814,   2.700000,   3.000000,   3.700000,   0.569449,   0.171000,   4.469000, 585.962150
Outstanding requests per worker:
18 18 19 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.2,      155041,     139411,      15630,     107898,      31513,   2.540244,   3.600000,   4.000000,   5.000000,   0.820680,   0.181000,   5.637000, 600.584186
Outstanding requests per worker:
25 20 22 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:12   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:12   0:00 /usr/lib/linux
memcache      9 80.2  0.0 130496 63808 pts/0    Sl+  13:12   0:32 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3603551197      instructions:u            #    0.62  insn per cycle         
        5842961715      cycles:u                                                    
          20760499      armv8_pmuv3_0/br_mis_pred/:u                                   
         587738436      armv8_pmuv3_0/br_pred/:u                                    

      40.650979871 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 4 threads, 32000 rps'
==> Bench: 262114 keys, 1024 conns, 4 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 32000 -k 262114 -c 1024 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 4'
Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 1024 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 1024 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 32000 cpus 4
meanInterarrival 125
num_worker_connections 256
num_worker_connections 256
Creating worker on tid 423555584
starting receive base loop
num_worker_connections 256
Creating worker on tid 2574971392
starting receive base loop
num_worker_connections 256
Creating worker on tid 435548672
starting receive base loop
Created 1024 connections total
Creating worker on tid 2591093248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575293979.292404,       0.0,       91283,      82176,       9107,      49664,      32512,  17.661016,  45.000000,  47.000000,  48.900000,  18.355581,   0.000000, 437.480986, 412.385490
Outstanding requests per worker:
230 216 226 224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32123.0,      160615,     144498,      16117,      97599,      46899,  19.746426,  41.700000,  47.100000,  49.900000,  13.165724,   0.304000,  52.480001, 490.825444
Outstanding requests per worker:
77 69 81 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31996.4,      159982,     143964,      16018,     102602,      41362,   9.630919,  13.000000,  13.400000,  14.400000,   3.647180,   0.297000,  15.488000, 533.019929
Outstanding requests per worker:
86 79 81 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.8,      159999,     143877,      16122,     105843,      38034,  10.144429,  13.500000,  13.800000,  14.600000,   3.892752,   0.299000,  16.187999, 558.021650
Outstanding requests per worker:
89 84 82 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144126,      15881,     108324,      35802,  10.836970,  14.700000,  15.300000,  16.700000,   4.316383,   0.244000,  18.346000, 576.720155
Outstanding requests per worker:
85 90 87 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31999.0,      159995,     143747,      16248,     109866,      33881,  11.588741,  16.000000,  16.500000,  17.400000,   4.743483,   0.292000,  18.541001, 589.655068
Outstanding requests per worker:
93 97 84 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31997.2,      159986,     144045,      15941,     111693,      32352,  11.650239,  16.000000,  16.300000,  16.900000,   4.766861,   0.304000,  17.464001, 601.742567
Outstanding requests per worker:
102 95 94 98 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:13   0:00 /usr/lib/linux
memcache      8 81.2  0.0 131520 65280 pts/0    Sl+  13:13   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3759484314      instructions:u            #    0.65  insn per cycle         
        5773600009      cycles:u                                                    
          22326525      armv8_pmuv3_0/br_mis_pred/:u                                   
         603765351      armv8_pmuv3_0/br_pred/:u                                    

      39.149921386 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 27000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 27000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 27000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 27000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 27000 cpus 8
meanInterarrival 296
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1796928000
starting receive base loop
num_worker_connections 128
Creating worker on tid 686223872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3872584192
starting receive base loop
num_worker_connections 128
Creating worker on tid 2758537728
starting receive base loop
num_worker_connections 128
Creating worker on tid 1649930752
starting receive base loop
num_worker_connections 128
Creating worker on tid 535884288
starting receive base loop
num_worker_connections 128
Creating worker on tid 3722244608
starting receive base loop
Created 1024 connections total
Creating worker on tid 2608198144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294023.292448,       0.0,       83066,      74761,       8305,      44933,      29828,   0.429660,   0.715000,   0.816100,   1.300000,   2.812310,   0.000000, 122.102000, 412.291716
Outstanding requests per worker:
3 3 3 2 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27032.2,      135161,     121694,      13467,      81336,      40358,   0.345901,   0.758100,   0.842100,   0.988100,   0.261941,   0.076000,   1.665000, 484.549320
Outstanding requests per worker:
1 1 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.8,      135154,     121373,      13781,      86034,      35339,   0.326013,   0.787100,   0.921100,   1.100000,   0.278428,   0.075000,   2.350000, 528.234508
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121814,      13329,      88449,      33365,   0.325370,   0.781100,   0.916100,   1.100000,   0.277033,   0.073000,   2.152000, 547.902827
Outstanding requests per worker:
0 0 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121603,      13545,      90444,      31159,   0.324135,   0.779100,   0.913100,   1.100000,   0.273712,   0.075000,   1.828000, 565.777777
Outstanding requests per worker:
0 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121697,      13451,      92192,      29505,   0.328619,   0.785100,   0.918100,   1.100000,   0.277191,   0.075000,   1.746000, 581.267714
Outstanding requests per worker:
1 1 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.2,      135151,     121380,      13771,      92473,      28907,   0.330342,   0.788100,   0.921100,   1.100000,   0.279559,   0.074000,   1.867000, 587.290896
Outstanding requests per worker:
1 1 0 0 0 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:13   0:00 /usr/lib/linux
memcache      8 77.6  0.0 125376 57600 pts/0    Sl+  13:13   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3304001737      instructions:u            #    0.54  insn per cycle         
        6085638224      cycles:u                                                    
          21960846      armv8_pmuv3_0/br_mis_pred/:u                                   
         567846133      armv8_pmuv3_0/br_pred/:u                                    

      39.311466103 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 28000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 28000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 28000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 28000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 28000 cpus 8
meanInterarrival 285
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1785786880
starting receive base loop
num_worker_connections 128
Creating worker on tid 678162944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3864523264
starting receive base loop
num_worker_connections 128
Creating worker on tid 2750476800
starting receive base loop
num_worker_connections 128
Creating worker on tid 1641869824
starting receive base loop
num_worker_connections 128
Creating worker on tid 527823360
starting receive base loop
num_worker_connections 128
Creating worker on tid 3714183680
starting receive base loop
Created 1024 connections total
Creating worker on tid 2600137216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294067.292492,       0.0,       85113,      76766,       8347,      46249,      30517,   0.602163,   0.933100,   1.600000,   3.000000,   3.102351,   0.000000, 136.549994, 412.961780
Outstanding requests per worker:
3 2 3 2 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28073.0,      140365,     126289,      14076,      84745,      41544,   0.404585,   0.801100,   0.903100,   1.100000,   0.271364,   0.075000,   1.703000, 487.453500
Outstanding requests per worker:
2 1 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28075.2,      140376,     126074,      14302,      89330,      36744,   0.362293,   0.817100,   0.931100,   1.100000,   0.288120,   0.075000,   1.785000, 528.073306
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.2,      140361,     126300,      14061,      91951,      34349,   0.360229,   0.813100,   0.928100,   1.100000,   0.286240,   0.076000,   1.946000, 550.651607
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.0,      140360,     126471,      13889,      94140,      32331,   0.362760,   0.813100,   0.925100,   1.100000,   0.284838,   0.075000,   1.902000, 567.940548
Outstanding requests per worker:
1 0 1 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28072.4,      140362,     126423,      13939,      95670,      30753,   0.362898,   0.809100,   0.925100,   1.100000,   0.285418,   0.075000,   1.864000, 583.253277
Outstanding requests per worker:
1 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28074.0,      140370,     126095,      14275,      97001,      29094,   0.366159,   0.816100,   0.928100,   1.100000,   0.285463,   0.076000,   1.797000, 593.247567
Outstanding requests per worker:
1 1 0 0 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:14   0:00 /usr/lib/linux
memcache      8 80.8  0.0 127424 56192 pts/0    Sl+  13:14   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3393871569      instructions:u            #    0.55  insn per cycle         
        6185173648      cycles:u                                                    
          22224231      armv8_pmuv3_0/br_mis_pred/:u                                   
         580671544      armv8_pmuv3_0/br_pred/:u                                    

      39.280245863 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 29000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 29000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 29000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 29000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 262114
rps 29000 cpus 8
meanInterarrival 275
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1171517952
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
num_worker_connections 128
Creating worker on tid 2130375168
starting receive base loop
num_worker_connections 128
Creating worker on tid 1021768192
starting receive base loop
num_worker_connections 128
Creating worker on tid 4208128512
starting receive base loop
num_worker_connections 128
Creating worker on tid 3094082048
starting receive base loop
Created 1024 connections total
Creating worker on tid 1985475072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294112.292537,       0.0,       88071,      79257,       8814,      47723,      31534,  10.061625,  25.200000,  26.200000,  27.700000,  10.658107,   0.000000, 231.656998, 411.935753
Outstanding requests per worker:
64 65 69 66 63 70 61 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29196.4,      145982,     131177,      14805,      88290,      42887,   8.911505,  25.000000,  26.500000,  28.000000,   9.793722,   0.077000,  29.750001, 490.225489
Outstanding requests per worker:
2 2 2 2 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29095.6,      145478,     130542,      14936,      92464,      38078,   0.431535,   0.890100,   0.945100,   1.100000,   0.292642,   0.077000,   1.835000, 529.250793
Outstanding requests per worker:
1 1 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29092.0,      145460,     131124,      14336,      95879,      35245,   0.437117,   0.894100,   0.949100,   1.100000,   0.293908,   0.077000,   2.010000, 552.888640
Outstanding requests per worker:
1 1 2 2 1 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.2,      145471,     130862,      14609,      97826,      33036,   0.442197,   0.896100,   0.954100,   1.100000,   0.296651,   0.076000,   1.964000, 571.120937
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29093.0,      145465,     130905,      14560,      99730,      31175,   0.444169,   0.894100,   0.951100,   1.200000,   0.298391,   0.076000,   2.132000, 586.015049
Outstanding requests per worker:
1 0 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29094.8,      145474,     130982,      14492,     100756,      30226,   0.439247,   0.888100,   0.940100,   1.100000,   0.288847,   0.076000,   1.752000, 595.217213
Outstanding requests per worker:
1 0 0 0 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:15   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:15   0:00 /usr/lib/linux
memcache      9 79.7  0.0 128448 58240 pts/0    Sl+  13:15   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3464959934      instructions:u            #    0.58  insn per cycle         
        5988534603      cycles:u                                                    
          22065745      armv8_pmuv3_0/br_mis_pred/:u                                   
         580248731      armv8_pmuv3_0/br_pred/:u                                    

      40.541215494 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 30000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 30000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 30000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1839919616
starting receive base loop
num_worker_connections 128
Creating worker on tid 729149952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3915510272
starting receive base loop
num_worker_connections 128
Creating worker on tid 2801463808
starting receive base loop
num_worker_connections 128
Creating worker on tid 1692856832
starting receive base loop
num_worker_connections 128
Creating worker on tid 584249856
starting receive base loop
num_worker_connections 128
Creating worker on tid 3765170688
starting receive base loop
Created 1024 connections total
Creating worker on tid 2656563712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294155.292580,       0.0,       90608,      81461,       9147,      49301,      32160,  14.027365,  35.300000,  36.900000,  38.800000,  21.359771,   0.000000, 671.086013, 415.828102
Outstanding requests per worker:
86 88 91 85 88 81 83 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30211.6,      151058,     135995,      15063,      91697,      44298,  12.464692,  32.200000,  34.700000,  37.000000,  12.255808,   0.076000,  38.458999, 490.830641
Outstanding requests per worker:
3 4 3 3 3 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30080.6,      150403,     135239,      15164,      95977,      39262,   0.519752,   0.907100,   0.980100,   1.200000,   0.287548,   0.076000,   1.826000, 530.061144
Outstanding requests per worker:
3 2 3 2 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135263,      15122,      99317,      35946,   0.532714,   0.913100,   0.987000,   1.200000,   0.292029,   0.078000,   2.064000, 556.324982
Outstanding requests per worker:
2 2 2 2 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135305,      15084,     101289,      34016,   0.548999,   0.928100,   1.100000,   1.400000,   0.297439,   0.079000,   2.228000, 572.519833
Outstanding requests per worker:
2 3 2 2 2 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.0,      150395,     135299,      15096,     102968,      32331,   0.558851,   0.934100,   1.100000,   1.700000,   0.315465,   0.078000,   2.742000, 586.393669
Outstanding requests per worker:
2 1 2 2 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135388,      14997,     104303,      31085,   0.576911,   0.955100,   1.100000,   1.500000,   0.303094,   0.078000,   2.011000, 597.399001
Outstanding requests per worker:
1 1 1 2 2 1 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:16   0:00 /usr/lib/linux
memcache      8 82.6  0.0 129472 61376 pts/0    Sl+  13:16   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3549525669      instructions:u            #    0.59  insn per cycle         
        5980958545      cycles:u                                                    
          20995627      armv8_pmuv3_0/br_mis_pred/:u                                   
         588866898      armv8_pmuv3_0/br_pred/:u                                    

      39.240434664 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 31000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 31000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 31000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1216410112
starting receive base loop
num_worker_connections 128
Creating worker on tid 106426880
starting receive base loop
num_worker_connections 128
Creating worker on tid 3287347712
starting receive base loop
num_worker_connections 128
Creating worker on tid 2178740736
starting receive base loop
num_worker_connections 128
Creating worker on tid 1064694272
starting receive base loop
num_worker_connections 128
Creating worker on tid 4251054592
starting receive base loop
num_worker_connections 128
Creating worker on tid 3137008128
starting receive base loop
Created 1024 connections total
Creating worker on tid 2028401152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294199.292624,       0.0,       94054,      84469,       9585,      51132,      33337,  24.469127,  44.500000,  49.500000, 379.200000,  92.140783,   0.000000, 1807.744026, 416.109401
Outstanding requests per worker:
114 119 103 104 112 108 116 104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31175.6,      155878,     140233,      15645,      95212,      45021,  16.534095,  38.600000,  42.300000,  46.400000,  13.295176,   0.143000,  52.616999, 495.561252
Outstanding requests per worker:
6 6 5 8 8 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139585,      15469,      99632,      39953,   1.583047,   2.200000,   2.300000,   2.700000,   0.447140,   0.117000,   3.063000, 534.359702
Outstanding requests per worker:
7 7 6 7 8 8 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31004.4,      155022,     139552,      15470,     102366,      37186,   2.154189,   3.000000,   3.300000,   3.900000,   0.691983,   0.112000,   4.491000, 557.133477
Outstanding requests per worker:
10 11 10 9 10 11 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31005.8,      155029,     139517,      15512,     104656,      34861,   3.099220,   4.100000,   4.400000,   4.800000,   0.903037,   0.134000,   5.494000, 573.662242
Outstanding requests per worker:
15 13 10 13 14 14 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31003.6,      155018,     139328,      15690,     106335,      32993,   4.205236,   5.900000,   6.800000,   7.600000,   1.427213,   0.143000,   8.362000, 588.754809
Outstanding requests per worker:
17 18 18 18 18 18 19 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.8,      155059,     139472,      15587,     107943,      31529,   4.675475,   5.900000,   6.100000,   6.500000,   1.323133,   0.142000,   7.321000, 600.523281
Outstanding requests per worker:
19 17 18 17 17 15 20 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:16   0:00 /usr/lib/linux
memcache      8 83.0  0.0 129472 59776 pts/0    Sl+  13:16   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3641107370      instructions:u            #    0.64  insn per cycle         
        5667501052      cycles:u                                                    
          20343093      armv8_pmuv3_0/br_mis_pred/:u                                   
         591435540      armv8_pmuv3_0/br_pred/:u                                    

      39.231008955 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 32000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 32000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 32000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1725952512
starting receive base loop
num_worker_connections 128
Creating worker on tid 611054080
starting receive base loop
num_worker_connections 128
Creating worker on tid 3797414400
starting receive base loop
num_worker_connections 128
Creating worker on tid 2683367936
starting receive base loop
num_worker_connections 128
Creating worker on tid 1574760960
starting receive base loop
num_worker_connections 128
Creating worker on tid 460714496
starting receive base loop
num_worker_connections 128
Creating worker on tid 3647074816
starting receive base loop
Created 1024 connections total
Creating worker on tid 2533028352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575294243.292668,       0.0,       96448,      86810,       9638,      52937,      33873,  25.999871,  44.300000,  50.800000, 466.800000, 105.079493,   0.000000, 1979.029059, 419.451676
Outstanding requests per worker:
123 137 141 134 136 140 133 1399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32386.8,      161934,     145690,      16244,      99038,      46652,  37.409889,  54.600000,  71.300000, 196.700000, 146.313689,   0.140000, 3018.650055, 497.142673
Outstanding requests per worker:
52 54 58 49 59 57 44 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31995.8,      159979,     143770,      16209,     103183,      40587,  13.768202,  19.900000,  20.400000,  21.400000,   6.166576,   0.168000,  22.730000, 537.119789
Outstanding requests per worker:
63 61 54 56 56 54 58 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     144041,      15967,     106165,      37876,  14.494180,  21.100000,  21.700000,  22.600000,   6.606691,   0.151000,  23.926999, 560.189731
Outstanding requests per worker:
64 55 60 56 59 57 58 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144102,      15915,     108358,      35744,  14.934371,  21.800000,  22.400000,  23.400000,   6.893064,   0.158000,  25.171001, 576.207409
Outstanding requests per worker:
55 57 60 56 67 54 61 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31998.6,      159993,     143878,      16115,     109937,      33941,  15.238347,  22.400000,  22.800000,  24.000000,   7.109654,   0.163000,  27.197000, 589.020747
Outstanding requests per worker:
61 63 59 53 58 63 67 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31995.4,      159977,     144017,      15960,     111627,      32390,  15.587790,  22.900000,  23.400000,  24.600000,   7.322122,   0.156000,  26.279001, 601.687134
Outstanding requests per worker:
60 66 66 67 67 68 64 69 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:17   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   13:17   0:00 /usr/lib/linux
memcache     10 84.2  0.0 131520 65088 pts/0    Sl+  13:17   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 1152':

        3811196974      instructions:u            #    0.66  insn per cycle         
        5792431863      cycles:u                                                    
          22724373      armv8_pmuv3_0/br_mis_pred/:u                                   
         608271157      armv8_pmuv3_0/br_pred/:u                                    

      39.270005415 seconds time elapsed

