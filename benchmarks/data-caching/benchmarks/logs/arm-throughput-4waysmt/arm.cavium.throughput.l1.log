+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2095378944
starting receive base loop
num_worker_connections 85
Creating worker on tid 1325462016
starting receive base loop
num_worker_connections 85
Creating worker on tid 563081728
starting receive base loop
num_worker_connections 85
Creating worker on tid 4095668736
starting receive base loop
num_worker_connections 85
Creating worker on tid 3330667008
starting receive base loop
Created 512 connections total
Creating worker on tid 2568286720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314313.312738,       0.0,      350180,     315176,      35004,     210116,     105060,   9.205787,  19.300000,  24.800000,  40.600000,   8.462927,   0.000000, 107.387997, 482.250092
Outstanding requests per worker:
217 217 189 185 206 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150001.2,      750007,     675380,      74627,     510512,     164868,   8.370493,  15.600000,  18.100000,  21.600000,   4.779271,   0.257000,  28.348001, 580.583768
Outstanding requests per worker:
216 208 207 234 209 201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150016.6,      750084,     675361,      74723,     538370,     136991,   8.590851,  15.800000,  18.500000,  22.900000,   4.970414,   0.307000,  32.288998, 625.831757
Outstanding requests per worker:
223 206 213 205 214 200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.2,      750022,     675038,      74984,     553869,     121169,   8.767434,  16.100000,  19.100000,  23.100000,   5.038212,   0.257000,  29.503001, 651.134419
Outstanding requests per worker:
206 214 255 205 201 225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150013.2,      750067,     674922,      75145,     564089,     110833,   8.911943,  16.400000,  19.400000,  23.600000,   5.146810,   0.294000,  34.426000, 668.109934
Outstanding requests per worker:
201 219 236 207 251 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.0,      750026,     674832,      75194,     571553,     103279,   9.032029,  16.600000,  19.700000,  23.900000,   5.223521,   0.297000,  32.255001, 680.781707
Outstanding requests per worker:
221 216 226 217 239 225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150011.2,      750057,     675149,      74908,     578517,      96632,   9.054796,  16.700000,  19.700000,  23.900000,   5.228552,   0.224000,  37.152998, 691.005258
Outstanding requests per worker:
226 222 223 238 222 207 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:52   0:00 /usr/lib/linux
memcache      7  360  0.0 442048 143424 pts/0   Sl+  18:52   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18394836424      instructions:u                                              
         397663333      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        4799042784      L1-dcache-loads:u                                           
        1258059035      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9766543404      armv8_pmuv3_0/l1i_cache/:u                                   

      35.970793679 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1880748544
starting receive base loop
num_worker_connections 85
Creating worker on tid 1108013568
starting receive base loop
num_worker_connections 85
Creating worker on tid 345633280
starting receive base loop
num_worker_connections 85
Creating worker on tid 3875598848
starting receive base loop
num_worker_connections 85
Creating worker on tid 3113218560
starting receive base loop
Created 512 connections total
Creating worker on tid 2350838272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314354.312779,       0.0,      355704,     320104,      35600,     213068,     107036,  11.351485,  23.800000,  31.300000,  57.800000,  11.415274,   0.000000, 189.676002, 481.156493
Outstanding requests per worker:
244 247 244 221 236 251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.4,      769228,     692205,      77023,     523456,     168749,   9.525645,  17.500000,  20.900000,  24.800000,   5.419859,   0.263000,  33.649001, 580.686862
Outstanding requests per worker:
278 265 234 246 246 241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153858.6,      769294,     692004,      77290,     552518,     139486,   9.834186,  18.000000,  21.500000,  26.000000,   5.633846,   0.365000,  43.030001, 627.299404
Outstanding requests per worker:
282 263 230 249 267 247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.4,      769303,     692631,      76672,     568471,     124160,  10.076694,  18.300000,  22.100000,  26.700000,   5.769247,   0.359000,  45.196000, 652.826976
Outstanding requests per worker:
256 268 260 276 245 257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153847.8,      769240,     691959,      77281,     579020,     112939,  10.243934,  18.500000,  22.400000,  27.400000,   5.888933,   0.368000,  47.182001, 669.297846
Outstanding requests per worker:
236 283 287 267 248 289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153846.0,      769231,     692160,      77071,     587247,     104913,  10.415526,  18.800000,  22.600000,  28.600000,   6.037771,   0.309000,  55.998001, 682.026305
Outstanding requests per worker:
281 274 280 279 288 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153876.2,      769382,     692486,      76896,     593368,      99118,  10.454729,  18.800000,  22.900000,  28.300000,   6.026133,   0.394000,  58.483001, 691.939246
Outstanding requests per worker:
267 265 273 293 251 262 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:52   0:00 /usr/lib/linux
memcache      8  341  0.0 446144 150336 pts/0   Sl+  18:52   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18938783798      instructions:u                                              
         399976355      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        4941904317      L1-dcache-loads:u                                           
        1272874507      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9960401374      armv8_pmuv3_0/l1i_cache/:u                                   

      37.239272032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1611198976
starting receive base loop
num_worker_connections 85
Creating worker on tid 839578112
starting receive base loop
num_worker_connections 85
Creating worker on tid 77197824
starting receive base loop
num_worker_connections 85
Creating worker on tid 3607163392
starting receive base loop
num_worker_connections 85
Creating worker on tid 2844783104
starting receive base loop
Created 512 connections total
Creating worker on tid 2082402816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314395.312820,       0.0,      366266,     329448,      36818,     220084,     109364,  13.587348,  28.900000,  39.200000,  73.200000,  14.473851,   0.000000, 210.148007, 484.145146
Outstanding requests per worker:
263 290 272 246 256 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.4,      789498,     710898,      78600,     539450,     171448,  10.464835,  18.700000,  22.700000,  28.400000,   6.000245,   0.385000,  43.414999, 583.376853
Outstanding requests per worker:
270 288 264 275 257 300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157909.4,      789548,     710996,      78552,     569519,     141477,  10.858540,  19.300000,  23.600000,  29.800000,   6.244115,   0.371000,  60.481001, 629.994333
Outstanding requests per worker:
254 280 274 295 296 271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.8,      789460,     710713,      78747,     584946,     125767,  11.125701,  19.700000,  24.100000,  30.700000,   6.408065,   0.370000,  62.194999, 654.429318
Outstanding requests per worker:
290 269 285 268 315 292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.2,      789457,     710729,      78728,     595674,     115055,  11.303195,  20.200000,  24.400000,  31.300000,   6.538279,   0.332000,  63.515000, 671.167991
Outstanding requests per worker:
265 307 309 306 319 284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.0,      789511,     710528,      78983,     603680,     106848,  11.612386,  20.800000,  25.100000,  33.100000,   6.848836,   0.284000,  67.056999, 683.447995
Outstanding requests per worker:
304 295 265 317 314 329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.4,      789503,     710664,      78839,     609937,     100727,  11.682915,  20.700000,  25.100000,  32.600000,   6.770449,   0.337000,  66.868000, 692.649899
Outstanding requests per worker:
344 277 344 304 284 333 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:53   0:00 /usr/lib/linux
memcache      8  360  0.0 448192 149184 pts/0   Sl+  18:53   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19388240906      instructions:u                                              
         403943826      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        5085519655      L1-dcache-loads:u                                           
        1294465108      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10177310941      armv8_pmuv3_0/l1i_cache/:u                                   

      36.000421639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2391339520
starting receive base loop
num_worker_connections 85
Creating worker on tid 1620701696
starting receive base loop
num_worker_connections 85
Creating worker on tid 855699968
starting receive base loop
num_worker_connections 85
Creating worker on tid 93319680
starting receive base loop
num_worker_connections 85
Creating worker on tid 3625906688
starting receive base loop
Created 512 connections total
Creating worker on tid 2860904960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314436.312861,       0.0,      364632,     328367,      36265,     220124,     108243,  14.761673,  31.200000,  42.400000,  79.800000,  15.860665,   0.000000, 244.885996, 486.519230
Outstanding requests per worker:
271 291 278 294 305 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.4,      789488,     710395,      79093,     537948,     172447,  11.102377,  19.500000,  24.200000,  30.000000,   6.294467,   0.389000,  55.565000, 582.145536
Outstanding requests per worker:
315 301 281 282 283 300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157889.0,      789446,     710630,      78816,     568313,     142317,  11.583319,  20.400000,  25.100000,  31.700000,   6.610193,   0.303000,  64.176001, 628.304589
Outstanding requests per worker:
324 297 317 318 276 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157903.6,      789519,     710501,      79018,     584020,     126481,  11.809605,  20.600000,  25.600000,  32.500000,   6.744459,   0.406000,  60.330000, 652.954204
Outstanding requests per worker:
314 303 327 297 302 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.2,      789477,     710272,      79205,     594805,     115467,  12.042132,  21.000000,  26.100000,  33.400000,   6.910946,   0.369000,  69.023997, 669.608985
Outstanding requests per worker:
314 301 342 298 354 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.0,      789481,     710348,      79133,     602753,     107595,  12.292315,  21.300000,  26.500000,  34.400000,   7.039318,   0.336000,  66.964000, 682.492377
Outstanding requests per worker:
325 301 325 354 324 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.4,      789458,     710469,      78989,     609333,     101136,  12.308233,  21.400000,  26.700000,  34.000000,   7.037730,   0.375000,  80.182999, 692.770440
Outstanding requests per worker:
339 352 334 311 354 331 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:54   0:00 /usr/lib/linux
memcache      7  350  0.0 448192 156096 pts/0   Sl+  18:54   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19401481325      instructions:u                                              
         395675415      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        5094809872      L1-dcache-loads:u                                           
        1295741218      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10153867013      armv8_pmuv3_0/l1i_cache/:u                                   

      37.239762493 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1552216576
starting receive base loop
num_worker_connections 85
Creating worker on tid 780530176
starting receive base loop
num_worker_connections 85
Creating worker on tid 18149888
starting receive base loop
num_worker_connections 85
Creating worker on tid 3550736896
starting receive base loop
num_worker_connections 85
Creating worker on tid 2785735168
starting receive base loop
Created 512 connections total
Creating worker on tid 2023354880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314477.312902,       0.0,      375681,     338135,      37546,     227152,     110983,  24.779598,  60.500000,  77.500000, 112.400000,  26.405003,   0.000000, 326.438993, 487.909187
Outstanding requests per worker:
378 413 354 357 374 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162139.6,      810699,     729743,      80956,     555312,     174431,  14.405382,  24.400000,  30.800000,  41.100000,   8.279310,   0.501000,  77.581003, 586.430545
Outstanding requests per worker:
386 450 414 387 384 368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162168.0,      810841,     729773,      81068,     584917,     144856,  14.790991,  24.700000,  31.600000,  41.800000,   8.427290,   0.548000,  79.775997, 630.931803
Outstanding requests per worker:
420 416 389 371 419 403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162151.8,      810760,     730154,      80606,     602046,     128108,  15.398712,  25.700000,  33.000000,  43.900000,   8.818247,   0.499000,  80.838002, 655.861894
Outstanding requests per worker:
429 416 410 454 416 418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162179.4,      810898,     729661,      81237,     612927,     116734,  15.625566,  26.000000,  33.200000,  44.500000,   8.945475,   0.411000,  84.864996, 672.550672
Outstanding requests per worker:
468 442 403 436 405 399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162165.6,      810829,     729627,      81202,     620709,     108918,  15.724323,  26.000000,  33.500000,  45.100000,   8.997146,   0.508000,  84.992997, 684.845388
Outstanding requests per worker:
431 434 447 423 434 414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161613.0,      808066,     727166,      80900,     625399,     101767,  16.148846,  26.900000,  35.300000,  47.500000,   9.570802,   0.533000, 108.652003, 694.727787
Outstanding requests per worker:
921 829 909 910 890 931 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  18:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:54   0:00 /usr/lib/linux
memcache      7  351  0.0 515200 151808 pts/0   Sl+  18:54   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20090380389      instructions:u                                              
         399732703      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        5280299947      L1-dcache-loads:u                                           
        1300576850      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10422374930      armv8_pmuv3_0/l1i_cache/:u                                   

      37.551183354 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2308174336
starting receive base loop
num_worker_connections 85
Creating worker on tid 1537470976
starting receive base loop
num_worker_connections 85
Creating worker on tid 772469248
starting receive base loop
num_worker_connections 85
Creating worker on tid 10088960
starting receive base loop
num_worker_connections 85
Creating worker on tid 3540054528
starting receive base loop
Created 512 connections total
Creating worker on tid 2777674240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314517.312942,       0.0,      372165,     334921,      37244,     224422,     110499,  25.324257,  61.800000,  78.400000, 113.800000,  26.709397,   0.000000, 380.382001, 486.417770
Outstanding requests per worker:
366 418 373 435 357 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162181.8,      810910,     730283,      80627,     554904,     175379,  13.724958,  23.500000,  29.300000,  39.000000,   7.907831,   0.464000,  77.335000, 585.197360
Outstanding requests per worker:
402 368 357 399 394 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.4,      810823,     729722,      81101,     584985,     144737,  14.259395,  24.100000,  30.400000,  40.600000,   8.184054,   0.413000,  81.868999, 631.106105
Outstanding requests per worker:
369 372 407 366 420 408 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.6,      810809,     729281,      81528,     601194,     128087,  14.811785,  25.000000,  31.700000,  42.500000,   8.552561,   0.455000,  79.278998, 655.128676
Outstanding requests per worker:
373 378 399 397 433 412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.2,      810772,     729845,      80927,     613275,     116570,  15.108082,  25.300000,  32.400000,  43.000000,   8.679645,   0.508000,  84.826998, 672.936807
Outstanding requests per worker:
414 453 381 374 417 431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.6,      810794,     729507,      81287,     621259,     108248,  15.359331,  25.700000,  32.900000,  44.000000,   8.863711,   0.413000,  82.567997, 685.165221
Outstanding requests per worker:
458 406 413 404 407 439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161646.8,      808235,     727480,      80755,     625376,     102104,  15.887467,  27.100000,  34.700000,  47.500000,   9.556982,   0.435000, 116.894998, 694.335556
Outstanding requests per worker:
884 800 982 838 845 826 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:55   0:00 /usr/lib/linux
memcache      7  360  0.0 515200 154048 pts/0   Sl+  18:55   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20012825454      instructions:u                                              
         399502867      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        5270664081      L1-dcache-loads:u                                           
        1316276483      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10442349358      armv8_pmuv3_0/l1i_cache/:u                                   

      36.060175042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1652814336
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
num_worker_connections 85
Creating worker on tid 2887709184
starting receive base loop
Created 512 connections total
Creating worker on tid 2122707456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314558.312983,       0.0,      374166,     336883,      37283,     226077,     110806,  19.160428,  42.600000,  63.200000,  99.500000,  21.379404,   0.000000, 305.094987, 487.327496
Outstanding requests per worker:
313 355 298 303 338 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.0,      810736,     729834,      80902,     554517,     175317,  12.701614,  21.800000,  27.400000,  35.400000,   7.220752,   0.433000,  70.185997, 584.876380
Outstanding requests per worker:
355 351 374 346 338 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162156.8,      810785,     730278,      80507,     584756,     145522,  13.222534,  22.500000,  28.500000,  36.800000,   7.517577,   0.317000,  75.869001, 629.680440
Outstanding requests per worker:
373 377 370 326 389 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162184.2,      810922,     730092,      80830,     601923,     128169,  13.651295,  23.200000,  29.200000,  38.400000,   7.780537,   0.441000,  75.391002, 655.526016
Outstanding requests per worker:
383 364 373 361 354 370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.8,      810775,     730223,      80552,     612639,     117584,  13.806245,  23.500000,  29.600000,  39.100000,   7.890425,   0.402000,  75.074002, 671.350146
Outstanding requests per worker:
399 385 373 372 372 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162172.0,      810861,     729494,      81367,     619813,     109681,  14.095084,  23.900000,  30.000000,  40.000000,   8.067632,   0.417000,  77.850997, 683.944762
Outstanding requests per worker:
357 374 416 374 391 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162182.6,      810914,     729637,      81277,     626987,     102650,  14.232482,  24.300000,  30.100000,  40.800000,   8.206803,   0.364000,  77.064998, 693.963352
Outstanding requests per worker:
380 415 335 360 399 393 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:56   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 153600 pts/0   Sl+  18:56   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20000639734      instructions:u                                              
         399735084      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        5258232440      L1-dcache-loads:u                                           
        1315268655      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10426955895      armv8_pmuv3_0/l1i_cache/:u                                   

      36.141120731 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1987047936
starting receive base loop
num_worker_connections 85
Creating worker on tid 1218048512
starting receive base loop
num_worker_connections 85
Creating worker on tid 453046784
starting receive base loop
num_worker_connections 85
Creating worker on tid 3985633792
starting receive base loop
num_worker_connections 85
Creating worker on tid 3223253504
starting receive base loop
Created 512 connections total
Creating worker on tid 2458251776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314600.313025,       0.0,      379874,     341719,      38155,     229542,     112177,  32.369598,  75.200000,  88.300000, 127.600000,  31.392068,   0.000000, 360.390007, 488.355886
Outstanding requests per worker:
665 639 635 655 654 561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166875.0,      834376,     750864,      83512,     570944,     179920,  18.154896,  32.300000,  42.400000,  69.500000,  12.536744,   0.610000, 127.496004, 585.701018
Outstanding requests per worker:
525 415 480 470 459 519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166661.0,      833306,     750438,      82868,     603199,     147239,  17.288273,  28.200000,  36.900000,  49.600000,   9.861650,   0.442000, 101.144001, 633.048253
Outstanding requests per worker:
503 453 505 496 489 504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166671.2,      833357,     749985,      83372,     619161,     130824,  17.907571,  29.300000,  38.400000,  52.400000,  10.338914,   0.670000, 103.327997, 657.329948
Outstanding requests per worker:
501 528 524 460 488 486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166676.8,      833385,     750019,      83366,     630662,     119357,  18.188687,  29.300000,  38.900000,  52.300000,  10.345920,   0.597000, 100.933999, 674.277254
Outstanding requests per worker:
571 472 470 470 535 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166648.8,      833245,     749775,      83470,     638324,     111451,  18.918811,  31.800000,  41.200000,  57.300000,  11.165475,   0.653000, 105.990000, 685.549650
Outstanding requests per worker:
611 484 522 556 517 514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166268.2,      831342,     748061,      83281,     643922,     104139,  23.765212,  47.100000,  62.100000,  84.700000,  17.269016,   0.722000, 150.057003, 696.119675
Outstanding requests per worker:
802 893 876 900 889 879 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:56   0:00 /usr/lib/linux
memcache      7  350  0.0 519296 159936 pts/0   Sl+  18:56   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20592445641      instructions:u                                              
         404868960      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        5441603616      L1-dcache-loads:u                                           
        1332770490      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10694208474      armv8_pmuv3_0/l1i_cache/:u                                   

      37.361229885 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1653993984
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
num_worker_connections 85
Creating worker on tid 2887709184
starting receive base loop
Created 512 connections total
Creating worker on tid 2122707456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314640.313065,       0.0,      380874,     342617,      38257,     230287,     112330,  35.370865,  81.000000,  95.300000, 135.900000,  34.009823,   0.000000, 384.537995, 488.394020
Outstanding requests per worker:
671 738 774 781 774 736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166994.6,      834974,     751899,      83075,     572582,     179317,  20.734414,  41.200000,  58.400000,  82.600000,  16.415770,   0.747000, 180.952996, 585.834054
Outstanding requests per worker:
440 501 431 470 523 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166659.0,      833296,     749936,      83360,     602049,     147887,  17.162222,  27.600000,  36.600000,  48.700000,   9.641384,   0.605000,  87.324999, 632.282019
Outstanding requests per worker:
510 475 511 500 491 493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.2,      833387,     750074,      83313,     619141,     130933,  17.740729,  28.500000,  37.800000,  50.700000,  10.014461,   0.736000,  95.049001, 657.330070
Outstanding requests per worker:
539 526 499 491 453 501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166696.4,      833483,     750540,      82943,     630162,     120378,  18.118441,  29.300000,  38.800000,  52.300000,  10.281770,   0.854000,  99.081002, 673.399706
Outstanding requests per worker:
488 522 508 498 501 438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166620.2,      833102,     749457,      83645,     638413,     111044,  18.787168,  31.400000,  41.000000,  56.800000,  11.104640,   0.680000, 111.594997, 685.766782
Outstanding requests per worker:
557 530 554 547 522 526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166288.6,      831444,     747927,      83517,     643733,     104194,  21.913560,  41.500000,  54.300000,  77.700000,  15.170385,   0.622000, 141.747996, 695.805357
Outstanding requests per worker:
842 840 860 869 955 820 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:57   0:00 /usr/lib/linux
memcache      7  360  0.0 517248 160512 pts/0   Sl+  18:57   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20618027830      instructions:u                                              
         408625801      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        5438434010      L1-dcache-loads:u                                           
        1330536616      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10650243278      armv8_pmuv3_0/l1i_cache/:u                                   

      36.011040853 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2221273600
starting receive base loop
num_worker_connections 85
Creating worker on tid 1451618816
starting receive base loop
num_worker_connections 85
Creating worker on tid 689238528
starting receive base loop
num_worker_connections 85
Creating worker on tid 4221825536
starting receive base loop
num_worker_connections 85
Creating worker on tid 3456823808
starting receive base loop
Created 512 connections total
Creating worker on tid 2694443520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314681.313106,       0.0,      382674,     344208,      38466,     230734,     113474,  63.317955, 118.800000, 135.400000, 201.200000,  47.432387,   0.000000, 450.100988, 486.560905
Outstanding requests per worker:
2554 2522 2447 2535 2631 2775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170350.6,      851754,     766511,      85243,     582879,     183632, 109.500060, 168.900000, 192.600000, 240.000000,  44.391897,   1.282000, 370.467007, 585.677403
Outstanding requests per worker:
3321 3247 3605 3565 3454 3714 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170680.6,      853404,     768099,      85305,     617910,     150189, 132.906811, 208.100000, 240.600000, 302.200000,  55.941950,   1.392000, 482.744992, 634.006941
Outstanding requests per worker:
3863 3927 4242 3987 4390 4305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170841.4,      854208,     768679,      85529,     635583,     133096, 154.204845, 257.400000, 304.100000, 388.500000,  72.636284,   1.352000, 605.280995, 658.830161
Outstanding requests per worker:
4326 4312 4789 4655 4927 4728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171041.4,      855208,     769447,      85761,     647416,     122031, 166.869973, 278.600000, 334.200000, 463.900000,  83.600731,   3.099000, 698.062003, 674.066084
Outstanding requests per worker:
4742 4471 5321 4881 5267 5093 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171004.2,      855022,     769536,      85486,     656867,     112669, 179.739505, 307.500000, 377.600000, 520.200000,  96.420782,   2.119000, 840.997994, 688.113663
Outstanding requests per worker:
5003 4964 5649 5330 5701 5303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170349.4,      851748,     766524,      85224,     660817,     105707, 201.334369, 347.400000, 435.400000, 626.900000, 112.880169,   3.980000, 859.485984, 697.164365
Outstanding requests per worker:
5922 5632 6492 6044 6924 6399 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:58   0:00 /usr/lib/linux
memcache      7  360  0.0 521344 168192 pts/0   Sl+  18:58   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21586447548      instructions:u                                              
         427635502      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        5791793038      L1-dcache-loads:u                                           
        1380882797      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11192603013      armv8_pmuv3_0/l1i_cache/:u                                   

      36.030193955 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1755509248
starting receive base loop
num_worker_connections 85
Creating worker on tid 981856768
starting receive base loop
num_worker_connections 85
Creating worker on tid 219476480
starting receive base loop
num_worker_connections 85
Creating worker on tid 3752063488
starting receive base loop
num_worker_connections 85
Creating worker on tid 2987061760
starting receive base loop
Created 512 connections total
Creating worker on tid 2224681472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314721.313146,       0.0,      384520,     345827,      38693,     232790,     113037,  52.944815, 101.900000, 121.900000, 198.600000,  42.820698,   0.000000, 398.173988, 489.275615
Outstanding requests per worker:
1669 1583 1726 1641 1581 1815 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171896.2,      859482,     773387,      86095,     589879,     183508,  48.716695, 120.800000, 143.800000, 192.100000,  45.671066,   0.821000, 314.283997, 587.183451
Outstanding requests per worker:
1253 1259 1275 1396 1290 1255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171158.0,      855791,     770706,      85085,     620200,     150506,  48.309863, 142.900000, 168.600000, 207.400000,  54.522422,   0.977000, 323.796004, 633.903002
Outstanding requests per worker:
1522 1527 1499 1529 1570 1502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171101.4,      855508,     770096,      85412,     636597,     133499,  58.673534, 181.400000, 211.200000, 269.000000,  71.280526,   0.835000, 443.017006, 658.648915
Outstanding requests per worker:
1691 1655 2014 1927 1757 1801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171254.6,      856274,     770795,      85479,     648677,     122118,  65.741877, 201.400000, 242.200000, 326.100000,  82.048433,   0.755000, 487.774014, 674.424647
Outstanding requests per worker:
1905 1837 2058 1957 2097 1916 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171302.2,      856512,     770439,      86073,     657689,     112750,  70.376433, 219.600000, 258.500000, 326.500000,  87.240278,   1.009000, 508.646011, 688.481464
Outstanding requests per worker:
1987 2125 2222 2118 1898 2112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169896.4,      849483,     763833,      85650,     658467,     105366,  86.123891, 223.500000, 267.100000, 345.000000,  86.340901,   0.930000, 520.187974, 697.395306
Outstanding requests per worker:
3209 3150 3487 3484 3267 3591 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:59   0:00 /usr/lib/linux
memcache      7  360  0.0 521344 165824 pts/0   Sl+  18:59   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21299984901      instructions:u                                              
         422017519      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        5657104144      L1-dcache-loads:u                                           
        1374142165      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11014517374      armv8_pmuv3_0/l1i_cache/:u                                   

      36.071112507 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1548022272
starting receive base loop
num_worker_connections 85
Creating worker on tid 772469248
starting receive base loop
num_worker_connections 85
Creating worker on tid 10088960
starting receive base loop
num_worker_connections 85
Creating worker on tid 3540054528
starting receive base loop
num_worker_connections 85
Creating worker on tid 2777674240
starting receive base loop
Created 512 connections total
Creating worker on tid 2015293952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314763.313188,       0.0,      386759,     348035,      38724,     234035,     114000,  78.535125, 140.800000, 168.700000, 287.200000,  58.064111,   0.000000, 530.857027, 489.622960
Outstanding requests per worker:
3376 3208 3686 3511 3423 3931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173989.2,      869947,     782900,      87047,     597290,     185610, 158.986126, 239.900000, 271.800000, 339.800000,  60.209962,   3.085000, 558.336973, 587.931233
Outstanding requests per worker:
5308 5289 5763 5849 5691 5715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174613.8,      873070,     785554,      87516,     631469,     154085, 216.382723, 338.400000, 397.600000, 500.700000,  89.458148,   9.631000, 765.938997, 633.586568
Outstanding requests per worker:
6710 6493 7517 7275 7590 7414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174494.8,      872475,     785000,      87475,     649533,     135467, 270.827188, 447.500000, 538.900000, 674.400000, 123.643206,  21.509999, 875.122011, 659.267215
Outstanding requests per worker:
7824 7951 9436 9176 9446 9096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175029.8,      875150,     787435,      87715,     663608,     123827, 319.116708, 558.800000, 679.800000, 831.300000, 161.269465,  46.739001, 1154.862046, 675.830629
Outstanding requests per worker:
8775 9066 10895 10353 10895 10206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174768.0,      873841,     786752,      87089,     672317,     114435, 364.467893, 702.200000, 823.600000, 1006.900000, 208.422822,  36.743999, 1320.459962, 689.195591
Outstanding requests per worker:
9523 10001 12469 12409 12640 11738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173851.0,      869256,     782151,      87105,     675643,     106508, 423.359303, 816.600000, 961.300000, 1184.100000, 249.502206,  30.452000, 1619.619012, 698.698848
Outstanding requests per worker:
11309 11759 14909 14644 15239 14120 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  18:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:59   0:00 /usr/lib/linux
memcache      7  350  0.0 523392 177984 pts/0   Sl+  18:59   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       22022689776      instructions:u                                              
         429341746      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        5882891404      L1-dcache-loads:u                                           
        1395001344      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11322665583      armv8_pmuv3_0/l1i_cache/:u                                   

      37.210556984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1960636928
starting receive base loop
num_worker_connections 85
Creating worker on tid 1191244288
starting receive base loop
num_worker_connections 85
Creating worker on tid 428864000
starting receive base loop
num_worker_connections 85
Creating worker on tid 3961451008
starting receive base loop
num_worker_connections 85
Creating worker on tid 3196449280
starting receive base loop
Created 512 connections total
Creating worker on tid 2434068992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314805.313230,       0.0,      504642,     453963,      50679,     311606,     142357,  48.466763, 112.400000, 131.800000, 174.000000,  46.455990,   0.000000, 306.737006, 502.983664
Outstanding requests per worker:
3085 3052 3232 3143 3223 3381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173353.0,      866766,     780128,      86638,     601545,     178583, 158.993379, 244.400000, 277.600000, 357.200000,  63.766800,   2.913000, 534.636974, 596.547859
Outstanding requests per worker:
5401 5628 5846 5953 6108 5813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174270.0,      871351,     784933,      86418,     633849,     151084, 227.937253, 366.200000, 427.100000, 547.100000,  98.885861,  11.366000, 819.305003, 637.564748
Outstanding requests per worker:
7169 6968 7981 7874 7977 7845 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174164.0,      870821,     783869,      86952,     650310,     133559, 290.561726, 520.100000, 618.100000, 794.500000, 154.014713,  25.378000, 1107.646942, 661.633829
Outstanding requests per worker:
8517 8467 10291 9965 10260 9907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173992.8,      869965,     782296,      87669,     660789,     121507, 357.895706, 686.900000, 794.800000, 1033.100000, 210.816382,  26.374999, 1362.890005, 677.974920
Outstanding requests per worker:
10075 9968 12904 12327 12406 12220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173810.2,      869052,     782351,      86701,     668562,     113789, 429.575008, 857.700000, 992.100000, 1255.100000, 268.192391,  14.231000, 1702.962041, 689.509067
Outstanding requests per worker:
11791 11579 15796 14592 14490 15008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172796.2,      863982,     777500,      86482,     671332,     106168, 524.744463, 1025.000000, 1180.800000, 1492.200000, 320.548858,  31.134000, 1901.764989, 698.808841
Outstanding requests per worker:
14450 13731 19153 17905 18119 18344 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:00   0:00 /usr/lib/linux
memcache      8  351  0.0 524416 165824 pts/0   Sl+  19:00   2:13 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       22340936363      instructions:u                                              
         446199202      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        5961945908      L1-dcache-loads:u                                           
        1420769098      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11514013658      armv8_pmuv3_0/l1i_cache/:u                                   

      38.310170325 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1949430272
starting receive base loop
num_worker_connections 85
Creating worker on tid 1175122432
starting receive base loop
num_worker_connections 85
Creating worker on tid 412742144
starting receive base loop
num_worker_connections 85
Creating worker on tid 3942707712
starting receive base loop
num_worker_connections 85
Creating worker on tid 3180327424
starting receive base loop
Created 512 connections total
Creating worker on tid 2417947136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314845.313270,       0.0,      384022,     345509,      38513,     232004,     113505,  83.227826, 146.900000, 178.900000, 344.500000,  67.459293,   0.000000, 650.467992, 488.091453
Outstanding requests per worker:
3402 3506 3745 3768 3759 4554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173548.2,      867742,     780853,      86889,     596057,     184796, 175.273736, 268.600000, 312.000000, 403.100000,  70.811186,   4.338000, 609.651029, 588.409331
Outstanding requests per worker:
5828 5858 6520 6431 6207 6554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174193.2,      870967,     783886,      87081,     630639,     153247, 244.740274, 388.900000, 473.200000, 589.700000, 106.244453,  13.595000, 838.190973, 633.871005
Outstanding requests per worker:
7362 7670 8704 8423 8083 8618 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173977.0,      869886,     782707,      87179,     647792,     134915, 310.436429, 542.100000, 636.700000, 781.800000, 153.014940,  23.287000, 1126.911044, 659.085726
Outstanding requests per worker:
9186 9516 10792 10586 10242 11068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174214.6,      871074,     784012,      87062,     660480,     123532, 376.339457, 684.100000, 792.900000, 1033.800000, 199.595311,  53.672999, 1360.762000, 675.567778
Outstanding requests per worker:
10588 10921 12746 12697 12256 13511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174039.2,      870197,     782968,      87229,     668845,     114123, 444.605663, 837.500000, 956.400000, 1224.200000, 251.711333,  35.363000, 1689.059973, 688.418423
Outstanding requests per worker:
12017 12350 15226 15230 14263 15861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173234.4,      866173,     779581,      86592,     672585,     106996, 524.002858, 995.100000, 1155.000000, 1454.600000, 310.786755,  68.837002, 1979.341030, 698.115497
Outstanding requests per worker:
13979 14387 18384 18362 17100 18994 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:01   0:00 /usr/lib/linux
memcache      7  360  0.0 522368 171264 pts/0   Sl+  19:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21872353649      instructions:u                                              
         428393346      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        5840711084      L1-dcache-loads:u                                           
        1378061821      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11239221031      armv8_pmuv3_0/l1i_cache/:u                                   

      35.999588465 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1933242880
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
num_worker_connections 64
Creating worker on tid 2654335488
starting receive base loop
Created 512 connections total
Creating worker on tid 2058416640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314886.313311,       0.0,      355871,     320351,      35520,     213768,     106583,  10.869061,  23.200000,  29.900000,  58.600000,  12.073167,   0.000000, 182.299003, 482.379509
Outstanding requests per worker:
159 195 193 163 157 182 207 171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150945.6,      754729,     679383,      75346,     514372,     165011,   9.459918,  17.600000,  21.500000,  27.300000,   6.010646,   0.185000,  42.582002, 581.333380
Outstanding requests per worker:
189 185 198 179 180 203 166 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150952.0,      754761,     679212,      75549,     541852,     137360,   9.915604,  18.600000,  22.500000,  28.900000,   6.341199,   0.188000,  58.520000, 626.219709
Outstanding requests per worker:
223 193 160 197 195 191 166 164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.4,      754713,     679671,      75042,     558021,     121650,  10.204740,  19.000000,  23.100000,  30.100000,   6.552343,   0.196000,  63.422002, 652.611409
Outstanding requests per worker:
184 199 195 180 218 204 209 195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150949.2,      754747,     679774,      74973,     568661,     111113,  10.495185,  19.600000,  23.700000,  31.000000,   6.758374,   0.194000,  65.001003, 669.004290
Outstanding requests per worker:
221 215 211 166 208 206 188 177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150949.0,      754746,     679212,      75534,     575801,     103411,  10.579625,  19.600000,  24.100000,  31.000000,   6.774924,   0.199000,  59.322000, 681.195005
Outstanding requests per worker:
201 181 219 200 202 213 221 177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150951.0,      754756,     679141,      75615,     581471,      97670,  10.713561,  20.000000,  24.300000,  31.700000,   6.901807,   0.188000,  62.719002, 690.792903
Outstanding requests per worker:
227 195 191 214 218 204 192 207 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:01   0:00 /usr/lib/linux
memcache      7  371  0.0 443072 146752 pts/0   Sl+  19:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18602521380      instructions:u                                              
         385498063      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        4867730303      L1-dcache-loads:u                                           
        1243839115      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9785698054      armv8_pmuv3_0/l1i_cache/:u                                   

      35.940692082 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2260529664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1663824384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1067905536
starting receive base loop
num_worker_connections 64
Creating worker on tid 471986688
starting receive base loop
num_worker_connections 64
Creating worker on tid 4171035136
starting receive base loop
num_worker_connections 64
Creating worker on tid 3575116288
starting receive base loop
num_worker_connections 64
Creating worker on tid 2981818880
starting receive base loop
Created 512 connections total
Creating worker on tid 2385900032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314928.313353,       0.0,      366947,     330192,      36755,     220949,     109243,  15.021123,  32.400000,  42.900000,  83.100000,  17.615095,   0.000000, 278.701007, 485.175446
Outstanding requests per worker:
238 224 193 197 210 234 228 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153825.0,      769126,     692422,      76704,     524859,     167563,  12.016744,  22.300000,  26.800000,  36.600000,   7.821401,   0.185000,  77.382997, 582.285030
Outstanding requests per worker:
272 224 244 248 278 195 224 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153838.2,      769192,     692320,      76872,     553268,     139052,  12.676249,  23.100000,  28.400000,  38.800000,   8.200200,   0.194000,  75.857997, 627.964363
Outstanding requests per worker:
265 225 257 235 252 258 255 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.6,      769284,     692869,      76415,     569121,     123748,  13.257048,  23.500000,  29.600000,  40.200000,   8.487942,   0.235000,  81.262000, 652.996741
Outstanding requests per worker:
238 246 252 262 227 260 267 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153826.2,      769132,     692273,      76859,     579039,     113234,  13.666467,  24.200000,  30.700000,  41.400000,   8.741361,   0.231000,  75.654000, 669.242043
Outstanding requests per worker:
262 260 237 271 263 294 286 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153832.4,      769163,     692195,      76968,     587217,     104978,  13.971889,  24.900000,  30.900000,  43.200000,   9.028308,   0.248000,  90.049997, 682.198285
Outstanding requests per worker:
324 298 326 269 295 309 257 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153884.2,      769422,     692565,      76857,     593263,      99302,  14.308077,  25.400000,  31.600000,  44.600000,   9.266468,   0.190000,  84.324002, 691.663920
Outstanding requests per worker:
273 244 283 280 288 269 267 286 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:02   0:00 /usr/lib/linux
memcache      8  351  0.0 446144 149120 pts/0   Sl+  19:02   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18936090853      instructions:u                                              
         383621185      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4980178348      L1-dcache-loads:u                                           
        1247630769      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9871006863      armv8_pmuv3_0/l1i_cache/:u                                   

      37.320279056 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2548232704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575314969.313394,       0.0,      375125,     337372,      37753,     226945,     110427,  17.103680,  37.500000,  54.300000,  90.700000,  19.311418,   0.000000, 284.763008, 488.501055
Outstanding requests per worker:
266 232 259 293 274 249 229 231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156846.4,      784233,     706500,      77733,     535950,     170550,  13.257132,  24.200000,  29.300000,  41.100000,   8.632870,   0.239000,  86.308002, 583.539727
Outstanding requests per worker:
260 284 336 254 253 226 257 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156851.4,      784258,     706245,      78013,     564509,     141736,  13.973716,  25.000000,  30.800000,  43.400000,   9.029564,   0.237000,  85.863002, 628.461790
Outstanding requests per worker:
268 290 311 295 262 260 246 318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156851.4,      784258,     705869,      78389,     580112,     125757,  14.716973,  26.300000,  32.500000,  45.600000,   9.550988,   0.236000,  96.781000, 653.270825
Outstanding requests per worker:
270 314 312 270 319 280 269 303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.8,      784315,     706062,      78253,     591611,     114451,  15.174923,  26.900000,  33.700000,  47.200000,   9.851822,   0.244000,  92.786998, 671.140449
Outstanding requests per worker:
339 268 275 310 301 275 322 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156860.8,      784305,     706099,      78206,     599145,     106954,  15.454555,  26.800000,  34.300000,  47.400000,   9.887789,   0.278000,  96.805997, 682.671492
Outstanding requests per worker:
298 278 326 315 302 289 306 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156852.2,      784262,     705717,      78545,     605290,     100427,  15.728251,  27.600000,  34.800000,  48.600000,  10.111937,   0.272000,  95.089003, 692.822340
Outstanding requests per worker:
305 306 329 302 317 340 302 332 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:03   0:00 /usr/lib/linux
memcache      7  361  0.0 447168 147392 pts/0   Sl+  19:03   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19407034756      instructions:u                                              
         391315983      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        5099655249      L1-dcache-loads:u                                           
        1266370448      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10059081534      armv8_pmuv3_0/l1i_cache/:u                                   

      35.761470790 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2292511232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1696068096
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
Created 512 connections total
Creating worker on tid 2418143744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315010.313435,       0.0,      470350,     423454,      46896,     288979,     134475,  10.792034,  25.200000,  32.400000,  63.200000,  14.946511,   0.000000, 304.221004, 498.790740
Outstanding requests per worker:
236 246 240 261 266 285 244 219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.8,      784330,     705923,      78407,     540905,     165018,  13.276410,  23.800000,  29.400000,  40.400000,   8.542709,   0.185000,  81.150003, 591.302196
Outstanding requests per worker:
265 265 280 261 270 245 227 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156843.6,      784219,     705920,      78299,     567053,     138867,  13.831882,  24.900000,  30.700000,  42.600000,   8.958767,   0.225000,  87.609001, 632.302265
Outstanding requests per worker:
251 280 250 303 271 257 302 296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156860.0,      784301,     705239,      79062,     582109,     123130,  14.395177,  25.500000,  31.900000,  44.300000,   9.247650,   0.288000,  85.545003, 656.205898
Outstanding requests per worker:
281 291 305 285 328 312 261 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156889.8,      784450,     705936,      78514,     593321,     112615,  14.686147,  25.800000,  32.500000,  45.000000,   9.401975,   0.269000,  85.502997, 673.480698
Outstanding requests per worker:
276 263 295 270 293 299 299 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.6,      784309,     705848,      78461,     600196,     105652,  14.948944,  26.500000,  33.000000,  46.500000,   9.648720,   0.228000,  88.872001, 685.172267
Outstanding requests per worker:
302 279 290 302 295 302 280 276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.6,      784349,     705798,      78551,     606716,      99082,  15.280878,  26.900000,  33.900000,  47.400000,   9.880456,   0.242000,  99.482000, 694.684415
Outstanding requests per worker:
324 286 295 278 281 315 291 286 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:03   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 154560 pts/0   Sl+  19:03   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19769680685      instructions:u                                              
         399614107      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        5197424008      L1-dcache-loads:u                                           
        1310966678      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10362167113      armv8_pmuv3_0/l1i_cache/:u                                   

      37.019995138 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2215178752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
Created 512 connections total
Creating worker on tid 2342973952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315053.313478,       0.0,      484040,     435252,      48788,     298312,     136940,  14.511155,  34.600000,  46.800000,  79.000000,  17.616484,   0.000000, 249.290004, 502.701348
Outstanding requests per worker:
404 323 360 338 340 384 406 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159476.2,      797382,     718055,      79327,     550876,     167179,  25.201836,  59.700000,  79.700000, 109.200000,  23.756286,   0.272000, 244.615003, 593.123376
Outstanding requests per worker:
683 681 686 768 692 682 677 753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159594.6,      797974,     718615,      79359,     577438,     141177,  42.388572, 126.300000, 153.000000, 204.500000,  50.142592,   0.247000, 374.235004, 632.387174
Outstanding requests per worker:
966 1014 968 907 968 938 979 962 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159893.2,      799467,     719670,      79797,     593817,     125853,  49.579703, 152.700000, 179.000000, 223.400000,  59.546849,   0.377000, 352.425009, 656.837200
Outstanding requests per worker:
1124 957 939 1102 1033 1021 1048 1089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159785.4,      798928,     718907,      80021,     603680,     115227,  55.453206, 175.000000, 209.800000, 265.900000,  69.975401,   0.332000, 420.738012, 672.949569
Outstanding requests per worker:
1082 1351 1163 1211 1129 1208 1179 1116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159943.6,      799719,     719711,      80008,     611979,     107732,  61.713343, 199.500000, 231.300000, 291.300000,  79.145661,   0.189000, 473.533005, 685.173652
Outstanding requests per worker:
1248 1255 1176 1233 1251 1089 1331 1181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158771.0,      793856,     714903,      78953,     614912,      99991,  65.531607, 209.200000, 245.900000, 313.400000,  83.832235,   0.343000, 537.114024, 694.781270
Outstanding requests per worker:
2044 1982 2035 2045 1860 1915 2016 2069 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:04   0:00 /usr/lib/linux
memcache      7  351  0.0 515200 154880 pts/0   Sl+  19:04   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20320741030      instructions:u                                              
         403956236      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        5375922322      L1-dcache-loads:u                                           
        1320687607      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10569106637      armv8_pmuv3_0/l1i_cache/:u                                   

      38.420927595 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1935340032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
num_worker_connections 64
Creating worker on tid 2654335488
starting receive base loop
Created 512 connections total
Creating worker on tid 2058416640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315094.313519,       0.0,      389721,     350607,      39114,     236396,     114211,  23.615817,  56.800000,  75.000000, 120.500000,  26.598003,   0.000000, 349.081993, 490.152923
Outstanding requests per worker:
385 383 432 380 477 478 397 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160165.2,      800827,     720921,      79906,     548759,     172162,  18.223547,  34.600000,  44.900000,  72.000000,  13.761271,   0.280000, 133.578002, 586.349699
Outstanding requests per worker:
275 322 343 334 318 337 368 321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159960.4,      799803,     719356,      80447,     576213,     143143,  17.068663,  29.400000,  38.300000,  52.900000,  11.042369,   0.286000, 109.090999, 630.149470
Outstanding requests per worker:
372 385 348 403 382 304 335 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159610.0,      798051,     718323,      79728,     592574,     125749,  22.299961,  46.100000,  64.500000,  92.000000,  18.973423,   0.292000, 200.663000, 656.100714
Outstanding requests per worker:
555 595 635 593 659 649 648 599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159610.8,      798055,     717915,      80140,     602883,     115032,  38.702216, 108.200000, 136.100000, 180.600000,  43.021782,   0.230000, 320.986003, 672.363444
Outstanding requests per worker:
844 842 848 958 853 795 862 916 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159835.6,      799179,     719485,      79694,     611990,     107495,  45.280905, 137.700000, 161.700000, 208.700000,  53.616594,   0.232000, 323.918015, 684.140803
Outstanding requests per worker:
1033 993 904 940 958 938 1096 936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160011.6,      800059,     720258,      79801,     619191,     101067,  48.437744, 147.800000, 175.800000, 229.100000,  58.493906,   0.390000, 363.710999, 694.212260
Outstanding requests per worker:
1004 938 1015 977 958 1035 977 916 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:05   0:00 /usr/lib/linux
memcache      7  362  0.0 449216 155648 pts/0   Sl+  19:05   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19854696120      instructions:u                                              
         394904454      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        5259542495      L1-dcache-loads:u                                           
        1294389384      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10343089263      armv8_pmuv3_0/l1i_cache/:u                                   

      36.110295353 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2006708736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
num_worker_connections 64
Creating worker on tid 2729505280
starting receive base loop
Created 512 connections total
Creating worker on tid 2133586432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315134.313559,       0.0,      375723,     338036,      37687,     226633,     111403,  55.969063, 113.000000, 133.500000, 190.300000,  46.296870,   0.000000, 426.577985, 486.661267
Outstanding requests per worker:
1787 1877 1860 1886 1926 1874 1767 1836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161501.8,      807510,     726571,      80939,     551616,     174955, 122.894558, 192.900000, 222.800000, 293.900000,  53.753347,   0.702000, 492.098987, 584.524916
Outstanding requests per worker:
3106 3101 2838 2930 2926 2967 2894 2959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162452.4,      812263,     731253,      81010,     586121,     145132, 157.497555, 260.000000, 306.100000, 391.900000,  72.811077,   1.122000, 576.573014, 630.996888
Outstanding requests per worker:
3421 3513 3449 3440 3526 3417 3542 3569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162491.8,      812460,     731115,      81345,     602464,     128651, 182.891472, 311.400000, 370.500000, 486.800000,  90.396588,   1.657000, 705.543995, 655.676227
Outstanding requests per worker:
4020 4236 3801 3830 3922 4136 3857 3990 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162325.6,      811629,     730024,      81605,     613149,     116875, 210.837321, 371.500000, 463.200000, 622.300000, 115.911196,   2.188000, 918.425024, 673.219913
Outstanding requests per worker:
4647 4603 4522 4350 4616 4539 4786 4495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162597.4,      812988,     731935,      81053,     623130,     108805, 235.653914, 430.700000, 541.600000, 733.600000, 138.045124,   1.954000, 1076.017022, 685.203483
Outstanding requests per worker:
5268 5055 4696 4876 4761 5068 5431 4811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161836.2,      809182,     728449,      80733,     626196,     102253, 260.249906, 501.200000, 629.500000, 856.900000, 163.880101,   1.666000, 1188.599944, 695.383703
Outstanding requests per worker:
5967 5971 5636 5727 5608 5950 6527 5831 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:05   0:00 /usr/lib/linux
memcache      7  361  0.0 515200 164416 pts/0   Sl+  19:05   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20483788268      instructions:u                                              
         410889228      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        5493726804      L1-dcache-loads:u                                           
        1313432322      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10605186896      armv8_pmuv3_0/l1i_cache/:u                                   

      36.022070701 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2519069184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1924198912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
Created 512 connections total
Creating worker on tid 2646274560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315177.313602,       0.0,      488709,     439807,      48902,     301193,     138614,  35.904710,  92.500000, 116.000000, 169.300000,  42.290565,   0.000000, 443.592012, 502.315036
Outstanding requests per worker:
1774 1673 1714 1740 1693 1668 1649 1744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163538.6,      817694,     735694,      82000,     564617,     171077, 134.035760, 213.000000, 246.900000, 321.500000,  61.761176,   0.981000, 653.585017, 593.913237
Outstanding requests per worker:
3630 3672 3500 3691 3851 3563 3600 3895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164459.6,      822299,     740247,      82052,     596592,     143655, 207.355494, 332.800000, 390.500000, 509.200000,  92.162722,   2.247000, 706.300020, 635.700203
Outstanding requests per worker:
5102 4933 5073 5102 4992 4996 5170 5124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164762.6,      823814,     741649,      82165,     613268,     128381, 270.740584, 463.600000, 551.300000, 699.800000, 133.818077,   5.101000, 1054.700017, 658.788129
Outstanding requests per worker:
6193 6140 6224 6287 6119 6223 6310 6579 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164672.2,      823362,     741001,      82361,     623965,     117036, 329.248850, 617.700000, 721.000000, 955.600000, 186.315790,   8.716000, 1283.367991, 675.714103
Outstanding requests per worker:
7521 7233 7782 7575 7326 7432 7345 7917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164537.0,      822686,     740165,      82521,     630693,     109472, 392.184221, 773.300000, 930.500000, 1133.200000, 239.438178,  19.460000, 1505.972028, 686.783797
Outstanding requests per worker:
9006 8405 9195 9118 8577 8431 9030 9119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164314.8,      821575,     739576,      81999,     636550,     103026, 455.453126, 955.300000, 1097.500000, 1314.800000, 293.231493,  16.876999, 1755.568027, 695.731250
Outstanding requests per worker:
10336 10119 10431 10295 10191 9818 10861 10645 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:06   0:00 /usr/lib/linux
memcache      7  351  0.0 520320 167104 pts/0   Sl+  19:06   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21126866058      instructions:u                                              
         414511270      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        5662643970      L1-dcache-loads:u                                           
        1352632965      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10959163977      armv8_pmuv3_0/l1i_cache/:u                                   

      38.359921009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2598760960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1999368704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
Created 512 connections total
Creating worker on tid 2721444352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315218.313643,       0.0,      386687,     348042,      38645,     233713,     114329,  58.842409, 117.700000, 136.700000, 193.100000,  47.116747,   0.000000, 388.390988, 488.018047
Outstanding requests per worker:
2011 2170 2078 1935 2037 1959 1981 2122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164213.8,      821070,     738867,      82203,     561798,     177069, 138.752074, 212.100000, 245.600000, 314.700000,  56.544830,   0.882000, 516.918004, 585.505975
Outstanding requests per worker:
3612 3577 3627 3473 3695 3558 3513 3564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164860.4,      824303,     742348,      81955,     595766,     146582, 199.921291, 301.200000, 347.400000, 461.100000,  78.904710,   1.278000, 701.572001, 631.940590
Outstanding requests per worker:
4462 4612 4660 4709 4959 4690 4674 4957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164981.0,      824906,     742317,      82589,     612314,     130003, 250.650951, 386.900000, 448.500000, 604.100000, 103.658524,   6.509000, 871.190012, 656.346516
Outstanding requests per worker:
5873 5760 5885 5671 5762 5801 5902 5598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165201.0,      826006,     743452,      82554,     624205,     119247, 299.252511, 489.500000, 576.700000, 758.100000, 137.099423,  10.299000, 1143.509030, 672.409149
Outstanding requests per worker:
6601 6854 7019 6556 6767 6764 6603 6525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165282.6,      826414,     743693,      82721,     633601,     110092, 342.168860, 599.000000, 723.300000, 919.200000, 178.049463,  11.219000, 1269.322038, 685.987986
Outstanding requests per worker:
7632 7516 7767 7708 7771 7511 7441 7330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164305.6,      821529,     739463,      82066,     636324,     103139, 393.122245, 704.600000, 874.800000, 1062.000000, 210.626002,  21.090001, 1371.541023, 695.367551
Outstanding requests per worker:
9296 9302 9197 8816 9067 9075 8832 8979 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:07   0:00 /usr/lib/linux
memcache      7  362  0.0 516224 164992 pts/0   Sl+  19:07   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20822194645      instructions:u                                              
         416207452      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        5566886386      L1-dcache-loads:u                                           
        1329394489      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10730795012      armv8_pmuv3_0/l1i_cache/:u                                   

      36.270757677 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2644308480
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315259.313684,       0.0,      390505,     351576,      38929,     236375,     115201,  71.962359, 142.800000, 164.700000, 244.400000,  58.422090,   0.000000, 454.970986, 488.786979
Outstanding requests per worker:
2557 2757 2621 2707 2678 2703 2606 3022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165952.8,      829765,     747174,      82591,     569152,     178022, 195.710903, 295.300000, 333.300000, 421.900000,  76.106222,   1.288000, 826.272011, 586.989661
Outstanding requests per worker:
5472 5491 5330 5117 5446 5222 5416 5534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166731.4,      833658,     750370,      83288,     602786,     147584, 303.893272, 467.100000, 533.800000, 671.100000, 121.044925,  29.216001, 1022.140026, 632.960278
Outstanding requests per worker:
7752 7494 7291 7505 7465 7350 7723 7954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166536.4,      832683,     749205,      83478,     618610,     130595, 407.549087, 648.800000, 728.800000, 903.800000, 168.282186,  31.104000, 1209.205031, 656.748860
Outstanding requests per worker:
10113 9839 9786 9692 9922 9598 10106 9976 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166254.8,      831275,     748126,      83149,     629067,     119059, 519.147421, 847.700000, 951.800000, 1143.700000, 226.249929,  40.569998, 1468.196988, 673.751729
Outstanding requests per worker:
12396 12691 12237 12296 12298 12245 12391 12336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166121.0,      830606,     747262,      83344,     636358,     110904, 635.032063, 1072.200000, 1203.200000, 1386.900000, 293.568315,  48.726000, 1715.878010, 686.283052
Outstanding requests per worker:
14994 14973 15012 14534 14955 14857 14974 15136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164698.2,      823492,     741186,      82306,     637776,     103410, 768.849082, 1299.900000, 1423.600000, 1655.600000, 355.571781,  78.896001, 2116.923094, 694.962014
Outstanding requests per worker:
18649 18358 18442 17874 18364 18187 18517 18720 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:07   0:00 /usr/lib/linux
memcache      7  362  0.0 516224 164736 pts/0   Sl+  19:07   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20871797936      instructions:u                                              
         404549725      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        5587953103      L1-dcache-loads:u                                           
        1328313895      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10768604283      armv8_pmuv3_0/l1i_cache/:u                                   

      36.100429589 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1679290880
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
num_worker_connections 64
Creating worker on tid 2402021888
starting receive base loop
Created 512 connections total
Creating worker on tid 1806103040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315299.313724,       0.0,      382730,     344206,      38524,     241821,     102385,  80.239106, 151.200000, 181.200000, 346.400000,  71.470242,   0.000000, 713.045001, 494.145413
Outstanding requests per worker:
2948 2817 2889 2958 2804 2896 2722 3836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165852.8,      829265,     746395,      82870,     585311,     161084, 209.498385, 310.600000, 353.200000, 475.800000,  82.496356,   2.247000, 878.095984, 580.244645
Outstanding requests per worker:
5769 5701 5709 5655 5618 5436 5659 6166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166722.0,      833611,     750346,      83265,     617066,     133280, 320.010644, 482.100000, 546.300000, 697.500000, 118.900894,  17.925000, 979.607999, 622.063901
Outstanding requests per worker:
8036 7346 7818 7835 8222 7800 8029 8120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166633.0,      833166,     749965,      83201,     630103,     119862, 422.725633, 661.900000, 743.700000, 900.300000, 169.250700,  74.997999, 1316.311002, 642.330201
Outstanding requests per worker:
10072 9722 9711 10077 10962 10105 10199 10307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166119.6,      830599,     747930,      82669,     639199,     108731, 533.898572, 842.600000, 950.400000, 1150.100000, 219.447732,  96.326999, 1463.006020, 658.723803
Outstanding requests per worker:
12274 12549 12310 12564 14508 12213 12597 12661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165819.4,      829098,     746071,      83027,     645250,     100821, 658.536959, 1059.900000, 1193.400000, 1419.600000, 278.287177, 112.058997, 1826.781988, 669.277031
Outstanding requests per worker:
14949 15100 14834 15232 18148 15101 15467 14868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165889.0,      829446,     746445,      83001,     651704,      94741, 785.212745, 1260.400000, 1431.300000, 1683.500000, 335.432250,  97.833000, 2096.793890, 677.949686
Outstanding requests per worker:
17473 17267 17648 17758 21779 17943 17785 17720 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:08   0:00 /usr/lib/linux
memcache      7  361  0.0 440000 156096 pts/0   Sl+  19:08   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21434576614      instructions:u                                              
         405241377      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        5706756208      L1-dcache-loads:u                                           
        1319818921      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10812356936      armv8_pmuv3_0/l1i_cache/:u                                   

      36.021531150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2291200512
starting receive base loop
num_worker_connections 64
Creating worker on tid 1696068096
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
Created 512 connections total
Creating worker on tid 2418143744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315341.313766,       0.0,      383464,     344849,      38615,     231155,     113694, 103.418300, 189.300000, 228.300000, 497.300000,  91.645833,   0.000000, 783.843994, 486.477177
Outstanding requests per worker:
3610 3876 3524 3596 3457 3438 3457 6108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167417.8,      837090,     753458,      83632,     573173,     180285, 276.893222, 417.900000, 489.200000, 657.700000, 111.407715,  18.408000, 1043.671966, 585.527487
Outstanding requests per worker:
7629 7862 7675 7657 7738 7542 8020 9473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167688.0,      838441,     755253,      83188,     606509,     148744, 452.187034, 674.900000, 748.000000, 916.600000, 162.058805,  65.196998, 1352.700949, 631.712516
Outstanding requests per worker:
11444 11583 11620 11789 11772 11715 11883 12977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166980.2,      834902,     751333,      83569,     620474,     130859, 640.296326, 931.900000, 1026.300000, 1239.500000, 219.215441, 104.998000, 1585.919976, 657.052316
Outstanding requests per worker:
15678 16070 15871 16177 16015 16017 16153 17553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166216.2,      831082,     747872,      83210,     628977,     118895, 851.165567, 1214.700000, 1340.000000, 1615.900000, 279.491601, 144.893005, 1968.037963, 674.175418
Outstanding requests per worker:
20384 20904 20877 21055 20663 20766 20999 22485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165834.6,      829174,     746119,      83055,     635990,     110129, 1077.977294, 1515.600000, 1683.600000, 1993.200000, 332.282688, 124.906003, 2444.648981, 685.994370
Outstanding requests per worker:
25365 25626 26032 26100 26007 25825 26123 27499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164474.6,      822374,     740133,      82241,     636927,     103206, 1321.005536, 1858.300000, 2038.800000, 2333.900000, 390.030029, 155.129999, 3002.966881, 695.876984
Outstanding requests per worker:
31464 31793 31757 31647 32228 31807 31727 33427 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:09   0:00 /usr/lib/linux
memcache      7  342  0.0 517248 168064 pts/0   Sl+  19:09   2:10 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  19:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20899134950      instructions:u                                              
         401294170      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        5585050681      L1-dcache-loads:u                                           
        1320884610      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10756395213      armv8_pmuv3_0/l1i_cache/:u                                   

      37.259910263 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1845817856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
num_worker_connections 64
Creating worker on tid 2568483328
starting receive base loop
Created 512 connections total
Creating worker on tid 1975185920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315382.313807,       0.0,      390235,     351323,      38912,     236547,     114776, 106.691873, 205.700000, 247.800000, 538.600000, 100.544138,   0.000000, 866.711020, 489.073075
Outstanding requests per worker:
4039 4177 4231 4076 4340 4228 4103 7074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167641.8,      838210,     754541,      83669,     574728,     179813, 349.600252, 520.600000, 601.000000, 821.600000, 140.300578,  41.730002, 1239.500999, 586.821664
Outstanding requests per worker:
10388 10705 10680 10478 10718 10098 10644 13310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166994.2,      834972,     751868,      83104,     603574,     148294, 634.642458, 891.700000, 993.600000, 1236.500000, 198.610938, 138.907999, 1698.101997, 632.266196
Outstanding requests per worker:
17108 17448 17337 17060 17545 16650 17539 20324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166126.8,      830635,     747453,      83182,     617403,     130050, 953.204100, 1280.100000, 1396.100000, 1673.200000, 252.336536, 236.876994, 2027.997017, 657.477571
Outstanding requests per worker:
24504 24654 24733 24105 24679 23930 24984 27723 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165529.8,      827650,     744894,      82756,     626761,     118133, 1288.442120, 1671.800000, 1794.400000, 2064.700000, 293.201161, 323.496997, 2527.903080, 674.516801
Outstanding requests per worker:
32161 32450 32316 31760 32360 31587 32510 35471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164967.4,      824838,     742168,      82670,     632254,     109914, 1644.419363, 2086.500000, 2249.100000, 2525.900000, 336.623915, 567.937016, 3016.278028, 685.838179
Outstanding requests per worker:
40067 40407 40276 39960 40514 39478 40634 43425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163516.2,      817582,     736014,      81568,     633594,     102420, 2013.271026, 2516.900000, 2688.100000, 2977.800000, 377.422123, 824.917972, 3391.267061, 695.598892
Outstanding requests per worker:
49303 49029 49124 48775 49509 48494 49540 52365 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  19:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:10   0:00 /usr/lib/linux
memcache      7  343  0.0 516224 168448 pts/0   Sl+  19:10   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20836954318      instructions:u                                              
         397913925      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        5559800604      L1-dcache-loads:u                                           
        1324370779      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10743835060      armv8_pmuv3_0/l1i_cache/:u                                   

      37.400785163 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1841754624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315423.313848,       0.0,      390972,     351636,      39336,     236171,     115465, 104.202730, 202.700000, 241.200000, 447.800000,  89.898777,   0.000000, 726.697028, 487.623804
Outstanding requests per worker:
4098 4116 3935 4262 4156 4367 4131 6152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167700.0,      838501,     754598,      83903,     574295,     180303, 342.414402, 524.000000, 594.900000, 717.300000, 131.132131,  23.430999, 974.913001, 585.880890
Outstanding requests per worker:
10524 10550 10504 10754 10402 10331 10425 12199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167297.2,      836487,     753131,      83356,     605308,     147823, 624.561514, 889.100000, 964.600000, 1105.300000, 190.713129, 135.483995, 1457.898021, 633.175198
Outstanding requests per worker:
16858 16870 17257 17462 16927 17281 16701 18833 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166588.0,      832941,     749862,      83079,     619134,     130728, 930.980331, 1258.600000, 1364.100000, 1540.500000, 245.929063, 241.687000, 1963.328958, 657.306576
Outstanding requests per worker:
23841 24134 24312 24327 23839 24331 23614 25866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165708.2,      828542,     745381,      83161,     626122,     119259, 1258.589130, 1672.600000, 1795.100000, 1982.900000, 298.777230, 257.281005, 2265.696049, 673.486999
Outstanding requests per worker:
31441 31576 31914 32027 31391 31963 30864 33491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165287.4,      826438,     743656,      82782,     633810,     109846, 1604.834240, 2088.000000, 2238.900000, 2467.800000, 350.945735, 440.378994, 2798.490047, 686.544882
Outstanding requests per worker:
39176 39314 39755 39846 39249 39816 38759 41259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163890.8,      819455,     737235,      82220,     634822,     102413, 1968.274871, 2534.600000, 2704.900000, 2964.100000, 398.836242, 730.428994, 3361.571074, 696.003272
Outstanding requests per worker:
47963 47643 48479 48390 47957 48699 47631 49962 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:10   0:00 /usr/lib/linux
memcache      7  372  0.0 517248 165504 pts/0   Sl+  19:10   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20899954713      instructions:u                                              
         401982785      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        5568020856      L1-dcache-loads:u                                           
        1320477628      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10726899125      armv8_pmuv3_0/l1i_cache/:u                                   

      35.861347565 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 839119360
starting receive base loop
num_worker_connections 171
Creating worker on tid 3678925312
starting receive base loop
num_worker_connections 171
Creating worker on tid 2218652160
starting receive base loop
num_worker_connections 170
Creating worker on tid 758379008
starting receive base loop
num_worker_connections 170
Creating worker on tid 3603755520
starting receive base loop
Created 1024 connections total
Creating worker on tid 2151543296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315465.313890,       0.0,      333942,     300277,      33665,     200245,     100032,  26.470948,  60.400000,  75.300000, 131.000000,  26.606956,   0.000000, 261.375010, 481.754923
Outstanding requests per worker:
347 383 335 318 353 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149996.5,      749983,     675245,      74738,     508341,     166904,  14.246114,  26.500000,  29.600000,  35.300000,   7.961854,   0.388000,  48.222002, 577.357592
Outstanding requests per worker:
340 383 365 376 369 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150014.2,      750072,     675520,      74552,     538353,     137167,  14.673402,  27.300000,  30.700000,  36.900000,   8.242373,   0.537000,  46.271998, 625.999329
Outstanding requests per worker:
357 383 371 361 342 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150002.4,      750013,     675740,      74273,     553509,     122231,  14.962999,  27.900000,  31.400000,  37.500000,   8.426756,   0.588000,  50.817002, 650.030380
Outstanding requests per worker:
355 382 348 381 405 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.0,      750016,     674963,      75053,     563659,     111304,  15.112881,  28.200000,  31.700000,  38.300000,   8.545196,   0.588000,  52.101001, 667.627888
Outstanding requests per worker:
373 394 380 404 376 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150022.0,      750111,     674683,      75428,     570923,     103760,  15.282122,  28.500000,  32.100000,  39.100000,   8.633186,   0.447000,  50.632998, 679.474916
Outstanding requests per worker:
412 363 380 380 392 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.8,      750035,     674937,      75098,     577399,      97538,  15.437610,  28.800000,  32.500000,  39.200000,   8.733241,   0.422000,  50.820000, 690.057644
Outstanding requests per worker:
369 379 420 376 388 378 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:11   0:00 /usr/lib/linux
memcache      7  339  0.0 443072 155584 pts/0   Sl+  19:11   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18314251095      instructions:u                                              
         392592765      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        4771355959      L1-dcache-loads:u                                           
        1256624872      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9758999911      armv8_pmuv3_0/l1i_cache/:u                                   

      37.791096592 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 907670016
starting receive base loop
num_worker_connections 171
Creating worker on tid 3746034176
starting receive base loop
num_worker_connections 171
Creating worker on tid 2285761024
starting receive base loop
num_worker_connections 170
Creating worker on tid 825487872
starting receive base loop
num_worker_connections 170
Creating worker on tid 3670864384
starting receive base loop
Created 1024 connections total
Creating worker on tid 2218652160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315506.313931,       0.0,      327005,     294450,      32555,     194736,      99714,  45.984881,  98.700000, 140.100000, 221.900000,  54.099355,   0.000000, 1017.614961, 476.341389
Outstanding requests per worker:
432 445 489 439 453 493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153883.0,      769416,     692511,      76905,     521960,     170551,  16.815362,  31.100000,  35.800000,  44.900000,   9.625535,   0.537000,  70.629999, 577.810937
Outstanding requests per worker:
425 429 444 441 453 441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.6,      769259,     692473,      76786,     552258,     140215,  17.272029,  32.000000,  37.000000,  45.300000,   9.838215,   0.596000,  57.023000, 626.033646
Outstanding requests per worker:
439 454 450 451 452 429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.6,      769274,     692857,      76417,     569151,     123706,  17.570456,  32.600000,  38.000000,  45.700000,  10.016079,   0.603000,  56.299999, 652.153107
Outstanding requests per worker:
487 441 442 440 430 483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153833.2,      769167,     692521,      76646,     578618,     113903,  17.779963,  33.100000,  38.600000,  45.800000,  10.115294,   0.607000,  58.332998, 667.255218
Outstanding requests per worker:
459 465 475 479 468 493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153865.6,      769329,     692073,      77256,     586707,     105366,  18.073312,  33.500000,  39.300000,  46.800000,  10.302033,   0.694000,  59.854999, 682.347705
Outstanding requests per worker:
471 470 458 471 452 478 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153808.0,      769041,     692355,      76686,     593721,      98634,  18.187086,  33.700000,  39.600000,  47.200000,  10.364079,   0.483000,  64.902999, 691.949475
Outstanding requests per worker:
509 518 495 507 510 513 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:12   0:00 /usr/lib/linux
memcache      7  357  0.0 446144 166400 pts/0   Sl+  19:12   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18783870934      instructions:u                                              
         395828590      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        4904927953      L1-dcache-loads:u                                           
        1271325073      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9926526093      armv8_pmuv3_0/l1i_cache/:u                                   

      36.220351053 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 988410368
starting receive base loop
num_worker_connections 171
Creating worker on tid 3829264896
starting receive base loop
num_worker_connections 171
Creating worker on tid 2368991744
starting receive base loop
num_worker_connections 170
Creating worker on tid 911340032
starting receive base loop
num_worker_connections 170
Creating worker on tid 3754095104
starting receive base loop
Created 1024 connections total
Creating worker on tid 2301882880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315547.313972,       0.0,      342464,     307994,      34470,     205215,     102779,  53.389800, 124.300000, 157.600000, 216.100000,  50.698709,   0.000000, 662.061989, 481.841906
Outstanding requests per worker:
569 612 585 615 614 665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158015.6,      790079,     711268,      78811,     538109,     173159,  19.422881,  35.600000,  42.500000,  50.500000,  11.058225,   0.366000, 159.927994, 581.151165
Outstanding requests per worker:
518 496 513 567 509 519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     710592,      78905,     567923,     142669,  19.898005,  36.100000,  43.700000,  51.800000,  11.222684,   0.555000,  66.995002, 628.575026
Outstanding requests per worker:
538 509 504 537 500 570 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.8,      789490,     710827,      78663,     584793,     126034,  20.207844,  36.700000,  44.600000,  52.600000,  11.422813,   0.564000,  87.839000, 653.948559
Outstanding requests per worker:
524 516 517 498 563 575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.8,      789490,     710515,      78975,     595396,     115119,  20.448484,  36.800000,  45.300000,  53.400000,  11.535142,   0.591000,  85.167997, 671.011345
Outstanding requests per worker:
536 518 543 546 551 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     710481,      79016,     603144,     107337,  20.598688,  36.900000,  45.200000,  54.700000,  11.693079,   0.712000,  70.206001, 682.105264
Outstanding requests per worker:
562 554 525 562 534 545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157908.4,      789543,     710417,      79126,     609405,     101012,  20.852307,  37.500000,  46.100000,  54.400000,  11.763141,   0.621000,  72.979003, 693.031255
Outstanding requests per worker:
590 508 541 533 520 578 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:12   0:00 /usr/lib/linux
memcache      7  358  0.0 447168 160640 pts/0   Sl+  19:12   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  19:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19330107570      instructions:u                                              
         401868308      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        5059524327      L1-dcache-loads:u                                           
        1288174276      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10151799169      armv8_pmuv3_0/l1i_cache/:u                                   

      36.279855472 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1802301952
starting receive base loop
num_worker_connections 171
Creating worker on tid 347664896
starting receive base loop
num_worker_connections 171
Creating worker on tid 3182359040
starting receive base loop
num_worker_connections 170
Creating worker on tid 1724707328
starting receive base loop
num_worker_connections 170
Creating worker on tid 272495104
starting receive base loop
Created 1024 connections total
Creating worker on tid 3115250176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315588.314013,       0.0,      336450,     302811,      33639,     201193,     101618,  55.574681, 121.800000, 159.900000, 300.100000,  75.279078,   0.000000, 1351.366997, 479.833820
Outstanding requests per worker:
647 645 679 589 705 824 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158104.6,      790524,     711837,      78687,     537512,     174325,  19.339032,  35.400000,  41.900000,  50.000000,  11.018048,   0.793000, 241.963997, 579.499444
Outstanding requests per worker:
542 487 546 519 512 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.6,      789489,     710639,      78850,     568121,     142518,  19.645478,  35.700000,  42.800000,  50.600000,  10.937870,   0.781000,  70.528999, 627.646034
Outstanding requests per worker:
512 481 542 530 546 531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157893.8,      789470,     710415,      79055,     583777,     126638,  20.009295,  36.200000,  43.700000,  51.700000,  11.121133,   0.810000,  65.366998, 652.731361
Outstanding requests per worker:
539 542 523 520 561 521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.8,      789475,     710390,      79085,     594544,     115846,  20.311299,  36.600000,  44.400000,  52.500000,  11.306825,   0.728000,  77.421002, 669.206108
Outstanding requests per worker:
595 521 534 549 532 516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157901.4,      789508,     710489,      79019,     603013,     107476,  20.487571,  37.000000,  44.900000,  52.800000,  11.395173,   0.863000,  82.252003, 682.170697
Outstanding requests per worker:
559 546 540 535 545 550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.6,      789484,     710406,      79078,     609022,     101384,  20.563705,  37.100000,  45.300000,  53.000000,  11.441945,   0.748000,  79.517998, 691.727369
Outstanding requests per worker:
547 557 561 545 526 570 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:13   0:00 /usr/lib/linux
memcache      7  338  0.0 447168 158720 pts/0   Sl+  19:13   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19328276729      instructions:u                                              
         397345523      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        5061699584      L1-dcache-loads:u                                           
        1285783095      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10140820298      armv8_pmuv3_0/l1i_cache/:u                                   

      37.310794450 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 802353664
starting receive base loop
num_worker_connections 171
Creating worker on tid 3635999232
starting receive base loop
num_worker_connections 171
Creating worker on tid 2175726080
starting receive base loop
num_worker_connections 170
Creating worker on tid 718074368
starting receive base loop
num_worker_connections 170
Creating worker on tid 3560829440
starting receive base loop
Created 1024 connections total
Creating worker on tid 2108617216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315629.314054,       0.0,      340502,     306433,      34069,     203460,     102973,  85.001186, 176.000000, 215.200000, 556.900000, 106.562037,   0.000000, 1438.020945, 479.875128
Outstanding requests per worker:
1742 1789 1718 1706 1853 3444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163879.8,      819400,     737514,      81886,     557819,     179695,  32.508608,  57.600000,  93.000000, 159.800000,  37.984079,   0.788000, 1082.049012, 580.784024
Outstanding requests per worker:
605 635 611 613 646 603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162118.8,      810595,     730489,      80106,     584449,     146040,  23.452250,  40.700000,  50.900000,  62.200000,  12.992572,   0.683000, 125.009999, 629.337905
Outstanding requests per worker:
658 660 682 667 652 672 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.8,      810825,     730238,      80587,     601746,     128492,  23.621099,  40.600000,  51.500000,  62.000000,  12.979444,   0.731000, 117.046997, 654.857211
Outstanding requests per worker:
686 625 682 689 671 676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162195.6,      810979,     729698,      81281,     611540,     118158,  23.971309,  41.100000,  52.400000,  62.900000,  13.163426,   0.947000, 118.969001, 671.375118
Outstanding requests per worker:
650 663 631 637 657 667 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.2,      810847,     730011,      80836,     621055,     108956,  24.120300,  41.100000,  52.300000,  63.600000,  13.202018,   1.060000, 121.875003, 684.531185
Outstanding requests per worker:
681 615 658 656 653 658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162117.2,      810587,     729441,      81146,     627037,     102404,  25.853379,  46.800000,  54.200000,  76.200000,  15.079285,   0.822000, 154.180005, 694.478720
Outstanding requests per worker:
680 737 644 675 732 714 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:14   0:00 /usr/lib/linux
memcache      7  357  0.0 449216 164608 pts/0   Sl+  19:14   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19886041519      instructions:u                                              
         399588124      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        5227252412      L1-dcache-loads:u                                           
        1309450413      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10361173371      armv8_pmuv3_0/l1i_cache/:u                                   

      36.291324102 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1215230464
starting receive base loop
num_worker_connections 171
Creating worker on tid 4054774272
starting receive base loop
num_worker_connections 171
Creating worker on tid 2597122560
starting receive base loop
num_worker_connections 170
Creating worker on tid 1136849408
starting receive base loop
num_worker_connections 170
Creating worker on tid 3979604480
starting receive base loop
Created 1024 connections total
Creating worker on tid 2530013696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315670.314095,       0.0,      339035,     305428,      33607,     203339,     102089,  84.748342, 166.600000, 201.100000, 558.300000, 110.244309,   0.000000, 1996.050954, 481.658967
Outstanding requests per worker:
1787 1655 1815 1674 1792 5000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164111.6,      820559,     738627,      81932,     558423,     180204,  39.991080,  63.600000,  96.000000, 184.900000,  84.994715,   0.798000, 1997.658968, 580.820433
Outstanding requests per worker:
651 638 707 691 638 718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162054.2,      810272,     729324,      80948,     583283,     146041,  27.094002,  49.900000,  57.300000,  86.100000,  16.477097,   0.945000, 183.580995, 629.085389
Outstanding requests per worker:
747 790 789 777 766 797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162201.8,      811010,     729942,      81068,     601079,     128863,  28.290426,  53.200000,  59.700000,  95.200000,  17.744053,   0.779000, 181.880996, 655.186368
Outstanding requests per worker:
769 705 752 766 743 823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.6,      810764,     729474,      81290,     612087,     117387,  28.747323,  54.000000,  61.100000,  98.700000,  18.287219,   0.884000, 201.003999, 671.527392
Outstanding requests per worker:
748 771 742 790 817 782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162122.0,      810611,     729224,      81387,     619848,     109376,  29.003216,  54.600000,  61.400000,  99.900000,  18.488316,   1.082000, 199.823007, 684.147283
Outstanding requests per worker:
878 867 723 857 794 793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162138.0,      810691,     729367,      81324,     627373,     101994,  30.185337,  57.300000,  64.900000, 110.700000,  20.165562,   0.984000, 212.142006, 694.819043
Outstanding requests per worker:
835 839 865 904 796 869 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:14   0:00 /usr/lib/linux
memcache      7  338  0.0 449216 171648 pts/0   Sl+  19:14   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19897126851      instructions:u                                              
         396608678      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        5247811055      L1-dcache-loads:u                                           
        1301871365      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10376587369      armv8_pmuv3_0/l1i_cache/:u                                   

      37.520763456 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 836039168
starting receive base loop
num_worker_connections 171
Creating worker on tid 3670864384
starting receive base loop
num_worker_connections 171
Creating worker on tid 2210591232
starting receive base loop
num_worker_connections 170
Creating worker on tid 750318080
starting receive base loop
num_worker_connections 170
Creating worker on tid 3593073152
starting receive base loop
Created 1024 connections total
Creating worker on tid 2143482368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315711.314136,       0.0,      346167,     311655,      34512,     207051,     104604,  86.281033, 172.700000, 206.400000, 546.100000, 109.382162,   0.000000, 1616.773009, 480.410858
Outstanding requests per worker:
1972 2089 1933 1783 1994 4142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164139.2,      820697,     738541,      82156,     560145,     178396,  38.885290,  70.700000, 109.100000, 169.500000,  58.291532,   0.994000, 1406.595945, 582.855511
Outstanding requests per worker:
653 709 648 686 702 729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162086.2,      810432,     729592,      80840,     584032,     145560,  26.145898,  48.100000,  55.600000,  77.700000,  15.594181,   0.834000, 171.529993, 629.621676
Outstanding requests per worker:
801 736 781 772 717 742 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162149.8,      810750,     729558,      81192,     600801,     128757,  27.858393,  52.100000,  59.000000,  91.600000,  17.309016,   0.918000, 181.732997, 654.650743
Outstanding requests per worker:
763 778 750 816 729 841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162199.0,      810996,     729577,      81419,     611924,     117653,  28.211451,  52.500000,  59.500000,  93.100000,  17.468580,   1.015000, 182.365000, 671.600866
Outstanding requests per worker:
737 777 763 766 752 780 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162125.8,      810630,     729280,      81350,     620113,     109167,  29.062101,  54.800000,  61.900000,  99.600000,  18.584757,   0.879000, 197.072998, 684.187374
Outstanding requests per worker:
852 764 819 792 829 795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161694.2,      808472,     727789,      80683,     625138,     102651,  28.946657,  54.000000,  61.000000,  96.700000,  18.124517,   0.942000, 186.174005, 693.032665
Outstanding requests per worker:
1199 1171 1277 1224 1188 1180 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:15   0:00 /usr/lib/linux
memcache      8  358  0.0 515200 163200 pts/0   Sl+  19:15   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19989185997      instructions:u                                              
         397240848      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        5256494099      L1-dcache-loads:u                                           
        1303951943      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10422947424      armv8_pmuv3_0/l1i_cache/:u                                   

      36.341229816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1249833472
starting receive base loop
num_worker_connections 171
Creating worker on tid 4089639424
starting receive base loop
num_worker_connections 171
Creating worker on tid 2629366272
starting receive base loop
num_worker_connections 170
Creating worker on tid 1169093120
starting receive base loop
num_worker_connections 170
Creating worker on tid 4014469632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2562257408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315754.314179,       0.0,      408818,     368167,      40651,     248647,     119520,  55.730977, 118.300000, 150.800000, 426.900000,  92.946924,   0.000000, 1472.174048, 491.261072
Outstanding requests per worker:
1317 1354 1330 1291 1308 3249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167672.4,      838363,     754682,      83681,     575576,     179106,  33.078803,  55.800000,  67.500000, 122.500000,  38.012530,   1.210000, 1141.553998, 587.059376
Outstanding requests per worker:
879 788 777 830 826 779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166658.6,      833294,     750461,      82833,     602837,     147624,  29.112785,  51.700000,  59.900000,  88.900000,  16.748937,   0.928000, 173.857003, 632.878363
Outstanding requests per worker:
861 856 843 811 808 821 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166660.2,      833302,     750034,      83268,     619736,     130298,  30.600406,  55.200000,  63.000000,  97.300000,  18.078646,   0.927000, 181.828007, 657.856670
Outstanding requests per worker:
804 836 879 863 852 893 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166626.2,      833132,     749970,      83162,     631590,     118380,  32.153785,  57.800000,  66.000000, 105.800000,  19.423702,   1.223000, 197.512001, 675.300201
Outstanding requests per worker:
885 844 834 944 905 969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166482.0,      832411,     749296,      83115,     638712,     110584,  34.347310,  61.700000,  73.000000, 119.900000,  22.061565,   0.965000, 231.362998, 686.544088
Outstanding requests per worker:
1084 1046 1118 974 1111 1040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165572.8,      827865,     744748,      83117,     641554,     103194,  47.451346, 103.300000, 131.900000, 166.300000,  36.642719,   1.130000, 280.658990, 697.093759
Outstanding requests per worker:
1936 2041 1886 2017 1936 2105 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:16   0:00 /usr/lib/linux
memcache      7  344  0.0 519296 176128 pts/0   Sl+  19:16   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20706386502      instructions:u                                              
         411332860      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        5463737909      L1-dcache-loads:u                                           
        1355917575      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10806733652      armv8_pmuv3_0/l1i_cache/:u                                   

      38.501397358 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1365504512
starting receive base loop
num_worker_connections 171
Creating worker on tid 4199674368
starting receive base loop
num_worker_connections 171
Creating worker on tid 2739401216
starting receive base loop
num_worker_connections 170
Creating worker on tid 1279128064
starting receive base loop
num_worker_connections 170
Creating worker on tid 4121883136
starting receive base loop
Created 1024 connections total
Creating worker on tid 2672292352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315795.314220,       0.0,      342708,     308697,      34011,     205782,     102915,  98.684188, 194.600000, 236.800000, 721.300000, 126.491501,   0.000000, 1939.211965, 483.149230
Outstanding requests per worker:
2706 2576 2560 2580 2702 6427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169229.0,      846146,     761794,      84352,     576769,     185025,  64.573050, 140.400000, 166.500000, 267.800000,  87.086379,   1.175000, 1893.844008, 582.220926
Outstanding requests per worker:
1245 1145 1072 1180 1142 1056 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166981.8,      834910,     751682,      83228,     602059,     149623,  33.901668,  62.900000,  77.100000, 137.300000,  25.039778,   1.069000, 253.784001, 629.971542
Outstanding requests per worker:
888 855 863 953 846 901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166574.6,      832874,     749719,      83155,     618191,     131528,  32.596616,  60.300000,  68.700000, 115.500000,  20.965874,   1.108000, 217.427000, 655.880951
Outstanding requests per worker:
1007 909 952 890 994 1077 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166602.4,      833013,     749500,      83513,     630081,     119419,  36.918094,  65.300000,  79.000000, 124.100000,  23.233391,   0.871000, 218.180999, 673.771437
Outstanding requests per worker:
992 1020 1108 1018 1049 1038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166435.2,      832177,     748937,      83240,     637259,     111678,  42.382796,  72.400000,  95.900000, 135.100000,  25.854516,   1.251000, 239.458993, 684.736317
Outstanding requests per worker:
1192 1312 1341 1153 1217 1264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165541.4,      827708,     744967,      82741,     640851,     104116,  49.645818,  97.400000, 123.300000, 163.400000,  34.013345,   1.753000, 302.823007, 694.755291
Outstanding requests per worker:
2197 2084 2294 2217 2190 2169 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:16   0:00 /usr/lib/linux
memcache      8  338  0.0 516224 170624 pts/0   Sl+  19:16   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20515766355      instructions:u                                              
         400308589      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        5427513045      L1-dcache-loads:u                                           
        1333583117      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10664039959      armv8_pmuv3_0/l1i_cache/:u                                   

      37.531621179 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1596781056
starting receive base loop
num_worker_connections 171
Creating worker on tid 138277376
starting receive base loop
num_worker_connections 171
Creating worker on tid 2972971520
starting receive base loop
num_worker_connections 170
Creating worker on tid 1515319808
starting receive base loop
num_worker_connections 170
Creating worker on tid 63107584
starting receive base loop
Created 1024 connections total
Creating worker on tid 2905862656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315837.314262,       0.0,      338372,     304784,      33588,     202585,     102199,  98.898231, 177.300000, 234.000000, 1075.200000, 171.750802,   0.000000, 1951.439977, 480.357532
Outstanding requests per worker:
2535 2458 2471 2539 2622 20241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170941.4,      854708,     769783,      84925,     583556,     186227, 212.983866, 262.200000, 729.900000, 2050.800000, 339.395446,   2.490000, 3250.015020, 583.092181
Outstanding requests per worker:
4667 4621 4544 4640 4685 12256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171362.6,      856814,     770941,      85873,     618734,     152207, 209.871404, 299.600000, 378.600000, 1418.800000, 226.959968,   1.877000, 2913.036108, 631.828312
Outstanding requests per worker:
5223 5320 5395 5195 5549 9113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171155.4,      855778,     770075,      85703,     636298,     133777, 213.452575, 339.000000, 399.100000, 989.100000, 187.311607,   1.976000, 2919.717073, 658.723857
Outstanding requests per worker:
5542 5793 5791 5936 5935 8242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170911.2,      854557,     768968,      85589,     646900,     122068, 224.512841, 365.800000, 422.300000, 736.200000, 155.320787,   4.188000, 2272.294044, 674.350753
Outstanding requests per worker:
6344 6415 6382 6213 6585 7987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170795.8,      853980,     768881,      85099,     656031,     112850, 242.491664, 397.100000, 465.400000, 657.800000, 150.315483,   3.839000, 2233.464003, 687.123251
Outstanding requests per worker:
6733 6940 6921 6982 7397 8234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169595.0,      847976,     763306,      84670,     658564,     104742, 273.261787, 425.900000, 498.800000, 698.300000, 148.820978,   3.518000, 2244.425058, 697.513866
Outstanding requests per worker:
8435 8364 8756 8583 8673 9617 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:17   0:00 /usr/lib/linux
memcache      7  347  0.0 521344 181952 pts/0   Sl+  19:17   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21445574386      instructions:u                                              
         422906047      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        5744747506      L1-dcache-loads:u                                           
        1376527442      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11128854305      armv8_pmuv3_0/l1i_cache/:u                                   

      37.541662751 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1211167232
starting receive base loop
num_worker_connections 171
Creating worker on tid 4046713344
starting receive base loop
num_worker_connections 171
Creating worker on tid 2589061632
starting receive base loop
num_worker_connections 170
Creating worker on tid 1128788480
starting receive base loop
num_worker_connections 170
Creating worker on tid 3971543552
starting receive base loop
Created 1024 connections total
Creating worker on tid 2519331328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315877.314302,       0.0,      347581,     312494,      35087,     207886,     104608, 100.111019, 194.500000, 242.200000, 957.100000, 156.475914,   0.000000, 1959.589005, 480.049479
Outstanding requests per worker:
2828 2633 2883 2654 2808 15196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172147.8,      860740,     774710,      86030,     587909,     186801, 163.907279, 210.500000, 278.200000, 1818.900000, 276.832164,   3.308000, 3092.391014, 583.207004
Outstanding requests per worker:
3486 3566 3469 3622 3508 7826 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171630.2,      858152,     772662,      85490,     620331,     152331, 146.425302, 252.700000, 302.900000, 1250.800000, 197.791258,   1.676000, 2591.442108, 632.507469
Outstanding requests per worker:
3759 3485 3779 3727 3621 6200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171457.6,      857289,     771128,      86161,     637558,     133570, 142.888881, 291.000000, 355.700000, 867.100000, 173.190083,   2.159000, 2518.852949, 658.090137
Outstanding requests per worker:
3700 3675 3813 3669 3975 5702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171216.8,      856085,     770479,      85606,     648146,     122333, 146.551219, 309.900000, 378.900000, 592.600000, 150.615774,   3.913000, 2198.635101, 674.019513
Outstanding requests per worker:
4148 4091 4005 3926 4242 5246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170921.2,      854607,     769086,      85521,     655782,     113304, 155.719667, 315.500000, 383.700000, 545.400000, 127.249593,   2.931000, 1435.240030, 686.851253
Outstanding requests per worker:
4740 4434 4527 4563 4773 5222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169319.6,      846599,     761803,      84796,     656943,     104860, 188.575840, 350.700000, 408.600000, 536.600000, 117.089942,   4.415000, 1312.026978, 696.930848
Outstanding requests per worker:
6426 6296 6499 6382 6435 6857 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:18   0:00 /usr/lib/linux
memcache      7  357  0.0 520320 181696 pts/0   Sl+  19:18   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21344963796      instructions:u                                              
         424300620      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        5708036981      L1-dcache-loads:u                                           
        1374949925      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11097450392      armv8_pmuv3_0/l1i_cache/:u                                   

      36.200793586 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 763949568
starting receive base loop
num_worker_connections 171
Creating worker on tid 3603755520
starting receive base loop
num_worker_connections 171
Creating worker on tid 2143482368
starting receive base loop
num_worker_connections 170
Creating worker on tid 683209216
starting receive base loop
num_worker_connections 170
Creating worker on tid 3525964288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2076373504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315919.314344,       0.0,      344806,     309926,      34880,     207210,     102716, 108.326942, 183.300000, 241.400000, 1083.800000, 172.420615,   0.000000, 1979.897976, 484.253325
Outstanding requests per worker:
3205 3095 3078 3210 3398 26555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170972.2,      854862,     769459,      85403,     584461,     184998, 338.044294, 450.800000, 1351.900000, 2409.300000, 435.815338,   4.505000, 3467.158079, 583.725420
Outstanding requests per worker:
9008 8698 8751 8712 8992 25969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173145.0,      865726,     779215,      86511,     625568,     153647, 445.600367, 595.800000, 1171.900000, 2297.800000, 373.230555,  20.609001, 3395.605087, 632.162127
Outstanding requests per worker:
11985 11961 11965 12009 12682 26215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173507.8,      867540,     780673,      86867,     645068,     135605, 533.985035, 764.200000, 1076.800000, 2271.100000, 354.656698,  13.286000, 3491.853952, 657.883716
Outstanding requests per worker:
14610 14561 14767 14401 15689 27671 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173610.2,      868052,     780998,      87054,     656285,     124713, 615.741773, 909.000000, 1168.800000, 2381.700000, 369.673588,  64.492002, 4061.821938, 673.407098
Outstanding requests per worker:
16814 17006 17429 16878 18205 29762 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173454.2,      867272,     780574,      86698,     665788,     114786, 697.581740, 1072.200000, 1299.900000, 2522.500000, 401.445406,  65.742999, 4420.094967, 686.602592
Outstanding requests per worker:
19235 19168 19790 19400 21681 32011 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172736.6,      863684,     777203,      86481,     669904,     107299, 792.462887, 1260.300000, 1499.200000, 2673.400000, 441.966368,  49.387001, 4667.932034, 697.419198
Outstanding requests per worker:
22763 22226 22596 22377 24866 35186 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:18   0:00 /usr/lib/linux
memcache      7  339  0.0 521344 198080 pts/0   Sl+  19:18   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21657441114      instructions:u                                              
         420723040      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        5796640668      L1-dcache-loads:u                                           
        1360398049      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11112497523      armv8_pmuv3_0/l1i_cache/:u                                   

      37.731873237 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 930411008
starting receive base loop
num_worker_connections 171
Creating worker on tid 3770216960
starting receive base loop
num_worker_connections 171
Creating worker on tid 2309943808
starting receive base loop
num_worker_connections 170
Creating worker on tid 852292096
starting receive base loop
num_worker_connections 170
Creating worker on tid 3695047168
starting receive base loop
Created 1024 connections total
Creating worker on tid 2242834944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575315960.314385,       0.0,      347494,     312310,      35184,     208948,     103362, 117.928325, 215.900000, 265.500000, 1064.200000, 172.430946,   0.000000, 1958.588004, 484.736806
Outstanding requests per worker:
3663 3937 3700 3830 3909 20833 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173000.4,      865003,     778800,      86203,     592246,     186554, 288.905298, 400.800000, 886.300000, 2024.400000, 337.590164,   5.971000, 3063.138008, 585.686486
Outstanding requests per worker:
8039 7823 7797 7785 7800 18039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174653.0,      873266,     785910,      87356,     631469,     154441, 353.609502, 495.000000, 627.200000, 1663.200000, 256.921407,   7.799000, 2717.140913, 632.802498
Outstanding requests per worker:
10035 9777 9879 9747 10207 16784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174988.4,      874943,     787619,      87324,     651287,     136332, 399.905036, 571.600000, 712.400000, 1504.500000, 230.064712,  14.335000, 2876.178026, 657.964922
Outstanding requests per worker:
11118 11124 11371 11656 11573 17072 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174857.6,      874289,     786350,      87939,     662055,     124295, 444.875416, 655.600000, 802.200000, 1377.900000, 226.991127,  19.407000, 2954.277039, 675.429269
Outstanding requests per worker:
12611 12516 12618 12949 13509 17835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175025.8,      875130,     787404,      87726,     672428,     114976, 484.382857, 732.700000, 888.800000, 1399.200000, 238.437129,  35.163999, 2750.720024, 688.629592
Outstanding requests per worker:
14175 13686 13974 13707 15100 18668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173359.8,      866800,     780098,      86702,     673447,     106651, 545.842406, 862.200000, 1028.800000, 1490.600000, 258.322245,  49.190000, 2639.878988, 698.564896
Outstanding requests per worker:
16506 16605 16371 16087 17818 21536 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:19   0:00 /usr/lib/linux
memcache      8  358  0.0 522368 196800 pts/0   Sl+  19:19   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  19:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21842019563      instructions:u                                              
         426078406      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        5874691615      L1-dcache-loads:u                                           
        1383427980      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11266691014      armv8_pmuv3_0/l1i_cache/:u                                   

      36.160493539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1467544064
starting receive base loop
num_worker_connections 171
Creating worker on tid 12120576
starting receive base loop
num_worker_connections 171
Creating worker on tid 2846814720
starting receive base loop
num_worker_connections 170
Creating worker on tid 1389163008
starting receive base loop
num_worker_connections 170
Creating worker on tid 4231918080
starting receive base loop
Created 1024 connections total
Creating worker on tid 2779705856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316002.314427,       0.0,      340699,     306580,      34119,     204273,     102307,  99.309442, 162.300000, 219.300000, 1136.600000, 180.623832,   0.000000, 1990.862012, 482.122983
Outstanding requests per worker:
2532 2492 2461 2455 2576 28569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172394.2,      861972,     775896,      86076,     587836,     188060, 313.418876, 412.200000, 1436.800000, 2443.900000, 460.450573,   4.787000, 3264.369965, 582.171975
Outstanding requests per worker:
7143 7301 7259 7052 7655 25135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175010.6,      875054,     788213,      86841,     632804,     155409, 375.506826, 507.400000, 1040.800000, 2244.400000, 369.692972,   6.612000, 3285.340071, 631.655473
Outstanding requests per worker:
9156 9390 9138 9239 9601 22410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175198.8,      875995,     788743,      87252,     651837,     136906, 409.564175, 584.100000, 862.200000, 2066.000000, 327.616121,  10.465000, 3245.826960, 657.729044
Outstanding requests per worker:
10589 10886 10785 10704 11167 21281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175098.2,      875492,     788422,      87070,     663912,     124510, 447.879102, 660.200000, 874.100000, 1939.400000, 309.684175,  18.177001, 3306.921959, 675.050377
Outstanding requests per worker:
12140 12122 12216 12123 12605 21119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174679.2,      873397,     785860,      87537,     670112,     115748, 490.447683, 761.600000, 967.300000, 1860.900000, 312.265337,  31.872001, 3564.452887, 686.739489
Outstanding requests per worker:
13873 13878 13807 13962 14165 21680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174249.0,      871246,     784520,      86726,     676339,     108181, 548.947555, 857.100000, 1100.000000, 1923.000000, 330.198782,  49.454998, 3700.983047, 697.855992
Outstanding requests per worker:
15911 15783 15643 15524 16297 23399 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:20   0:00 /usr/lib/linux
memcache      7  338  0.0 522368 198080 pts/0   Sl+  19:20   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21829943062      instructions:u                                              
         429535753      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        5866726855      L1-dcache-loads:u                                           
        1388065861      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11280435476      armv8_pmuv3_0/l1i_cache/:u                                   

      37.591167238 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1924592128
starting receive base loop
num_worker_connections 128
Creating worker on tid 812380672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3998740992
starting receive base loop
num_worker_connections 128
Creating worker on tid 2884694528
starting receive base loop
num_worker_connections 128
Creating worker on tid 1776087552
starting receive base loop
num_worker_connections 128
Creating worker on tid 662041088
starting receive base loop
num_worker_connections 128
Creating worker on tid 3848401408
starting receive base loop
Created 1024 connections total
Creating worker on tid 2734354944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316043.314468,       0.0,      351288,     315706,      35582,     210252,     105454,  25.804129,  59.800000,  76.000000, 132.900000,  27.505382,   0.000000, 338.391006, 482.432079
Outstanding requests per worker:
276 259 271 268 279 258 253 242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150952.8,      754765,     679610,      75155,     515022,     164588,  14.081707,  27.000000,  31.100000,  40.000000,   8.928453,   0.262000,  52.480001, 582.544886
Outstanding requests per worker:
267 258 263 278 261 250 280 283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150950.4,      754753,     679051,      75702,     542147,     136904,  14.585498,  28.000000,  31.900000,  42.500000,   9.327414,   0.254000,  54.350998, 627.091940
Outstanding requests per worker:
263 293 288 265 284 258 268 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150906.6,      754534,     679370,      75164,     556884,     122486,  14.907360,  28.700000,  32.900000,  42.700000,   9.477919,   0.302000,  54.540999, 650.808885
Outstanding requests per worker:
272 297 313 313 337 304 288 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150974.6,      754874,     679400,      75474,     568281,     111119,  15.132173,  28.800000,  33.300000,  44.900000,   9.736438,   0.324000,  59.826002, 668.415029
Outstanding requests per worker:
308 284 285 289 277 301 294 290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150954.0,      754771,     679215,      75556,     575648,     103567,  15.348241,  29.400000,  34.200000,  44.100000,   9.799667,   0.283000,  58.784001, 681.309616
Outstanding requests per worker:
321 285 289 314 308 270 276 288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150963.2,      754817,     679177,      75640,     582144,      97033,  15.499257,  29.600000,  34.600000,  44.600000,   9.894839,   0.285000,  58.587998, 691.617352
Outstanding requests per worker:
284 268 273 281 318 343 289 290 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:21   0:00 /usr/lib/linux
memcache      7  360  0.0 443072 152640 pts/0   Sl+  19:21   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18472131326      instructions:u                                              
         392701782      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        4831927214      L1-dcache-loads:u                                           
        1266554619      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9857486749      armv8_pmuv3_0/l1i_cache/:u                                   

      36.210696150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1386082816
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
num_worker_connections 128
Creating worker on tid 2347823616
starting receive base loop
num_worker_connections 128
Creating worker on tid 1239216640
starting receive base loop
num_worker_connections 128
Creating worker on tid 125170176
starting receive base loop
num_worker_connections 128
Creating worker on tid 3311530496
starting receive base loop
Created 1024 connections total
Creating worker on tid 2197484032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316084.314509,       0.0,      357159,     321216,      35943,     214921,     106295,  35.831833,  77.800000, 110.000000, 181.200000,  44.131321,   0.000000, 913.290977, 484.364882
Outstanding requests per worker:
370 322 357 309 385 314 329 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153884.2,      769422,     692764,      76658,     523737,     169027,  16.908684,  32.600000,  38.700000,  47.200000,  10.748682,   0.310000,  80.205999, 580.553289
Outstanding requests per worker:
361 332 326 328 327 353 328 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.2,      769242,     692348,      76894,     552728,     139620,  17.432363,  33.400000,  40.400000,  48.400000,  11.063431,   0.296000,  61.044000, 627.077673
Outstanding requests per worker:
341 331 337 325 326 320 351 344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153839.2,      769197,     692246,      76951,     568704,     123542,  17.936032,  34.300000,  41.700000,  49.800000,  11.355992,   0.286000,  70.661001, 652.372251
Outstanding requests per worker:
326 345 343 389 331 357 341 348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.8,      769290,     692463,      76827,     579293,     113170,  18.191796,  34.800000,  42.400000,  50.600000,  11.542820,   0.326000,  61.129998, 669.046153
Outstanding requests per worker:
358 331 363 320 291 373 374 345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.2,      769257,     692004,      77253,     587157,     104847,  18.346494,  34.700000,  42.700000,  51.000000,  11.641696,   0.329000,  69.077998, 681.890587
Outstanding requests per worker:
364 329 329 336 358 372 376 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153846.6,      769234,     692630,      76604,     593929,      98701,  18.485351,  35.000000,  43.300000,  51.200000,  11.714194,   0.349000,  70.629001, 691.960740
Outstanding requests per worker:
375 352 341 348 338 356 365 355 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:21   0:00 /usr/lib/linux
memcache      7  360  0.0 445120 158912 pts/0   Sl+  19:21   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18882860579      instructions:u                                              
         391187248      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        4946679890      L1-dcache-loads:u                                           
        1273667059      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9967037838      armv8_pmuv3_0/l1i_cache/:u                                   

      36.180645346 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1844113920
starting receive base loop
num_worker_connections 128
Creating worker on tid 729149952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3915510272
starting receive base loop
num_worker_connections 128
Creating worker on tid 2801463808
starting receive base loop
num_worker_connections 128
Creating worker on tid 1692856832
starting receive base loop
num_worker_connections 128
Creating worker on tid 584249856
starting receive base loop
num_worker_connections 128
Creating worker on tid 3765170688
starting receive base loop
Created 1024 connections total
Creating worker on tid 2656563712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316125.314550,       0.0,      359128,     322891,      36237,     216039,     106852,  52.944312, 115.100000, 151.200000, 333.400000,  82.273320,   0.000000, 1475.837946, 484.845208
Outstanding requests per worker:
694 665 694 678 629 641 663 1379 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157473.8,      787370,     708709,      78661,     536920,     171789,  21.130227,  40.200000,  48.600000,  65.800000,  20.435669,   0.286000, 981.540024, 582.434012
Outstanding requests per worker:
390 386 343 409 397 413 340 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.8,      784275,     705744,      78531,     563849,     141895,  19.904838,  36.600000,  47.000000,  55.500000,  12.589097,   0.286000,  93.088001, 627.863759
Outstanding requests per worker:
448 399 407 412 340 408 359 387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.8,      784295,     705819,      78476,     580104,     125715,  20.305589,  37.200000,  47.800000,  57.100000,  12.883916,   0.323000,  95.232002, 652.729663
Outstanding requests per worker:
443 413 398 388 421 376 424 358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.6,      784349,     705802,      78547,     591587,     114215,  20.501981,  37.000000,  48.100000,  58.300000,  12.994760,   0.380000, 104.420997, 670.397310
Outstanding requests per worker:
406 391 428 407 379 429 396 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.6,      784339,     706036,      78303,     599461,     106575,  20.726565,  37.600000,  48.600000,  58.800000,  13.146624,   0.329000, 107.578002, 682.712842
Outstanding requests per worker:
415 370 401 382 350 433 489 420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156872.6,      784364,     705971,      78393,     606012,      99959,  20.878102,  37.700000,  49.100000,  59.100000,  13.214791,   0.281000,  97.381003, 693.054754
Outstanding requests per worker:
437 412 360 427 386 380 442 425 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:22   0:00 /usr/lib/linux
memcache      7  360  0.0 448192 163392 pts/0   Sl+  19:22   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19329465539      instructions:u                                              
         401892181      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        5066446103      L1-dcache-loads:u                                           
        1281055601      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10126899937      armv8_pmuv3_0/l1i_cache/:u                                   

      36.170252643 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1772614144
starting receive base loop
num_worker_connections 128
Creating worker on tid 662041088
starting receive base loop
num_worker_connections 128
Creating worker on tid 3848401408
starting receive base loop
num_worker_connections 128
Creating worker on tid 2734354944
starting receive base loop
num_worker_connections 128
Creating worker on tid 1625747968
starting receive base loop
num_worker_connections 128
Creating worker on tid 517140992
starting receive base loop
num_worker_connections 128
Creating worker on tid 3698061824
starting receive base loop
Created 1024 connections total
Creating worker on tid 2589454848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316166.314591,       0.0,      364791,     328270,      36521,     220101,     108169,  43.862803,  83.700000, 122.600000, 306.100000,  78.129643,   0.000000, 1519.265056, 486.927879
Outstanding requests per worker:
518 445 446 465 416 509 400 1275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157184.0,      785921,     707293,      78628,     536081,     171212,  20.136554,  37.900000,  45.200000,  59.700000,  24.835956,   0.323000, 1173.140049, 582.994469
Outstanding requests per worker:
346 381 349 366 399 403 336 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.0,      784311,     705899,      78412,     564347,     141552,  19.081518,  35.700000,  44.300000,  54.300000,  12.141684,   0.328000,  90.527996, 628.266962
Outstanding requests per worker:
438 369 355 365 379 373 369 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.6,      784314,     705976,      78338,     580711,     125265,  19.493746,  36.300000,  45.200000,  55.400000,  12.425247,   0.320000,  99.375002, 653.663728
Outstanding requests per worker:
442 362 406 414 376 379 371 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156875.6,      784379,     705748,      78631,     590950,     114798,  19.796543,  36.500000,  46.200000,  55.900000,  12.565817,   0.361000,  99.469997, 670.417089
Outstanding requests per worker:
379 380 383 384 393 419 394 375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.0,      784326,     706221,      78105,     600357,     105864,  19.931583,  36.600000,  46.500000,  56.300000,  12.621859,   0.327000,  81.115000, 683.925857
Outstanding requests per worker:
390 441 406 384 376 401 363 400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156873.6,      784369,     705825,      78544,     605829,      99996,  20.112843,  37.000000,  47.000000,  57.100000,  12.775744,   0.316000,  99.292003, 693.065797
Outstanding requests per worker:
355 375 444 370 398 415 429 398 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   19:23   0:00 /usr/lib/linux
memcache      8  360  0.0 447168 164352 pts/0   Sl+  19:23   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19286721757      instructions:u                                              
         399303710      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
        5059439909      L1-dcache-loads:u                                           
        1287100249      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10140351519      armv8_pmuv3_0/l1i_cache/:u                                   

      36.271455705 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1331556864
starting receive base loop
num_worker_connections 128
Creating worker on tid 216461824
starting receive base loop
num_worker_connections 128
Creating worker on tid 3402822144
starting receive base loop
num_worker_connections 128
Creating worker on tid 2288775680
starting receive base loop
num_worker_connections 128
Creating worker on tid 1180168704
starting receive base loop
num_worker_connections 128
Creating worker on tid 66122240
starting receive base loop
num_worker_connections 128
Creating worker on tid 3252482560
starting receive base loop
Created 1024 connections total
Creating worker on tid 2138436096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316208.314633,       0.0,      363409,     326689,      36720,     218532,     108157,  66.422880, 145.800000, 180.600000, 525.200000, 106.881084,   0.000000, 1849.172950, 484.809415
Outstanding requests per worker:
1209 1115 1093 1287 1198 1262 1192 3592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161693.8,      808470,     727697,      80773,     552284,     175413,  34.170351,  60.400000,  86.900000, 155.900000,  58.330010,   0.347000, 1699.882984, 584.080266
Outstanding requests per worker:
447 484 439 462 429 427 442 383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159968.6,      799844,     719751,      80093,     576474,     143277,  22.243903,  39.900000,  51.900000,  63.900000,  14.154373,   0.339000, 125.556007, 630.099244
Outstanding requests per worker:
434 472 528 449 485 470 432 450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159890.0,      799451,     719452,      79999,     593724,     125728,  25.775762,  51.200000,  58.800000,  91.100000,  18.166373,   0.412000, 182.114005, 657.155367
Outstanding requests per worker:
568 579 524 509 544 524 515 554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160029.0,      800146,     720030,      80116,     604384,     115646,  26.279139,  52.100000,  60.300000,  96.400000,  18.949660,   0.289000, 213.320002, 672.653516
Outstanding requests per worker:
530 473 550 556 516 579 520 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159962.4,      799813,     719831,      79982,     612209,     107622,  27.113883,  54.600000,  62.500000, 104.500000,  20.127469,   0.392000, 207.269996, 684.679810
Outstanding requests per worker:
543 538 615 582 534 539 638 559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159901.8,      799510,     719156,      80354,     618390,     100766,  27.450296,  55.300000,  63.500000, 105.600000,  20.318459,   0.322000, 208.974004, 694.963534
Outstanding requests per worker:
573 630 608 632 639 661 698 654 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:23   0:00 /usr/lib/linux
memcache      7  360  0.0 515200 165120 pts/0   Sl+  19:23   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19736737389      instructions:u                                              
         400394423      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        5192134929      L1-dcache-loads:u                                           
        1305078275      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10307791421      armv8_pmuv3_0/l1i_cache/:u                                   

      36.190080796 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2062742016
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
num_worker_connections 128
Creating worker on tid 3026973184
starting receive base loop
num_worker_connections 128
Creating worker on tid 1918366208
starting receive base loop
num_worker_connections 128
Creating worker on tid 804319744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3990680064
starting receive base loop
Created 1024 connections total
Creating worker on tid 2876633600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316249.314674,       0.0,      371786,     334564,      37222,     225211,     109353,  60.078315, 128.200000, 168.100000, 533.700000,  97.648479,   0.000000, 1460.522056, 487.933905
Outstanding requests per worker:
942 936 991 889 982 985 879 2200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161104.2,      805522,     725540,      79982,     550750,     174790,  25.866810,  49.400000,  59.700000, 121.900000,  27.313150,   0.446000, 889.272988, 583.747365
Outstanding requests per worker:
466 445 407 426 353 411 413 467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159998.2,      799992,     720165,      79827,     576580,     143585,  21.649625,  40.100000,  50.300000,  61.500000,  13.912984,   0.385000, 146.228001, 630.230317
Outstanding requests per worker:
421 472 452 389 412 453 461 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160004.2,      800022,     720308,      79714,     593103,     127205,  21.723063,  38.700000,  50.800000,  62.600000,  13.782383,   0.342000, 110.616997, 654.887141
Outstanding requests per worker:
444 426 451 474 435 405 440 437 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159891.6,      799459,     719885,      79574,     603004,     116881,  23.243168,  44.300000,  54.100000,  69.300000,  15.583374,   0.336000, 181.077003, 670.627668
Outstanding requests per worker:
545 497 479 522 581 482 485 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159985.6,      799929,     719822,      80107,     611928,     107894,  25.755905,  51.500000,  58.900000,  93.800000,  18.521518,   0.362000, 193.936005, 684.553303
Outstanding requests per worker:
534 549 589 521 510 519 556 539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160061.4,      800308,     719946,      80362,     618465,     101481,  26.042794,  52.500000,  59.800000,  97.300000,  18.951296,   0.372000, 197.775006, 693.685619
Outstanding requests per worker:
497 529 475 575 461 505 466 559 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:24   0:00 /usr/lib/linux
memcache      7  361  0.0 449216 166976 pts/0   Sl+  19:24   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19766822274      instructions:u                                              
         391687231      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        5198656344      L1-dcache-loads:u                                           
        1298018593      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10312916938      armv8_pmuv3_0/l1i_cache/:u                                   

      36.260736163 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1523905024
starting receive base loop
num_worker_connections 128
Creating worker on tid 409727488
starting receive base loop
num_worker_connections 128
Creating worker on tid 3596087808
starting receive base loop
num_worker_connections 128
Creating worker on tid 2482041344
starting receive base loop
num_worker_connections 128
Creating worker on tid 1373434368
starting receive base loop
num_worker_connections 128
Creating worker on tid 259387904
starting receive base loop
num_worker_connections 128
Creating worker on tid 3445748224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2331701760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316289.314714,       0.0,      357806,     321645,      36161,     214579,     107066,  73.664447, 148.000000, 207.500000, 956.300000, 157.704643,   0.000000, 1966.819048, 483.140061
Outstanding requests per worker:
1375 1357 1322 1318 1362 1472 1338 9343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165257.8,      826290,     743968,      82322,     565916,     178052,  83.745832, 157.300000, 190.300000, 864.900000, 149.684086,   0.472000, 2274.189949, 585.429298
Outstanding requests per worker:
1189 1071 1171 1057 1101 1072 1209 1101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163413.2,      817067,     735560,      81507,     589515,     146045,  51.587235, 134.200000, 165.200000, 214.400000,  50.589284,   0.402000, 375.876009, 630.713103
Outstanding requests per worker:
1027 1153 1075 1054 1012 1064 968 969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162903.4,      814518,     732882,      81636,     604123,     128759,  57.104897, 153.000000, 184.000000, 251.400000,  58.919972,   0.441000, 497.094005, 655.048216
Outstanding requests per worker:
1185 1274 1313 1316 1283 1264 1257 1338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162964.8,      814825,     733029,      81796,     615309,     117720,  66.488863, 180.600000, 219.700000, 288.300000,  70.219666,   0.454000, 524.578989, 672.023020
Outstanding requests per worker:
1477 1490 1383 1379 1430 1530 1549 1553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162748.2,      813742,     732083,      81659,     623198,     108885,  81.123643, 211.800000, 263.900000, 351.500000,  82.684039,   0.484000, 549.951971, 685.658363
Outstanding requests per worker:
1747 1879 1838 1744 1847 1883 1722 1772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161591.8,      807960,     727517,      80443,     625619,     101898,  99.137226, 258.900000, 309.900000, 402.500000,  98.064613,   0.599000, 692.357004, 694.655469
Outstanding requests per worker:
2684 2861 2891 2910 2953 2936 2742 2907 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:25   0:00 /usr/lib/linux
memcache      7  359  0.0 515200 168448 pts/0   Sl+  19:25   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20240943401      instructions:u                                              
         399549714      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        5366399085      L1-dcache-loads:u                                           
        1306503593      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10485069086      armv8_pmuv3_0/l1i_cache/:u                                   

      36.220617935 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1372123648
starting receive base loop
num_worker_connections 128
Creating worker on tid 259387904
starting receive base loop
num_worker_connections 128
Creating worker on tid 3445748224
starting receive base loop
num_worker_connections 128
Creating worker on tid 2331701760
starting receive base loop
num_worker_connections 128
Creating worker on tid 1223094784
starting receive base loop
num_worker_connections 128
Creating worker on tid 114487808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3295408640
starting receive base loop
Created 1024 connections total
Creating worker on tid 2186801664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316330.314755,       0.0,      368626,     331657,      36969,     222211,     109446,  76.336799, 163.600000, 202.000000, 728.700000, 133.524829,   0.000000, 1935.402989, 486.240019
Outstanding requests per worker:
1671 1615 1760 1656 1567 1687 1762 10839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167495.0,      837476,     753744,      83732,     572311,     181433, 130.104703, 190.400000, 254.900000, 1439.600000, 217.205606,   1.129000, 2535.923004, 584.165236
Outstanding requests per worker:
1964 2089 2098 2003 2005 1967 2036 4338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166765.4,      833828,     750790,      83038,     602556,     148234, 108.482517, 260.200000, 314.300000, 575.200000, 142.661840,   0.599000, 1787.466049, 631.542543
Outstanding requests per worker:
2205 2161 2177 1932 2015 2095 2306 3214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166515.8,      832580,     749121,      83459,     618034,     131087, 111.699482, 309.200000, 375.000000, 515.700000, 133.933966,   0.840000, 1570.626974, 656.887596
Outstanding requests per worker:
2404 2415 2306 2284 2104 2329 2306 2762 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166328.2,      831642,     748436,      83206,     628665,     119771, 119.189732, 335.300000, 408.700000, 547.200000, 134.849717,   0.922000, 1006.911993, 672.849588
Outstanding requests per worker:
2686 2492 2507 2487 2377 2719 2602 2795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166064.4,      830323,     746779,      83544,     635955,     110824, 134.180614, 373.700000, 442.800000, 588.600000, 144.935477,   0.828000, 896.246016, 685.198006
Outstanding requests per worker:
2969 2948 3025 2876 2818 3156 2822 3147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163526.4,      817633,     735857,      81776,     632939,     102918, 169.046880, 412.200000, 492.200000, 629.800000, 152.616159,   0.899000, 1033.887982, 695.109210
Outstanding requests per worker:
4924 4930 5028 5051 4826 4980 4967 4853 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:25   0:00 /usr/lib/linux
memcache      7  360  0.0 517248 177792 pts/0   Sl+  19:25   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20729570653      instructions:u                                              
         412537466      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        5519699623      L1-dcache-loads:u                                           
        1337516297      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10752195850      armv8_pmuv3_0/l1i_cache/:u                                   

      36.160427998 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1819931136
starting receive base loop
num_worker_connections 128
Creating worker on tid 710406656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3891327488
starting receive base loop
num_worker_connections 128
Creating worker on tid 2782720512
starting receive base loop
num_worker_connections 128
Creating worker on tid 1668674048
starting receive base loop
num_worker_connections 128
Creating worker on tid 560067072
starting receive base loop
num_worker_connections 128
Creating worker on tid 3740987904
starting receive base loop
Created 1024 connections total
Creating worker on tid 2632380928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316371.314796,       0.0,      366071,     329440,      36631,     220103,     109337,  80.885715, 164.000000, 202.000000, 850.600000, 144.162586,   0.000000, 1958.935976, 484.322535
Outstanding requests per worker:
1880 1726 1891 1866 1755 1862 1753 10073 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167401.4,      837008,     754020,      82988,     572874,     181146, 130.641975, 192.800000, 254.500000, 1180.000000, 184.362962,   1.127000, 2427.102089, 584.362441
Outstanding requests per worker:
2167 2400 2252 2060 2289 2255 2382 3421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166534.4,      832673,     749324,      83349,     601099,     148225, 117.048476, 245.200000, 291.100000, 402.300000,  98.541417,   0.758000, 1178.519011, 631.379282
Outstanding requests per worker:
2583 2493 2360 2567 2392 2457 2549 2536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166183.8,      830920,     747932,      82988,     616420,     131512, 127.511642, 282.400000, 332.600000, 427.200000, 104.895741,   0.846000, 741.735995, 655.222131
Outstanding requests per worker:
2776 2846 2919 2746 2843 2603 2901 2783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165798.0,      828991,     746155,      82836,     627061,     119094, 146.411616, 324.500000, 388.400000, 491.500000, 119.091845,   0.824000, 785.086989, 673.455483
Outstanding requests per worker:
3398 3296 3484 3362 3168 3398 3417 3324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165729.8,      828650,     745595,      83055,     635327,     110268, 175.416237, 363.900000, 423.900000, 538.500000, 127.181554,   1.011000, 947.022021, 686.422299
Outstanding requests per worker:
4157 3992 4061 3837 3870 3779 4030 3905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164536.4,      822683,     740391,      82292,     636852,     103539, 211.204571, 394.400000, 458.300000, 582.200000, 128.173544,   1.471000, 941.367984, 695.246756
Outstanding requests per worker:
5424 5231 5488 5386 5013 5249 5138 5395 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:26   0:00 /usr/lib/linux
memcache      7  360  0.0 519296 181952 pts/0   Sl+  19:26   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20877790824      instructions:u                                              
         416710464      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        5567054777      L1-dcache-loads:u                                           
        1348658357      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10818367730      armv8_pmuv3_0/l1i_cache/:u                                   

      36.251508845 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1896346112
starting receive base loop
num_worker_connections 128
Creating worker on tid 788197888
starting receive base loop
num_worker_connections 128
Creating worker on tid 3974558208
starting receive base loop
num_worker_connections 128
Creating worker on tid 2865951232
starting receive base loop
num_worker_connections 128
Creating worker on tid 1751904768
starting receive base loop
num_worker_connections 128
Creating worker on tid 643297792
starting receive base loop
num_worker_connections 128
Creating worker on tid 3824218624
starting receive base loop
Created 1024 connections total
Creating worker on tid 2715611648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316413.314838,       0.0,      412240,     370965,      41275,     251390,     119575,  69.606191, 147.300000, 193.000000, 863.200000, 149.008973,   0.000000, 1977.584004, 494.373458
Outstanding requests per worker:
1863 1711 1744 1858 1849 1947 1854 14210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167274.0,      836371,     753004,      83367,     574957,     178047, 211.512443, 303.000000, 446.200000, 1688.800000, 262.119477,   1.436000, 2526.968956, 588.815940
Outstanding requests per worker:
4498 4588 4713 4550 4593 4542 4768 9536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168469.0,      842346,     758112,      84234,     609604,     148508, 274.755243, 412.000000, 499.600000, 1185.700000, 193.985351,   2.061000, 2563.273907, 633.342128
Outstanding requests per worker:
5725 6079 6054 5850 6099 5949 5908 8921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168913.6,      844569,     760328,      84241,     627660,     132668, 316.359260, 503.800000, 602.400000, 951.700000, 189.596549,   1.330000, 2528.920889, 656.950457
Outstanding requests per worker:
6906 7115 6806 6819 6981 6930 6717 8906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168955.8,      844780,     760277,      84503,     639582,     120695, 353.109652, 588.300000, 709.500000, 1049.900000, 210.222889,   1.244000, 2443.806887, 674.052852
Outstanding requests per worker:
7904 7561 7510 7732 7949 7667 7746 9507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168744.6,      843724,     759118,      84606,     647273,     111845, 393.271637, 677.200000, 828.400000, 1254.500000, 235.876763,   2.355000, 2476.785898, 687.302052
Outstanding requests per worker:
8687 8746 8586 8780 8717 8579 8554 10318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168272.6,      841364,     757104,      84260,     651845,     105259, 439.982111, 794.200000, 973.800000, 1387.500000, 270.264144,   3.778000, 2695.667028, 696.441754
Outstanding requests per worker:
10127 9860 9611 9856 10056 10164 9782 11284 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:27   0:00 /usr/lib/linux
memcache      7  355  0.0 520320 187392 pts/0   Sl+  19:27   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21403275804      instructions:u                                              
         429324489      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        5753866985      L1-dcache-loads:u                                           
        1377066823      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11154313974      armv8_pmuv3_0/l1i_cache/:u                                   

      37.103980968 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1102311936
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
num_worker_connections 128
Creating worker on tid 2063266304
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
num_worker_connections 128
Creating worker on tid 3026973184
starting receive base loop
Created 1024 connections total
Creating worker on tid 1918366208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316455.314880,       0.0,      372536,     335257,      37279,     224505,     110752,  82.958690, 161.500000, 211.600000, 1029.200000, 163.805842,   0.000000, 1985.234976, 485.742651
Outstanding requests per worker:
1844 1927 1925 1997 1905 1866 1861 16892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167124.6,      835624,     752115,      83509,     572118,     179997, 235.942415, 328.800000, 643.700000, 1876.800000, 296.340351,   1.307000, 2659.946918, 585.372268
Outstanding requests per worker:
4952 4941 4826 5022 4736 4953 4745 11566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168454.0,      842271,     757940,      84331,     609502,     148438, 297.459081, 429.000000, 522.600000, 1350.100000, 197.086801,   1.755000, 2083.811045, 633.196620
Outstanding requests per worker:
6448 6477 6205 6205 6419 6588 6390 9874 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168630.6,      843154,     759100,      84054,     626625,     132475, 345.661142, 521.700000, 617.800000, 1134.600000, 180.326431,   2.577000, 1897.135973, 656.982301
Outstanding requests per worker:
7601 7543 7554 7294 7768 7422 7498 9887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168881.4,      844408,     760144,      84264,     639538,     120606, 387.574757, 609.400000, 727.600000, 1115.900000, 191.497466,   3.360000, 1904.490948, 674.067096
Outstanding requests per worker:
8700 8077 8454 8414 8673 8056 8596 10320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169266.0,      846331,     760809,      85522,     649452,     111357, 421.678135, 676.200000, 823.000000, 1236.600000, 214.777685,   3.521000, 2266.324043, 687.578424
Outstanding requests per worker:
8879 9021 8653 9159 9115 8880 9216 11192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168266.6,      841334,     757355,      83979,     652607,     104748, 460.005545, 738.300000, 921.000000, 1419.300000, 238.886206,  21.802999, 2275.218010, 696.952320
Outstanding requests per worker:
10107 10275 9994 10257 10160 10280 10597 12283 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:27   0:00 /usr/lib/linux
memcache      7  351  0.0 518272 190912 pts/0   Sl+  19:27   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21331448109      instructions:u                                              
         422815277      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        5717234671      L1-dcache-loads:u                                           
        1361492309      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11010386056      armv8_pmuv3_0/l1i_cache/:u                                   

      37.599408691 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1809641984
starting receive base loop
num_worker_connections 128
Creating worker on tid 702345728
starting receive base loop
num_worker_connections 128
Creating worker on tid 3883266560
starting receive base loop
num_worker_connections 128
Creating worker on tid 2774659584
starting receive base loop
num_worker_connections 128
Creating worker on tid 1660613120
starting receive base loop
num_worker_connections 128
Creating worker on tid 552006144
starting receive base loop
num_worker_connections 128
Creating worker on tid 3738366464
starting receive base loop
Created 1024 connections total
Creating worker on tid 2624320000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316496.314921,       0.0,      366245,     329465,      36780,     220127,     109338,  89.571315, 173.100000, 229.500000, 1058.900000, 171.685151,   0.000000, 1985.707045, 484.415683
Outstanding requests per worker:
2191 2108 2102 2349 2204 2370 2163 22534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168084.6,      840424,     756406,      84018,     573354,     183052, 320.105958, 469.800000, 1148.400000, 2168.100000, 386.841123,   1.511000, 2937.495947, 583.063015
Outstanding requests per worker:
6753 6837 6570 6758 6819 6964 6657 19921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169870.2,      849352,     764414,      84938,     613734,     150680, 448.775670, 650.900000, 956.000000, 2057.000000, 317.826634,   4.343000, 2609.333992, 632.920225
Outstanding requests per worker:
9784 9525 9511 9636 9870 9541 9563 20135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169994.8,      849975,     765126,      84849,     632039,     133087, 559.384970, 855.600000, 1101.000000, 2049.900000, 321.961825,   6.806000, 2772.777081, 657.963237
Outstanding requests per worker:
12150 12022 12326 12365 12205 12236 12297 21638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169849.8,      849250,     763649,      85601,     642034,     121615, 672.633265, 1067.600000, 1296.800000, 2114.800000, 350.023693,  33.372998, 3017.775059, 674.455079
Outstanding requests per worker:
14645 14726 14846 14984 15065 14737 14813 23837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169731.4,      848658,     763576,      85082,     652005,     111571, 792.719792, 1284.300000, 1554.800000, 2223.600000, 391.051038,  86.150996, 3270.344973, 688.173104
Outstanding requests per worker:
17420 17276 17739 17569 17725 17651 17510 25794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169106.0,      845531,     760929,      84602,     656165,     104764, 915.702236, 1520.000000, 1768.800000, 2398.000000, 440.875854, 143.113002, 3521.281958, 697.709743
Outstanding requests per worker:
20365 20250 20835 20598 20601 20697 20493 28948 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:28   0:00 /usr/lib/linux
memcache      7  360  0.0 521344 198464 pts/0   Sl+  19:28   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21267276934      instructions:u                                              
         417557995      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        5698775009      L1-dcache-loads:u                                           
        1348950682      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10977899700      armv8_pmuv3_0/l1i_cache/:u                                   

      36.281204767 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2055991808
starting receive base loop
num_worker_connections 128
Creating worker on tid 946598400
starting receive base loop
num_worker_connections 128
Creating worker on tid 4132958720
starting receive base loop
num_worker_connections 128
Creating worker on tid 3018912256
starting receive base loop
num_worker_connections 128
Creating worker on tid 1910305280
starting receive base loop
num_worker_connections 128
Creating worker on tid 796258816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3982619136
starting receive base loop
Created 1024 connections total
Creating worker on tid 2868572672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316538.314963,       0.0,      368970,     332019,      36951,     222332,     109687,  88.534855, 169.100000, 247.200000, 1112.400000, 181.357375,   0.000000, 1993.538976, 485.215000
Outstanding requests per worker:
2019 2042 2085 1913 1998 2064 3012 30329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168339.6,      841699,     758171,      83528,     576490,     181681, 398.647333, 570.700000, 1696.200000, 2937.600000, 542.111329,   1.594000, 4304.125786, 585.177100
Outstanding requests per worker:
8319 8543 8314 8369 8465 8260 8671 33769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170907.2,      854537,     768618,      85919,     617002,     151616, 618.975412, 851.500000, 1806.500000, 3070.400000, 526.038051,  30.942000, 4477.385044, 632.323828
Outstanding requests per worker:
12926 13001 13203 12873 12758 12571 13279 36533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170201.4,      851008,     765934,      85074,     634010,     131924, 820.824863, 1159.800000, 1906.500000, 3325.000000, 541.937189, 137.502998, 4772.319794, 658.695894
Outstanding requests per worker:
17305 17761 18231 17561 17498 17515 17965 41295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169819.8,      849100,     764176,      84924,     643485,     120691, 1036.865437, 1491.800000, 2136.200000, 3616.000000, 581.093915, 175.395995, 4989.178181, 675.491091
Outstanding requests per worker:
22178 22502 23192 23017 22606 22272 23336 45939 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170120.4,      850603,     765137,      85466,     652937,     112200, 1254.420084, 1822.800000, 2488.400000, 3940.900000, 623.500919, 202.617005, 5201.581001, 687.605695
Outstanding requests per worker:
27014 27526 28021 27495 27456 27345 27977 50554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168737.2,      843687,     759588,      84099,     654631,     104957, 1481.755904, 2143.800000, 2766.000000, 4272.800000, 675.115376, 197.763994, 5816.721916, 697.259147
Outstanding requests per worker:
32687 33267 33657 33148 33337 33175 33246 56165 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:29   0:00 /usr/lib/linux
memcache      7  361  0.0 519296 198336 pts/0   Sl+  19:29   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21257853347      instructions:u                                              
         410533953      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        5690826231      L1-dcache-loads:u                                           
        1340904790      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10914837146      armv8_pmuv3_0/l1i_cache/:u                                   

      36.271239223 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2140467712
starting receive base loop
num_worker_connections 128
Creating worker on tid 1029829120
starting receive base loop
num_worker_connections 128
Creating worker on tid 4210749952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3102142976
starting receive base loop
num_worker_connections 128
Creating worker on tid 1993536000
starting receive base loop
num_worker_connections 128
Creating worker on tid 879489536
starting receive base loop
num_worker_connections 128
Creating worker on tid 4065849856
starting receive base loop
Created 1024 connections total
Creating worker on tid 2951803392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316579.315004,       0.0,      372053,     334750,      37303,     224039,     110711,  95.257780, 189.500000, 251.900000, 1070.800000, 173.984762,   0.000000, 1990.342975, 484.725347
Outstanding requests per worker:
2496 2521 2407 2494 2356 2447 2670 24509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170250.6,      851254,     766100,      85154,     583666,     182434, 358.747705, 507.300000, 1275.200000, 2483.800000, 428.391684,   1.374000, 3184.853077, 586.521077
Outstanding requests per worker:
7597 7938 7741 7797 8093 8175 7887 24353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172298.0,      861491,     775828,      85663,     623331,     152497, 526.749824, 744.600000, 1182.400000, 2468.100000, 387.353539,   4.686000, 3298.599958, 632.760406
Outstanding requests per worker:
11448 11565 11388 11458 11794 11469 11592 26365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172151.8,      860760,     774820,      85940,     640215,     134605, 680.472731, 998.200000, 1346.700000, 2632.400000, 403.144979,  39.037000, 3754.542112, 657.959716
Outstanding requests per worker:
15195 15170 14757 15342 15376 15134 14986 29373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172460.0,      862301,     776114,      86187,     653170,     122944, 831.535912, 1265.900000, 1572.600000, 2829.300000, 437.700091, 121.477999, 3987.267017, 674.827824
Outstanding requests per worker:
18568 18518 18247 18291 18493 18773 18365 32728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172087.4,      860438,     774094,      86344,     661016,     113078, 984.720252, 1532.900000, 1824.100000, 2970.500000, 479.351029, 129.304007, 4651.566982, 688.427315
Outstanding requests per worker:
22048 22211 21416 21821 22178 22330 21947 36571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171218.6,      856094,     770581,      85513,     664411,     106170, 1159.117212, 1815.600000, 2106.200000, 3146.000000, 526.483246, 182.150006, 4653.809071, 696.802837
Outstanding requests per worker:
25852 26019 25845 26209 26487 26127 26190 40694 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:29   0:00 /usr/lib/linux
memcache      7  361  0.0 521344 192704 pts/0   Sl+  19:29   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21485560884      instructions:u                                              
         419217233      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        5754736880      L1-dcache-loads:u                                           
        1363631832      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11053312051      armv8_pmuv3_0/l1i_cache/:u                                   

      36.270543592 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2451698176
starting receive base loop
num_worker_connections 85
Creating worker on tid 1679749632
starting receive base loop
num_worker_connections 85
Creating worker on tid 914747904
starting receive base loop
num_worker_connections 85
Creating worker on tid 152367616
starting receive base loop
num_worker_connections 85
Creating worker on tid 3684954624
starting receive base loop
Created 512 connections total
Creating worker on tid 2919952896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316620.315045,       0.0,      346165,     311467,      34698,     206977,     104490,   9.004024,  18.900000,  24.300000,  38.800000,   8.109285,   0.000000,  95.949002, 480.710685
Outstanding requests per worker:
192 213 188 193 207 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150009.8,      750050,     674982,      75068,     510038,     164944,   8.211795,  15.000000,  17.600000,  21.800000,   4.718087,   0.287000,  31.417001, 580.052622
Outstanding requests per worker:
225 201 211 190 199 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149995.1,      749976,     675281,      74695,     538947,     136334,   8.436629,  15.600000,  18.200000,  22.100000,   4.835572,   0.341000,  31.594001, 627.105112
Outstanding requests per worker:
212 217 235 213 218 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.8,      750035,     674891,      75144,     553300,     121591,   8.649118,  16.000000,  18.700000,  22.700000,   4.946741,   0.309000,  29.491000, 651.124722
Outstanding requests per worker:
224 245 212 207 207 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150018.2,      750092,     675020,      75072,     563710,     111310,   8.780528,  16.200000,  19.000000,  23.100000,   5.040927,   0.333000,  31.660002, 668.423490
Outstanding requests per worker:
241 214 209 215 223 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150020.2,      750102,     675301,      74801,     572310,     102991,   8.856273,  16.400000,  19.200000,  23.200000,   5.077178,   0.303000,  30.138001, 681.672817
Outstanding requests per worker:
208 192 245 224 189 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149998.3,      749992,     674827,      75165,     578171,      96656,   8.922104,  16.500000,  19.400000,  23.400000,   5.129457,   0.298000,  39.563999, 691.141696
Outstanding requests per worker:
241 245 208 223 229 216 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:30   0:00 /usr/lib/linux
memcache      7  360  0.0 443072 146624 pts/0   Sl+  19:30   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18367353602      instructions:u                                              
         394533226      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        4790157001      L1-dcache-loads:u                                           
        1252996925      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9737962228      armv8_pmuv3_0/l1i_cache/:u                                   

      36.300176692 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1420489216
starting receive base loop
num_worker_connections 85
Creating worker on tid 646312448
starting receive base loop
num_worker_connections 85
Creating worker on tid 4178899456
starting receive base loop
num_worker_connections 85
Creating worker on tid 3416519168
starting receive base loop
num_worker_connections 85
Creating worker on tid 2651517440
starting receive base loop
Created 512 connections total
Creating worker on tid 1889137152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316661.315086,       0.0,      355756,     320246,      35510,     213548,     106698,  10.692662,  22.300000,  29.500000,  52.700000,  10.751933,   0.000000, 205.906004, 481.768035
Outstanding requests per worker:
236 226 234 212 221 207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153839.2,      769197,     692337,      76860,     523560,     168777,   9.093470,  16.500000,  19.700000,  24.300000,   5.216185,   0.286000,  31.886999, 581.029444
Outstanding requests per worker:
242 243 252 224 227 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.4,      769288,     692177,      77111,     553275,     138902,   9.372898,  17.200000,  20.200000,  25.000000,   5.392655,   0.295000,  47.208998, 628.240540
Outstanding requests per worker:
230 232 231 253 245 239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.8,      769215,     692256,      76959,     568515,     123741,   9.530262,  17.400000,  20.700000,  25.500000,   5.475108,   0.309000,  44.876002, 652.454703
Outstanding requests per worker:
250 242 266 238 232 259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.6,      769289,     692040,      77249,     578841,     113199,   9.639290,  17.500000,  20.900000,  26.100000,   5.554369,   0.338000,  37.753999, 669.299581
Outstanding requests per worker:
239 254 247 241 267 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.4,      769213,     692452,      76761,     587385,     105067,   9.777979,  17.700000,  21.300000,  26.300000,   5.644749,   0.221000,  38.261000, 682.164404
Outstanding requests per worker:
268 251 282 259 237 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.6,      769304,     692207,      77097,     592748,      99459,   9.855823,  17.900000,  21.400000,  26.400000,   5.671790,   0.285000,  50.611001, 690.977447
Outstanding requests per worker:
252 270 295 210 245 241 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:31   0:00 /usr/lib/linux
memcache      7  360  0.0 445120 147392 pts/0   Sl+  19:31   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18897456027      instructions:u                                              
         399622071      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        4933217644      L1-dcache-loads:u                                           
        1271173043      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9939734401      armv8_pmuv3_0/l1i_cache/:u                                   

      36.291032232 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1788736000
starting receive base loop
num_worker_connections 85
Creating worker on tid 1016721920
starting receive base loop
num_worker_connections 85
Creating worker on tid 251720192
starting receive base loop
num_worker_connections 85
Creating worker on tid 3784307200
starting receive base loop
num_worker_connections 85
Creating worker on tid 3021926912
starting receive base loop
Created 512 connections total
Creating worker on tid 2256925184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316703.315128,       0.0,      360964,     324837,      36127,     217716,     107121,  17.109900,  37.000000,  55.800000,  98.100000,  20.358170,   0.000000, 296.600014, 486.959506
Outstanding requests per worker:
290 303 299 293 301 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157911.8,      789560,     710699,      78861,     538705,     171994,  10.987116,  19.400000,  23.800000,  30.100000,   6.295316,   0.402000,  57.682000, 583.069899
Outstanding requests per worker:
294 297 287 309 295 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157913.2,      789567,     710522,      79045,     568480,     142042,  11.316086,  20.000000,  24.500000,  31.300000,   6.527150,   0.348000,  59.269000, 629.153874
Outstanding requests per worker:
273 313 300 275 293 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157893.2,      789467,     710440,      79027,     584410,     126030,  11.580763,  20.400000,  25.100000,  32.200000,   6.686797,   0.351000,  64.318001, 654.205107
Outstanding requests per worker:
335 304 268 302 290 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.6,      789489,     710544,      78945,     595856,     114688,  11.761117,  20.700000,  25.500000,  32.500000,   6.783413,   0.360000,  63.395001, 670.496034
Outstanding requests per worker:
315 327 315 282 291 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157909.0,      789546,     710005,      79541,     602960,     107045,  11.940288,  20.800000,  26.000000,  33.100000,   6.886287,   0.336000,  64.557999, 683.062981
Outstanding requests per worker:
266 323 332 318 315 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157888.6,      789444,     710547,      78897,     610083,     100464,  12.049199,  21.300000,  26.000000,  33.400000,   6.975444,   0.401000,  68.922997, 693.663527
Outstanding requests per worker:
329 328 361 318 318 308 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:32   0:00 /usr/lib/linux
memcache      7  341  0.0 449216 156608 pts/0   Sl+  19:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19429916818      instructions:u                                              
         403326186      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        5088094878      L1-dcache-loads:u                                           
        1289097323      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10180350566      armv8_pmuv3_0/l1i_cache/:u                                   

      37.570537884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1821700608
starting receive base loop
num_worker_connections 85
Creating worker on tid 1048965632
starting receive base loop
num_worker_connections 85
Creating worker on tid 286585344
starting receive base loop
num_worker_connections 85
Creating worker on tid 3819172352
starting receive base loop
num_worker_connections 85
Creating worker on tid 3054170624
starting receive base loop
Created 512 connections total
Creating worker on tid 2291790336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316745.315170,       0.0,      367107,     330516,      36591,     221454,     109062,  13.513016,  28.600000,  38.500000,  71.800000,  14.194985,   0.000000, 220.399007, 485.249383
Outstanding requests per worker:
265 289 256 247 281 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157880.8,      789405,     710824,      78581,     539300,     171524,  10.761909,  19.100000,  23.600000,  28.800000,   6.117295,   0.377000,  42.585999, 583.243682
Outstanding requests per worker:
308 281 259 284 328 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157906.0,      789531,     710521,      79010,     568480,     142041,  11.191130,  19.700000,  24.500000,  30.500000,   6.400271,   0.324000,  58.697000, 628.992182
Outstanding requests per worker:
282 333 299 285 301 258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     710485,      79012,     584883,     125602,  11.385168,  19.900000,  25.000000,  30.900000,   6.497375,   0.370000,  57.202999, 654.612055
Outstanding requests per worker:
300 297 262 299 309 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.4,      789493,     710687,      78806,     595337,     115350,  11.599296,  20.200000,  25.300000,  31.900000,   6.642254,   0.332000,  63.141003, 670.730602
Outstanding requests per worker:
294 303 302 285 329 303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.0,      789451,     710481,      78970,     603662,     106819,  11.788926,  20.700000,  25.700000,  32.400000,   6.775591,   0.300000,  62.909998, 683.750523
Outstanding requests per worker:
348 312 308 300 277 340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157905.6,      789529,     710920,      78609,     609599,     101321,  11.907350,  20.800000,  26.000000,  32.500000,   6.816017,   0.412000,  63.524000, 692.145697
Outstanding requests per worker:
346 293 277 341 315 322 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:32   0:00 /usr/lib/linux
memcache      7  341  0.0 449216 149248 pts/0   Sl+  19:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19495796542      instructions:u                                              
         395857716      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        5097723664      L1-dcache-loads:u                                           
        1286753581      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10177675806      armv8_pmuv3_0/l1i_cache/:u                                   

      37.551443437 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1889661440
starting receive base loop
num_worker_connections 85
Creating worker on tid 1116074496
starting receive base loop
num_worker_connections 85
Creating worker on tid 353694208
starting receive base loop
num_worker_connections 85
Creating worker on tid 3886281216
starting receive base loop
num_worker_connections 85
Creating worker on tid 3121279488
starting receive base loop
Created 512 connections total
Creating worker on tid 2358899200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316786.315211,       0.0,      378684,     340713,      37971,     229333,     111380,  18.208013,  38.000000,  57.500000,  98.600000,  21.707089,   0.000000, 337.038010, 488.972144
Outstanding requests per worker:
359 320 304 307 344 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162144.0,      810721,     729499,      81222,     554300,     175199,  13.030777,  23.000000,  27.500000,  37.500000,   7.562694,   0.397000,  76.899000, 584.762527
Outstanding requests per worker:
343 360 366 336 379 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.2,      810847,     729517,      81330,     584759,     144758,  13.465823,  23.500000,  28.600000,  38.500000,   7.768811,   0.394000,  75.147003, 630.022566
Outstanding requests per worker:
390 357 389 378 341 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.4,      810833,     729498,      81335,     602229,     127269,  13.970094,  24.200000,  29.500000,  40.000000,   8.088219,   0.441000,  79.056002, 657.009581
Outstanding requests per worker:
393 359 412 373 367 385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.4,      810763,     729478,      81285,     613187,     116291,  14.359194,  25.000000,  30.400000,  41.500000,   8.364155,   0.359000,  81.802003, 673.676548
Outstanding requests per worker:
420 411 362 395 403 402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162189.4,      810948,     730437,      80511,     621991,     108446,  14.482029,  24.700000,  30.800000,  41.100000,   8.333021,   0.462000,  87.320998, 685.829161
Outstanding requests per worker:
402 397 421 371 371 366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161811.6,      809059,     727980,      81079,     625736,     102244,  15.442604,  26.700000,  33.700000,  51.200000,  10.040180,   0.351000, 122.304000, 694.879183
Outstanding requests per worker:
639 699 774 711 703 638 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:33   0:00 /usr/lib/linux
memcache      7  360  0.0 516224 156352 pts/0   Sl+  19:33   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20100842716      instructions:u                                              
         406636845      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        5273433299      L1-dcache-loads:u                                           
        1315715572      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10462953805      armv8_pmuv3_0/l1i_cache/:u                                   

      36.189148270 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1856172544
starting receive base loop
num_worker_connections 85
Creating worker on tid 1083830784
starting receive base loop
num_worker_connections 85
Creating worker on tid 318829056
starting receive base loop
num_worker_connections 85
Creating worker on tid 3851416064
starting receive base loop
num_worker_connections 85
Creating worker on tid 3089035776
starting receive base loop
Created 512 connections total
Creating worker on tid 2324034048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316827.315252,       0.0,      371695,     334412,      37283,     224350,     110062,  23.914937,  57.900000,  75.300000, 107.000000,  24.677772,   0.000000, 291.177005, 486.957149
Outstanding requests per worker:
381 369 384 400 387 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162153.6,      810769,     729707,      81062,     554698,     175009,  14.456478,  24.200000,  31.000000,  41.000000,   8.255765,   0.474000,  79.650998, 584.542141
Outstanding requests per worker:
372 418 391 389 437 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.2,      810807,     729946,      80861,     584877,     145069,  15.069794,  25.000000,  32.400000,  42.900000,   8.637820,   0.578000,  82.827002, 630.197039
Outstanding requests per worker:
457 430 406 401 377 425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162167.4,      810838,     729753,      81085,     601754,     127999,  15.526154,  25.500000,  33.300000,  44.300000,   8.909564,   0.473000,  86.271003, 656.038135
Outstanding requests per worker:
438 427 403 440 397 404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.8,      810815,     729672,      81143,     612754,     116918,  15.818941,  25.900000,  34.000000,  45.000000,   9.052584,   0.596000,  83.269000, 672.410060
Outstanding requests per worker:
396 492 445 401 399 435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.2,      810877,     729614,      81263,     620657,     108957,  16.082314,  26.100000,  34.600000,  45.700000,   9.181376,   0.544000,  81.788003, 685.039118
Outstanding requests per worker:
408 434 422 449 457 413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161746.6,      808734,     728005,      80729,     626265,     101740,  16.574994,  27.400000,  36.400000,  49.500000,  10.015533,   0.528000, 133.881003, 695.387532
Outstanding requests per worker:
781 765 702 771 766 965 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:34   0:00 /usr/lib/linux
memcache      7  350  0.0 515200 159616 pts/0   Sl+  19:34   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20018306807      instructions:u                                              
         402541822      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        5260875193      L1-dcache-loads:u                                           
        1309945004      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10408776996      armv8_pmuv3_0/l1i_cache/:u                                   

      36.490569080 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2223501824
starting receive base loop
num_worker_connections 85
Creating worker on tid 1451618816
starting receive base loop
num_worker_connections 85
Creating worker on tid 689238528
starting receive base loop
num_worker_connections 85
Creating worker on tid 4221825536
starting receive base loop
num_worker_connections 85
Creating worker on tid 3456823808
starting receive base loop
Created 512 connections total
Creating worker on tid 2694443520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316869.315294,       0.0,      371409,     334217,      37192,     224218,     109999,  20.982002,  48.700000,  68.900000, 100.700000,  22.613797,   0.000000, 322.122991, 486.551953
Outstanding requests per worker:
363 369 368 392 363 346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.6,      810794,     729812,      80982,     554435,     175377,  13.492651,  23.100000,  28.900000,  38.300000,   7.757482,   0.349000,  77.748999, 584.733445
Outstanding requests per worker:
389 398 366 386 358 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162171.2,      810857,     729830,      81027,     584820,     145010,  14.094248,  24.100000,  29.800000,  40.500000,   8.120014,   0.457000,  75.320996, 630.561821
Outstanding requests per worker:
396 389 352 350 414 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.8,      810755,     729941,      80814,     601341,     128600,  14.547054,  24.700000,  31.000000,  41.700000,   8.363924,   0.459000,  79.020001, 655.230787
Outstanding requests per worker:
427 412 400 373 377 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162181.8,      810910,     729378,      81532,     611851,     117527,  14.788569,  24.900000,  31.400000,  42.100000,   8.464476,   0.470000,  85.381001, 672.110723
Outstanding requests per worker:
394 423 370 368 393 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162148.4,      810743,     729643,      81100,     620045,     109598,  14.888415,  24.800000,  31.900000,  42.300000,   8.499591,   0.494000,  79.976998, 683.868075
Outstanding requests per worker:
402 433 439 389 396 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161595.8,      807980,     727527,      80453,     625212,     102315,  15.585344,  26.600000,  34.300000,  47.700000,   9.564777,   0.458000, 114.689998, 693.602636
Outstanding requests per worker:
880 893 892 878 891 903 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:34   0:00 /usr/lib/linux
memcache      7  350  0.0 516224 154176 pts/0   Sl+  19:34   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20015906773      instructions:u                                              
         401131428      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        5259668891      L1-dcache-loads:u                                           
        1313345386      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10411511365      armv8_pmuv3_0/l1i_cache/:u                                   

      37.500701652 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1462235648
starting receive base loop
num_worker_connections 85
Creating worker on tid 689238528
starting receive base loop
num_worker_connections 85
Creating worker on tid 4221825536
starting receive base loop
num_worker_connections 85
Creating worker on tid 3456823808
starting receive base loop
num_worker_connections 85
Creating worker on tid 2694443520
starting receive base loop
Created 512 connections total
Creating worker on tid 1929441792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316910.315335,       0.0,      380260,     341913,      38347,     229272,     112641,  31.869713,  73.900000,  87.200000, 124.700000,  31.141419,   0.000000, 390.320987, 487.047772
Outstanding requests per worker:
673 560 613 615 611 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166821.0,      834106,     751069,      83037,     571865,     179204,  17.184309,  29.100000,  38.100000,  54.700000,  10.560460,   0.599000, 123.609997, 586.301494
Outstanding requests per worker:
524 481 470 482 523 496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166678.6,      833394,     749747,      83647,     601854,     147893,  17.378999,  28.500000,  37.000000,  50.200000,   9.912881,   0.594000,  96.634001, 632.053059
Outstanding requests per worker:
522 490 485 507 472 486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166683.8,      833420,     749722,      83698,     619158,     130564,  17.702414,  28.800000,  37.600000,  51.000000,  10.045993,   0.454000,  96.256003, 657.437889
Outstanding requests per worker:
482 540 481 501 467 491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166664.6,      833324,     750028,      83296,     630895,     119133,  17.983385,  29.300000,  38.300000,  51.900000,  10.229277,   0.455000,  94.618000, 673.995414
Outstanding requests per worker:
554 525 478 522 491 507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166687.0,      833436,     750037,      83399,     639145,     110892,  18.373698,  30.100000,  39.400000,  53.600000,  10.558013,   0.456000,  98.563999, 686.130812
Outstanding requests per worker:
527 529 445 511 514 501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166381.6,      831909,     748545,      83364,     644101,     104444,  20.624862,  37.000000,  49.000000,  75.200000,  14.034021,   0.635000, 139.991000, 695.726966
Outstanding requests per worker:
772 764 761 708 769 743 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:35   0:00 /usr/lib/linux
memcache      7  360  0.0 519296 153856 pts/0   Sl+  19:35   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20649019165      instructions:u                                              
         410262072      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        5434727753      L1-dcache-loads:u                                           
        1338322735      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10700013706      armv8_pmuv3_0/l1i_cache/:u                                   

      36.290732176 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2449273344
starting receive base loop
num_worker_connections 85
Creating worker on tid 1679749632
starting receive base loop
num_worker_connections 85
Creating worker on tid 914747904
starting receive base loop
num_worker_connections 85
Creating worker on tid 152367616
starting receive base loop
num_worker_connections 85
Creating worker on tid 3684954624
starting receive base loop
Created 512 connections total
Creating worker on tid 2919952896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316951.315376,       0.0,      385199,     346738,      38461,     233002,     113736,  33.911971,  78.300000,  91.700000, 135.200000,  33.112937,   0.000000, 378.087014, 487.757001
Outstanding requests per worker:
761 754 757 780 792 772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166950.8,      834755,     751767,      82988,     572081,     179686,  24.855815,  58.100000,  73.900000,  92.800000,  21.071377,   0.642000, 195.390999, 586.101058
Outstanding requests per worker:
519 630 544 499 593 509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166730.4,      833653,     750447,      83206,     602449,     147998,  18.124443,  29.900000,  38.800000,  53.500000,  10.430141,   0.466000, 103.155002, 632.025269
Outstanding requests per worker:
497 486 517 527 498 498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166662.6,      833314,     749545,      83769,     619000,     130545,  18.649571,  31.100000,  39.900000,  55.000000,  10.743274,   0.712000, 103.698000, 657.205056
Outstanding requests per worker:
523 492 458 505 532 591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166670.0,      833351,     750161,      83190,     631019,     119142,  19.354204,  32.000000,  42.200000,  58.000000,  11.313331,   0.893000, 111.828998, 674.656787
Outstanding requests per worker:
542 548 496 535 518 535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166654.0,      833271,     750033,      83238,     639179,     110854,  19.436739,  32.000000,  42.100000,  57.600000,  11.191582,   0.601000, 109.958999, 686.202675
Outstanding requests per worker:
526 602 529 554 520 603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166103.2,      830517,     747480,      83037,     643062,     104418,  23.872095,  47.200000,  61.700000,  84.600000,  17.066022,   0.610000, 161.836997, 694.601929
Outstanding requests per worker:
1087 1012 1080 958 1020 1049 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:36   0:00 /usr/lib/linux
memcache      8  341  0.0 518272 158208 pts/0   Sl+  19:36   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20642008406      instructions:u                                              
         405117690      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        5452498841      L1-dcache-loads:u                                           
        1335814016      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10705306417      armv8_pmuv3_0/l1i_cache/:u                                   

      37.559737744 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1868558848
starting receive base loop
num_worker_connections 85
Creating worker on tid 1091891712
starting receive base loop
num_worker_connections 85
Creating worker on tid 329511424
starting receive base loop
num_worker_connections 85
Creating worker on tid 3859476992
starting receive base loop
num_worker_connections 85
Creating worker on tid 3097096704
starting receive base loop
Created 512 connections total
Creating worker on tid 2332094976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575316993.315418,       0.0,      382308,     344311,      37997,     230778,     113533,  63.020300, 118.100000, 134.800000, 200.100000,  46.439865,   0.000000, 413.536012, 486.567952
Outstanding requests per worker:
2395 2487 2451 2538 2526 2467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170348.6,      851744,     767038,      84706,     584419,     182619, 102.987958, 168.600000, 194.500000, 247.800000,  48.076358,   1.331000, 406.455994, 586.796350
Outstanding requests per worker:
3303 3227 3365 3428 3592 3396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170841.6,      854209,     768702,      85507,     617256,     151446, 127.309159, 203.700000, 238.300000, 303.300000,  56.149008,   1.986000, 480.316013, 632.726773
Outstanding requests per worker:
3646 3579 4095 3970 3919 4101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170993.4,      854968,     769875,      85093,     636174,     133701, 143.008632, 238.600000, 277.700000, 360.100000,  68.434721,   1.535000, 603.141010, 658.002478
Outstanding requests per worker:
3914 3928 4172 4559 4485 4505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171057.0,      855286,     770051,      85235,     647951,     122100, 156.034994, 259.700000, 307.100000, 411.500000,  75.297235,   2.446000, 700.195014, 674.762562
Outstanding requests per worker:
4269 4323 4894 4736 4682 4621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170912.0,      854561,     769085,      85476,     655921,     113164, 167.425173, 293.700000, 355.400000, 469.600000,  88.881486,   2.163000, 742.060006, 686.393525
Outstanding requests per worker:
4565 4488 5103 5181 5497 5322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170617.8,      853090,     767572,      85518,     661699,     105873, 185.993797, 327.000000, 408.000000, 559.000000, 103.077644,   3.363000, 790.713012, 697.883045
Outstanding requests per worker:
5212 5273 5684 5838 6058 6210 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  19:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:36   0:00 /usr/lib/linux
memcache      7  341  0.0 521344 172736 pts/0   Sl+  19:36   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21549547442      instructions:u                                              
         427636670      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        5791943924      L1-dcache-loads:u                                           
        1378361900      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11193624108      armv8_pmuv3_0/l1i_cache/:u                                   

      37.591771552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1860563456
starting receive base loop
num_worker_connections 85
Creating worker on tid 1083830784
starting receive base loop
num_worker_connections 85
Creating worker on tid 318829056
starting receive base loop
num_worker_connections 85
Creating worker on tid 3851416064
starting receive base loop
num_worker_connections 85
Creating worker on tid 3089035776
starting receive base loop
Created 512 connections total
Creating worker on tid 2324034048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317035.315460,       0.0,      384636,     346386,      38250,     232231,     114155,  62.390248, 118.000000, 135.400000, 209.000000,  46.513949,   0.000000, 417.502999, 486.675221
Outstanding requests per worker:
2458 2464 2575 2519 2448 2812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169896.0,      849481,     764765,      84716,     581107,     183658, 115.806830, 179.300000, 203.200000, 256.600000,  47.567518,   1.831000, 420.343995, 584.860224
Outstanding requests per worker:
3735 3582 3818 3989 3932 3972 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170574.0,      852871,     767615,      85256,     616684,     150931, 148.893392, 229.000000, 258.700000, 323.900000,  59.549434,   2.783000, 499.976009, 632.571800
Outstanding requests per worker:
4448 4139 4598 4695 4811 4676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170607.0,      853036,     767675,      85361,     634692,     132983, 172.153831, 274.100000, 314.500000, 393.100000,  73.899311,   4.079000, 619.055986, 658.230723
Outstanding requests per worker:
4929 4821 5322 5413 5579 5461 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170877.4,      854388,     769089,      85299,     647349,     121740, 194.248271, 316.300000, 369.300000, 475.000000,  89.301968,   2.960000, 722.419024, 674.911377
Outstanding requests per worker:
5362 5059 6054 5877 6136 5861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170727.8,      853640,     768618,      85022,     655957,     112661, 209.832074, 357.300000, 436.800000, 571.400000, 106.946813,   2.428000, 755.595982, 687.757777
Outstanding requests per worker:
5752 5626 6598 6555 6760 6650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170362.4,      851813,     766539,      85274,     661229,     105310, 235.363382, 409.700000, 528.100000, 683.200000, 130.931991,   5.955000, 890.836000, 697.371549
Outstanding requests per worker:
6528 6456 7438 7547 7615 7792 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:37   0:00 /usr/lib/linux
memcache      7  351  0.0 521344 167552 pts/0   Sl+  19:37   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21596190813      instructions:u                                              
         426214818      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        5781388746      L1-dcache-loads:u                                           
        1372661756      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11116681070      armv8_pmuv3_0/l1i_cache/:u                                   

      37.501656442 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2093216256
starting receive base loop
num_worker_connections 85
Creating worker on tid 1317401088
starting receive base loop
num_worker_connections 85
Creating worker on tid 555020800
starting receive base loop
num_worker_connections 85
Creating worker on tid 4087607808
starting receive base loop
num_worker_connections 85
Creating worker on tid 3322606080
starting receive base loop
Created 512 connections total
Creating worker on tid 2560225792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317075.315500,       0.0,      381768,     343554,      38214,     230833,     112721,  79.004525, 142.100000, 174.700000, 355.400000,  70.749699,   0.000000, 787.208021, 488.839338
Outstanding requests per worker:
3205 3078 3196 3220 3345 4418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174509.8,      872550,     785045,      87505,     597341,     187704, 148.320266, 225.600000, 259.900000, 342.000000,  60.236657,   2.437000, 605.490983, 586.369781
Outstanding requests per worker:
4784 4656 5084 5412 5195 5231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175360.0,      876801,     788775,      88026,     635006,     153769, 187.731704, 294.200000, 343.100000, 456.400000,  80.292578,   3.896000, 782.163024, 634.320312
Outstanding requests per worker:
5712 5548 6008 6319 6278 6177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175184.4,      875923,     787526,      88397,     651771,     135755, 221.194567, 374.500000, 446.300000, 624.700000, 110.436173,   3.863000, 955.118001, 659.981490
Outstanding requests per worker:
6576 6312 7232 7297 7804 7311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175023.8,      875120,     787487,      87633,     664252,     123235, 260.637998, 469.300000, 564.400000, 752.300000, 142.411221,  14.068000, 1025.048971, 676.714958
Outstanding requests per worker:
7600 7516 8606 8647 8532 8956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175339.2,      876697,     789148,      87549,     674466,     114682, 297.788586, 578.500000, 687.300000, 908.900000, 179.392747,  25.067000, 1227.797985, 689.157766
Outstanding requests per worker:
8192 8106 9836 9948 9299 10201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174659.0,      873296,     785184,      88112,     678318,     106866, 344.310086, 669.100000, 813.900000, 1096.900000, 212.634975,   3.386000, 1426.834941, 699.207348
Outstanding requests per worker:
9501 9531 11545 11624 10676 11879 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:38   0:00 /usr/lib/linux
memcache      7  360  0.0 523392 167552 pts/0   Sl+  19:38   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21974450716      instructions:u                                              
         438759712      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        5896827642      L1-dcache-loads:u                                           
        1394406769      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11354467446      armv8_pmuv3_0/l1i_cache/:u                                   

      36.321114743 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1587606016
starting receive base loop
num_worker_connections 85
Creating worker on tid 815395328
starting receive base loop
num_worker_connections 85
Creating worker on tid 50393600
starting receive base loop
num_worker_connections 85
Creating worker on tid 3582980608
starting receive base loop
num_worker_connections 85
Creating worker on tid 2820600320
starting receive base loop
Created 512 connections total
Creating worker on tid 2055598592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317117.315542,       0.0,      386845,     348384,      38461,     234336,     114048,  77.197190, 139.700000, 166.200000, 322.500000,  64.573272,   0.000000, 689.050972, 489.158991
Outstanding requests per worker:
3297 3283 3396 3327 3477 4113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174170.8,      870855,     783758,      87097,     597109,     186649, 155.367095, 235.500000, 270.500000, 351.000000,  61.165513,   2.301000, 597.036004, 586.490785
Outstanding requests per worker:
4996 5056 5623 5563 5524 5679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174684.8,      873425,     785965,      87460,     632685,     153280, 209.298883, 336.000000, 406.200000, 526.700000,  94.251862,  14.125000, 751.932979, 634.358845
Outstanding requests per worker:
6233 6380 7535 7009 7075 7183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174655.0,      873276,     786006,      87270,     650663,     135343, 257.393864, 440.100000, 537.700000, 703.700000, 130.507567,  15.429000, 1059.772968, 659.090852
Outstanding requests per worker:
7360 7441 9233 8770 8990 8746 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174846.0,      874231,     787267,      86964,     663634,     123633, 308.808595, 558.300000, 677.300000, 912.700000, 170.298124,  26.597001, 1361.178041, 676.508312
Outstanding requests per worker:
8384 8304 10788 10152 10744 10334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174573.8,      872870,     785839,      87031,     670944,     114895, 357.518977, 683.200000, 811.700000, 1121.200000, 215.684785,  16.900999, 1477.560043, 687.990380
Outstanding requests per worker:
9569 9714 12262 12161 12396 12132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173633.2,      868167,     781243,      86924,     674253,     106990, 424.703679, 812.400000, 993.100000, 1311.300000, 263.913093,  28.232999, 1778.298974, 698.258018
Outstanding requests per worker:
11299 11680 14854 14630 15055 14952 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:38   0:00 /usr/lib/linux
memcache      7  341  0.0 522368 169024 pts/0   Sl+  19:38   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21876086491      instructions:u                                              
         426509721      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        5862838168      L1-dcache-loads:u                                           
        1387769660      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11262290205      armv8_pmuv3_0/l1i_cache/:u                                   

      37.370266399 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2396647936
starting receive base loop
num_worker_connections 85
Creating worker on tid 1620701696
starting receive base loop
num_worker_connections 85
Creating worker on tid 855699968
starting receive base loop
num_worker_connections 85
Creating worker on tid 93319680
starting receive base loop
num_worker_connections 85
Creating worker on tid 3625906688
starting receive base loop
Created 512 connections total
Creating worker on tid 2860904960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317159.315584,       0.0,      385121,     346764,      38357,     232642,     114122,  80.829707, 142.600000, 174.200000, 333.100000,  64.676042,   0.000000, 656.576991, 486.221975
Outstanding requests per worker:
3417 3368 3595 3463 3456 4484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173868.0,      869341,     782583,      86758,     596079,     186504, 165.214891, 247.400000, 284.800000, 369.600000,  63.126891,   4.957000, 559.610009, 586.892319
Outstanding requests per worker:
5607 5481 5917 5936 5860 6081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174199.6,      870999,     783330,      87669,     631175,     152155, 230.420977, 372.500000, 431.800000, 558.900000, 100.867090,   6.646000, 851.015985, 635.137983
Outstanding requests per worker:
7050 7100 7751 8038 8138 8264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174403.6,      872019,     784727,      87292,     649091,     135636, 291.965386, 483.500000, 587.500000, 785.500000, 141.603731,  31.699002, 1089.403987, 659.308808
Outstanding requests per worker:
8440 8121 9771 10236 10061 10096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174300.4,      871503,     784859,      86644,     661556,     123303, 350.105864, 638.000000, 766.300000, 993.100000, 192.090090,  19.133000, 1359.176040, 676.204593
Outstanding requests per worker:
9625 9288 11766 12672 12129 12165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174074.4,      870373,     783483,      86890,     669032,     114451, 415.059460, 766.400000, 924.900000, 1186.900000, 235.164055,  40.752999, 1581.500053, 687.898802
Outstanding requests per worker:
10947 10774 14170 14757 14497 14566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173503.2,      867517,     780622,      86895,     673475,     107147, 488.606247, 939.000000, 1114.200000, 1357.100000, 287.137008,  34.368001, 1779.603004, 698.058965
Outstanding requests per worker:
12939 12691 16855 17578 17154 17442 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:39   0:00 /usr/lib/linux
memcache      7  350  0.0 523392 179072 pts/0   Sl+  19:39   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21904426121      instructions:u                                              
         421428963      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        5859183219      L1-dcache-loads:u                                           
        1387640349      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11272089137      armv8_pmuv3_0/l1i_cache/:u                                   

      37.551768952 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2573988352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1975185920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
Created 512 connections total
Creating worker on tid 2694640128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317200.315625,       0.0,      359621,     323550,      36071,     216513,     107037,  12.426336,  27.000000,  36.000000,  71.000000,  14.311391,   0.000000, 240.445003, 484.226855
Outstanding requests per worker:
176 179 191 194 199 189 175 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150959.2,      754797,     679897,      74900,     513847,     166050,   9.854530,  18.600000,  22.200000,  29.000000,   6.346928,   0.173000,  53.672001, 580.291324
Outstanding requests per worker:
184 217 176 179 188 175 173 212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150932.2,      754662,     679247,      75415,     540925,     138322,  10.339782,  19.600000,  23.200000,  31.500000,   6.767980,   0.190000,  69.885999, 625.591935
Outstanding requests per worker:
209 192 211 202 190 210 189 195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150953.2,      754767,     679188,      75579,     557626,     121562,  10.659338,  20.100000,  24.000000,  32.300000,   6.950458,   0.181000,  72.159000, 651.630077
Outstanding requests per worker:
204 207 223 218 180 194 203 181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.6,      754719,     678970,      75749,     568044,     110926,  10.914745,  20.700000,  24.600000,  32.700000,   7.133077,   0.192000,  73.596001, 669.290497
Outstanding requests per worker:
229 218 177 213 188 206 201 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150947.8,      754740,     679276,      75464,     575658,     103618,  11.156080,  21.100000,  24.900000,  34.400000,   7.296471,   0.196000,  70.234001, 680.652567
Outstanding requests per worker:
227 199 215 218 217 224 206 224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150952.8,      754765,     679522,      75243,     581628,      97894,  11.394952,  21.600000,  25.400000,  35.300000,   7.490094,   0.190000,  74.414998, 690.871798
Outstanding requests per worker:
212 211 217 240 188 202 240 214 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:40   0:00 /usr/lib/linux
memcache      7  361  0.0 444096 145024 pts/0   Sl+  19:40   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18557709494      instructions:u                                              
         383057598      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        4868267593      L1-dcache-loads:u                                           
        1239312246      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9755400639      armv8_pmuv3_0/l1i_cache/:u                                   

      36.181247615 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2488857088
starting receive base loop
num_worker_connections 64
Creating worker on tid 1897394688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
Created 512 connections total
Creating worker on tid 2619470336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317242.315667,       0.0,      462517,     416159,      46358,     283086,     133073,   8.852626,  20.600000,  25.900000,  45.000000,  11.779284,   0.000000, 193.516001, 496.385175
Outstanding requests per worker:
210 212 241 184 211 249 200 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153836.2,      769182,     692627,      76555,     529898,     162729,  11.514889,  21.400000,  25.900000,  34.900000,   7.464466,   0.187000,  68.092003, 590.306852
Outstanding requests per worker:
210 225 214 211 203 225 257 253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153827.8,      769140,     692542,      76598,     556081,     136461,  12.247193,  22.500000,  27.500000,  37.100000,   7.940309,   0.189000,  79.434998, 632.443650
Outstanding requests per worker:
217 218 239 286 227 243 253 254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153844.6,      769224,     691903,      77321,     569745,     122158,  12.833075,  23.300000,  28.600000,  39.800000,   8.337086,   0.202000,  78.588001, 655.312947
Outstanding requests per worker:
284 258 225 266 223 257 222 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.2,      769247,     692560,      76687,     580651,     111909,  13.204983,  24.000000,  29.500000,  40.300000,   8.550436,   0.191000,  84.880002, 671.537298
Outstanding requests per worker:
276 223 274 238 207 254 284 263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153827.8,      769140,     692165,      76975,     588040,     104125,  13.677668,  24.300000,  30.700000,  41.400000,   8.797057,   0.237000,  84.688999, 683.430322
Outstanding requests per worker:
253 269 291 274 232 250 293 288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.6,      769274,     692075,      77199,     594029,      98046,  13.743114,  24.400000,  30.700000,  41.800000,   8.846685,   0.185000,  84.696002, 692.449012
Outstanding requests per worker:
291 233 294 268 262 266 287 255 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:41   0:00 /usr/lib/linux
memcache      7  360  0.0 447168 144128 pts/0   Sl+  19:41   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19389273808      instructions:u                                              
         396937654      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        5080752387      L1-dcache-loads:u                                           
        1293761963      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10193467515      armv8_pmuv3_0/l1i_cache/:u                                   

      37.221389626 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2447634944
starting receive base loop
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
Created 512 connections total
Creating worker on tid 2568483328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317284.315709,       0.0,      485467,     436699,      48768,     298776,     137923,  11.449396,  25.100000,  32.400000,  67.300000,  16.999526,   0.000000, 346.111000, 501.196078
Outstanding requests per worker:
256 273 257 309 258 273 295 259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156850.8,      784255,     705854,      78401,     541914,     163940,  14.038942,  24.700000,  31.200000,  42.900000,   8.989435,   0.235000,  85.267998, 592.766483
Outstanding requests per worker:
282 309 261 274 314 269 301 320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.8,      784275,     705978,      78297,     568042,     137936,  14.866729,  26.000000,  32.900000,  45.500000,   9.509217,   0.219000,  84.335998, 633.771106
Outstanding requests per worker:
292 301 322 336 304 304 324 279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156881.2,      784407,     705846,      78561,     582796,     123050,  15.533181,  27.200000,  34.600000,  47.900000,  10.008227,   0.267000,  93.408003, 657.299500
Outstanding requests per worker:
276 298 264 280 339 305 311 341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156852.6,      784264,     705828,      78436,     593211,     112617,  15.998822,  28.200000,  35.500000,  49.900000,  10.384396,   0.283000, 100.543000, 673.526696
Outstanding requests per worker:
292 324 349 312 291 330 344 300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156890.8,      784455,     705914,      78541,     600304,     105610,  15.944338,  27.400000,  35.400000,  48.600000,  10.167589,   0.190000,  90.001002, 684.311742
Outstanding requests per worker:
312 318 269 321 288 359 294 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.6,      784314,     705782,      78532,     606410,      99372,  16.235942,  28.000000,  35.800000,  50.000000,  10.374303,   0.286000,  94.993003, 694.466338
Outstanding requests per worker:
307 300 352 356 277 288 300 336 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:41   0:00 /usr/lib/linux
memcache      7  361  0.0 449216 155712 pts/0   Sl+  19:41   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19879252547      instructions:u                                              
         405693397      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        5219861136      L1-dcache-loads:u                                           
        1309272803      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10380552293      armv8_pmuv3_0/l1i_cache/:u                                   

      37.250235850 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2183131648
starting receive base loop
num_worker_connections 64
Creating worker on tid 1588654592
starting receive base loop
num_worker_connections 64
Creating worker on tid 992735744
starting receive base loop
num_worker_connections 64
Creating worker on tid 396816896
starting receive base loop
num_worker_connections 64
Creating worker on tid 4095865344
starting receive base loop
num_worker_connections 64
Creating worker on tid 3499946496
starting receive base loop
num_worker_connections 64
Creating worker on tid 2904027648
starting receive base loop
Created 512 connections total
Creating worker on tid 2310730240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317324.315749,       0.0,      376144,     338294,      37850,     227187,     111107,  21.048011,  54.000000,  73.000000, 100.200000,  24.242757,   0.000000, 336.573988, 487.287144
Outstanding requests per worker:
370 392 374 372 404 419 391 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157025.0,      785126,     706683,      78443,     535983,     170700,  15.281332,  27.900000,  35.800000,  56.400000,  11.087443,   0.243000, 128.505006, 583.251462
Outstanding requests per worker:
324 294 265 293 287 264 357 297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.8,      784310,     706141,      78169,     565908,     140233,  15.656816,  27.800000,  34.900000,  49.000000,  10.244904,   0.230000,  98.871000, 630.427080
Outstanding requests per worker:
294 310 315 341 302 286 287 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.2,      784307,     705594,      78713,     580224,     125370,  16.077901,  28.300000,  35.800000,  49.900000,  10.454701,   0.285000,  96.717998, 653.944090
Outstanding requests per worker:
314 300 344 310 309 312 308 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156342.4,      781713,     703292,      78421,     589468,     113824,  23.866412,  56.400000,  78.900000, 107.200000,  23.247182,   0.293000, 209.317997, 670.950410
Outstanding requests per worker:
661 620 604 626 578 673 678 736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156605.8,      783030,     704861,      78169,     598654,     106207,  37.017620, 106.300000, 133.400000, 173.400000,  42.291558,   0.298000, 296.151012, 683.185400
Outstanding requests per worker:
745 841 843 744 816 855 767 943 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156828.0,      784141,     705909,      78232,     605835,     100074,  42.052750, 128.500000, 152.000000, 195.200000,  49.905806,   0.332000, 298.420995, 693.122156
Outstanding requests per worker:
820 852 861 905 856 832 806 847 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:42   0:00 /usr/lib/linux
memcache      7  362  0.0 448192 153344 pts/0   Sl+  19:42   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19487779553      instructions:u                                              
         385077788      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        5135765562      L1-dcache-loads:u                                           
        1264253903      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10141914544      armv8_pmuv3_0/l1i_cache/:u                                   

      36.060575144 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1944121856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
num_worker_connections 64
Creating worker on tid 2670457344
starting receive base loop
Created 512 connections total
Creating worker on tid 2074538496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317366.315791,       0.0,      379982,     341969,      38013,     229736,     112233,  29.403284,  72.700000,  89.100000, 134.100000,  32.122188,   0.000000, 419.676006, 487.829517
Outstanding requests per worker:
598 631 549 571 594 581 522 598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159676.8,      798385,     719307,      79078,     546089,     173218,  35.273441,  99.700000, 124.200000, 159.000000,  39.219389,   0.264000, 249.300003, 584.502381
Outstanding requests per worker:
784 852 762 752 801 824 740 801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159796.2,      798982,     718719,      80263,     575982,     142737,  42.710254, 127.700000, 153.600000, 205.500000,  50.561688,   0.285000, 370.178998, 630.866663
Outstanding requests per worker:
905 1019 935 823 972 1024 868 855 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159870.0,      799351,     719736,      79615,     592576,     127160,  48.116611, 149.600000, 178.900000, 228.800000,  58.997755,   0.337000, 352.836996, 654.889509
Outstanding requests per worker:
1073 968 1068 1084 1023 1074 936 920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159793.2,      798967,     718822,      80145,     603297,     115525,  52.503375, 163.000000, 196.900000, 255.800000,  65.706343,   0.341000, 384.721994, 672.243216
Outstanding requests per worker:
1237 1272 1054 1187 1158 1144 1074 1153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159755.0,      798776,     718966,      79810,     611678,     107288,  60.848049, 198.400000, 235.100000, 312.700000,  81.180780,   0.380000, 516.797006, 685.165962
Outstanding requests per worker:
1388 1373 1233 1307 1333 1356 1405 1171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159913.2,      799567,     719613,      79954,     618463,     101150,  67.715622, 226.600000, 269.100000, 337.400000,  91.853681,   0.371000, 598.224998, 693.469475
Outstanding requests per worker:
1348 1378 1377 1433 1209 1447 1509 1370 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:43   0:00 /usr/lib/linux
memcache      7  352  0.0 449216 158784 pts/0   Sl+  19:43   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19875809977      instructions:u                                              
         397230116      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        5271712716      L1-dcache-loads:u                                           
        1289506150      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10349808176      armv8_pmuv3_0/l1i_cache/:u                                   

      37.471070722 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2564813312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1972564480
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
Created 512 connections total
Creating worker on tid 2694640128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317407.315832,       0.0,      378878,     340902,      37976,     228616,     112286,  28.025557,  68.900000,  83.800000, 121.800000,  29.193310,   0.000000, 343.075991, 487.078439
Outstanding requests per worker:
494 526 485 500 521 482 583 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159670.4,      798353,     718525,      79828,     545465,     173060,  31.801992,  86.300000, 105.100000, 144.900000,  33.833291,   0.275000, 259.783000, 584.484096
Outstanding requests per worker:
758 685 708 741 717 699 757 855 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159789.4,      798948,     719153,      79795,     576017,     143136,  40.064416, 118.800000, 143.100000, 184.400000,  46.053439,   0.288000, 311.630994, 630.029044
Outstanding requests per worker:
845 883 1028 847 931 843 849 845 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159887.2,      799437,     719283,      80154,     592461,     126822,  45.693018, 139.300000, 164.600000, 211.700000,  54.464098,   0.319000, 340.359986, 655.039913
Outstanding requests per worker:
1019 941 899 996 951 925 1081 877 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159937.2,      799687,     719718,      79969,     604082,     115636,  48.919900, 150.800000, 178.000000, 223.900000,  58.950135,   0.316000, 349.220008, 672.026226
Outstanding requests per worker:
966 1009 975 1060 1065 892 1090 1001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159926.6,      799634,     719163,      80471,     611760,     107403,  51.916747, 161.400000, 191.900000, 239.100000,  63.611113,   0.297000, 372.574002, 684.968525
Outstanding requests per worker:
1109 942 1147 1045 1053 1025 1160 1024 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159844.8,      799225,     719282,      79943,     617830,     101452,  54.613961, 170.900000, 204.300000, 256.800000,  67.868400,   0.268000, 369.666010, 693.982573
Outstanding requests per worker:
1160 1222 1141 1167 1132 1254 1118 1176 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  19:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:43   0:00 /usr/lib/linux
memcache      7  342  0.0 450240 154944 pts/0   Sl+  19:43   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19867075413      instructions:u                                              
         393968157      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        5264965847      L1-dcache-loads:u                                           
        1286696018      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10327493538      armv8_pmuv3_0/l1i_cache/:u                                   

      37.350422059 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2448486912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1857090048
starting receive base loop
num_worker_connections 64
Creating worker on tid 1261171200
starting receive base loop
num_worker_connections 64
Creating worker on tid 665252352
starting receive base loop
num_worker_connections 64
Creating worker on tid 69333504
starting receive base loop
num_worker_connections 64
Creating worker on tid 3768381952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3172463104
starting receive base loop
Created 512 connections total
Creating worker on tid 2579165696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317450.315875,       0.0,      485538,     437226,      48312,     298795,     138431,  23.128657,  67.500000,  86.200000, 121.900000,  28.959994,   0.000000, 260.462999, 500.213318
Outstanding requests per worker:
923 816 858 828 882 848 822 897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162115.0,      810576,     729691,      80885,     560029,     169662,  59.034960, 147.900000, 179.800000, 243.000000,  58.517363,   0.365000, 379.914999, 592.984973
Outstanding requests per worker:
1671 1649 1510 1593 1540 1538 1577 1597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162378.6,      811894,     730747,      81147,     588238,     142509,  90.715928, 225.000000, 266.700000, 347.000000,  89.587050,   0.462000, 578.392029, 634.262854
Outstanding requests per worker:
2193 2121 2172 1990 2222 2230 2138 2115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161958.4,      809793,     728596,      81197,     602823,     125773, 123.141294, 287.500000, 344.100000, 475.900000, 116.360971,   0.423000, 887.323022, 659.022318
Outstanding requests per worker:
2912 2877 2939 2930 3116 2995 3060 2974 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162293.0,      811466,     729908,      81558,     613707,     116201, 160.883673, 351.200000, 440.200000, 605.700000, 138.382140,   0.485000, 953.917027, 673.476235
Outstanding requests per worker:
3437 3754 3588 3464 3606 3492 3746 3686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161891.4,      809458,     728490,      80968,     620544,     107946, 194.358741, 419.500000, 525.300000, 766.500000, 159.431703,   0.427000, 1019.893050, 685.775647
Outstanding requests per worker:
4438 4519 4513 4054 4670 4335 4706 4458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161305.4,      806528,     725787,      80741,     624175,     101612, 238.492932, 491.100000, 625.000000, 828.300000, 172.923510,   0.661000, 1224.184036, 695.003046
Outstanding requests per worker:
5601 5622 5662 5379 5757 5616 6097 5831 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:44   0:00 /usr/lib/linux
memcache      7  351  0.0 516224 167040 pts/0   Sl+  19:44   2:13 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20794046023      instructions:u                                              
         414227895      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        5546400835      L1-dcache-loads:u                                           
        1346283473      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10839456379      armv8_pmuv3_0/l1i_cache/:u                                   

      38.510338432 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2619732480
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317491.315916,       0.0,      379097,     341349,      37748,     228736,     112613,  67.209991, 132.500000, 150.600000, 212.200000,  52.738983,   0.000000, 435.070008, 485.796437
Outstanding requests per worker:
2321 2380 2379 2218 2374 2265 2307 2597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163421.6,      817109,     735483,      81626,     558547,     176936, 165.906720, 256.100000, 293.800000, 383.100000,  68.546032,   1.040000, 589.461029, 584.457608
Outstanding requests per worker:
4408 4419 4188 4431 4319 4228 4619 4528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164224.0,      821121,     738782,      82339,     592686,     146096, 245.864230, 379.000000, 452.900000, 614.100000, 104.590306,   7.069000, 894.261003, 631.861629
Outstanding requests per worker:
5696 5843 5980 5906 6114 5835 6009 6028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164038.4,      820193,     738150,      82043,     608342,     129808, 321.735693, 553.100000, 651.100000, 832.500000, 155.655527,  18.964000, 1107.398987, 655.745493
Outstanding requests per worker:
7554 7575 7699 7502 7485 7878 7506 7404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164259.8,      821300,     739303,      81997,     621462,     117841, 395.988784, 723.600000, 853.100000, 1028.200000, 209.451547,  42.413998, 1261.412024, 673.304457
Outstanding requests per worker:
9223 9233 9093 8893 9163 9601 8721 8774 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164245.8,      821230,     739491,      81739,     628448,     111043, 470.637383, 901.800000, 1039.700000, 1235.500000, 264.182280,  43.958999, 1518.079042, 684.026694
Outstanding requests per worker:
10834 10703 10771 10332 10434 10999 10313 10497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163510.4,      817553,     735682,      81871,     633313,     102369, 547.289354, 1091.400000, 1220.800000, 1432.400000, 321.569527,  58.116000, 1707.715988, 695.644953
Outstanding requests per worker:
12996 12597 12538 12205 12668 13172 12200 12347 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:45   0:00 /usr/lib/linux
memcache      7  361  0.0 516224 160896 pts/0   Sl+  19:45   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20667097965      instructions:u                                              
         407879324      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        5521532783      L1-dcache-loads:u                                           
        1311496035      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10632178055      armv8_pmuv3_0/l1i_cache/:u                                   

      36.090684479 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2386031104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317533.315958,       0.0,      493544,     444174,      49370,     305019,     139155,  38.050813,  97.200000, 118.900000, 160.000000,  42.355348,   0.000000, 348.078012, 503.938756
Outstanding requests per worker:
1843 1792 1817 1862 1931 1834 1908 2036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163304.6,      816524,     734722,      81802,     564715,     170007, 146.833095, 233.500000, 272.000000, 345.400000,  65.755496,   0.895000, 570.254982, 594.196446
Outstanding requests per worker:
4129 3819 4109 3794 3774 4208 4024 4081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164197.2,      820987,     739139,      81848,     595956,     143183, 228.776923, 373.900000, 450.900000, 604.900000, 108.399315,   2.954000, 878.700972, 635.614414
Outstanding requests per worker:
5618 5654 5547 5390 5205 5589 5714 5626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164200.2,      821002,     738903,      82099,     611810,     127093, 301.438784, 541.100000, 647.100000, 829.500000, 157.864288,   7.808000, 1086.982012, 660.044697
Outstanding requests per worker:
7308 7510 6968 6950 7003 6731 7313 6956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164371.8,      821860,     739570,      82290,     622496,     117074, 372.926474, 676.600000, 804.700000, 1009.800000, 200.573525,  26.720000, 1249.035954, 675.851460
Outstanding requests per worker:
8762 8977 8427 8705 8421 8184 8586 8237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164237.2,      821187,     739512,      81675,     631118,     108394, 443.479505, 826.300000, 975.500000, 1180.200000, 245.911175,  18.278001, 1445.651054, 687.925477
Outstanding requests per worker:
10374 10351 9708 10222 9753 9996 10433 9702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163373.6,      816869,     735306,      81563,     633582,     101724, 524.512646, 998.900000, 1190.200000, 1389.700000, 304.341103,  32.896001, 1689.443946, 696.747455
Outstanding requests per worker:
12585 12586 11760 12250 11443 12360 12434 11642 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:45   0:00 /usr/lib/linux
memcache      7  361  0.0 519296 166592 pts/0   Sl+  19:45   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21080828048      instructions:u                                              
         421799104      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        5631423914      L1-dcache-loads:u                                           
        1351639117      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10899766620      armv8_pmuv3_0/l1i_cache/:u                                   

      37.421660858 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2367681024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1773859328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
Created 512 connections total
Creating worker on tid 2493313536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317574.315999,       0.0,      385667,     346946,      38721,     233124,     113822,  76.578897, 149.200000, 176.600000, 293.900000,  65.029123,   0.000000, 578.538001, 487.611651
Outstanding requests per worker:
2651 2898 2718 2749 3054 2770 2750 3440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165531.0,      827656,     744848,      82808,     567015,     177833, 209.720962, 316.800000, 359.900000, 461.800000,  80.867458,   3.960000, 629.651010, 585.951724
Outstanding requests per worker:
5870 5642 5842 5937 5772 5797 5721 5902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166297.0,      831486,     748346,      83140,     600498,     147848, 331.942052, 499.700000, 562.300000, 697.100000, 122.142839,  67.427002, 957.889974, 631.818009
Outstanding requests per worker:
8353 8208 8272 8434 8282 8373 8090 8166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166155.8,      830780,     747717,      83063,     616800,     130917, 445.975612, 698.700000, 797.800000, 949.100000, 176.750873,  77.821001, 1232.043982, 657.062968
Outstanding requests per worker:
10942 10562 10975 11293 10710 10897 10682 10445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165453.0,      827266,     744932,      82334,     626269,     118663, 573.283732, 905.600000, 1003.500000, 1198.300000, 227.241312,  96.383996, 1517.182946, 673.485035
Outstanding requests per worker:
13752 13779 14222 14409 13470 13561 13576 13610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164652.0,      823261,     740747,      82514,     629975,     110772, 726.671494, 1133.700000, 1251.600000, 1515.300000, 286.144858, 102.849998, 1898.972034, 684.925498
Outstanding requests per worker:
17134 17184 17792 17910 17150 17400 16876 16796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164138.6,      820694,     738568,      82126,     635088,     103480, 892.673230, 1332.400000, 1467.100000, 1740.600000, 324.507626, 123.391002, 2229.897976, 695.151814
Outstanding requests per worker:
20996 20811 21864 21578 20673 21277 20673 20783 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:46   0:00 /usr/lib/linux
memcache      7  343  0.0 517248 170560 pts/0   Sl+  19:46   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20802061821      instructions:u                                              
         408064981      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        5555457756      L1-dcache-loads:u                                           
        1317073619      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10716397271      armv8_pmuv3_0/l1i_cache/:u                                   

      37.472070520 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1992487424
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317616.316041,       0.0,      490076,     440870,      49206,     300395,     140475,  53.367451, 132.300000, 154.900000, 247.400000,  60.029247,   0.000000, 529.621005, 498.709654
Outstanding requests per worker:
2651 2848 2616 2673 2771 2748 2665 3263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164843.6,      824219,     741906,      82313,     570609,     171297, 212.853774, 328.200000, 381.000000, 487.000000,  87.097816,   1.731000, 707.845986, 595.087554
Outstanding requests per worker:
6333 6098 5993 6039 6040 6182 6099 6414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165846.6,      829234,     746574,      82660,     602490,     144084, 352.309742, 545.200000, 621.300000, 780.100000, 137.787290,  32.400001, 990.776002, 635.917724
Outstanding requests per worker:
9072 8797 8865 8851 8831 8919 8707 9047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165473.4,      827368,     744716,      82652,     616540,     128176, 482.619227, 771.200000, 868.800000, 1055.800000, 200.688827,  77.292003, 1472.012043, 659.647507
Outstanding requests per worker:
11916 11882 11883 11755 12028 11767 11948 11695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165013.6,      825069,     742034,      83035,     625479,     116555, 630.524623, 996.200000, 1147.300000, 1392.300000, 266.486696,  80.073997, 1828.420997, 676.061993
Outstanding requests per worker:
15092 15214 15370 15012 15273 14869 15301 14836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164551.0,      822756,     740581,      82175,     631864,     108717, 788.170849, 1244.100000, 1421.000000, 1716.500000, 328.375434, 134.074003, 2244.872093, 687.294775
Outstanding requests per worker:
18593 19004 18579 18473 18874 18699 18805 18370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163481.8,      817410,     735679,      81731,     633649,     102030, 962.541066, 1520.500000, 1703.300000, 2025.000000, 388.299843, 108.475998, 2526.037931, 696.299859
Outstanding requests per worker:
22472 23140 22958 22909 22921 22598 23283 22837 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:47   0:00 /usr/lib/linux
memcache      7  361  0.0 519296 169088 pts/0   Sl+  19:47   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21194430446      instructions:u                                              
         414255519      L1-dcache-load-misses:u   # [33m   7.34%[m of all L1-dcache hits  
        5642853304      L1-dcache-loads:u                                           
        1351823090      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10942095103      armv8_pmuv3_0/l1i_cache/:u                                   

      37.290713486 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2531324416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1932259840
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
Created 512 connections total
Creating worker on tid 2654335488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317658.316083,       0.0,      393224,     353747,      39477,     238068,     115679,  87.045763, 165.000000, 200.000000, 415.600000,  83.011726,   0.000000, 839.625001, 489.097649
Outstanding requests per worker:
3150 3243 3110 3286 3140 3242 3274 4851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167644.6,      838224,     755022,      83202,     575553,     179469, 251.781793, 376.400000, 433.200000, 599.300000, 104.675655,  10.868000, 1118.924975, 587.433374
Outstanding requests per worker:
7360 7264 7275 7086 7156 7229 7225 8084 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168255.6,      841279,     756820,      84459,     608924,     147896, 417.132961, 617.700000, 695.900000, 909.700000, 154.473956,  24.855999, 1360.216022, 633.938777
Outstanding requests per worker:
10959 10863 10682 10403 10756 10633 10884 11849 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168044.0,      840221,     756189,      84032,     624539,     131650, 581.464012, 857.100000, 968.400000, 1250.000000, 214.864237,  94.085000, 1608.222008, 657.884371
Outstanding requests per worker:
14619 14511 14338 13924 14254 14609 14552 15612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167484.2,      837422,     753973,      83449,     633368,     120605, 756.083309, 1122.200000, 1264.900000, 1550.100000, 276.226316, 138.616994, 2025.134087, 673.592886
Outstanding requests per worker:
18800 18471 18471 17865 18228 18644 18471 19663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166930.4,      834653,     751484,      83169,     640640,     110844, 951.292191, 1395.700000, 1553.400000, 1891.300000, 336.661806, 180.405006, 2333.436012, 686.776909
Outstanding requests per worker:
23430 22753 22528 22114 22445 23235 23110 23964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166010.2,      830052,     747003,      83049,     643124,     103879, 1163.408293, 1658.300000, 1870.300000, 2221.400000, 386.613247, 134.899005, 2558.048964, 696.169048
Outstanding requests per worker:
28004 27664 27661 26907 27269 28211 28272 29179 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:47   0:00 /usr/lib/linux
memcache      7  352  0.0 519296 169536 pts/0   Sl+  19:47   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21026396836      instructions:u                                              
         407794431      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        5615949252      L1-dcache-loads:u                                           
        1333474122      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10824866835      armv8_pmuv3_0/l1i_cache/:u                                   

      37.580846936 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1827336704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1234366976
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317699.316124,       0.0,      392013,     352532,      39481,     237192,     115340, 101.203422, 201.000000, 242.400000, 432.500000,  88.872810,   0.000000, 738.026977, 490.143303
Outstanding requests per worker:
4022 4115 4011 3872 3938 4259 4050 5735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168091.2,      840457,     756340,      84117,     576709,     179631, 327.771202, 511.000000, 581.000000, 722.300000, 133.063670,  18.161001, 1175.413013, 587.386478
Outstanding requests per worker:
10291 10092 10001 10199 9969 10290 10175 11502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167620.2,      838102,     753626,      84476,     605919,     147707, 601.652088, 873.900000, 968.100000, 1147.000000, 201.284704,  99.427000, 1443.390012, 633.359936
Outstanding requests per worker:
16690 16436 16253 16806 16464 16654 16339 17775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166701.2,      833507,     749934,      83573,     619684,     130250, 902.316128, 1268.700000, 1379.000000, 1603.500000, 267.811874, 200.573996, 2010.658979, 657.959847
Outstanding requests per worker:
23510 23514 23458 23761 23314 23512 23180 24602 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166109.2,      830547,     747230,      83317,     628897,     118333, 1221.639238, 1669.300000, 1816.700000, 2063.700000, 331.285226, 199.677005, 2455.677986, 674.660897
Outstanding requests per worker:
30682 31042 30632 31083 30661 30947 30076 32143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165702.2,      828512,     745649,      82863,     635898,     109751, 1555.745869, 2086.000000, 2268.200000, 2552.700000, 396.260171, 445.740998, 3051.295996, 686.981375
Outstanding requests per worker:
38096 38086 38497 38584 38211 38664 37825 39742 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164340.4,      821703,     739256,      82447,     636709,     102547, 1906.494050, 2533.100000, 2725.700000, 3058.500000, 448.349519, 689.745009, 3490.860939, 696.460483
Outstanding requests per worker:
46694 45961 47121 47121 46689 46952 46295 48171 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:48   0:00 /usr/lib/linux
memcache      7  362  0.0 519296 170112 pts/0   Sl+  19:48   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20967855197      instructions:u                                              
         405138967      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        5581726871      L1-dcache-loads:u                                           
        1319909043      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10758147948      armv8_pmuv3_0/l1i_cache/:u                                   

      36.360960388 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1949430272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
num_worker_connections 64
Creating worker on tid 2670457344
starting receive base loop
Created 512 connections total
Creating worker on tid 2074538496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317740.316165,       0.0,      386767,     347823,      38944,     233889,     113934, 105.582083, 203.500000, 243.400000, 489.100000,  95.506065,   0.000000, 814.261019, 488.980959
Outstanding requests per worker:
4175 4158 4125 4001 4116 4123 4165 6682 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167355.2,      836777,     753441,      83336,     574320,     179121, 348.052569, 529.500000, 604.200000, 800.200000, 139.896981,  20.225000, 1281.535029, 586.938087
Outstanding requests per worker:
10385 10833 10404 10657 11002 10670 10736 13019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167275.0,      836376,     752800,      83576,     605497,     147303, 636.833126, 895.200000, 987.300000, 1237.400000, 201.730716, 122.867003, 1744.454980, 633.413885
Outstanding requests per worker:
17096 17459 16855 17476 17691 16996 17407 19303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165784.0,      828921,     745863,      83058,     616504,     129359, 953.783404, 1290.700000, 1406.700000, 1698.700000, 263.019882, 151.934996, 2130.989075, 658.061198
Outstanding requests per worker:
24343 24938 24564 24577 25370 24632 25427 26480 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165101.8,      825510,     743230,      82280,     624805,     118425, 1301.302159, 1706.700000, 1857.800000, 2161.000000, 311.668673, 417.535007, 2507.515907, 673.586708
Outstanding requests per worker:
32475 32821 32325 32596 33497 32517 33150 34430 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164987.0,      824936,     742428,      82508,     632497,     109931, 1659.583592, 2124.200000, 2290.300000, 2618.100000, 355.626900, 612.999022, 3060.849905, 686.110281
Outstanding requests per worker:
40387 40732 40578 40348 41413 40404 41371 42657 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163935.8,      819680,     737587,      82093,     634435,     103152, 2027.634874, 2549.200000, 2747.400000, 3138.400000, 404.160269, 920.553029, 3524.940968, 694.815742
Outstanding requests per worker:
48891 49330 48844 49380 50177 49168 50288 51084 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:49   0:00 /usr/lib/linux
memcache      7  362  0.0 516224 169728 pts/0   Sl+  19:49   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20819068349      instructions:u                                              
         403837224      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        5547748326      L1-dcache-loads:u                                           
        1315540095      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10673975846      armv8_pmuv3_0/l1i_cache/:u                                   

      36.370998754 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1328411136
starting receive base loop
num_worker_connections 171
Creating worker on tid 4164809216
starting receive base loop
num_worker_connections 171
Creating worker on tid 2704536064
starting receive base loop
num_worker_connections 170
Creating worker on tid 1246884352
starting receive base loop
num_worker_connections 170
Creating worker on tid 4089639424
starting receive base loop
Created 1024 connections total
Creating worker on tid 2637427200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317781.316206,       0.0,      325994,     293538,      32456,     194714,      98824,  31.096565,  69.600000,  89.200000, 146.200000,  30.402433,   0.000000, 273.712993, 478.486005
Outstanding requests per worker:
357 382 383 347 385 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150010.4,      750053,     675420,      74633,     508986,     166434,  14.885982,  27.900000,  31.400000,  36.600000,   8.361360,   0.512000,  46.780001, 578.122978
Outstanding requests per worker:
375 374 392 351 361 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.2,      750032,     675126,      74906,     538479,     136647,  15.240535,  28.700000,  32.400000,  37.700000,   8.578399,   0.388000,  45.495000, 626.005378
Outstanding requests per worker:
389 384 394 354 388 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149994.5,      749973,     674883,      75090,     553006,     121877,  15.687058,  29.400000,  33.300000,  39.700000,   8.898234,   0.594000,  52.297000, 650.814452
Outstanding requests per worker:
394 405 408 366 384 438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150016.6,      750084,     675087,      74997,     563620,     111467,  15.908094,  29.700000,  33.900000,  40.600000,   9.058878,   0.534000,  51.718000, 667.459079
Outstanding requests per worker:
408 380 402 423 367 429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.8,      750035,     674950,      75085,     571714,     103236,  16.076758,  30.000000,  34.200000,  41.800000,   9.201270,   0.425000,  53.156000, 680.281347
Outstanding requests per worker:
423 396 438 417 375 386 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150008.4,      750043,     675138,      74905,     577290,      97848,  16.240334,  30.200000,  34.600000,  42.600000,   9.320697,   0.555000,  52.414000, 689.370508
Outstanding requests per worker:
409 412 401 411 413 408 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:50   0:00 /usr/lib/linux
memcache      7  357  0.0 440000 152384 pts/0   Sl+  19:50   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18268784282      instructions:u                                              
         393508053      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        4761048021      L1-dcache-loads:u                                           
        1247432718      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9701662535      armv8_pmuv3_0/l1i_cache/:u                                   

      36.370929118 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1367470592
starting receive base loop
num_worker_connections 171
Creating worker on tid 4207735296
starting receive base loop
num_worker_connections 171
Creating worker on tid 2747462144
starting receive base loop
num_worker_connections 170
Creating worker on tid 1287188992
starting receive base loop
num_worker_connections 170
Creating worker on tid 4129944064
starting receive base loop
Created 1024 connections total
Creating worker on tid 2680353280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317822.316247,       0.0,      328343,     295586,      32757,     195934,      99652,  48.602678,  87.300000, 129.500000, 455.500000,  89.654615,   0.000000, 1496.368051, 478.619962
Outstanding requests per worker:
496 496 560 511 475 895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153997.2,      769987,     693323,      76664,     524123,     169200,  17.590022,  32.500000,  37.500000,  45.800000,  13.033617,   0.654000, 760.567009, 579.876077
Outstanding requests per worker:
475 453 433 414 494 475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.6,      769254,     692716,      76538,     552987,     139729,  17.820857,  33.000000,  38.600000,  47.000000,  10.214358,   0.673000,  63.325003, 626.796351
Outstanding requests per worker:
464 454 484 473 472 428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.8,      769220,     692175,      77045,     567856,     124319,  18.268115,  33.800000,  39.800000,  48.100000,  10.485973,   0.658000,  60.247999, 651.782584
Outstanding requests per worker:
485 462 472 477 483 450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.6,      769229,     692067,      77162,     578296,     113771,  18.409374,  34.000000,  39.900000,  49.100000,  10.618667,   0.684000,  62.112998, 668.261782
Outstanding requests per worker:
464 491 498 451 517 457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153847.6,      769239,     692365,      76874,     587791,     104574,  18.727228,  34.600000,  41.000000,  49.300000,  10.775021,   0.653000,  82.709000, 682.032399
Outstanding requests per worker:
471 475 486 485 492 521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153862.6,      769314,     692366,      76948,     593572,      98794,  18.922063,  34.800000,  41.400000,  50.100000,  10.881807,   0.593000,  68.034001, 691.744439
Outstanding requests per worker:
494 467 488 482 471 490 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:50   0:00 /usr/lib/linux
memcache      7  357  0.0 445120 159296 pts/0   Sl+  19:50   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18793492380      instructions:u                                              
         391984005      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
        4916986153      L1-dcache-loads:u                                           
        1265683733      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9929722122      armv8_pmuv3_0/l1i_cache/:u                                   

      36.241498083 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 740618752
starting receive base loop
num_worker_connections 171
Creating worker on tid 3576951296
starting receive base loop
num_worker_connections 171
Creating worker on tid 2119299584
starting receive base loop
num_worker_connections 170
Creating worker on tid 659026432
starting receive base loop
num_worker_connections 170
Creating worker on tid 3501781504
starting receive base loop
Created 1024 connections total
Creating worker on tid 2049569280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317863.316288,       0.0,      333272,     300035,      33237,     198811,     101224,  70.666144, 148.900000, 186.400000, 486.200000,  96.848697,   0.000000, 1548.578024, 478.548393
Outstanding requests per worker:
1023 1062 942 1057 960 1964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158657.2,      793287,     714359,      78928,     539245,     175114,  22.304684,  40.100000,  47.600000,  63.000000,  24.037317,   0.629000, 1034.109950, 579.494362
Outstanding requests per worker:
578 517 556 579 527 524 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.4,      789538,     710577,      78961,     567407,     143170,  21.009972,  37.800000,  46.600000,  54.700000,  11.874871,   0.638000,  71.051002, 627.680381
Outstanding requests per worker:
595 523 536 562 537 575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157908.2,      789542,     710355,      79187,     584162,     126193,  21.189391,  37.800000,  46.800000,  55.600000,  11.958486,   0.663000,  84.504001, 653.399766
Outstanding requests per worker:
570 566 536 542 571 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.8,      789505,     710760,      78745,     595366,     115394,  21.322212,  38.000000,  47.300000,  55.700000,  11.991037,   0.787000,  77.676997, 670.327067
Outstanding requests per worker:
544 536 567 559 559 581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157884.0,      789421,     710761,      78660,     603118,     107643,  21.535763,  38.200000,  47.700000,  56.300000,  12.121974,   0.750000,  88.454001, 682.123508
Outstanding requests per worker:
635 564 575 574 578 560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.2,      789577,     710654,      78923,     609580,     101074,  21.679680,  38.500000,  48.000000,  57.000000,  12.226648,   0.617000,  87.963998, 692.851748
Outstanding requests per worker:
556 576 555 621 582 601 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:51   0:00 /usr/lib/linux
memcache      7  357  0.0 447168 161472 pts/0   Sl+  19:51   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19340176950      instructions:u                                              
         397518350      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        5064959067      L1-dcache-loads:u                                           
        1281878969      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10131753181      armv8_pmuv3_0/l1i_cache/:u                                   

      36.300852534 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1007022592
starting receive base loop
num_worker_connections 171
Creating worker on tid 3845386752
starting receive base loop
num_worker_connections 171
Creating worker on tid 2387735040
starting receive base loop
num_worker_connections 170
Creating worker on tid 927461888
starting receive base loop
num_worker_connections 170
Creating worker on tid 3770216960
starting receive base loop
Created 1024 connections total
Creating worker on tid 2318004736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317905.316330,       0.0,      342554,     308449,      34105,     204898,     103551,  59.397145, 130.600000, 168.400000, 320.300000,  77.761617,   0.000000, 1369.683027, 480.387276
Outstanding requests per worker:
729 680 733 715 665 806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158143.0,      790716,     711970,      78746,     538706,     173264,  20.091778,  36.900000,  44.200000,  52.500000,  11.854323,   0.747000, 396.205992, 581.003201
Outstanding requests per worker:
502 554 533 535 485 537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.0,      789496,     710676,      78820,     568296,     142380,  20.335834,  36.700000,  45.000000,  52.800000,  11.466865,   0.556000,  85.950002, 628.891534
Outstanding requests per worker:
545 478 525 560 556 537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.8,      789480,     710805,      78675,     585336,     125469,  20.571324,  37.000000,  45.600000,  53.500000,  11.620546,   0.695000,  93.290001, 654.201486
Outstanding requests per worker:
516 544 567 588 544 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.4,      789538,     710652,      78886,     595275,     115377,  20.855467,  37.500000,  46.400000,  54.100000,  11.772537,   0.725000,  89.661002, 670.364817
Outstanding requests per worker:
588 530 561 577 556 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157905.0,      789526,     710340,      79186,     603366,     106974,  20.988851,  37.600000,  46.700000,  54.600000,  11.847354,   0.803000,  77.936001, 682.975116
Outstanding requests per worker:
525 598 538 587 520 559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157883.4,      789418,     710762,      78656,     610434,     100328,  21.297985,  38.200000,  47.300000,  55.500000,  12.030187,   0.836000,  77.656999, 694.083868
Outstanding requests per worker:
575 549 604 564 611 551 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:52   0:00 /usr/lib/linux
memcache      7  358  0.0 447168 163008 pts/0   Sl+  19:52   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19305061234      instructions:u                                              
         396069844      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        5074139674      L1-dcache-loads:u                                           
        1286941037      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10189464913      armv8_pmuv3_0/l1i_cache/:u                                   

      36.211183937 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1506406912
starting receive base loop
num_worker_connections 171
Creating worker on tid 46985728
starting receive base loop
num_worker_connections 171
Creating worker on tid 2881679872
starting receive base loop
num_worker_connections 170
Creating worker on tid 1421406720
starting receive base loop
num_worker_connections 170
Creating worker on tid 4264161792
starting receive base loop
Created 1024 connections total
Creating worker on tid 2814571008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317948.316373,       0.0,      402993,     362780,      40213,     244700,     118080,  42.409651,  89.600000, 126.700000, 214.000000,  57.569646,   0.000000, 1129.184961, 489.981366
Outstanding requests per worker:
868 849 830 755 830 1037 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162449.8,      812250,     731356,      80894,     557131,     174225,  23.364233,  41.300000,  50.500000,  61.300000,  14.187766,   0.856000, 578.199983, 587.057888
Outstanding requests per worker:
609 637 644 650 593 642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162132.0,      810661,     729892,      80769,     586075,     143817,  23.260186,  39.700000,  50.700000,  60.900000,  12.706031,   0.840000, 107.063003, 632.227649
Outstanding requests per worker:
676 683 652 682 665 611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162180.2,      810902,     729749,      81153,     602190,     127559,  23.861354,  40.500000,  51.900000,  63.300000,  13.067553,   0.880000, 113.867000, 656.921313
Outstanding requests per worker:
666 676 672 606 675 628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162159.8,      810800,     729480,      81320,     613172,     116308,  24.193161,  41.200000,  52.500000,  63.900000,  13.256674,   1.015000, 128.108993, 673.784163
Outstanding requests per worker:
682 632 633 720 670 643 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162145.2,      810727,     729849,      80878,     620847,     109002,  24.524670,  41.900000,  52.800000,  65.700000,  13.515142,   0.815000, 131.364003, 684.903298
Outstanding requests per worker:
682 656 670 708 719 681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161791.4,      808958,     727800,      81158,     626138,     101662,  26.067343,  46.800000,  56.900000,  73.000000,  15.492041,   0.803000, 212.183997, 694.746470
Outstanding requests per worker:
1044 978 1029 997 931 1026 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:52   0:00 /usr/lib/linux
memcache      7  335  0.0 516224 163648 pts/0   Sl+  19:52   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20143483351      instructions:u                                              
         405150677      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        5289812544      L1-dcache-loads:u                                           
        1326672857      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10544563080      armv8_pmuv3_0/l1i_cache/:u                                   

      38.842125104 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1500180992
starting receive base loop
num_worker_connections 171
Creating worker on tid 38924800
starting receive base loop
num_worker_connections 171
Creating worker on tid 2873618944
starting receive base loop
num_worker_connections 170
Creating worker on tid 1413345792
starting receive base loop
num_worker_connections 170
Creating worker on tid 4256100864
starting receive base loop
Created 1024 connections total
Creating worker on tid 2806510080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575317989.316414,       0.0,      339422,     305524,      33898,     203408,     102116,  84.154725, 175.100000, 212.300000, 498.000000, 103.763778,   0.000000, 1648.056030, 480.835139
Outstanding requests per worker:
1763 1913 1809 1931 1847 3452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163947.8,      819740,     737853,      81887,     558520,     179333,  33.279577,  58.900000,  95.100000, 160.100000,  40.529030,   0.879000, 1367.663026, 581.028842
Outstanding requests per worker:
603 664 662 653 604 658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.2,      810752,     729204,      81548,     583537,     145667,  24.274988,  41.400000,  52.600000,  64.400000,  13.298501,   0.981000, 119.713001, 629.171307
Outstanding requests per worker:
659 726 658 653 650 632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.0,      810846,     729756,      81090,     601387,     128369,  24.722494,  41.700000,  53.500000,  65.300000,  13.459326,   0.908000, 108.269997, 655.134223
Outstanding requests per worker:
669 659 713 678 693 632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162091.0,      810456,     729231,      81225,     611845,     117386,  26.125562,  46.900000,  55.800000,  72.100000,  15.013707,   0.979000, 168.707997, 672.012080
Outstanding requests per worker:
718 719 768 749 732 744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.2,      810812,     729842,      80970,     620537,     109305,  26.637343,  47.000000,  56.300000,  76.300000,  15.229494,   1.137000, 159.872994, 684.500663
Outstanding requests per worker:
737 769 809 681 739 755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162149.0,      810746,     729892,      80854,     627358,     102534,  28.172716,  52.000000,  58.900000,  92.000000,  17.235267,   0.797000, 176.773995, 694.134994
Outstanding requests per worker:
735 799 811 783 744 757 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:53   0:00 /usr/lib/linux
memcache      7  347  0.0 449216 169216 pts/0   Sl+  19:53   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  19:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19885158708      instructions:u                                              
         397847894      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        5241909163      L1-dcache-loads:u                                           
        1302473928      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10381270854      armv8_pmuv3_0/l1i_cache/:u                                   

      36.510868918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 983101952
starting receive base loop
num_worker_connections 171
Creating worker on tid 3821203968
starting receive base loop
num_worker_connections 171
Creating worker on tid 2360930816
starting receive base loop
num_worker_connections 170
Creating worker on tid 900657664
starting receive base loop
num_worker_connections 170
Creating worker on tid 3746034176
starting receive base loop
Created 1024 connections total
Creating worker on tid 2293821952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318030.316455,       0.0,      339168,     305245,      33923,     202959,     102286,  84.866280, 167.200000, 208.500000, 721.600000, 125.982040,   0.000000, 1731.366992, 480.954505
Outstanding requests per worker:
1586 1802 1739 1682 1719 4773 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164077.2,      820387,     738438,      81949,     558992,     179446,  33.322679,  55.800000,  73.400000, 149.300000,  54.458342,   1.064000, 1458.176970, 581.527157
Outstanding requests per worker:
678 620 583 624 639 653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.2,      810752,     729491,      81261,     584012,     145479,  23.972516,  40.600000,  52.300000,  62.700000,  13.055801,   0.764000, 109.673999, 629.381888
Outstanding requests per worker:
651 693 647 630 668 623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.2,      810822,     729602,      81220,     600770,     128832,  24.560318,  41.800000,  53.400000,  64.200000,  13.408551,   0.846000, 129.418999, 655.155268
Outstanding requests per worker:
680 660 664 622 647 676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162118.8,      810595,     729102,      81493,     611557,     117545,  24.719969,  41.900000,  53.700000,  65.100000,  13.530016,   0.874000, 131.119996, 671.668060
Outstanding requests per worker:
689 686 712 674 755 702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162116.6,      810584,     729384,      81200,     619656,     109728,  25.729514,  45.000000,  54.900000,  69.300000,  14.404436,   1.062000, 155.915007, 683.509341
Outstanding requests per worker:
764 754 753 772 761 711 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162148.2,      810742,     729252,      81490,     626893,     102359,  27.887319,  51.700000,  58.900000,  90.800000,  17.212315,   0.813000, 189.015999, 694.423915
Outstanding requests per worker:
799 757 797 743 738 798 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:54   0:00 /usr/lib/linux
memcache      7  357  0.0 449216 164864 pts/0   Sl+  19:54   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19856266343      instructions:u                                              
         397936536      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        5237556966      L1-dcache-loads:u                                           
        1305052306      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10404393221      armv8_pmuv3_0/l1i_cache/:u                                   

      36.400841427 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1225519616
starting receive base loop
num_worker_connections 171
Creating worker on tid 4065456640
starting receive base loop
num_worker_connections 171
Creating worker on tid 2605183488
starting receive base loop
num_worker_connections 170
Creating worker on tid 1144910336
starting receive base loop
num_worker_connections 170
Creating worker on tid 3987665408
starting receive base loop
Created 1024 connections total
Creating worker on tid 2538074624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318072.316497,       0.0,      406621,     365896,      40725,     246977,     118919,  62.072963, 132.900000, 162.600000, 549.800000, 101.370856,   0.000000, 1571.663976, 491.663803
Outstanding requests per worker:
1692 1765 1796 1664 1968 4008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168287.6,      841439,     757546,      83893,     578435,     179111,  40.617170,  69.700000,  99.900000, 152.200000,  50.534109,   1.245000, 1344.298959, 589.093641
Outstanding requests per worker:
803 819 796 789 793 834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166569.2,      832847,     749672,      83175,     602644,     147028,  30.966044,  55.300000,  64.000000,  97.700000,  18.181187,   1.140000, 186.401993, 633.218698
Outstanding requests per worker:
941 878 919 995 826 821 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166523.6,      832619,     749318,      83301,     618817,     130501,  34.472823,  60.100000,  70.200000, 111.300000,  20.766748,   1.113000, 204.286993, 657.449325
Outstanding requests per worker:
1043 1001 1032 1023 990 1052 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166523.4,      832618,     749575,      83043,     630963,     118612,  39.934912,  66.200000,  88.100000, 123.400000,  24.062918,   0.816000, 214.004993, 675.129967
Outstanding requests per worker:
1173 1145 1153 1209 1099 1184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166594.6,      832974,     749596,      83378,     638695,     110901,  43.251075,  73.200000,  98.600000, 136.100000,  26.441735,   1.909000, 234.338000, 686.643729
Outstanding requests per worker:
1288 1144 1209 1322 1235 1170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166378.6,      831894,     748338,      83556,     644351,     103987,  48.468477,  88.000000, 112.200000, 148.200000,  29.814262,   2.250000, 244.452998, 696.311023
Outstanding requests per worker:
1488 1482 1463 1500 1462 1480 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:54   0:00 /usr/lib/linux
memcache      7  353  0.0 520320 177600 pts/0   Sl+  19:54   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20724859068      instructions:u                                              
         407473782      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        5480162752      L1-dcache-loads:u                                           
        1356787504      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10818127200      armv8_pmuv3_0/l1i_cache/:u                                   

      37.471473603 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1691742720
starting receive base loop
num_worker_connections 171
Creating worker on tid 237629952
starting receive base loop
num_worker_connections 171
Creating worker on tid 3074945536
starting receive base loop
num_worker_connections 170
Creating worker on tid 1614672384
starting receive base loop
num_worker_connections 170
Creating worker on tid 162460160
starting receive base loop
Created 1024 connections total
Creating worker on tid 3007836672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318114.316539,       0.0,      343709,     309335,      34374,     205899,     103436,  98.085147, 190.100000, 229.400000, 711.500000, 125.697211,   0.000000, 1942.708015, 481.187234
Outstanding requests per worker:
2646 2449 2398 2608 2628 6342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169554.8,      847775,     763176,      84599,     577935,     185241,  54.690070, 114.100000, 142.500000, 270.200000,  81.289401,   0.705000, 1894.863009, 582.169477
Outstanding requests per worker:
815 790 803 777 740 785 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166617.8,      833090,     749983,      83107,     601944,     148039,  29.782351,  53.300000,  62.100000,  93.300000,  17.640435,   1.037000, 197.767004, 631.410271
Outstanding requests per worker:
873 774 810 871 806 900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166641.8,      833210,     749600,      83610,     618546,     131054,  31.435185,  57.200000,  65.100000, 103.100000,  19.130846,   1.331000, 196.908996, 656.367197
Outstanding requests per worker:
885 845 912 893 833 887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166628.4,      833143,     749952,      83191,     630705,     119247,  32.720317,  60.300000,  68.700000, 115.700000,  20.988041,   0.824000, 219.541997, 673.726392
Outstanding requests per worker:
892 888 896 936 925 959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166559.0,      832796,     749532,      83264,     638708,     110824,  35.079769,  62.400000,  73.200000, 118.100000,  22.027197,   1.057000, 212.345004, 686.542575
Outstanding requests per worker:
1021 998 1140 951 977 998 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165273.4,      826368,     743662,      82706,     640683,     102979,  43.516491,  89.000000, 121.200000, 160.500000,  33.492463,   0.994000, 286.614001, 696.377639
Outstanding requests per worker:
2180 2232 2074 2307 2188 2163 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:55   0:00 /usr/lib/linux
memcache      7  357  0.0 518272 170048 pts/0   Sl+  19:55   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20568290212      instructions:u                                              
         406107838      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        5419140816      L1-dcache-loads:u                                           
        1327843917      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10645015587      armv8_pmuv3_0/l1i_cache/:u                                   

      36.580109997 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1740173824
starting receive base loop
num_worker_connections 171
Creating worker on tid 280556032
starting receive base loop
num_worker_connections 171
Creating worker on tid 3115250176
starting receive base loop
num_worker_connections 170
Creating worker on tid 1657598464
starting receive base loop
num_worker_connections 170
Creating worker on tid 205386240
starting receive base loop
Created 1024 connections total
Creating worker on tid 3048141312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318155.316580,       0.0,      340239,     306063,      34176,     203263,     102800, 103.432921, 177.900000, 229.900000, 1109.800000, 172.385830,   0.000000, 1977.360964, 479.609662
Outstanding requests per worker:
2783 2764 2752 2814 2638 16336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172650.8,      863255,     777019,      86236,     588301,     188718, 168.232047, 238.100000, 414.100000, 1464.700000, 236.403350,   2.848000, 2368.890047, 581.871217
Outstanding requests per worker:
3466 3433 3781 3494 3644 6216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171811.8,      859060,     772935,      86125,     620897,     152038, 133.189400, 242.000000, 285.300000, 498.300000, 115.721219,   3.032000, 1609.709978, 632.188705
Outstanding requests per worker:
3442 3600 3732 3575 3585 4259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171215.8,      856080,     770052,      86028,     635999,     134053, 131.832103, 260.700000, 302.900000, 406.900000,  98.262135,   2.763000, 1448.006034, 657.779260
Outstanding requests per worker:
3815 3974 3922 3692 3906 4000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171082.4,      855413,     769580,      85833,     647376,     122204, 141.065441, 273.000000, 322.600000, 408.900000,  92.787011,   2.233000, 787.250996, 674.544442
Outstanding requests per worker:
4158 4048 4169 4222 4156 4362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170897.8,      854490,     768714,      85776,     655784,     112930, 152.557999, 291.700000, 345.100000, 437.100000,  98.748620,   4.158000, 749.858975, 686.849135
Outstanding requests per worker:
4514 4688 4517 4768 4515 4805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170502.8,      852515,     767128,      85387,     660929,     106199, 172.941323, 304.600000, 352.000000, 433.200000, 100.562511,   3.941000, 722.543001, 696.620220
Outstanding requests per worker:
5153 5297 5330 5586 5461 5680 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   19:56   0:00 /usr/lib/linux
memcache      7  347  0.0 521344 182464 pts/0   Sl+  19:56   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21363245116      instructions:u                                              
         424609194      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        5713871818      L1-dcache-loads:u                                           
        1378519513      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11117868024      armv8_pmuv3_0/l1i_cache/:u                                   

      36.481981069 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1477440000
starting receive base loop
num_worker_connections 171
Creating worker on tid 20181504
starting receive base loop
num_worker_connections 171
Creating worker on tid 2857497088
starting receive base loop
num_worker_connections 170
Creating worker on tid 1397223936
starting receive base loop
num_worker_connections 170
Creating worker on tid 4239979008
starting receive base loop
Created 1024 connections total
Creating worker on tid 2787766784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318197.316622,       0.0,      342842,     308674,      34168,     205414,     103260,  97.786108, 164.600000, 217.700000, 1119.800000, 176.361581,   0.000000, 1975.340009, 481.144291
Outstanding requests per worker:
2247 2221 2303 2391 2273 18868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172955.4,      864778,     778417,      86361,     591183,     187234, 168.646165, 211.100000, 565.200000, 1744.100000, 291.588678,   3.591000, 2965.462923, 583.485471
Outstanding requests per worker:
3255 3007 3103 3186 3009 7163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172324.2,      861622,     775986,      85636,     623487,     152499, 117.337755, 226.600000, 274.800000, 757.600000, 154.334874,   2.254000, 2225.917101, 632.995084
Outstanding requests per worker:
2826 2805 2795 2616 2987 4279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171284.2,      856422,     770659,      85763,     637308,     133351, 108.873852, 248.000000, 292.500000, 411.600000, 115.200814,   2.814000, 1669.054031, 659.002146
Outstanding requests per worker:
3088 3281 3067 2984 3096 3560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171250.4,      856253,     770854,      85399,     648612,     122242, 112.555835, 261.800000, 309.000000, 418.900000, 101.347581,   2.146000, 1229.074001, 674.578573
Outstanding requests per worker:
3047 3333 3488 3313 3303 3548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171203.2,      856017,     770504,      85513,     657448,     113056, 119.342830, 278.400000, 329.500000, 416.500000, 102.060422,   3.045000, 985.871971, 687.309709
Outstanding requests per worker:
3491 3276 3599 3514 3757 3563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169865.0,      849326,     764153,      85173,     658525,     105628, 140.453547, 291.600000, 347.100000, 437.400000, 102.363239,   2.130000, 685.886979, 697.694734
Outstanding requests per worker:
4729 4776 4726 4708 4999 5155 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:56   0:00 /usr/lib/linux
memcache      7  347  0.0 521344 184448 pts/0   Sl+  19:56   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21272591926      instructions:u                                              
         412646726      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        5683839385      L1-dcache-loads:u                                           
        1370340868      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11047606791      armv8_pmuv3_0/l1i_cache/:u                                   

      37.810853280 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1095365120
starting receive base loop
num_worker_connections 171
Creating worker on tid 3931238912
starting receive base loop
num_worker_connections 171
Creating worker on tid 2470965760
starting receive base loop
num_worker_connections 170
Creating worker on tid 1010692608
starting receive base loop
num_worker_connections 170
Creating worker on tid 3853447680
starting receive base loop
Created 1024 connections total
Creating worker on tid 2403856896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318238.316663,       0.0,      349170,     314278,      34892,     209500,     104778, 113.723973, 207.000000, 253.400000, 1068.400000, 172.039717,   0.000000, 1961.334944, 481.921754
Outstanding requests per worker:
3568 3485 3663 3586 3921 21207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173188.2,      865942,     779020,      86922,     591646,     187374, 284.473345, 394.100000, 886.200000, 2117.700000, 348.194746,   4.924000, 3058.017015, 584.261419
Outstanding requests per worker:
7560 7428 7701 7452 7750 18027 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174794.8,      873975,     786318,      87657,     631767,     154551, 345.769922, 497.300000, 648.100000, 1805.200000, 272.426457,  11.793000, 2653.583050, 632.862327
Outstanding requests per worker:
9307 9132 9569 9572 10028 16793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175242.6,      876214,     788828,      87386,     653303,     135525, 383.626204, 594.700000, 741.400000, 1594.100000, 249.118342,  13.604000, 2742.800951, 659.593773
Outstanding requests per worker:
10743 10777 10693 10721 11180 16543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174795.4,      873978,     786469,      87509,     663020,     123449, 422.473656, 690.700000, 860.700000, 1587.600000, 263.960246,  18.244000, 3127.552032, 676.418613
Outstanding requests per worker:
11893 12457 12118 12194 12893 17534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174574.0,      872871,     786023,      86848,     671286,     114737, 475.265545, 822.800000, 998.300000, 1553.800000, 288.490911,  31.817999, 3242.131948, 688.591805
Outstanding requests per worker:
13708 13734 14017 13681 14828 18686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173817.4,      869088,     782411,      86677,     674988,     107423, 534.470632, 960.300000, 1159.800000, 1645.100000, 327.290391,  36.233999, 3668.311119, 698.033609
Outstanding requests per worker:
16041 15915 15938 15973 17055 21094 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:57   0:00 /usr/lib/linux
memcache      7  348  0.0 522368 198528 pts/0   Sl+  19:57   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  19:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21879574317      instructions:u                                              
         428045183      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        5889106663      L1-dcache-loads:u                                           
        1386937400      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11299879667      armv8_pmuv3_0/l1i_cache/:u                                   

      36.370389080 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 809038336
starting receive base loop
num_worker_connections 171
Creating worker on tid 3644060160
starting receive base loop
num_worker_connections 171
Creating worker on tid 2186408448
starting receive base loop
num_worker_connections 170
Creating worker on tid 726135296
starting receive base loop
num_worker_connections 170
Creating worker on tid 3568890368
starting receive base loop
Created 1024 connections total
Creating worker on tid 2116678144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318279.316704,       0.0,      342598,     308239,      34359,     205004,     103235,  99.651918, 158.800000, 208.800000, 1133.200000, 180.048259,   0.000000, 1953.636050, 480.724246
Outstanding requests per worker:
2652 2581 2522 2705 2590 30609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171103.8,      855520,     770537,      84983,     584518,     186019, 337.659467, 527.300000, 1524.600000, 2656.900000, 501.564342,   4.979000, 3867.011070, 583.322681
Outstanding requests per worker:
8435 8365 8180 8280 8363 28926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173709.4,      868548,     781449,      87099,     626944,     154505, 437.447411, 669.300000, 1180.900000, 2677.700000, 452.606619,  11.272000, 4377.073765, 631.143212
Outstanding requests per worker:
11440 11452 11245 11191 11319 27776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173786.2,      868932,     782284,      86648,     646387,     135897, 512.489747, 911.200000, 1197.600000, 2858.300000, 464.851893,  24.200000, 4891.755104, 657.706861
Outstanding requests per worker:
14023 14046 13686 13632 14012 28499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173703.4,      868518,     781467,      87051,     657469,     123998, 585.149200, 1128.900000, 1358.200000, 3172.100000, 507.471992,  39.700001, 5147.443771, 674.040323
Outstanding requests per worker:
16321 16664 16376 16021 16952 29476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173738.6,      868694,     781725,      86969,     667016,     114709, 661.466928, 1364.200000, 1593.300000, 3414.100000, 567.603162,  50.156001, 5275.428772, 687.263774
Outstanding requests per worker:
18724 18929 18679 18259 19587 31348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172803.2,      864017,     777279,      86738,     670376,     106903, 752.340482, 1612.500000, 1898.500000, 3635.800000, 641.567072,  34.650002, 5581.252098, 697.894822
Outstanding requests per worker:
21664 22393 21357 21342 23016 34176 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   19:58   0:00 /usr/lib/linux
memcache      8  348  0.0 521344 198656 pts/0   Sl+  19:58   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  19:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21628009074      instructions:u                                              
         430158204      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        5803382277      L1-dcache-loads:u                                           
        1376284602      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11159552192      armv8_pmuv3_0/l1i_cache/:u                                   

      36.481064329 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 774042112
starting receive base loop
num_worker_connections 171
Creating worker on tid 3611816448
starting receive base loop
num_worker_connections 171
Creating worker on tid 2151543296
starting receive base loop
num_worker_connections 170
Creating worker on tid 691270144
starting receive base loop
num_worker_connections 170
Creating worker on tid 3536646656
starting receive base loop
Created 1024 connections total
Creating worker on tid 2084434432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318321.316746,       0.0,      340009,     305801,      34208,     203757,     102044, 105.440687, 183.400000, 243.600000, 1106.500000, 178.558992,   0.000000, 1973.703980, 481.736371
Outstanding requests per worker:
2817 2653 2843 2698 2763 31230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170253.4,      851268,     766325,      84943,     580124,     186201, 358.619708, 587.600000, 1651.500000, 2673.200000, 509.443872,   2.812000, 3730.350971, 581.116880
Outstanding requests per worker:
9154 9189 9126 9156 9170 30356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172829.2,      864147,     777728,      86419,     623897,     153831, 481.989449, 799.600000, 1461.500000, 2751.900000, 465.439434,  13.740000, 4090.046883, 631.487739
Outstanding requests per worker:
12264 12941 12896 12673 12964 30695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173192.4,      865963,     779206,      86757,     643305,     135901, 572.635593, 1054.400000, 1373.300000, 2846.900000, 476.985344,  44.551000, 4325.715065, 657.357008
Outstanding requests per worker:
15417 15865 15649 15718 16310 31958 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172810.4,      864053,     777326,      86727,     653441,     123885, 672.994113, 1277.200000, 1542.900000, 3157.100000, 516.371775,  45.995001, 4867.772102, 674.075059
Outstanding requests per worker:
18719 18812 18803 18528 20088 34383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173466.6,      867334,     780751,      86583,     666072,     114679, 760.512994, 1523.000000, 1776.400000, 3448.000000, 581.497535,  44.971999, 4918.362141, 686.832942
Outstanding requests per worker:
21284 21508 21107 20887 22863 36756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172039.4,      860198,     773578,      86620,     667726,     105852, 861.923840, 1804.000000, 2096.400000, 3658.200000, 666.603044,  84.198996, 5299.501896, 697.801092
Outstanding requests per worker:
24967 25325 24734 24670 26611 40330 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  19:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:58   0:00 /usr/lib/linux
memcache      7  339  0.0 521344 197056 pts/0   Sl+  19:58   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  19:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21564806184      instructions:u                                              
         421744736      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        5780189947      L1-dcache-loads:u                                           
        1358218275      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11068357801      armv8_pmuv3_0/l1i_cache/:u                                   

      37.900881447 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1105261056
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
num_worker_connections 128
Creating worker on tid 2063266304
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
num_worker_connections 128
Creating worker on tid 3026973184
starting receive base loop
Created 1024 connections total
Creating worker on tid 1918366208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318363.316788,       0.0,      348092,     313254,      34838,     209115,     104139,  37.871157,  97.300000, 136.100000, 191.300000,  43.161409,   0.000000, 426.124990, 484.292957
Outstanding requests per worker:
425 456 407 489 456 414 461 455 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  151197.2,      755987,     680828,      75159,     514143,     166685,  19.365149,  36.100000,  49.100000, 104.900000,  18.674424,   0.258000, 238.487005, 579.741901
Outstanding requests per worker:
293 297 285 299 305 274 298 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150871.8,      754360,     678666,      75694,     541166,     137500,  19.564960,  37.300000,  47.300000,  97.500000,  17.667832,   0.308000, 213.291004, 626.128511
Outstanding requests per worker:
331 359 364 354 330 369 346 332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150691.0,      753456,     677630,      75826,     556222,     121408,  20.069451,  38.500000,  47.900000,  96.800000,  17.747258,   0.312000, 210.246995, 651.861517
Outstanding requests per worker:
499 554 513 469 544 515 530 492 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150958.0,      754791,     679231,      75560,     567400,     111831,  20.817990,  40.000000,  52.800000, 104.000000,  19.145548,   0.300000, 225.382000, 667.198098
Outstanding requests per worker:
491 568 493 499 531 499 489 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150990.2,      754952,     679523,      75429,     575679,     103844,  20.506206,  39.500000,  49.400000,  98.100000,  18.081959,   0.286000, 228.827000, 680.929467
Outstanding requests per worker:
488 412 512 462 585 561 471 423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150954.8,      754775,     679486,      75289,     581392,      98094,  21.207704,  40.900000,  51.200000, 104.700000,  19.014982,   0.323000, 233.815998, 690.277282
Outstanding requests per worker:
519 491 477 510 487 464 442 547 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  19:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   19:59   0:00 /usr/lib/linux
memcache      7  360  0.0 444096 158912 pts/0   Sl+  19:59   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  20:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18571672367      instructions:u                                              
         386734797      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
        4852001480      L1-dcache-loads:u                                           
        1246856489      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9778464899      armv8_pmuv3_0/l1i_cache/:u                                   

      36.502308008 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2116874752
starting receive base loop
num_worker_connections 128
Creating worker on tid 1005646336
starting receive base loop
num_worker_connections 128
Creating worker on tid 4192006656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3077960192
starting receive base loop
num_worker_connections 128
Creating worker on tid 1969353216
starting receive base loop
num_worker_connections 128
Creating worker on tid 855306752
starting receive base loop
num_worker_connections 128
Creating worker on tid 4041667072
starting receive base loop
Created 1024 connections total
Creating worker on tid 2933060096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318406.316831,       0.0,      389122,     349957,      39165,     235859,     114098,  29.562994,  69.200000, 101.100000, 162.300000,  38.230032,   0.000000, 750.108004, 489.891895
Outstanding requests per worker:
476 463 490 470 427 490 494 609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  154117.2,      770587,     693439,      77148,     527100,     166339,  20.711359,  39.700000,  51.800000, 103.500000,  18.887606,   0.305000, 303.705007, 584.706413
Outstanding requests per worker:
330 319 351 343 352 290 322 329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153829.6,      769149,     692618,      76531,     553997,     138621,  21.650281,  41.700000,  55.200000, 109.400000,  20.034687,   0.295000, 257.362008, 629.595308
Outstanding requests per worker:
344 387 338 366 350 329 301 395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.8,      769230,     692174,      77056,     568800,     123374,  22.281165,  43.300000,  56.800000, 111.500000,  20.404351,   0.298000, 225.403994, 653.456661
Outstanding requests per worker:
349 353 361 361 365 346 372 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.8,      769275,     692381,      76894,     579618,     112763,  22.364606,  43.500000,  55.500000, 110.200000,  20.104967,   0.335000, 218.803003, 669.955436
Outstanding requests per worker:
348 316 370 388 358 359 382 336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153877.0,      769386,     692497,      76889,     587730,     104767,  22.517332,  44.000000,  55.200000, 109.200000,  20.016202,   0.287000, 226.641998, 683.292056
Outstanding requests per worker:
376 330 358 343 346 307 350 366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153871.6,      769359,     692867,      76492,     593564,      99303,  22.824678,  44.400000,  56.400000, 114.100000,  20.667875,   0.334000, 232.823998, 691.545161
Outstanding requests per worker:
351 330 332 336 324 347 346 372 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:00   0:00 /usr/lib/linux
memcache      7  345  0.0 446144 158400 pts/0   Sl+  20:00   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19031731310      instructions:u                                              
         395888394      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        4990574609      L1-dcache-loads:u                                           
        1284026439      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10043243882      armv8_pmuv3_0/l1i_cache/:u                                   

      38.750127117 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1664283136
starting receive base loop
num_worker_connections 128
Creating worker on tid 552006144
starting receive base loop
num_worker_connections 128
Creating worker on tid 3738366464
starting receive base loop
num_worker_connections 128
Creating worker on tid 2624320000
starting receive base loop
num_worker_connections 128
Creating worker on tid 1515713024
starting receive base loop
num_worker_connections 128
Creating worker on tid 401666560
starting receive base loop
num_worker_connections 128
Creating worker on tid 3588026880
starting receive base loop
Created 1024 connections total
Creating worker on tid 2473980416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318447.316872,       0.0,      353320,     317931,      35389,     211885,     106046,  62.623064, 153.300000, 198.300000, 507.100000,  99.883039,   0.000000, 1397.519946, 481.306425
Outstanding requests per worker:
929 911 1058 925 1027 955 950 1580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157441.6,      787209,     708692,      78517,     535949,     172743,  46.114665, 143.500000, 177.500000, 238.300000,  57.251239,   0.334000, 606.880009, 580.999791
Outstanding requests per worker:
711 710 710 617 829 634 608 705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156663.6,      783319,     705074,      78245,     563034,     142040,  40.688644, 121.700000, 155.500000, 200.900000,  47.660788,   0.330000, 362.524003, 627.633699
Outstanding requests per worker:
832 874 815 717 824 791 853 911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156623.4,      783118,     705093,      78025,     580017,     125076,  42.471728, 128.100000, 160.800000, 206.700000,  49.712655,   0.363000, 337.826014, 653.619358
Outstanding requests per worker:
928 1044 807 1044 1093 1022 909 1023 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156767.6,      783839,     705274,      78565,     590232,     115042,  45.012794, 137.500000, 169.100000, 216.500000,  53.109733,   0.316000, 430.849999, 669.509072
Outstanding requests per worker:
1016 924 1080 1034 1126 1106 1065 1054 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156730.0,      783651,     705442,      78209,     598391,     107051,  51.346216, 160.300000, 193.300000, 260.100000,  63.662674,   0.369000, 442.932993, 682.283519
Outstanding requests per worker:
1166 1102 1084 1048 1119 1188 1161 1274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157751.8,      788760,     709990,      78770,     609260,     100730,  44.194104, 131.900000, 167.600000, 233.700000,  53.135596,   0.381000, 417.571008, 693.026009
Outstanding requests per worker:
567 628 621 556 565 655 563 590 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:01   0:00 /usr/lib/linux
memcache      7  350  0.0 447168 165824 pts/0   Sl+  20:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19374605206      instructions:u                                              
         399628043      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        5102124614      L1-dcache-loads:u                                           
        1283721700      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10154004539      armv8_pmuv3_0/l1i_cache/:u                                   

      36.519899034 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1538191872
starting receive base loop
num_worker_connections 128
Creating worker on tid 425849344
starting receive base loop
num_worker_connections 128
Creating worker on tid 3606770176
starting receive base loop
num_worker_connections 128
Creating worker on tid 2498163200
starting receive base loop
num_worker_connections 128
Creating worker on tid 1389556224
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
Created 1024 connections total
Creating worker on tid 2347823616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318489.316914,       0.0,      359465,     323677,      35788,     215700,     107977,  52.135696, 119.300000, 157.500000, 296.800000,  69.226230,   0.000000, 1171.255946, 481.776864
Outstanding requests per worker:
684 610 640 749 577 663 750 732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157346.4,      786733,     708145,      78588,     536846,     171299,  20.661670,  40.100000,  48.400000,  70.600000,  15.565985,   0.302000, 236.212999, 582.521710
Outstanding requests per worker:
400 380 400 390 364 357 382 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156859.6,      784299,     705668,      78631,     563497,     142171,  19.514683,  36.000000,  45.600000,  55.100000,  12.352820,   0.362000,  89.465000, 627.673156
Outstanding requests per worker:
411 371 399 362 401 383 373 405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156878.4,      784393,     705645,      78748,     580023,     125622,  19.927978,  36.600000,  46.800000,  56.100000,  12.608101,   0.365000,  87.839998, 653.002191
Outstanding requests per worker:
376 364 410 381 368 379 386 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156877.2,      784387,     706188,      78199,     590901,     115287,  20.105900,  37.100000,  47.100000,  56.400000,  12.733725,   0.328000, 103.083000, 669.630430
Outstanding requests per worker:
411 408 356 360 371 437 403 383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156853.8,      784270,     706104,      78166,     599774,     106330,  20.276311,  37.100000,  47.700000,  56.800000,  12.812020,   0.354000,  81.569999, 683.117341
Outstanding requests per worker:
372 387 415 369 413 421 406 435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156879.6,      784399,     705884,      78515,     605579,     100305,  20.470843,  37.200000,  48.000000,  58.100000,  12.954735,   0.340000,  97.735003, 693.054553
Outstanding requests per worker:
393 400 412 331 426 400 403 410 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:01   0:00 /usr/lib/linux
memcache      7  341  0.0 447168 164480 pts/0   Sl+  20:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19254080924      instructions:u                                              
         394440907      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        5065209196      L1-dcache-loads:u                                           
        1291873058      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10179767234      armv8_pmuv3_0/l1i_cache/:u                                   

      37.870598065 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1304752640
starting receive base loop
num_worker_connections 128
Creating worker on tid 192279040
starting receive base loop
num_worker_connections 128
Creating worker on tid 3378639360
starting receive base loop
num_worker_connections 128
Creating worker on tid 2264592896
starting receive base loop
num_worker_connections 128
Creating worker on tid 1155985920
starting receive base loop
num_worker_connections 128
Creating worker on tid 47378944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3228299776
starting receive base loop
Created 1024 connections total
Creating worker on tid 2119692800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318531.316956,       0.0,      359807,     323598,      36209,     216536,     107062,  60.654628, 124.800000, 165.900000, 633.700000, 117.673094,   0.000000, 1982.563019, 484.927747
Outstanding requests per worker:
994 907 921 869 974 868 924 3587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161372.2,      806862,     726580,      80282,     550685,     175895,  29.276157,  49.700000,  58.600000, 123.700000,  70.680622,   0.319000, 1939.350009, 582.464786
Outstanding requests per worker:
372 384 407 423 407 424 388 450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159997.2,      799987,     720070,      79917,     576422,     143648,  20.988332,  37.500000,  49.300000,  59.600000,  13.276522,   0.416000, 100.888997, 629.850724
Outstanding requests per worker:
452 400 435 434 442 372 413 418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159980.2,      799902,     719789,      80113,     592561,     127228,  21.457484,  38.500000,  50.400000,  61.000000,  13.599490,   0.349000, 107.796997, 654.681923
Outstanding requests per worker:
421 453 450 391 399 467 476 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159975.6,      799879,     719727,      80152,     603740,     115987,  21.988401,  39.400000,  51.300000,  63.200000,  13.977992,   0.360000, 128.055006, 671.203135
Outstanding requests per worker:
447 457 463 440 481 459 492 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160045.2,      800227,     720752,      79475,     612622,     108130,  22.148974,  39.500000,  51.800000,  63.800000,  14.079925,   0.373000, 117.853999, 683.948859
Outstanding requests per worker:
425 407 479 444 427 454 472 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159991.0,      799956,     720243,      79713,     618683,     101560,  22.428918,  40.200000,  52.100000,  65.200000,  14.277277,   0.278000, 124.854997, 693.948463
Outstanding requests per worker:
436 445 473 464 435 443 472 494 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:02   0:00 /usr/lib/linux
memcache      7  360  0.0 449216 161920 pts/0   Sl+  20:02   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19697301085      instructions:u                                              
         398502476      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        5170793771      L1-dcache-loads:u                                           
        1295734478      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10282709752      armv8_pmuv3_0/l1i_cache/:u                                   

      36.271402693 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1132065280
starting receive base loop
num_worker_connections 128
Creating worker on tid 23196160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3204116992
starting receive base loop
num_worker_connections 128
Creating worker on tid 2095510016
starting receive base loop
num_worker_connections 128
Creating worker on tid 986903040
starting receive base loop
num_worker_connections 128
Creating worker on tid 4167823872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3059216896
starting receive base loop
Created 1024 connections total
Creating worker on tid 1945170432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318573.316998,       0.0,      357804,     321878,      35926,     215011,     106867,  64.500598, 121.000000, 165.000000, 792.700000, 130.411941,   0.000000, 1883.991003, 483.743446
Outstanding requests per worker:
912 916 1002 916 910 933 963 4638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161571.2,      807857,     727445,      80412,     551418,     176027,  32.457329,  54.400000,  67.600000, 160.500000,  69.317273,   0.339000, 1716.089010, 582.642389
Outstanding requests per worker:
436 401 404 441 435 432 413 477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160001.2,      800007,     719841,      80166,     576573,     143268,  21.563951,  38.700000,  50.600000,  61.300000,  13.651690,   0.375000, 115.933001, 629.465083
Outstanding requests per worker:
439 429 395 418 424 466 455 455 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160004.4,      800023,     719911,      80112,     592341,     127570,  21.965318,  39.100000,  51.200000,  63.500000,  13.931082,   0.329000, 115.909003, 653.957532
Outstanding requests per worker:
436 404 386 427 461 486 454 471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160016.6,      800084,     720146,      79938,     604306,     115840,  22.333653,  40.300000,  51.900000,  63.600000,  14.176771,   0.328000, 142.084002, 672.126908
Outstanding requests per worker:
409 463 455 453 440 406 448 453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159909.4,      799548,     719871,      79677,     611949,     107922,  24.185608,  46.700000,  55.600000,  76.600000,  16.410518,   0.289000, 178.229004, 683.585285
Outstanding requests per worker:
549 539 500 485 495 507 457 548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159956.6,      799784,     719714,      80070,     618334,     101380,  25.932834,  51.900000,  59.400000,  94.700000,  18.609348,   0.338000, 184.993997, 693.812449
Outstanding requests per worker:
510 545 512 556 546 579 545 553 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:03   0:00 /usr/lib/linux
memcache      7  350  0.0 449216 168640 pts/0   Sl+  20:03   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19678062967      instructions:u                                              
         395623114      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        5183440581      L1-dcache-loads:u                                           
        1297402517      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10301569235      armv8_pmuv3_0/l1i_cache/:u                                   

      37.670468377 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1439887872
starting receive base loop
num_worker_connections 128
Creating worker on tid 326496768
starting receive base loop
num_worker_connections 128
Creating worker on tid 3512857088
starting receive base loop
num_worker_connections 128
Creating worker on tid 2398810624
starting receive base loop
num_worker_connections 128
Creating worker on tid 1290203648
starting receive base loop
num_worker_connections 128
Creating worker on tid 181596672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3362517504
starting receive base loop
Created 1024 connections total
Creating worker on tid 2253910528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318616.317041,       0.0,      491393,     442460,      48933,     302669,     139791,  40.567647,  82.500000, 132.600000, 457.100000,  95.340757,   0.000000, 1611.650944, 501.579508
Outstanding requests per worker:
1141 1073 1043 1159 1024 1126 1051 2940 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164289.4,      821448,     739444,      82004,     567823,     171621,  41.639514,  86.900000, 122.000000, 168.700000,  48.945343,   0.346000, 1256.445050, 594.218762
Outstanding requests per worker:
728 726 674 696 648 685 646 673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162897.0,      814486,     732953,      81533,     591334,     141619,  36.868785,  78.700000, 117.300000, 164.700000,  34.473245,   0.447000, 270.574003, 635.857241
Outstanding requests per worker:
903 898 824 1017 943 929 933 917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162620.8,      813105,     732178,      80927,     605327,     126851,  55.670095, 149.900000, 182.400000, 251.200000,  57.947282,   0.320000, 471.895009, 658.499866
Outstanding requests per worker:
1302 1319 1270 1429 1223 1347 1371 1377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162757.8,      813790,     732562,      81228,     616090,     116472,  74.449452, 213.900000, 263.600000, 335.800000,  84.325399,   0.361000, 540.849984, 673.641207
Outstanding requests per worker:
1601 1632 1560 1777 1735 1689 1573 1647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162989.2,      814947,     733359,      81588,     624834,     108525,  86.243286, 252.900000, 299.400000, 390.300000,  98.269892,   0.464000, 663.829029, 685.579049
Outstanding requests per worker:
1753 1737 1804 1828 2024 1951 1786 1756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161816.8,      809085,     727803,      81282,     626322,     101481,  99.180869, 279.300000, 328.700000, 424.000000, 108.595160,   0.409000, 668.972015, 695.380261
Outstanding requests per worker:
2717 2626 2809 2745 2903 2806 2681 2642 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:03   0:00 /usr/lib/linux
memcache      7  353  0.0 518272 172032 pts/0   Sl+  20:03   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20712271698      instructions:u                                              
         414334662      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        5486993501      L1-dcache-loads:u                                           
        1358342084      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10865213837      armv8_pmuv3_0/l1i_cache/:u                                   

      38.400956333 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1293152768
starting receive base loop
num_worker_connections 128
Creating worker on tid 184218112
starting receive base loop
num_worker_connections 128
Creating worker on tid 3370578432
starting receive base loop
num_worker_connections 128
Creating worker on tid 2261971456
starting receive base loop
num_worker_connections 128
Creating worker on tid 1147924992
starting receive base loop
num_worker_connections 128
Creating worker on tid 39318016
starting receive base loop
num_worker_connections 128
Creating worker on tid 3220238848
starting receive base loop
Created 1024 connections total
Creating worker on tid 2111631872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318658.317083,       0.0,      359048,     323100,      35948,     216649,     106451,  84.339319, 169.800000, 216.000000, 933.600000, 155.193617,   0.000000, 1955.988050, 485.755457
Outstanding requests per worker:
2023 1888 1855 1795 1943 1868 1980 11505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166559.2,      832797,     749554,      83243,     570144,     179410, 156.877856, 248.900000, 323.700000, 1242.500000, 199.087827,   0.887000, 2505.172014, 585.981224
Outstanding requests per worker:
2906 2938 2956 3010 2851 2946 3144 4688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165886.0,      829431,     746611,      82820,     599116,     147495, 164.584554, 296.200000, 353.200000, 504.500000, 112.013118,   1.015000, 1233.911037, 631.816385
Outstanding requests per worker:
3777 3661 3569 3648 3448 3800 3397 4087 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165929.4,      829648,     746156,      83492,     615515,     130641, 187.479239, 344.900000, 398.700000, 507.300000, 119.286444,   1.001000, 905.829012, 656.530148
Outstanding requests per worker:
3957 4203 4132 4044 4090 4091 4241 4359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165989.2,      829947,     746731,      83216,     628162,     118569, 208.440917, 384.800000, 437.400000, 543.000000, 130.105491,   0.853000, 827.794015, 674.647001
Outstanding requests per worker:
4594 4507 4558 4603 4590 4394 4625 4679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166168.2,      830842,     747222,      83620,     636812,     110410, 226.867553, 405.900000, 463.900000, 576.000000, 135.393941,   0.993000, 850.383997, 686.620446
Outstanding requests per worker:
4686 5025 5036 4878 4831 4865 4947 4820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165573.0,      827866,     745375,      82491,     641985,     103390, 242.594268, 429.600000, 500.400000, 632.400000, 144.577216,   1.090000, 1023.285985, 696.275671
Outstanding requests per worker:
5660 5606 5571 5600 5560 5605 5550 5441 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:04   0:00 /usr/lib/linux
memcache      7  350  0.0 517248 185728 pts/0   Sl+  20:04   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20824175698      instructions:u                                              
         420550804      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        5575084130      L1-dcache-loads:u                                           
        1342439545      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10841552212      armv8_pmuv3_0/l1i_cache/:u                                   

      37.851191660 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1918693888
starting receive base loop
num_worker_connections 128
Creating worker on tid 804319744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3990680064
starting receive base loop
num_worker_connections 128
Creating worker on tid 2876633600
starting receive base loop
num_worker_connections 128
Creating worker on tid 1768026624
starting receive base loop
num_worker_connections 128
Creating worker on tid 653980160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3840340480
starting receive base loop
Created 1024 connections total
Creating worker on tid 2731733504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318699.317124,       0.0,      361473,     325233,      36240,     217967,     107266,  77.572085, 148.400000, 203.900000, 1042.100000, 167.965526,   0.000000, 1940.474033, 486.014325
Outstanding requests per worker:
1391 1588 1567 1598 1526 1416 1477 12474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168212.4,      841063,     757049,      84014,     575199,     181850, 122.201359, 228.700000, 299.000000, 1150.100000, 186.053355,   0.811000, 2171.402931, 584.527564
Outstanding requests per worker:
1805 1800 1804 1935 1871 1791 1942 2454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166564.4,      832823,     749685,      83138,     601037,     148648,  92.495276, 264.900000, 310.100000, 416.000000, 107.407375,   0.498000, 1135.182977, 631.307372
Outstanding requests per worker:
2092 1925 2149 1977 1881 1916 1961 2130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166402.4,      832013,     748336,      83677,     617546,     130790, 100.118698, 293.700000, 346.000000, 432.500000, 113.109266,   0.832000, 746.028006, 656.830694
Outstanding requests per worker:
2176 2173 2034 2136 2222 2360 2255 2055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166345.8,      831730,     748471,      83259,     629704,     118767, 110.584164, 329.600000, 394.600000, 501.300000, 129.574895,   0.771000, 786.234975, 673.746096
Outstanding requests per worker:
2371 2361 2579 2400 2269 2443 2440 2231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166297.2,      831487,     748506,      82981,     637409,     111097, 121.108299, 364.400000, 426.000000, 542.200000, 143.371987,   0.870000, 1047.466040, 685.778004
Outstanding requests per worker:
2683 2625 2607 2708 2629 2619 2647 2521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164775.0,      823876,     741786,      82090,     638856,     102930, 139.844908, 394.500000, 458.000000, 574.200000, 150.311869,   0.931000, 1021.468997, 695.820153
Outstanding requests per worker:
3773 3987 3862 3665 3895 3772 3843 3817 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:05   0:00 /usr/lib/linux
memcache      7  341  0.0 517248 178880 pts/0   Sl+  20:05   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20659017138      instructions:u                                              
         406003573      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        5499663885      L1-dcache-loads:u                                           
        1328276166      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10719140017      armv8_pmuv3_0/l1i_cache/:u                                   

      37.771477523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1670050304
starting receive base loop
num_worker_connections 128
Creating worker on tid 560067072
starting receive base loop
num_worker_connections 128
Creating worker on tid 3740987904
starting receive base loop
num_worker_connections 128
Creating worker on tid 2632380928
starting receive base loop
num_worker_connections 128
Creating worker on tid 1523773952
starting receive base loop
num_worker_connections 128
Creating worker on tid 409727488
starting receive base loop
num_worker_connections 128
Creating worker on tid 3596087808
starting receive base loop
Created 1024 connections total
Creating worker on tid 2482041344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318741.317166,       0.0,      364303,     328062,      36241,     219457,     108605,  85.631075, 174.100000, 217.700000, 900.300000, 149.449834,   0.000000, 1997.992039, 484.129884
Outstanding requests per worker:
2106 1926 2099 2137 2080 1925 2025 15122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167491.2,      837457,     753813,      83644,     572188,     181625, 225.672502, 299.600000, 457.000000, 1947.100000, 296.016308,   0.950000, 2775.473118, 584.162775
Outstanding requests per worker:
4611 4838 4667 4458 4620 4528 4518 10841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168535.4,      842678,     758122,      84556,     607645,     150477, 281.905206, 417.300000, 512.800000, 1470.000000, 215.252560,   1.441000, 2305.458069, 630.420430
Outstanding requests per worker:
5974 6112 6002 5933 5762 6044 5757 9936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168921.2,      844607,     760175,      84432,     626799,     133376, 320.197898, 510.200000, 618.200000, 1295.400000, 197.479752,   1.733000, 2274.791956, 656.246141
Outstanding requests per worker:
7032 7004 6987 6935 6910 7063 6803 9287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168934.6,      844674,     760268,      84406,     639105,     121163, 359.788159, 604.200000, 728.700000, 1155.200000, 210.172871,   3.877000, 2518.754005, 674.296819
Outstanding requests per worker:
7869 7513 7879 7875 7934 7712 7780 9905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168990.0,      844951,     760688,      84263,     648561,     112127, 396.537117, 682.300000, 850.200000, 1252.500000, 238.690544,   3.832000, 2580.291986, 686.872369
Outstanding requests per worker:
8735 8371 8771 8986 8684 8414 8259 10423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167491.2,      837457,     753642,      83815,     649103,     104539, 438.852049, 787.200000, 993.400000, 1371.300000, 274.368161,   1.206000, 2707.314968, 696.119688
Outstanding requests per worker:
10160 10117 10429 10521 10457 9996 10097 12522 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:05   0:00 /usr/lib/linux
memcache      7  350  0.0 519296 191808 pts/0   Sl+  20:05   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21237947595      instructions:u                                              
         425022999      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        5701563020      L1-dcache-loads:u                                           
        1356513705      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11018662890      armv8_pmuv3_0/l1i_cache/:u                                   

      37.540500686 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1973613056
starting receive base loop
num_worker_connections 128
Creating worker on tid 863367680
starting receive base loop
num_worker_connections 128
Creating worker on tid 4049728000
starting receive base loop
num_worker_connections 128
Creating worker on tid 2935681536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1827074560
starting receive base loop
num_worker_connections 128
Creating worker on tid 718467584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3899388416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2790781440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318783.317208,       0.0,      374294,     336936,      37358,     226219,     110717,  77.738103, 145.500000, 192.400000, 1018.000000, 161.901887,   0.000000, 1958.695054, 487.400325
Outstanding requests per worker:
1704 1725 1654 1574 1619 1484 1623 16327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167604.0,      838021,     754026,      83995,     573703,     180323, 212.863509, 284.900000, 560.100000, 1796.900000, 294.420425,   0.897000, 3048.089981, 585.383416
Outstanding requests per worker:
4403 4421 4331 4412 4323 4184 4248 10507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168775.4,      843878,     759623,      84255,     609877,     149746, 263.213826, 380.100000, 450.800000, 1319.100000, 208.082249,   1.013000, 2833.334923, 631.580750
Outstanding requests per worker:
5546 5782 5493 5715 5540 5512 5606 8885 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169084.4,      845423,     760593,      84830,     628722,     131871, 300.541623, 448.900000, 528.000000, 1291.000000, 189.845883,   1.347000, 2530.771971, 658.084462
Outstanding requests per worker:
6156 6347 6580 6419 6424 6427 6237 9190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169253.6,      846269,     761721,      84548,     640908,     120813, 331.905292, 529.200000, 629.000000, 1198.600000, 194.877608,   1.193000, 2388.945103, 674.225747
Outstanding requests per worker:
6980 7114 6938 7181 6974 7020 7061 9359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169089.0,      845446,     760969,      84477,     648835,     112134, 360.270028, 596.300000, 728.900000, 1151.900000, 208.214564,   1.434000, 2588.684082, 686.446221
Outstanding requests per worker:
7601 8028 7695 7997 7567 7970 7533 9944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168384.8,      841925,     757695,      84230,     653014,     104681, 397.341092, 666.900000, 826.000000, 1227.200000, 224.645096,   6.428000, 2653.070927, 697.044815
Outstanding requests per worker:
8499 9194 9058 9029 8821 8917 9099 10922 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:06   0:00 /usr/lib/linux
memcache      7  351  0.0 520320 195520 pts/0   Sl+  20:06   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21325258615      instructions:u                                              
         423860770      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        5737719603      L1-dcache-loads:u                                           
        1362511214      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11066515397      armv8_pmuv3_0/l1i_cache/:u                                   

      37.860921415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1735389696
starting receive base loop
num_worker_connections 128
Creating worker on tid 627175936
starting receive base loop
num_worker_connections 128
Creating worker on tid 3808096768
starting receive base loop
num_worker_connections 128
Creating worker on tid 2699489792
starting receive base loop
num_worker_connections 128
Creating worker on tid 1590882816
starting receive base loop
num_worker_connections 128
Creating worker on tid 476836352
starting receive base loop
num_worker_connections 128
Creating worker on tid 3663196672
starting receive base loop
Created 1024 connections total
Creating worker on tid 2549150208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318824.317249,       0.0,      358342,     322267,      36075,     215072,     107195,  98.530813, 212.200000, 269.300000, 987.800000, 165.693756,   0.000000, 1984.972954, 483.689425
Outstanding requests per worker:
2652 2619 2563 2471 2597 2546 2805 20873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168112.8,      840565,     756927,      83638,     575557,     181370, 320.029830, 424.600000, 959.900000, 2580.800000, 405.870839,   1.496000, 3402.410030, 585.463881
Outstanding requests per worker:
6782 6860 6758 6580 6992 6835 6920 20508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169904.8,      849525,     764316,      85209,     613234,     151082, 454.084897, 609.900000, 836.300000, 2529.900000, 367.939587,  21.877000, 3571.109056, 631.741434
Outstanding requests per worker:
9527 9494 9680 9653 9718 9590 9843 20838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170213.8,      851070,     765711,      85359,     632358,     133353, 560.354727, 797.600000, 976.300000, 2560.600000, 367.730922,  32.028999, 3816.785097, 657.064727
Outstanding requests per worker:
12335 11857 11983 11995 11887 12474 11960 22438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169759.6,      848799,     763908,      84891,     642749,     121159, 669.105017, 992.800000, 1204.500000, 2597.700000, 385.427271,  57.103001, 3901.614904, 675.024830
Outstanding requests per worker:
14910 14615 14484 14674 14622 15201 14884 24401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170163.6,      850819,     766067,      84752,     653106,     112961, 782.345334, 1210.100000, 1460.600000, 2712.800000, 425.845359,  91.877997, 4145.058155, 687.056486
Outstanding requests per worker:
17167 16882 16704 17182 17019 17499 17183 27028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168444.6,      842224,     758197,      84027,     653636,     104561, 912.743681, 1455.900000, 1713.700000, 2910.200000, 475.447801, 128.132001, 4594.776154, 697.401809
Outstanding requests per worker:
20586 20542 20154 20323 20471 20544 20788 30662 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:07   0:00 /usr/lib/linux
memcache      7  350  0.0 520320 192064 pts/0   Sl+  20:07   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21222034475      instructions:u                                              
         413665355      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        5690543768      L1-dcache-loads:u                                           
        1348269568      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10958126518      armv8_pmuv3_0/l1i_cache/:u                                   

      36.430124629 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1332605440
starting receive base loop
num_worker_connections 128
Creating worker on tid 224522752
starting receive base loop
num_worker_connections 128
Creating worker on tid 3405443584
starting receive base loop
num_worker_connections 128
Creating worker on tid 2296836608
starting receive base loop
num_worker_connections 128
Creating worker on tid 1188229632
starting receive base loop
num_worker_connections 128
Creating worker on tid 74183168
starting receive base loop
num_worker_connections 128
Creating worker on tid 3260543488
starting receive base loop
Created 1024 connections total
Creating worker on tid 2146497024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318866.317291,       0.0,      365335,     328657,      36678,     220007,     108650,  92.720638, 221.100000, 306.800000, 1093.300000, 186.217148,   0.000000, 1944.723964, 485.299425
Outstanding requests per worker:
2201 2385 2220 2342 2145 2321 3074 29627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168363.6,      841819,     757549,      84270,     574858,     182691, 401.978746, 660.500000, 1577.400000, 2913.700000, 520.512291,   1.506000, 3780.026913, 583.258712
Outstanding requests per worker:
8723 8787 8797 8733 9016 9147 8824 31426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170195.4,      850978,     765330,      85648,     614615,     150715, 633.787471, 982.800000, 1632.700000, 2975.200000, 494.093870,   7.721000, 3840.876102, 631.936861
Outstanding requests per worker:
13649 13768 13718 13839 14070 13954 13814 34641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170493.4,      852468,     766727,      85741,     633659,     133068, 839.468854, 1326.600000, 1808.500000, 3051.600000, 509.044843,  61.859000, 4067.907810, 657.938661
Outstanding requests per worker:
18370 18268 18321 18465 18561 18741 18201 39028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170016.0,      850081,     765458,      84623,     644026,     121432, 1048.370727, 1679.800000, 2084.600000, 3342.300000, 551.210853, 157.297999, 4432.205200, 674.952255
Outstanding requests per worker:
23397 23397 23366 23407 23018 23298 23335 43632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170212.4,      851063,     765878,      85185,     653325,     112553, 1262.420947, 2023.000000, 2403.500000, 3488.100000, 598.739574, 204.135001, 4615.009785, 687.078519
Outstanding requests per worker:
28008 28045 27581 28217 27774 28410 28545 48162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168645.8,      843230,     759134,      84096,     653717,     105417, 1489.420249, 2391.800000, 2721.800000, 3671.400000, 653.760801, 202.341005, 4891.724110, 696.379220
Outstanding requests per worker:
33768 33474 33301 34361 33667 34155 34061 53713 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:08   0:00 /usr/lib/linux
memcache      7  351  0.0 520320 193728 pts/0   Sl+  20:08   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21271061065      instructions:u                                              
         414977476      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        5689003758      L1-dcache-loads:u                                           
        1347554862      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10951372624      armv8_pmuv3_0/l1i_cache/:u                                   

      37.630430862 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1995960832
starting receive base loop
num_worker_connections 128
Creating worker on tid 887550464
starting receive base loop
num_worker_connections 128
Creating worker on tid 4073910784
starting receive base loop
num_worker_connections 128
Creating worker on tid 2959864320
starting receive base loop
num_worker_connections 128
Creating worker on tid 1851257344
starting receive base loop
num_worker_connections 128
Creating worker on tid 737210880
starting receive base loop
num_worker_connections 128
Creating worker on tid 3923571200
starting receive base loop
Created 1024 connections total
Creating worker on tid 2809524736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318906.317331,       0.0,      364202,     327791,      36411,     219252,     108539,  95.199482, 177.400000, 236.400000, 1067.200000, 172.240501,   0.000000, 1940.894008, 484.690495
Outstanding requests per worker:
2346 2269 2481 2362 2515 2567 2665 27413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169410.2,      847052,     762622,      84430,     579895,     182727, 385.272238, 544.500000, 1491.700000, 2673.300000, 473.331575,   1.753000, 3575.862885, 585.020810
Outstanding requests per worker:
8263 8346 8153 8324 8388 8119 8078 28847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171430.4,      857153,     771367,      85786,     619171,     152196, 577.561869, 793.900000, 1501.200000, 2802.300000, 442.722599,  16.357999, 3888.750076, 632.342202
Outstanding requests per worker:
12372 12837 12454 12445 12434 12337 12199 31273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171294.6,      856474,     770690,      85784,     637129,     133561, 754.596574, 1075.500000, 1541.400000, 2913.900000, 450.871948, 115.801997, 3910.402060, 658.372482
Outstanding requests per worker:
16424 16831 16658 16592 16573 16186 16558 35059 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171463.6,      857319,     771575,      85744,     649197,     122378, 933.454107, 1342.600000, 1753.700000, 3083.200000, 483.242732, 140.858993, 4321.335793, 674.882094
Outstanding requests per worker:
20251 21299 20239 20499 20613 20473 20550 38587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170587.4,      852938,     767882,      85056,     654685,     113197, 1122.994694, 1627.200000, 1989.200000, 3302.700000, 516.457700, 182.633996, 4728.497982, 686.390647
Outstanding requests per worker:
24936 25565 24828 25045 25098 25073 24899 43101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169163.0,      845816,     761281,      84535,     655752,     105529, 1339.137465, 1935.300000, 2289.200000, 3593.000000, 554.415404, 229.304001, 4971.399784, 696.532060
Outstanding requests per worker:
30246 30792 30073 30417 30393 30418 30722 48663 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:08   0:00 /usr/lib/linux
memcache      7  360  0.0 520320 197568 pts/0   Sl+  20:08   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21325712759      instructions:u                                              
         415793099      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        5702591501      L1-dcache-loads:u                                           
        1352904523      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10976090692      armv8_pmuv3_0/l1i_cache/:u                                   

      36.190855770 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1696723456
starting receive base loop
num_worker_connections 85
Creating worker on tid 925430272
starting receive base loop
num_worker_connections 85
Creating worker on tid 160428544
starting receive base loop
num_worker_connections 85
Creating worker on tid 3693015552
starting receive base loop
num_worker_connections 85
Creating worker on tid 2928013824
starting receive base loop
Created 512 connections total
Creating worker on tid 2165633536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318948.317373,       0.0,      344179,     309484,      34695,     206246,     103238,   9.319108,  19.600000,  25.200000,  40.800000,   8.557655,   0.000000, 108.273998, 481.715113
Outstanding requests per worker:
222 182 191 194 227 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149998.7,      749994,     675031,      74963,     510040,     164991,   8.420265,  15.400000,  18.000000,  22.300000,   4.815896,   0.267000,  34.153000, 579.471346
Outstanding requests per worker:
213 229 215 219 209 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150016.8,      750085,     675166,      74919,     537779,     137387,   8.700817,  16.000000,  18.700000,  22.900000,   4.977470,   0.305000,  32.063998, 625.184968
Outstanding requests per worker:
226 217 233 221 212 204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.0,      750026,     674531,      75495,     552916,     121615,   8.900211,  16.300000,  19.100000,  23.900000,   5.120062,   0.256000,  33.239000, 651.092239
Outstanding requests per worker:
219 203 222 211 254 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.6,      750034,     674989,      75045,     563851,     111138,   8.991943,  16.500000,  19.300000,  24.000000,   5.170414,   0.288000,  32.632999, 667.936104
Outstanding requests per worker:
240 241 205 229 209 239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150007.6,      750039,     674556,      75483,     570404,     104152,   9.106162,  16.700000,  19.700000,  24.200000,   5.231727,   0.329000,  33.052001, 679.534578
Outstanding requests per worker:
230 250 231 219 241 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150021.0,      750106,     675024,      75082,     577633,      97391,   9.178156,  16.800000,  19.800000,  24.400000,   5.265969,   0.304000,  35.870999, 690.610162
Outstanding requests per worker:
228 216 239 242 215 222 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:09   0:00 /usr/lib/linux
memcache      7  350  0.0 442048 147008 pts/0   Sl+  20:09   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18337137229      instructions:u                                              
         388112313      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        4794517957      L1-dcache-loads:u                                           
        1246208786      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9730958174      armv8_pmuv3_0/l1i_cache/:u                                   

      37.140474851 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1777136128
starting receive base loop
num_worker_connections 85
Creating worker on tid 1000600064
starting receive base loop
num_worker_connections 85
Creating worker on tid 235598336
starting receive base loop
num_worker_connections 85
Creating worker on tid 3768185344
starting receive base loop
num_worker_connections 85
Creating worker on tid 3003183616
starting receive base loop
Created 512 connections total
Creating worker on tid 2240803328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575318990.317415,       0.0,      355056,     319202,      35854,     213243,     105959,  10.719930,  22.500000,  29.300000,  52.500000,  10.496894,   0.000000, 167.826995, 483.811239
Outstanding requests per worker:
235 249 252 218 218 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153839.8,      769200,     692290,      76910,     524352,     167938,   9.218528,  16.800000,  19.900000,  25.000000,   5.326095,   0.301000,  34.731999, 581.607069
Outstanding requests per worker:
247 244 251 248 253 228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153861.8,      769310,     692783,      76527,     553052,     139731,   9.508449,  17.300000,  20.700000,  25.700000,   5.489661,   0.290000,  34.373999, 627.093736
Outstanding requests per worker:
285 250 206 237 233 241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.6,      769214,     692430,      76784,     568283,     124147,   9.757583,  17.600000,  21.100000,  26.700000,   5.668324,   0.306000,  41.733999, 652.392841
Outstanding requests per worker:
300 238 260 233 245 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153853.6,      769269,     692363,      76906,     579541,     112822,   9.833418,  17.800000,  21.400000,  26.800000,   5.691636,   0.345000,  42.473000, 669.763669
Outstanding requests per worker:
246 299 235 254 253 244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153859.0,      769296,     692554,      76742,     587702,     104852,   9.932615,  17.900000,  21.700000,  26.900000,   5.741056,   0.331000,  39.903000, 682.530917
Outstanding requests per worker:
286 239 283 227 247 235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.2,      769242,     692430,      76812,     593146,      99284,  10.042986,  18.200000,  21.800000,  27.400000,   5.816871,   0.330000,  40.901002, 691.326834
Outstanding requests per worker:
256 271 293 239 247 244 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:10   0:00 /usr/lib/linux
memcache      7  350  0.0 446144 146432 pts/0   Sl+  20:10   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18860703288      instructions:u                                              
         392526411      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        4936253189      L1-dcache-loads:u                                           
        1276401529      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9971498763      armv8_pmuv3_0/l1i_cache/:u                                   

      37.080549227 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.3
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2368467456
starting receive base loop
num_worker_connections 85
Creating worker on tid 1596518912
starting receive base loop
num_worker_connections 85
Creating worker on tid 831517184
starting receive base loop
num_worker_connections 85
Creating worker on tid 69136896
starting receive base loop
num_worker_connections 85
Creating worker on tid 3599102464
starting receive base loop
Created 512 connections total
Creating worker on tid 2836722176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319031.317456,       0.0,      367875,     330979,      36896,     221683,     109296,  14.040056,  29.500000,  39.500000,  76.300000,  15.324524,   0.000000, 254.736006, 485.953335
Outstanding requests per worker:
277 259 283 281 309 274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.4,      789453,     710459,      78994,     539167,     171292,  11.056021,  19.600000,  24.100000,  30.300000,   6.392298,   0.336000,  51.279001, 583.405864
Outstanding requests per worker:
286 293 285 300 290 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.8,      789480,     711007,      78473,     569426,     141581,  11.461923,  20.200000,  25.000000,  31.600000,   6.629744,   0.369000,  54.861002, 630.027223
Outstanding requests per worker:
294 316 351 302 303 293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157908.6,      789544,     710578,      78966,     584780,     125798,  11.708452,  20.600000,  25.500000,  32.400000,   6.795759,   0.353000,  64.025998, 654.142401
Outstanding requests per worker:
309 305 293 298 294 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.8,      789475,     710726,      78749,     595695,     115031,  11.880115,  20.700000,  26.000000,  32.900000,   6.863634,   0.314000,  66.560000, 671.514553
Outstanding requests per worker:
328 312 286 368 290 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.6,      789504,     710859,      78645,     603600,     107259,  12.081379,  20.900000,  26.400000,  33.400000,   6.967157,   0.317000,  65.127999, 682.984090
Outstanding requests per worker:
332 316 331 306 357 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157894.0,      789471,     710315,      79156,     609900,     100415,  12.213898,  21.200000,  26.700000,  34.100000,   7.076786,   0.429000,  64.323999, 693.688375
Outstanding requests per worker:
331 333 348 344 315 335 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:10   0:00 /usr/lib/linux
memcache      7  351  0.0 448192 154944 pts/0   Sl+  20:10   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19440037474      instructions:u                                              
         397596757      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        5098412169      L1-dcache-loads:u                                           
        1296480729      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10177644710      armv8_pmuv3_0/l1i_cache/:u                                   

      37.111545078 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1900933632
starting receive base loop
num_worker_connections 85
Creating worker on tid 1126756864
starting receive base loop
num_worker_connections 85
Creating worker on tid 361755136
starting receive base loop
num_worker_connections 85
Creating worker on tid 3894342144
starting receive base loop
num_worker_connections 85
Creating worker on tid 3129340416
starting receive base loop
Created 512 connections total
Creating worker on tid 2366960128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319073.317498,       0.0,      364572,     327953,      36619,     218951,     109002,  14.937650,  31.900000,  43.900000,  81.600000,  16.209758,   0.000000, 224.718004, 483.786963
Outstanding requests per worker:
289 274 274 281 281 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.0,      789451,     710416,      79035,     538675,     171741,  11.164056,  19.900000,  24.300000,  30.600000,   6.436387,   0.298000,  61.553001, 583.208999
Outstanding requests per worker:
318 335 266 257 287 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157881.2,      789407,     710644,      78763,     568272,     142372,  11.534998,  20.300000,  25.200000,  31.500000,   6.622941,   0.362000,  57.523001, 628.770822
Outstanding requests per worker:
319 333 310 342 298 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157925.6,      789629,     710586,      79043,     584042,     126544,  11.853245,  20.800000,  25.800000,  32.900000,   6.857106,   0.414000,  64.066000, 653.819767
Outstanding requests per worker:
298 290 305 304 330 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157901.2,      789507,     711175,      78332,     595687,     115488,  11.990332,  20.900000,  26.100000,  33.300000,   6.904495,   0.344000,  71.638003, 670.165788
Outstanding requests per worker:
298 280 373 339 304 307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.0,      789501,     710474,      79027,     603318,     107156,  12.240606,  21.500000,  26.400000,  34.400000,   7.099466,   0.376000,  67.575999, 683.534481
Outstanding requests per worker:
315 309 326 330 300 347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.2,      789492,     710083,      79409,     609686,     100397,  12.437520,  21.800000,  26.900000,  35.000000,   7.224965,   0.304000,  68.407997, 693.460346
Outstanding requests per worker:
307 329 309 326 354 352 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:11   0:00 /usr/lib/linux
memcache      7  350  0.0 448192 150976 pts/0   Sl+  20:11   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19363419294      instructions:u                                              
         396398534      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        5090696842      L1-dcache-loads:u                                           
        1289570298      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10148829114      armv8_pmuv3_0/l1i_cache/:u                                   

      37.259615959 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1888547328
starting receive base loop
num_worker_connections 85
Creating worker on tid 1116074496
starting receive base loop
num_worker_connections 85
Creating worker on tid 353694208
starting receive base loop
num_worker_connections 85
Creating worker on tid 3886281216
starting receive base loop
num_worker_connections 85
Creating worker on tid 3121279488
starting receive base loop
Created 512 connections total
Creating worker on tid 2358899200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319115.317540,       0.0,      370702,     333573,      37129,     223448,     110125,  23.380215,  56.300000,  74.700000, 108.400000,  24.734668,   0.000000, 331.708997, 485.815833
Outstanding requests per worker:
390 342 399 339 379 361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.2,      810792,     730065,      80727,     554633,     175432,  14.131737,  24.100000,  30.200000,  40.200000,   8.101817,   0.434000,  76.017000, 584.360490
Outstanding requests per worker:
369 386 373 361 378 439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.4,      810763,     729797,      80966,     584855,     144942,  14.690872,  24.500000,  31.400000,  41.700000,   8.381335,   0.608000,  77.079996, 630.287177
Outstanding requests per worker:
377 395 444 413 411 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.6,      810884,     729526,      81358,     601027,     128499,  15.216888,  25.200000,  32.400000,  43.100000,   8.661723,   0.473000,  83.972000, 655.283721
Outstanding requests per worker:
405 408 448 389 391 432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.0,      810821,     730008,      80813,     612996,     117012,  15.501438,  25.700000,  33.100000,  44.400000,   8.876573,   0.519000,  85.681997, 671.698973
Outstanding requests per worker:
446 424 395 415 428 404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.4,      810878,     729532,      81346,     620689,     108843,  15.805445,  26.200000,  33.600000,  45.100000,   9.038928,   0.474000,  83.195999, 684.836390
Outstanding requests per worker:
461 439 380 412 413 410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161542.4,      807713,     726644,      81069,     625076,     101568,  16.785368,  27.900000,  37.500000,  53.800000,  10.648793,   0.542000, 135.208994, 695.128616
Outstanding requests per worker:
947 940 987 925 911 987 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:12   0:00 /usr/lib/linux
memcache      7  350  0.0 516224 152832 pts/0   Sl+  20:12   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20008065793      instructions:u                                              
         401023096      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        5264308916      L1-dcache-loads:u                                           
        1300532584      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10389422298      armv8_pmuv3_0/l1i_cache/:u                                   

      37.090049861 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1604317696
starting receive base loop
num_worker_connections 85
Creating worker on tid 831517184
starting receive base loop
num_worker_connections 85
Creating worker on tid 69136896
starting receive base loop
num_worker_connections 85
Creating worker on tid 3599102464
starting receive base loop
num_worker_connections 85
Creating worker on tid 2836722176
starting receive base loop
Created 512 connections total
Creating worker on tid 2074341888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319156.317581,       0.0,      369607,     332756,      36851,     222097,     110659,  23.458307,  37.400000,  61.100000, 304.900000,  51.816991,   0.000000, 786.334991, 483.262766
Outstanding requests per worker:
327 359 330 339 357 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.6,      810884,     729993,      80891,     553247,     176746,  12.848691,  22.000000,  27.600000,  35.700000,   7.296893,   0.385000,  70.955999, 583.084260
Outstanding requests per worker:
358 355 335 340 340 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.2,      810737,     729436,      81301,     584679,     144757,  13.444480,  23.100000,  28.700000,  37.700000,   7.714129,   0.419000,  76.250002, 630.712379
Outstanding requests per worker:
375 352 388 374 348 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162131.6,      810659,     729645,      81014,     601314,     128331,  13.923971,  23.800000,  29.800000,  39.500000,   8.001234,   0.387000,  82.781002, 655.723877
Outstanding requests per worker:
444 408 391 426 370 414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162197.4,      810988,     729680,      81308,     612226,     117454,  14.188913,  23.900000,  30.200000,  40.300000,   8.111476,   0.478000,  79.649001, 671.769278
Outstanding requests per worker:
430 364 408 375 397 386 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162179.4,      810898,     729646,      81252,     620899,     108747,  14.456827,  24.300000,  30.800000,  40.700000,   8.227902,   0.575000,  81.228003, 684.415729
Outstanding requests per worker:
378 423 351 404 377 444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161634.2,      808172,     727456,      80716,     625340,     102116,  15.161430,  25.400000,  33.400000,  46.800000,   9.687222,   0.309000, 133.376002, 694.593489
Outstanding requests per worker:
784 900 871 796 876 836 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:12   0:00 /usr/lib/linux
memcache      7  350  0.0 515200 156544 pts/0   Sl+  20:12   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19953412604      instructions:u                                              
         399285439      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        5252069252      L1-dcache-loads:u                                           
        1310970435      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10394090467      armv8_pmuv3_0/l1i_cache/:u                                   

      37.181459024 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2477453824
starting receive base loop
num_worker_connections 85
Creating worker on tid 1703932416
starting receive base loop
num_worker_connections 85
Creating worker on tid 941552128
starting receive base loop
num_worker_connections 85
Creating worker on tid 176550400
starting receive base loop
num_worker_connections 85
Creating worker on tid 3709137408
starting receive base loop
Created 512 connections total
Creating worker on tid 2946757120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319198.317623,       0.0,      371347,     334006,      37341,     223885,     110121,  21.207230,  48.200000,  69.100000, 104.100000,  22.759669,   0.000000, 266.557992, 486.797755
Outstanding requests per worker:
368 319 348 351 367 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.6,      810814,     729798,      81016,     554497,     175301,  13.535202,  22.700000,  29.400000,  37.600000,   7.676260,   0.433000,  71.806997, 584.560511
Outstanding requests per worker:
354 365 374 378 379 337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.2,      810762,     730134,      80628,     585358,     144776,  14.073175,  23.700000,  30.200000,  39.500000,   8.020339,   0.363000,  77.308998, 630.490802
Outstanding requests per worker:
372 430 368 363 402 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.8,      810885,     729281,      81604,     601278,     128003,  14.575725,  24.700000,  30.900000,  41.400000,   8.351744,   0.376000,  80.646001, 656.237640
Outstanding requests per worker:
383 384 414 388 404 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162145.6,      810729,     729599,      81130,     612214,     117385,  14.821419,  24.600000,  31.700000,  42.000000,   8.444866,   0.396000,  79.689004, 672.413860
Outstanding requests per worker:
449 375 415 396 372 446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.6,      810869,     730201,      80668,     621215,     108986,  15.044557,  24.700000,  32.400000,  42.400000,   8.584334,   0.499000,  80.805004, 684.722379
Outstanding requests per worker:
419 398 416 363 440 420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161680.2,      808402,     727613,      80789,     625415,     102198,  15.317935,  25.000000,  32.800000,  43.200000,   8.677743,   0.506000,  79.907000, 694.627373
Outstanding requests per worker:
866 836 828 787 821 799 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:13   0:00 /usr/lib/linux
memcache      7  350  0.0 515200 154624 pts/0   Sl+  20:13   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20037036946      instructions:u                                              
         399351382      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        5263918361      L1-dcache-loads:u                                           
        1305206559      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10375881529      armv8_pmuv3_0/l1i_cache/:u                                   

      37.102077412 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1548415488
starting receive base loop
num_worker_connections 85
Creating worker on tid 772469248
starting receive base loop
num_worker_connections 85
Creating worker on tid 10088960
starting receive base loop
num_worker_connections 85
Creating worker on tid 3540054528
starting receive base loop
num_worker_connections 85
Creating worker on tid 2777674240
starting receive base loop
Created 512 connections total
Creating worker on tid 2015293952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319240.317665,       0.0,      383458,     344961,      38497,     231674,     113287,  33.017720,  76.300000,  89.400000, 124.400000,  30.771701,   0.000000, 377.052009, 487.451216
Outstanding requests per worker:
693 661 693 715 595 650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166907.0,      834536,     751162,      83374,     571491,     179671,  18.362279,  31.900000,  42.300000,  67.200000,  12.231846,   0.625000, 133.674994, 585.945651
Outstanding requests per worker:
511 524 482 454 455 493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166675.4,      833378,     750281,      83097,     602631,     147650,  17.447076,  28.200000,  37.000000,  49.800000,   9.801616,   0.599000,  87.831996, 633.070575
Outstanding requests per worker:
479 495 516 448 515 476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166669.0,      833346,     749847,      83499,     618949,     130898,  17.703376,  28.700000,  37.600000,  50.700000,   9.979872,   0.633000,  96.357003, 656.989955
Outstanding requests per worker:
534 461 503 506 505 484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.0,      833386,     749896,      83490,     630802,     119094,  18.128818,  29.600000,  38.700000,  52.400000,  10.301499,   0.673000,  95.201999, 673.749119
Outstanding requests per worker:
497 512 460 485 504 567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166646.6,      833234,     749970,      83264,     639019,     110951,  18.665509,  30.800000,  40.300000,  55.000000,  10.790130,   0.599000, 107.611999, 685.944631
Outstanding requests per worker:
523 588 550 524 505 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166473.0,      832366,     749025,      83341,     644985,     104040,  21.358220,  39.300000,  51.400000,  73.800000,  14.294534,   0.790000, 130.594999, 696.169348
Outstanding requests per worker:
671 663 846 699 629 747 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:14   0:00 /usr/lib/linux
memcache      7  351  0.0 518272 156480 pts/0   Sl+  20:14   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20610846559      instructions:u                                              
         405939293      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        5438969653      L1-dcache-loads:u                                           
        1337066058      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10675871901      armv8_pmuv3_0/l1i_cache/:u                                   

      37.121028141 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1569387008
starting receive base loop
num_worker_connections 85
Creating worker on tid 799273472
starting receive base loop
num_worker_connections 85
Creating worker on tid 34271744
starting receive base loop
num_worker_connections 85
Creating worker on tid 3566858752
starting receive base loop
num_worker_connections 85
Creating worker on tid 2801857024
starting receive base loop
Created 512 connections total
Creating worker on tid 2039476736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319283.317708,       0.0,      379124,     341049,      38075,     229029,     112020,  38.993328,  87.000000, 104.400000, 146.100000,  35.891270,   0.000000, 378.710002, 486.895253
Outstanding requests per worker:
787 905 1002 899 822 960 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166708.8,      833545,     750556,      82989,     570667,     179889,  31.031033,  78.100000,  92.400000, 125.400000,  28.662299,   0.560000, 216.078997, 585.296294
Outstanding requests per worker:
808 881 951 826 923 867 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166513.8,      832570,     749826,      82744,     601408,     148418,  35.117327,  92.300000, 113.700000, 147.500000,  35.294270,   0.593000, 243.786007, 631.331800
Outstanding requests per worker:
1036 980 1084 1027 987 1012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166453.2,      832267,     749507,      82760,     618054,     131453,  40.640424, 116.000000, 138.700000, 179.900000,  44.122044,   0.498000, 279.343992, 656.355351
Outstanding requests per worker:
1208 1162 1261 1258 1134 1221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166575.0,      832876,     749616,      83260,     629660,     119956,  45.515636, 134.800000, 158.800000, 204.400000,  51.989751,   0.668000, 330.790997, 672.793098
Outstanding requests per worker:
1203 1208 1365 1404 1326 1261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166728.8,      833645,     750040,      83605,     638679,     111361,  45.887552, 135.100000, 158.600000, 203.900000,  51.872615,   0.633000, 332.084000, 685.790638
Outstanding requests per worker:
1182 1307 1350 1192 1216 1286 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165121.8,      825610,     743290,      82320,     639214,     104076,  53.329611, 141.400000, 165.000000, 209.100000,  54.778681,   0.821000, 397.610992, 694.956284
Outstanding requests per worker:
2412 2363 2655 2715 2647 2570 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:15   0:00 /usr/lib/linux
memcache      7  341  0.0 517248 155776 pts/0   Sl+  20:15   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20671520393      instructions:u                                              
         408979528      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        5482094510      L1-dcache-loads:u                                           
        1334176812      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10704825184      armv8_pmuv3_0/l1i_cache/:u                                   

      38.560612449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1665266176
starting receive base loop
num_worker_connections 85
Creating worker on tid 890565120
starting receive base loop
num_worker_connections 85
Creating worker on tid 128184832
starting receive base loop
num_worker_connections 85
Creating worker on tid 3658150400
starting receive base loop
num_worker_connections 85
Creating worker on tid 2895770112
starting receive base loop
Created 512 connections total
Creating worker on tid 2130768384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319326.317751,       0.0,      379443,     341343,      38100,     229737,     111606,  63.020150, 115.500000, 132.500000, 218.300000,  46.257756,   0.000000, 435.828000, 488.566146
Outstanding requests per worker:
2407 2279 2415 2499 2401 2743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170213.8,      851070,     765968,      85102,     583526,     182442, 105.476620, 162.600000, 188.700000, 236.100000,  43.629221,   1.489000, 415.627986, 586.930886
Outstanding requests per worker:
3270 3493 3616 3517 3511 3460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170750.0,      853751,     768531,      85220,     617748,     150783, 130.427094, 205.100000, 238.200000, 300.900000,  55.351660,   1.665000, 443.758011, 633.449736
Outstanding requests per worker:
3739 3889 4253 4161 4137 4144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170840.4,      854203,     768476,      85727,     635124,     133352, 150.220243, 242.100000, 281.700000, 366.600000,  66.957776,   1.661000, 626.636028, 658.306629
Outstanding requests per worker:
4222 4423 4689 4826 4515 4637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170854.6,      854274,     769425,      84849,     647825,     121600, 167.843611, 269.800000, 320.700000, 448.500000,  78.542602,   3.168000, 760.505974, 675.438366
Outstanding requests per worker:
4606 4693 5269 5280 5267 5115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170961.6,      854809,     769497,      85312,     655849,     113648, 181.996698, 309.500000, 384.300000, 513.200000,  95.382215,   1.743000, 912.006974, 686.870083
Outstanding requests per worker:
5046 5043 5739 5857 5407 5524 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170726.8,      853635,     768437,      85198,     662297,     106140, 199.476337, 347.800000, 425.100000, 562.200000, 107.504258,   4.030000, 944.221973, 696.787631
Outstanding requests per worker:
5259 5776 6407 6023 6337 6376 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:15   0:00 /usr/lib/linux
memcache      7  341  0.0 521344 162368 pts/0   Sl+  20:15   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21530235295      instructions:u                                              
         430834202      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        5786074147      L1-dcache-loads:u                                           
        1387580370      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11185904817      armv8_pmuv3_0/l1i_cache/:u                                   

      38.530867046 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2422075904
starting receive base loop
num_worker_connections 85
Creating worker on tid 1652945408
starting receive base loop
num_worker_connections 85
Creating worker on tid 890565120
starting receive base loop
num_worker_connections 85
Creating worker on tid 128184832
starting receive base loop
num_worker_connections 85
Creating worker on tid 3658150400
starting receive base loop
Created 512 connections total
Creating worker on tid 2895770112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319368.317793,       0.0,      382178,     343998,      38180,     231113,     112885,  59.590558, 111.200000, 128.200000, 181.300000,  43.469827,   0.000000, 427.635014, 487.344322
Outstanding requests per worker:
2258 2282 2273 2335 2272 2387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170631.4,      853158,     768173,      84985,     584507,     183666,  92.921721, 148.600000, 169.400000, 203.400000,  43.216264,   1.022000, 323.206007, 585.675185
Outstanding requests per worker:
2890 2923 3057 2988 2977 3064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170580.4,      852903,     768003,      84900,     617342,     150661, 116.532120, 183.700000, 204.900000, 254.900000,  49.305257,   2.126000, 438.142002, 633.505603
Outstanding requests per worker:
3492 3493 3761 3817 3848 3784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170752.8,      853765,     768198,      85567,     635138,     133060, 138.517105, 217.000000, 251.600000, 312.000000,  57.894504,   1.953000, 439.361006, 658.182474
Outstanding requests per worker:
4154 4042 4619 4205 4210 4422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171293.0,      856466,     771036,      85430,     649472,     121564, 151.723952, 240.600000, 273.300000, 337.000000,  63.449230,   1.973000, 563.911974, 675.940686
Outstanding requests per worker:
4228 4145 4549 4483 4471 4513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171083.8,      855420,     769448,      85972,     656542,     112906, 159.251415, 252.600000, 288.900000, 359.900000,  66.819724,   2.291000, 525.680006, 687.584264
Outstanding requests per worker:
4324 4474 4923 4795 4843 4856 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170678.4,      853393,     767549,      85844,     662175,     105374, 174.316193, 268.300000, 313.200000, 418.700000,  74.592504,   2.964000, 646.366000, 697.438631
Outstanding requests per worker:
4958 4811 5496 5645 5595 5509 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:16   0:00 /usr/lib/linux
memcache      7  350  0.0 521344 166528 pts/0   Sl+  20:16   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21591456392      instructions:u                                              
         429672134      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        5788132157      L1-dcache-loads:u                                           
        1382228085      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11190525542      armv8_pmuv3_0/l1i_cache/:u                                   

      37.171206729 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2364994048
starting receive base loop
num_worker_connections 85
Creating worker on tid 1593897472
starting receive base loop
num_worker_connections 85
Creating worker on tid 831517184
starting receive base loop
num_worker_connections 85
Creating worker on tid 69136896
starting receive base loop
num_worker_connections 85
Creating worker on tid 3599102464
starting receive base loop
Created 512 connections total
Creating worker on tid 2836722176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319410.317835,       0.0,      386679,     347628,      39051,     233420,     114208,  77.122631, 138.500000, 163.100000, 286.600000,  56.953922,   0.000000, 479.892999, 488.050154
Outstanding requests per worker:
3205 3238 3511 3306 3362 3928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174259.8,      871300,     784691,      86609,     597829,     186862, 151.918995, 227.300000, 258.500000, 329.600000,  57.526561,   4.069000, 527.628005, 586.787776
Outstanding requests per worker:
4862 4995 5308 5561 5344 5594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174768.4,      873843,     786851,      86992,     632985,     153866, 202.550759, 319.400000, 374.300000, 492.000000,  88.024344,   6.793000, 876.743019, 633.525371
Outstanding requests per worker:
6288 6338 6807 7190 6723 6906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174724.4,      873623,     786122,      87501,     650537,     135585, 248.072423, 415.900000, 504.500000, 683.600000, 123.834547,  15.141000, 1020.169973, 659.172210
Outstanding requests per worker:
7503 7454 8426 8736 8381 8537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174629.0,      873146,     785655,      87491,     662204,     123451, 299.647749, 536.600000, 657.800000, 904.000000, 167.394737,  22.260001, 1309.931040, 675.826062
Outstanding requests per worker:
8547 8498 10184 10616 10062 10394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174824.2,      874122,     786928,      87194,     672244,     114684, 350.727472, 687.100000, 848.700000, 1059.600000, 213.584199,  31.298000, 1283.074975, 688.850027
Outstanding requests per worker:
9843 9359 11794 11972 11789 11846 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173954.0,      869771,     782531,      87240,     675518,     107013, 410.528224, 808.500000, 986.700000, 1238.800000, 254.998681,  35.447001, 1534.988999, 697.990804
Outstanding requests per worker:
11069 11399 13974 14570 14165 14084 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:17   0:00 /usr/lib/linux
memcache      7  350  0.0 522368 169984 pts/0   Sl+  20:17   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21920879954      instructions:u                                              
         426860434      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        5879095776      L1-dcache-loads:u                                           
        1391389126      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11294462509      armv8_pmuv3_0/l1i_cache/:u                                   

      37.100003828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1588326912
starting receive base loop
num_worker_connections 85
Creating worker on tid 815395328
starting receive base loop
num_worker_connections 85
Creating worker on tid 50393600
starting receive base loop
num_worker_connections 85
Creating worker on tid 3582980608
starting receive base loop
num_worker_connections 85
Creating worker on tid 2820600320
starting receive base loop
Created 512 connections total
Creating worker on tid 2055598592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319452.317877,       0.0,      387975,     348700,      39275,     234207,     114493,  82.177996, 142.400000, 165.100000, 255.300000,  55.549451,   0.000000, 460.557997, 487.557640
Outstanding requests per worker:
3408 3540 3703 3560 3676 4222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173634.0,      868171,     781856,      86315,     596506,     185350, 170.369050, 250.500000, 282.100000, 353.100000,  61.283089,   3.145000, 584.396005, 587.438761
Outstanding requests per worker:
5838 5569 6251 6251 6119 6367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174119.6,      870599,     784234,      86365,     631714,     152520, 239.017149, 362.600000, 422.100000, 538.200000,  91.380175,  17.085999, 774.492979, 634.475417
Outstanding requests per worker:
7343 7247 8567 8111 8408 8591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173983.4,      869918,     782683,      87235,     648104,     134579, 309.234423, 492.300000, 569.700000, 730.700000, 128.250190,  32.956999, 1024.546981, 660.029592
Outstanding requests per worker:
9258 9136 10954 10228 10597 10601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173869.2,      869347,     782644,      86703,     659759,     122885, 381.730820, 620.100000, 721.600000, 928.000000, 170.647233,  35.714999, 1391.767979, 675.908822
Outstanding requests per worker:
10669 10698 13600 12819 13120 12954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174040.6,      870204,     783338,      86866,     668479,     114859, 452.805197, 773.900000, 894.900000, 1094.800000, 218.901564,  40.006999, 1423.017025, 687.813122
Outstanding requests per worker:
12083 12086 15891 15225 15443 15381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172784.8,      863925,     777498,      86427,     670395,     107103, 534.749868, 919.500000, 1068.400000, 1301.400000, 267.931687,  45.175999, 1688.732028, 697.803341
Outstanding requests per worker:
14304 14809 19189 18477 18770 19112 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:17   0:00 /usr/lib/linux
memcache      7  350  0.0 521344 177088 pts/0   Sl+  20:17   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21782920611      instructions:u                                              
         423049360      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        5840839072      L1-dcache-loads:u                                           
        1379927193      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11228442587      armv8_pmuv3_0/l1i_cache/:u                                   

      37.210315855 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2423845376
starting receive base loop
num_worker_connections 85
Creating worker on tid 1652945408
starting receive base loop
num_worker_connections 85
Creating worker on tid 890565120
starting receive base loop
num_worker_connections 85
Creating worker on tid 128184832
starting receive base loop
num_worker_connections 85
Creating worker on tid 3658150400
starting receive base loop
Created 512 connections total
Creating worker on tid 2895770112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319494.317919,       0.0,      388486,     349233,      39253,     235121,     114112,  76.140474, 136.500000, 160.100000, 288.800000,  59.537120,   0.000000, 618.808985, 489.126686
Outstanding requests per worker:
3207 3016 3330 3503 3456 3941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174150.8,      870755,     783743,      87012,     597478,     186265, 153.041207, 233.400000, 266.800000, 349.800000,  61.874678,   2.437000, 630.757987, 587.701499
Outstanding requests per worker:
5225 4743 5471 5581 5433 5695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174861.8,      874310,     786919,      87391,     633371,     153548, 206.864313, 326.000000, 386.900000, 495.600000,  87.928079,   6.806000, 658.132970, 633.958322
Outstanding requests per worker:
6233 6048 7046 6929 6921 7123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174825.8,      874130,     787015,      87115,     651883,     135132, 250.345126, 429.500000, 524.800000, 681.700000, 125.879231,  10.086000, 980.823994, 659.679700
Outstanding requests per worker:
7216 7402 8334 8884 8209 8546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174700.0,      873501,     785768,      87733,     662489,     123279, 298.160922, 549.200000, 674.300000, 877.600000, 169.034195,  24.463000, 1183.730006, 676.168905
Outstanding requests per worker:
8567 8618 10034 10568 9726 10009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174752.6,      873764,     786202,      87562,     671134,     115068, 347.177811, 688.300000, 823.900000, 1027.900000, 213.522771,   6.049000, 1361.507058, 688.393197
Outstanding requests per worker:
9580 9864 11881 12298 10868 11678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173862.8,      869315,     782670,      86645,     675144,     107526, 409.799500, 825.400000, 985.900000, 1231.000000, 257.834111,  17.328000, 1682.646990, 697.608981
Outstanding requests per worker:
10956 11495 14442 15084 13197 14083 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:18   0:00 /usr/lib/linux
memcache      7  341  0.0 524416 174016 pts/0   Sl+  20:18   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21960225505      instructions:u                                              
         431872540      L1-dcache-load-misses:u   # [33m   7.34%[m of all L1-dcache hits  
        5886141809      L1-dcache-loads:u                                           
        1394089652      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11306788576      armv8_pmuv3_0/l1i_cache/:u                                   

      38.490856507 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2162946560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1569911296
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319537.317962,       0.0,      357542,     321971,      35571,     214999,     106972,  10.543965,  22.900000,  29.100000,  52.200000,  10.940187,   0.000000, 155.011997, 484.029605
Outstanding requests per worker:
192 189 159 159 212 155 173 174 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150946.4,      754733,     679823,      74910,     514358,     165465,   9.439232,  17.700000,  21.500000,  27.200000,   6.001656,   0.182000,  40.686000, 580.767932
Outstanding requests per worker:
168 178 213 192 180 157 185 171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.0,      754711,     679738,      74973,     542166,     137572,   9.833239,  18.400000,  22.300000,  28.400000,   6.277692,   0.186000,  56.163002, 626.548576
Outstanding requests per worker:
204 213 184 186 199 171 190 155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150944.2,      754722,     679121,      75601,     555739,     123382,  10.248627,  19.300000,  23.100000,  31.100000,   6.648406,   0.198000,  61.048999, 649.421072
Outstanding requests per worker:
181 178 219 206 191 227 183 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150953.2,      754767,     679954,      74813,     568192,     111762,  10.448344,  19.500000,  23.600000,  31.100000,   6.735464,   0.199000,  65.130003, 667.979782
Outstanding requests per worker:
198 172 206 208 188 178 221 194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150921.8,      754610,     679030,      75580,     575007,     104023,  10.627239,  20.000000,  23.900000,  31.900000,   6.882810,   0.184000,  63.109003, 680.535243
Outstanding requests per worker:
251 206 227 208 199 224 186 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150974.8,      754875,     679280,      75595,     581382,      97898,  10.663373,  19.900000,  24.300000,  31.100000,   6.824980,   0.202000,  59.767999, 690.543231
Outstanding requests per worker:
174 223 182 176 220 215 205 205 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  20:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:19   0:00 /usr/lib/linux
memcache      7  342  0.0 443072 142208 pts/0   Sl+  20:19   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18575127045      instructions:u                                              
         390416684      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        4850501983      L1-dcache-loads:u                                           
        1247634574      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9778859289      armv8_pmuv3_0/l1i_cache/:u                                   

      38.330983535 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2402021888
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319579.318004,       0.0,      368324,     331357,      36967,     221111,     110246,  12.539514,  27.300000,  35.000000,  68.400000,  13.785864,   0.000000, 221.388996, 483.492396
Outstanding requests per worker:
173 177 189 201 192 224 194 187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153824.8,      769125,     692354,      76771,     524970,     167384,  10.981371,  20.600000,  24.700000,  33.300000,   7.144489,   0.190000,  69.597997, 582.771651
Outstanding requests per worker:
210 216 232 208 194 214 233 215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153839.6,      769199,     692548,      76651,     552780,     139768,  11.584346,  21.600000,  26.000000,  35.100000,   7.517378,   0.194000,  72.053999, 627.281803
Outstanding requests per worker:
262 201 248 226 208 218 211 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153833.4,      769168,     691975,      77193,     569270,     122705,  12.021037,  22.400000,  26.900000,  36.800000,   7.836817,   0.228000,  78.680001, 653.638481
Outstanding requests per worker:
247 258 211 210 263 248 249 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.8,      769260,     692621,      76639,     580002,     112619,  12.459652,  23.300000,  27.700000,  38.700000,   8.161221,   0.231000,  81.471004, 670.731520
Outstanding requests per worker:
238 246 227 263 238 233 252 247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.4,      769288,     692111,      77177,     587632,     104479,  12.749505,  23.500000,  28.200000,  39.800000,   8.334560,   0.180000,  81.573002, 682.720815
Outstanding requests per worker:
231 230 286 263 213 227 255 254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.6,      769244,     692713,      76531,     593924,      98789,  12.860246,  23.800000,  28.600000,  39.500000,   8.369516,   0.183000,  76.847002, 692.567436
Outstanding requests per worker:
272 245 229 265 234 257 261 230 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:19   0:00 /usr/lib/linux
memcache      7  351  0.0 446144 144128 pts/0   Sl+  20:19   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18972153873      instructions:u                                              
         386061423      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4982754743      L1-dcache-loads:u                                           
        1254821866      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9916717595      armv8_pmuv3_0/l1i_cache/:u                                   

      37.160790824 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1695412736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319621.318046,       0.0,      475832,     428014,      47818,     291639,     136375,  10.345899,  23.900000,  31.100000,  51.700000,  12.303298,   0.000000, 180.252999, 498.716299
Outstanding requests per worker:
263 248 227 305 251 276 249 246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156842.6,      784214,     705926,      78288,     540421,     165505,  13.638584,  23.900000,  30.500000,  41.200000,   8.678400,   0.244000,  79.127997, 590.894775
Outstanding requests per worker:
276 287 281 285 307 245 289 252 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.0,      784341,     706378,      77963,     567624,     138754,  14.446364,  25.300000,  32.200000,  44.000000,   9.229771,   0.194000,  80.610998, 632.633832
Outstanding requests per worker:
301 251 301 268 259 259 295 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156847.8,      784240,     705947,      78293,     581777,     124170,  14.991925,  25.900000,  33.400000,  45.300000,   9.502117,   0.229000,  84.187999, 655.934421
Outstanding requests per worker:
283 347 310 269 304 329 290 282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.0,      784346,     706263,      78083,     592581,     113682,  15.550212,  27.300000,  34.700000,  48.000000,  10.058693,   0.298000,  99.073000, 671.864611
Outstanding requests per worker:
375 338 347 256 272 319 265 287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156857.0,      784286,     705881,      78405,     599868,     106013,  15.866870,  27.400000,  35.200000,  48.600000,  10.144555,   0.240000,  90.451002, 684.087741
Outstanding requests per worker:
307 376 298 299 286 350 303 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156885.2,      784427,     705509,      78918,     606195,      99314,  16.111051,  27.500000,  35.800000,  49.100000,  10.244919,   0.233000,  91.378003, 693.871520
Outstanding requests per worker:
281 295 305 333 282 388 324 274 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:20   0:00 /usr/lib/linux
memcache      7  351  0.0 449216 156288 pts/0   Sl+  20:20   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19776398479      instructions:u                                              
         401814181      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        5196171745      L1-dcache-loads:u                                           
        1302805828      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10352345429      armv8_pmuv3_0/l1i_cache/:u                                   

      38.130348555 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2297426432
starting receive base loop
num_worker_connections 64
Creating worker on tid 1704129024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
Created 512 connections total
Creating worker on tid 2426204672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319663.318088,       0.0,      374701,     336961,      37740,     226420,     110541,  16.493444,  35.900000,  50.400000,  89.100000,  18.724662,   0.000000, 280.176014, 487.949481
Outstanding requests per worker:
265 256 226 276 205 253 236 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.4,      784273,     705958,      78315,     534980,     170978,  12.745786,  23.100000,  28.300000,  38.800000,   8.196654,   0.234000,  77.955000, 582.464011
Outstanding requests per worker:
264 251 265 261 238 251 278 261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.0,      784276,     705364,      78912,     564713,     140651,  13.717051,  24.400000,  30.400000,  41.900000,   8.792728,   0.236000,  81.772000, 629.405652
Outstanding requests per worker:
226 279 288 298 275 281 279 266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156860.6,      784304,     705785,      78519,     580758,     125027,  14.260441,  25.300000,  31.600000,  43.900000,   9.186602,   0.240000,  88.487998, 654.294411
Outstanding requests per worker:
345 284 275 293 284 239 285 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156866.2,      784332,     706149,      78183,     591900,     114249,  14.652231,  26.000000,  32.300000,  45.500000,   9.482765,   0.184000,  90.664998, 671.536197
Outstanding requests per worker:
236 296 270 248 323 367 296 241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156863.8,      784320,     705904,      78416,     600073,     105831,  15.053031,  26.300000,  33.300000,  46.100000,   9.615151,   0.233000,  85.910998, 684.384061
Outstanding requests per worker:
274 341 297 294 306 249 329 254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156870.2,      784352,     705986,      78366,     606129,      99857,  15.282058,  27.000000,  33.800000,  46.900000,   9.850346,   0.233000,  89.947000, 693.920384
Outstanding requests per worker:
281 299 307 338 313 280 297 279 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:21   0:00 /usr/lib/linux
memcache      7  342  0.0 448192 150464 pts/0   Sl+  20:21   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19380339600      instructions:u                                              
         393064163      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        5100445772      L1-dcache-loads:u                                           
        1268969075      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10085839077      armv8_pmuv3_0/l1i_cache/:u                                   

      37.210499110 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2105733632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1513484800
starting receive base loop
num_worker_connections 64
Creating worker on tid 917565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 321647104
starting receive base loop
num_worker_connections 64
Creating worker on tid 4020695552
starting receive base loop
num_worker_connections 64
Creating worker on tid 3424776704
starting receive base loop
num_worker_connections 64
Creating worker on tid 2828857856
starting receive base loop
Created 512 connections total
Creating worker on tid 2232939008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319705.318130,       0.0,      380418,     342093,      38325,     229217,     112876,  29.811315,  72.100000,  85.600000, 120.400000,  29.934841,   0.000000, 368.984014, 487.003119
Outstanding requests per worker:
505 521 442 542 601 556 510 631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159716.0,      798581,     718543,      80038,     546135,     172408,  31.707575,  84.800000, 102.100000, 140.500000,  32.611941,   0.284000, 250.667989, 584.784699
Outstanding requests per worker:
827 736 695 721 835 708 665 647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159726.8,      798635,     718940,      79695,     576148,     142792,  43.502067, 130.500000, 155.800000, 206.100000,  51.219077,   0.277000, 321.051002, 630.606042
Outstanding requests per worker:
897 918 906 882 844 1001 921 880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159799.0,      798996,     718915,      80081,     592609,     126306,  48.659813, 150.100000, 177.400000, 224.300000,  58.683549,   0.332000, 382.438004, 655.833894
Outstanding requests per worker:
1045 1075 999 1078 1073 1010 1008 1041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159779.8,      798900,     719155,      79745,     603152,     116003,  54.750053, 172.600000, 208.300000, 262.200000,  68.990245,   0.371000, 447.367996, 671.161534
Outstanding requests per worker:
1035 1295 1162 1264 1243 1144 1258 1108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159814.0,      799071,     719427,      79644,     611429,     107998,  63.334678, 208.900000, 247.800000, 318.500000,  83.865460,   0.295000, 484.923989, 684.034693
Outstanding requests per worker:
1295 1366 1267 1259 1382 1205 1412 1363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159790.6,      798954,     718840,      80114,     617958,     100882,  69.184847, 229.400000, 272.700000, 343.400000,  93.336600,   0.332000, 582.581997, 694.980833
Outstanding requests per worker:
1480 1442 1233 1394 1543 1578 1404 1569 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:22   0:00 /usr/lib/linux
memcache      7  351  0.0 449216 159232 pts/0   Sl+  20:22   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19905101987      instructions:u                                              
         392583877      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        5271745438      L1-dcache-loads:u                                           
        1283124386      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10308204116      armv8_pmuv3_0/l1i_cache/:u                                   

      37.201234787 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1611657728
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
num_worker_connections 64
Creating worker on tid 2334913024
starting receive base loop
Created 512 connections total
Creating worker on tid 1738994176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319747.318172,       0.0,      381911,     343727,      38184,     231003,     112724,  25.849267,  65.100000,  80.900000, 116.800000,  28.077147,   0.000000, 352.380991, 488.034236
Outstanding requests per worker:
516 443 560 480 473 510 440 516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159697.4,      798488,     718606,      79882,     545966,     172640,  28.075529,  74.800000,  91.200000, 125.400000,  28.564509,   0.184000, 218.915001, 584.342977
Outstanding requests per worker:
674 655 647 646 721 759 724 705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159788.4,      798943,     718811,      80132,     575790,     143021,  38.253929, 111.200000, 136.500000, 176.600000,  43.696710,   0.322000, 315.807998, 629.918934
Outstanding requests per worker:
751 872 917 742 903 853 816 830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159809.0,      799046,     719006,      80040,     592752,     126254,  43.831911, 133.200000, 156.500000, 204.900000,  52.005778,   0.275000, 341.387004, 656.147348
Outstanding requests per worker:
884 947 958 993 934 1010 1005 947 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159924.8,      799625,     719946,      79679,     604400,     115546,  49.128809, 153.300000, 183.000000, 235.800000,  60.926067,   0.281000, 350.225002, 672.981425
Outstanding requests per worker:
1108 923 952 1018 1060 957 1100 1007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159805.6,      799029,     718958,      80071,     611678,     107280,  52.613113, 166.500000, 199.100000, 254.500000,  66.656569,   0.290000, 438.401997, 685.022074
Outstanding requests per worker:
1236 1172 1086 1194 1071 1064 1171 1168 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160038.0,      800191,     720202,      79989,     618945,     101257,  55.609699, 177.500000, 212.300000, 273.400000,  71.674674,   0.327000, 445.764989, 694.347700
Outstanding requests per worker:
1044 1256 1147 1076 1122 1073 1164 1183 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:22   0:00 /usr/lib/linux
memcache      7  342  0.0 449216 155392 pts/0   Sl+  20:22   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19867827270      instructions:u                                              
         399472588      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        5266719336      L1-dcache-loads:u                                           
        1289865774      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10341064861      armv8_pmuv3_0/l1i_cache/:u                                   

      38.409657433 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1821241856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
num_worker_connections 64
Creating worker on tid 37089792
starting receive base loop
num_worker_connections 64
Creating worker on tid 3736138240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3140219392
starting receive base loop
num_worker_connections 64
Creating worker on tid 2544300544
starting receive base loop
Created 512 connections total
Creating worker on tid 1948381696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319790.318215,       0.0,      387101,     347910,      39191,     233620,     114290,  46.927580,  94.500000, 114.600000, 247.800000,  52.093188,   0.000000, 714.448988, 488.042336
Outstanding requests per worker:
1479 1413 1441 1444 1382 1416 1418 1812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161331.2,      806657,     726369,      80288,     552787,     173582, 106.109426, 165.400000, 189.600000, 228.700000,  45.084500,   0.278000, 367.594987, 586.185954
Outstanding requests per worker:
2795 2515 2771 2742 2709 2662 2723 2636 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162262.8,      811315,     730000,      81315,     585669,     144331, 149.270512, 225.400000, 255.100000, 317.200000,  58.394558,   0.902000, 509.719014, 631.638174
Outstanding requests per worker:
3210 3393 3140 3391 3214 3228 3483 3603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162279.2,      811397,     729923,      81474,     601890,     128033, 179.232600, 275.700000, 317.800000, 404.200000,  73.869130,   0.421000, 777.613997, 656.457647
Outstanding requests per worker:
3737 3663 3981 4010 4123 4038 4029 4058 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162432.6,      812164,     731062,      81102,     614128,     116934, 206.721708, 332.800000, 388.000000, 491.100000,  91.128464,   1.754000, 731.947005, 673.102186
Outstanding requests per worker:
4269 4430 4436 4652 4344 4356 4795 4584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162517.0,      812586,     731363,      81223,     622203,     109160, 230.247697, 384.700000, 469.400000, 616.700000, 113.759426,   2.805000, 897.222996, 684.965970
Outstanding requests per worker:
4679 5114 5014 5045 4522 4930 5241 5136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161650.2,      808252,     727354,      80898,     625114,     102240, 255.204483, 456.400000, 567.800000, 772.700000, 142.315670,   1.906000, 1056.324005, 694.070128
Outstanding requests per worker:
5986 6019 6076 6019 5700 5886 6032 6146 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:23   0:00 /usr/lib/linux
memcache      7  334  0.0 515200 161152 pts/0   Sl+  20:23   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20559155561      instructions:u                                              
         408035084      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        5503592379      L1-dcache-loads:u                                           
        1317703609      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10635852171      armv8_pmuv3_0/l1i_cache/:u                                   

      38.601329876 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1779364352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
num_worker_connections 64
Creating worker on tid 2501374464
starting receive base loop
Created 512 connections total
Creating worker on tid 1908077056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319832.318257,       0.0,      382237,     343889,      38348,     231370,     112519,  63.142934, 121.900000, 145.200000, 353.300000,  65.575952,   0.000000, 741.832972, 488.722948
Outstanding requests per worker:
2123 2105 2087 2215 2103 2181 2090 3045 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164238.0,      821191,     739346,      81845,     562340,     177006, 149.565594, 226.700000, 268.000000, 373.200000,  65.477964,   0.675000, 692.762017, 585.390482
Outstanding requests per worker:
3790 3743 3882 3503 3766 3753 3704 4057 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164818.6,      824094,     742031,      82063,     595309,     146722, 209.192511, 329.300000, 390.300000, 523.900000,  90.320420,   1.905000, 742.026985, 631.300176
Outstanding requests per worker:
5070 5051 4834 4775 4852 4841 4859 5207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165031.2,      825157,     742844,      82313,     612883,     129961, 261.041343, 414.000000, 502.500000, 690.000000, 118.929013,  16.447000, 1086.359978, 656.648302
Outstanding requests per worker:
6167 6014 5698 5692 5886 6021 5999 6265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164962.8,      824815,     742066,      82749,     623170,     118896, 311.071194, 526.900000, 645.400000, 867.300000, 156.968135,  12.311000, 1184.852958, 672.740173
Outstanding requests per worker:
7307 7108 6841 6754 7045 6768 7178 7344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164889.2,      824447,     741875,      82572,     631825,     110050, 362.258216, 655.900000, 784.300000, 1021.500000, 196.572539,  20.725001, 1420.647979, 686.138478
Outstanding requests per worker:
8274 8181 7996 7515 8574 8092 8416 8272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164112.8,      820565,     738260,      82305,     635266,     102994, 419.223223, 788.000000, 947.800000, 1211.800000, 242.276761,  57.672001, 1694.996953, 695.596833
Outstanding requests per worker:
9978 9900 9190 9504 10012 9758 10107 9692 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:24   0:00 /usr/lib/linux
memcache      7  352  0.0 516224 164224 pts/0   Sl+  20:24   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20743747968      instructions:u                                              
         410891026      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        5554274439      L1-dcache-loads:u                                           
        1328504526      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10748769005      armv8_pmuv3_0/l1i_cache/:u                                   

      37.161534225 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1593504256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
num_worker_connections 64
Creating worker on tid 2318791168
starting receive base loop
Created 512 connections total
Creating worker on tid 1722872320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319876.318301,       0.0,      491696,     442414,      49282,     303712,     138702,  35.262641,  92.600000, 113.400000, 159.100000,  41.610725,   0.000000, 423.660994, 503.637276
Outstanding requests per worker:
1685 1569 1641 1668 1705 1685 1713 1787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163662.4,      818313,     736232,      82081,     567090,     169142, 132.089054, 212.300000, 245.000000, 305.500000,  61.153954,   0.628000, 640.268028, 595.195808
Outstanding requests per worker:
3454 3487 3505 3461 3639 3752 3568 3709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164769.8,      823850,     741742,      82108,     598484,     143258, 201.030209, 316.200000, 368.200000, 480.200000,  86.132263,   1.384000, 722.652018, 635.692493
Outstanding requests per worker:
5085 4588 4659 4954 4670 4629 4781 4799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164996.0,      824981,     742534,      82447,     614715,     127819, 252.434815, 410.800000, 499.200000, 650.400000, 118.807023,   1.243000, 959.450006, 659.454619
Outstanding requests per worker:
5851 5577 5890 5990 5877 5658 5658 6074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165041.2,      825207,     742860,      82347,     625789,     117071, 303.702405, 529.400000, 629.100000, 810.600000, 154.808363,  22.069000, 1249.117017, 675.398891
Outstanding requests per worker:
6895 6848 6918 6980 7069 6901 6589 6579 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164964.0,      824821,     742688,      82133,     633263,     109425, 354.418701, 671.000000, 795.100000, 995.400000, 205.250075,  18.228000, 1297.834992, 686.816718
Outstanding requests per worker:
7839 7938 8136 7772 7868 7999 7749 8082 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164290.4,      821453,     739385,      82068,     636591,     102794, 411.582164, 805.200000, 956.100000, 1174.300000, 250.598326,  11.062000, 1512.017012, 695.823636
Outstanding requests per worker:
9195 9518 9721 9181 9409 9404 9361 9589 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:24   0:00 /usr/lib/linux
memcache      7  334  0.0 519296 171520 pts/0   Sl+  20:24   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21228008259      instructions:u                                              
         420548842      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        5669931333      L1-dcache-loads:u                                           
        1361996666      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11018175900      armv8_pmuv3_0/l1i_cache/:u                                   

      39.731911794 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1792471552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
num_worker_connections 64
Creating worker on tid 2512056832
starting receive base loop
Created 512 connections total
Creating worker on tid 1916137984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319918.318343,       0.0,      381786,     343506,      38280,     230893,     112613,  73.839532, 141.700000, 162.700000, 263.300000,  60.428627,   0.000000, 574.422002, 488.384386
Outstanding requests per worker:
2641 2652 2522 2657 2604 2700 2549 3201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166080.2,      830402,     747215,      83187,     568522,     178693, 191.814179, 287.000000, 326.400000, 403.600000,  71.985679,   1.347000, 609.789014, 585.663549
Outstanding requests per worker:
5195 5056 5458 5143 5201 5225 5503 5483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166509.4,      832548,     749512,      83036,     601199,     148313, 301.677078, 450.200000, 518.000000, 654.000000, 112.671233,  21.224000, 854.438007, 631.454753
Outstanding requests per worker:
7634 7746 7491 7429 7582 7775 7488 7733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166872.6,      834364,     751100,      83264,     619358,     131742, 404.816139, 635.400000, 732.700000, 905.000000, 164.378128,  54.202002, 1220.059037, 655.421194
Outstanding requests per worker:
9886 10117 9527 9594 9562 9914 9247 9838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166597.6,      832989,     749912,      83077,     630068,     119844, 506.514736, 810.300000, 942.000000, 1219.900000, 221.965658,  77.496998, 1467.646956, 673.344323
Outstanding requests per worker:
12191 12061 11785 11900 11821 12390 11592 12077 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165729.8,      828650,     745911,      82739,     635060,     110851, 625.159136, 1023.300000, 1151.800000, 1437.400000, 276.789784,  72.590001, 1776.152015, 685.654066
Outstanding requests per worker:
15062 14818 14647 14792 14545 15379 14344 14717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164779.4,      823898,     741277,      82621,     638494,     102783, 764.763323, 1225.300000, 1380.000000, 1661.800000, 325.947097, 103.577003, 2079.946995, 695.977215
Outstanding requests per worker:
18548 18131 18345 18208 17880 18570 17806 18082 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:25   0:00 /usr/lib/linux
memcache      7  351  0.0 518272 167616 pts/0   Sl+  20:25   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20908554269      instructions:u                                              
         403575223      L1-dcache-load-misses:u   # [33m   7.23%[m of all L1-dcache hits  
        5581182475      L1-dcache-loads:u                                           
        1324124723      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10753117386      armv8_pmuv3_0/l1i_cache/:u                                   

      37.100689164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2144334336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1545728512
starting receive base loop
num_worker_connections 64
Creating worker on tid 949809664
starting receive base loop
num_worker_connections 64
Creating worker on tid 353890816
starting receive base loop
num_worker_connections 64
Creating worker on tid 4055560704
starting receive base loop
num_worker_connections 64
Creating worker on tid 3459641856
starting receive base loop
num_worker_connections 64
Creating worker on tid 2863723008
starting receive base loop
Created 512 connections total
Creating worker on tid 2267804160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575319960.318385,       0.0,      385962,     347070,      38892,     232446,     114624,  75.269244, 147.500000, 175.200000, 285.200000,  62.315305,   0.000000, 497.040004, 487.033008
Outstanding requests per worker:
2638 2770 2895 2815 2674 2700 2780 3435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165685.2,      828427,     745922,      82505,     567988,     177934, 205.818655, 309.500000, 353.900000, 453.400000,  79.305135,   2.605000, 664.274991, 586.999421
Outstanding requests per worker:
5501 5743 5834 5583 5427 5727 5729 5896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166357.2,      831787,     749414,      82373,     601220,     148194, 323.796552, 488.300000, 553.200000, 697.800000, 120.533775,  32.873001, 936.354995, 631.332820
Outstanding requests per worker:
8063 8269 8076 8107 7984 8111 8213 7958 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166309.4,      831548,     748438,      83110,     617061,     131377, 436.098518, 678.200000, 774.000000, 940.600000, 173.713318,  52.623000, 1284.688950, 656.118471
Outstanding requests per worker:
10582 10882 10475 10588 10420 10456 10176 10783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165913.4,      829568,     746879,      82689,     627874,     119005, 555.026597, 878.800000, 1004.800000, 1235.000000, 233.540055,  74.164003, 1523.290992, 673.681772
Outstanding requests per worker:
13342 13554 13119 13404 12935 13066 13219 13290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165415.8,      827080,     744095,      82985,     634016,     110079, 690.999417, 1095.400000, 1251.300000, 1510.500000, 289.718567, 102.114998, 1863.296986, 685.942338
Outstanding requests per worker:
16555 16507 16087 16342 16057 16075 16234 16152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164572.2,      822862,     740818,      82044,     637136,     103682, 840.199514, 1306.800000, 1485.700000, 1759.200000, 342.798234,  77.385001, 2127.593040, 695.207406
Outstanding requests per worker:
19857 20171 19777 19638 19644 19731 19868 19649 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:26   0:00 /usr/lib/linux
memcache      7  352  0.0 517248 162240 pts/0   Sl+  20:26   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20857280867      instructions:u                                              
         405508647      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        5563005233      L1-dcache-loads:u                                           
        1320285290      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10722368070      armv8_pmuv3_0/l1i_cache/:u                                   

      37.201325351 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1893396992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1301475840
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320002.318427,       0.0,      387979,     348942,      39037,     234645,     114297,  89.154281, 169.400000, 203.600000, 334.400000,  72.858688,   0.000000, 659.430981, 488.583550
Outstanding requests per worker:
3289 3287 3653 3340 3347 3461 3393 4331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167042.2,      835212,     751806,      83406,     573192,     178614, 265.538784, 398.400000, 450.100000, 559.200000,  99.922047,   6.461000, 858.346999, 587.451221
Outstanding requests per worker:
7761 7457 8065 7742 7674 7687 7854 8289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167408.0,      837041,     753134,      83907,     605225,     147909, 448.556800, 646.000000, 715.500000, 872.600000, 149.451963,  67.165002, 1192.796946, 632.675577
Outstanding requests per worker:
11775 11538 12322 11843 11559 11955 12038 12105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166725.8,      833630,     750486,      83144,     620325,     130161, 647.408007, 922.600000, 1006.400000, 1183.100000, 207.434641, 108.110003, 1536.198974, 657.797479
Outstanding requests per worker:
16265 16039 16674 16303 16302 16324 16300 16966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166124.6,      830624,     747839,      82785,     629151,     118688, 863.696435, 1203.100000, 1309.700000, 1524.600000, 261.362315, 159.790993, 2040.457010, 674.236431
Outstanding requests per worker:
21386 20831 21731 21140 21076 20822 21479 21704 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165679.6,      828399,     745750,      82649,     635479,     110271, 1091.449214, 1505.500000, 1646.400000, 1884.900000, 319.108864, 155.653998, 2209.547043, 686.080329
Outstanding requests per worker:
26418 26011 26877 26328 26215 26173 26773 26609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164316.4,      821583,     739418,      82165,     637274,     102144, 1340.179737, 1822.000000, 1973.700000, 2271.300000, 373.104601, 183.645993, 2682.902098, 696.925111
Outstanding requests per worker:
32581 31944 32972 32748 32016 32031 32584 32609 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:27   0:00 /usr/lib/linux
memcache      7  352  0.0 517248 167744 pts/0   Sl+  20:27   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20952211356      instructions:u                                              
         405911922      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        5586087895      L1-dcache-loads:u                                           
        1325104314      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10753628230      armv8_pmuv3_0/l1i_cache/:u                                   

      37.061068875 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2283532800
starting receive base loop
num_worker_connections 64
Creating worker on tid 1688007168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1092088320
starting receive base loop
num_worker_connections 64
Creating worker on tid 498790912
starting receive base loop
num_worker_connections 64
Creating worker on tid 4197839360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3601920512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3006001664
starting receive base loop
Created 512 connections total
Creating worker on tid 2410082816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320045.318470,       0.0,      510365,     459161,      51204,     315784,     143377,  69.503931, 168.600000, 202.800000, 290.000000,  76.417300,   0.000000, 613.636017, 505.188783
Outstanding requests per worker:
3880 3874 3980 3928 3991 3863 3803 4757 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168592.4,      842963,     758525,      84438,     583812,     174713, 313.290774, 477.000000, 534.600000, 642.200000, 116.404355,  12.010000, 918.211997, 595.910029
Outstanding requests per worker:
9534 9980 9824 9476 9658 9669 9676 10233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168009.2,      840047,     756823,      83224,     610681,     146142, 571.146349, 808.900000, 881.000000, 1015.800000, 175.694866,  98.957002, 1308.043957, 636.157112
Outstanding requests per worker:
15718 16015 16102 15568 15906 15850 15707 16100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167510.6,      837554,     753884,      83670,     624444,     129440, 853.740223, 1172.100000, 1266.300000, 1431.300000, 238.737229, 157.261997, 1781.810999, 660.358395
Outstanding requests per worker:
22601 22236 22547 21706 22291 22451 22105 22443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166582.0,      832911,     749553,      83358,     631101,     118452, 1156.089792, 1554.100000, 1660.000000, 1834.900000, 292.004696, 336.899012, 2148.966074, 675.418054
Outstanding requests per worker:
29427 29158 29368 28941 29218 29413 29340 29605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166128.2,      830642,     747665,      82977,     637892,     109773, 1477.785439, 1936.700000, 2063.100000, 2260.500000, 340.701857, 429.069012, 2646.167040, 687.388404
Outstanding requests per worker:
36782 36070 36559 36332 36635 36729 36830 36910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165642.8,      828215,     745432,      82783,     642586,     102846, 1812.325142, 2337.400000, 2474.300000, 2688.600000, 387.216115, 645.416021, 3115.597010, 697.455946
Outstanding requests per worker:
44429 43618 44343 43681 44152 44380 44549 44442 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:27   0:00 /usr/lib/linux
memcache      7  353  0.0 521344 173184 pts/0   Sl+  20:27   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21466108087      instructions:u                                              
         418088953      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        5713433460      L1-dcache-loads:u                                           
        1368151718      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11063556005      armv8_pmuv3_0/l1i_cache/:u                                   

      38.359904502 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1755181568
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
num_worker_connections 64
Creating worker on tid 2477191680
starting receive base loop
Created 512 connections total
Creating worker on tid 1881272832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320087.318512,       0.0,      393432,     353599,      39833,     237807,     115792, 100.221229, 193.800000, 229.100000, 424.700000,  92.369981,   0.000000, 946.601987, 489.158306
Outstanding requests per worker:
3921 4053 3963 3695 4057 3948 4027 5996 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168742.6,      843714,     758948,      84766,     579919,     179029, 319.443356, 487.400000, 567.600000, 745.100000, 133.679215,  32.249000, 1295.547962, 589.196844
Outstanding requests per worker:
9448 9471 9476 9442 9583 9842 9886 11747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168631.6,      843159,     759664,      83495,     611082,     148582, 566.932307, 841.400000, 950.000000, 1167.900000, 200.780367, 111.263998, 1485.458970, 633.623427
Outstanding requests per worker:
15065 15369 15369 15326 15655 15499 15263 17127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167763.6,      838819,     754896,      83923,     624095,     130801, 836.330356, 1204.700000, 1327.400000, 1559.000000, 266.882317, 187.039003, 1946.588039, 658.825425
Outstanding requests per worker:
21019 21759 21653 21738 21509 21767 21791 23580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167069.2,      835347,     752048,      83299,     632662,     119386, 1128.501835, 1597.800000, 1739.700000, 1990.000000, 333.534204, 228.254005, 2396.449089, 674.615136
Outstanding requests per worker:
27699 28297 28665 28504 28151 28428 28280 30395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166415.4,      832078,     748966,      83112,     638121,     110845, 1437.411756, 2026.100000, 2193.200000, 2450.300000, 402.994266, 443.946987, 2824.764967, 686.638347
Outstanding requests per worker:
34869 35405 35602 35368 35203 35617 35531 37735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165011.8,      825060,     742632,      82428,     639234,     103398, 1772.135421, 2461.900000, 2672.700000, 2980.400000, 472.561489, 571.793020, 3316.840887, 696.111362
Outstanding requests per worker:
43068 43233 43368 43342 43333 43578 43591 45772 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:28   0:00 /usr/lib/linux
memcache      7  334  0.0 519296 171584 pts/0   Sl+  20:28   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21005105113      instructions:u                                              
         405663454      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        5599370026      L1-dcache-loads:u                                           
        1331554329      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10789666777      armv8_pmuv3_0/l1i_cache/:u                                   

      38.650994527 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1757082112
starting receive base loop
num_worker_connections 171
Creating worker on tid 296677888
starting receive base loop
num_worker_connections 171
Creating worker on tid 3133993472
starting receive base loop
num_worker_connections 170
Creating worker on tid 1673720320
starting receive base loop
num_worker_connections 170
Creating worker on tid 221508096
starting receive base loop
Created 1024 connections total
Creating worker on tid 3066884608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320130.318555,       0.0,      326701,     293935,      32766,     195557,      98378,  28.372831,  63.900000,  79.400000, 135.600000,  27.732734,   0.000000, 254.377007, 480.835035
Outstanding requests per worker:
336 352 350 356 379 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149976.1,      749881,     675160,      74721,     509135,     166025,  14.306912,  27.000000,  30.000000,  34.500000,   8.012666,   0.529000,  44.452000, 578.562298
Outstanding requests per worker:
365 386 364 402 392 396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150035.8,      750180,     675273,      74907,     537928,     137345,  14.741957,  27.800000,  31.200000,  36.000000,   8.288043,   0.465000,  44.213001, 625.575113
Outstanding requests per worker:
353 360 338 393 378 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.2,      750022,     674790,      75232,     553063,     121727,  14.978398,  28.200000,  31.700000,  37.400000,   8.474389,   0.426000,  46.339002, 650.005033
Outstanding requests per worker:
374 398 374 367 355 385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149998.7,      749994,     675060,      74934,     563574,     111486,  15.222310,  28.800000,  32.300000,  37.700000,   8.614742,   0.469000,  47.959998, 667.347068
Outstanding requests per worker:
387 380 397 390 395 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150014.6,      750074,     674523,      75551,     570807,     103716,  15.391870,  29.000000,  32.800000,  38.400000,   8.716166,   0.586000,  48.769001, 680.004652
Outstanding requests per worker:
386 397 389 376 374 402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150013.0,      750066,     674988,      75078,     577207,      97781,  15.513925,  29.200000,  33.100000,  38.900000,   8.806353,   0.471000,  47.582999, 689.749381
Outstanding requests per worker:
392 374 401 401 382 374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:29   0:00 /usr/lib/linux
memcache      8  348  0.0 442048 157440 pts/0   Sl+  20:29   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18295498657      instructions:u                                              
         396418685      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        4759095098      L1-dcache-loads:u                                           
        1255656884      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9767995198      armv8_pmuv3_0/l1i_cache/:u                                   

      37.091286673 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1241838080
starting receive base loop
num_worker_connections 171
Creating worker on tid 4081578496
starting receive base loop
num_worker_connections 171
Creating worker on tid 2621305344
starting receive base loop
num_worker_connections 170
Creating worker on tid 1161032192
starting receive base loop
num_worker_connections 170
Creating worker on tid 4006408704
starting receive base loop
Created 1024 connections total
Creating worker on tid 2554196480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320171.318596,       0.0,      332933,     299552,      33381,     198650,     100902,  39.569386,  80.900000, 113.000000, 186.800000,  55.906041,   0.000000, 1202.072978, 478.493674
Outstanding requests per worker:
397 402 374 423 460 418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153831.8,      769160,     692792,      76368,     522786,     170006,  16.404169,  30.300000,  35.100000,  42.600000,   9.346501,   0.619000,  53.534999, 579.141237
Outstanding requests per worker:
430 449 437 412 433 465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153873.4,      769368,     692671,      76697,     551643,     141028,  16.830020,  31.400000,  36.000000,  43.600000,   9.584550,   0.551000,  53.828999, 625.403282
Outstanding requests per worker:
436 461 428 416 436 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153840.2,      769202,     692092,      77110,     567446,     124646,  17.247645,  32.000000,  37.300000,  44.600000,   9.833871,   0.533000,  55.661000, 650.891935
Outstanding requests per worker:
440 437 463 444 443 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.8,      769230,     692443,      76787,     578781,     113662,  17.509503,  32.400000,  38.000000,  45.800000,  10.022487,   0.618000,  60.391001, 668.234437
Outstanding requests per worker:
419 473 466 439 470 462 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.4,      769303,     692254,      77049,     586887,     105367,  17.691758,  32.600000,  38.200000,  46.700000,  10.135451,   0.606000,  57.870999, 681.416714
Outstanding requests per worker:
465 464 473 463 421 456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.2,      769302,     692873,      76429,     594010,      98863,  17.873787,  33.100000,  38.900000,  47.000000,  10.245557,   0.631000,  59.377000, 692.138708
Outstanding requests per worker:
457 477 453 456 466 466 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:29   0:00 /usr/lib/linux
memcache      7  348  0.0 445120 156288 pts/0   Sl+  20:29   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18797641473      instructions:u                                              
         397654268      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        4903161981      L1-dcache-loads:u                                           
        1274118159      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9927307119      armv8_pmuv3_0/l1i_cache/:u                                   

      37.421609785 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 842920448
starting receive base loop
num_worker_connections 171
Creating worker on tid 3678925312
starting receive base loop
num_worker_connections 171
Creating worker on tid 2218652160
starting receive base loop
num_worker_connections 170
Creating worker on tid 758379008
starting receive base loop
num_worker_connections 170
Creating worker on tid 3603755520
starting receive base loop
Created 1024 connections total
Creating worker on tid 2151543296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320214.318639,       0.0,      340205,     306206,      33999,     203511,     102695,  65.075586, 127.100000, 175.600000, 776.900000, 124.907418,   0.000000, 1668.334961, 479.913627
Outstanding requests per worker:
870 842 799 830 829 2516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158570.6,      792854,     713691,      79163,     539489,     174202,  22.389928,  39.400000,  46.800000,  58.500000,  28.736795,   0.764000, 1211.581945, 580.324708
Outstanding requests per worker:
579 523 529 573 582 601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157910.4,      789553,     711053,      78500,     568163,     142890,  20.938604,  37.600000,  46.300000,  54.400000,  11.781355,   0.575000,  85.510999, 627.707268
Outstanding requests per worker:
573 574 577 553 547 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.2,      789477,     710725,      78752,     583879,     126846,  21.382394,  38.000000,  47.300000,  55.900000,  12.032828,   0.706000,  96.300997, 652.442497
Outstanding requests per worker:
569 579 564 557 576 572 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.0,      789481,     710598,      78883,     594716,     115882,  21.524904,  38.200000,  47.800000,  56.100000,  12.089759,   0.703000,  76.857001, 669.257665
Outstanding requests per worker:
577 593 570 600 584 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157903.0,      789516,     710692,      78824,     603070,     107622,  21.776826,  38.500000,  48.100000,  57.000000,  12.199243,   0.743000,  72.338000, 682.871755
Outstanding requests per worker:
587 581 620 599 556 552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.0,      789611,     710843,      78768,     610114,     100729,  21.932784,  38.700000,  48.700000,  57.600000,  12.345059,   0.710000, 100.658998, 692.841390
Outstanding requests per worker:
597 609 566 542 581 556 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:30   0:00 /usr/lib/linux
memcache      7  330  0.0 446144 162624 pts/0   Sl+  20:30   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19314869129      instructions:u                                              
         398182533      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        5074098754      L1-dcache-loads:u                                           
        1287632004      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10157086706      armv8_pmuv3_0/l1i_cache/:u                                   

      38.650855966 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1276506624
starting receive base loop
num_worker_connections 171
Creating worker on tid 4113822208
starting receive base loop
num_worker_connections 171
Creating worker on tid 2656170496
starting receive base loop
num_worker_connections 170
Creating worker on tid 1195897344
starting receive base loop
num_worker_connections 170
Creating worker on tid 4038652416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2586440192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320256.318681,       0.0,      338771,     304542,      34229,     202964,     101578,  61.517650, 134.900000, 168.800000, 250.700000,  76.966262,   0.000000, 1381.975055, 482.082219
Outstanding requests per worker:
855 751 724 834 745 1030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158249.8,      791250,     712190,      79060,     538643,     173547,  20.748813,  37.700000,  45.600000,  54.700000,  12.625483,   0.635000, 502.166986, 581.161982
Outstanding requests per worker:
556 556 529 532 545 550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.8,      789460,     710863,      78597,     568025,     142838,  20.855308,  37.600000,  46.200000,  54.400000,  11.794522,   0.582000,  89.768000, 628.341906
Outstanding requests per worker:
537 550 547 547 621 529 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157906.6,      789534,     710526,      79008,     584169,     126357,  21.192065,  37.800000,  46.900000,  55.800000,  11.986606,   0.666000,  84.505998, 653.048723
Outstanding requests per worker:
591 559 544 542 599 509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.8,      789455,     710655,      78800,     595161,     115494,  21.477606,  38.000000,  47.800000,  56.200000,  12.112403,   0.693000,  75.689003, 670.345529
Outstanding requests per worker:
590 574 567 584 562 560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.2,      789577,     711303,      78274,     603708,     107595,  21.611960,  38.400000,  48.100000,  56.700000,  12.181098,   0.670000,  88.074997, 681.827379
Outstanding requests per worker:
623 590 565 558 558 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.6,      789524,     710598,      78926,     609700,     100898,  21.842415,  38.500000,  48.500000,  57.300000,  12.313637,   0.667000,  89.548998, 692.728371
Outstanding requests per worker:
606 545 607 553 562 564 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:31   0:00 /usr/lib/linux
memcache      7  339  0.0 446144 163968 pts/0   Sl+  20:31   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19268032906      instructions:u                                              
         398525912      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        5055521482      L1-dcache-loads:u                                           
        1293480761      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10124785299      armv8_pmuv3_0/l1i_cache/:u                                   

      37.250654469 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1643115008
starting receive base loop
num_worker_connections 171
Creating worker on tid 181203456
starting receive base loop
num_worker_connections 171
Creating worker on tid 3015897600
starting receive base loop
num_worker_connections 170
Creating worker on tid 1555624448
starting receive base loop
num_worker_connections 170
Creating worker on tid 103412224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2948788736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320298.318723,       0.0,      348960,     313931,      35029,     208983,     104948,  74.813682, 159.100000, 191.700000, 340.100000,  82.526581,   0.000000, 1342.352986, 481.637216
Outstanding requests per worker:
1436 1357 1500 1434 1391 2059 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163264.4,      816323,     734806,      81517,     556981,     177825,  25.907951,  47.200000,  55.800000, 107.600000,  21.695598,   0.957000, 824.980974, 582.069906
Outstanding requests per worker:
630 649 617 601 617 622 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.4,      810868,     730019,      80849,     585045,     144974,  23.032045,  39.400000,  50.500000,  59.800000,  12.592431,   0.873000, 101.503998, 629.874202
Outstanding requests per worker:
604 630 639 647 629 621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162183.8,      810920,     729453,      81467,     600576,     128877,  23.424999,  40.100000,  51.200000,  61.000000,  12.820421,   0.779000, 102.583997, 654.524675
Outstanding requests per worker:
600 655 612 633 637 618 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.8,      810775,     729436,      81339,     612343,     117093,  23.663584,  40.400000,  52.000000,  61.500000,  12.933187,   0.798000, 114.382997, 672.521086
Outstanding requests per worker:
624 672 626 661 640 627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162171.4,      810858,     729485,      81373,     620139,     109346,  23.889252,  40.700000,  52.400000,  62.300000,  13.063239,   0.724000, 108.176000, 683.112954
Outstanding requests per worker:
666 632 628 646 658 643 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161633.0,      808166,     727056,      81110,     624364,     102692,  24.012276,  40.800000,  52.700000,  62.700000,  13.102766,   0.948000, 108.028002, 693.677279
Outstanding requests per worker:
1077 1052 1132 1114 1106 1135 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:31   0:00 /usr/lib/linux
memcache      7  339  0.0 515200 168512 pts/0   Sl+  20:31   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19922199008      instructions:u                                              
         403460989      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        5233583716      L1-dcache-loads:u                                           
        1304436731      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10405674297      armv8_pmuv3_0/l1i_cache/:u                                   

      37.300627711 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1589113344
starting receive base loop
num_worker_connections 171
Creating worker on tid 130216448
starting receive base loop
num_worker_connections 171
Creating worker on tid 2964910592
starting receive base loop
num_worker_connections 170
Creating worker on tid 1504637440
starting receive base loop
num_worker_connections 170
Creating worker on tid 55046656
starting receive base loop
Created 1024 connections total
Creating worker on tid 2897801728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320341.318766,       0.0,      338979,     304697,      34282,     202732,     101965,  83.287292, 164.500000, 199.800000, 546.000000, 109.658578,   0.000000, 1994.866967, 480.381710
Outstanding requests per worker:
1742 1658 1625 1730 1750 5552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164194.0,      820971,     739175,      81796,     560424,     178751,  39.329670,  59.400000,  79.800000, 201.700000,  96.782937,   1.019000, 2152.381897, 582.352166
Outstanding requests per worker:
658 640 654 621 660 713 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162113.0,      810566,     729979,      80587,     584638,     145341,  25.898597,  46.100000,  54.500000,  74.800000,  14.943438,   1.018000, 154.506996, 630.510757
Outstanding requests per worker:
693 692 713 732 738 693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162142.8,      810715,     729560,      81155,     600892,     128668,  26.481333,  47.300000,  56.100000,  77.100000,  15.381051,   0.900000, 159.500003, 654.610817
Outstanding requests per worker:
735 751 723 737 733 757 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162082.4,      810413,     729635,      80778,     611545,     118090,  27.693215,  50.900000,  58.600000,  87.500000,  16.790649,   0.942000, 173.968002, 671.272170
Outstanding requests per worker:
847 784 856 838 773 787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162220.2,      811102,     730121,      80981,     620843,     109278,  28.683109,  53.800000,  60.900000,  97.300000,  18.169339,   0.989000, 195.795000, 684.834774
Outstanding requests per worker:
830 730 833 725 779 751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162175.6,      810879,     729724,      81155,     626956,     102768,  28.675212,  53.000000,  60.300000,  92.500000,  17.564844,   1.106000, 182.032004, 693.586211
Outstanding requests per worker:
767 803 774 735 746 815 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:32   0:00 /usr/lib/linux
memcache      7  338  0.0 449216 166528 pts/0   Sl+  20:32   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19944971323      instructions:u                                              
         396352420      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        5246272013      L1-dcache-loads:u                                           
        1307067914      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10389594706      armv8_pmuv3_0/l1i_cache/:u                                   

      38.691755536 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1159590400
starting receive base loop
num_worker_connections 171
Creating worker on tid 3998347776
starting receive base loop
num_worker_connections 171
Creating worker on tid 2538074624
starting receive base loop
num_worker_connections 170
Creating worker on tid 1077801472
starting receive base loop
num_worker_connections 170
Creating worker on tid 3920556544
starting receive base loop
Created 1024 connections total
Creating worker on tid 2470965760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320383.318808,       0.0,      347103,     312173,      34930,     208283,     103890,  72.226616, 148.900000, 188.100000, 587.700000, 109.805176,   0.000000, 1692.810059, 482.393410
Outstanding requests per worker:
1137 1110 1228 1216 1223 3003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163249.4,      816248,     734410,      81838,     557244,     177166,  25.217252,  44.100000,  52.200000,  85.000000,  35.777514,   0.607000, 1476.320028, 583.280326
Outstanding requests per worker:
568 599 609 593 617 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162171.4,      810858,     729854,      81004,     585198,     144656,  22.382448,  39.000000,  49.300000,  57.700000,  12.247460,   0.848000,  92.713997, 631.077958
Outstanding requests per worker:
584 637 601 632 594 575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.6,      810814,     729535,      81279,     601077,     128458,  22.795044,  39.400000,  50.100000,  59.100000,  12.473529,   0.760000,  89.472003, 655.195171
Outstanding requests per worker:
629 605 576 591 607 666 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162153.0,      810766,     729675,      81091,     612069,     117606,  22.970574,  39.600000,  50.600000,  59.600000,  12.561721,   0.979000,  93.451999, 671.901301
Outstanding requests per worker:
663 601 600 679 648 599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162182.0,      810911,     730137,      80774,     621142,     108995,  23.256132,  39.700000,  50.900000,  60.500000,  12.671823,   0.826000,  95.873997, 685.031067
Outstanding requests per worker:
667 612 644 644 642 567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161846.0,      809231,     727880,      81351,     625368,     102512,  23.427905,  39.900000,  51.400000,  61.200000,  12.798000,   0.722000,  94.745003, 694.204693
Outstanding requests per worker:
944 931 893 908 859 932 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:33   0:00 /usr/lib/linux
memcache      7  348  0.0 515200 165504 pts/0   Sl+  20:33   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19986808106      instructions:u                                              
         400519860      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        5235909284      L1-dcache-loads:u                                           
        1311574544      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10398842843      armv8_pmuv3_0/l1i_cache/:u                                   

      37.339949929 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 824832512
starting receive base loop
num_worker_connections 171
Creating worker on tid 3662803456
starting receive base loop
num_worker_connections 171
Creating worker on tid 2202530304
starting receive base loop
num_worker_connections 170
Creating worker on tid 742257152
starting receive base loop
num_worker_connections 170
Creating worker on tid 3585012224
starting receive base loop
Created 1024 connections total
Creating worker on tid 2135421440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320425.318850,       0.0,      337175,     303310,      33865,     201867,     101443, 101.823290, 183.200000, 224.700000, 825.300000, 137.558051,   0.000000, 1929.461956, 481.182513
Outstanding requests per worker:
2594 2875 2709 2659 2728 8743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169372.8,      846865,     762295,      84570,     577527,     184768,  85.768476, 149.400000, 172.300000, 807.600000, 137.075806,   0.811000, 2159.193993, 582.945055
Outstanding requests per worker:
1376 1402 1335 1384 1473 1868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166933.0,      834666,     751267,      83399,     601676,     149591,  48.435099, 104.300000, 134.100000, 169.800000,  38.685949,   1.385000, 689.674973, 629.923172
Outstanding requests per worker:
1283 1296 1274 1253 1221 1250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166586.6,      832934,     749271,      83663,     618696,     130575,  47.319536,  87.700000, 112.600000, 150.800000,  30.288345,   1.720000, 249.506995, 657.430153
Outstanding requests per worker:
1279 1407 1326 1305 1416 1331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166501.6,      832509,     749276,      83233,     629494,     119782,  49.553485,  95.300000, 120.100000, 157.200000,  32.405388,   1.837000, 250.658989, 673.541000
Outstanding requests per worker:
1521 1547 1535 1491 1503 1392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166380.0,      831901,     748833,      83068,     637724,     111109,  56.429123, 117.400000, 142.100000, 175.300000,  39.082084,   2.092000, 275.698990, 686.052287
Outstanding requests per worker:
1761 1782 1715 1749 1704 1751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165110.6,      825554,     742878,      82676,     638971,     103907,  76.795839, 163.600000, 190.300000, 260.300000,  58.260865,   1.733000, 461.257994, 695.140979
Outstanding requests per worker:
3143 3104 2956 3019 3128 2963 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:34   0:00 /usr/lib/linux
memcache      7  347  0.0 518272 170240 pts/0   Sl+  20:34   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20604954166      instructions:u                                              
         403690505      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        5465630415      L1-dcache-loads:u                                           
        1326775858      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10713970083      armv8_pmuv3_0/l1i_cache/:u                                   

      37.320129761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1631056384
starting receive base loop
num_worker_connections 171
Creating worker on tid 173142528
starting receive base loop
num_worker_connections 171
Creating worker on tid 3007836672
starting receive base loop
num_worker_connections 170
Creating worker on tid 1547563520
starting receive base loop
num_worker_connections 170
Creating worker on tid 95351296
starting receive base loop
Created 1024 connections total
Creating worker on tid 2940727808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320467.318892,       0.0,      350007,     314816,      35191,     210199,     104617,  93.703954, 176.400000, 212.000000, 701.400000, 122.128358,   0.000000, 1656.463027, 483.704885
Outstanding requests per worker:
2450 2415 2419 2407 2304 5565 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169244.6,      846224,     761569,      84655,     577755,     183814,  48.733990,  98.200000, 130.400000, 242.400000,  75.457480,   0.964000, 1533.632040, 583.127738
Outstanding requests per worker:
793 797 775 749 818 804 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166619.8,      833100,     750376,      82724,     602060,     148316,  29.138359,  52.700000,  60.300000,  92.100000,  17.202553,   0.992000, 176.208004, 631.352413
Outstanding requests per worker:
833 816 854 855 843 822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166684.0,      833421,     749909,      83512,     618630,     131279,  30.115744,  54.200000,  62.300000,  95.300000,  17.762253,   1.025000, 183.153003, 656.560155
Outstanding requests per worker:
793 828 845 865 831 825 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166582.0,      832911,     750094,      82817,     631042,     119052,  31.077389,  56.500000,  64.500000, 101.800000,  18.790945,   0.986000, 203.408003, 674.167883
Outstanding requests per worker:
864 848 990 915 913 955 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166679.0,      833396,     750044,      83352,     638780,     111264,  31.661826,  57.000000,  65.500000, 103.100000,  18.988925,   1.232000, 193.446994, 686.134101
Outstanding requests per worker:
890 930 912 887 950 914 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165908.8,      829545,     746666,      82879,     642357,     104309,  36.509863,  66.100000,  83.600000, 133.500000,  25.179070,   1.122000, 229.923993, 695.353600
Outstanding requests per worker:
1567 1477 1600 1614 1477 1596 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:34   0:00 /usr/lib/linux
memcache      7  348  0.0 517248 167168 pts/0   Sl+  20:34   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20538289070      instructions:u                                              
         409911094      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        5413597851      L1-dcache-loads:u                                           
        1337731781      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10671684415      armv8_pmuv3_0/l1i_cache/:u                                   

      37.280845852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 786428416
starting receive base loop
num_worker_connections 171
Creating worker on tid 3619877376
starting receive base loop
num_worker_connections 171
Creating worker on tid 2159604224
starting receive base loop
num_worker_connections 170
Creating worker on tid 699331072
starting receive base loop
num_worker_connections 170
Creating worker on tid 3544707584
starting receive base loop
Created 1024 connections total
Creating worker on tid 2092495360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320510.318935,       0.0,      344401,     309767,      34634,     206489,     103278, 109.492590, 200.200000, 244.700000, 940.200000, 154.534609,   0.000000, 1957.823038, 482.331830
Outstanding requests per worker:
3030 3132 3246 3114 3151 13406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173009.4,      865048,     778310,      86738,     590544,     187766, 152.847248, 218.300000, 282.700000, 1353.500000, 205.036170,   2.636000, 2485.496998, 583.653318
Outstanding requests per worker:
3271 3374 3101 3147 3168 5178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172255.4,      861278,     775349,      85929,     622006,     153343, 108.789565, 227.200000, 275.300000, 388.300000, 102.887255,   3.525000, 1423.689961, 631.181984
Outstanding requests per worker:
2776 2991 2696 2712 2781 3201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171292.2,      856462,     770593,      85869,     636582,     134011, 100.314894, 256.400000, 299.400000, 392.300000,  97.306775,   2.552000, 1144.940019, 658.069589
Outstanding requests per worker:
3000 3002 2894 2870 3026 3105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171192.2,      855962,     770560,      85402,     648953,     121607, 107.592812, 278.700000, 329.500000, 414.600000, 102.949297,   2.464000, 698.285997, 675.587377
Outstanding requests per worker:
3213 3255 3261 2958 3168 3270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171176.2,      855882,     770051,      85831,     656884,     113167, 116.482416, 293.100000, 347.200000, 432.400000, 106.962947,   3.400000, 687.802017, 687.206714
Outstanding requests per worker:
3314 3193 3475 3389 3574 3499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169548.0,      847741,     762825,      84916,     657556,     105269, 138.790946, 293.400000, 348.900000, 441.000000, 103.534667,   2.551000, 685.069025, 696.895884
Outstanding requests per worker:
4900 4922 4859 5087 5136 5021 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:35   0:00 /usr/lib/linux
memcache      7  347  0.0 521344 181056 pts/0   Sl+  20:35   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21298694230      instructions:u                                              
         417508979      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        5678146992      L1-dcache-loads:u                                           
        1371995114      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11050436950      armv8_pmuv3_0/l1i_cache/:u                                   

      37.282065659 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1734210048
starting receive base loop
num_worker_connections 171
Creating worker on tid 272495104
starting receive base loop
num_worker_connections 171
Creating worker on tid 3107189248
starting receive base loop
num_worker_connections 170
Creating worker on tid 1649537536
starting receive base loop
num_worker_connections 170
Creating worker on tid 197325312
starting receive base loop
Created 1024 connections total
Creating worker on tid 3040080384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320552.318977,       0.0,      345700,     310835,      34865,     207193,     103642, 105.867821, 191.900000, 238.800000, 925.300000, 152.183849,   0.000000, 1980.327964, 482.287661
Outstanding requests per worker:
3001 2896 2852 3063 3102 13397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172701.0,      863506,     777233,      86273,     589305,     187928, 153.051627, 206.000000, 263.900000, 1402.700000, 213.626727,   2.642000, 2542.182922, 582.911980
Outstanding requests per worker:
3327 3350 3309 3280 3273 5468 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172067.0,      860336,     774668,      85668,     621890,     152778, 117.560067, 209.800000, 256.500000, 434.700000, 107.830240,   3.230000, 1693.325996, 631.750124
Outstanding requests per worker:
3059 2982 3013 3156 3057 3600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171352.4,      856763,     770943,      85820,     636968,     133975, 109.933464, 232.400000, 276.500000, 367.100000,  87.271977,   2.101000, 1162.274003, 657.831148
Outstanding requests per worker:
3101 3260 3232 3075 3337 3299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171186.6,      855934,     770309,      85625,     648800,     121509, 114.902355, 253.000000, 297.900000, 382.200000,  88.737884,   3.657000, 639.824986, 675.026945
Outstanding requests per worker:
3390 3439 3331 3373 3485 3541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171064.2,      855322,     769799,      85523,     656325,     113474, 123.299603, 269.500000, 315.100000, 398.900000,  93.486860,   3.116000, 643.292010, 686.816347
Outstanding requests per worker:
3674 3558 3816 3664 3841 3905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169225.8,      846130,     761323,      84807,     655644,     105679, 155.434780, 295.800000, 350.200000, 442.700000,  99.696053,   3.347000, 813.183010, 695.627835
Outstanding requests per worker:
5482 5526 5449 5584 5632 5848 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:36   0:00 /usr/lib/linux
memcache      8  347  0.0 521344 182464 pts/0   Sl+  20:36   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21327252913      instructions:u                                              
         417339267      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        5697253918      L1-dcache-loads:u                                           
        1382008532      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11088777877      armv8_pmuv3_0/l1i_cache/:u                                   

      37.361216707 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1731523072
starting receive base loop
num_worker_connections 171
Creating worker on tid 272495104
starting receive base loop
num_worker_connections 171
Creating worker on tid 3107189248
starting receive base loop
num_worker_connections 170
Creating worker on tid 1649537536
starting receive base loop
num_worker_connections 170
Creating worker on tid 197325312
starting receive base loop
Created 1024 connections total
Creating worker on tid 3040080384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320595.319020,       0.0,      345526,     310743,      34783,     207104,     103639, 104.584414, 182.800000, 238.700000, 1128.000000, 177.583561,   0.000000, 1968.850017, 481.717265
Outstanding requests per worker:
2925 2831 2860 2944 3009 24653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173241.2,      866207,     779648,      86559,     592455,     187193, 286.393348, 397.400000, 1127.100000, 2229.000000, 390.094837,   1.930000, 3014.775038, 584.701922
Outstanding requests per worker:
7162 7007 7158 7010 7380 19743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175114.2,      875572,     787929,      87643,     633324,     154605, 337.067071, 483.200000, 678.200000, 1863.800000, 289.374320,   7.010000, 2489.636898, 633.840008
Outstanding requests per worker:
8899 8987 9074 8940 9186 17266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175484.2,      877422,     789155,      88267,     651984,     137171, 367.573541, 550.100000, 692.100000, 1701.100000, 243.521109,   9.540000, 2546.905994, 658.475211
Outstanding requests per worker:
10155 10146 10227 10244 10497 16136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175384.8,      876925,     789445,      87480,     664847,     124598, 396.982638, 617.100000, 748.400000, 1574.000000, 228.795028,  31.198001, 2593.369961, 675.340934
Outstanding requests per worker:
11235 11288 11373 11416 11835 15753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175598.4,      877993,     790287,      87706,     675077,     115210, 424.461593, 681.300000, 831.800000, 1524.800000, 241.719368,  14.203000, 2586.165905, 688.662070
Outstanding requests per worker:
11912 11964 12361 12373 12777 15964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174618.4,      873093,     786326,      86767,     678109,     108217, 465.461227, 765.000000, 951.400000, 1491.100000, 258.433939,  28.146001, 2765.515089, 697.228731
Outstanding requests per worker:
13276 13728 14092 13915 14380 17324 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:36   0:00 /usr/lib/linux
memcache      8  339  0.0 523392 196992 pts/0   Sl+  20:36   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21843681857      instructions:u                                              
         428747275      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        5882549276      L1-dcache-loads:u                                           
        1393622932      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11333957019      armv8_pmuv3_0/l1i_cache/:u                                   

      38.591223335 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1602679296
starting receive base loop
num_worker_connections 171
Creating worker on tid 146338304
starting receive base loop
num_worker_connections 171
Creating worker on tid 2981032448
starting receive base loop
num_worker_connections 170
Creating worker on tid 1523380736
starting receive base loop
num_worker_connections 170
Creating worker on tid 71168512
starting receive base loop
Created 1024 connections total
Creating worker on tid 2913923584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320637.319062,       0.0,      347605,     312719,      34886,     208382,     104337, 117.159993, 210.500000, 258.800000, 1086.100000, 174.948742,   0.000000, 1978.260994, 482.781839
Outstanding requests per worker:
3691 3749 3682 3838 3864 22482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172439.4,      862198,     776423,      85775,     589568,     186855, 304.945023, 406.800000, 1018.700000, 2204.600000, 368.878134,   4.981000, 3199.737072, 583.860777
Outstanding requests per worker:
8229 7968 8146 8186 8330 20662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174054.4,      870273,     783333,      86940,     629349,     153984, 387.177541, 517.500000, 707.200000, 2017.900000, 303.501120,  11.552000, 3073.342085, 632.336547
Outstanding requests per worker:
10471 10615 10684 10676 11115 20121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174637.4,      873188,     785996,      87192,     649608,     136388, 446.650426, 625.300000, 794.900000, 1911.200000, 278.766331,  21.495000, 3098.397017, 658.146287
Outstanding requests per worker:
12160 12418 12458 12312 12897 20700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174344.8,      871725,     784513,      87212,     660979,     123534, 499.454055, 738.000000, 921.400000, 1877.500000, 281.180748,  51.667999, 2977.466106, 675.095440
Outstanding requests per worker:
14200 14309 13762 14244 15269 21889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174617.2,      873087,     786015,      87072,     670631,     115384, 556.950203, 852.800000, 1048.300000, 1908.400000, 294.393201,  69.107004, 2727.562904, 687.562971
Outstanding requests per worker:
15564 15812 15386 15995 16823 23411 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173869.8,      869350,     782215,      87135,     674382,     107833, 617.377114, 978.600000, 1204.200000, 1975.100000, 315.519418,  48.537001, 2759.865046, 697.694258
Outstanding requests per worker:
17699 17857 17524 18133 19360 25497 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:37   0:00 /usr/lib/linux
memcache      7  339  0.0 521344 194304 pts/0   Sl+  20:37   2:08 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  20:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21729094369      instructions:u                                              
         430348399      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        5841475157      L1-dcache-loads:u                                           
        1381051236      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11226813782      armv8_pmuv3_0/l1i_cache/:u                                   

      37.382021366 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 6
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 792130048
starting receive base loop
num_worker_connections 171
Creating worker on tid 3627938304
starting receive base loop
num_worker_connections 171
Creating worker on tid 2167665152
starting receive base loop
num_worker_connections 170
Creating worker on tid 710013440
starting receive base loop
num_worker_connections 170
Creating worker on tid 3552768512
starting receive base loop
Created 1024 connections total
Creating worker on tid 2100556288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320680.319105,       0.0,      341314,     307033,      34281,     204421,     102612, 105.029395, 193.200000, 255.200000, 1093.800000, 176.594889,   0.000000, 1971.717954, 480.903440
Outstanding requests per worker:
2829 2784 2753 3000 2839 25082 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173436.2,      867182,     781181,      86001,     593031,     188150, 280.554121, 358.500000, 1123.000000, 2320.300000, 405.807887,   4.245000, 3309.776068, 583.494655
Outstanding requests per worker:
6745 6604 6954 6843 7256 20107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175327.4,      876638,     789361,      87277,     633713,     155648, 329.603763, 441.300000, 663.600000, 1952.400000, 310.655615,   6.551000, 3199.007034, 631.840296
Outstanding requests per worker:
8485 8343 8625 8455 8767 17612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175406.4,      877033,     789669,      87364,     652762,     136907, 358.383600, 505.800000, 648.100000, 1729.400000, 266.500241,  12.056000, 3294.075966, 658.262960
Outstanding requests per worker:
9861 9482 9781 9978 10136 16454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175589.0,      877946,     789965,      87981,     665101,     124864, 383.753074, 562.600000, 693.400000, 1612.400000, 249.399467,  18.975999, 3016.944885, 674.849336
Outstanding requests per worker:
10705 10753 10722 10844 11179 15977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175603.2,      878017,     790426,      87591,     674723,     115703, 410.453141, 620.900000, 761.400000, 1607.500000, 245.184478,  10.194000, 2752.302885, 687.777400
Outstanding requests per worker:
11536 11557 11801 11538 12011 16127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173915.8,      869580,     783263,      86317,     675553,     107710, 457.089506, 698.800000, 836.200000, 1609.800000, 252.594193,  38.003001, 2682.563066, 697.113013
Outstanding requests per worker:
13399 13732 14036 13837 14387 18006 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:38   0:00 /usr/lib/linux
memcache      7  329  0.0 521344 195136 pts/0   Sl+  20:38   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21917256210      instructions:u                                              
         437029547      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        5891317251      L1-dcache-loads:u                                           
        1391417468      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11304572085      armv8_pmuv3_0/l1i_cache/:u                                   

      38.531065493 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1182396928
starting receive base loop
num_worker_connections 128
Creating worker on tid 74183168
starting receive base loop
num_worker_connections 128
Creating worker on tid 3260543488
starting receive base loop
num_worker_connections 128
Creating worker on tid 2146497024
starting receive base loop
num_worker_connections 128
Creating worker on tid 1037890048
starting receive base loop
num_worker_connections 128
Creating worker on tid 4218810880
starting receive base loop
num_worker_connections 128
Creating worker on tid 3110203904
starting receive base loop
Created 1024 connections total
Creating worker on tid 1996157440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320722.319147,       0.0,      351952,     316336,      35616,     211375,     104961,  28.178513,  63.700000,  80.800000, 146.300000,  32.410571,   0.000000, 699.445009, 484.182414
Outstanding requests per worker:
268 302 287 283 278 312 273 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150950.0,      754751,     679231,      75520,     513325,     165906,  15.292009,  29.400000,  33.900000,  44.300000,   9.766118,   0.301000,  60.309999, 580.314903
Outstanding requests per worker:
319 265 297 278 306 307 272 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150931.2,      754657,     679150,      75507,     541959,     137191,  15.799705,  30.400000,  35.100000,  46.200000,  10.105506,   0.284000,  61.012000, 626.814171
Outstanding requests per worker:
303 335 309 305 337 318 283 276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150941.8,      754710,     678857,      75853,     556896,     121961,  16.263705,  31.300000,  36.600000,  46.500000,  10.387754,   0.300000,  79.758003, 651.359242
Outstanding requests per worker:
346 314 302 338 279 302 324 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150954.2,      754772,     679222,      75550,     567981,     111241,  16.442711,  31.400000,  36.900000,  48.000000,  10.549287,   0.289000,  77.211998, 668.785702
Outstanding requests per worker:
326 325 323 308 323 312 296 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150948.6,      754744,     679124,      75620,     575227,     103897,  16.734238,  32.000000,  38.000000,  47.900000,  10.701013,   0.293000,  61.647002, 680.434731
Outstanding requests per worker:
357 333 306 314 312 288 344 305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150974.6,      754874,     679339,      75535,     580838,      98501,  16.914255,  32.400000,  38.300000,  48.700000,  10.823250,   0.254000,  82.102001, 689.958385
Outstanding requests per worker:
314 312 340 323 291 299 303 303 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:39   0:00 /usr/lib/linux
memcache      7  350  0.0 442048 155136 pts/0   Sl+  20:39   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18534021079      instructions:u                                              
         394547177      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        4841183751      L1-dcache-loads:u                                           
        1261809850      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9823086893      armv8_pmuv3_0/l1i_cache/:u                                   

      37.271091905 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1642328576
starting receive base loop
num_worker_connections 128
Creating worker on tid 527823360
starting receive base loop
num_worker_connections 128
Creating worker on tid 3714183680
starting receive base loop
num_worker_connections 128
Creating worker on tid 2600137216
starting receive base loop
num_worker_connections 128
Creating worker on tid 1491530240
starting receive base loop
num_worker_connections 128
Creating worker on tid 382923264
starting receive base loop
num_worker_connections 128
Creating worker on tid 3559911936
starting receive base loop
Created 1024 connections total
Creating worker on tid 2447176192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320765.319190,       0.0,      355230,     319591,      35639,     213416,     106175,  35.920702,  70.600000,  93.100000, 185.400000,  67.071423,   0.000000, 1386.515021, 483.223367
Outstanding requests per worker:
358 370 356 318 323 361 368 695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153948.2,      769742,     692704,      77038,     523712,     168992,  17.290953,  33.000000,  39.100000,  49.000000,  13.812327,   0.301000, 703.499973, 580.583873
Outstanding requests per worker:
289 329 384 326 352 333 338 337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153840.0,      769201,     692478,      76723,     552938,     139540,  17.692598,  33.900000,  41.200000,  49.000000,  11.230903,   0.337000,  63.736998, 627.583484
Outstanding requests per worker:
353 362 356 337 376 322 308 361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.0,      769256,     692407,      76849,     568967,     123440,  18.227224,  34.700000,  42.600000,  50.200000,  11.534537,   0.333000,  62.066998, 652.921594
Outstanding requests per worker:
386 322 339 355 338 366 363 323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.8,      769230,     691948,      77282,     579652,     112296,  18.396462,  35.000000,  42.900000,  51.000000,  11.637249,   0.282000,  71.893997, 670.401342
Outstanding requests per worker:
383 385 335 324 342 352 372 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153849.6,      769249,     692426,      76823,     587625,     104801,  18.500145,  35.000000,  43.200000,  51.200000,  11.700769,   0.342000,  64.246997, 682.678854
Outstanding requests per worker:
342 391 346 339 347 362 373 376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.4,      769288,     692110,      77178,     593725,      98385,  18.729110,  35.500000,  43.900000,  52.100000,  11.868778,   0.292000,  75.650997, 692.652597
Outstanding requests per worker:
372 353 363 372 349 374 359 327 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:39   0:00 /usr/lib/linux
memcache      7  350  0.0 447168 159616 pts/0   Sl+  20:39   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18877496623      instructions:u                                              
         396139317      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        4945818088      L1-dcache-loads:u                                           
        1269847342      armv8_pmuv3_0/l1i_cache_refill/:u                                   
        9959246939      armv8_pmuv3_0/l1i_cache/:u                                   

      37.330699388 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1158672896
starting receive base loop
num_worker_connections 128
Creating worker on tid 50000384
starting receive base loop
num_worker_connections 128
Creating worker on tid 3236360704
starting receive base loop
num_worker_connections 128
Creating worker on tid 2127753728
starting receive base loop
num_worker_connections 128
Creating worker on tid 1013707264
starting receive base loop
num_worker_connections 128
Creating worker on tid 4200067584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3086021120
starting receive base loop
Created 1024 connections total
Creating worker on tid 1977414144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320809.319234,       0.0,      398919,     358883,      40036,     242413,     116470,  34.208933,  72.000000, 101.100000, 211.000000,  55.497131,   0.000000, 1162.160039, 490.935216
Outstanding requests per worker:
462 461 407 482 416 429 417 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157002.6,      785014,     707169,      77845,     538417,     168752,  18.567666,  35.100000,  42.900000,  52.900000,  12.155311,   0.307000, 336.118996, 586.007850
Outstanding requests per worker:
383 369 312 341 359 397 353 389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156819.2,      784097,     705650,      78447,     565579,     140071,  19.071951,  35.600000,  44.500000,  53.800000,  12.094248,   0.319000,  93.225002, 630.227760
Outstanding requests per worker:
436 366 417 370 396 434 377 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156913.0,      784566,     706355,      78211,     582048,     124307,  19.416300,  36.000000,  45.400000,  54.600000,  12.298263,   0.320000,  75.755000, 655.159649
Outstanding requests per worker:
372 377 381 388 343 395 400 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156866.2,      784332,     706243,      78089,     592580,     113663,  19.713955,  36.500000,  46.300000,  55.600000,  12.514923,   0.352000,  97.929001, 671.734067
Outstanding requests per worker:
421 409 375 404 386 366 380 345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.2,      784307,     706290,      78017,     599773,     106517,  19.779930,  36.500000,  46.300000,  55.800000,  12.546632,   0.348000,  93.502998, 683.430769
Outstanding requests per worker:
400 389 381 414 387 370 422 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156877.6,      784389,     705512,      78877,     605596,      99916,  19.950367,  36.700000,  46.600000,  56.400000,  12.670071,   0.333000,  98.963998, 693.472577
Outstanding requests per worker:
416 394 365 418 402 361 387 374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:40   0:00 /usr/lib/linux
memcache      8  336  0.0 448192 162240 pts/0   Sl+  20:40   2:11 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19512571006      instructions:u                                              
         414993886      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        5087961696      L1-dcache-loads:u                                           
        1303697239      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10232496806      armv8_pmuv3_0/l1i_cache/:u                                   

      39.750601085 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1952313856
starting receive base loop
num_worker_connections 128
Creating worker on tid 844624384
starting receive base loop
num_worker_connections 128
Creating worker on tid 4025545216
starting receive base loop
num_worker_connections 128
Creating worker on tid 2916938240
starting receive base loop
num_worker_connections 128
Creating worker on tid 1802891776
starting receive base loop
num_worker_connections 128
Creating worker on tid 694284800
starting receive base loop
num_worker_connections 128
Creating worker on tid 3875205632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2766598656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320851.319276,       0.0,      357441,     321540,      35901,     215640,     105900,  55.275076, 118.600000, 164.700000, 534.000000,  94.674664,   0.000000, 1366.703987, 486.172277
Outstanding requests per worker:
835 701 872 779 730 819 792 1221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157615.4,      788078,     709106,      78972,     536297,     172809,  22.761923,  43.600000,  52.900000, 115.700000,  21.096433,   0.318000, 638.477981, 580.589246
Outstanding requests per worker:
424 384 380 362 427 325 384 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.6,      784349,     706446,      77903,     564233,     142213,  19.719016,  36.300000,  45.900000,  55.900000,  12.514809,   0.285000,  92.598997, 627.960538
Outstanding requests per worker:
374 381 399 376 437 383 381 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.2,      784307,     706133,      78174,     580358,     125775,  20.093044,  37.100000,  47.000000,  56.800000,  12.767408,   0.315000, 104.842998, 653.036757
Outstanding requests per worker:
422 386 362 409 415 416 370 417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156880.4,      784403,     705557,      78846,     591215,     114342,  20.439550,  37.700000,  47.400000,  58.400000,  13.024793,   0.310000, 113.661997, 670.440445
Outstanding requests per worker:
376 410 421 390 392 436 381 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156879.2,      784397,     705878,      78519,     598911,     106967,  20.443096,  37.600000,  47.900000,  57.900000,  13.015432,   0.386000, 105.333000, 682.603913
Outstanding requests per worker:
398 382 413 382 403 432 396 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.8,      784330,     706020,      78310,     606103,      99917,  20.638966,  37.900000,  48.100000,  59.100000,  13.142284,   0.320000, 108.011998, 693.835403
Outstanding requests per worker:
374 414 368 456 400 383 427 393 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:41   0:00 /usr/lib/linux
memcache      7  341  0.0 448192 163264 pts/0   Sl+  20:41   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19289315719      instructions:u                                              
         398263028      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        5060271926      L1-dcache-loads:u                                           
        1281653575      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10109610667      armv8_pmuv3_0/l1i_cache/:u                                   

      37.501384693 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1938289152
starting receive base loop
num_worker_connections 128
Creating worker on tid 828502528
starting receive base loop
num_worker_connections 128
Creating worker on tid 4009423360
starting receive base loop
num_worker_connections 128
Creating worker on tid 2900816384
starting receive base loop
num_worker_connections 128
Creating worker on tid 1792209408
starting receive base loop
num_worker_connections 128
Creating worker on tid 678162944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3864523264
starting receive base loop
Created 1024 connections total
Creating worker on tid 2750476800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320893.319318,       0.0,      356926,     321168,      35758,     215291,     105877,  67.761910, 133.100000, 193.000000, 965.800000, 154.964818,   0.000000, 1966.002941, 486.328566
Outstanding requests per worker:
1145 1036 1066 1080 1000 1075 1006 6160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162048.0,      810241,     729383,      80858,     552525,     176858,  37.848019,  60.200000,  94.700000, 241.200000,  89.328226,   0.366000, 2037.982941, 581.732008
Outstanding requests per worker:
399 446 437 400 401 404 454 440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159985.6,      799929,     720184,      79745,     576040,     144144,  21.815924,  39.400000,  50.600000,  63.200000,  13.900637,   0.314000, 115.437999, 628.691412
Outstanding requests per worker:
440 452 434 422 452 453 440 428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160016.2,      800082,     719880,      80202,     593404,     126476,  23.188956,  43.800000,  53.300000,  68.900000,  15.257743,   0.370000, 165.462002, 655.698529
Outstanding requests per worker:
430 451 437 410 434 454 419 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159895.8,      799480,     719479,      80001,     603117,     116362,  23.596797,  45.000000,  54.400000,  71.000000,  15.755687,   0.334000, 181.271002, 670.453270
Outstanding requests per worker:
439 481 512 495 573 512 503 538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160005.0,      800026,     720181,      79845,     612445,     107736,  26.023768,  52.100000,  59.600000,  97.200000,  18.876229,   0.378000, 193.928003, 684.161573
Outstanding requests per worker:
486 487 507 550 468 519 554 498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160020.6,      800104,     719985,      80119,     617846,     102139,  25.844426,  51.300000,  58.700000,  90.700000,  18.136457,   0.384000, 190.309003, 693.464519
Outstanding requests per worker:
490 485 559 469 493 532 528 489 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:41   0:00 /usr/lib/linux
memcache      7  350  0.0 449216 161664 pts/0   Sl+  20:41   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19726722839      instructions:u                                              
         399283698      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        5186424625      L1-dcache-loads:u                                           
        1300296683      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10287280971      armv8_pmuv3_0/l1i_cache/:u                                   

      37.150099789 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1250488832
starting receive base loop
num_worker_connections 128
Creating worker on tid 141292032
starting receive base loop
num_worker_connections 128
Creating worker on tid 3327652352
starting receive base loop
num_worker_connections 128
Creating worker on tid 2213605888
starting receive base loop
num_worker_connections 128
Creating worker on tid 1104998912
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
Created 1024 connections total
Creating worker on tid 2063266304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320936.319361,       0.0,      369980,     332673,      37307,     222789,     109884,  60.480662, 120.600000, 159.800000, 663.100000, 119.330305,   0.000000, 1691.972017, 485.812954
Outstanding requests per worker:
941 943 884 873 869 880 905 3814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161341.0,      806706,     725954,      80752,     551564,     174390,  29.789783,  51.700000,  63.000000, 143.800000,  58.795733,   0.426000, 1545.125961, 584.622366
Outstanding requests per worker:
461 446 425 403 460 419 438 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160000.4,      800003,     720000,      80003,     576955,     143045,  21.950168,  40.100000,  50.900000,  63.200000,  14.038782,   0.289000, 135.159999, 630.419681
Outstanding requests per worker:
392 462 407 439 443 488 429 477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159999.8,      800000,     720241,      79759,     593588,     126653,  22.667536,  41.300000,  52.100000,  66.000000,  14.539482,   0.406000, 145.055994, 655.197296
Outstanding requests per worker:
422 446 488 442 449 441 428 489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159891.8,      799460,     719936,      79524,     604079,     115857,  24.597118,  48.200000,  56.800000,  80.500000,  17.064183,   0.375000, 184.521005, 671.677312
Outstanding requests per worker:
556 481 563 470 558 529 533 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160032.4,      800163,     720668,      79495,     612898,     107770,  26.190602,  52.500000,  60.100000,  98.000000,  19.041281,   0.316000, 202.644005, 684.230894
Outstanding requests per worker:
469 540 506 554 512 490 535 514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159968.4,      799843,     720144,      79699,     618272,     101872,  26.793894,  53.900000,  62.000000, 104.000000,  20.015019,   0.332000, 211.934999, 693.682629
Outstanding requests per worker:
511 580 607 512 580 510 513 508 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:42   0:00 /usr/lib/linux
memcache      7  333  0.0 449216 168320 pts/0   Sl+  20:42   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19788769934      instructions:u                                              
         398796614      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        5200215432      L1-dcache-loads:u                                           
        1299079087      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10326143847      armv8_pmuv3_0/l1i_cache/:u                                   

      38.820609249 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1343222272
starting receive base loop
num_worker_connections 128
Creating worker on tid 232583680
starting receive base loop
num_worker_connections 128
Creating worker on tid 3413504512
starting receive base loop
num_worker_connections 128
Creating worker on tid 2304897536
starting receive base loop
num_worker_connections 128
Creating worker on tid 1190851072
starting receive base loop
num_worker_connections 128
Creating worker on tid 82244096
starting receive base loop
num_worker_connections 128
Creating worker on tid 3268604416
starting receive base loop
Created 1024 connections total
Creating worker on tid 2154557952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575320978.319403,       0.0,      360405,     324531,      35874,     216377,     108154,  77.472620, 167.000000, 214.900000, 830.700000, 145.011498,   0.000000, 1989.706993, 482.815226
Outstanding requests per worker:
1586 1470 1773 1522 1583 1510 1678 7405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165565.6,      827829,     744978,      82851,     564496,     180482,  68.734039, 146.800000, 177.100000, 479.300000, 112.665258,   0.387000, 2061.269999, 582.108321
Outstanding requests per worker:
890 979 910 896 919 869 809 835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163298.8,      816495,     734807,      81688,     588625,     146182,  42.571981, 118.100000, 148.800000, 180.800000,  44.424975,   0.355000, 283.585012, 630.476565
Outstanding requests per worker:
914 915 824 896 875 918 870 819 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163280.0,      816401,     734887,      81514,     606579,     128308,  42.635797, 113.300000, 145.900000, 180.200000,  43.119935,   0.455000, 307.458997, 656.528556
Outstanding requests per worker:
926 879 873 874 881 823 832 916 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162943.0,      814716,     733629,      81087,     616047,     117582,  47.109050, 123.500000, 156.600000, 198.800000,  47.172818,   0.355000, 397.857994, 672.787229
Outstanding requests per worker:
1040 1034 1187 1171 1021 1046 1104 1075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162996.4,      814983,     733710,      81273,     624239,     109471,  57.784860, 156.300000, 187.300000, 257.100000,  60.327185,   0.409000, 531.831980, 684.837553
Outstanding requests per worker:
1146 1288 1208 1233 1275 1400 1261 1299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160768.8,      803845,     723056,      80789,     621410,     101646,  69.510666, 191.500000, 235.600000, 299.700000,  74.266650,   0.519000, 526.342988, 694.697337
Outstanding requests per worker:
2939 2819 2808 2867 2889 2730 2759 2881 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  20:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:43   0:00 /usr/lib/linux
memcache      8  350  0.0 516224 175360 pts/0   Sl+  20:43   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20237187491      instructions:u                                              
         404516448      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        5349109829      L1-dcache-loads:u                                           
        1316009973      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10524239132      armv8_pmuv3_0/l1i_cache/:u                                   

      37.120830395 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1553854976
starting receive base loop
num_worker_connections 128
Creating worker on tid 441971200
starting receive base loop
num_worker_connections 128
Creating worker on tid 3622892032
starting receive base loop
num_worker_connections 128
Creating worker on tid 2514285056
starting receive base loop
num_worker_connections 128
Creating worker on tid 1400238592
starting receive base loop
num_worker_connections 128
Creating worker on tid 291631616
starting receive base loop
num_worker_connections 128
Creating worker on tid 3472552448
starting receive base loop
Created 1024 connections total
Creating worker on tid 2363945472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321020.319445,       0.0,      360070,     323999,      36071,     216743,     107256,  73.759467, 125.100000, 180.400000, 1102.500000, 172.655402,   0.000000, 1967.265964, 484.735851
Outstanding requests per worker:
1278 1241 1334 1234 1295 1337 1284 14658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167635.6,      838179,     754369,      83810,     572158,     182211, 138.070366, 204.600000, 329.300000, 1389.100000, 221.833439,   0.900000, 2226.592064, 583.236400
Outstanding requests per worker:
2224 2170 2155 2158 2214 2165 2139 3701 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167133.8,      835670,     752190,      83480,     602966,     149224, 105.224323, 232.400000, 280.600000, 397.500000, 102.329643,   0.997000, 1444.646001, 630.785240
Outstanding requests per worker:
2161 1841 2075 2022 2150 2052 2047 2298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166598.4,      832993,     749631,      83362,     618875,     130756, 102.165906, 280.700000, 331.500000, 428.600000, 108.678269,   0.794000, 979.445994, 656.638071
Outstanding requests per worker:
2202 2149 2082 2033 2162 2106 2246 2070 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166493.2,      832467,     749346,      83121,     629634,     119712, 105.517134, 292.400000, 346.600000, 442.000000, 111.743715,   0.892000, 671.822011, 673.419472
Outstanding requests per worker:
2238 2254 2187 2259 2292 2288 2322 2169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166423.4,      832118,     749142,      82976,     638127,     111015, 110.328580, 306.300000, 366.800000, 461.100000, 117.041864,   0.787000, 691.244006, 685.957973
Outstanding requests per worker:
2273 2458 2444 2413 2470 2466 2454 2353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164859.8,      824300,     741513,      82787,     638367,     103146, 125.393747, 324.700000, 388.500000, 487.900000, 122.997887,   0.969000, 731.207013, 695.467378
Outstanding requests per worker:
3382 3650 3809 3501 3543 3621 3391 3521 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:43   0:00 /usr/lib/linux
memcache      7  350  0.0 516224 171328 pts/0   Sl+  20:43   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20780806963      instructions:u                                              
         411537477      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        5518955934      L1-dcache-loads:u                                           
        1335289109      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10775296718      armv8_pmuv3_0/l1i_cache/:u                                   

      37.271300866 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1252913664
starting receive base loop
num_worker_connections 128
Creating worker on tid 141292032
starting receive base loop
num_worker_connections 128
Creating worker on tid 3327652352
starting receive base loop
num_worker_connections 128
Creating worker on tid 2213605888
starting receive base loop
num_worker_connections 128
Creating worker on tid 1104998912
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
Created 1024 connections total
Creating worker on tid 2063266304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321062.319487,       0.0,      356477,     320610,      35867,     214603,     106007,  85.814861, 186.600000, 236.000000, 827.700000, 145.641694,   0.000000, 1923.872948, 485.317077
Outstanding requests per worker:
2038 2186 2028 2022 2062 1903 2030 11330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166223.4,      831118,     748168,      82950,     568011,     180157, 167.294839, 265.900000, 340.300000, 1285.900000, 201.190285,   1.088000, 2469.033003, 583.924038
Outstanding requests per worker:
3401 3286 3390 3291 3281 3343 3162 4731 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165711.6,      828559,     745343,      83216,     597187,     148156, 180.971025, 306.600000, 363.300000, 464.400000,  98.493465,   0.644000, 1207.996964, 630.155642
Outstanding requests per worker:
4124 4066 4046 4237 3992 3933 4050 4264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165922.2,      829612,     747158,      82454,     616413,     130745, 207.487331, 340.300000, 400.500000, 513.500000,  98.697616,   1.110000, 834.949017, 656.398901
Outstanding requests per worker:
4399 4584 4539 4612 4541 4545 4777 4488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166150.8,      830755,     747853,      82902,     628590,     119263, 227.952449, 377.100000, 437.700000, 555.000000, 107.100233,   1.623000, 933.277011, 673.764329
Outstanding requests per worker:
4987 5040 4908 4904 4901 4827 4766 4783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166258.4,      831293,     747887,      83406,     636283,     111604, 242.743771, 397.700000, 464.800000, 608.600000, 114.425883,   1.182000, 943.942010, 685.082848
Outstanding requests per worker:
5354 5048 5243 5104 5081 5165 5073 5158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164823.2,      824117,     741371,      82746,     638074,     103297, 260.103429, 433.500000, 513.100000, 649.600000, 126.286170,   1.524000, 1013.120055, 696.023069
Outstanding requests per worker:
6467 6363 6225 6169 6362 6165 6329 6410 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:44   0:00 /usr/lib/linux
memcache      7  350  0.0 517248 184064 pts/0   Sl+  20:44   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20818699875      instructions:u                                              
         416353003      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        5605125715      L1-dcache-loads:u                                           
        1349222406      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10863509282      armv8_pmuv3_0/l1i_cache/:u                                   

      37.250952929 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1171911168
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
num_worker_connections 128
Creating worker on tid 2130375168
starting receive base loop
num_worker_connections 128
Creating worker on tid 1021768192
starting receive base loop
num_worker_connections 128
Creating worker on tid 4208128512
starting receive base loop
num_worker_connections 128
Creating worker on tid 3094082048
starting receive base loop
Created 1024 connections total
Creating worker on tid 1985475072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321104.319529,       0.0,      362560,     325971,      36589,     217946,     108025,  86.685119, 175.100000, 223.700000, 923.000000, 156.435916,   0.000000, 1989.809990, 483.973688
Outstanding requests per worker:
2031 2136 2044 1929 2117 2058 2000 17229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166890.0,      834451,     750617,      83834,     571056,     179561, 247.519901, 334.200000, 674.700000, 1955.400000, 321.457481,   0.928000, 2793.203115, 585.457316
Outstanding requests per worker:
5158 5039 4915 5203 4970 5040 4978 12967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168384.8,      841925,     758176,      83749,     608396,     149780, 315.791429, 450.500000, 576.000000, 1589.400000, 242.115954,   1.145000, 2688.013077, 632.143626
Outstanding requests per worker:
6725 6767 6283 6349 6719 6568 6422 11630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168821.6,      844109,     759959,      84150,     627360,     132599, 360.108429, 540.500000, 650.400000, 1412.900000, 216.095481,   3.281000, 2540.424109, 657.571522
Outstanding requests per worker:
7586 7695 7497 7694 7545 7756 7395 11326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168793.8,      843970,     759084,      84886,     637921,     121163, 400.014225, 632.700000, 763.400000, 1286.200000, 216.663998,   3.304000, 2483.174086, 673.174873
Outstanding requests per worker:
8641 8755 8447 8568 8579 8822 8408 11466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169062.4,      845313,     760852,      84461,     647730,     113122, 437.152218, 737.200000, 903.100000, 1361.200000, 242.552734,   5.330000, 2513.658047, 685.995061
Outstanding requests per worker:
9477 9406 9055 9646 9314 9381 9324 11911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167264.8,      836325,     752363,      83962,     648349,     104014, 486.482447, 842.000000, 1045.800000, 1462.000000, 272.114329,   3.555000, 2618.398905, 696.951913
Outstanding requests per worker:
11412 11589 11036 11247 11159 11213 11308 13350 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:45   0:00 /usr/lib/linux
memcache      7  350  0.0 519296 188864 pts/0   Sl+  20:45   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21208789545      instructions:u                                              
         423196946      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        5697652801      L1-dcache-loads:u                                           
        1348180825      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10980913417      armv8_pmuv3_0/l1i_cache/:u                                   

      37.190498928 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 8
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1245901312
starting receive base loop
num_worker_connections 128
Creating worker on tid 133231104
starting receive base loop
num_worker_connections 128
Creating worker on tid 3319591424
starting receive base loop
num_worker_connections 128
Creating worker on tid 2205544960
starting receive base loop
num_worker_connections 128
Creating worker on tid 1096937984
starting receive base loop
num_worker_connections 128
Creating worker on tid 4277858816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3169251840
starting receive base loop
Created 1024 connections total
Creating worker on tid 2060644864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321147.319572,       0.0,      371788,     334510,      37278,     223528,     110982,  83.831237, 174.400000, 220.400000, 823.800000, 140.792269,   0.000000, 1922.652006, 484.531473
Outstanding requests per worker:
1972 1864 1825 2017 1990 2132 2131 12831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168272.8,      841365,     757307,      84058,     575908,     181399, 193.248150, 263.600000, 341.300000, 1753.700000, 259.616931,   0.783000, 2920.186996, 585.217228
Outstanding requests per worker:
3816 4047 3993 3979 3898 4014 4149 8663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169057.8,      845290,     760944,      84346,     609997,     150947, 234.303710, 355.700000, 419.500000, 1348.500000, 194.541637,   1.087000, 2518.675089, 630.748918
Outstanding requests per worker:
4759 4848 4952 5210 4940 4833 5054 7850 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169079.4,      845398,     761359,      84039,     628272,     133087, 266.315378, 423.500000, 508.400000, 1190.000000, 183.317260,   0.823000, 2235.341072, 657.031173
Outstanding requests per worker:
5489 5703 5900 5572 5647 5766 6091 7995 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169191.4,      845958,     761538,      84420,     640929,     120609, 298.617733, 488.800000, 571.400000, 959.100000, 186.336362,   1.529000, 2243.869066, 674.009321
Outstanding requests per worker:
6239 6412 6497 6566 6400 6516 6191 8518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169189.4,      845948,     760942,      85006,     648931,     112011, 329.013855, 560.700000, 667.400000, 1008.600000, 205.193049,   2.040000, 2424.665928, 686.617088
Outstanding requests per worker:
7101 6952 7191 7042 6912 7154 7205 8994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168759.2,      843797,     758913,      84884,     653414,     105499, 360.392748, 629.800000, 756.400000, 1159.100000, 224.112565,   2.011000, 2649.879932, 695.660682
Outstanding requests per worker:
8086 7780 8166 7987 7742 8077 8029 10059 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:46   0:00 /usr/lib/linux
memcache      8  332  0.0 521344 192192 pts/0   Sl+  20:46   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21258927818      instructions:u                                              
         434515777      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        5717265529      L1-dcache-loads:u                                           
        1366346834      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11051200174      armv8_pmuv3_0/l1i_cache/:u                                   

      38.740893308 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1077080576
starting receive base loop
num_worker_connections 128
Creating worker on tid 4259115520
starting receive base loop
num_worker_connections 128
Creating worker on tid 3145069056
starting receive base loop
num_worker_connections 128
Creating worker on tid 2036462080
starting receive base loop
num_worker_connections 128
Creating worker on tid 922415616
starting receive base loop
num_worker_connections 128
Creating worker on tid 4108775936
starting receive base loop
num_worker_connections 128
Creating worker on tid 3000168960
starting receive base loop
Created 1024 connections total
Creating worker on tid 1886122496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321189.319614,       0.0,      363538,     327069,      36469,     218312,     108757,  94.884641, 191.800000, 248.400000, 976.000000, 161.126819,   0.000000, 1965.842962, 483.152613
Outstanding requests per worker:
2415 2273 2597 2535 2441 2567 2864 20563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167867.6,      839339,     755403,      83936,     574454,     180949, 318.634471, 415.300000, 969.100000, 2367.500000, 405.327937,   1.507000, 3847.568989, 584.807836
Outstanding requests per worker:
6862 6857 6777 6694 7016 6690 6802 20851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169796.2,      848982,     764630,      84352,     614428,     150202, 452.595793, 608.400000, 868.100000, 2469.800000, 379.379808,  12.830000, 4049.499035, 632.065417
Outstanding requests per worker:
9849 9667 9813 9627 9520 9517 9602 21627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170179.6,      850899,     765765,      85134,     632406,     133359, 565.244263, 790.600000, 1027.600000, 2608.800000, 383.926338,  29.509000, 4151.964188, 657.763360
Outstanding requests per worker:
12098 12213 12365 12059 11837 11905 11933 23585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169888.0,      849441,     765051,      84390,     643807,     121244, 673.768437, 1003.700000, 1274.900000, 2785.600000, 411.925121,  22.781000, 4352.178097, 674.559292
Outstanding requests per worker:
14740 14561 14994 14492 14479 14727 14611 25563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169286.6,      846434,     761684,      84750,     649312,     112372, 798.724953, 1223.600000, 1508.300000, 3033.200000, 455.263895, 119.667001, 4663.146019, 686.771185
Outstanding requests per worker:
17763 17413 17381 17643 17511 17853 17436 28368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168299.4,      841498,     757057,      84441,     652377,     104680, 935.191372, 1461.800000, 1769.300000, 3252.800000, 511.584256, 128.276005, 4822.594166, 696.789476
Outstanding requests per worker:
21126 21122 21031 21263 20888 21756 20518 31829 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:46   0:00 /usr/lib/linux
memcache      7  341  0.0 520320 194368 pts/0   Sl+  20:46   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21289504591      instructions:u                                              
         417353311      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        5690254267      L1-dcache-loads:u                                           
        1345271084      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       10954933353      armv8_pmuv3_0/l1i_cache/:u                                   

      37.341891369 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1397027328
starting receive base loop
num_worker_connections 128
Creating worker on tid 283570688
starting receive base loop
num_worker_connections 128
Creating worker on tid 3469931008
starting receive base loop
num_worker_connections 128
Creating worker on tid 2355884544
starting receive base loop
num_worker_connections 128
Creating worker on tid 1247277568
starting receive base loop
num_worker_connections 128
Creating worker on tid 133231104
starting receive base loop
num_worker_connections 128
Creating worker on tid 3319591424
starting receive base loop
Created 1024 connections total
Creating worker on tid 2205544960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321232.319657,       0.0,      408408,     367267,      41141,     247478,     119789,  77.964359, 158.600000, 210.800000, 1032.800000, 168.586787,   0.000000, 1988.903999, 490.665731
Outstanding requests per worker:
2325 2117 2372 2251 2400 2170 2749 26273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168864.2,      844322,     760123,      84199,     581982,     178141, 380.177188, 539.900000, 1481.800000, 2614.500000, 468.082222,   1.738000, 3986.674070, 590.312765
Outstanding requests per worker:
8209 8465 8444 8448 8520 8351 8540 28322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171103.4,      855518,     770106,      85412,     619812,     150294, 587.304546, 796.900000, 1527.600000, 2688.900000, 447.077909,  35.218999, 4395.043850, 634.561462
Outstanding requests per worker:
12864 12827 12727 12829 12553 12817 12861 31256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170829.6,      854149,     768842,      85307,     636012,     132830, 771.956857, 1080.800000, 1662.200000, 2825.100000, 460.494539, 114.956997, 4618.822098, 658.742527
Outstanding requests per worker:
16996 17274 17070 17429 16919 17314 17222 35311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170761.6,      853809,     768753,      85056,     647212,     121541, 967.952670, 1407.200000, 1782.500000, 3163.400000, 496.205862, 152.981997, 4639.801979, 674.546143
Outstanding requests per worker:
21420 21506 21728 22076 20938 21738 21616 39657 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170302.4,      851513,     766069,      85444,     653749,     112320, 1170.893421, 1690.700000, 2026.200000, 3420.100000, 535.439891, 176.927999, 4914.442062, 687.664431
Outstanding requests per worker:
26119 26011 26378 26848 25796 26238 26479 44308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169017.6,      845089,     760160,      84929,     654965,     105195, 1396.442870, 2020.900000, 2354.600000, 3753.600000, 584.101980, 158.231005, 5322.751999, 696.711928
Outstanding requests per worker:
31516 31512 31882 32458 31093 31830 31809 49946 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:47   0:00 /usr/lib/linux
memcache      7  337  0.0 520320 196928 pts/0   Sl+  20:47   2:11 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21546318887      instructions:u                                              
         423446366      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        5743235065      L1-dcache-loads:u                                           
        1369311977      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11086126729      armv8_pmuv3_0/l1i_cache/:u                                   

      38.390849947 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 0722b19d601b5d43ef2049a8dcbf7382b7ca6f26cf576e2431425c879bb137a7 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l1i_cache_refill/,armv8_pmuv3_0/l1i_cache/ memcached -t 4 -m 4096 -n 550 -c 1152
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2093216256
starting receive base loop
num_worker_connections 128
Creating worker on tid 978842112
starting receive base loop
num_worker_connections 128
Creating worker on tid 4159762944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3051155968
starting receive base loop
num_worker_connections 128
Creating worker on tid 1937109504
starting receive base loop
num_worker_connections 128
Creating worker on tid 828502528
starting receive base loop
num_worker_connections 128
Creating worker on tid 4009423360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2900816384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575321274.319699,       0.0,      374591,     337067,      37524,     225386,     111681,  81.480642, 145.500000, 226.000000, 1097.700000, 184.041560,   0.000000, 1968.009949, 484.715629
Outstanding requests per worker:
1496 1580 1604 1662 1618 1583 2626 31225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169380.6,      846904,     762391,      84513,     579612,     182779, 375.840544, 565.800000, 1707.800000, 2826.300000, 528.654120,   1.235000, 3670.898914, 584.988346
Outstanding requests per worker:
7627 7589 7618 7862 7610 7781 7669 31684 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171857.0,      859286,     773143,      86143,     621039,     152104, 564.438890, 762.400000, 1748.900000, 2877.400000, 490.067901,  38.484000, 3811.300039, 632.589511
Outstanding requests per worker:
11781 11506 11484 11766 11695 11634 11656 33583 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171796.8,      858985,     773162,      85823,     638683,     134479, 731.862328, 1043.100000, 1863.700000, 3121.700000, 499.157211,  80.494002, 3968.702078, 657.735918
Outstanding requests per worker:
15950 15235 15093 15729 15408 15353 15462 36836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171434.6,      857174,     771388,      85786,     650180,     121208, 900.925559, 1334.700000, 2025.200000, 3245.400000, 526.973271,  84.709004, 4322.985172, 676.046415
Outstanding requests per worker:
19946 19237 18916 20086 19239 19286 19449 40703 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171190.8,      855955,     770189,      85766,     657253,     112936, 1079.015583, 1616.400000, 2243.600000, 3380.200000, 560.915165, 163.247004, 4620.971203, 688.126774
Outstanding requests per worker:
23968 23225 23420 23982 23416 23218 23954 44680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169612.4,      848063,     763189,      84874,     657679,     105510, 1282.450266, 1911.700000, 2469.800000, 3583.100000, 599.200970, 153.990999, 5217.044830, 696.636040
Outstanding requests per worker:
29009 28442 28632 28798 28601 28215 29287 49769 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:48   0:00 /usr/lib/linux
memcache      8  341  0.0 521344 199808 pts/0   Sl+  20:48   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21428803164      instructions:u                                              
         414060489      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        5734030591      L1-dcache-loads:u                                           
        1349732253      armv8_pmuv3_0/l1i_cache_refill/:u                                   
       11017949451      armv8_pmuv3_0/l1i_cache/:u                                   

      37.310841447 seconds time elapsed

